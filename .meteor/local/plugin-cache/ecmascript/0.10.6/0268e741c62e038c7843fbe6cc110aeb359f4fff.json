{"metadata":{},"options":{"plugins":[{"key":"base$0$0","visitor":{"Program":{"enter":[null]},"_exploded":true,"_verified":true},"options":{"generateLetDeclarations":true,"enforceStrictMode":false}},{"key":"transform-meteor-dynamic-import","visitor":{"_exploded":{},"_verified":{},"CallExpression":{"enter":[null]}},"options":{}},{"key":"base$0$2","visitor":{"CallExpression":{"enter":[null]},"BinaryExpression":{"enter":[null]},"MemberExpression":{"enter":[null],"exit":[null]},"_exploded":true,"_verified":true,"Identifier":{"enter":[null]},"JSXIdentifier":{"enter":[null]}},"options":{"polyfill":false,"useBuiltIns":false}},{"key":"base$0$3","visitor":{"_exploded":{},"_verified":{},"ClassDeclaration":{"enter":[null]},"ClassExpression":{"enter":[null]}},"options":{"loose":true}},{"key":"base$0$4","visitor":{"FunctionExpression":{"exit":[null]},"_exploded":true,"_verified":true},"options":{}},{"key":"base$0$5","visitor":{"ForInStatement":{"enter":[null]},"_exploded":true,"_verified":true},"options":{}},{"key":"base$0$6","visitor":{"Program":{"exit":[null]},"_exploded":true,"_verified":true},"options":{"allowTopLevelThis":true,"strictMode":false,"loose":true}},{"key":"base$0$1$0","visitor":{"_exploded":{},"_verified":{},"JSXNamespacedName":{"enter":[null]},"JSXElement":{"exit":[null]},"JSXFragment":{"exit":[null]},"Program":{"enter":[null],"exit":[null]},"JSXAttribute":{"enter":[null]}},"options":{"pragma":"React.createElement","pragmaFrag":"React.Fragment","throwIfNamespace":true,"useBuiltIns":false}},{"key":"base$0$1$1","visitor":{"_exploded":true,"_verified":true},"options":{}},{"key":"base$0$1$2","visitor":{"ExportDefaultDeclaration":{"enter":[null]},"CallExpression":{"enter":[null]},"_exploded":true,"_verified":true},"options":{}},{"key":"base$0$0$0","visitor":{"_exploded":true,"_verified":true},"options":{}},{"key":"base$0$0$1","visitor":{"_exploded":true,"_verified":true},"options":{}},{"key":"base$0$0$2","visitor":{"ArrowFunctionExpression":{"enter":[null]},"_exploded":true,"_verified":true},"options":{}},{"key":"base$0$0$3","visitor":{"BlockStatement":{"enter":[null]},"SwitchCase":{"enter":[null]},"_exploded":true,"_verified":true},"options":{}},{"key":"base$0$0$4","visitor":{"VariableDeclaration":{"enter":[null]},"CatchClause":{"enter":[null]},"_exploded":true,"BlockStatement":{"enter":[null]},"SwitchStatement":{"enter":[null]},"Program":{"enter":[null]},"_verified":true,"DoWhileStatement":{"enter":[null]},"ForInStatement":{"enter":[null]},"ForStatement":{"enter":[null]},"WhileStatement":{"enter":[null]},"ForOfStatement":{"enter":[null]}},"options":{}},{"key":"base$0$0$5","visitor":{"ExportDefaultDeclaration":{"enter":[null]},"ClassDeclaration":{"enter":[null]},"ClassExpression":{"enter":[null]},"_exploded":true,"_verified":true},"options":{"loose":true}},{"key":"base$0$0$6","visitor":{"ObjectExpression":{"exit":[null]},"_exploded":true,"_verified":true},"options":{"loose":true}},{"key":"base$0$0$7","visitor":{"ExportNamedDeclaration":{"enter":[null]},"CatchClause":{"enter":[null]},"AssignmentExpression":{"enter":[null]},"VariableDeclaration":{"enter":[null]},"_exploded":true,"_verified":true,"ForInStatement":{"enter":[null]},"ForOfStatement":{"enter":[null]}},"options":{}},{"key":"base$0$0$8","visitor":{"ForOfStatement":{"enter":[null]},"_exploded":true,"_verified":true},"options":{"loose":true}},{"key":"base$0$0$9","visitor":{"NumericLiteral":{"enter":[null]},"StringLiteral":{"enter":[null]},"_exploded":true,"_verified":true},"options":{}},{"key":"base$0$0$10","visitor":{"ObjectExpression":{"enter":[null]},"_exploded":true,"_verified":true},"options":{}},{"key":"base$0$0$11","visitor":{"_exploded":true,"_verified":true,"FunctionDeclaration":{"enter":[null]},"FunctionExpression":{"enter":[null]},"ObjectMethod":{"enter":[null]},"ArrowFunctionExpression":{"enter":[null]},"ClassMethod":{"enter":[null]}},"options":{}},{"key":"base$0$0$12","visitor":{"ObjectMethod":{"enter":[null]},"ObjectProperty":{"enter":[null]},"_exploded":true,"_verified":true},"options":{}},{"key":"base$0$0$13","visitor":{"ArrayExpression":{"enter":[null]},"CallExpression":{"enter":[null]},"NewExpression":{"enter":[null]},"_exploded":true,"_verified":true},"options":{}},{"key":"base$0$0$14","visitor":{"RegExpLiteral":{"enter":[null]},"_exploded":true,"_verified":true},"options":{}},{"key":"base$0$0$15","visitor":{"TaggedTemplateExpression":{"enter":[null]},"TemplateLiteral":{"enter":[null]},"_exploded":true,"_verified":true},"options":{"loose":true}},{"key":"base$0$0$16","visitor":{"UnaryExpression":{"enter":[null]},"_exploded":true,"_verified":true,"BlockStatement":{"enter":[null]},"CatchClause":{"enter":[null]},"DoWhileStatement":{"enter":[null]},"ForInStatement":{"enter":[null]},"ForStatement":{"enter":[null]},"FunctionDeclaration":{"enter":[null]},"FunctionExpression":{"enter":[null]},"Program":{"enter":[null]},"ObjectMethod":{"enter":[null]},"SwitchStatement":{"enter":[null]},"WhileStatement":{"enter":[null]},"ArrowFunctionExpression":{"enter":[null]},"ClassDeclaration":{"enter":[null]},"ClassExpression":{"enter":[null]},"ForOfStatement":{"enter":[null]},"ClassMethod":{"enter":[null]}},"options":{}},{"key":"base$0$0$17","visitor":{"RegExpLiteral":{"enter":[null]},"_exploded":true,"_verified":true},"options":{}},{"key":"base$0$0$18","visitor":{"_exploded":true,"_verified":true},"options":{}},{"key":"base$0$0$19","visitor":{"_exploded":{},"_verified":{},"VariableDeclarator":{"enter":[null]},"ExportNamedDeclaration":{"enter":[null]},"CatchClause":{"enter":[null]},"AssignmentExpression":{"enter":[null]},"ObjectExpression":{"enter":[null]},"FunctionDeclaration":{"enter":[null]},"FunctionExpression":{"enter":[null]},"ObjectMethod":{"enter":[null]},"ArrowFunctionExpression":{"enter":[null]},"ClassMethod":{"enter":[null]},"ForInStatement":{"enter":[null]},"ForOfStatement":{"enter":[null]}},"options":{}},{"key":"base$0$0$20","visitor":{"ObjectProperty":{"exit":[null]},"_exploded":true,"_verified":true},"options":{}},{"key":"base$0$0$21","visitor":{"_exploded":{},"_verified":{},"Program":{"enter":[null]},"ImportDeclaration":{"enter":[null,null]},"ClassProperty":{"enter":[null]},"AssignmentPattern":{"enter":[null]},"TypeCastExpression":{"enter":[null,null]},"ImportSpecifier":{"enter":[null]},"ClassDeclaration":{"enter":[null]},"ClassExpression":{"enter":[null]},"FunctionDeclaration":{"enter":[null]},"FunctionExpression":{"enter":[null]},"ObjectMethod":{"enter":[null]},"ArrowFunctionExpression":{"enter":[null]},"ClassMethod":{"enter":[null]},"AnyTypeAnnotation":{"enter":[null]},"ArrayTypeAnnotation":{"enter":[null]},"BooleanTypeAnnotation":{"enter":[null]},"BooleanLiteralTypeAnnotation":{"enter":[null]},"NullLiteralTypeAnnotation":{"enter":[null]},"ClassImplements":{"enter":[null]},"DeclareClass":{"enter":[null]},"DeclareFunction":{"enter":[null]},"DeclareInterface":{"enter":[null]},"DeclareModule":{"enter":[null]},"DeclareModuleExports":{"enter":[null]},"DeclareTypeAlias":{"enter":[null]},"DeclareOpaqueType":{"enter":[null]},"DeclareVariable":{"enter":[null]},"DeclareExportDeclaration":{"enter":[null]},"DeclareExportAllDeclaration":{"enter":[null]},"DeclaredPredicate":{"enter":[null]},"ExistsTypeAnnotation":{"enter":[null]},"FunctionTypeAnnotation":{"enter":[null]},"FunctionTypeParam":{"enter":[null]},"GenericTypeAnnotation":{"enter":[null]},"InferredPredicate":{"enter":[null]},"InterfaceExtends":{"enter":[null]},"InterfaceDeclaration":{"enter":[null]},"IntersectionTypeAnnotation":{"enter":[null]},"MixedTypeAnnotation":{"enter":[null]},"EmptyTypeAnnotation":{"enter":[null]},"NullableTypeAnnotation":{"enter":[null]},"NumberLiteralTypeAnnotation":{"enter":[null]},"NumberTypeAnnotation":{"enter":[null]},"ObjectTypeAnnotation":{"enter":[null]},"ObjectTypeCallProperty":{"enter":[null]},"ObjectTypeIndexer":{"enter":[null]},"ObjectTypeProperty":{"enter":[null]},"ObjectTypeSpreadProperty":{"enter":[null]},"OpaqueType":{"enter":[null]},"QualifiedTypeIdentifier":{"enter":[null]},"StringLiteralTypeAnnotation":{"enter":[null]},"StringTypeAnnotation":{"enter":[null]},"ThisTypeAnnotation":{"enter":[null]},"TupleTypeAnnotation":{"enter":[null]},"TypeofTypeAnnotation":{"enter":[null]},"TypeAlias":{"enter":[null]},"TypeAnnotation":{"enter":[null]},"TypeParameter":{"enter":[null]},"TypeParameterDeclaration":{"enter":[null]},"TypeParameterInstantiation":{"enter":[null]},"UnionTypeAnnotation":{"enter":[null]},"Variance":{"enter":[null]},"VoidTypeAnnotation":{"enter":[null]},"ExportAllDeclaration":{"enter":[null]},"ExportDefaultDeclaration":{"enter":[null]},"ExportNamedDeclaration":{"enter":[null]}},"options":{}},{"key":"base$0$0$22","visitor":{"AssignmentExpression":{"enter":[null]},"BinaryExpression":{"enter":[null]},"_exploded":true,"_verified":true},"options":{}},{"key":"base$0$0$23","visitor":{"_exploded":{},"_verified":{},"Program":{"enter":[null]}},"options":{}},{"key":"regenerator-transform","visitor":{"_exploded":true,"_verified":true,"FunctionDeclaration":{"exit":[null]},"FunctionExpression":{"exit":[null]},"ObjectMethod":{"exit":[null]},"ArrowFunctionExpression":{"exit":[null]},"ClassMethod":{"exit":[null]}},"options":{}}],"presets":[],"compact":false,"ast":true,"babelrc":false,"sourceFileName":"imports/plugins/core/orders/client/containers/orderDashboardContainer.js","filename":"imports/plugins/core/orders/client/containers/orderDashboardContainer.js","sourceMaps":true,"envName":"development","cwd":"/Users/estebandev/test-knowledge","passPerPreset":false,"parserOpts":{"sourceType":"module","sourceFileName":"imports/plugins/core/orders/client/containers/orderDashboardContainer.js","plugins":["dynamicImport","classProperties","jsx","jsx","flow","asyncGenerators","objectRestSpread","objectRestSpread","flow","asyncGenerators"]},"generatorOpts":{"filename":"imports/plugins/core/orders/client/containers/orderDashboardContainer.js","comments":true,"compact":false,"sourceMaps":true,"sourceFileName":"imports/plugins/core/orders/client/containers/orderDashboardContainer.js"}},"code":"var _objectSpread2 = _interopRequireDefault(require(\"@babel/runtime/helpers/objectSpread\"));\n\nvar _inheritsLoose2 = _interopRequireDefault(require(\"@babel/runtime/helpers/inheritsLoose\"));\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { \"default\": obj }; }\n\nvar _compose;\n\nmodule.watch(require(\"recompose/compose\"), {\n  \"default\": function (v) {\n    _compose = v;\n  }\n}, 0);\nvar React, Component;\nmodule.watch(require(\"react\"), {\n  \"default\": function (v) {\n    React = v;\n  },\n  Component: function (v) {\n    Component = v;\n  }\n}, 1);\nvar registerComponent;\nmodule.watch(require(\"../../../components/lib\"), {\n  registerComponent: function (v) {\n    registerComponent = v;\n  }\n}, 2);\nvar filterShippingStatus, filterWorkflowStatus;\nmodule.watch(require(\"../helpers\"), {\n  filterShippingStatus: function (v) {\n    filterShippingStatus = v;\n  },\n  filterWorkflowStatus: function (v) {\n    filterWorkflowStatus = v;\n  }\n}, 3);\nvar OrderSubscription;\nmodule.watch(require(\"./orderSubscriptionContainer\"), {\n  \"default\": function (v) {\n    OrderSubscription = v;\n  }\n}, 4);\n\nvar wrapComponent = function (Comp) {\n  return (\n    /*#__PURE__*/\n    function (_Component) {\n      (0, _inheritsLoose2.default)(OrderDashboardContainer, _Component);\n\n      function OrderDashboardContainer(props) {\n        var _this;\n\n        _this = _Component.call(this, props) || this;\n\n        _this.filterDates = function (startDate, endDate) {\n          var query = _this.state.query;\n\n          if (startDate && endDate) {\n            // generate time for start and end of day\n            var formattedEndDate = endDate.endOf(\"day\");\n            var formattedStartDate = startDate.startOf(\"day\");\n            query.createdAt = {\n              $gte: new Date(formattedStartDate.toISOString()),\n              $lte: new Date(formattedEndDate.toISOString())\n            };\n\n            _this.setState({\n              query: query\n            });\n          }\n        };\n\n        _this.handleSearchChange = function (value) {\n          _this.setState({\n            searchQuery: value\n          });\n        };\n\n        _this.filterWorkflowStatus = function (event, value) {\n          var query = filterWorkflowStatus(value);\n          var shippingFilter = _this.state.shippingFilter;\n\n          if (_this.state.query.createdAt) {\n            query.createdAt = _this.state.query.createdAt;\n          }\n\n          if (_this.state.query._id) {\n            query._id = _this.state.query._id;\n          }\n\n          _this.setState({\n            query: (0, _objectSpread2.default)({}, filterShippingStatus(shippingFilter.toLowerCase()), query),\n            workflowFilter: value\n          });\n        };\n\n        _this.filterShippingStatus = function (event, value) {\n          var query = filterShippingStatus(value);\n          var workflowFilter = _this.state.workflowFilter;\n\n          if (_this.state.query.createdAt) {\n            query.createdAt = _this.state.query.createdAt;\n          }\n\n          if (_this.state.query._id) {\n            query._id = _this.state.query._id;\n          }\n\n          _this.setState({\n            query: (0, _objectSpread2.default)({}, filterWorkflowStatus(workflowFilter.toLowerCase()), query),\n            shippingFilter: value\n          });\n        };\n\n        _this.clearFilter = function (filterString) {\n          var query;\n          var _this$state = _this.state,\n              shippingFilter = _this$state.shippingFilter,\n              workflowFilter = _this$state.workflowFilter;\n\n          if (filterString === \"workflow\") {\n            workflowFilter = \"\";\n            query = (0, _objectSpread2.default)({}, filterWorkflowStatus(workflowFilter), filterShippingStatus(shippingFilter.toLowerCase()));\n\n            if (_this.state.query.createdAt) {\n              query.createdAt = _this.state.query.createdAt;\n            }\n          } else if (filterString === \"date\") {\n            query = (0, _objectSpread2.default)({}, filterWorkflowStatus(workflowFilter.toLowerCase()), filterShippingStatus(shippingFilter.toLowerCase()));\n          } else if (filterString === \"shipping\") {\n            shippingFilter = \"\";\n            query = (0, _objectSpread2.default)({}, filterWorkflowStatus(workflowFilter.toLowerCase()), filterShippingStatus(shippingFilter));\n\n            if (_this.state.query.createdAt) {\n              query.createdAt = _this.state.query.createdAt;\n            }\n          } // If there is an id on the current search appeng it to query\n\n\n          if (_this.state.query._id) {\n            query._id = _this.state.query._id;\n          }\n\n          _this.setState({\n            query: query,\n            shippingFilter: shippingFilter,\n            workflowFilter: workflowFilter\n          });\n        };\n\n        _this.updatePage = function (page) {\n          var offset = page * _this.state.pageSize;\n\n          _this.setState({\n            skip: offset,\n            page: page\n          });\n        };\n\n        _this.updatePageSize = function (pageSize, pageIndex) {\n          var offset = pageIndex * pageSize;\n\n          _this.setState({\n            pageSize: pageSize,\n            skip: offset\n          });\n        };\n\n        _this.state = {\n          query: {},\n          searchQuery: \"\",\n          shippingFilter: \"\",\n          workflowFilter: \"\",\n          skip: 0,\n          pageSize: 10,\n          page: 0\n        };\n        return _this;\n      }\n\n      var _proto = OrderDashboardContainer.prototype;\n\n      _proto.render = function () {\n        function render() {\n          return React.createElement(Comp, {\n            searchQuery: this.state.searchQuery,\n            query: this.state.query,\n            clearFilter: this.clearFilter,\n            filterDates: this.filterDates,\n            filterShippingStatus: this.filterShippingStatus,\n            filterWorkflowStatus: this.filterWorkflowStatus,\n            handleChange: this.handleSearchChange,\n            skip: this.state.skip,\n            pageSize: this.state.pageSize,\n            onPageChange: this.updatePage,\n            onPageSizeChange: this.updatePageSize,\n            currentPage: this.state.page\n          });\n        }\n\n        return render;\n      }();\n\n      return OrderDashboardContainer;\n    }(Component)\n  );\n};\n\nregisterComponent(\"OrderSubscription\", OrderSubscription, [wrapComponent]);\nmodule.exportDefault(_compose(wrapComponent)(OrderSubscription));","map":{"version":3,"sources":["imports/plugins/core/orders/client/containers/orderDashboardContainer.js"],"names":["_compose","module","watch","require","v","React","Component","registerComponent","filterShippingStatus","filterWorkflowStatus","OrderSubscription","wrapComponent","Comp","props","filterDates","startDate","endDate","query","state","formattedEndDate","endOf","formattedStartDate","startOf","createdAt","$gte","Date","toISOString","$lte","setState","handleSearchChange","value","searchQuery","event","shippingFilter","_id","toLowerCase","workflowFilter","clearFilter","filterString","updatePage","page","offset","pageSize","skip","updatePageSize","pageIndex","render","exportDefault"],"mappings":"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","sourcesContent":["import React, { Component } from \"react\";\nimport { compose } from \"recompose\";\nimport { registerComponent } from \"@reactioncommerce/reaction-components\";\nimport { filterShippingStatus, filterWorkflowStatus } from \"../helpers\";\nimport OrderSubscription from \"./orderSubscriptionContainer\";\n\nconst wrapComponent = (Comp) => (\n  class OrderDashboardContainer extends Component {\n    constructor(props) {\n      super(props);\n      this.state = {\n        query: {},\n        searchQuery: \"\",\n        shippingFilter: \"\",\n        workflowFilter: \"\",\n        skip: 0,\n        pageSize: 10,\n        page: 0\n      };\n    }\n\n    filterDates = (startDate, endDate) => {\n      const { query } = this.state;\n\n      if (startDate && endDate) {\n        // generate time for start and end of day\n        const formattedEndDate = endDate.endOf(\"day\");\n        const formattedStartDate = startDate.startOf(\"day\");\n\n        query.createdAt = {\n          $gte: new Date(formattedStartDate.toISOString()),\n          $lte: new Date(formattedEndDate.toISOString())\n        };\n        this.setState({ query });\n      }\n    }\n\n    /**\n     * handleSearchChange - handler called on search query change\n     * @param  {String} value - search field current value\n     * @return {null} -\n     */\n    handleSearchChange = (value) => {\n      this.setState({ searchQuery: value });\n    }\n\n    filterWorkflowStatus = (event, value) => {\n      const query = filterWorkflowStatus(value);\n      const { shippingFilter } = this.state;\n      if (this.state.query.createdAt) {\n        query.createdAt = this.state.query.createdAt;\n      }\n\n      if (this.state.query._id) {\n        query._id = this.state.query._id;\n      }\n\n      this.setState({\n        query: { ...filterShippingStatus(shippingFilter.toLowerCase()), ...query },\n        workflowFilter: value\n      });\n    }\n\n    filterShippingStatus = (event, value) => {\n      const query = filterShippingStatus(value);\n      const { workflowFilter } = this.state;\n\n      if (this.state.query.createdAt) {\n        query.createdAt = this.state.query.createdAt;\n      }\n\n      if (this.state.query._id) {\n        query._id = this.state.query._id;\n      }\n\n      this.setState({\n        query: { ...filterWorkflowStatus(workflowFilter.toLowerCase()), ...query },\n        shippingFilter: value\n      });\n    }\n\n    clearFilter = (filterString) => {\n      let query;\n      let { shippingFilter, workflowFilter } = this.state;\n\n      if (filterString === \"workflow\") {\n        workflowFilter = \"\";\n        query = { ...filterWorkflowStatus(workflowFilter), ...filterShippingStatus(shippingFilter.toLowerCase()) };\n\n        if (this.state.query.createdAt) {\n          query.createdAt = this.state.query.createdAt;\n        }\n      } else if (filterString === \"date\") {\n        query = {\n          ...filterWorkflowStatus(workflowFilter.toLowerCase()),\n          ...filterShippingStatus(shippingFilter.toLowerCase())\n        };\n      } else if (filterString === \"shipping\") {\n        shippingFilter = \"\";\n        query = { ...filterWorkflowStatus(workflowFilter.toLowerCase()), ...filterShippingStatus(shippingFilter) };\n\n        if (this.state.query.createdAt) {\n          query.createdAt = this.state.query.createdAt;\n        }\n      }\n\n      // If there is an id on the current search appeng it to query\n      if (this.state.query._id) {\n        query._id = this.state.query._id;\n      }\n\n      this.setState({\n        query,\n        shippingFilter,\n        workflowFilter\n      });\n    }\n\n    updatePage = (page) => {\n      const offset = page * this.state.pageSize;\n      this.setState({ skip: offset, page });\n    }\n\n    updatePageSize = (pageSize, pageIndex) => {\n      const offset = pageIndex * pageSize;\n      this.setState({ pageSize, skip: offset });\n    }\n\n    render() {\n      return (\n        <Comp\n          searchQuery={this.state.searchQuery}\n          query={this.state.query}\n          clearFilter={this.clearFilter}\n          filterDates={this.filterDates}\n          filterShippingStatus={this.filterShippingStatus}\n          filterWorkflowStatus={this.filterWorkflowStatus}\n          handleChange={this.handleSearchChange}\n          skip={this.state.skip}\n          pageSize={this.state.pageSize}\n          onPageChange={this.updatePage}\n          onPageSizeChange={this.updatePageSize}\n          currentPage={this.state.page}\n        />\n      );\n    }\n  }\n);\n\nregisterComponent(\"OrderSubscription\", OrderSubscription, [wrapComponent]);\n\nexport default compose(wrapComponent)(OrderSubscription);\n"]},"sourceType":"script","hash":"0268e741c62e038c7843fbe6cc110aeb359f4fff"}
