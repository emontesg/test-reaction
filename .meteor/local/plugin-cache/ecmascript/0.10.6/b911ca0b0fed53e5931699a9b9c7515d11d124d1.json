{"metadata":{},"options":{"plugins":[{"key":"base$0$0","visitor":{"Program":{"enter":[null]},"_exploded":true,"_verified":true},"options":{"generateLetDeclarations":true,"enforceStrictMode":false}},{"key":"transform-meteor-dynamic-import","visitor":{"_exploded":{},"_verified":{},"CallExpression":{"enter":[null]}},"options":{}},{"key":"base$0$2","visitor":{"CallExpression":{"enter":[null]},"BinaryExpression":{"enter":[null]},"MemberExpression":{"enter":[null],"exit":[null]},"_exploded":true,"_verified":true,"Identifier":{"enter":[null]},"JSXIdentifier":{"enter":[null]}},"options":{"polyfill":false,"useBuiltIns":false}},{"key":"base$0$3","visitor":{"_exploded":{},"_verified":{},"ClassDeclaration":{"enter":[null]},"ClassExpression":{"enter":[null]}},"options":{"loose":true}},{"key":"base$0$4","visitor":{"FunctionExpression":{"exit":[null]},"_exploded":true,"_verified":true},"options":{}},{"key":"base$0$5","visitor":{"ForInStatement":{"enter":[null]},"_exploded":true,"_verified":true},"options":{}},{"key":"base$0$6","visitor":{"Program":{"exit":[null]},"_exploded":true,"_verified":true},"options":{"allowTopLevelThis":true,"strictMode":false,"loose":true}},{"key":"base$0$1$0","visitor":{"_exploded":{},"_verified":{},"JSXNamespacedName":{"enter":[null]},"JSXElement":{"exit":[null]},"JSXFragment":{"exit":[null]},"Program":{"enter":[null],"exit":[null]},"JSXAttribute":{"enter":[null]}},"options":{"pragma":"React.createElement","pragmaFrag":"React.Fragment","throwIfNamespace":true,"useBuiltIns":false}},{"key":"base$0$1$1","visitor":{"_exploded":true,"_verified":true},"options":{}},{"key":"base$0$1$2","visitor":{"ExportDefaultDeclaration":{"enter":[null]},"CallExpression":{"enter":[null]},"_exploded":true,"_verified":true},"options":{}},{"key":"base$0$0$0","visitor":{"_exploded":true,"_verified":true},"options":{}},{"key":"base$0$0$1","visitor":{"_exploded":true,"_verified":true},"options":{}},{"key":"base$0$0$2","visitor":{"ArrowFunctionExpression":{"enter":[null]},"_exploded":true,"_verified":true},"options":{}},{"key":"base$0$0$3","visitor":{"BlockStatement":{"enter":[null]},"SwitchCase":{"enter":[null]},"_exploded":true,"_verified":true},"options":{}},{"key":"base$0$0$4","visitor":{"VariableDeclaration":{"enter":[null]},"CatchClause":{"enter":[null]},"_exploded":true,"BlockStatement":{"enter":[null]},"SwitchStatement":{"enter":[null]},"Program":{"enter":[null]},"_verified":true,"DoWhileStatement":{"enter":[null]},"ForInStatement":{"enter":[null]},"ForStatement":{"enter":[null]},"WhileStatement":{"enter":[null]},"ForOfStatement":{"enter":[null]}},"options":{}},{"key":"base$0$0$5","visitor":{"ExportDefaultDeclaration":{"enter":[null]},"ClassDeclaration":{"enter":[null]},"ClassExpression":{"enter":[null]},"_exploded":true,"_verified":true},"options":{"loose":true}},{"key":"base$0$0$6","visitor":{"ObjectExpression":{"exit":[null]},"_exploded":true,"_verified":true},"options":{"loose":true}},{"key":"base$0$0$7","visitor":{"ExportNamedDeclaration":{"enter":[null]},"CatchClause":{"enter":[null]},"AssignmentExpression":{"enter":[null]},"VariableDeclaration":{"enter":[null]},"_exploded":true,"_verified":true,"ForInStatement":{"enter":[null]},"ForOfStatement":{"enter":[null]}},"options":{}},{"key":"base$0$0$8","visitor":{"ForOfStatement":{"enter":[null]},"_exploded":true,"_verified":true},"options":{"loose":true}},{"key":"base$0$0$9","visitor":{"NumericLiteral":{"enter":[null]},"StringLiteral":{"enter":[null]},"_exploded":true,"_verified":true},"options":{}},{"key":"base$0$0$10","visitor":{"ObjectExpression":{"enter":[null]},"_exploded":true,"_verified":true},"options":{}},{"key":"base$0$0$11","visitor":{"_exploded":true,"_verified":true,"FunctionDeclaration":{"enter":[null]},"FunctionExpression":{"enter":[null]},"ObjectMethod":{"enter":[null]},"ArrowFunctionExpression":{"enter":[null]},"ClassMethod":{"enter":[null]}},"options":{}},{"key":"base$0$0$12","visitor":{"ObjectMethod":{"enter":[null]},"ObjectProperty":{"enter":[null]},"_exploded":true,"_verified":true},"options":{}},{"key":"base$0$0$13","visitor":{"ArrayExpression":{"enter":[null]},"CallExpression":{"enter":[null]},"NewExpression":{"enter":[null]},"_exploded":true,"_verified":true},"options":{}},{"key":"base$0$0$14","visitor":{"RegExpLiteral":{"enter":[null]},"_exploded":true,"_verified":true},"options":{}},{"key":"base$0$0$15","visitor":{"TaggedTemplateExpression":{"enter":[null]},"TemplateLiteral":{"enter":[null]},"_exploded":true,"_verified":true},"options":{"loose":true}},{"key":"base$0$0$16","visitor":{"UnaryExpression":{"enter":[null]},"_exploded":true,"_verified":true,"BlockStatement":{"enter":[null]},"CatchClause":{"enter":[null]},"DoWhileStatement":{"enter":[null]},"ForInStatement":{"enter":[null]},"ForStatement":{"enter":[null]},"FunctionDeclaration":{"enter":[null]},"FunctionExpression":{"enter":[null]},"Program":{"enter":[null]},"ObjectMethod":{"enter":[null]},"SwitchStatement":{"enter":[null]},"WhileStatement":{"enter":[null]},"ArrowFunctionExpression":{"enter":[null]},"ClassDeclaration":{"enter":[null]},"ClassExpression":{"enter":[null]},"ForOfStatement":{"enter":[null]},"ClassMethod":{"enter":[null]}},"options":{}},{"key":"base$0$0$17","visitor":{"RegExpLiteral":{"enter":[null]},"_exploded":true,"_verified":true},"options":{}},{"key":"base$0$0$18","visitor":{"_exploded":true,"_verified":true},"options":{}},{"key":"base$0$0$19","visitor":{"_exploded":{},"_verified":{},"VariableDeclarator":{"enter":[null]},"ExportNamedDeclaration":{"enter":[null]},"CatchClause":{"enter":[null]},"AssignmentExpression":{"enter":[null]},"ObjectExpression":{"enter":[null]},"FunctionDeclaration":{"enter":[null]},"FunctionExpression":{"enter":[null]},"ObjectMethod":{"enter":[null]},"ArrowFunctionExpression":{"enter":[null]},"ClassMethod":{"enter":[null]},"ForInStatement":{"enter":[null]},"ForOfStatement":{"enter":[null]}},"options":{}},{"key":"base$0$0$20","visitor":{"ObjectProperty":{"exit":[null]},"_exploded":true,"_verified":true},"options":{}},{"key":"base$0$0$21","visitor":{"_exploded":{},"_verified":{},"Program":{"enter":[null]},"ImportDeclaration":{"enter":[null,null]},"ClassProperty":{"enter":[null]},"AssignmentPattern":{"enter":[null]},"TypeCastExpression":{"enter":[null,null]},"ImportSpecifier":{"enter":[null]},"ClassDeclaration":{"enter":[null]},"ClassExpression":{"enter":[null]},"FunctionDeclaration":{"enter":[null]},"FunctionExpression":{"enter":[null]},"ObjectMethod":{"enter":[null]},"ArrowFunctionExpression":{"enter":[null]},"ClassMethod":{"enter":[null]},"AnyTypeAnnotation":{"enter":[null]},"ArrayTypeAnnotation":{"enter":[null]},"BooleanTypeAnnotation":{"enter":[null]},"BooleanLiteralTypeAnnotation":{"enter":[null]},"NullLiteralTypeAnnotation":{"enter":[null]},"ClassImplements":{"enter":[null]},"DeclareClass":{"enter":[null]},"DeclareFunction":{"enter":[null]},"DeclareInterface":{"enter":[null]},"DeclareModule":{"enter":[null]},"DeclareModuleExports":{"enter":[null]},"DeclareTypeAlias":{"enter":[null]},"DeclareOpaqueType":{"enter":[null]},"DeclareVariable":{"enter":[null]},"DeclareExportDeclaration":{"enter":[null]},"DeclareExportAllDeclaration":{"enter":[null]},"DeclaredPredicate":{"enter":[null]},"ExistsTypeAnnotation":{"enter":[null]},"FunctionTypeAnnotation":{"enter":[null]},"FunctionTypeParam":{"enter":[null]},"GenericTypeAnnotation":{"enter":[null]},"InferredPredicate":{"enter":[null]},"InterfaceExtends":{"enter":[null]},"InterfaceDeclaration":{"enter":[null]},"IntersectionTypeAnnotation":{"enter":[null]},"MixedTypeAnnotation":{"enter":[null]},"EmptyTypeAnnotation":{"enter":[null]},"NullableTypeAnnotation":{"enter":[null]},"NumberLiteralTypeAnnotation":{"enter":[null]},"NumberTypeAnnotation":{"enter":[null]},"ObjectTypeAnnotation":{"enter":[null]},"ObjectTypeCallProperty":{"enter":[null]},"ObjectTypeIndexer":{"enter":[null]},"ObjectTypeProperty":{"enter":[null]},"ObjectTypeSpreadProperty":{"enter":[null]},"OpaqueType":{"enter":[null]},"QualifiedTypeIdentifier":{"enter":[null]},"StringLiteralTypeAnnotation":{"enter":[null]},"StringTypeAnnotation":{"enter":[null]},"ThisTypeAnnotation":{"enter":[null]},"TupleTypeAnnotation":{"enter":[null]},"TypeofTypeAnnotation":{"enter":[null]},"TypeAlias":{"enter":[null]},"TypeAnnotation":{"enter":[null]},"TypeParameter":{"enter":[null]},"TypeParameterDeclaration":{"enter":[null]},"TypeParameterInstantiation":{"enter":[null]},"UnionTypeAnnotation":{"enter":[null]},"Variance":{"enter":[null]},"VoidTypeAnnotation":{"enter":[null]},"ExportAllDeclaration":{"enter":[null]},"ExportDefaultDeclaration":{"enter":[null]},"ExportNamedDeclaration":{"enter":[null]}},"options":{}},{"key":"base$0$0$22","visitor":{"AssignmentExpression":{"enter":[null]},"BinaryExpression":{"enter":[null]},"_exploded":true,"_verified":true},"options":{}},{"key":"base$0$0$23","visitor":{"_exploded":{},"_verified":{},"Program":{"enter":[null]}},"options":{}},{"key":"regenerator-transform","visitor":{"_exploded":true,"_verified":true,"FunctionDeclaration":{"exit":[null]},"FunctionExpression":{"exit":[null]},"ObjectMethod":{"exit":[null]},"ArrowFunctionExpression":{"exit":[null]},"ClassMethod":{"exit":[null]}},"options":{}}],"presets":[],"compact":false,"ast":true,"babelrc":false,"sourceFileName":"imports/plugins/included/notifications/client/components/notificationRoute.js","filename":"imports/plugins/included/notifications/client/components/notificationRoute.js","sourceMaps":true,"envName":"development","cwd":"/Users/estebandev/test-knowledge","passPerPreset":false,"parserOpts":{"sourceType":"module","sourceFileName":"imports/plugins/included/notifications/client/components/notificationRoute.js","plugins":["dynamicImport","classProperties","jsx","jsx","flow","asyncGenerators","objectRestSpread","objectRestSpread","flow","asyncGenerators"]},"generatorOpts":{"filename":"imports/plugins/included/notifications/client/components/notificationRoute.js","comments":true,"compact":false,"sourceMaps":true,"sourceFileName":"imports/plugins/included/notifications/client/components/notificationRoute.js"}},"code":"var _assertThisInitialized2 = _interopRequireDefault(require(\"@babel/runtime/helpers/assertThisInitialized\"));\n\nvar _inheritsLoose2 = _interopRequireDefault(require(\"@babel/runtime/helpers/inheritsLoose\"));\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { \"default\": obj }; }\n\nvar React, Component;\nmodule.watch(require(\"react\"), {\n  \"default\": function (v) {\n    React = v;\n  },\n  Component: function (v) {\n    Component = v;\n  }\n}, 0);\nvar PropTypes;\nmodule.watch(require(\"prop-types\"), {\n  \"default\": function (v) {\n    PropTypes = v;\n  }\n}, 1);\nvar Reaction;\nmodule.watch(require(\"../../../../../../client/api\"), {\n  Reaction: function (v) {\n    Reaction = v;\n  }\n}, 2);\nvar Components, withMoment, registerComponent;\nmodule.watch(require(\"../../../../core/components/lib\"), {\n  Components: function (v) {\n    Components = v;\n  },\n  withMoment: function (v) {\n    withMoment = v;\n  },\n  registerComponent: function (v) {\n    registerComponent = v;\n  }\n}, 3);\nvar Link;\nmodule.watch(require(\"../../../../core/router/lib\"), {\n  Link: function (v) {\n    Link = v;\n  }\n}, 4);\n\nvar NotificationRoute =\n/*#__PURE__*/\nfunction (_Component) {\n  (0, _inheritsLoose2.default)(NotificationRoute, _Component);\n\n  function NotificationRoute() {\n    var _temp, _this;\n\n    for (var _len = arguments.length, args = new Array(_len), _key = 0; _key < _len; _key++) {\n      args[_key] = arguments[_key];\n    }\n\n    return (_temp = _this = _Component.call.apply(_Component, [this].concat(args)) || this, _this.handleNoNotifications = function (notifyArr) {\n      if (notifyArr.length <= 0) {\n        return React.createElement(\"li\", {\n          className: \"notification\"\n        }, React.createElement(\"div\", {\n          className: \"media\"\n        }, React.createElement(\"div\", {\n          className: \"media-body\"\n        }, React.createElement(\"strong\", {\n          className: \"notification-title\",\n          \"data-i18n\": \"notifications.body.noNotifcations\"\n        }, \"No notifications yet\"))));\n      }\n\n      return null;\n    }, _this.handleClick = function (event, notify) {\n      if (notify.type === \"forAdmin\") {\n        var actionViewData = Reaction.Apps({\n          name: \"reaction-orders\",\n          provides: \"dashboard\"\n        });\n        Reaction.showActionView(actionViewData);\n      } else {\n        Reaction.Router.go(notify.url);\n      }\n\n      var markOneAsRead = _this.props.markOneAsRead;\n      return markOneAsRead(notify._id);\n    }, _this.handleMarkAllAsRead = function () {\n      var _this$props = _this.props,\n          notificationList = _this$props.notificationList,\n          markAllAsRead = _this$props.markAllAsRead;\n      markAllAsRead(notificationList);\n    }, _temp) || (0, _assertThisInitialized2.default)(_this);\n  }\n\n  var _proto = NotificationRoute.prototype;\n\n  _proto.renderDropdownHead = function () {\n    function renderDropdownHead() {\n      var unread = this.props.unread;\n      return React.createElement(\"div\", {\n        className: \"dropdown-toolbar\"\n      }, React.createElement(\"h3\", {\n        className: \"dropdown-toolbar-title\"\n      }, React.createElement(\"span\", {\n        \"data-i18n\": \"notifications.body.recent\"\n      }, \"Recent\"), \" (\", unread, \")\"), React.createElement(\"div\", {\n        className: \"dropdown-toolbar-actions\"\n      }, React.createElement(Components.Button, {\n        label: \"Mark all as read\",\n        i18nKeyLabel: \"notifications.body.markAllAsRead\",\n        onClick: this.handleMarkAllAsRead\n      })));\n    }\n\n    return renderDropdownHead;\n  }();\n\n  _proto.render = function () {\n    function render() {\n      var _this2 = this;\n\n      var _props = this.props,\n          moment = _props.moment,\n          notificationList = _props.notificationList;\n      return React.createElement(\"div\", {\n        className: \"notify-bar\"\n      }, this.renderDropdownHead(), React.createElement(\"div\", {\n        className: \"dropdown-notify notifications\"\n      }, this.handleNoNotifications(notificationList), notificationList.map(function (notify, key) {\n        var timeNow = moment && moment(notify.timeSent).fromNow() || notify.timeSent.toLocaleString();\n        var read = \"notification \" + notify.status;\n        var i18n = \"notifications.messages.\" + notify.type;\n        return React.createElement(Components.ListItem, {\n          key: key,\n          listItemClassName: read,\n          onClick: _this2.handleClick,\n          value: notify\n        }, React.createElement(\"div\", {\n          className: \"media\"\n        }, React.createElement(\"div\", {\n          className: \"media-body\"\n        }, React.createElement(\"strong\", {\n          className: \"notification-title\",\n          \"data-i18n\": i18n\n        }, notify.message), React.createElement(\"div\", {\n          className: \"notification-meta\"\n        }, React.createElement(\"small\", {\n          className: \"timestamp\"\n        }, timeNow)))));\n      })), this.props.showViewAll && React.createElement(\"div\", {\n        className: \"dropdown-footer text-center\"\n      }, React.createElement(Link, {\n        to: \"/notifications\",\n        \"data-i18n\": \"notifications.body.viewAll\"\n      }, \"View All\")));\n    }\n\n    return render;\n  }();\n\n  return NotificationRoute;\n}(Component);\n\nNotificationRoute.propTypes = {\n  markAllAsRead: PropTypes.func,\n  markOneAsRead: PropTypes.func,\n  moment: PropTypes.func,\n  notificationList: PropTypes.array,\n  showViewAll: PropTypes.bool,\n  unread: PropTypes.number\n};\nregisterComponent(\"NotificationRoute\", NotificationRoute, withMoment);\nmodule.exportDefault(withMoment(NotificationRoute));","map":{"version":3,"sources":["imports/plugins/included/notifications/client/components/notificationRoute.js"],"names":["React","Component","module","watch","require","v","PropTypes","Reaction","Components","withMoment","registerComponent","Link","NotificationRoute","handleNoNotifications","notifyArr","length","handleClick","event","notify","type","actionViewData","Apps","name","provides","showActionView","Router","go","url","markOneAsRead","props","_id","handleMarkAllAsRead","notificationList","markAllAsRead","renderDropdownHead","unread","render","moment","map","key","timeNow","timeSent","fromNow","toLocaleString","read","status","i18n","message","showViewAll","propTypes","func","array","bool","number","exportDefault"],"mappings":"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","sourcesContent":["import React, { Component } from \"react\";\nimport PropTypes from \"prop-types\";\nimport { Reaction } from \"/client/api\";\nimport { Components, withMoment, registerComponent } from \"@reactioncommerce/reaction-components\";\nimport { Link } from \"@reactioncommerce/reaction-router\";\n\nclass NotificationRoute extends Component {\n  handleNoNotifications = (notifyArr) => {\n    if (notifyArr.length <= 0) {\n      return (\n        <li className=\"notification\">\n          <div className=\"media\">\n            <div className=\"media-body\">\n              <strong className=\"notification-title\" data-i18n=\"notifications.body.noNotifcations\">No notifications yet</strong>\n            </div>\n          </div>\n        </li>\n      );\n    }\n    return null;\n  }\n\n  handleClick = (event, notify) => {\n    if (notify.type === \"forAdmin\") {\n      const actionViewData = Reaction.Apps({\n        name: \"reaction-orders\",\n        provides: \"dashboard\"\n      });\n      Reaction.showActionView(actionViewData);\n    } else {\n      Reaction.Router.go(notify.url);\n    }\n\n    const { markOneAsRead } = this.props;\n    return markOneAsRead(notify._id);\n  }\n\n  handleMarkAllAsRead = () => {\n    const { notificationList, markAllAsRead } = this.props;\n    markAllAsRead(notificationList);\n  }\n\n  renderDropdownHead() {\n    const { unread } = this.props;\n    return (\n      <div className=\"dropdown-toolbar\">\n        <h3 className=\"dropdown-toolbar-title\"><span data-i18n=\"notifications.body.recent\">Recent</span> ({unread})</h3>\n        <div className=\"dropdown-toolbar-actions\">\n          <Components.Button\n            label={\"Mark all as read\"}\n            i18nKeyLabel={\"notifications.body.markAllAsRead\"}\n            onClick={this.handleMarkAllAsRead}\n          />\n        </div>\n      </div>\n    );\n  }\n\n  render() {\n    const { moment, notificationList } = this.props;\n    return (\n      <div className=\"notify-bar\">\n        { this.renderDropdownHead() }\n        <div className=\"dropdown-notify notifications\">\n          { this.handleNoNotifications(notificationList) }\n          { notificationList.map((notify, key) => {\n            const timeNow = (moment && moment(notify.timeSent).fromNow()) || notify.timeSent.toLocaleString();\n            const read = `notification ${notify.status}`;\n            const i18n = `notifications.messages.${notify.type}`;\n            return (\n              <Components.ListItem\n                key={key}\n                listItemClassName={read}\n                onClick={this.handleClick}\n                value={notify}\n              >\n                <div className=\"media\">\n                  <div className=\"media-body\">\n                    <strong className=\"notification-title\" data-i18n={i18n}>{notify.message}</strong>\n                    <div className=\"notification-meta\">\n                      <small className=\"timestamp\">{timeNow}</small>\n                    </div>\n                  </div>\n                </div>\n              </Components.ListItem>\n            );\n          })}\n        </div>\n        {this.props.showViewAll &&\n          <div className=\"dropdown-footer text-center\">\n            <Link to=\"/notifications\" data-i18n=\"notifications.body.viewAll\">View All</Link>\n          </div>\n        }\n      </div>\n    );\n  }\n}\n\nNotificationRoute.propTypes = {\n  markAllAsRead: PropTypes.func,\n  markOneAsRead: PropTypes.func,\n  moment: PropTypes.func,\n  notificationList: PropTypes.array,\n  showViewAll: PropTypes.bool,\n  unread: PropTypes.number\n};\n\nregisterComponent(\"NotificationRoute\", NotificationRoute, withMoment);\nexport default withMoment(NotificationRoute);\n"]},"sourceType":"script","hash":"b911ca0b0fed53e5931699a9b9c7515d11d124d1"}
