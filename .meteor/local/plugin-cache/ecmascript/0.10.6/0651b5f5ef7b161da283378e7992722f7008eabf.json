{"metadata":{},"options":{"plugins":[{"key":"base$0$0","visitor":{"Program":{"enter":[null]},"_exploded":true,"_verified":true},"options":{"generateLetDeclarations":true,"enforceStrictMode":false}},{"key":"transform-meteor-dynamic-import","visitor":{"_exploded":{},"_verified":{},"CallExpression":{"enter":[null]}},"options":{}},{"key":"base$0$2","visitor":{"CallExpression":{"enter":[null]},"BinaryExpression":{"enter":[null]},"MemberExpression":{"enter":[null],"exit":[null]},"_exploded":true,"_verified":true,"Identifier":{"enter":[null]},"JSXIdentifier":{"enter":[null]}},"options":{"polyfill":false,"useBuiltIns":false}},{"key":"base$0$3","visitor":{"_exploded":{},"_verified":{},"ClassDeclaration":{"enter":[null]},"ClassExpression":{"enter":[null]}},"options":{"loose":true}},{"key":"base$0$4","visitor":{"FunctionExpression":{"exit":[null]},"_exploded":true,"_verified":true},"options":{}},{"key":"base$0$5","visitor":{"ForInStatement":{"enter":[null]},"_exploded":true,"_verified":true},"options":{}},{"key":"base$0$6","visitor":{"Program":{"exit":[null]},"_exploded":true,"_verified":true},"options":{"allowTopLevelThis":true,"strictMode":false,"loose":true}},{"key":"base$0$1$0","visitor":{"_exploded":{},"_verified":{},"JSXNamespacedName":{"enter":[null]},"JSXElement":{"exit":[null]},"JSXFragment":{"exit":[null]},"Program":{"enter":[null],"exit":[null]},"JSXAttribute":{"enter":[null]}},"options":{"pragma":"React.createElement","pragmaFrag":"React.Fragment","throwIfNamespace":true,"useBuiltIns":false}},{"key":"base$0$1$1","visitor":{"_exploded":true,"_verified":true},"options":{}},{"key":"base$0$1$2","visitor":{"ExportDefaultDeclaration":{"enter":[null]},"CallExpression":{"enter":[null]},"_exploded":true,"_verified":true},"options":{}},{"key":"base$0$0$0","visitor":{"_exploded":true,"_verified":true},"options":{}},{"key":"base$0$0$1","visitor":{"_exploded":true,"_verified":true},"options":{}},{"key":"base$0$0$2","visitor":{"ArrowFunctionExpression":{"enter":[null]},"_exploded":true,"_verified":true},"options":{}},{"key":"base$0$0$3","visitor":{"BlockStatement":{"enter":[null]},"SwitchCase":{"enter":[null]},"_exploded":true,"_verified":true},"options":{}},{"key":"base$0$0$4","visitor":{"VariableDeclaration":{"enter":[null]},"CatchClause":{"enter":[null]},"_exploded":true,"BlockStatement":{"enter":[null]},"SwitchStatement":{"enter":[null]},"Program":{"enter":[null]},"_verified":true,"DoWhileStatement":{"enter":[null]},"ForInStatement":{"enter":[null]},"ForStatement":{"enter":[null]},"WhileStatement":{"enter":[null]},"ForOfStatement":{"enter":[null]}},"options":{}},{"key":"base$0$0$5","visitor":{"ExportDefaultDeclaration":{"enter":[null]},"ClassDeclaration":{"enter":[null]},"ClassExpression":{"enter":[null]},"_exploded":true,"_verified":true},"options":{"loose":true}},{"key":"base$0$0$6","visitor":{"ObjectExpression":{"exit":[null]},"_exploded":true,"_verified":true},"options":{"loose":true}},{"key":"base$0$0$7","visitor":{"ExportNamedDeclaration":{"enter":[null]},"CatchClause":{"enter":[null]},"AssignmentExpression":{"enter":[null]},"VariableDeclaration":{"enter":[null]},"_exploded":true,"_verified":true,"ForInStatement":{"enter":[null]},"ForOfStatement":{"enter":[null]}},"options":{}},{"key":"base$0$0$8","visitor":{"ForOfStatement":{"enter":[null]},"_exploded":true,"_verified":true},"options":{"loose":true}},{"key":"base$0$0$9","visitor":{"NumericLiteral":{"enter":[null]},"StringLiteral":{"enter":[null]},"_exploded":true,"_verified":true},"options":{}},{"key":"base$0$0$10","visitor":{"ObjectExpression":{"enter":[null]},"_exploded":true,"_verified":true},"options":{}},{"key":"base$0$0$11","visitor":{"_exploded":true,"_verified":true,"FunctionDeclaration":{"enter":[null]},"FunctionExpression":{"enter":[null]},"ObjectMethod":{"enter":[null]},"ArrowFunctionExpression":{"enter":[null]},"ClassMethod":{"enter":[null]}},"options":{}},{"key":"base$0$0$12","visitor":{"ObjectMethod":{"enter":[null]},"ObjectProperty":{"enter":[null]},"_exploded":true,"_verified":true},"options":{}},{"key":"base$0$0$13","visitor":{"ArrayExpression":{"enter":[null]},"CallExpression":{"enter":[null]},"NewExpression":{"enter":[null]},"_exploded":true,"_verified":true},"options":{}},{"key":"base$0$0$14","visitor":{"RegExpLiteral":{"enter":[null]},"_exploded":true,"_verified":true},"options":{}},{"key":"base$0$0$15","visitor":{"TaggedTemplateExpression":{"enter":[null]},"TemplateLiteral":{"enter":[null]},"_exploded":true,"_verified":true},"options":{"loose":true}},{"key":"base$0$0$16","visitor":{"UnaryExpression":{"enter":[null]},"_exploded":true,"_verified":true,"BlockStatement":{"enter":[null]},"CatchClause":{"enter":[null]},"DoWhileStatement":{"enter":[null]},"ForInStatement":{"enter":[null]},"ForStatement":{"enter":[null]},"FunctionDeclaration":{"enter":[null]},"FunctionExpression":{"enter":[null]},"Program":{"enter":[null]},"ObjectMethod":{"enter":[null]},"SwitchStatement":{"enter":[null]},"WhileStatement":{"enter":[null]},"ArrowFunctionExpression":{"enter":[null]},"ClassDeclaration":{"enter":[null]},"ClassExpression":{"enter":[null]},"ForOfStatement":{"enter":[null]},"ClassMethod":{"enter":[null]}},"options":{}},{"key":"base$0$0$17","visitor":{"RegExpLiteral":{"enter":[null]},"_exploded":true,"_verified":true},"options":{}},{"key":"base$0$0$18","visitor":{"_exploded":true,"_verified":true},"options":{}},{"key":"base$0$0$19","visitor":{"_exploded":{},"_verified":{},"VariableDeclarator":{"enter":[null]},"ExportNamedDeclaration":{"enter":[null]},"CatchClause":{"enter":[null]},"AssignmentExpression":{"enter":[null]},"ObjectExpression":{"enter":[null]},"FunctionDeclaration":{"enter":[null]},"FunctionExpression":{"enter":[null]},"ObjectMethod":{"enter":[null]},"ArrowFunctionExpression":{"enter":[null]},"ClassMethod":{"enter":[null]},"ForInStatement":{"enter":[null]},"ForOfStatement":{"enter":[null]}},"options":{}},{"key":"base$0$0$20","visitor":{"ObjectProperty":{"exit":[null]},"_exploded":true,"_verified":true},"options":{}},{"key":"base$0$0$21","visitor":{"_exploded":{},"_verified":{},"Program":{"enter":[null]},"ImportDeclaration":{"enter":[null,null]},"ClassProperty":{"enter":[null]},"AssignmentPattern":{"enter":[null]},"TypeCastExpression":{"enter":[null,null]},"ImportSpecifier":{"enter":[null]},"ClassDeclaration":{"enter":[null]},"ClassExpression":{"enter":[null]},"FunctionDeclaration":{"enter":[null]},"FunctionExpression":{"enter":[null]},"ObjectMethod":{"enter":[null]},"ArrowFunctionExpression":{"enter":[null]},"ClassMethod":{"enter":[null]},"AnyTypeAnnotation":{"enter":[null]},"ArrayTypeAnnotation":{"enter":[null]},"BooleanTypeAnnotation":{"enter":[null]},"BooleanLiteralTypeAnnotation":{"enter":[null]},"NullLiteralTypeAnnotation":{"enter":[null]},"ClassImplements":{"enter":[null]},"DeclareClass":{"enter":[null]},"DeclareFunction":{"enter":[null]},"DeclareInterface":{"enter":[null]},"DeclareModule":{"enter":[null]},"DeclareModuleExports":{"enter":[null]},"DeclareTypeAlias":{"enter":[null]},"DeclareOpaqueType":{"enter":[null]},"DeclareVariable":{"enter":[null]},"DeclareExportDeclaration":{"enter":[null]},"DeclareExportAllDeclaration":{"enter":[null]},"DeclaredPredicate":{"enter":[null]},"ExistsTypeAnnotation":{"enter":[null]},"FunctionTypeAnnotation":{"enter":[null]},"FunctionTypeParam":{"enter":[null]},"GenericTypeAnnotation":{"enter":[null]},"InferredPredicate":{"enter":[null]},"InterfaceExtends":{"enter":[null]},"InterfaceDeclaration":{"enter":[null]},"IntersectionTypeAnnotation":{"enter":[null]},"MixedTypeAnnotation":{"enter":[null]},"EmptyTypeAnnotation":{"enter":[null]},"NullableTypeAnnotation":{"enter":[null]},"NumberLiteralTypeAnnotation":{"enter":[null]},"NumberTypeAnnotation":{"enter":[null]},"ObjectTypeAnnotation":{"enter":[null]},"ObjectTypeCallProperty":{"enter":[null]},"ObjectTypeIndexer":{"enter":[null]},"ObjectTypeProperty":{"enter":[null]},"ObjectTypeSpreadProperty":{"enter":[null]},"OpaqueType":{"enter":[null]},"QualifiedTypeIdentifier":{"enter":[null]},"StringLiteralTypeAnnotation":{"enter":[null]},"StringTypeAnnotation":{"enter":[null]},"ThisTypeAnnotation":{"enter":[null]},"TupleTypeAnnotation":{"enter":[null]},"TypeofTypeAnnotation":{"enter":[null]},"TypeAlias":{"enter":[null]},"TypeAnnotation":{"enter":[null]},"TypeParameter":{"enter":[null]},"TypeParameterDeclaration":{"enter":[null]},"TypeParameterInstantiation":{"enter":[null]},"UnionTypeAnnotation":{"enter":[null]},"Variance":{"enter":[null]},"VoidTypeAnnotation":{"enter":[null]},"ExportAllDeclaration":{"enter":[null]},"ExportDefaultDeclaration":{"enter":[null]},"ExportNamedDeclaration":{"enter":[null]}},"options":{}},{"key":"base$0$0$22","visitor":{"AssignmentExpression":{"enter":[null]},"BinaryExpression":{"enter":[null]},"_exploded":true,"_verified":true},"options":{}},{"key":"base$0$0$23","visitor":{"_exploded":{},"_verified":{},"Program":{"enter":[null]}},"options":{}},{"key":"regenerator-transform","visitor":{"_exploded":true,"_verified":true,"FunctionDeclaration":{"exit":[null]},"FunctionExpression":{"exit":[null]},"ObjectMethod":{"exit":[null]},"ArrowFunctionExpression":{"exit":[null]},"ClassMethod":{"exit":[null]}},"options":{}}],"presets":[],"compact":false,"ast":true,"babelrc":false,"sourceFileName":"imports/plugins/core/orders/client/components/lineItems.js","filename":"imports/plugins/core/orders/client/components/lineItems.js","sourceMaps":true,"envName":"development","cwd":"/Users/estebandev/test-knowledge","passPerPreset":false,"parserOpts":{"sourceType":"module","sourceFileName":"imports/plugins/core/orders/client/components/lineItems.js","plugins":["dynamicImport","classProperties","jsx","jsx","flow","asyncGenerators","objectRestSpread","objectRestSpread","flow","asyncGenerators"]},"generatorOpts":{"filename":"imports/plugins/core/orders/client/components/lineItems.js","comments":true,"compact":false,"sourceMaps":true,"sourceFileName":"imports/plugins/core/orders/client/components/lineItems.js"}},"code":"var _inheritsLoose2 = _interopRequireDefault(require(\"@babel/runtime/helpers/inheritsLoose\"));\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { \"default\": obj }; }\n\nvar module1 = module;\n\nvar _isEmpty;\n\nmodule1.watch(require(\"lodash/isEmpty\"), {\n  \"default\": function (v) {\n    _isEmpty = v;\n  }\n}, 0);\nvar React, Component;\nmodule1.watch(require(\"react\"), {\n  \"default\": function (v) {\n    React = v;\n  },\n  Component: function (v) {\n    Component = v;\n  }\n}, 1);\nvar PropTypes;\nmodule1.watch(require(\"prop-types\"), {\n  \"default\": function (v) {\n    PropTypes = v;\n  }\n}, 2);\nvar classnames;\nmodule1.watch(require(\"classnames\"), {\n  \"default\": function (v) {\n    classnames = v;\n  }\n}, 3);\nvar Meteor;\nmodule1.watch(require(\"meteor/meteor\"), {\n  Meteor: function (v) {\n    Meteor = v;\n  }\n}, 4);\nvar Roles;\nmodule1.watch(require(\"meteor/alanning:roles\"), {\n  Roles: function (v) {\n    Roles = v;\n  }\n}, 5);\nvar formatPriceString, Reaction;\nmodule1.watch(require(\"../../../../../../client/api\"), {\n  formatPriceString: function (v) {\n    formatPriceString = v;\n  },\n  Reaction: function (v) {\n    Reaction = v;\n  }\n}, 6);\nvar Components, registerComponent;\nmodule1.watch(require(\"../../../components/lib\"), {\n  Components: function (v) {\n    Components = v;\n  },\n  registerComponent: function (v) {\n    registerComponent = v;\n  }\n}, 7);\n\n/**\n * @file LineItems React Component for displaying the actionable data on the invoice section on the orders sideview\n *\n * @module LineItems\n * @extends Component\n */\nvar LineItems =\n/*#__PURE__*/\nfunction (_Component) {\n  (0, _inheritsLoose2.default)(LineItems, _Component);\n\n  function LineItems() {\n    return _Component.apply(this, arguments) || this;\n  }\n\n  var _proto = LineItems.prototype;\n\n  /**\n   * @name LineItems propTypes\n   * @summary React component for displaying the actionable data on the invoice section on the orders sideview\n   * @param {Object} props - React PropTypes\n   * @property {Object} order - An object represnting an order\n   * @property {Object} uniqueItems - An object representing a line item\n   * @property {Array} editedItems - An array/list of line items that have been edited/modified\n   * @property {Array} selectedItems - An array of all the line items  that have been selected\n   * @property {Function} displayMedia - A function to display line items images\n   * @property {Function} clearRefunds - A function to clear edited/selected items\n   * @property {Function} getRefundedItemsInfo - A function that returns an object containing refunded items info\n   * @property {Function} getSelectedItemsInfo - A function that returns an object containing selected items info\n   * @property {Function} handleInputChange - A function to handle numeric input change\n   * @property {Function} handleItemSelect - A function to handle selecting an item via chekbox\n   * @property {Function} handlePopOverOpen - A function to handle the popover open and close\n   * @property {Function} handleRefundItems - A function to handle items return\n   * @property {Function} handleSelectAllItems - A function to handle selecting of all items\n   * @property {Bool} selectAllItems - A boolean indicating whether all items have been selected\n   * @property {Bool} isRefunding - A boolean indicating whether payment is being refunded\n   * @property {Bool} popOverIsOpen - A boolean indicating whether popover is open\n   * @return {Node} React node containing component for displaying the `invoice` section on the orders sideview\n   */\n  _proto.displayMedia = function () {\n    function displayMedia(uniqueItem) {\n      var displayMedia = this.props.displayMedia;\n      return React.createElement(Components.ProductImage, {\n        item: uniqueItem,\n        displayMedia: displayMedia,\n        size: \"thumbnail\",\n        badge: false\n      });\n    }\n\n    return displayMedia;\n  }();\n\n  _proto.renderLineItem = function () {\n    function renderLineItem(uniqueItem) {\n      return React.createElement(\"div\", {\n        className: \"order-items invoice-item\"\n      }, React.createElement(\"div\", {\n        className: \"order-item form-group order-summary-form-group\"\n      }, React.createElement(\"div\", {\n        className: \"order-item-media\"\n      }, React.createElement(\"div\", null, this.displayMedia(uniqueItem))), React.createElement(\"div\", {\n        className: \"order-item-details\"\n      }, React.createElement(\"div\", {\n        className: \"order-detail-title\"\n      }, uniqueItem.title, \" \", React.createElement(\"br\", null), React.createElement(\"small\", null, uniqueItem.variants.title))), React.createElement(\"div\", {\n        className: \"order-detail-quantity\"\n      }, React.createElement(\"div\", null, uniqueItem.quantity)), React.createElement(\"div\", {\n        className: \"order-detail-price\"\n      }, React.createElement(\"div\", {\n        className: \"invoice-details\",\n        style: {\n          marginRight: 15\n        }\n      }, React.createElement(\"strong\", null, formatPriceString(uniqueItem.variants.price))))));\n    }\n\n    return renderLineItem;\n  }();\n\n  _proto.renderPopOverLineItem = function () {\n    function renderPopOverLineItem(uniqueItem) {\n      var _this = this;\n\n      var className = classnames({\n        \"order-items\": true,\n        \"invoice-item\": true,\n        \"selected\": this.props.selectedItems.includes(uniqueItem._id)\n      });\n      return React.createElement(\"div\", {\n        className: className\n      }, React.createElement(\"div\", {\n        className: \"order-item form-group order-summary-form-group\"\n      }, React.createElement(\"div\", {\n        className: \"order-item-media popover-mode\"\n      }, React.createElement(Components.RolloverCheckbox, {\n        className: \"order-invoice-rollover\",\n        checkboxClassName: \"checkbox-avatar checkbox-large\",\n        onChange: function () {\n          return _this.props.handleItemSelect(uniqueItem);\n        },\n        checked: this.props.selectedItems.includes(uniqueItem._id)\n      }, this.displayMedia(uniqueItem))), React.createElement(\"div\", {\n        className: \"order-item-details\"\n      }, React.createElement(\"div\", {\n        className: \"order-detail-title\"\n      }, uniqueItem.title, \" \", React.createElement(\"br\", null), React.createElement(\"small\", null, uniqueItem.variants.title))), React.createElement(\"div\", {\n        className: \"order-detail-quantity\"\n      }, !this.props.selectedItems.includes(uniqueItem._id) && uniqueItem.quantity > 0 ? React.createElement(Components.NumberTypeInput, {\n        minValue: 0,\n        defaultValue: uniqueItem.quantity,\n        onChange: function (event, value) {\n          return _this.props.handleInputChange(event, value, uniqueItem);\n        },\n        maxValue: uniqueItem.quantity\n      }) : React.createElement(\"div\", null, \"0\")), React.createElement(\"div\", {\n        className: \"order-detail-price\"\n      }, React.createElement(\"div\", {\n        className: \"invoice-details\",\n        style: {\n          marginRight: 15\n        }\n      }, React.createElement(\"strong\", null, formatPriceString(uniqueItem.variants.price))))));\n    }\n\n    return renderPopOverLineItem;\n  }();\n\n  _proto.renderLineItemInvoice = function () {\n    function renderLineItemInvoice(uniqueItem) {\n      return React.createElement(\"div\", {\n        className: \"invoice-order-items\"\n      }, this.props.order.taxes && React.createElement(\"div\", {\n        className: \"invoice-order-item-tax\"\n      }, React.createElement(\"b\", null, React.createElement(Components.Translation, {\n        defaultValue: \"Tax\",\n        i18nKey: \"cartSubTotals.tax\"\n      })), React.createElement(\"div\", {\n        className: \"tax-code\"\n      }, React.createElement(\"span\", null, uniqueItem.taxDetail ? uniqueItem.taxDetail.taxCode : uniqueItem.variants.taxCode)), React.createElement(\"div\", {\n        className: \"tax-cost\"\n      }, React.createElement(\"span\", null, uniqueItem.taxDetail ? formatPriceString(uniqueItem.taxDetail.tax) : formatPriceString(uniqueItem.tax)))), React.createElement(\"div\", {\n        className: \"invoice-order-item-subtotal\"\n      }, React.createElement(\"b\", null, React.createElement(Components.Translation, {\n        defaultValue: \"Subtotal\",\n        i18nKey: \"cartSubTotals.subtotal\"\n      })), React.createElement(\"span\", null, React.createElement(\"b\", null, formatPriceString(uniqueItem.variants.price * uniqueItem.quantity)))));\n    }\n\n    return renderLineItemInvoice;\n  }();\n\n  _proto.renderLineItemRefund = function () {\n    function renderLineItemRefund() {\n      var editedItems = this.props.editedItems;\n      return React.createElement(\"div\", null, React.createElement(\"div\", {\n        className: \"invoice-refund-edited\"\n      }, React.createElement(\"div\", {\n        className: \"refund-header\"\n      }, React.createElement(\"div\", null, React.createElement(Components.Translation, {\n        defaultValue: \"For Refund\",\n        i18nKey: \"admin.invoice.refundLabel\"\n      })), React.createElement(\"div\", null, React.createElement(Components.Translation, {\n        defaultValue: \"Items\",\n        i18nKey: \"admin.invoice.refundItems\"\n      })), React.createElement(\"div\", null, React.createElement(Components.Translation, {\n        defaultValue: \"Total\",\n        i18nKey: \"admin.invoice.refundItemAmount\"\n      }))), React.createElement(\"div\", {\n        className: \"refund-body\"\n      }, editedItems.map(function (item, index) {\n        return React.createElement(\"div\", {\n          className: \"refund-item\",\n          key: index\n        }, React.createElement(\"div\", null, React.createElement(\"span\", null, item.title)), React.createElement(\"div\", null, React.createElement(\"span\", null, item.refundedQuantity)), React.createElement(\"div\", null, React.createElement(\"span\", null, formatPriceString(item.refundedTotal))));\n      }), React.createElement(\"div\", {\n        className: \"refund-item return\"\n      }, React.createElement(\"div\", null, React.createElement(\"b\", null, React.createElement(Components.Translation, {\n        defaultValue: \"RETURN TOTAL\",\n        i18nKey: \"admin.invoice.refundTotal\"\n      }))), React.createElement(\"div\", null, React.createElement(\"span\", null, this.props.getRefundedItemsInfo().quantity)), React.createElement(\"div\", null, React.createElement(\"span\", null, formatPriceString(this.props.getRefundedItemsInfo().total)))))));\n    }\n\n    return renderLineItemRefund;\n  }();\n\n  _proto.renderPopOver = function () {\n    function renderPopOver() {\n      return React.createElement(Components.Popover, {\n        isOpen: this.props.popOverIsOpen,\n        attachment: \"middle center\",\n        targetAttachment: \"middle center\",\n        constraints: [{\n          to: \"scrollParent\",\n          pin: true\n        }, {\n          to: \"window\",\n          attachment: \"together\"\n        }],\n        showDropdownButton: false\n      }, this.popOverContent());\n    }\n\n    return renderPopOver;\n  }();\n\n  _proto.popOverContent = function () {\n    function popOverContent() {\n      var _this2 = this;\n\n      return React.createElement(\"div\", {\n        className: \"invoice-popover\"\n      }, React.createElement(\"div\", {\n        className: \"invoice-popover-controls\"\n      }, React.createElement(Components.Checkbox, {\n        className: \"checkbox-large\",\n        checked: this.props.selectAllItems || this.props.selectedItems.length === this.props.uniqueItems.length,\n        onChange: function () {\n          return _this2.props.handleSelectAllItems(_this2.props.uniqueItems);\n        }\n      }), React.createElement(\"div\", {\n        className: \"invoice-popover-close\"\n      }, React.createElement(Components.Button, {\n        className: \"rui btn btn-default flat icon-only pull-right\",\n        icon: \"fa-2x fa fa-times\",\n        bezelStyle: \"flat\",\n        onClick: this.props.clearRefunds\n      }))), React.createElement(\"div\", null, this.props.uniqueItems.map(function (uniqueItem, index) {\n        return React.createElement(\"div\", {\n          key: index\n        }, _this2.renderPopOverLineItem(uniqueItem), _this2.renderLineItemInvoice(uniqueItem));\n      })), React.createElement(\"div\", null, !_isEmpty(this.props.editedItems) && this.renderLineItemRefund()), React.createElement(\"div\", {\n        className: \"invoice-actions\"\n      }, React.createElement(\"div\", {\n        className: \"invoice-action-cancel\"\n      }, React.createElement(Components.Button, {\n        className: \"pull-right\",\n        bezelStyle: \"solid\",\n        status: \"default\",\n        label: \"Cancel\",\n        onClick: this.props.clearRefunds\n      })), React.createElement(\"div\", {\n        className: \"invoice-action-refund\"\n      }, React.createElement(Components.Button, {\n        className: \"pull-right\",\n        bezelStyle: \"solid\",\n        status: \"primary\",\n        disabled: this.props.isRefunding || this.props.editedItems.length === 0,\n        onClick: this.props.handleRefundItems\n      }, this.props.isRefunding ? React.createElement(\"span\", null, \"Refunding \", React.createElement(\"i\", {\n        className: \"fa fa-spinner fa-spin\"\n      })) : React.createElement(\"span\", null, \"Refund Items\")))));\n    }\n\n    return popOverContent;\n  }();\n\n  _proto.render = function () {\n    function render() {\n      var _this3 = this;\n\n      var uniqueItems = this.props.uniqueItems;\n      return React.createElement(Components.Button, {\n        tagName: \"div\",\n        className: {\n          \"btn\": false,\n          \"btn-default\": false,\n          \"flat\": false,\n          \"invoice\": true,\n          \"invoice-line-items\": true\n        },\n        onClick: this.props.handlePopOverOpen\n      }, uniqueItems.map(function (uniqueItem) {\n        return React.createElement(\"div\", {\n          key: uniqueItem._id\n        }, \" \", _this3.renderLineItem(uniqueItem), \" \");\n      }), Roles.userIsInRole(Meteor.userId(), [\"orders\", \"dashboard/orders\"], Reaction.getShopId()) && this.renderPopOver());\n    }\n\n    return render;\n  }();\n\n  return LineItems;\n}(Component);\n\nLineItems.propTypes = {\n  clearRefunds: PropTypes.func,\n  displayMedia: PropTypes.func,\n  editedItems: PropTypes.array,\n  getRefundedItemsInfo: PropTypes.func,\n  getSelectedItemsInfo: PropTypes.func,\n  handleInputChange: PropTypes.func,\n  handleItemSelect: PropTypes.func,\n  handlePopOverOpen: PropTypes.func,\n  handleRefundItems: PropTypes.func,\n  handleSelectAllItems: PropTypes.func,\n  isRefunding: PropTypes.bool,\n  order: PropTypes.object,\n  popOverIsOpen: PropTypes.bool,\n  selectAllItems: PropTypes.bool,\n  selectedItems: PropTypes.array,\n  uniqueItems: PropTypes.array\n};\nregisterComponent(\"LineItems\", LineItems);\nmodule1.exportDefault(LineItems);","map":{"version":3,"sources":["imports/plugins/core/orders/client/components/lineItems.js"],"names":["module1","module","_isEmpty","watch","require","v","React","Component","PropTypes","classnames","Meteor","Roles","formatPriceString","Reaction","Components","registerComponent","LineItems","displayMedia","uniqueItem","props","renderLineItem","title","variants","quantity","marginRight","price","renderPopOverLineItem","className","selectedItems","includes","_id","handleItemSelect","event","value","handleInputChange","renderLineItemInvoice","order","taxes","taxDetail","taxCode","tax","renderLineItemRefund","editedItems","map","item","index","refundedQuantity","refundedTotal","getRefundedItemsInfo","total","renderPopOver","popOverIsOpen","to","pin","attachment","popOverContent","selectAllItems","length","uniqueItems","handleSelectAllItems","clearRefunds","isRefunding","handleRefundItems","render","handlePopOverOpen","userIsInRole","userId","getShopId","propTypes","func","array","getSelectedItemsInfo","bool","object","exportDefault"],"mappings":"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","sourcesContent":["import React, { Component } from \"react\";\nimport PropTypes from \"prop-types\";\nimport { isEmpty } from \"lodash\";\nimport classnames from \"classnames\";\nimport { Meteor } from \"meteor/meteor\";\nimport { Roles } from \"meteor/alanning:roles\";\nimport { formatPriceString, Reaction } from \"/client/api\";\nimport { Components, registerComponent } from \"@reactioncommerce/reaction-components\";\n\n/**\n * @file LineItems React Component for displaying the actionable data on the invoice section on the orders sideview\n *\n * @module LineItems\n * @extends Component\n */\n\nclass LineItems extends Component {\n  /**\n   * @name LineItems propTypes\n   * @summary React component for displaying the actionable data on the invoice section on the orders sideview\n   * @param {Object} props - React PropTypes\n   * @property {Object} order - An object represnting an order\n   * @property {Object} uniqueItems - An object representing a line item\n   * @property {Array} editedItems - An array/list of line items that have been edited/modified\n   * @property {Array} selectedItems - An array of all the line items  that have been selected\n   * @property {Function} displayMedia - A function to display line items images\n   * @property {Function} clearRefunds - A function to clear edited/selected items\n   * @property {Function} getRefundedItemsInfo - A function that returns an object containing refunded items info\n   * @property {Function} getSelectedItemsInfo - A function that returns an object containing selected items info\n   * @property {Function} handleInputChange - A function to handle numeric input change\n   * @property {Function} handleItemSelect - A function to handle selecting an item via chekbox\n   * @property {Function} handlePopOverOpen - A function to handle the popover open and close\n   * @property {Function} handleRefundItems - A function to handle items return\n   * @property {Function} handleSelectAllItems - A function to handle selecting of all items\n   * @property {Bool} selectAllItems - A boolean indicating whether all items have been selected\n   * @property {Bool} isRefunding - A boolean indicating whether payment is being refunded\n   * @property {Bool} popOverIsOpen - A boolean indicating whether popover is open\n   * @return {Node} React node containing component for displaying the `invoice` section on the orders sideview\n   */\n  static propTypes = {\n    clearRefunds: PropTypes.func,\n    displayMedia: PropTypes.func,\n    editedItems: PropTypes.array,\n    getRefundedItemsInfo: PropTypes.func,\n    getSelectedItemsInfo: PropTypes.func,\n    handleInputChange: PropTypes.func,\n    handleItemSelect: PropTypes.func,\n    handlePopOverOpen: PropTypes.func,\n    handleRefundItems: PropTypes.func,\n    handleSelectAllItems: PropTypes.func,\n    isRefunding: PropTypes.bool,\n    order: PropTypes.object,\n    popOverIsOpen: PropTypes.bool,\n    selectAllItems: PropTypes.bool,\n    selectedItems: PropTypes.array,\n    uniqueItems: PropTypes.array\n  }\n\n  displayMedia(uniqueItem) {\n    const { displayMedia } = this.props;\n\n    return (\n      <Components.ProductImage\n        item={uniqueItem}\n        displayMedia={displayMedia}\n        size=\"thumbnail\"\n        badge={false}\n      />\n    );\n  }\n\n  renderLineItem(uniqueItem) {\n    return (\n      <div className=\"order-items invoice-item\">\n        <div\n          className=\"order-item form-group order-summary-form-group\"\n        >\n          <div className=\"order-item-media\">\n            <div>\n              {this.displayMedia(uniqueItem)}\n            </div>\n          </div>\n\n          <div className=\"order-item-details\">\n            <div className=\"order-detail-title\">\n              {uniqueItem.title} <br/><small>{uniqueItem.variants.title}</small>\n            </div>\n          </div>\n\n          <div className=\"order-detail-quantity\">\n            <div>{uniqueItem.quantity}</div>\n          </div>\n\n          <div className=\"order-detail-price\">\n            <div className=\"invoice-details\" style={{ marginRight: 15 }}>\n              <strong>{formatPriceString(uniqueItem.variants.price)}</strong>\n            </div>\n          </div>\n\n        </div>\n      </div>\n    );\n  }\n\n  renderPopOverLineItem(uniqueItem) {\n    const className = classnames({\n      \"order-items\": true,\n      \"invoice-item\": true,\n      \"selected\": this.props.selectedItems.includes(uniqueItem._id)\n    });\n\n    return (\n      <div className={className}>\n        <div\n          className=\"order-item form-group order-summary-form-group\"\n        >\n          <div className=\"order-item-media popover-mode\">\n            <Components.RolloverCheckbox\n              className=\"order-invoice-rollover\"\n              checkboxClassName=\"checkbox-avatar checkbox-large\"\n              onChange={() => this.props.handleItemSelect(uniqueItem)}\n              checked={this.props.selectedItems.includes(uniqueItem._id)}\n            >\n              {this.displayMedia(uniqueItem)}\n            </Components.RolloverCheckbox>\n          </div>\n\n          <div className=\"order-item-details\">\n            <div className=\"order-detail-title\">\n              {uniqueItem.title} <br/><small>{uniqueItem.variants.title}</small>\n            </div>\n          </div>\n\n          <div className=\"order-detail-quantity\">\n            {!this.props.selectedItems.includes(uniqueItem._id) && uniqueItem.quantity > 0 ?\n              <Components.NumberTypeInput\n                minValue={0}\n                defaultValue={uniqueItem.quantity}\n                onChange={(event, value) => this.props.handleInputChange(event, value, uniqueItem)}\n                maxValue={uniqueItem.quantity}\n              /> :\n              <div>0</div>\n            }\n          </div>\n\n          <div className=\"order-detail-price\">\n            <div className=\"invoice-details\" style={{ marginRight: 15 }}>\n              <strong>{formatPriceString(uniqueItem.variants.price)}</strong>\n            </div>\n          </div>\n\n        </div>\n      </div>\n    );\n  }\n\n  renderLineItemInvoice(uniqueItem) {\n    return (\n      <div className=\"invoice-order-items\">\n        {this.props.order.taxes &&\n          <div className=\"invoice-order-item-tax\">\n            <b>\n              <Components.Translation\n                defaultValue=\"Tax\"\n                i18nKey=\"cartSubTotals.tax\"\n              />\n            </b>\n            <div className=\"tax-code\">\n              <span>\n                {uniqueItem.taxDetail ? uniqueItem.taxDetail.taxCode : uniqueItem.variants.taxCode}\n              </span>\n            </div>\n            <div className=\"tax-cost\">\n              <span>\n                {uniqueItem.taxDetail ?\n                  formatPriceString(uniqueItem.taxDetail.tax) :\n                  formatPriceString(uniqueItem.tax)\n                }\n              </span>\n            </div>\n          </div>\n        }\n        <div className=\"invoice-order-item-subtotal\">\n          <b>\n            <Components.Translation\n              defaultValue=\"Subtotal\"\n              i18nKey=\"cartSubTotals.subtotal\"\n            />\n          </b>\n          <span><b>{formatPriceString(uniqueItem.variants.price * uniqueItem.quantity)}</b></span>\n        </div>\n      </div>\n    );\n  }\n\n  renderLineItemRefund() {\n    const { editedItems } = this.props;\n    return (\n      <div>\n        <div className=\"invoice-refund-edited\">\n          <div className=\"refund-header\">\n            <div>\n              <Components.Translation defaultValue=\"For Refund\" i18nKey=\"admin.invoice.refundLabel\"/>\n            </div>\n            <div>\n              <Components.Translation defaultValue=\"Items\" i18nKey=\"admin.invoice.refundItems\"/>\n            </div>\n            <div>\n              <Components.Translation defaultValue=\"Total\" i18nKey=\"admin.invoice.refundItemAmount\"/>\n            </div>\n          </div>\n          <div className=\"refund-body\">\n            {editedItems.map((item, index) => (\n              <div className=\"refund-item\" key={index}>\n                <div>\n                  <span>{item.title}</span>\n                </div>\n                <div>\n                  <span>{item.refundedQuantity}</span>\n                </div>\n                <div>\n                  <span>{formatPriceString(item.refundedTotal)}</span>\n                </div>\n              </div>\n            ))}\n            <div className=\"refund-item return\">\n              <div>\n                <b><Components.Translation defaultValue=\"RETURN TOTAL\" i18nKey=\"admin.invoice.refundTotal\"/></b>\n              </div>\n              <div>\n                <span>\n                  {this.props.getRefundedItemsInfo().quantity}\n                </span>\n              </div>\n              <div>\n                <span>\n                  {formatPriceString(this.props.getRefundedItemsInfo().total)}\n                </span>\n              </div>\n            </div>\n          </div>\n        </div>\n      </div>\n    );\n  }\n\n  renderPopOver() {\n    return (\n      <Components.Popover\n        isOpen={this.props.popOverIsOpen}\n        attachment=\"middle center\"\n        targetAttachment=\"middle center\"\n        constraints={[\n          {\n            to: \"scrollParent\",\n            pin: true\n          },\n          {\n            to: \"window\",\n            attachment: \"together\"\n          }\n        ]}\n        showDropdownButton={false}\n      >\n        {this.popOverContent()}\n      </Components.Popover>\n    );\n  }\n\n  popOverContent() {\n    return (\n      <div className=\"invoice-popover\">\n        <div className=\"invoice-popover-controls\">\n          <Components.Checkbox\n            className=\"checkbox-large\"\n            checked={this.props.selectAllItems || this.props.selectedItems.length === this.props.uniqueItems.length}\n            onChange={() => this.props.handleSelectAllItems(this.props.uniqueItems)}\n          />\n          <div className=\"invoice-popover-close\">\n            <Components.Button\n              className=\"rui btn btn-default flat icon-only pull-right\"\n              icon=\"fa-2x fa fa-times\"\n              bezelStyle=\"flat\"\n              onClick={this.props.clearRefunds}\n            />\n          </div>\n        </div>\n        <div>\n          {this.props.uniqueItems.map((uniqueItem, index) => (\n            <div key={index}>\n              {this.renderPopOverLineItem(uniqueItem)}\n              {this.renderLineItemInvoice(uniqueItem)}\n            </div>\n          ))}\n        </div>\n        <div>\n          {!isEmpty(this.props.editedItems) && this.renderLineItemRefund()}\n        </div>\n        <div className=\"invoice-actions\">\n          <div className=\"invoice-action-cancel\">\n            <Components.Button\n              className=\"pull-right\"\n              bezelStyle=\"solid\"\n              status=\"default\"\n              label=\"Cancel\"\n              onClick={this.props.clearRefunds}\n            />\n          </div>\n          <div className=\"invoice-action-refund\">\n            <Components.Button\n              className=\"pull-right\"\n              bezelStyle=\"solid\"\n              status=\"primary\"\n              disabled={this.props.isRefunding || this.props.editedItems.length === 0}\n              onClick={this.props.handleRefundItems}\n            >\n              {this.props.isRefunding ? <span>Refunding <i className=\"fa fa-spinner fa-spin\" /></span> :\n                <span>Refund Items</span>\n              }\n            </Components.Button>\n          </div>\n        </div>\n      </div>\n    );\n  }\n\n  render() {\n    const { uniqueItems } = this.props;\n    return (\n      <Components.Button\n        tagName=\"div\"\n        className={{\n          \"btn\": false,\n          \"btn-default\": false,\n          \"flat\": false,\n          \"invoice\": true,\n          \"invoice-line-items\": true\n        }}\n        onClick={this.props.handlePopOverOpen}\n      >\n        {uniqueItems.map((uniqueItem) => (\n          <div key={uniqueItem._id}> {this.renderLineItem(uniqueItem)} </div>\n        ))}\n\n        {\n          Roles.userIsInRole(Meteor.userId(), [\"orders\", \"dashboard/orders\"], Reaction.getShopId()) &&\n          this.renderPopOver()\n        }\n      </Components.Button>\n    );\n  }\n}\n\nregisterComponent(\"LineItems\", LineItems);\n\nexport default LineItems;\n"]},"sourceType":"script","hash":"0651b5f5ef7b161da283378e7992722f7008eabf"}
