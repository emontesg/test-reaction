{"metadata":{},"options":{"plugins":[{"key":"base$0$0","visitor":{"Program":{"enter":[null]},"_exploded":true,"_verified":true},"options":{"generateLetDeclarations":true,"enforceStrictMode":false}},{"key":"transform-meteor-dynamic-import","visitor":{"_exploded":{},"_verified":{},"CallExpression":{"enter":[null]}},"options":{}},{"key":"base$0$2","visitor":{"CallExpression":{"enter":[null]},"BinaryExpression":{"enter":[null]},"MemberExpression":{"enter":[null],"exit":[null]},"_exploded":true,"_verified":true,"Identifier":{"enter":[null]},"JSXIdentifier":{"enter":[null]}},"options":{"polyfill":false,"useBuiltIns":false}},{"key":"base$0$3","visitor":{"_exploded":{},"_verified":{},"ClassDeclaration":{"enter":[null]},"ClassExpression":{"enter":[null]}},"options":{"loose":true}},{"key":"base$0$4","visitor":{"FunctionExpression":{"exit":[null]},"_exploded":true,"_verified":true},"options":{}},{"key":"base$0$5","visitor":{"ForInStatement":{"enter":[null]},"_exploded":true,"_verified":true},"options":{}},{"key":"base$0$6","visitor":{"Program":{"exit":[null]},"_exploded":true,"_verified":true},"options":{"allowTopLevelThis":true,"strictMode":false,"loose":true}},{"key":"base$0$1$0","visitor":{"_exploded":{},"_verified":{},"JSXNamespacedName":{"enter":[null]},"JSXElement":{"exit":[null]},"JSXFragment":{"exit":[null]},"Program":{"enter":[null],"exit":[null]},"JSXAttribute":{"enter":[null]}},"options":{"pragma":"React.createElement","pragmaFrag":"React.Fragment","throwIfNamespace":true,"useBuiltIns":false}},{"key":"base$0$1$1","visitor":{"_exploded":true,"_verified":true},"options":{}},{"key":"base$0$1$2","visitor":{"ExportDefaultDeclaration":{"enter":[null]},"CallExpression":{"enter":[null]},"_exploded":true,"_verified":true},"options":{}},{"key":"base$0$0$0","visitor":{"_exploded":true,"_verified":true},"options":{}},{"key":"base$0$0$1","visitor":{"_exploded":true,"_verified":true},"options":{}},{"key":"base$0$0$2","visitor":{"ArrowFunctionExpression":{"enter":[null]},"_exploded":true,"_verified":true},"options":{}},{"key":"base$0$0$3","visitor":{"BlockStatement":{"enter":[null]},"SwitchCase":{"enter":[null]},"_exploded":true,"_verified":true},"options":{}},{"key":"base$0$0$4","visitor":{"VariableDeclaration":{"enter":[null]},"CatchClause":{"enter":[null]},"_exploded":true,"BlockStatement":{"enter":[null]},"SwitchStatement":{"enter":[null]},"Program":{"enter":[null]},"_verified":true,"DoWhileStatement":{"enter":[null]},"ForInStatement":{"enter":[null]},"ForStatement":{"enter":[null]},"WhileStatement":{"enter":[null]},"ForOfStatement":{"enter":[null]}},"options":{}},{"key":"base$0$0$5","visitor":{"ExportDefaultDeclaration":{"enter":[null]},"ClassDeclaration":{"enter":[null]},"ClassExpression":{"enter":[null]},"_exploded":true,"_verified":true},"options":{"loose":true}},{"key":"base$0$0$6","visitor":{"ObjectExpression":{"exit":[null]},"_exploded":true,"_verified":true},"options":{"loose":true}},{"key":"base$0$0$7","visitor":{"ExportNamedDeclaration":{"enter":[null]},"CatchClause":{"enter":[null]},"AssignmentExpression":{"enter":[null]},"VariableDeclaration":{"enter":[null]},"_exploded":true,"_verified":true,"ForInStatement":{"enter":[null]},"ForOfStatement":{"enter":[null]}},"options":{}},{"key":"base$0$0$8","visitor":{"ForOfStatement":{"enter":[null]},"_exploded":true,"_verified":true},"options":{"loose":true}},{"key":"base$0$0$9","visitor":{"NumericLiteral":{"enter":[null]},"StringLiteral":{"enter":[null]},"_exploded":true,"_verified":true},"options":{}},{"key":"base$0$0$10","visitor":{"ObjectExpression":{"enter":[null]},"_exploded":true,"_verified":true},"options":{}},{"key":"base$0$0$11","visitor":{"_exploded":true,"_verified":true,"FunctionDeclaration":{"enter":[null]},"FunctionExpression":{"enter":[null]},"ObjectMethod":{"enter":[null]},"ArrowFunctionExpression":{"enter":[null]},"ClassMethod":{"enter":[null]}},"options":{}},{"key":"base$0$0$12","visitor":{"ObjectMethod":{"enter":[null]},"ObjectProperty":{"enter":[null]},"_exploded":true,"_verified":true},"options":{}},{"key":"base$0$0$13","visitor":{"ArrayExpression":{"enter":[null]},"CallExpression":{"enter":[null]},"NewExpression":{"enter":[null]},"_exploded":true,"_verified":true},"options":{}},{"key":"base$0$0$14","visitor":{"RegExpLiteral":{"enter":[null]},"_exploded":true,"_verified":true},"options":{}},{"key":"base$0$0$15","visitor":{"TaggedTemplateExpression":{"enter":[null]},"TemplateLiteral":{"enter":[null]},"_exploded":true,"_verified":true},"options":{"loose":true}},{"key":"base$0$0$16","visitor":{"UnaryExpression":{"enter":[null]},"_exploded":true,"_verified":true,"BlockStatement":{"enter":[null]},"CatchClause":{"enter":[null]},"DoWhileStatement":{"enter":[null]},"ForInStatement":{"enter":[null]},"ForStatement":{"enter":[null]},"FunctionDeclaration":{"enter":[null]},"FunctionExpression":{"enter":[null]},"Program":{"enter":[null]},"ObjectMethod":{"enter":[null]},"SwitchStatement":{"enter":[null]},"WhileStatement":{"enter":[null]},"ArrowFunctionExpression":{"enter":[null]},"ClassDeclaration":{"enter":[null]},"ClassExpression":{"enter":[null]},"ForOfStatement":{"enter":[null]},"ClassMethod":{"enter":[null]}},"options":{}},{"key":"base$0$0$17","visitor":{"RegExpLiteral":{"enter":[null]},"_exploded":true,"_verified":true},"options":{}},{"key":"base$0$0$18","visitor":{"_exploded":true,"_verified":true},"options":{}},{"key":"base$0$0$19","visitor":{"_exploded":{},"_verified":{},"VariableDeclarator":{"enter":[null]},"ExportNamedDeclaration":{"enter":[null]},"CatchClause":{"enter":[null]},"AssignmentExpression":{"enter":[null]},"ObjectExpression":{"enter":[null]},"FunctionDeclaration":{"enter":[null]},"FunctionExpression":{"enter":[null]},"ObjectMethod":{"enter":[null]},"ArrowFunctionExpression":{"enter":[null]},"ClassMethod":{"enter":[null]},"ForInStatement":{"enter":[null]},"ForOfStatement":{"enter":[null]}},"options":{}},{"key":"base$0$0$20","visitor":{"ObjectProperty":{"exit":[null]},"_exploded":true,"_verified":true},"options":{}},{"key":"base$0$0$21","visitor":{"_exploded":{},"_verified":{},"Program":{"enter":[null]},"ImportDeclaration":{"enter":[null,null]},"ClassProperty":{"enter":[null]},"AssignmentPattern":{"enter":[null]},"TypeCastExpression":{"enter":[null,null]},"ImportSpecifier":{"enter":[null]},"ClassDeclaration":{"enter":[null]},"ClassExpression":{"enter":[null]},"FunctionDeclaration":{"enter":[null]},"FunctionExpression":{"enter":[null]},"ObjectMethod":{"enter":[null]},"ArrowFunctionExpression":{"enter":[null]},"ClassMethod":{"enter":[null]},"AnyTypeAnnotation":{"enter":[null]},"ArrayTypeAnnotation":{"enter":[null]},"BooleanTypeAnnotation":{"enter":[null]},"BooleanLiteralTypeAnnotation":{"enter":[null]},"NullLiteralTypeAnnotation":{"enter":[null]},"ClassImplements":{"enter":[null]},"DeclareClass":{"enter":[null]},"DeclareFunction":{"enter":[null]},"DeclareInterface":{"enter":[null]},"DeclareModule":{"enter":[null]},"DeclareModuleExports":{"enter":[null]},"DeclareTypeAlias":{"enter":[null]},"DeclareOpaqueType":{"enter":[null]},"DeclareVariable":{"enter":[null]},"DeclareExportDeclaration":{"enter":[null]},"DeclareExportAllDeclaration":{"enter":[null]},"DeclaredPredicate":{"enter":[null]},"ExistsTypeAnnotation":{"enter":[null]},"FunctionTypeAnnotation":{"enter":[null]},"FunctionTypeParam":{"enter":[null]},"GenericTypeAnnotation":{"enter":[null]},"InferredPredicate":{"enter":[null]},"InterfaceExtends":{"enter":[null]},"InterfaceDeclaration":{"enter":[null]},"IntersectionTypeAnnotation":{"enter":[null]},"MixedTypeAnnotation":{"enter":[null]},"EmptyTypeAnnotation":{"enter":[null]},"NullableTypeAnnotation":{"enter":[null]},"NumberLiteralTypeAnnotation":{"enter":[null]},"NumberTypeAnnotation":{"enter":[null]},"ObjectTypeAnnotation":{"enter":[null]},"ObjectTypeCallProperty":{"enter":[null]},"ObjectTypeIndexer":{"enter":[null]},"ObjectTypeProperty":{"enter":[null]},"ObjectTypeSpreadProperty":{"enter":[null]},"OpaqueType":{"enter":[null]},"QualifiedTypeIdentifier":{"enter":[null]},"StringLiteralTypeAnnotation":{"enter":[null]},"StringTypeAnnotation":{"enter":[null]},"ThisTypeAnnotation":{"enter":[null]},"TupleTypeAnnotation":{"enter":[null]},"TypeofTypeAnnotation":{"enter":[null]},"TypeAlias":{"enter":[null]},"TypeAnnotation":{"enter":[null]},"TypeParameter":{"enter":[null]},"TypeParameterDeclaration":{"enter":[null]},"TypeParameterInstantiation":{"enter":[null]},"UnionTypeAnnotation":{"enter":[null]},"Variance":{"enter":[null]},"VoidTypeAnnotation":{"enter":[null]},"ExportAllDeclaration":{"enter":[null]},"ExportDefaultDeclaration":{"enter":[null]},"ExportNamedDeclaration":{"enter":[null]}},"options":{}},{"key":"base$0$0$22","visitor":{"AssignmentExpression":{"enter":[null]},"BinaryExpression":{"enter":[null]},"_exploded":true,"_verified":true},"options":{}},{"key":"base$0$0$23","visitor":{"_exploded":{},"_verified":{},"Program":{"enter":[null]}},"options":{}},{"key":"regenerator-transform","visitor":{"_exploded":true,"_verified":true,"FunctionDeclaration":{"exit":[null]},"FunctionExpression":{"exit":[null]},"ObjectMethod":{"exit":[null]},"ArrowFunctionExpression":{"exit":[null]},"ClassMethod":{"exit":[null]}},"options":{}}],"presets":[],"compact":false,"ast":true,"babelrc":false,"sourceFileName":"imports/plugins/included/product-admin/client/components/productAdmin.js","filename":"imports/plugins/included/product-admin/client/components/productAdmin.js","sourceMaps":true,"envName":"development","cwd":"/Users/estebandev/test-knowledge","passPerPreset":false,"parserOpts":{"sourceType":"module","sourceFileName":"imports/plugins/included/product-admin/client/components/productAdmin.js","plugins":["dynamicImport","classProperties","jsx","jsx","flow","asyncGenerators","objectRestSpread","objectRestSpread","flow","asyncGenerators"]},"generatorOpts":{"filename":"imports/plugins/included/product-admin/client/components/productAdmin.js","comments":true,"compact":false,"sourceMaps":true,"sourceFileName":"imports/plugins/included/product-admin/client/components/productAdmin.js"}},"code":"var _createClass2 = _interopRequireDefault(require(\"@babel/runtime/helpers/createClass\"));\n\nvar _inheritsLoose2 = _interopRequireDefault(require(\"@babel/runtime/helpers/inheritsLoose\"));\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { \"default\": obj }; }\n\nfunction _slicedToArray(arr, i) { return _arrayWithHoles(arr) || _iterableToArrayLimit(arr, i) || _nonIterableRest(); }\n\nfunction _nonIterableRest() { throw new TypeError(\"Invalid attempt to destructure non-iterable instance\"); }\n\nfunction _iterableToArrayLimit(arr, i) { var _arr = []; var _n = true; var _d = false; var _e = undefined; try { for (var _i = arr[Symbol.iterator](), _s; !(_n = (_s = _i.next()).done); _n = true) { _arr.push(_s.value); if (i && _arr.length === i) break; } } catch (err) { _d = true; _e = err; } finally { try { if (!_n && _i[\"return\"] != null) _i[\"return\"](); } finally { if (_d) throw _e; } } return _arr; }\n\nfunction _arrayWithHoles(arr) { if (Array.isArray(arr)) return arr; }\n\nvar _isEqual;\n\nmodule.watch(require(\"lodash/isEqual\"), {\n  \"default\": function (v) {\n    _isEqual = v;\n  }\n}, 0);\nvar React, Component;\nmodule.watch(require(\"react\"), {\n  \"default\": function (v) {\n    React = v;\n  },\n  Component: function (v) {\n    Component = v;\n  }\n}, 1);\nvar PropTypes;\nmodule.watch(require(\"prop-types\"), {\n  \"default\": function (v) {\n    PropTypes = v;\n  }\n}, 2);\nvar Velocity;\nmodule.watch(require(\"velocity-animate\"), {\n  \"default\": function (v) {\n    Velocity = v;\n  }\n}, 3);\nmodule.watch(require(\"velocity-animate/velocity.ui\"));\nvar Components;\nmodule.watch(require(\"../../../../core/components/lib\"), {\n  Components: function (v) {\n    Components = v;\n  }\n}, 4);\nvar Router;\nmodule.watch(require(\"../../../../../../client/api\"), {\n  Router: function (v) {\n    Router = v;\n  }\n}, 5);\nvar update;\nmodule.watch(require(\"immutability-helper\"), {\n  \"default\": function (v) {\n    update = v;\n  }\n}, 6);\nvar fieldNames = [\"title\", \"handle\", \"subtitle\", \"vendor\", \"description\", \"origincountry\", \"facebookMsg\", \"twitterMsg\", \"pinterestMsg\", \"googleplusMsg\"];\nvar fieldGroups = {\n  title: {\n    group: \"productDetails\"\n  },\n  handle: {\n    group: \"productDetails\"\n  },\n  pageTitle: {\n    group: \"productDetails\"\n  },\n  vendor: {\n    group: \"productDetails\"\n  },\n  description: {\n    group: \"productDetails\"\n  },\n  facebookMsg: {\n    group: \"social\"\n  },\n  twitterMsg: {\n    group: \"social\"\n  },\n  pinterestMsg: {\n    group: \"social\"\n  },\n  googleplusMsg: {\n    group: \"social\"\n  },\n  hashtags: {\n    group: \"hashtags\"\n  },\n  metafields: {\n    group: \"metafields\"\n  }\n};\n\nvar ProductAdmin =\n/*#__PURE__*/\nfunction (_Component) {\n  (0, _inheritsLoose2.default)(ProductAdmin, _Component);\n\n  function ProductAdmin(props) {\n    var _this;\n\n    _this = _Component.call(this, props) || this;\n\n    _this.handleCardExpand = function (event, card, cardName, isExpanded) {\n      if (_this.props.onCardExpand) {\n        _this.props.onCardExpand(isExpanded ? cardName : undefined);\n      }\n    };\n\n    _this.handleDeleteProduct = function () {\n      if (_this.props.onDeleteProduct) {\n        _this.props.onDeleteProduct(_this.props.product);\n      }\n    };\n\n    _this.handleRestoreProduct = function () {\n      if (_this.props.onRestoreProduct) {\n        _this.props.onRestoreProduct(_this.props.product);\n      }\n    };\n\n    _this.handleFieldChange = function (event, value, field) {\n      var _$merge;\n\n      var newState = update(_this.state, {\n        product: {\n          $merge: (_$merge = {}, _$merge[field] = value, _$merge)\n        }\n      });\n\n      _this.setState(newState, function () {\n        if (_this.props.onFieldChange) {\n          _this.props.onFieldChange(field, value);\n        }\n      });\n    };\n\n    _this.handleSelectChange = function (value, field) {\n      if (_this.props.onProductFieldSave) {\n        _this.props.onProductFieldSave(_this.product._id, field, value);\n      }\n    };\n\n    _this.handleToggleVisibility = function () {\n      if (_this.props.onProductFieldSave) {\n        _this.props.onProductFieldSave(_this.product._id, \"isVisible\", !_this.product.isVisible);\n      }\n    };\n\n    _this.handleMetaChange = function (event, metafield, index) {\n      if (_this.props.onMetaChange) {\n        if (index >= 0) {\n          var product = _this.state.product;\n          product.metafields[index] = metafield;\n\n          _this.setState({\n            product: product\n          });\n        } else {\n          _this.props.onMetaChange(metafield);\n        }\n      }\n    };\n\n    _this.handleFieldBlur = function (event, value, field) {\n      if (_this.props.onProductFieldSave) {\n        _this.props.onProductFieldSave(_this.product._id, field, value);\n      }\n    };\n\n    _this.handleMetaSave = function (event, metafield, index) {\n      if (_this.props.onMetaSave) {\n        _this.props.onMetaSave(_this.product._id, metafield, index);\n      }\n    };\n\n    _this.handleMetaRemove = function (event, metafield, index) {\n      if (_this.props.onMetaRemove) {\n        _this.props.onMetaRemove(_this.product._id, metafield, index);\n      }\n    };\n\n    _this.isExpanded = function (groupName) {\n      return _this.state.expandedCard === groupName;\n    };\n\n    _this.state = {\n      expandedCard: _this.fieldGroupForFieldName(props.editFocus),\n      product: props.product,\n      viewProps: props.viewProps\n    };\n    return _this;\n  }\n\n  var _proto = ProductAdmin.prototype;\n\n  _proto.componentWillReceiveProps = function () {\n    function componentWillReceiveProps(nextProps) {\n      var nextProduct = nextProps.product || {};\n      var currentProduct = this.props.product || {};\n\n      if (!_isEqual(nextProduct, currentProduct)) {\n        for (var _i = 0; _i < fieldNames.length; _i++) {\n          var fieldName = fieldNames[_i];\n\n          if (nextProduct[fieldName] !== currentProduct[fieldName]) {\n            this.animateFieldFlash(fieldName);\n          }\n        }\n      }\n\n      var cardGroupName = this.fieldGroupForFieldName(nextProps.editFocus);\n      this.setState({\n        expandedCard: cardGroupName,\n        viewProps: nextProps.viewProps\n      });\n      this.setState({\n        product: nextProps.product\n      });\n    }\n\n    return componentWillReceiveProps;\n  }();\n\n  _proto.fieldGroupForFieldName = function () {\n    function fieldGroupForFieldName(field) {\n      // Other wise, if a field was passed\n      // const fieldName = this.state.viewProps.field;\n      var fieldName; // If the field is an array of field name\n\n      if (Array.isArray(field) && field.length) {\n        // Use the first field name\n        var _field = _slicedToArray(field, 1);\n\n        fieldName = _field[0];\n      } else {\n        fieldName = field;\n      }\n\n      var fieldData = fieldGroups[fieldName];\n\n      if (fieldData && fieldData.group) {\n        return fieldData.group;\n      }\n\n      return fieldName;\n    }\n\n    return fieldGroupForFieldName;\n  }();\n\n  _proto.animateFieldFlash = function () {\n    function animateFieldFlash(fieldName) {\n      var fieldRef = this.refs[fieldName + \"Input\"];\n\n      if (fieldRef) {\n        var input = fieldRef.refs.input;\n        Velocity.RunSequence([{\n          e: input,\n          p: {\n            backgroundColor: \"#e2f2e2\"\n          },\n          o: {\n            duration: 200\n          }\n        }, {\n          e: input,\n          p: {\n            backgroundColor: \"#fff\"\n          },\n          o: {\n            duration: 100\n          }\n        }]);\n      }\n    }\n\n    return animateFieldFlash;\n  }();\n\n  _proto.renderProductVisibilityLabel = function () {\n    function renderProductVisibilityLabel() {\n      if (this.product.isVisible) {\n        return React.createElement(Components.Translation, {\n          defaultValue: \"Product is visible\",\n          i18nKey: \"productDetailEdit.productIsVisible\"\n        });\n      }\n\n      return React.createElement(Components.Translation, {\n        defaultValue: \"Product is not visible\",\n        i18nKey: \"productDetailEdit.productIsNotVisible\"\n      });\n    }\n\n    return renderProductVisibilityLabel;\n  }();\n\n  _proto.render = function () {\n    function render() {\n      return React.createElement(Components.CardGroup, null, React.createElement(Components.Card, {\n        expanded: this.isExpanded(\"productDetails\"),\n        name: \"productDetails\",\n        onExpand: this.handleCardExpand\n      }, React.createElement(Components.CardHeader, {\n        actAsExpander: true,\n        i18nKeyTitle: \"productDetailEdit.productSettings\",\n        title: \"Product Settings\",\n        onChange: this.handleFieldChange\n      }), React.createElement(Components.CardBody, {\n        expandable: true\n      }, React.createElement(Components.Select, {\n        clearable: false,\n        i18nKeyLabel: \"productDetailEdit.template\",\n        i18nKeyPlaceholder: \"productDetailEdit.templateSelectPlaceholder\",\n        label: \"Template\",\n        name: \"template\",\n        onChange: this.handleSelectChange,\n        options: this.props.templates,\n        placeholder: \"Select a template\",\n        value: this.product.template\n      }), React.createElement(Components.TextField, {\n        i18nKeyLabel: \"productDetailEdit.title\",\n        i18nKeyPlaceholder: \"productDetailEdit.title\",\n        label: \"Title\",\n        name: \"title\",\n        onBlur: this.handleFieldBlur,\n        onChange: this.handleFieldChange,\n        onReturnKeyDown: this.handleFieldBlur,\n        placeholder: \"Title\",\n        ref: \"titleInput\",\n        value: this.product.title\n      }), React.createElement(Components.TextField, {\n        helpText: this.permalink,\n        i18nKeyLabel: \"productDetailEdit.permalink\",\n        i18nKeyPlaceholder: \"productDetailEdit.permalink\",\n        label: \"Permalink\",\n        name: \"handle\",\n        onBlur: this.handleFieldBlur,\n        onChange: this.handleFieldChange,\n        onReturnKeyDown: this.handleFieldBlur,\n        placeholder: \"Permalink\",\n        ref: \"handleInput\",\n        value: this.product.handle\n      }), React.createElement(Components.TextField, {\n        i18nKeyLabel: \"productDetailEdit.pageTitle\",\n        i18nKeyPlaceholder: \"productDetailEdit.pageTitle\",\n        label: \"Subtitle\",\n        name: \"pageTitle\",\n        onBlur: this.handleFieldBlur,\n        onChange: this.handleFieldChange,\n        onReturnKeyDown: this.handleFieldBlur,\n        placeholder: \"Subtitle\",\n        ref: \"subtitleInput\",\n        value: this.product.pageTitle\n      }), React.createElement(Components.TextField, {\n        i18nKeyLabel: \"productDetailEdit.vendor\",\n        i18nKeyPlaceholder: \"productDetailEdit.vendor\",\n        label: \"Vendor\",\n        name: \"vendor\",\n        onBlur: this.handleFieldBlur,\n        onChange: this.handleFieldChange,\n        onReturnKeyDown: this.handleFieldBlur,\n        placeholder: \"Vendor\",\n        ref: \"vendorInput\",\n        value: this.product.vendor\n      }), React.createElement(Components.TextField, {\n        i18nKeyLabel: \"productDetailEdit.description\",\n        i18nKeyPlaceholder: \"productDetailEdit.description\",\n        label: \"Description\",\n        multiline: true,\n        name: \"description\",\n        onBlur: this.handleFieldBlur,\n        onChange: this.handleFieldChange,\n        placeholder: \"Description\",\n        ref: \"descriptionInput\",\n        value: this.product.description\n      }), React.createElement(Components.Select, {\n        clearable: false,\n        i18nKeyLabel: \"productDetailEdit.originCountry\",\n        i18nKeyPlaceholder: \"productDetailEdit.originCountry\",\n        label: \"Origin Country\",\n        name: \"originCountry\",\n        onChange: this.handleSelectChange,\n        placeholder: \"Select a Country\",\n        ref: \"countryOfOriginInput\",\n        value: this.product.originCountry,\n        options: this.props.countries\n      }))), React.createElement(Components.Card, {\n        expanded: this.isExpanded(\"social\"),\n        name: \"social\",\n        onExpand: this.handleCardExpand\n      }, React.createElement(Components.CardHeader, {\n        actAsExpander: true,\n        i18nKeyTitle: \"social.socialTitle\",\n        title: \"Social\"\n      }), React.createElement(Components.CardBody, {\n        expandable: true\n      }, React.createElement(Components.TextField, {\n        i18nKeyLabel: \"productDetailEdit.facebookMsg\",\n        i18nKeyPlaceholder: \"productDetailEdit.facebookMsg\",\n        label: \"Facebook Message\",\n        multiline: true,\n        name: \"facebookMsg\",\n        onBlur: this.handleFieldBlur,\n        onChange: this.handleFieldChange,\n        ref: \"facebookMsgInput\",\n        value: this.product.facebookMsg\n      }), React.createElement(Components.TextField, {\n        i18nKeyLabel: \"productDetailEdit.twitterMsg\",\n        i18nKeyPlaceholder: \"productDetailEdit.twitterMsg\",\n        label: \"Twitter Message\",\n        multiline: true,\n        name: \"twitterMsg\",\n        onBlur: this.handleFieldBlur,\n        onChange: this.handleFieldChange,\n        ref: \"twitterMsgInput\",\n        value: this.product.twitterMsg\n      }), React.createElement(Components.TextField, {\n        i18nKeyLabel: \"productDetailEdit.pinterestMsg\",\n        i18nKeyPlaceholder: \"productDetailEdit.pinterestMsg\",\n        label: \"Pinterest Message\",\n        multiline: true,\n        name: \"pinterestMsg\",\n        onBlur: this.handleFieldBlur,\n        onChange: this.handleFieldChange,\n        ref: \"pinterestMsgInput\",\n        value: this.product.pinterestMsg\n      }), React.createElement(Components.TextField, {\n        i18nKeyLabel: \"productDetailEdit.googleplusMsg\",\n        i18nKeyPlaceholder: \"productDetailEdit.googleplusMsg\",\n        label: \"Google+ Message\",\n        multiline: true,\n        name: \"googleplusMsg\",\n        onBlur: this.handleFieldBlur,\n        onChange: this.handleFieldChange,\n        ref: \"googleplusMsgInput\",\n        value: this.product.googleplusMsg\n      }))), React.createElement(Components.Card, {\n        expanded: this.isExpanded(\"hashtags\"),\n        name: \"hashtags\",\n        onExpand: this.handleCardExpand\n      }, React.createElement(Components.CardHeader, {\n        actAsExpander: true,\n        i18nKeyTitle: \"productDetail.tags\",\n        title: \"Tags\"\n      }), React.createElement(Components.CardBody, {\n        expandable: true\n      }, React.createElement(Components.TagList, {\n        editable: this.props.editable,\n        enableNewTagForm: true,\n        product: this.product,\n        tagProps: {\n          fullWidth: true\n        }\n      }))), React.createElement(Components.Card, {\n        expanded: this.isExpanded(\"metafields\"),\n        name: \"metafields\",\n        onExpand: this.handleCardExpand\n      }, React.createElement(Components.CardHeader, {\n        actAsExpander: true,\n        i18nKeyTitle: \"productDetailEdit.details\",\n        title: \"Details\"\n      }), React.createElement(Components.CardBody, {\n        expandable: true\n      }, React.createElement(Components.Metadata, {\n        metafields: this.product.metafields,\n        newMetafield: this.props.newMetafield,\n        onMetaChange: this.handleMetaChange,\n        onMetaRemove: this.handleMetaRemove,\n        onMetaSave: this.handleMetaSave\n      }))));\n    }\n\n    return render;\n  }();\n\n  (0, _createClass2.default)(ProductAdmin, [{\n    key: \"product\",\n    get: function () {\n      return this.state.product || this.props.product || {};\n    }\n  }, {\n    key: \"permalink\",\n    get: function () {\n      if (this.props.product) {\n        return Router.pathFor(\"product\", {\n          hash: {\n            handle: this.props.product.handle\n          }\n        });\n      }\n\n      return \"\";\n    }\n  }]);\n  return ProductAdmin;\n}(Component);\n\nProductAdmin.propTypes = {\n  countries: PropTypes.arrayOf(PropTypes.object),\n  editFocus: PropTypes.oneOfType([PropTypes.string, PropTypes.arrayOf(PropTypes.string)]),\n  editable: PropTypes.bool,\n  handleFieldBlur: PropTypes.func,\n  handleFieldChange: PropTypes.func,\n  handleProductFieldChange: PropTypes.func,\n  newMetafield: PropTypes.object,\n  onCardExpand: PropTypes.func,\n  onDeleteProduct: PropTypes.func,\n  onFieldChange: PropTypes.func,\n  onMetaChange: PropTypes.func,\n  onMetaRemove: PropTypes.func,\n  onMetaSave: PropTypes.func,\n  onProductFieldSave: PropTypes.func,\n  onRestoreProduct: PropTypes.func,\n  product: PropTypes.object,\n  revisonDocumentIds: PropTypes.arrayOf(PropTypes.string),\n  templates: PropTypes.arrayOf(PropTypes.shape({\n    label: PropTypes.string,\n    value: PropTypes.any\n  })),\n  viewProps: PropTypes.object\n};\nmodule.exportDefault(ProductAdmin);","map":{"version":3,"sources":["imports/plugins/included/product-admin/client/components/productAdmin.js"],"names":["_isEqual","module","watch","require","v","React","Component","PropTypes","Velocity","Components","Router","update","fieldNames","fieldGroups","title","group","handle","pageTitle","vendor","description","facebookMsg","twitterMsg","pinterestMsg","googleplusMsg","hashtags","metafields","ProductAdmin","props","handleCardExpand","event","card","cardName","isExpanded","onCardExpand","undefined","handleDeleteProduct","onDeleteProduct","product","handleRestoreProduct","onRestoreProduct","handleFieldChange","value","field","newState","state","$merge","setState","onFieldChange","handleSelectChange","onProductFieldSave","_id","handleToggleVisibility","isVisible","handleMetaChange","metafield","index","onMetaChange","handleFieldBlur","handleMetaSave","onMetaSave","handleMetaRemove","onMetaRemove","groupName","expandedCard","fieldGroupForFieldName","editFocus","viewProps","componentWillReceiveProps","nextProps","nextProduct","currentProduct","fieldName","animateFieldFlash","cardGroupName","Array","isArray","length","fieldData","fieldRef","refs","input","RunSequence","e","p","backgroundColor","o","duration","renderProductVisibilityLabel","render","templates","template","permalink","originCountry","countries","editable","fullWidth","newMetafield","pathFor","hash","propTypes","arrayOf","object","oneOfType","string","bool","func","handleProductFieldChange","revisonDocumentIds","shape","label","any","exportDefault"],"mappings":"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","sourcesContent":["import { isEqual } from \"lodash\";\nimport React, { Component } from \"react\";\nimport PropTypes from \"prop-types\";\nimport Velocity from \"velocity-animate\";\nimport \"velocity-animate/velocity.ui\";\nimport { Components } from \"@reactioncommerce/reaction-components\";\nimport { Router } from \"/client/api\";\nimport update from \"immutability-helper\";\n\nconst fieldNames = [\n  \"title\",\n  \"handle\",\n  \"subtitle\",\n  \"vendor\",\n  \"description\",\n  \"origincountry\",\n  \"facebookMsg\",\n  \"twitterMsg\",\n  \"pinterestMsg\",\n  \"googleplusMsg\"\n];\n\nconst fieldGroups = {\n  title: { group: \"productDetails\" },\n  handle: { group: \"productDetails\" },\n  pageTitle: { group: \"productDetails\" },\n  vendor: { group: \"productDetails\" },\n  description: { group: \"productDetails\" },\n  facebookMsg: { group: \"social\" },\n  twitterMsg: { group: \"social\" },\n  pinterestMsg: { group: \"social\" },\n  googleplusMsg: { group: \"social\" },\n  hashtags: { group: \"hashtags\" },\n  metafields: { group: \"metafields\" }\n};\n\nclass ProductAdmin extends Component {\n  constructor(props) {\n    super(props);\n\n    this.state = {\n      expandedCard: this.fieldGroupForFieldName(props.editFocus),\n      product: props.product,\n      viewProps: props.viewProps\n    };\n  }\n\n  componentWillReceiveProps(nextProps) {\n    const nextProduct = nextProps.product || {};\n    const currentProduct = this.props.product || {};\n\n    if (!isEqual(nextProduct, currentProduct)) {\n      for (const fieldName of fieldNames) {\n        if (nextProduct[fieldName] !== currentProduct[fieldName]) {\n          this.animateFieldFlash(fieldName);\n        }\n      }\n    }\n\n    const cardGroupName = this.fieldGroupForFieldName(nextProps.editFocus);\n\n    this.setState({\n      expandedCard: cardGroupName,\n      viewProps: nextProps.viewProps\n    });\n\n    this.setState({\n      product: nextProps.product\n    });\n  }\n\n  fieldGroupForFieldName(field) {\n    // Other wise, if a field was passed\n    // const fieldName = this.state.viewProps.field;\n\n    let fieldName;\n\n    // If the field is an array of field name\n    if (Array.isArray(field) && field.length) {\n      // Use the first field name\n      [fieldName] = field;\n    } else {\n      fieldName = field;\n    }\n\n    const fieldData = fieldGroups[fieldName];\n\n    if (fieldData && fieldData.group) {\n      return fieldData.group;\n    }\n\n    return fieldName;\n  }\n\n  animateFieldFlash(fieldName) {\n    const fieldRef = this.refs[`${fieldName}Input`];\n\n    if (fieldRef) {\n      const { input } = fieldRef.refs;\n\n      Velocity.RunSequence([\n        { e: input, p: { backgroundColor: \"#e2f2e2\" }, o: { duration: 200 } },\n        { e: input, p: { backgroundColor: \"#fff\" }, o: { duration: 100 } }\n      ]);\n    }\n  }\n\n\n  handleCardExpand = (event, card, cardName, isExpanded) => {\n    if (this.props.onCardExpand) {\n      this.props.onCardExpand(isExpanded ? cardName : undefined);\n    }\n  }\n\n  handleDeleteProduct = () => {\n    if (this.props.onDeleteProduct) {\n      this.props.onDeleteProduct(this.props.product);\n    }\n  }\n\n  handleRestoreProduct = () => {\n    if (this.props.onRestoreProduct) {\n      this.props.onRestoreProduct(this.props.product);\n    }\n  }\n\n\n  handleFieldChange = (event, value, field) => {\n    const newState = update(this.state, {\n      product: {\n        $merge: {\n          [field]: value\n        }\n      }\n    });\n\n    this.setState(newState, () => {\n      if (this.props.onFieldChange) {\n        this.props.onFieldChange(field, value);\n      }\n    });\n  }\n\n  handleSelectChange = (value, field) => {\n    if (this.props.onProductFieldSave) {\n      this.props.onProductFieldSave(this.product._id, field, value);\n    }\n  }\n\n  handleToggleVisibility = () => {\n    if (this.props.onProductFieldSave) {\n      this.props.onProductFieldSave(this.product._id, \"isVisible\", !this.product.isVisible);\n    }\n  }\n\n  handleMetaChange = (event, metafield, index) => {\n    if (this.props.onMetaChange) {\n      if (index >= 0) {\n        const { product } = this.state;\n        product.metafields[index] = metafield;\n\n        this.setState({\n          product\n        });\n      } else {\n        this.props.onMetaChange(metafield);\n      }\n    }\n  }\n\n  handleFieldBlur = (event, value, field) => {\n    if (this.props.onProductFieldSave) {\n      this.props.onProductFieldSave(this.product._id, field, value);\n    }\n  }\n\n  handleMetaSave = (event, metafield, index) => {\n    if (this.props.onMetaSave) {\n      this.props.onMetaSave(this.product._id, metafield, index);\n    }\n  }\n\n  handleMetaRemove = (event, metafield, index) => {\n    if (this.props.onMetaRemove) {\n      this.props.onMetaRemove(this.product._id, metafield, index);\n    }\n  }\n\n  get product() {\n    return this.state.product || this.props.product || {};\n  }\n\n  get permalink() {\n    if (this.props.product) {\n      return Router.pathFor(\"product\", {\n        hash: {\n          handle: this.props.product.handle\n        }\n      });\n    }\n\n    return \"\";\n  }\n\n  renderProductVisibilityLabel() {\n    if (this.product.isVisible) {\n      return (\n        <Components.Translation defaultValue=\"Product is visible\" i18nKey=\"productDetailEdit.productIsVisible\" />\n      );\n    }\n\n    return (\n      <Components.Translation defaultValue=\"Product is not visible\" i18nKey=\"productDetailEdit.productIsNotVisible\" />\n    );\n  }\n\n  isExpanded = (groupName) => this.state.expandedCard === groupName\n\n  render() {\n    return (\n      <Components.CardGroup>\n        <Components.Card\n          expanded={this.isExpanded(\"productDetails\")}\n          name={\"productDetails\"}\n          onExpand={this.handleCardExpand}\n        >\n          <Components.CardHeader\n            actAsExpander={true}\n            i18nKeyTitle=\"productDetailEdit.productSettings\"\n            title=\"Product Settings\"\n            onChange={this.handleFieldChange}\n          />\n          <Components.CardBody expandable={true}>\n            <Components.Select\n              clearable={false}\n              i18nKeyLabel=\"productDetailEdit.template\"\n              i18nKeyPlaceholder=\"productDetailEdit.templateSelectPlaceholder\"\n              label=\"Template\"\n              name=\"template\"\n              onChange={this.handleSelectChange}\n              options={this.props.templates}\n              placeholder=\"Select a template\"\n              value={this.product.template}\n            />\n            <Components.TextField\n              i18nKeyLabel=\"productDetailEdit.title\"\n              i18nKeyPlaceholder=\"productDetailEdit.title\"\n              label=\"Title\"\n              name=\"title\"\n              onBlur={this.handleFieldBlur}\n              onChange={this.handleFieldChange}\n              onReturnKeyDown={this.handleFieldBlur}\n              placeholder=\"Title\"\n              ref=\"titleInput\"\n              value={this.product.title}\n            />\n            <Components.TextField\n              helpText={this.permalink}\n              i18nKeyLabel=\"productDetailEdit.permalink\"\n              i18nKeyPlaceholder=\"productDetailEdit.permalink\"\n              label=\"Permalink\"\n              name=\"handle\"\n              onBlur={this.handleFieldBlur}\n              onChange={this.handleFieldChange}\n              onReturnKeyDown={this.handleFieldBlur}\n              placeholder=\"Permalink\"\n              ref=\"handleInput\"\n              value={this.product.handle}\n            />\n            <Components.TextField\n              i18nKeyLabel=\"productDetailEdit.pageTitle\"\n              i18nKeyPlaceholder=\"productDetailEdit.pageTitle\"\n              label=\"Subtitle\"\n              name=\"pageTitle\"\n              onBlur={this.handleFieldBlur}\n              onChange={this.handleFieldChange}\n              onReturnKeyDown={this.handleFieldBlur}\n              placeholder=\"Subtitle\"\n              ref=\"subtitleInput\"\n              value={this.product.pageTitle}\n            />\n            <Components.TextField\n              i18nKeyLabel=\"productDetailEdit.vendor\"\n              i18nKeyPlaceholder=\"productDetailEdit.vendor\"\n              label=\"Vendor\"\n              name=\"vendor\"\n              onBlur={this.handleFieldBlur}\n              onChange={this.handleFieldChange}\n              onReturnKeyDown={this.handleFieldBlur}\n              placeholder=\"Vendor\"\n              ref=\"vendorInput\"\n              value={this.product.vendor}\n            />\n            <Components.TextField\n              i18nKeyLabel=\"productDetailEdit.description\"\n              i18nKeyPlaceholder=\"productDetailEdit.description\"\n              label=\"Description\"\n              multiline={true}\n              name=\"description\"\n              onBlur={this.handleFieldBlur}\n              onChange={this.handleFieldChange}\n              placeholder=\"Description\"\n              ref=\"descriptionInput\"\n              value={this.product.description}\n            />\n            <Components.Select\n              clearable={false}\n              i18nKeyLabel=\"productDetailEdit.originCountry\"\n              i18nKeyPlaceholder=\"productDetailEdit.originCountry\"\n              label=\"Origin Country\"\n              name=\"originCountry\"\n              onChange={this.handleSelectChange}\n              placeholder=\"Select a Country\"\n              ref=\"countryOfOriginInput\"\n              value={this.product.originCountry}\n              options={this.props.countries}\n            />\n          </Components.CardBody>\n        </Components.Card>\n        <Components.Card\n          expanded={this.isExpanded(\"social\")}\n          name={\"social\"}\n          onExpand={this.handleCardExpand}\n        >\n          <Components.CardHeader\n            actAsExpander={true}\n            i18nKeyTitle=\"social.socialTitle\"\n            title=\"Social\"\n          />\n          <Components.CardBody expandable={true}>\n            <Components.TextField\n              i18nKeyLabel=\"productDetailEdit.facebookMsg\"\n              i18nKeyPlaceholder=\"productDetailEdit.facebookMsg\"\n              label=\"Facebook Message\"\n              multiline={true}\n              name=\"facebookMsg\"\n              onBlur={this.handleFieldBlur}\n              onChange={this.handleFieldChange}\n              ref=\"facebookMsgInput\"\n              value={this.product.facebookMsg}\n            />\n            <Components.TextField\n              i18nKeyLabel=\"productDetailEdit.twitterMsg\"\n              i18nKeyPlaceholder=\"productDetailEdit.twitterMsg\"\n              label=\"Twitter Message\"\n              multiline={true}\n              name=\"twitterMsg\"\n              onBlur={this.handleFieldBlur}\n              onChange={this.handleFieldChange}\n              ref=\"twitterMsgInput\"\n              value={this.product.twitterMsg}\n            />\n            <Components.TextField\n              i18nKeyLabel=\"productDetailEdit.pinterestMsg\"\n              i18nKeyPlaceholder=\"productDetailEdit.pinterestMsg\"\n              label=\"Pinterest Message\"\n              multiline={true}\n              name=\"pinterestMsg\"\n              onBlur={this.handleFieldBlur}\n              onChange={this.handleFieldChange}\n              ref=\"pinterestMsgInput\"\n              value={this.product.pinterestMsg}\n            />\n            <Components.TextField\n              i18nKeyLabel=\"productDetailEdit.googleplusMsg\"\n              i18nKeyPlaceholder=\"productDetailEdit.googleplusMsg\"\n              label=\"Google+ Message\"\n              multiline={true}\n              name=\"googleplusMsg\"\n              onBlur={this.handleFieldBlur}\n              onChange={this.handleFieldChange}\n              ref=\"googleplusMsgInput\"\n              value={this.product.googleplusMsg}\n            />\n          </Components.CardBody>\n        </Components.Card>\n\n        <Components.Card\n          expanded={this.isExpanded(\"hashtags\")}\n          name={\"hashtags\"}\n          onExpand={this.handleCardExpand}\n        >\n          <Components.CardHeader\n            actAsExpander={true}\n            i18nKeyTitle=\"productDetail.tags\"\n            title=\"Tags\"\n          />\n          <Components.CardBody expandable={true}>\n            <Components.TagList\n              editable={this.props.editable}\n              enableNewTagForm={true}\n              product={this.product}\n              tagProps={{\n                fullWidth: true\n              }}\n            />\n          </Components.CardBody>\n        </Components.Card>\n\n        <Components.Card\n          expanded={this.isExpanded(\"metafields\")}\n          name={\"metafields\"}\n          onExpand={this.handleCardExpand}\n        >\n          <Components.CardHeader\n            actAsExpander={true}\n            i18nKeyTitle=\"productDetailEdit.details\"\n            title=\"Details\"\n          />\n          <Components.CardBody expandable={true}>\n            <Components.Metadata\n              metafields={this.product.metafields}\n              newMetafield={this.props.newMetafield}\n              onMetaChange={this.handleMetaChange}\n              onMetaRemove={this.handleMetaRemove}\n              onMetaSave={this.handleMetaSave}\n            />\n          </Components.CardBody>\n        </Components.Card>\n      </Components.CardGroup>\n    );\n  }\n}\n\nProductAdmin.propTypes = {\n  countries: PropTypes.arrayOf(PropTypes.object),\n  editFocus: PropTypes.oneOfType([PropTypes.string, PropTypes.arrayOf(PropTypes.string)]),\n  editable: PropTypes.bool,\n  handleFieldBlur: PropTypes.func,\n  handleFieldChange: PropTypes.func,\n  handleProductFieldChange: PropTypes.func,\n  newMetafield: PropTypes.object,\n  onCardExpand: PropTypes.func,\n  onDeleteProduct: PropTypes.func,\n  onFieldChange: PropTypes.func,\n  onMetaChange: PropTypes.func,\n  onMetaRemove: PropTypes.func,\n  onMetaSave: PropTypes.func,\n  onProductFieldSave: PropTypes.func,\n  onRestoreProduct: PropTypes.func,\n  product: PropTypes.object,\n  revisonDocumentIds: PropTypes.arrayOf(PropTypes.string),\n  templates: PropTypes.arrayOf(PropTypes.shape({\n    label: PropTypes.string,\n    value: PropTypes.any\n  })),\n  viewProps: PropTypes.object\n};\n\nexport default ProductAdmin;\n"]},"sourceType":"script","hash":"248a2cd3c47f62ed37ef1f081b84183beb12363a"}
