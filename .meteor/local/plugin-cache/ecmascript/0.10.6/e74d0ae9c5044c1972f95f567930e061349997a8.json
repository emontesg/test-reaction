{"metadata":{},"options":{"plugins":[{"key":"base$0$0","visitor":{"Program":{"enter":[null]},"_exploded":true,"_verified":true},"options":{"generateLetDeclarations":true,"enforceStrictMode":false}},{"key":"transform-meteor-dynamic-import","visitor":{"_exploded":{},"_verified":{},"CallExpression":{"enter":[null]}},"options":{}},{"key":"base$0$2","visitor":{"CallExpression":{"enter":[null]},"BinaryExpression":{"enter":[null]},"MemberExpression":{"enter":[null],"exit":[null]},"_exploded":true,"_verified":true,"Identifier":{"enter":[null]},"JSXIdentifier":{"enter":[null]}},"options":{"polyfill":false,"useBuiltIns":false}},{"key":"base$0$3","visitor":{"_exploded":{},"_verified":{},"ClassDeclaration":{"enter":[null]},"ClassExpression":{"enter":[null]}},"options":{"loose":true}},{"key":"base$0$4","visitor":{"FunctionExpression":{"exit":[null]},"_exploded":true,"_verified":true},"options":{}},{"key":"base$0$5","visitor":{"ForInStatement":{"enter":[null]},"_exploded":true,"_verified":true},"options":{}},{"key":"base$0$6","visitor":{"Program":{"exit":[null]},"_exploded":true,"_verified":true},"options":{"allowTopLevelThis":true,"strictMode":false,"loose":true}},{"key":"base$0$1$0","visitor":{"_exploded":{},"_verified":{},"JSXNamespacedName":{"enter":[null]},"JSXElement":{"exit":[null]},"JSXFragment":{"exit":[null]},"Program":{"enter":[null],"exit":[null]},"JSXAttribute":{"enter":[null]}},"options":{"pragma":"React.createElement","pragmaFrag":"React.Fragment","throwIfNamespace":true,"useBuiltIns":false}},{"key":"base$0$1$1","visitor":{"_exploded":true,"_verified":true},"options":{}},{"key":"base$0$1$2","visitor":{"ExportDefaultDeclaration":{"enter":[null]},"CallExpression":{"enter":[null]},"_exploded":true,"_verified":true},"options":{}},{"key":"base$0$0$0","visitor":{"_exploded":true,"_verified":true},"options":{}},{"key":"base$0$0$1","visitor":{"_exploded":true,"_verified":true},"options":{}},{"key":"base$0$0$2","visitor":{"ArrowFunctionExpression":{"enter":[null]},"_exploded":true,"_verified":true},"options":{}},{"key":"base$0$0$3","visitor":{"BlockStatement":{"enter":[null]},"SwitchCase":{"enter":[null]},"_exploded":true,"_verified":true},"options":{}},{"key":"base$0$0$4","visitor":{"VariableDeclaration":{"enter":[null]},"CatchClause":{"enter":[null]},"_exploded":true,"BlockStatement":{"enter":[null]},"SwitchStatement":{"enter":[null]},"Program":{"enter":[null]},"_verified":true,"DoWhileStatement":{"enter":[null]},"ForInStatement":{"enter":[null]},"ForStatement":{"enter":[null]},"WhileStatement":{"enter":[null]},"ForOfStatement":{"enter":[null]}},"options":{}},{"key":"base$0$0$5","visitor":{"ExportDefaultDeclaration":{"enter":[null]},"ClassDeclaration":{"enter":[null]},"ClassExpression":{"enter":[null]},"_exploded":true,"_verified":true},"options":{"loose":true}},{"key":"base$0$0$6","visitor":{"ObjectExpression":{"exit":[null]},"_exploded":true,"_verified":true},"options":{"loose":true}},{"key":"base$0$0$7","visitor":{"ExportNamedDeclaration":{"enter":[null]},"CatchClause":{"enter":[null]},"AssignmentExpression":{"enter":[null]},"VariableDeclaration":{"enter":[null]},"_exploded":true,"_verified":true,"ForInStatement":{"enter":[null]},"ForOfStatement":{"enter":[null]}},"options":{}},{"key":"base$0$0$8","visitor":{"ForOfStatement":{"enter":[null]},"_exploded":true,"_verified":true},"options":{"loose":true}},{"key":"base$0$0$9","visitor":{"NumericLiteral":{"enter":[null]},"StringLiteral":{"enter":[null]},"_exploded":true,"_verified":true},"options":{}},{"key":"base$0$0$10","visitor":{"ObjectExpression":{"enter":[null]},"_exploded":true,"_verified":true},"options":{}},{"key":"base$0$0$11","visitor":{"_exploded":true,"_verified":true,"FunctionDeclaration":{"enter":[null]},"FunctionExpression":{"enter":[null]},"ObjectMethod":{"enter":[null]},"ArrowFunctionExpression":{"enter":[null]},"ClassMethod":{"enter":[null]}},"options":{}},{"key":"base$0$0$12","visitor":{"ObjectMethod":{"enter":[null]},"ObjectProperty":{"enter":[null]},"_exploded":true,"_verified":true},"options":{}},{"key":"base$0$0$13","visitor":{"ArrayExpression":{"enter":[null]},"CallExpression":{"enter":[null]},"NewExpression":{"enter":[null]},"_exploded":true,"_verified":true},"options":{}},{"key":"base$0$0$14","visitor":{"RegExpLiteral":{"enter":[null]},"_exploded":true,"_verified":true},"options":{}},{"key":"base$0$0$15","visitor":{"TaggedTemplateExpression":{"enter":[null]},"TemplateLiteral":{"enter":[null]},"_exploded":true,"_verified":true},"options":{"loose":true}},{"key":"base$0$0$16","visitor":{"UnaryExpression":{"enter":[null]},"_exploded":true,"_verified":true,"BlockStatement":{"enter":[null]},"CatchClause":{"enter":[null]},"DoWhileStatement":{"enter":[null]},"ForInStatement":{"enter":[null]},"ForStatement":{"enter":[null]},"FunctionDeclaration":{"enter":[null]},"FunctionExpression":{"enter":[null]},"Program":{"enter":[null]},"ObjectMethod":{"enter":[null]},"SwitchStatement":{"enter":[null]},"WhileStatement":{"enter":[null]},"ArrowFunctionExpression":{"enter":[null]},"ClassDeclaration":{"enter":[null]},"ClassExpression":{"enter":[null]},"ForOfStatement":{"enter":[null]},"ClassMethod":{"enter":[null]}},"options":{}},{"key":"base$0$0$17","visitor":{"RegExpLiteral":{"enter":[null]},"_exploded":true,"_verified":true},"options":{}},{"key":"base$0$0$18","visitor":{"_exploded":true,"_verified":true},"options":{}},{"key":"base$0$0$19","visitor":{"_exploded":{},"_verified":{},"VariableDeclarator":{"enter":[null]},"ExportNamedDeclaration":{"enter":[null]},"CatchClause":{"enter":[null]},"AssignmentExpression":{"enter":[null]},"ObjectExpression":{"enter":[null]},"FunctionDeclaration":{"enter":[null]},"FunctionExpression":{"enter":[null]},"ObjectMethod":{"enter":[null]},"ArrowFunctionExpression":{"enter":[null]},"ClassMethod":{"enter":[null]},"ForInStatement":{"enter":[null]},"ForOfStatement":{"enter":[null]}},"options":{}},{"key":"base$0$0$20","visitor":{"ObjectProperty":{"exit":[null]},"_exploded":true,"_verified":true},"options":{}},{"key":"base$0$0$21","visitor":{"_exploded":{},"_verified":{},"Program":{"enter":[null]},"ImportDeclaration":{"enter":[null,null]},"ClassProperty":{"enter":[null]},"AssignmentPattern":{"enter":[null]},"TypeCastExpression":{"enter":[null,null]},"ImportSpecifier":{"enter":[null]},"ClassDeclaration":{"enter":[null]},"ClassExpression":{"enter":[null]},"FunctionDeclaration":{"enter":[null]},"FunctionExpression":{"enter":[null]},"ObjectMethod":{"enter":[null]},"ArrowFunctionExpression":{"enter":[null]},"ClassMethod":{"enter":[null]},"AnyTypeAnnotation":{"enter":[null]},"ArrayTypeAnnotation":{"enter":[null]},"BooleanTypeAnnotation":{"enter":[null]},"BooleanLiteralTypeAnnotation":{"enter":[null]},"NullLiteralTypeAnnotation":{"enter":[null]},"ClassImplements":{"enter":[null]},"DeclareClass":{"enter":[null]},"DeclareFunction":{"enter":[null]},"DeclareInterface":{"enter":[null]},"DeclareModule":{"enter":[null]},"DeclareModuleExports":{"enter":[null]},"DeclareTypeAlias":{"enter":[null]},"DeclareOpaqueType":{"enter":[null]},"DeclareVariable":{"enter":[null]},"DeclareExportDeclaration":{"enter":[null]},"DeclareExportAllDeclaration":{"enter":[null]},"DeclaredPredicate":{"enter":[null]},"ExistsTypeAnnotation":{"enter":[null]},"FunctionTypeAnnotation":{"enter":[null]},"FunctionTypeParam":{"enter":[null]},"GenericTypeAnnotation":{"enter":[null]},"InferredPredicate":{"enter":[null]},"InterfaceExtends":{"enter":[null]},"InterfaceDeclaration":{"enter":[null]},"IntersectionTypeAnnotation":{"enter":[null]},"MixedTypeAnnotation":{"enter":[null]},"EmptyTypeAnnotation":{"enter":[null]},"NullableTypeAnnotation":{"enter":[null]},"NumberLiteralTypeAnnotation":{"enter":[null]},"NumberTypeAnnotation":{"enter":[null]},"ObjectTypeAnnotation":{"enter":[null]},"ObjectTypeCallProperty":{"enter":[null]},"ObjectTypeIndexer":{"enter":[null]},"ObjectTypeProperty":{"enter":[null]},"ObjectTypeSpreadProperty":{"enter":[null]},"OpaqueType":{"enter":[null]},"QualifiedTypeIdentifier":{"enter":[null]},"StringLiteralTypeAnnotation":{"enter":[null]},"StringTypeAnnotation":{"enter":[null]},"ThisTypeAnnotation":{"enter":[null]},"TupleTypeAnnotation":{"enter":[null]},"TypeofTypeAnnotation":{"enter":[null]},"TypeAlias":{"enter":[null]},"TypeAnnotation":{"enter":[null]},"TypeParameter":{"enter":[null]},"TypeParameterDeclaration":{"enter":[null]},"TypeParameterInstantiation":{"enter":[null]},"UnionTypeAnnotation":{"enter":[null]},"Variance":{"enter":[null]},"VoidTypeAnnotation":{"enter":[null]},"ExportAllDeclaration":{"enter":[null]},"ExportDefaultDeclaration":{"enter":[null]},"ExportNamedDeclaration":{"enter":[null]}},"options":{}},{"key":"base$0$0$22","visitor":{"AssignmentExpression":{"enter":[null]},"BinaryExpression":{"enter":[null]},"_exploded":true,"_verified":true},"options":{}},{"key":"base$0$0$23","visitor":{"_exploded":{},"_verified":{},"Program":{"enter":[null]}},"options":{}},{"key":"regenerator-transform","visitor":{"_exploded":true,"_verified":true,"FunctionDeclaration":{"exit":[null]},"FunctionExpression":{"exit":[null]},"ObjectMethod":{"exit":[null]},"ArrowFunctionExpression":{"exit":[null]},"ClassMethod":{"exit":[null]}},"options":{}}],"presets":[],"compact":false,"ast":true,"babelrc":false,"sourceFileName":"imports/plugins/core/i18n/client/components/localizationSettings.js","filename":"imports/plugins/core/i18n/client/components/localizationSettings.js","sourceMaps":true,"envName":"development","cwd":"/Users/estebandev/test-knowledge","passPerPreset":false,"parserOpts":{"sourceType":"module","sourceFileName":"imports/plugins/core/i18n/client/components/localizationSettings.js","plugins":["dynamicImport","classProperties","jsx","jsx","flow","asyncGenerators","objectRestSpread","objectRestSpread","flow","asyncGenerators"]},"generatorOpts":{"filename":"imports/plugins/core/i18n/client/components/localizationSettings.js","comments":true,"compact":false,"sourceMaps":true,"sourceFileName":"imports/plugins/core/i18n/client/components/localizationSettings.js"}},"code":"var _inheritsLoose2 = _interopRequireDefault(require(\"@babel/runtime/helpers/inheritsLoose\"));\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { \"default\": obj }; }\n\nvar React, Component;\nmodule.watch(require(\"react\"), {\n  \"default\": function (v) {\n    React = v;\n  },\n  Component: function (v) {\n    Component = v;\n  }\n}, 0);\nvar PropTypes;\nmodule.watch(require(\"prop-types\"), {\n  \"default\": function (v) {\n    PropTypes = v;\n  }\n}, 1);\nvar Components;\nmodule.watch(require(\"../../../components/lib\"), {\n  Components: function (v) {\n    Components = v;\n  }\n}, 2);\nvar ShopSchema;\nmodule.watch(require(\"../../../../../../lib/collections/schemas/shops\"), {\n  Shop: function (v) {\n    ShopSchema = v;\n  }\n}, 3);\nvar PACKAGE_NAME = \"reaction-i18n\";\n\nvar LocalizationSettings =\n/*#__PURE__*/\nfunction (_Component) {\n  (0, _inheritsLoose2.default)(LocalizationSettings, _Component);\n\n  function LocalizationSettings(props) {\n    var _this;\n\n    _this = _Component.call(this, props) || this;\n\n    _this.handleUpdateCurrencyConfiguration = function (event, isChecked, name) {\n      var currencyIndex = _this.state.currencies.findIndex(function (currency) {\n        return currency.name === name;\n      });\n\n      _this.setState(function (state) {\n        var newStateCurrencies = state.currencies;\n        newStateCurrencies[currencyIndex].enabled = isChecked;\n        return {\n          currencies: newStateCurrencies\n        };\n      }, function () {\n        // Delaying to allow animation before sending data to server\n        // If animation is not delayed, it twitches when actual update happens\n        setTimeout(function () {\n          _this.props.onUpdateCurrencyConfiguration(event, isChecked, name);\n        }, 200);\n      });\n    };\n\n    _this.handleUpdateLangaugeConfiguration = function (event, isChecked, name) {\n      var languageIndex = _this.state.languages.findIndex(function (language) {\n        return language.value === name;\n      });\n\n      _this.setState(function (state) {\n        var newStateLanguages = state.languages;\n        newStateLanguages[languageIndex].enabled = isChecked;\n        return {\n          languages: newStateLanguages\n        };\n      }, function () {\n        // Delaying to allow animation before sending data to server\n        // If animation is not delayed, it twitches when actual update happens\n        setTimeout(function () {\n          _this.props.onUpdateLanguageConfiguration(event, isChecked, name);\n        }, 200);\n      });\n    };\n\n    _this.handleSubmit = function (event, formData) {\n      if (typeof _this.props.onUpdateLocalization === \"function\") {\n        _this.props.onUpdateLocalization(formData.doc);\n      }\n    };\n\n    _this.handleAllOn = function (event, name) {\n      if (name === \"language\") {\n        if (typeof _this.props.onEnableAllLanguages === \"function\") {\n          _this.props.onEnableAllLanguages(true);\n        }\n      } else if (name === \"currency\") {\n        if (typeof _this.props.onEnableAllCurrencies === \"function\") {\n          _this.props.onEnableAllCurrencies(true);\n        }\n      }\n    };\n\n    _this.handleAllOff = function (event, name) {\n      if (name === \"language\") {\n        if (typeof _this.props.onEnableAllLanguages === \"function\") {\n          _this.props.onEnableAllLanguages(false);\n        }\n      } else if (name === \"currency\") {\n        if (typeof _this.props.onEnableAllCurrencies === \"function\") {\n          _this.props.onEnableAllCurrencies(false);\n        }\n      }\n    };\n\n    _this.handleReloadTranslations = function (event) {\n      if (typeof _this.props.onReloadTranslations === \"function\") {\n        _this.props.onReloadTranslations(event.altKey);\n      }\n    };\n\n    _this.state = {\n      currencies: props.currencies,\n      languages: props.languages\n    };\n    return _this;\n  }\n\n  var _proto = LocalizationSettings.prototype;\n\n  _proto.componentWillReceiveProps = function () {\n    function componentWillReceiveProps(nextProps) {\n      this.setState({\n        currencies: nextProps.currencies,\n        languages: nextProps.languages\n      });\n    }\n\n    return componentWillReceiveProps;\n  }();\n\n  _proto.renderCurrencies = function () {\n    function renderCurrencies() {\n      var _this2 = this;\n\n      return this.props.currencies.map(function (currency, key) {\n        return React.createElement(Components.ListItem, {\n          actionType: \"switch\",\n          key: key,\n          label: currency.label,\n          switchOn: currency.enabled,\n          switchName: currency.name,\n          onSwitchChange: _this2.handleUpdateCurrencyConfiguration\n        });\n      });\n    }\n\n    return renderCurrencies;\n  }();\n\n  _proto.renderLanguages = function () {\n    function renderLanguages() {\n      var _this3 = this;\n\n      return this.state.languages.map(function (language, key) {\n        return React.createElement(Components.ListItem, {\n          actionType: \"switch\",\n          key: key,\n          label: language.label,\n          switchOn: language.enabled,\n          switchName: language.value,\n          onSwitchChange: _this3.handleUpdateLangaugeConfiguration\n        });\n      });\n    }\n\n    return renderLanguages;\n  }();\n\n  _proto.renderListControls = function () {\n    function renderListControls(name) {\n      return React.createElement(Components.CardToolbar, null, React.createElement(Components.FlatButton, {\n        i18nKeyLabel: \"admin.i18nSettings.allOn\",\n        label: \"All On\",\n        value: name,\n        onClick: this.handleAllOn\n      }), \"|\", React.createElement(Components.FlatButton, {\n        i18nKeyLabel: \"admin.i18nSettings.allOff\",\n        label: \"All Off\",\n        value: name,\n        onClick: this.handleAllOff\n      }), name === \"language\" && \"|\", name === \"language\" && React.createElement(Components.FlatButton, {\n        i18nKeyTooltip: \"admin.i18nSettings.reloadTranslations\",\n        tooltip: \"Reload translations asdasdasdasdasd\",\n        tooltipAttachment: \"middle left\",\n        icon: \"fa fa-refresh\",\n        onClick: this.handleReloadTranslations\n      }));\n    }\n\n    return renderListControls;\n  }();\n\n  _proto.render = function () {\n    function render() {\n      return React.createElement(Components.CardGroup, null, React.createElement(Components.SettingsCard, {\n        i18nKeyTitle: \"admin.i18nSettings.shopLocalization\",\n        name: \"localization\",\n        packageName: PACKAGE_NAME,\n        saveOpenStateToPreferences: true,\n        showSwitch: false,\n        title: \"Shop Localization\"\n      }, React.createElement(Components.Form, {\n        autoSave: true,\n        schema: ShopSchema,\n        doc: this.props.shop,\n        fields: {\n          timezone: {\n            type: \"select\",\n            options: this.props.timezoneOptions\n          },\n          currency: {\n            type: \"select\",\n            options: this.props.currencyOptions\n          },\n          baseUOM: {\n            type: \"select\",\n            options: this.props.uomOptions\n          },\n          baseUOL: {\n            type: \"select\",\n            options: this.props.uolOptions\n          },\n          language: {\n            type: \"select\",\n            options: this.props.enabledLanguages\n          }\n        },\n        name: \"localization\",\n        onSubmit: this.handleSubmit\n      })), React.createElement(Components.SettingsCard, {\n        i18nKeyTitle: \"admin.i18nSettings.enabledLanguages\",\n        name: \"languages\",\n        padded: false,\n        packageName: PACKAGE_NAME,\n        saveOpenStateToPreferences: true,\n        showSwitch: false,\n        title: \"Languages\"\n      }, this.renderListControls(\"language\"), React.createElement(Components.List, null, this.renderLanguages())), React.createElement(Components.SettingsCard, {\n        i18nKeyTitle: \"admin.i18nSettings.enabledCurrencies\",\n        padded: false,\n        packageName: PACKAGE_NAME,\n        name: \"currencies\",\n        saveOpenStateToPreferences: true,\n        showSwitch: false,\n        title: \"Currencies\"\n      }, this.renderListControls(\"currency\"), React.createElement(Components.List, null, this.renderCurrencies())));\n    }\n\n    return render;\n  }();\n\n  return LocalizationSettings;\n}(Component);\n\nLocalizationSettings.propTypes = {\n  currencies: PropTypes.array,\n  currencyOptions: PropTypes.array,\n  enabledLanguages: PropTypes.array,\n  languages: PropTypes.array,\n  onEnableAllCurrencies: PropTypes.func,\n  onEnableAllLanguages: PropTypes.func,\n  onReloadTranslations: PropTypes.func,\n  onUpdateCurrencyConfiguration: PropTypes.func,\n  onUpdateLanguageConfiguration: PropTypes.func,\n  onUpdateLocalization: PropTypes.func,\n  shop: PropTypes.object,\n  // Shop data\n  timezoneOptions: PropTypes.array,\n  uolOptions: PropTypes.array,\n  uomOptions: PropTypes.array\n};\nmodule.exportDefault(LocalizationSettings);","map":{"version":3,"sources":["imports/plugins/core/i18n/client/components/localizationSettings.js"],"names":["React","Component","module","watch","require","v","PropTypes","Components","ShopSchema","Shop","PACKAGE_NAME","LocalizationSettings","props","handleUpdateCurrencyConfiguration","event","isChecked","name","currencyIndex","state","currencies","findIndex","currency","setState","newStateCurrencies","enabled","setTimeout","onUpdateCurrencyConfiguration","handleUpdateLangaugeConfiguration","languageIndex","languages","language","value","newStateLanguages","onUpdateLanguageConfiguration","handleSubmit","formData","onUpdateLocalization","doc","handleAllOn","onEnableAllLanguages","onEnableAllCurrencies","handleAllOff","handleReloadTranslations","onReloadTranslations","altKey","componentWillReceiveProps","nextProps","renderCurrencies","map","key","label","renderLanguages","renderListControls","render","shop","timezone","type","options","timezoneOptions","currencyOptions","baseUOM","uomOptions","baseUOL","uolOptions","enabledLanguages","propTypes","array","func","object","exportDefault"],"mappings":"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","sourcesContent":["import React, { Component } from \"react\";\nimport PropTypes from \"prop-types\";\nimport { Components } from \"@reactioncommerce/reaction-components\";\nimport { Shop as ShopSchema } from \"/lib/collections/schemas/shops\";\n\nconst PACKAGE_NAME = \"reaction-i18n\";\n\nclass LocalizationSettings extends Component {\n  static propTypes = {\n    currencies: PropTypes.array,\n    currencyOptions: PropTypes.array,\n    enabledLanguages: PropTypes.array,\n    languages: PropTypes.array,\n    onEnableAllCurrencies: PropTypes.func,\n    onEnableAllLanguages: PropTypes.func,\n    onReloadTranslations: PropTypes.func,\n    onUpdateCurrencyConfiguration: PropTypes.func,\n    onUpdateLanguageConfiguration: PropTypes.func,\n    onUpdateLocalization: PropTypes.func,\n    shop: PropTypes.object, // Shop data\n    timezoneOptions: PropTypes.array,\n    uolOptions: PropTypes.array,\n    uomOptions: PropTypes.array\n  }\n\n  constructor(props) {\n    super(props);\n\n    this.state = {\n      currencies: props.currencies,\n      languages: props.languages\n    };\n  }\n\n  componentWillReceiveProps(nextProps) {\n    this.setState({\n      currencies: nextProps.currencies,\n      languages: nextProps.languages\n    });\n  }\n\n  handleUpdateCurrencyConfiguration = (event, isChecked, name) => {\n    const currencyIndex = this.state.currencies.findIndex((currency) => currency.name === name);\n\n    this.setState((state) => {\n      const newStateCurrencies = state.currencies;\n      newStateCurrencies[currencyIndex].enabled = isChecked;\n      return { currencies: newStateCurrencies };\n    }, () => {\n      // Delaying to allow animation before sending data to server\n      // If animation is not delayed, it twitches when actual update happens\n      setTimeout(() => {\n        this.props.onUpdateCurrencyConfiguration(event, isChecked, name);\n      }, 200);\n    });\n  }\n\n  handleUpdateLangaugeConfiguration = (event, isChecked, name) => {\n    const languageIndex = this.state.languages.findIndex((language) => language.value === name);\n\n    this.setState((state) => {\n      const newStateLanguages = state.languages;\n      newStateLanguages[languageIndex].enabled = isChecked;\n      return { languages: newStateLanguages };\n    }, () => {\n      // Delaying to allow animation before sending data to server\n      // If animation is not delayed, it twitches when actual update happens\n      setTimeout(() => {\n        this.props.onUpdateLanguageConfiguration(event, isChecked, name);\n      }, 200);\n    });\n  }\n\n  renderCurrencies() {\n    return this.props.currencies.map((currency, key) => (\n      <Components.ListItem\n        actionType={\"switch\"}\n        key={key}\n        label={currency.label}\n        switchOn={currency.enabled}\n        switchName={currency.name}\n        onSwitchChange={this.handleUpdateCurrencyConfiguration}\n      />\n    ));\n  }\n\n  renderLanguages() {\n    return this.state.languages.map((language, key) => (\n      <Components.ListItem\n        actionType={\"switch\"}\n        key={key}\n        label={language.label}\n        switchOn={language.enabled}\n        switchName={language.value}\n        onSwitchChange={this.handleUpdateLangaugeConfiguration}\n      />\n    ));\n  }\n\n  handleSubmit = (event, formData) => {\n    if (typeof this.props.onUpdateLocalization === \"function\") {\n      this.props.onUpdateLocalization(formData.doc);\n    }\n  }\n\n  handleAllOn = (event, name) => {\n    if (name === \"language\") {\n      if (typeof this.props.onEnableAllLanguages === \"function\") {\n        this.props.onEnableAllLanguages(true);\n      }\n    } else if (name === \"currency\") {\n      if (typeof this.props.onEnableAllCurrencies === \"function\") {\n        this.props.onEnableAllCurrencies(true);\n      }\n    }\n  }\n\n  handleAllOff = (event, name) => {\n    if (name === \"language\") {\n      if (typeof this.props.onEnableAllLanguages === \"function\") {\n        this.props.onEnableAllLanguages(false);\n      }\n    } else if (name === \"currency\") {\n      if (typeof this.props.onEnableAllCurrencies === \"function\") {\n        this.props.onEnableAllCurrencies(false);\n      }\n    }\n  }\n\n  handleReloadTranslations = (event) => {\n    if (typeof this.props.onReloadTranslations === \"function\") {\n      this.props.onReloadTranslations(event.altKey);\n    }\n  }\n\n  renderListControls(name) {\n    return (\n      <Components.CardToolbar>\n        <Components.FlatButton\n          i18nKeyLabel={\"admin.i18nSettings.allOn\"}\n          label=\"All On\"\n          value={name}\n          onClick={this.handleAllOn}\n        />\n        { \"|\" }\n        <Components.FlatButton\n          i18nKeyLabel={\"admin.i18nSettings.allOff\"}\n          label=\"All Off\"\n          value={name}\n          onClick={this.handleAllOff}\n        />\n        {name === \"language\" && \"|\"}\n        {name === \"language\" &&\n          <Components.FlatButton\n            i18nKeyTooltip={\"admin.i18nSettings.reloadTranslations\"}\n            tooltip={\"Reload translations asdasdasdasdasd\"}\n            tooltipAttachment=\"middle left\"\n            icon=\"fa fa-refresh\"\n            onClick={this.handleReloadTranslations}\n          />\n        }\n      </Components.CardToolbar>\n    );\n  }\n\n  render() {\n    return (\n      <Components.CardGroup>\n        <Components.SettingsCard\n          i18nKeyTitle=\"admin.i18nSettings.shopLocalization\"\n          name=\"localization\"\n          packageName={PACKAGE_NAME}\n          saveOpenStateToPreferences={true}\n          showSwitch={false}\n          title=\"Shop Localization\"\n        >\n          <Components.Form\n            autoSave={true}\n            schema={ShopSchema}\n            doc={this.props.shop}\n            fields={{\n              timezone: {\n                type: \"select\",\n                options: this.props.timezoneOptions\n              },\n              currency: {\n                type: \"select\",\n                options: this.props.currencyOptions\n              },\n              baseUOM: {\n                type: \"select\",\n                options: this.props.uomOptions\n              },\n              baseUOL: {\n                type: \"select\",\n                options: this.props.uolOptions\n              },\n              language: {\n                type: \"select\",\n                options: this.props.enabledLanguages\n              }\n            }}\n            name=\"localization\"\n            onSubmit={this.handleSubmit}\n          />\n        </Components.SettingsCard>\n        <Components.SettingsCard\n          i18nKeyTitle=\"admin.i18nSettings.enabledLanguages\"\n          name=\"languages\"\n          padded={false}\n          packageName={PACKAGE_NAME}\n          saveOpenStateToPreferences={true}\n          showSwitch={false}\n          title=\"Languages\"\n        >\n          {this.renderListControls(\"language\")}\n          <Components.List>\n            {this.renderLanguages()}\n          </Components.List>\n        </Components.SettingsCard>\n        <Components.SettingsCard\n          i18nKeyTitle=\"admin.i18nSettings.enabledCurrencies\"\n          padded={false}\n          packageName={PACKAGE_NAME}\n          name=\"currencies\"\n          saveOpenStateToPreferences={true}\n          showSwitch={false}\n          title=\"Currencies\"\n        >\n          {this.renderListControls(\"currency\")}\n          <Components.List>\n            {this.renderCurrencies()}\n          </Components.List>\n        </Components.SettingsCard>\n      </Components.CardGroup>\n    );\n  }\n}\n\nexport default LocalizationSettings;\n"]},"sourceType":"script","hash":"e74d0ae9c5044c1972f95f567930e061349997a8"}
