{"metadata":{},"options":{"plugins":[{"key":"base$0$0","visitor":{"Program":{"enter":[null]},"_exploded":true,"_verified":true},"options":{"generateLetDeclarations":true,"enforceStrictMode":false}},{"key":"transform-meteor-dynamic-import","visitor":{"_exploded":{},"_verified":{},"CallExpression":{"enter":[null]}},"options":{}},{"key":"base$0$2","visitor":{"CallExpression":{"enter":[null]},"BinaryExpression":{"enter":[null]},"MemberExpression":{"enter":[null],"exit":[null]},"_exploded":true,"_verified":true,"Identifier":{"enter":[null]},"JSXIdentifier":{"enter":[null]}},"options":{"polyfill":false,"useBuiltIns":false}},{"key":"base$0$3","visitor":{"_exploded":{},"_verified":{},"ClassDeclaration":{"enter":[null]},"ClassExpression":{"enter":[null]}},"options":{"loose":true}},{"key":"base$0$4","visitor":{"FunctionExpression":{"exit":[null]},"_exploded":true,"_verified":true},"options":{}},{"key":"base$0$5","visitor":{"ForInStatement":{"enter":[null]},"_exploded":true,"_verified":true},"options":{}},{"key":"base$0$6","visitor":{"Program":{"exit":[null]},"_exploded":true,"_verified":true},"options":{"allowTopLevelThis":true,"strictMode":false,"loose":true}},{"key":"base$0$1$0","visitor":{"_exploded":{},"_verified":{},"JSXNamespacedName":{"enter":[null]},"JSXElement":{"exit":[null]},"JSXFragment":{"exit":[null]},"Program":{"enter":[null],"exit":[null]},"JSXAttribute":{"enter":[null]}},"options":{"pragma":"React.createElement","pragmaFrag":"React.Fragment","throwIfNamespace":true,"useBuiltIns":false}},{"key":"base$0$1$1","visitor":{"_exploded":true,"_verified":true},"options":{}},{"key":"base$0$1$2","visitor":{"ExportDefaultDeclaration":{"enter":[null]},"CallExpression":{"enter":[null]},"_exploded":true,"_verified":true},"options":{}},{"key":"base$0$0$0","visitor":{"_exploded":true,"_verified":true},"options":{}},{"key":"base$0$0$1","visitor":{"_exploded":true,"_verified":true},"options":{}},{"key":"base$0$0$2","visitor":{"ArrowFunctionExpression":{"enter":[null]},"_exploded":true,"_verified":true},"options":{}},{"key":"base$0$0$3","visitor":{"BlockStatement":{"enter":[null]},"SwitchCase":{"enter":[null]},"_exploded":true,"_verified":true},"options":{}},{"key":"base$0$0$4","visitor":{"VariableDeclaration":{"enter":[null]},"CatchClause":{"enter":[null]},"_exploded":true,"BlockStatement":{"enter":[null]},"SwitchStatement":{"enter":[null]},"Program":{"enter":[null]},"_verified":true,"DoWhileStatement":{"enter":[null]},"ForInStatement":{"enter":[null]},"ForStatement":{"enter":[null]},"WhileStatement":{"enter":[null]},"ForOfStatement":{"enter":[null]}},"options":{}},{"key":"base$0$0$5","visitor":{"ExportDefaultDeclaration":{"enter":[null]},"ClassDeclaration":{"enter":[null]},"ClassExpression":{"enter":[null]},"_exploded":true,"_verified":true},"options":{"loose":true}},{"key":"base$0$0$6","visitor":{"ObjectExpression":{"exit":[null]},"_exploded":true,"_verified":true},"options":{"loose":true}},{"key":"base$0$0$7","visitor":{"ExportNamedDeclaration":{"enter":[null]},"CatchClause":{"enter":[null]},"AssignmentExpression":{"enter":[null]},"VariableDeclaration":{"enter":[null]},"_exploded":true,"_verified":true,"ForInStatement":{"enter":[null]},"ForOfStatement":{"enter":[null]}},"options":{}},{"key":"base$0$0$8","visitor":{"ForOfStatement":{"enter":[null]},"_exploded":true,"_verified":true},"options":{"loose":true}},{"key":"base$0$0$9","visitor":{"NumericLiteral":{"enter":[null]},"StringLiteral":{"enter":[null]},"_exploded":true,"_verified":true},"options":{}},{"key":"base$0$0$10","visitor":{"ObjectExpression":{"enter":[null]},"_exploded":true,"_verified":true},"options":{}},{"key":"base$0$0$11","visitor":{"_exploded":true,"_verified":true,"FunctionDeclaration":{"enter":[null]},"FunctionExpression":{"enter":[null]},"ObjectMethod":{"enter":[null]},"ArrowFunctionExpression":{"enter":[null]},"ClassMethod":{"enter":[null]}},"options":{}},{"key":"base$0$0$12","visitor":{"ObjectMethod":{"enter":[null]},"ObjectProperty":{"enter":[null]},"_exploded":true,"_verified":true},"options":{}},{"key":"base$0$0$13","visitor":{"ArrayExpression":{"enter":[null]},"CallExpression":{"enter":[null]},"NewExpression":{"enter":[null]},"_exploded":true,"_verified":true},"options":{}},{"key":"base$0$0$14","visitor":{"RegExpLiteral":{"enter":[null]},"_exploded":true,"_verified":true},"options":{}},{"key":"base$0$0$15","visitor":{"TaggedTemplateExpression":{"enter":[null]},"TemplateLiteral":{"enter":[null]},"_exploded":true,"_verified":true},"options":{"loose":true}},{"key":"base$0$0$16","visitor":{"UnaryExpression":{"enter":[null]},"_exploded":true,"_verified":true,"BlockStatement":{"enter":[null]},"CatchClause":{"enter":[null]},"DoWhileStatement":{"enter":[null]},"ForInStatement":{"enter":[null]},"ForStatement":{"enter":[null]},"FunctionDeclaration":{"enter":[null]},"FunctionExpression":{"enter":[null]},"Program":{"enter":[null]},"ObjectMethod":{"enter":[null]},"SwitchStatement":{"enter":[null]},"WhileStatement":{"enter":[null]},"ArrowFunctionExpression":{"enter":[null]},"ClassDeclaration":{"enter":[null]},"ClassExpression":{"enter":[null]},"ForOfStatement":{"enter":[null]},"ClassMethod":{"enter":[null]}},"options":{}},{"key":"base$0$0$17","visitor":{"RegExpLiteral":{"enter":[null]},"_exploded":true,"_verified":true},"options":{}},{"key":"base$0$0$18","visitor":{"_exploded":true,"_verified":true},"options":{}},{"key":"base$0$0$19","visitor":{"_exploded":{},"_verified":{},"VariableDeclarator":{"enter":[null]},"ExportNamedDeclaration":{"enter":[null]},"CatchClause":{"enter":[null]},"AssignmentExpression":{"enter":[null]},"ObjectExpression":{"enter":[null]},"FunctionDeclaration":{"enter":[null]},"FunctionExpression":{"enter":[null]},"ObjectMethod":{"enter":[null]},"ArrowFunctionExpression":{"enter":[null]},"ClassMethod":{"enter":[null]},"ForInStatement":{"enter":[null]},"ForOfStatement":{"enter":[null]}},"options":{}},{"key":"base$0$0$20","visitor":{"ObjectProperty":{"exit":[null]},"_exploded":true,"_verified":true},"options":{}},{"key":"base$0$0$21","visitor":{"_exploded":{},"_verified":{},"Program":{"enter":[null]},"ImportDeclaration":{"enter":[null,null]},"ClassProperty":{"enter":[null]},"AssignmentPattern":{"enter":[null]},"TypeCastExpression":{"enter":[null,null]},"ImportSpecifier":{"enter":[null]},"ClassDeclaration":{"enter":[null]},"ClassExpression":{"enter":[null]},"FunctionDeclaration":{"enter":[null]},"FunctionExpression":{"enter":[null]},"ObjectMethod":{"enter":[null]},"ArrowFunctionExpression":{"enter":[null]},"ClassMethod":{"enter":[null]},"AnyTypeAnnotation":{"enter":[null]},"ArrayTypeAnnotation":{"enter":[null]},"BooleanTypeAnnotation":{"enter":[null]},"BooleanLiteralTypeAnnotation":{"enter":[null]},"NullLiteralTypeAnnotation":{"enter":[null]},"ClassImplements":{"enter":[null]},"DeclareClass":{"enter":[null]},"DeclareFunction":{"enter":[null]},"DeclareInterface":{"enter":[null]},"DeclareModule":{"enter":[null]},"DeclareModuleExports":{"enter":[null]},"DeclareTypeAlias":{"enter":[null]},"DeclareOpaqueType":{"enter":[null]},"DeclareVariable":{"enter":[null]},"DeclareExportDeclaration":{"enter":[null]},"DeclareExportAllDeclaration":{"enter":[null]},"DeclaredPredicate":{"enter":[null]},"ExistsTypeAnnotation":{"enter":[null]},"FunctionTypeAnnotation":{"enter":[null]},"FunctionTypeParam":{"enter":[null]},"GenericTypeAnnotation":{"enter":[null]},"InferredPredicate":{"enter":[null]},"InterfaceExtends":{"enter":[null]},"InterfaceDeclaration":{"enter":[null]},"IntersectionTypeAnnotation":{"enter":[null]},"MixedTypeAnnotation":{"enter":[null]},"EmptyTypeAnnotation":{"enter":[null]},"NullableTypeAnnotation":{"enter":[null]},"NumberLiteralTypeAnnotation":{"enter":[null]},"NumberTypeAnnotation":{"enter":[null]},"ObjectTypeAnnotation":{"enter":[null]},"ObjectTypeCallProperty":{"enter":[null]},"ObjectTypeIndexer":{"enter":[null]},"ObjectTypeProperty":{"enter":[null]},"ObjectTypeSpreadProperty":{"enter":[null]},"OpaqueType":{"enter":[null]},"QualifiedTypeIdentifier":{"enter":[null]},"StringLiteralTypeAnnotation":{"enter":[null]},"StringTypeAnnotation":{"enter":[null]},"ThisTypeAnnotation":{"enter":[null]},"TupleTypeAnnotation":{"enter":[null]},"TypeofTypeAnnotation":{"enter":[null]},"TypeAlias":{"enter":[null]},"TypeAnnotation":{"enter":[null]},"TypeParameter":{"enter":[null]},"TypeParameterDeclaration":{"enter":[null]},"TypeParameterInstantiation":{"enter":[null]},"UnionTypeAnnotation":{"enter":[null]},"Variance":{"enter":[null]},"VoidTypeAnnotation":{"enter":[null]},"ExportAllDeclaration":{"enter":[null]},"ExportDefaultDeclaration":{"enter":[null]},"ExportNamedDeclaration":{"enter":[null]}},"options":{}},{"key":"base$0$0$22","visitor":{"AssignmentExpression":{"enter":[null]},"BinaryExpression":{"enter":[null]},"_exploded":true,"_verified":true},"options":{}},{"key":"base$0$0$23","visitor":{"_exploded":{},"_verified":{},"Program":{"enter":[null]}},"options":{}},{"key":"regenerator-transform","visitor":{"_exploded":true,"_verified":true,"FunctionDeclaration":{"exit":[null]},"FunctionExpression":{"exit":[null]},"ObjectMethod":{"exit":[null]},"ArrowFunctionExpression":{"exit":[null]},"ClassMethod":{"exit":[null]}},"options":{}}],"presets":[],"compact":false,"ast":true,"babelrc":false,"sourceFileName":"imports/plugins/core/ui/client/containers/edit.js","filename":"imports/plugins/core/ui/client/containers/edit.js","sourceMaps":true,"envName":"development","cwd":"/Users/estebandev/test-knowledge","passPerPreset":false,"parserOpts":{"sourceType":"module","sourceFileName":"imports/plugins/core/ui/client/containers/edit.js","plugins":["dynamicImport","classProperties","jsx","jsx","flow","asyncGenerators","objectRestSpread","objectRestSpread","flow","asyncGenerators"]},"generatorOpts":{"filename":"imports/plugins/core/ui/client/containers/edit.js","comments":true,"compact":false,"sourceMaps":true,"sourceFileName":"imports/plugins/core/ui/client/containers/edit.js"}},"code":"var _inheritsLoose2 = _interopRequireDefault(require(\"@babel/runtime/helpers/inheritsLoose\"));\n\nvar _assertThisInitialized2 = _interopRequireDefault(require(\"@babel/runtime/helpers/assertThisInitialized\"));\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { \"default\": obj }; }\n\nvar React, Children, Component;\nmodule.watch(require(\"react\"), {\n  \"default\": function (v) {\n    React = v;\n  },\n  Children: function (v) {\n    Children = v;\n  },\n  Component: function (v) {\n    Component = v;\n  }\n}, 0);\nvar PropTypes;\nmodule.watch(require(\"prop-types\"), {\n  \"default\": function (v) {\n    PropTypes = v;\n  }\n}, 1);\nvar Components, registerComponent, composeWithTracker;\nmodule.watch(require(\"../../../components/lib\"), {\n  Components: function (v) {\n    Components = v;\n  },\n  registerComponent: function (v) {\n    registerComponent = v;\n  },\n  composeWithTracker: function (v) {\n    composeWithTracker = v;\n  }\n}, 2);\nvar Reaction;\nmodule.watch(require(\"../../../../../../client/api\"), {\n  Reaction: function (v) {\n    Reaction = v;\n  }\n}, 3);\n\nvar EditContainer =\n/*#__PURE__*/\nfunction (_Component) {\n  (0, _inheritsLoose2.default)(EditContainer, _Component);\n\n  function EditContainer() {\n    var _temp, _this;\n\n    for (var _len = arguments.length, args = new Array(_len), _key = 0; _key < _len; _key++) {\n      args[_key] = arguments[_key];\n    }\n\n    return (_temp = _this = _Component.call.apply(_Component, [this].concat(args)) || this, _this.handleEditButtonClick = function (event) {\n      var _assertThisInitialize = (0, _assertThisInitialized2.default)(_this),\n          props = _assertThisInitialize.props;\n\n      if (_this.props.onEditButtonClick) {\n        var returnValue = _this.props.onEditButtonClick(event, props);\n\n        if (returnValue === false) {\n          return returnValue;\n        }\n      }\n\n      Reaction.showActionView({\n        label: props.label,\n        i18nKeyLabel: props.i18nKeyLabel,\n        template: props.editView,\n        data: {\n          data: props.data,\n          viewProps: {\n            field: props.field\n          }\n        }\n      });\n      Reaction.state.set(\"edit/focus\", props.field);\n      return true;\n    }, _this.handleVisibilityButtonClick = function (event) {\n      var _assertThisInitialize2 = (0, _assertThisInitialized2.default)(_this),\n          props = _assertThisInitialize2.props;\n\n      if (_this.props.onVisibilityButtonClick) {\n        var returnValue = _this.props.onVisibilityButtonClick(event, props);\n\n        if (returnValue === false) {\n          return returnValue;\n        }\n      }\n\n      return true;\n    }, _temp) || (0, _assertThisInitialized2.default)(_this);\n  }\n\n  var _proto = EditContainer.prototype;\n\n  _proto.renderVisibilityButton = function () {\n    function renderVisibilityButton() {\n      if (this.props.showsVisibilityButton) {\n        return React.createElement(\"span\", {\n          className: \"edit-container-item edit-container-item\"\n        }, React.createElement(Components.VisibilityButton, {\n          onClick: this.handleVisibilityButtonClick,\n          toggleOn: this.props.data.isVisible\n        }));\n      }\n\n      return null;\n    }\n\n    return renderVisibilityButton;\n  }();\n\n  _proto.renderEditButton = function () {\n    function renderEditButton() {\n      var status;\n      var tooltip;\n      var hasChange = false;\n\n      if (this.props.data.__draft && this.props.field) {\n        var draft = this.props.data.__draft;\n\n        if (Array.isArray(draft.diff)) {\n          for (var _iterator = draft.diff, _isArray = Array.isArray(_iterator), _i = 0, _iterator = _isArray ? _iterator : _iterator[Symbol.iterator]();;) {\n            var _ref;\n\n            if (_isArray) {\n              if (_i >= _iterator.length) break;\n              _ref = _iterator[_i++];\n            } else {\n              _i = _iterator.next();\n              if (_i.done) break;\n              _ref = _i.value;\n            }\n\n            var _diff = _ref;\n            var hasChangedField = false;\n\n            if (Array.isArray(this.props.field)) {\n              if (this.props.field.indexOf(_diff.path[0]) >= 0) {\n                hasChangedField = true;\n              }\n            } else if (typeof this.props.field === \"string\" && this.props.field === _diff.path[0]) {\n              hasChangedField = true;\n            }\n\n            if (hasChangedField) {\n              status = \"warning\";\n              tooltip = React.createElement(\"span\", null, React.createElement(Components.Translation, {\n                defaultValue: \"Unpublished Changes\",\n                i18nKey: \"revisions.unpublishedChanges\"\n              }));\n              hasChange = true;\n            }\n          }\n        }\n      } else if (this.props.data.__draft) {\n        status = \"warning\";\n        tooltip = React.createElement(\"span\", null, React.createElement(Components.Translation, {\n          defaultValue: \"Unpublished Changes\",\n          i18nKey: \"revisions.unpublishedChanges\"\n        }));\n      }\n\n      if (this.props.autoHideEditButton && hasChange === false) {\n        return null;\n      }\n\n      return React.createElement(\"span\", {\n        className: \"edit-container-item edit-container-item\"\n      }, React.createElement(Components.EditButton, {\n        onClick: this.handleEditButtonClick,\n        status: status,\n        tooltip: tooltip\n      }));\n    }\n\n    return renderEditButton;\n  }();\n\n  _proto.render = function () {\n    function render() {\n      // Display edit button if the permissions allow it.\n      if (this.props.hasPermission) {\n        // If children were passed as props to this component,\n        // copy the children and inject the edit buttons\n        if (this.props.children) {\n          return React.cloneElement(this.props.children, {\n            visibilityButton: this.renderVisibilityButton(),\n            editButton: this.renderEditButton()\n          });\n        } // Otherwise, render a container for the edit buttons\n\n\n        return React.createElement(\"span\", {\n          className: \"rui edit-container\"\n        }, this.renderVisibilityButton(), this.renderEditButton());\n      } // If permissions don't allow the edit buttons to be shown and there are\n      // no child elements, then cancel rendering.\n\n\n      if (!this.props.children) {\n        return null;\n      } // If permissions don't allow the edit buttons to be shown and there are\n      // child elements, render them normally\n\n\n      return Children.only(this.props.children);\n    }\n\n    return render;\n  }();\n\n  return EditContainer;\n}(Component);\n\nEditContainer.propTypes = {\n  autoHideEditButton: PropTypes.bool,\n  children: PropTypes.node,\n  data: PropTypes.object,\n  field: PropTypes.oneOfType([PropTypes.string, PropTypes.array]),\n  hasPermission: PropTypes.bool,\n  onEditButtonClick: PropTypes.func,\n  onVisibilityButtonClick: PropTypes.func,\n  showsVisibilityButton: PropTypes.bool\n};\n\nfunction composer(props, onData) {\n  var hasPermission;\n  var viewAs = Reaction.getUserPreferences(\"reaction-dashboard\", \"viewAs\", \"administrator\");\n\n  if (props.disabled === true || viewAs === \"customer\") {\n    hasPermission = false;\n  } else {\n    hasPermission = Reaction.hasPermission(props.permissions);\n  }\n\n  onData(null, {\n    hasPermission: hasPermission\n  });\n}\n\nregisterComponent(\"EditContainer\", EditContainer, composeWithTracker(composer));\nmodule.exportDefault(composeWithTracker(composer)(EditContainer));","map":{"version":3,"sources":["imports/plugins/core/ui/client/containers/edit.js"],"names":["React","Children","Component","module","watch","require","v","PropTypes","Components","registerComponent","composeWithTracker","Reaction","EditContainer","handleEditButtonClick","event","props","onEditButtonClick","returnValue","showActionView","label","i18nKeyLabel","template","editView","data","viewProps","field","state","set","handleVisibilityButtonClick","onVisibilityButtonClick","renderVisibilityButton","showsVisibilityButton","isVisible","renderEditButton","status","tooltip","hasChange","__draft","draft","Array","isArray","diff","hasChangedField","indexOf","path","autoHideEditButton","render","hasPermission","children","cloneElement","visibilityButton","editButton","only","propTypes","bool","node","object","oneOfType","string","array","func","composer","onData","viewAs","getUserPreferences","disabled","permissions","exportDefault"],"mappings":"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","sourcesContent":["import React, { Children, Component } from \"react\";\nimport PropTypes from \"prop-types\";\nimport { Components, registerComponent, composeWithTracker } from \"@reactioncommerce/reaction-components\";\nimport { Reaction } from \"/client/api\";\n\n\nclass EditContainer extends Component {\n  handleEditButtonClick = (event) => {\n    const { props } = this;\n\n    if (this.props.onEditButtonClick) {\n      const returnValue = this.props.onEditButtonClick(event, props);\n\n      if (returnValue === false) {\n        return returnValue;\n      }\n    }\n\n    Reaction.showActionView({\n      label: props.label,\n      i18nKeyLabel: props.i18nKeyLabel,\n      template: props.editView,\n      data: {\n        data: props.data,\n        viewProps: {\n          field: props.field\n        }\n      }\n    });\n\n    Reaction.state.set(\"edit/focus\", props.field);\n\n    return true;\n  }\n\n  handleVisibilityButtonClick = (event) => {\n    const { props } = this;\n\n    if (this.props.onVisibilityButtonClick) {\n      const returnValue = this.props.onVisibilityButtonClick(event, props);\n\n      if (returnValue === false) {\n        return returnValue;\n      }\n    }\n\n    return true;\n  }\n\n  renderVisibilityButton() {\n    if (this.props.showsVisibilityButton) {\n      return (\n        <span className=\"edit-container-item edit-container-item\">\n          <Components.VisibilityButton\n            onClick={this.handleVisibilityButtonClick}\n            toggleOn={this.props.data.isVisible}\n          />\n        </span>\n      );\n    }\n\n    return null;\n  }\n\n  renderEditButton() {\n    let status;\n    let tooltip;\n    let hasChange = false;\n\n    if (this.props.data.__draft && this.props.field) {\n      const draft = this.props.data.__draft;\n\n      if (Array.isArray(draft.diff)) {\n        for (const diff of draft.diff) {\n          let hasChangedField = false;\n\n          if (Array.isArray(this.props.field)) {\n            if (this.props.field.indexOf(diff.path[0]) >= 0) {\n              hasChangedField = true;\n            }\n          } else if (typeof this.props.field === \"string\" && this.props.field === diff.path[0]) {\n            hasChangedField = true;\n          }\n\n          if (hasChangedField) {\n            status = \"warning\";\n\n            tooltip = (\n              <span>\n                <Components.Translation defaultValue=\"Unpublished Changes\" i18nKey=\"revisions.unpublishedChanges\" />\n              </span>\n            );\n\n            hasChange = true;\n          }\n        }\n      }\n    } else if (this.props.data.__draft) {\n      status = \"warning\";\n\n      tooltip = (\n        <span>\n          <Components.Translation defaultValue=\"Unpublished Changes\" i18nKey=\"revisions.unpublishedChanges\" />\n        </span>\n      );\n    }\n\n    if (this.props.autoHideEditButton && hasChange === false) {\n      return null;\n    }\n\n    return (\n      <span className=\"edit-container-item edit-container-item\">\n        <Components.EditButton\n          onClick={this.handleEditButtonClick}\n          status={status}\n          tooltip={tooltip}\n        />\n      </span>\n    );\n  }\n\n  render() {\n    // Display edit button if the permissions allow it.\n    if (this.props.hasPermission) {\n      // If children were passed as props to this component,\n      // copy the children and inject the edit buttons\n      if (this.props.children) {\n        return React.cloneElement(this.props.children, {\n          visibilityButton: this.renderVisibilityButton(),\n          editButton: this.renderEditButton()\n        });\n      }\n\n      // Otherwise, render a container for the edit buttons\n      return (\n        <span className=\"rui edit-container\">\n          {this.renderVisibilityButton()}\n          {this.renderEditButton()}\n        </span>\n      );\n    }\n\n    // If permissions don't allow the edit buttons to be shown and there are\n    // no child elements, then cancel rendering.\n    if (!this.props.children) {\n      return null;\n    }\n\n    // If permissions don't allow the edit buttons to be shown and there are\n    // child elements, render them normally\n    return (\n      Children.only(this.props.children)\n    );\n  }\n}\n\nEditContainer.propTypes = {\n  autoHideEditButton: PropTypes.bool,\n  children: PropTypes.node,\n  data: PropTypes.object,\n  field: PropTypes.oneOfType([PropTypes.string, PropTypes.array]),\n  hasPermission: PropTypes.bool,\n  onEditButtonClick: PropTypes.func,\n  onVisibilityButtonClick: PropTypes.func,\n  showsVisibilityButton: PropTypes.bool\n};\n\nfunction composer(props, onData) {\n  let hasPermission;\n  const viewAs = Reaction.getUserPreferences(\"reaction-dashboard\", \"viewAs\", \"administrator\");\n\n  if (props.disabled === true || viewAs === \"customer\") {\n    hasPermission = false;\n  } else {\n    hasPermission = Reaction.hasPermission(props.permissions);\n  }\n\n  onData(null, {\n    hasPermission\n  });\n}\n\nregisterComponent(\"EditContainer\", EditContainer, composeWithTracker(composer));\n\nexport default composeWithTracker(composer)(EditContainer);\n"]},"sourceType":"script","hash":"a33f257f1dcecdb00c2f929024761f1ff55c6d6f"}
