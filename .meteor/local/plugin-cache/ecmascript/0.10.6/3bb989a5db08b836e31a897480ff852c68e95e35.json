{"metadata":{},"options":{"plugins":[{"key":"base$0$0","visitor":{"Program":{"enter":[null]},"_exploded":true,"_verified":true},"options":{"generateLetDeclarations":true,"enforceStrictMode":false}},{"key":"transform-meteor-dynamic-import","visitor":{"_exploded":{},"_verified":{},"CallExpression":{"enter":[null]}},"options":{}},{"key":"base$0$2","visitor":{"CallExpression":{"enter":[null]},"BinaryExpression":{"enter":[null]},"MemberExpression":{"enter":[null],"exit":[null]},"_exploded":true,"_verified":true,"Identifier":{"enter":[null]},"JSXIdentifier":{"enter":[null]}},"options":{"polyfill":false,"useBuiltIns":false}},{"key":"base$0$3","visitor":{"_exploded":{},"_verified":{},"ClassDeclaration":{"enter":[null]},"ClassExpression":{"enter":[null]}},"options":{"loose":true}},{"key":"base$0$4","visitor":{"FunctionExpression":{"exit":[null]},"_exploded":true,"_verified":true},"options":{}},{"key":"base$0$5","visitor":{"ForInStatement":{"enter":[null]},"_exploded":true,"_verified":true},"options":{}},{"key":"base$0$6","visitor":{"Program":{"exit":[null]},"_exploded":true,"_verified":true},"options":{"allowTopLevelThis":true,"strictMode":false,"loose":true}},{"key":"base$0$1$0","visitor":{"_exploded":{},"_verified":{},"JSXNamespacedName":{"enter":[null]},"JSXElement":{"exit":[null]},"JSXFragment":{"exit":[null]},"Program":{"enter":[null],"exit":[null]},"JSXAttribute":{"enter":[null]}},"options":{"pragma":"React.createElement","pragmaFrag":"React.Fragment","throwIfNamespace":true,"useBuiltIns":false}},{"key":"base$0$1$1","visitor":{"_exploded":true,"_verified":true},"options":{}},{"key":"base$0$1$2","visitor":{"ExportDefaultDeclaration":{"enter":[null]},"CallExpression":{"enter":[null]},"_exploded":true,"_verified":true},"options":{}},{"key":"base$0$0$0","visitor":{"_exploded":true,"_verified":true},"options":{}},{"key":"base$0$0$1","visitor":{"_exploded":true,"_verified":true},"options":{}},{"key":"base$0$0$2","visitor":{"ArrowFunctionExpression":{"enter":[null]},"_exploded":true,"_verified":true},"options":{}},{"key":"base$0$0$3","visitor":{"BlockStatement":{"enter":[null]},"SwitchCase":{"enter":[null]},"_exploded":true,"_verified":true},"options":{}},{"key":"base$0$0$4","visitor":{"VariableDeclaration":{"enter":[null]},"CatchClause":{"enter":[null]},"_exploded":true,"BlockStatement":{"enter":[null]},"SwitchStatement":{"enter":[null]},"Program":{"enter":[null]},"_verified":true,"DoWhileStatement":{"enter":[null]},"ForInStatement":{"enter":[null]},"ForStatement":{"enter":[null]},"WhileStatement":{"enter":[null]},"ForOfStatement":{"enter":[null]}},"options":{}},{"key":"base$0$0$5","visitor":{"ExportDefaultDeclaration":{"enter":[null]},"ClassDeclaration":{"enter":[null]},"ClassExpression":{"enter":[null]},"_exploded":true,"_verified":true},"options":{"loose":true}},{"key":"base$0$0$6","visitor":{"ObjectExpression":{"exit":[null]},"_exploded":true,"_verified":true},"options":{"loose":true}},{"key":"base$0$0$7","visitor":{"ExportNamedDeclaration":{"enter":[null]},"CatchClause":{"enter":[null]},"AssignmentExpression":{"enter":[null]},"VariableDeclaration":{"enter":[null]},"_exploded":true,"_verified":true,"ForInStatement":{"enter":[null]},"ForOfStatement":{"enter":[null]}},"options":{}},{"key":"base$0$0$8","visitor":{"ForOfStatement":{"enter":[null]},"_exploded":true,"_verified":true},"options":{"loose":true}},{"key":"base$0$0$9","visitor":{"NumericLiteral":{"enter":[null]},"StringLiteral":{"enter":[null]},"_exploded":true,"_verified":true},"options":{}},{"key":"base$0$0$10","visitor":{"ObjectExpression":{"enter":[null]},"_exploded":true,"_verified":true},"options":{}},{"key":"base$0$0$11","visitor":{"_exploded":true,"_verified":true,"FunctionDeclaration":{"enter":[null]},"FunctionExpression":{"enter":[null]},"ObjectMethod":{"enter":[null]},"ArrowFunctionExpression":{"enter":[null]},"ClassMethod":{"enter":[null]}},"options":{}},{"key":"base$0$0$12","visitor":{"ObjectMethod":{"enter":[null]},"ObjectProperty":{"enter":[null]},"_exploded":true,"_verified":true},"options":{}},{"key":"base$0$0$13","visitor":{"ArrayExpression":{"enter":[null]},"CallExpression":{"enter":[null]},"NewExpression":{"enter":[null]},"_exploded":true,"_verified":true},"options":{}},{"key":"base$0$0$14","visitor":{"RegExpLiteral":{"enter":[null]},"_exploded":true,"_verified":true},"options":{}},{"key":"base$0$0$15","visitor":{"TaggedTemplateExpression":{"enter":[null]},"TemplateLiteral":{"enter":[null]},"_exploded":true,"_verified":true},"options":{"loose":true}},{"key":"base$0$0$16","visitor":{"UnaryExpression":{"enter":[null]},"_exploded":true,"_verified":true,"BlockStatement":{"enter":[null]},"CatchClause":{"enter":[null]},"DoWhileStatement":{"enter":[null]},"ForInStatement":{"enter":[null]},"ForStatement":{"enter":[null]},"FunctionDeclaration":{"enter":[null]},"FunctionExpression":{"enter":[null]},"Program":{"enter":[null]},"ObjectMethod":{"enter":[null]},"SwitchStatement":{"enter":[null]},"WhileStatement":{"enter":[null]},"ArrowFunctionExpression":{"enter":[null]},"ClassDeclaration":{"enter":[null]},"ClassExpression":{"enter":[null]},"ForOfStatement":{"enter":[null]},"ClassMethod":{"enter":[null]}},"options":{}},{"key":"base$0$0$17","visitor":{"RegExpLiteral":{"enter":[null]},"_exploded":true,"_verified":true},"options":{}},{"key":"base$0$0$18","visitor":{"_exploded":true,"_verified":true},"options":{}},{"key":"base$0$0$19","visitor":{"_exploded":{},"_verified":{},"VariableDeclarator":{"enter":[null]},"ExportNamedDeclaration":{"enter":[null]},"CatchClause":{"enter":[null]},"AssignmentExpression":{"enter":[null]},"ObjectExpression":{"enter":[null]},"FunctionDeclaration":{"enter":[null]},"FunctionExpression":{"enter":[null]},"ObjectMethod":{"enter":[null]},"ArrowFunctionExpression":{"enter":[null]},"ClassMethod":{"enter":[null]},"ForInStatement":{"enter":[null]},"ForOfStatement":{"enter":[null]}},"options":{}},{"key":"base$0$0$20","visitor":{"ObjectProperty":{"exit":[null]},"_exploded":true,"_verified":true},"options":{}},{"key":"base$0$0$21","visitor":{"_exploded":{},"_verified":{},"Program":{"enter":[null]},"ImportDeclaration":{"enter":[null,null]},"ClassProperty":{"enter":[null]},"AssignmentPattern":{"enter":[null]},"TypeCastExpression":{"enter":[null,null]},"ImportSpecifier":{"enter":[null]},"ClassDeclaration":{"enter":[null]},"ClassExpression":{"enter":[null]},"FunctionDeclaration":{"enter":[null]},"FunctionExpression":{"enter":[null]},"ObjectMethod":{"enter":[null]},"ArrowFunctionExpression":{"enter":[null]},"ClassMethod":{"enter":[null]},"AnyTypeAnnotation":{"enter":[null]},"ArrayTypeAnnotation":{"enter":[null]},"BooleanTypeAnnotation":{"enter":[null]},"BooleanLiteralTypeAnnotation":{"enter":[null]},"NullLiteralTypeAnnotation":{"enter":[null]},"ClassImplements":{"enter":[null]},"DeclareClass":{"enter":[null]},"DeclareFunction":{"enter":[null]},"DeclareInterface":{"enter":[null]},"DeclareModule":{"enter":[null]},"DeclareModuleExports":{"enter":[null]},"DeclareTypeAlias":{"enter":[null]},"DeclareOpaqueType":{"enter":[null]},"DeclareVariable":{"enter":[null]},"DeclareExportDeclaration":{"enter":[null]},"DeclareExportAllDeclaration":{"enter":[null]},"DeclaredPredicate":{"enter":[null]},"ExistsTypeAnnotation":{"enter":[null]},"FunctionTypeAnnotation":{"enter":[null]},"FunctionTypeParam":{"enter":[null]},"GenericTypeAnnotation":{"enter":[null]},"InferredPredicate":{"enter":[null]},"InterfaceExtends":{"enter":[null]},"InterfaceDeclaration":{"enter":[null]},"IntersectionTypeAnnotation":{"enter":[null]},"MixedTypeAnnotation":{"enter":[null]},"EmptyTypeAnnotation":{"enter":[null]},"NullableTypeAnnotation":{"enter":[null]},"NumberLiteralTypeAnnotation":{"enter":[null]},"NumberTypeAnnotation":{"enter":[null]},"ObjectTypeAnnotation":{"enter":[null]},"ObjectTypeCallProperty":{"enter":[null]},"ObjectTypeIndexer":{"enter":[null]},"ObjectTypeProperty":{"enter":[null]},"ObjectTypeSpreadProperty":{"enter":[null]},"OpaqueType":{"enter":[null]},"QualifiedTypeIdentifier":{"enter":[null]},"StringLiteralTypeAnnotation":{"enter":[null]},"StringTypeAnnotation":{"enter":[null]},"ThisTypeAnnotation":{"enter":[null]},"TupleTypeAnnotation":{"enter":[null]},"TypeofTypeAnnotation":{"enter":[null]},"TypeAlias":{"enter":[null]},"TypeAnnotation":{"enter":[null]},"TypeParameter":{"enter":[null]},"TypeParameterDeclaration":{"enter":[null]},"TypeParameterInstantiation":{"enter":[null]},"UnionTypeAnnotation":{"enter":[null]},"Variance":{"enter":[null]},"VoidTypeAnnotation":{"enter":[null]},"ExportAllDeclaration":{"enter":[null]},"ExportDefaultDeclaration":{"enter":[null]},"ExportNamedDeclaration":{"enter":[null]}},"options":{}},{"key":"base$0$0$22","visitor":{"AssignmentExpression":{"enter":[null]},"BinaryExpression":{"enter":[null]},"_exploded":true,"_verified":true},"options":{}},{"key":"base$0$0$23","visitor":{"_exploded":{},"_verified":{},"Program":{"enter":[null]}},"options":{}},{"key":"regenerator-transform","visitor":{"_exploded":true,"_verified":true,"FunctionDeclaration":{"exit":[null]},"FunctionExpression":{"exit":[null]},"ObjectMethod":{"exit":[null]},"ArrowFunctionExpression":{"exit":[null]},"ClassMethod":{"exit":[null]}},"options":{}}],"presets":[],"compact":false,"ast":true,"babelrc":false,"sourceFileName":"imports/plugins/core/accounts/client/templates/updatePassword/updatePassword.js","filename":"imports/plugins/core/accounts/client/templates/updatePassword/updatePassword.js","sourceMaps":true,"envName":"development","cwd":"/Users/estebandev/test-knowledge","passPerPreset":false,"parserOpts":{"sourceType":"module","sourceFileName":"imports/plugins/core/accounts/client/templates/updatePassword/updatePassword.js","plugins":["dynamicImport","classProperties","jsx","jsx","flow","asyncGenerators","objectRestSpread","objectRestSpread","flow","asyncGenerators"]},"generatorOpts":{"filename":"imports/plugins/core/accounts/client/templates/updatePassword/updatePassword.js","comments":true,"compact":false,"sourceMaps":true,"sourceFileName":"imports/plugins/core/accounts/client/templates/updatePassword/updatePassword.js"}},"code":"var _objectSpread2 = _interopRequireDefault(require(\"@babel/runtime/helpers/objectSpread\"));\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { \"default\": obj }; }\n\nvar Accounts;\nmodule.watch(require(\"meteor/accounts-base\"), {\n  Accounts: function (v) {\n    Accounts = v;\n  }\n}, 0);\nvar Template;\nmodule.watch(require(\"meteor/templating\"), {\n  Template: function (v) {\n    Template = v;\n  }\n}, 1);\nvar $;\nmodule.watch(require(\"meteor/jquery\"), {\n  $: function (v) {\n    $ = v;\n  }\n}, 2);\nvar Random;\nmodule.watch(require(\"meteor/random\"), {\n  Random: function (v) {\n    Random = v;\n  }\n}, 3);\nvar Blaze;\nmodule.watch(require(\"meteor/blaze\"), {\n  Blaze: function (v) {\n    Blaze = v;\n  }\n}, 4);\nvar ReactiveVar;\nmodule.watch(require(\"meteor/reactive-var\"), {\n  ReactiveVar: function (v) {\n    ReactiveVar = v;\n  }\n}, 5);\nvar i18next;\nmodule.watch(require(\"../../../../../../../client/api\"), {\n  i18next: function (v) {\n    i18next = v;\n  }\n}, 6);\nvar LoginFormSharedHelpers;\nmodule.watch(require(\"../../helpers\"), {\n  LoginFormSharedHelpers: function (v) {\n    LoginFormSharedHelpers = v;\n  }\n}, 7);\nvar getComponent;\nmodule.watch(require(\"../../../../components/lib\"), {\n  getComponent: function (v) {\n    getComponent = v;\n  }\n}, 8);\nvar LoginFormValidation;\nmodule.watch(require(\"../../../../../../../lib/api\"), {\n  LoginFormValidation: function (v) {\n    LoginFormValidation = v;\n  }\n}, 9);\n\n/**\n * Accounts Event: onResetPasswordLink When a user uses a password reset link\n */\nAccounts.onResetPasswordLink(function (token, done) {\n  Blaze.renderWithData(Template.loginFormUpdatePasswordOverlay, {\n    token: token,\n    callback: done,\n    isOpen: true,\n    type: \"updatePassword\"\n  }, $(\"body\").get(0));\n});\n/**\n * Accounts Event: onEnrollmentLink When a user uses an enrollment link\n */\n\nAccounts.onEnrollmentLink(function (token, done) {\n  Blaze.renderWithData(Template.loginFormUpdatePasswordOverlay, {\n    token: token,\n    callback: done,\n    isOpen: true,\n    type: \"setPassword\"\n  }, $(\"body\").get(0));\n}); // ----------------------------------------------------------------------------\n// /**\n//  * Helpers: Login Form Update Password Overlay\n//  */\n\nTemplate.loginFormUpdatePasswordOverlay.helpers({\n  component: function () {\n    var currentData = Template.currentData() || {};\n    return (0, _objectSpread2.default)({}, currentData, {\n      component: getComponent(\"UpdatePasswordOverlay\")\n    });\n  }\n}); // ----------------------------------------------------------------------------\n\n/**\n * onCreated: Login Form Change Password\n */\n\nTemplate.loginFormChangePassword.onCreated(function () {\n  var template = Template.instance();\n  template.uniqueId = Random.id();\n  template.formMessages = new ReactiveVar({});\n});\n/**\n * Helpers: Login Form Change Password\n */\n\nTemplate.loginFormChangePassword.helpers(LoginFormSharedHelpers);\n/**\n * Events: Login Form Change Password\n */\n\nTemplate.loginFormChangePassword.events({\n  /**\n   * Submit form for password update\n   * @param  {Event} event - jQuery Event\n   * @param  {Template} template - Blaze Template\n   * @return {void}\n   */\n  \"submit form\": function (event, template) {\n    event.preventDefault();\n    event.stopPropagation();\n    var oldPasswordInput = template.$(\".login-input--oldPassword\");\n    var passwordInput = template.$(\".login-input--password\");\n    var oldPassword = oldPasswordInput.val().trim();\n    var password = passwordInput.val().trim(); // We only check if it exists, just incase we\"ve change the password strength and want the\n    // user to have an oppurtinity to update to a stronger password\n\n    var validatedOldPassword = LoginFormValidation.password(password, {\n      validationLevel: \"exists\"\n    });\n    var validatedPassword = LoginFormValidation.password(password);\n    var templateInstance = Template.instance();\n    var errors = {};\n    templateInstance.formMessages.set({});\n\n    if (validatedOldPassword !== true) {\n      errors.oldPassword = validatedOldPassword;\n    }\n\n    if (validatedPassword !== true) {\n      errors.password = validatedPassword;\n    }\n\n    if ($.isEmptyObject(errors) === false) {\n      templateInstance.formMessages.set({\n        errors: errors\n      }); // prevent password update\n\n      return;\n    }\n\n    Accounts.changePassword(oldPassword, password, function (error) {\n      if (error) {\n        // Show some error message\n        templateInstance.formMessages.set({\n          alerts: [error]\n        });\n      } else {\n        // // Close dropdown or navigate to page\n        templateInstance.formMessages.set({\n          info: [{\n            reason: i18next.t(\"accountsUI.info.passwordChanged\")\n          }]\n        });\n      }\n    });\n  }\n});","map":{"version":3,"sources":["imports/plugins/core/accounts/client/templates/updatePassword/updatePassword.js"],"names":["Accounts","module","watch","require","v","Template","$","Random","Blaze","ReactiveVar","i18next","LoginFormSharedHelpers","getComponent","LoginFormValidation","onResetPasswordLink","token","done","renderWithData","loginFormUpdatePasswordOverlay","callback","isOpen","type","get","onEnrollmentLink","helpers","component","currentData","loginFormChangePassword","onCreated","template","instance","uniqueId","id","formMessages","events","event","preventDefault","stopPropagation","oldPasswordInput","passwordInput","oldPassword","val","trim","password","validatedOldPassword","validationLevel","validatedPassword","templateInstance","errors","set","isEmptyObject","changePassword","error","alerts","info","reason","t"],"mappings":"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","sourcesContent":["import { Accounts } from \"meteor/accounts-base\";\nimport { Template } from \"meteor/templating\";\nimport { $ } from \"meteor/jquery\";\nimport { Random } from \"meteor/random\";\nimport { Blaze } from \"meteor/blaze\";\nimport { ReactiveVar } from \"meteor/reactive-var\";\nimport { i18next } from \"/client/api\";\nimport { LoginFormSharedHelpers } from \"../../helpers\";\nimport { getComponent } from \"/imports/plugins/core/components/lib\";\nimport { LoginFormValidation } from \"/lib/api\";\n\n/**\n * Accounts Event: onResetPasswordLink When a user uses a password reset link\n */\nAccounts.onResetPasswordLink((token, done) => {\n  Blaze.renderWithData(Template.loginFormUpdatePasswordOverlay, {\n    token,\n    callback: done,\n    isOpen: true,\n    type: \"updatePassword\"\n  }, $(\"body\").get(0));\n});\n\n/**\n * Accounts Event: onEnrollmentLink When a user uses an enrollment link\n */\nAccounts.onEnrollmentLink((token, done) => {\n  Blaze.renderWithData(Template.loginFormUpdatePasswordOverlay, {\n    token,\n    callback: done,\n    isOpen: true,\n    type: \"setPassword\"\n  }, $(\"body\").get(0));\n});\n\n\n// ----------------------------------------------------------------------------\n// /**\n//  * Helpers: Login Form Update Password Overlay\n//  */\nTemplate.loginFormUpdatePasswordOverlay.helpers({\n  component() {\n    const currentData = Template.currentData() || {};\n    return {\n      ...currentData,\n      component: getComponent(\"UpdatePasswordOverlay\")\n    };\n  }\n});\n\n// ----------------------------------------------------------------------------\n\n/**\n * onCreated: Login Form Change Password\n */\nTemplate.loginFormChangePassword.onCreated(() => {\n  const template = Template.instance();\n\n  template.uniqueId = Random.id();\n  template.formMessages = new ReactiveVar({});\n});\n\n/**\n * Helpers: Login Form Change Password\n */\nTemplate.loginFormChangePassword.helpers(LoginFormSharedHelpers);\n\n/**\n * Events: Login Form Change Password\n */\nTemplate.loginFormChangePassword.events({\n\n  /**\n   * Submit form for password update\n   * @param  {Event} event - jQuery Event\n   * @param  {Template} template - Blaze Template\n   * @return {void}\n   */\n  \"submit form\"(event, template) {\n    event.preventDefault();\n    event.stopPropagation();\n\n    const oldPasswordInput = template.$(\".login-input--oldPassword\");\n    const passwordInput = template.$(\".login-input--password\");\n\n    const oldPassword = oldPasswordInput.val().trim();\n    const password = passwordInput.val().trim();\n\n    // We only check if it exists, just incase we\"ve change the password strength and want the\n    // user to have an oppurtinity to update to a stronger password\n    const validatedOldPassword = LoginFormValidation.password(password, { validationLevel: \"exists\" });\n    const validatedPassword = LoginFormValidation.password(password);\n\n    const templateInstance = Template.instance();\n    const errors = {};\n\n    templateInstance.formMessages.set({});\n\n\n    if (validatedOldPassword !== true) {\n      errors.oldPassword = validatedOldPassword;\n    }\n\n    if (validatedPassword !== true) {\n      errors.password = validatedPassword;\n    }\n\n    if ($.isEmptyObject(errors) === false) {\n      templateInstance.formMessages.set({\n        errors\n      });\n      // prevent password update\n      return;\n    }\n\n    Accounts.changePassword(oldPassword, password, (error) => {\n      if (error) {\n        // Show some error message\n        templateInstance.formMessages.set({\n          alerts: [error]\n        });\n      } else {\n        // // Close dropdown or navigate to page\n        templateInstance.formMessages.set({\n          info: [{\n            reason: i18next.t(\"accountsUI.info.passwordChanged\")\n          }]\n        });\n      }\n    });\n  }\n});\n"]},"sourceType":"script","hash":"3bb989a5db08b836e31a897480ff852c68e95e35"}
