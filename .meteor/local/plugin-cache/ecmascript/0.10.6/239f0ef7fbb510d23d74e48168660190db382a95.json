{"metadata":{},"options":{"plugins":[{"key":"base$0$0","visitor":{"Program":{"enter":[null]},"_exploded":true,"_verified":true},"options":{"generateLetDeclarations":true,"enforceStrictMode":false}},{"key":"transform-meteor-dynamic-import","visitor":{"_exploded":{},"_verified":{},"CallExpression":{"enter":[null]}},"options":{}},{"key":"base$0$2","visitor":{"CallExpression":{"enter":[null]},"BinaryExpression":{"enter":[null]},"MemberExpression":{"enter":[null],"exit":[null]},"_exploded":true,"_verified":true,"Identifier":{"enter":[null]},"JSXIdentifier":{"enter":[null]}},"options":{"polyfill":false,"useBuiltIns":false}},{"key":"base$0$3","visitor":{"_exploded":{},"_verified":{},"ClassDeclaration":{"enter":[null]},"ClassExpression":{"enter":[null]}},"options":{"loose":true}},{"key":"base$0$4","visitor":{"FunctionExpression":{"exit":[null]},"_exploded":true,"_verified":true},"options":{}},{"key":"base$0$5","visitor":{"ForInStatement":{"enter":[null]},"_exploded":true,"_verified":true},"options":{}},{"key":"base$0$6","visitor":{"Program":{"exit":[null]},"_exploded":true,"_verified":true},"options":{"allowTopLevelThis":true,"strictMode":false,"loose":true}},{"key":"base$0$1$0","visitor":{"_exploded":{},"_verified":{},"JSXNamespacedName":{"enter":[null]},"JSXElement":{"exit":[null]},"JSXFragment":{"exit":[null]},"Program":{"enter":[null],"exit":[null]},"JSXAttribute":{"enter":[null]}},"options":{"pragma":"React.createElement","pragmaFrag":"React.Fragment","throwIfNamespace":true,"useBuiltIns":false}},{"key":"base$0$1$1","visitor":{"_exploded":true,"_verified":true},"options":{}},{"key":"base$0$1$2","visitor":{"ExportDefaultDeclaration":{"enter":[null]},"CallExpression":{"enter":[null]},"_exploded":true,"_verified":true},"options":{}},{"key":"base$0$0$0","visitor":{"_exploded":true,"_verified":true},"options":{}},{"key":"base$0$0$1","visitor":{"_exploded":true,"_verified":true},"options":{}},{"key":"base$0$0$2","visitor":{"ArrowFunctionExpression":{"enter":[null]},"_exploded":true,"_verified":true},"options":{}},{"key":"base$0$0$3","visitor":{"BlockStatement":{"enter":[null]},"SwitchCase":{"enter":[null]},"_exploded":true,"_verified":true},"options":{}},{"key":"base$0$0$4","visitor":{"VariableDeclaration":{"enter":[null]},"CatchClause":{"enter":[null]},"_exploded":true,"BlockStatement":{"enter":[null]},"SwitchStatement":{"enter":[null]},"Program":{"enter":[null]},"_verified":true,"DoWhileStatement":{"enter":[null]},"ForInStatement":{"enter":[null]},"ForStatement":{"enter":[null]},"WhileStatement":{"enter":[null]},"ForOfStatement":{"enter":[null]}},"options":{}},{"key":"base$0$0$5","visitor":{"ExportDefaultDeclaration":{"enter":[null]},"ClassDeclaration":{"enter":[null]},"ClassExpression":{"enter":[null]},"_exploded":true,"_verified":true},"options":{"loose":true}},{"key":"base$0$0$6","visitor":{"ObjectExpression":{"exit":[null]},"_exploded":true,"_verified":true},"options":{"loose":true}},{"key":"base$0$0$7","visitor":{"ExportNamedDeclaration":{"enter":[null]},"CatchClause":{"enter":[null]},"AssignmentExpression":{"enter":[null]},"VariableDeclaration":{"enter":[null]},"_exploded":true,"_verified":true,"ForInStatement":{"enter":[null]},"ForOfStatement":{"enter":[null]}},"options":{}},{"key":"base$0$0$8","visitor":{"ForOfStatement":{"enter":[null]},"_exploded":true,"_verified":true},"options":{"loose":true}},{"key":"base$0$0$9","visitor":{"NumericLiteral":{"enter":[null]},"StringLiteral":{"enter":[null]},"_exploded":true,"_verified":true},"options":{}},{"key":"base$0$0$10","visitor":{"ObjectExpression":{"enter":[null]},"_exploded":true,"_verified":true},"options":{}},{"key":"base$0$0$11","visitor":{"_exploded":true,"_verified":true,"FunctionDeclaration":{"enter":[null]},"FunctionExpression":{"enter":[null]},"ObjectMethod":{"enter":[null]},"ArrowFunctionExpression":{"enter":[null]},"ClassMethod":{"enter":[null]}},"options":{}},{"key":"base$0$0$12","visitor":{"ObjectMethod":{"enter":[null]},"ObjectProperty":{"enter":[null]},"_exploded":true,"_verified":true},"options":{}},{"key":"base$0$0$13","visitor":{"ArrayExpression":{"enter":[null]},"CallExpression":{"enter":[null]},"NewExpression":{"enter":[null]},"_exploded":true,"_verified":true},"options":{}},{"key":"base$0$0$14","visitor":{"RegExpLiteral":{"enter":[null]},"_exploded":true,"_verified":true},"options":{}},{"key":"base$0$0$15","visitor":{"TaggedTemplateExpression":{"enter":[null]},"TemplateLiteral":{"enter":[null]},"_exploded":true,"_verified":true},"options":{"loose":true}},{"key":"base$0$0$16","visitor":{"UnaryExpression":{"enter":[null]},"_exploded":true,"_verified":true,"BlockStatement":{"enter":[null]},"CatchClause":{"enter":[null]},"DoWhileStatement":{"enter":[null]},"ForInStatement":{"enter":[null]},"ForStatement":{"enter":[null]},"FunctionDeclaration":{"enter":[null]},"FunctionExpression":{"enter":[null]},"Program":{"enter":[null]},"ObjectMethod":{"enter":[null]},"SwitchStatement":{"enter":[null]},"WhileStatement":{"enter":[null]},"ArrowFunctionExpression":{"enter":[null]},"ClassDeclaration":{"enter":[null]},"ClassExpression":{"enter":[null]},"ForOfStatement":{"enter":[null]},"ClassMethod":{"enter":[null]}},"options":{}},{"key":"base$0$0$17","visitor":{"RegExpLiteral":{"enter":[null]},"_exploded":true,"_verified":true},"options":{}},{"key":"base$0$0$18","visitor":{"_exploded":true,"_verified":true},"options":{}},{"key":"base$0$0$19","visitor":{"_exploded":{},"_verified":{},"VariableDeclarator":{"enter":[null]},"ExportNamedDeclaration":{"enter":[null]},"CatchClause":{"enter":[null]},"AssignmentExpression":{"enter":[null]},"ObjectExpression":{"enter":[null]},"FunctionDeclaration":{"enter":[null]},"FunctionExpression":{"enter":[null]},"ObjectMethod":{"enter":[null]},"ArrowFunctionExpression":{"enter":[null]},"ClassMethod":{"enter":[null]},"ForInStatement":{"enter":[null]},"ForOfStatement":{"enter":[null]}},"options":{}},{"key":"base$0$0$20","visitor":{"ObjectProperty":{"exit":[null]},"_exploded":true,"_verified":true},"options":{}},{"key":"base$0$0$21","visitor":{"_exploded":{},"_verified":{},"Program":{"enter":[null]},"ImportDeclaration":{"enter":[null,null]},"ClassProperty":{"enter":[null]},"AssignmentPattern":{"enter":[null]},"TypeCastExpression":{"enter":[null,null]},"ImportSpecifier":{"enter":[null]},"ClassDeclaration":{"enter":[null]},"ClassExpression":{"enter":[null]},"FunctionDeclaration":{"enter":[null]},"FunctionExpression":{"enter":[null]},"ObjectMethod":{"enter":[null]},"ArrowFunctionExpression":{"enter":[null]},"ClassMethod":{"enter":[null]},"AnyTypeAnnotation":{"enter":[null]},"ArrayTypeAnnotation":{"enter":[null]},"BooleanTypeAnnotation":{"enter":[null]},"BooleanLiteralTypeAnnotation":{"enter":[null]},"NullLiteralTypeAnnotation":{"enter":[null]},"ClassImplements":{"enter":[null]},"DeclareClass":{"enter":[null]},"DeclareFunction":{"enter":[null]},"DeclareInterface":{"enter":[null]},"DeclareModule":{"enter":[null]},"DeclareModuleExports":{"enter":[null]},"DeclareTypeAlias":{"enter":[null]},"DeclareOpaqueType":{"enter":[null]},"DeclareVariable":{"enter":[null]},"DeclareExportDeclaration":{"enter":[null]},"DeclareExportAllDeclaration":{"enter":[null]},"DeclaredPredicate":{"enter":[null]},"ExistsTypeAnnotation":{"enter":[null]},"FunctionTypeAnnotation":{"enter":[null]},"FunctionTypeParam":{"enter":[null]},"GenericTypeAnnotation":{"enter":[null]},"InferredPredicate":{"enter":[null]},"InterfaceExtends":{"enter":[null]},"InterfaceDeclaration":{"enter":[null]},"IntersectionTypeAnnotation":{"enter":[null]},"MixedTypeAnnotation":{"enter":[null]},"EmptyTypeAnnotation":{"enter":[null]},"NullableTypeAnnotation":{"enter":[null]},"NumberLiteralTypeAnnotation":{"enter":[null]},"NumberTypeAnnotation":{"enter":[null]},"ObjectTypeAnnotation":{"enter":[null]},"ObjectTypeCallProperty":{"enter":[null]},"ObjectTypeIndexer":{"enter":[null]},"ObjectTypeProperty":{"enter":[null]},"ObjectTypeSpreadProperty":{"enter":[null]},"OpaqueType":{"enter":[null]},"QualifiedTypeIdentifier":{"enter":[null]},"StringLiteralTypeAnnotation":{"enter":[null]},"StringTypeAnnotation":{"enter":[null]},"ThisTypeAnnotation":{"enter":[null]},"TupleTypeAnnotation":{"enter":[null]},"TypeofTypeAnnotation":{"enter":[null]},"TypeAlias":{"enter":[null]},"TypeAnnotation":{"enter":[null]},"TypeParameter":{"enter":[null]},"TypeParameterDeclaration":{"enter":[null]},"TypeParameterInstantiation":{"enter":[null]},"UnionTypeAnnotation":{"enter":[null]},"Variance":{"enter":[null]},"VoidTypeAnnotation":{"enter":[null]},"ExportAllDeclaration":{"enter":[null]},"ExportDefaultDeclaration":{"enter":[null]},"ExportNamedDeclaration":{"enter":[null]}},"options":{}},{"key":"base$0$0$22","visitor":{"AssignmentExpression":{"enter":[null]},"BinaryExpression":{"enter":[null]},"_exploded":true,"_verified":true},"options":{}},{"key":"base$0$0$23","visitor":{"_exploded":{},"_verified":{},"Program":{"enter":[null]}},"options":{}},{"key":"regenerator-transform","visitor":{"_exploded":true,"_verified":true,"FunctionDeclaration":{"exit":[null]},"FunctionExpression":{"exit":[null]},"ObjectMethod":{"exit":[null]},"ArrowFunctionExpression":{"exit":[null]},"ClassMethod":{"exit":[null]}},"options":{}}],"presets":[],"compact":false,"ast":true,"babelrc":false,"sourceFileName":"imports/plugins/core/ui/client/components/media/mediaItem.js","filename":"imports/plugins/core/ui/client/components/media/mediaItem.js","sourceMaps":true,"envName":"development","cwd":"/Users/estebandev/test-knowledge","passPerPreset":false,"parserOpts":{"sourceType":"module","sourceFileName":"imports/plugins/core/ui/client/components/media/mediaItem.js","plugins":["dynamicImport","classProperties","jsx","jsx","flow","asyncGenerators","objectRestSpread","objectRestSpread","flow","asyncGenerators"]},"generatorOpts":{"filename":"imports/plugins/core/ui/client/components/media/mediaItem.js","comments":true,"compact":false,"sourceMaps":true,"sourceFileName":"imports/plugins/core/ui/client/components/media/mediaItem.js"}},"code":"var _assertThisInitialized2 = _interopRequireDefault(require(\"@babel/runtime/helpers/assertThisInitialized\"));\n\nvar _inheritsLoose2 = _interopRequireDefault(require(\"@babel/runtime/helpers/inheritsLoose\"));\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { \"default\": obj }; }\n\nvar React, Component;\nmodule.watch(require(\"react\"), {\n  \"default\": function (v) {\n    React = v;\n  },\n  Component: function (v) {\n    Component = v;\n  }\n}, 0);\nvar classnames;\nmodule.watch(require(\"classnames\"), {\n  \"default\": function (v) {\n    classnames = v;\n  }\n}, 1);\nvar PropTypes;\nmodule.watch(require(\"prop-types\"), {\n  \"default\": function (v) {\n    PropTypes = v;\n  }\n}, 2);\nvar ReactImageMagnify;\nmodule.watch(require(\"react-image-magnify\"), {\n  \"default\": function (v) {\n    ReactImageMagnify = v;\n  }\n}, 3);\nvar Components, registerComponent;\nmodule.watch(require(\"../../../../components/lib\"), {\n  Components: function (v) {\n    Components = v;\n  },\n  registerComponent: function (v) {\n    registerComponent = v;\n  }\n}, 4);\nvar Reaction;\nmodule.watch(require(\"../../../../../../../client/api\"), {\n  Reaction: function (v) {\n    Reaction = v;\n  }\n}, 5);\nvar SortableItem;\nmodule.watch(require(\"../../containers\"), {\n  SortableItem: function (v) {\n    SortableItem = v;\n  }\n}, 6);\nvar Hint;\nmodule.watch(require(\"./hint\"), {\n  \"default\": function (v) {\n    Hint = v;\n  }\n}, 7);\n\nvar MediaItem =\n/*#__PURE__*/\nfunction (_Component) {\n  (0, _inheritsLoose2.default)(MediaItem, _Component);\n\n  function MediaItem() {\n    var _temp, _this;\n\n    for (var _len = arguments.length, args = new Array(_len), _key = 0; _key < _len; _key++) {\n      args[_key] = arguments[_key];\n    }\n\n    return (_temp = _this = _Component.call.apply(_Component, [this].concat(args)) || this, _this.handleClick = function (event) {\n      event.preventDefault();\n      event.stopPropagation();\n\n      _this.props.onClick();\n    }, _this.handleKeyPress = function (event) {\n      if (event.keyCode === 13) _this.handleClick(event);\n    }, _this.handleMouseEnter = function (event) {\n      var _this$props = _this.props,\n          onMouseEnter = _this$props.onMouseEnter,\n          source = _this$props.source;\n      onMouseEnter(event, source);\n    }, _this.handleMouseLeave = function (event) {\n      var _this$props2 = _this.props,\n          onMouseLeave = _this$props2.onMouseLeave,\n          source = _this$props2.source;\n      onMouseLeave(event, source);\n    }, _this.handleRemoveMedia = function (event) {\n      var _this$props3 = _this.props,\n          onRemoveMedia = _this$props3.onRemoveMedia,\n          source = _this$props3.source;\n      event.stopPropagation();\n      onRemoveMedia(source);\n    }, _this.getSource = function (size) {\n      var _this$props4 = _this.props,\n          defaultSource = _this$props4.defaultSource,\n          source = _this$props4.source;\n      return source && source.url({\n        store: size\n      }) || defaultSource;\n    }, _temp) || (0, _assertThisInitialized2.default)(_this);\n  }\n\n  var _proto = MediaItem.prototype;\n\n  _proto.renderRevision = function () {\n    function renderRevision() {\n      var source = this.props.source;\n\n      var _ref = source || {},\n          revision = _ref.revision;\n\n      if (!revision) return null;\n\n      if (revision.changeType === \"remove\") {\n        return React.createElement(Components.IconButton, {\n          icon: \"fa\",\n          status: \"danger\",\n          i18nKeyTooltip: \"admin.mediaGallery.removedImage\",\n          tooltip: \"Image has been deleted. Publish to save changes.\",\n          kind: \"mediaGalleryStatus\"\n        });\n      }\n\n      return React.createElement(Components.IconButton, {\n        icon: \"fa\",\n        status: \"info\",\n        i18nKeyTooltip: \"admin.mediaGallery.addedImage\",\n        tooltip: \"This is a new image. Publish to save changes.\",\n        kind: \"mediaGalleryStatus\"\n      });\n    }\n\n    return renderRevision;\n  }();\n\n  _proto.renderControls = function () {\n    function renderControls() {\n      var _props = this.props,\n          editable = _props.editable,\n          source = _props.source;\n      if (!editable) return null;\n\n      var _ref2 = source || {},\n          revision = _ref2.revision; // If we have a pending remove, don't show the remove button\n\n\n      var removeButton = null;\n\n      if (!revision || revision.changeType !== \"remove\") {\n        removeButton = React.createElement(Components.IconButton, {\n          icon: \"fa fa-times\",\n          onClick: this.handleRemoveMedia,\n          i18nKeyTooltip: \"admin.mediaGallery.deleteImage\",\n          tooltip: \"Click to remove image\"\n        });\n      }\n\n      return React.createElement(\"div\", {\n        className: \"rui badge-container\"\n      }, this.renderRevision(), removeButton);\n    }\n\n    return renderControls;\n  }();\n\n  _proto.renderImage = function () {\n    function renderImage() {\n      var _props2 = this.props,\n          editable = _props2.editable,\n          mediaHeight = _props2.mediaHeight,\n          mediaWidth = _props2.mediaWidth,\n          size = _props2.size,\n          zoomable = _props2.zoomable;\n\n      if (zoomable && !editable) {\n        return React.createElement(ReactImageMagnify, {\n          smallImage: {\n            width: mediaWidth,\n            height: mediaHeight,\n            src: this.getSource(size)\n          },\n          imageClassName: \"img-responsive\",\n          fadeDurationInMs: 150,\n          hoverDelayInMs: 200,\n          pressDuration: 300,\n          largeImage: {\n            src: this.getSource(\"image\"),\n            width: mediaWidth * 2,\n            height: mediaHeight * 2\n          },\n          isHintEnabled: true,\n          enlargedImageContainerClassName: \"zoomed-image-container\",\n          hintTextMouse: \"Hover to zoom\",\n          hintTextTouch: \"Long-touch to zoom\",\n          hintComponent: Hint\n        });\n      }\n\n      return React.createElement(\"img\", {\n        alt: \"\",\n        className: \"img-responsive\",\n        src: this.getSource(size)\n      });\n    }\n\n    return renderImage;\n  }();\n\n  _proto.render = function () {\n    function render() {\n      var _props3 = this.props,\n          connectDragSource = _props3.connectDragSource,\n          connectDropTarget = _props3.connectDropTarget,\n          editable = _props3.editable,\n          zoomable = _props3.zoomable;\n      var classes = {\n        \"gallery-image\": true,\n        \"no-fade-on-hover\": zoomable && !editable,\n        \"admin-gallery-image\": Reaction.hasAdminAccess()\n      };\n      var mediaElement = React.createElement(\"div\", {\n        className: classnames(classes),\n        onClick: this.handleClick,\n        onKeyPress: this.handleKeyPress,\n        onMouseEnter: this.handleMouseEnter,\n        onMouseLeave: this.handleMouseLeave,\n        role: \"button\",\n        tabIndex: 0\n      }, this.renderImage(), this.renderControls());\n\n      if (editable) {\n        return connectDragSource(connectDropTarget(mediaElement));\n      }\n\n      return mediaElement;\n    }\n\n    return render;\n  }();\n\n  return MediaItem;\n}(Component);\n\nMediaItem.propTypes = {\n  connectDragSource: PropTypes.func,\n  connectDropTarget: PropTypes.func,\n  defaultSource: PropTypes.string,\n  editable: PropTypes.bool,\n  mediaHeight: PropTypes.number,\n  mediaWidth: PropTypes.number,\n  onClick: PropTypes.func,\n  onMouseEnter: PropTypes.func,\n  onMouseLeave: PropTypes.func,\n  onRemoveMedia: PropTypes.func,\n  size: PropTypes.string,\n  source: PropTypes.object,\n  zoomable: PropTypes.bool\n};\nMediaItem.defaultProps = {\n  defaultSource: \"/resources/placeholder.gif\",\n  editable: false,\n  onClick: function () {},\n  onMouseEnter: function () {},\n  onMouseLeave: function () {},\n  onRemoveMedia: function () {},\n  size: \"large\",\n  zoomable: false\n};\nregisterComponent(\"MediaItem\", MediaItem, SortableItem(\"media\"));\nmodule.exportDefault(SortableItem(\"media\")(MediaItem));","map":{"version":3,"sources":["imports/plugins/core/ui/client/components/media/mediaItem.js"],"names":["React","Component","module","watch","require","v","classnames","PropTypes","ReactImageMagnify","Components","registerComponent","Reaction","SortableItem","Hint","MediaItem","handleClick","event","preventDefault","stopPropagation","props","onClick","handleKeyPress","keyCode","handleMouseEnter","onMouseEnter","source","handleMouseLeave","onMouseLeave","handleRemoveMedia","onRemoveMedia","getSource","size","defaultSource","url","store","renderRevision","revision","changeType","renderControls","editable","removeButton","renderImage","mediaHeight","mediaWidth","zoomable","smallImage","width","height","src","imageClassName","fadeDurationInMs","hoverDelayInMs","pressDuration","largeImage","isHintEnabled","enlargedImageContainerClassName","hintTextMouse","hintTextTouch","hintComponent","render","connectDragSource","connectDropTarget","classes","hasAdminAccess","mediaElement","propTypes","func","string","bool","number","object","defaultProps","exportDefault"],"mappings":"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","sourcesContent":["import React, { Component } from \"react\";\nimport classnames from \"classnames\";\nimport PropTypes from \"prop-types\";\nimport ReactImageMagnify from \"react-image-magnify\";\nimport { Components, registerComponent } from \"@reactioncommerce/reaction-components\";\nimport { Reaction } from \"/client/api\";\nimport { SortableItem } from \"/imports/plugins/core/ui/client/containers\";\nimport Hint from \"./hint\";\n\nclass MediaItem extends Component {\n  static propTypes = {\n    connectDragSource: PropTypes.func,\n    connectDropTarget: PropTypes.func,\n    defaultSource: PropTypes.string,\n    editable: PropTypes.bool,\n    mediaHeight: PropTypes.number,\n    mediaWidth: PropTypes.number,\n    onClick: PropTypes.func,\n    onMouseEnter: PropTypes.func,\n    onMouseLeave: PropTypes.func,\n    onRemoveMedia: PropTypes.func,\n    size: PropTypes.string,\n    source: PropTypes.object,\n    zoomable: PropTypes.bool\n  };\n\n  static defaultProps = {\n    defaultSource: \"/resources/placeholder.gif\",\n    editable: false,\n    onClick() {},\n    onMouseEnter() {},\n    onMouseLeave() {},\n    onRemoveMedia() {},\n    size: \"large\",\n    zoomable: false\n  };\n\n  handleClick = (event) => {\n    event.preventDefault();\n    event.stopPropagation();\n\n    this.props.onClick();\n  };\n\n  handleKeyPress = (event) => {\n    if (event.keyCode === 13) this.handleClick(event);\n  };\n\n  handleMouseEnter = (event) => {\n    const { onMouseEnter, source } = this.props;\n    onMouseEnter(event, source);\n  }\n\n  handleMouseLeave = (event) => {\n    const { onMouseLeave, source } = this.props;\n    onMouseLeave(event, source);\n  }\n\n  handleRemoveMedia = (event) => {\n    const { onRemoveMedia, source } = this.props;\n\n    event.stopPropagation();\n    onRemoveMedia(source);\n  }\n\n  renderRevision() {\n    const { source } = this.props;\n    const { revision } = source || {};\n\n    if (!revision) return null;\n\n    if (revision.changeType === \"remove\") {\n      return (\n        <Components.IconButton\n          icon=\"fa\"\n          status=\"danger\"\n          i18nKeyTooltip=\"admin.mediaGallery.removedImage\"\n          tooltip=\"Image has been deleted. Publish to save changes.\"\n          kind=\"mediaGalleryStatus\"\n        />\n      );\n    }\n\n    return (\n      <Components.IconButton\n        icon=\"fa\"\n        status=\"info\"\n        i18nKeyTooltip=\"admin.mediaGallery.addedImage\"\n        tooltip=\"This is a new image. Publish to save changes.\"\n        kind=\"mediaGalleryStatus\"\n      />\n    );\n  }\n\n  renderControls() {\n    const { editable, source } = this.props;\n\n    if (!editable) return null;\n\n    const { revision } = source || {};\n\n    // If we have a pending remove, don't show the remove button\n    let removeButton = null;\n    if (!revision || revision.changeType !== \"remove\") {\n      removeButton = (\n        <Components.IconButton\n          icon=\"fa fa-times\"\n          onClick={this.handleRemoveMedia}\n          i18nKeyTooltip=\"admin.mediaGallery.deleteImage\"\n          tooltip=\"Click to remove image\"\n        />\n      );\n    }\n\n    return (\n      <div className=\"rui badge-container\">\n        {this.renderRevision()}\n        {removeButton}\n      </div>\n    );\n  }\n\n  getSource = (size) => {\n    const { defaultSource, source } = this.props;\n\n    return (source && source.url({ store: size })) || defaultSource;\n  };\n\n  renderImage() {\n    const { editable, mediaHeight, mediaWidth, size, zoomable } = this.props;\n\n    if (zoomable && !editable) {\n      return (\n        <ReactImageMagnify {...{\n          smallImage: {\n            width: mediaWidth,\n            height: mediaHeight,\n            src: this.getSource(size)\n          },\n          imageClassName: \"img-responsive\",\n          fadeDurationInMs: 150,\n          hoverDelayInMs: 200,\n          pressDuration: 300,\n          largeImage: {\n            src: this.getSource(\"image\"),\n            width: mediaWidth * 2,\n            height: mediaHeight * 2\n          },\n          isHintEnabled: true,\n          enlargedImageContainerClassName: \"zoomed-image-container\",\n          hintTextMouse: \"Hover to zoom\",\n          hintTextTouch: \"Long-touch to zoom\",\n          hintComponent: Hint\n        }}\n        />\n      );\n    }\n\n    return (\n      <img\n        alt=\"\"\n        className=\"img-responsive\"\n        src={this.getSource(size)}\n      />\n    );\n  }\n\n  render() {\n    const { connectDragSource, connectDropTarget, editable, zoomable } = this.props;\n\n    const classes = {\n      \"gallery-image\": true,\n      \"no-fade-on-hover\": zoomable && !editable,\n      \"admin-gallery-image\": Reaction.hasAdminAccess()\n    };\n\n    const mediaElement = (\n      <div\n        className={classnames(classes)}\n        onClick={this.handleClick}\n        onKeyPress={this.handleKeyPress}\n        onMouseEnter={this.handleMouseEnter}\n        onMouseLeave={this.handleMouseLeave}\n        role=\"button\"\n        tabIndex={0}\n      >\n        {this.renderImage()}\n        {this.renderControls()}\n      </div>\n    );\n\n    if (editable) {\n      return connectDragSource(connectDropTarget(mediaElement));\n    }\n\n    return mediaElement;\n  }\n}\n\nregisterComponent(\"MediaItem\", MediaItem, SortableItem(\"media\"));\n\nexport default SortableItem(\"media\")(MediaItem);\n"]},"sourceType":"script","hash":"239f0ef7fbb510d23d74e48168660190db382a95"}
