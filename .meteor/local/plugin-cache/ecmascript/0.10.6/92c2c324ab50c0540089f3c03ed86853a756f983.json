{"metadata":{},"options":{"plugins":[{"key":"base$0$0","visitor":{"Program":{"enter":[null]},"_exploded":true,"_verified":true},"options":{"generateLetDeclarations":true,"enforceStrictMode":false}},{"key":"transform-meteor-dynamic-import","visitor":{"_exploded":{},"_verified":{},"CallExpression":{"enter":[null]}},"options":{}},{"key":"base$0$2","visitor":{"CallExpression":{"enter":[null]},"BinaryExpression":{"enter":[null]},"MemberExpression":{"enter":[null],"exit":[null]},"_exploded":true,"_verified":true,"Identifier":{"enter":[null]},"JSXIdentifier":{"enter":[null]}},"options":{"polyfill":false,"useBuiltIns":false}},{"key":"base$0$3","visitor":{"_exploded":{},"_verified":{},"ClassDeclaration":{"enter":[null]},"ClassExpression":{"enter":[null]}},"options":{"loose":true}},{"key":"base$0$4","visitor":{"FunctionExpression":{"exit":[null]},"_exploded":true,"_verified":true},"options":{}},{"key":"base$0$5","visitor":{"ForInStatement":{"enter":[null]},"_exploded":true,"_verified":true},"options":{}},{"key":"base$0$6","visitor":{"Program":{"exit":[null]},"_exploded":true,"_verified":true},"options":{"allowTopLevelThis":true,"strictMode":false,"loose":true}},{"key":"base$0$1$0","visitor":{"_exploded":{},"_verified":{},"JSXNamespacedName":{"enter":[null]},"JSXElement":{"exit":[null]},"JSXFragment":{"exit":[null]},"Program":{"enter":[null],"exit":[null]},"JSXAttribute":{"enter":[null]}},"options":{"pragma":"React.createElement","pragmaFrag":"React.Fragment","throwIfNamespace":true,"useBuiltIns":false}},{"key":"base$0$1$1","visitor":{"_exploded":true,"_verified":true},"options":{}},{"key":"base$0$1$2","visitor":{"ExportDefaultDeclaration":{"enter":[null]},"CallExpression":{"enter":[null]},"_exploded":true,"_verified":true},"options":{}},{"key":"base$0$0$0","visitor":{"_exploded":true,"_verified":true},"options":{}},{"key":"base$0$0$1","visitor":{"_exploded":true,"_verified":true},"options":{}},{"key":"base$0$0$2","visitor":{"ArrowFunctionExpression":{"enter":[null]},"_exploded":true,"_verified":true},"options":{}},{"key":"base$0$0$3","visitor":{"BlockStatement":{"enter":[null]},"SwitchCase":{"enter":[null]},"_exploded":true,"_verified":true},"options":{}},{"key":"base$0$0$4","visitor":{"VariableDeclaration":{"enter":[null]},"CatchClause":{"enter":[null]},"_exploded":true,"BlockStatement":{"enter":[null]},"SwitchStatement":{"enter":[null]},"Program":{"enter":[null]},"_verified":true,"DoWhileStatement":{"enter":[null]},"ForInStatement":{"enter":[null]},"ForStatement":{"enter":[null]},"WhileStatement":{"enter":[null]},"ForOfStatement":{"enter":[null]}},"options":{}},{"key":"base$0$0$5","visitor":{"ExportDefaultDeclaration":{"enter":[null]},"ClassDeclaration":{"enter":[null]},"ClassExpression":{"enter":[null]},"_exploded":true,"_verified":true},"options":{"loose":true}},{"key":"base$0$0$6","visitor":{"ObjectExpression":{"exit":[null]},"_exploded":true,"_verified":true},"options":{"loose":true}},{"key":"base$0$0$7","visitor":{"ExportNamedDeclaration":{"enter":[null]},"CatchClause":{"enter":[null]},"AssignmentExpression":{"enter":[null]},"VariableDeclaration":{"enter":[null]},"_exploded":true,"_verified":true,"ForInStatement":{"enter":[null]},"ForOfStatement":{"enter":[null]}},"options":{}},{"key":"base$0$0$8","visitor":{"ForOfStatement":{"enter":[null]},"_exploded":true,"_verified":true},"options":{"loose":true}},{"key":"base$0$0$9","visitor":{"NumericLiteral":{"enter":[null]},"StringLiteral":{"enter":[null]},"_exploded":true,"_verified":true},"options":{}},{"key":"base$0$0$10","visitor":{"ObjectExpression":{"enter":[null]},"_exploded":true,"_verified":true},"options":{}},{"key":"base$0$0$11","visitor":{"_exploded":true,"_verified":true,"FunctionDeclaration":{"enter":[null]},"FunctionExpression":{"enter":[null]},"ObjectMethod":{"enter":[null]},"ArrowFunctionExpression":{"enter":[null]},"ClassMethod":{"enter":[null]}},"options":{}},{"key":"base$0$0$12","visitor":{"ObjectMethod":{"enter":[null]},"ObjectProperty":{"enter":[null]},"_exploded":true,"_verified":true},"options":{}},{"key":"base$0$0$13","visitor":{"ArrayExpression":{"enter":[null]},"CallExpression":{"enter":[null]},"NewExpression":{"enter":[null]},"_exploded":true,"_verified":true},"options":{}},{"key":"base$0$0$14","visitor":{"RegExpLiteral":{"enter":[null]},"_exploded":true,"_verified":true},"options":{}},{"key":"base$0$0$15","visitor":{"TaggedTemplateExpression":{"enter":[null]},"TemplateLiteral":{"enter":[null]},"_exploded":true,"_verified":true},"options":{"loose":true}},{"key":"base$0$0$16","visitor":{"UnaryExpression":{"enter":[null]},"_exploded":true,"_verified":true,"BlockStatement":{"enter":[null]},"CatchClause":{"enter":[null]},"DoWhileStatement":{"enter":[null]},"ForInStatement":{"enter":[null]},"ForStatement":{"enter":[null]},"FunctionDeclaration":{"enter":[null]},"FunctionExpression":{"enter":[null]},"Program":{"enter":[null]},"ObjectMethod":{"enter":[null]},"SwitchStatement":{"enter":[null]},"WhileStatement":{"enter":[null]},"ArrowFunctionExpression":{"enter":[null]},"ClassDeclaration":{"enter":[null]},"ClassExpression":{"enter":[null]},"ForOfStatement":{"enter":[null]},"ClassMethod":{"enter":[null]}},"options":{}},{"key":"base$0$0$17","visitor":{"RegExpLiteral":{"enter":[null]},"_exploded":true,"_verified":true},"options":{}},{"key":"base$0$0$18","visitor":{"_exploded":true,"_verified":true},"options":{}},{"key":"base$0$0$19","visitor":{"_exploded":{},"_verified":{},"VariableDeclarator":{"enter":[null]},"ExportNamedDeclaration":{"enter":[null]},"CatchClause":{"enter":[null]},"AssignmentExpression":{"enter":[null]},"ObjectExpression":{"enter":[null]},"FunctionDeclaration":{"enter":[null]},"FunctionExpression":{"enter":[null]},"ObjectMethod":{"enter":[null]},"ArrowFunctionExpression":{"enter":[null]},"ClassMethod":{"enter":[null]},"ForInStatement":{"enter":[null]},"ForOfStatement":{"enter":[null]}},"options":{}},{"key":"base$0$0$20","visitor":{"ObjectProperty":{"exit":[null]},"_exploded":true,"_verified":true},"options":{}},{"key":"base$0$0$21","visitor":{"_exploded":{},"_verified":{},"Program":{"enter":[null]},"ImportDeclaration":{"enter":[null,null]},"ClassProperty":{"enter":[null]},"AssignmentPattern":{"enter":[null]},"TypeCastExpression":{"enter":[null,null]},"ImportSpecifier":{"enter":[null]},"ClassDeclaration":{"enter":[null]},"ClassExpression":{"enter":[null]},"FunctionDeclaration":{"enter":[null]},"FunctionExpression":{"enter":[null]},"ObjectMethod":{"enter":[null]},"ArrowFunctionExpression":{"enter":[null]},"ClassMethod":{"enter":[null]},"AnyTypeAnnotation":{"enter":[null]},"ArrayTypeAnnotation":{"enter":[null]},"BooleanTypeAnnotation":{"enter":[null]},"BooleanLiteralTypeAnnotation":{"enter":[null]},"NullLiteralTypeAnnotation":{"enter":[null]},"ClassImplements":{"enter":[null]},"DeclareClass":{"enter":[null]},"DeclareFunction":{"enter":[null]},"DeclareInterface":{"enter":[null]},"DeclareModule":{"enter":[null]},"DeclareModuleExports":{"enter":[null]},"DeclareTypeAlias":{"enter":[null]},"DeclareOpaqueType":{"enter":[null]},"DeclareVariable":{"enter":[null]},"DeclareExportDeclaration":{"enter":[null]},"DeclareExportAllDeclaration":{"enter":[null]},"DeclaredPredicate":{"enter":[null]},"ExistsTypeAnnotation":{"enter":[null]},"FunctionTypeAnnotation":{"enter":[null]},"FunctionTypeParam":{"enter":[null]},"GenericTypeAnnotation":{"enter":[null]},"InferredPredicate":{"enter":[null]},"InterfaceExtends":{"enter":[null]},"InterfaceDeclaration":{"enter":[null]},"IntersectionTypeAnnotation":{"enter":[null]},"MixedTypeAnnotation":{"enter":[null]},"EmptyTypeAnnotation":{"enter":[null]},"NullableTypeAnnotation":{"enter":[null]},"NumberLiteralTypeAnnotation":{"enter":[null]},"NumberTypeAnnotation":{"enter":[null]},"ObjectTypeAnnotation":{"enter":[null]},"ObjectTypeCallProperty":{"enter":[null]},"ObjectTypeIndexer":{"enter":[null]},"ObjectTypeProperty":{"enter":[null]},"ObjectTypeSpreadProperty":{"enter":[null]},"OpaqueType":{"enter":[null]},"QualifiedTypeIdentifier":{"enter":[null]},"StringLiteralTypeAnnotation":{"enter":[null]},"StringTypeAnnotation":{"enter":[null]},"ThisTypeAnnotation":{"enter":[null]},"TupleTypeAnnotation":{"enter":[null]},"TypeofTypeAnnotation":{"enter":[null]},"TypeAlias":{"enter":[null]},"TypeAnnotation":{"enter":[null]},"TypeParameter":{"enter":[null]},"TypeParameterDeclaration":{"enter":[null]},"TypeParameterInstantiation":{"enter":[null]},"UnionTypeAnnotation":{"enter":[null]},"Variance":{"enter":[null]},"VoidTypeAnnotation":{"enter":[null]},"ExportAllDeclaration":{"enter":[null]},"ExportDefaultDeclaration":{"enter":[null]},"ExportNamedDeclaration":{"enter":[null]}},"options":{}},{"key":"base$0$0$22","visitor":{"AssignmentExpression":{"enter":[null]},"BinaryExpression":{"enter":[null]},"_exploded":true,"_verified":true},"options":{}},{"key":"base$0$0$23","visitor":{"_exploded":{},"_verified":{},"Program":{"enter":[null]}},"options":{}},{"key":"regenerator-transform","visitor":{"_exploded":true,"_verified":true,"FunctionDeclaration":{"exit":[null]},"FunctionExpression":{"exit":[null]},"ObjectMethod":{"exit":[null]},"ArrowFunctionExpression":{"exit":[null]},"ClassMethod":{"exit":[null]}},"options":{}}],"presets":[],"compact":false,"ast":true,"babelrc":false,"sourceFileName":"imports/plugins/core/orders/client/components/invoice.js","filename":"imports/plugins/core/orders/client/components/invoice.js","sourceMaps":true,"envName":"development","cwd":"/Users/estebandev/test-knowledge","passPerPreset":false,"parserOpts":{"sourceType":"module","sourceFileName":"imports/plugins/core/orders/client/components/invoice.js","plugins":["dynamicImport","classProperties","jsx","jsx","flow","asyncGenerators","objectRestSpread","objectRestSpread","flow","asyncGenerators"]},"generatorOpts":{"filename":"imports/plugins/core/orders/client/components/invoice.js","comments":true,"compact":false,"sourceMaps":true,"sourceFileName":"imports/plugins/core/orders/client/components/invoice.js"}},"code":"var _assertThisInitialized2 = _interopRequireDefault(require(\"@babel/runtime/helpers/assertThisInitialized\"));\n\nvar _inheritsLoose2 = _interopRequireDefault(require(\"@babel/runtime/helpers/inheritsLoose\"));\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { \"default\": obj }; }\n\nvar module1 = module;\nvar React, Component;\nmodule1.watch(require(\"react\"), {\n  \"default\": function (v) {\n    React = v;\n  },\n  Component: function (v) {\n    Component = v;\n  }\n}, 0);\nvar PropTypes;\nmodule1.watch(require(\"prop-types\"), {\n  \"default\": function (v) {\n    PropTypes = v;\n  }\n}, 1);\nvar formatPriceString;\nmodule1.watch(require(\"../../../../../../client/api\"), {\n  formatPriceString: function (v) {\n    formatPriceString = v;\n  }\n}, 2);\nvar Components, registerComponent, withMoment;\nmodule1.watch(require(\"../../../components/lib\"), {\n  Components: function (v) {\n    Components = v;\n  },\n  registerComponent: function (v) {\n    registerComponent = v;\n  },\n  withMoment: function (v) {\n    withMoment = v;\n  }\n}, 3);\nvar LineItems;\nmodule1.watch(require(\"./lineItems\"), {\n  \"default\": function (v) {\n    LineItems = v;\n  }\n}, 4);\nvar InvoiceActions;\nmodule1.watch(require(\"./invoiceActions\"), {\n  \"default\": function (v) {\n    InvoiceActions = v;\n  }\n}, 5);\n\n/**\n * @file Invoice is a React Component for displaying the `invoice` section on the orders sideview\n * @module Invoice\n * @extends Components\n */\nvar Invoice =\n/*#__PURE__*/\nfunction (_Component) {\n  (0, _inheritsLoose2.default)(Invoice, _Component);\n\n  function Invoice() {\n    var _temp, _this;\n\n    for (var _len = arguments.length, args = new Array(_len), _key = 0; _key < _len; _key++) {\n      args[_key] = arguments[_key];\n    }\n\n    return (_temp = _this = _Component.call.apply(_Component, [this].concat(args)) || this, _this.state = {\n      isOpen: false\n      /**\n        * @name formatDate()\n        * @method\n        * @summary Formats dates\n        * @param {Number} context - the date to be formatted\n        * @param {String} block - the preferred format\n        * @returns {String} formatted date\n        */\n\n    }, _this.handleClick = function (event) {\n      event.preventDefault();\n\n      _this.setState({\n        isOpen: true\n      });\n    }, _temp) || (0, _assertThisInitialized2.default)(_this);\n  }\n\n  var _proto = Invoice.prototype;\n\n  _proto.formatDate = function () {\n    function formatDate(context, block) {\n      var moment = this.props.moment;\n      var dateFormat = block || \"MMM DD, YYYY hh:mm:ss A\";\n      return moment && moment(context).format(dateFormat) || context.toLocaleString();\n    }\n\n    return formatDate;\n  }();\n  /**\n    * @name handleClick()\n    * @method\n    * @summary Handle clicking the add discount link\n    * @param {Event} event - the event that fired\n    * @returns {null} null\n    */\n\n\n  /**\n    * @name renderDiscountForm()\n    * @method\n    * @summary Displays the discount form\n    * @returns {null} null\n    */\n  _proto.renderDiscountForm = function () {\n    function renderDiscountForm() {\n      return React.createElement(\"div\", null, this.state.isOpen && React.createElement(\"div\", null, React.createElement(\"hr\", null), React.createElement(Components.DiscountList, {\n        id: this.props.order._id,\n        collection: \"Orders\",\n        validatedInput: true\n      }), React.createElement(\"hr\", null)));\n    }\n\n    return renderDiscountForm;\n  }();\n  /**\n    * @name renderRefundsInfo()\n    * @method\n    * @summary Displays the refund information after the order payment breakdown on the invoice\n    * @returns {null} null\n    */\n\n\n  _proto.renderRefundsInfo = function () {\n    function renderRefundsInfo() {\n      var _this2 = this;\n\n      var _props = this.props,\n          hasRefundingEnabled = _props.hasRefundingEnabled,\n          isFetching = _props.isFetching,\n          refunds = _props.refunds;\n      return React.createElement(\"div\", null, hasRefundingEnabled && isFetching && React.createElement(\"div\", {\n        className: \"form-group order-summary-form-group\"\n      }, React.createElement(\"strong\", null, \"Loading Refunds\"), React.createElement(\"div\", {\n        className: \"invoice-details\"\n      }, React.createElement(\"i\", {\n        className: \"fa fa-spinner fa-spin\"\n      }))), Array.isArray(refunds) && refunds.map(function (refund) {\n        return React.createElement(\"div\", {\n          className: \"order-summary-form-group text-danger\",\n          key: refund.created,\n          style: {\n            marginBottom: 15\n          }\n        }, React.createElement(\"strong\", null, \"Refunded on: \", _this2.formatDate(refund.created, \"MM/D/YYYY\")), React.createElement(\"div\", {\n          className: \"invoice-details\"\n        }, React.createElement(\"strong\", null, formatPriceString(refund.amount))));\n      }));\n    }\n\n    return renderRefundsInfo;\n  }();\n  /**\n    * @name renderTotal()\n    * @method\n    * @summary Displays the total payment form\n    * @returns {null} null\n    */\n\n\n  _proto.renderTotal = function () {\n    function renderTotal() {\n      return React.createElement(\"div\", {\n        className: \"order-summary-form-group\"\n      }, React.createElement(\"hr\", null), React.createElement(\"strong\", null, \"TOTAL\"), React.createElement(\"div\", {\n        className: \"invoice-details\"\n      }, React.createElement(\"strong\", null, formatPriceString(this.props.invoice.total))));\n    }\n\n    return renderTotal;\n  }();\n  /**\n    * @name renderConditionalDisplay()\n    * @method\n    * @summary Displays either refunds info or the total payment form\n    * @returns {null} null\n    */\n\n\n  _proto.renderConditionalDisplay = function () {\n    function renderConditionalDisplay() {\n      var _props2 = this.props,\n          canMakeAdjustments = _props2.canMakeAdjustments,\n          paymentCaptured = _props2.paymentCaptured;\n      return React.createElement(\"div\", null, canMakeAdjustments ? React.createElement(\"div\", null, \" \", this.renderTotal(), \" \") : React.createElement(\"span\", null, paymentCaptured ? React.createElement(\"div\", null, this.renderRefundsInfo()) : React.createElement(\"div\", null, \" \", this.renderTotal(), \" \")));\n    }\n\n    return renderConditionalDisplay;\n  }();\n  /**\n    * @name renderInvoice()\n    * @method\n    * @summary Displays the invoice form with broken down payment info\n    * @returns {null} null\n    */\n\n\n  _proto.renderInvoice = function () {\n    function renderInvoice() {\n      var _props3 = this.props,\n          invoice = _props3.invoice,\n          discounts = _props3.discounts;\n      return React.createElement(\"div\", null, React.createElement(\"div\", {\n        className: \"order-summary-form-group\"\n      }, React.createElement(\"strong\", null, React.createElement(Components.Translation, {\n        defaultValue: \"Items in order\",\n        i18nKey: \"cartSubTotals.orderItems\"\n      })), React.createElement(\"div\", {\n        className: \"invoice-details\"\n      }, invoice.totalItems)), React.createElement(\"div\", {\n        className: \"order-summary-form-group\"\n      }, React.createElement(\"strong\", null, React.createElement(Components.Translation, {\n        defaultValue: \"Subtotal\",\n        i18nKey: \"cartSubTotals.subtotal\"\n      })), React.createElement(\"div\", {\n        className: \"invoice-details\"\n      }, formatPriceString(invoice.subtotal))), React.createElement(\"div\", {\n        className: \"order-summary-form-group\"\n      }, React.createElement(\"strong\", null, React.createElement(Components.Translation, {\n        defaultValue: \"Shipping\",\n        i18nKey: \"cartSubTotals.shipping\"\n      })), React.createElement(\"div\", {\n        className: \"invoice-details\"\n      }, formatPriceString(invoice.shipping))), React.createElement(\"div\", {\n        className: \"order-summary-form-group\"\n      }, React.createElement(\"strong\", null, React.createElement(Components.Translation, {\n        defaultValue: \"Tax\",\n        i18nKey: \"cartSubTotals.tax\"\n      })), React.createElement(\"div\", {\n        className: \"invoice-details\"\n      }, formatPriceString(invoice.taxes))), discounts && React.createElement(\"div\", null, React.createElement(\"div\", {\n        className: \"order-summary-form-group\"\n      }, React.createElement(\"strong\", null, React.createElement(Components.Translation, {\n        defaultValue: \"Discount\",\n        i18nKey: \"cartSubTotals.discount\"\n      })), React.createElement(\"div\", {\n        className: \"invoice-details\"\n      }, formatPriceString(invoice.discounts))), this.renderDiscountForm()), this.renderConditionalDisplay());\n    }\n\n    return renderInvoice;\n  }();\n\n  _proto.render = function () {\n    function render() {\n      return React.createElement(Components.CardGroup, null, React.createElement(Components.Card, null, React.createElement(Components.CardHeader, {\n        actAsExpander: false,\n        i18nKeyTitle: \"admin.orderWorkflow.invoice.cardTitle\",\n        title: \"Invoice\"\n      }), React.createElement(Components.CardBody, {\n        expandable: false\n      }, React.createElement(LineItems, this.props), React.createElement(\"div\", {\n        className: \"invoice-container\"\n      }, this.renderInvoice()), React.createElement(InvoiceActions, this.props))));\n    }\n\n    return render;\n  }();\n\n  return Invoice;\n}(Component);\n\nInvoice.propTypes = {\n  canMakeAdjustments: PropTypes.bool,\n  discounts: PropTypes.bool,\n  displayMedia: PropTypes.func,\n  hasRefundingEnabled: PropTypes.bool,\n  invoice: PropTypes.object,\n  isFetching: PropTypes.bool,\n  moment: PropTypes.func,\n  order: PropTypes.object,\n  paymentCaptured: PropTypes.bool,\n  refunds: PropTypes.array\n};\nregisterComponent(\"Invoice\", Invoice, withMoment);\nmodule1.exportDefault(withMoment(Invoice));","map":{"version":3,"sources":["imports/plugins/core/orders/client/components/invoice.js"],"names":["module1","module","React","Component","watch","require","v","PropTypes","formatPriceString","Components","registerComponent","withMoment","LineItems","InvoiceActions","Invoice","state","isOpen","handleClick","event","preventDefault","setState","formatDate","context","block","moment","props","dateFormat","format","toLocaleString","renderDiscountForm","order","_id","renderRefundsInfo","hasRefundingEnabled","isFetching","refunds","Array","isArray","map","refund","created","marginBottom","amount","renderTotal","invoice","total","renderConditionalDisplay","canMakeAdjustments","paymentCaptured","renderInvoice","discounts","totalItems","subtotal","shipping","taxes","render","propTypes","bool","displayMedia","func","object","array","exportDefault"],"mappings":"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","sourcesContent":["import React, { Component } from \"react\";\nimport PropTypes from \"prop-types\";\nimport { formatPriceString } from \"/client/api\";\nimport { Components, registerComponent, withMoment } from \"@reactioncommerce/reaction-components\";\nimport LineItems from \"./lineItems\";\nimport InvoiceActions from \"./invoiceActions\";\n\n/**\n * @file Invoice is a React Component for displaying the `invoice` section on the orders sideview\n * @module Invoice\n * @extends Components\n */\n\nclass Invoice extends Component {\n  /**\n    * @name Invoice propTypes\n    * @type {propTypes}\n    * @param {Object} props - React PropTypes\n    * @property {Object} invoice - An object representing an invoice\n    * @property {Object} order - An object representing an order\n    * @property {Bool} discounts - A boolean indicating whether discounts are enabled\n    * @property {Array} refunds - An array/list of refunds\n    * @property {Bool} paymentCaptured - A boolean indicating whether payment has been captured\n    * @property {Bool} canMakeAdjustments - A boolean indicating whether adjustments could be made on total payment\n    * @property {Bool} hasRefundingEnabled - A boolean indicating whether payment supports refunds\n    * @property {Bool} isFetching - A boolean indicating whether refund list is being loaded\n    * @return {Node} React node containing component for displaying the `invoice` section on the orders sideview\n    */\n  static propTypes = {\n    canMakeAdjustments: PropTypes.bool,\n    discounts: PropTypes.bool,\n    displayMedia: PropTypes.func,\n    hasRefundingEnabled: PropTypes.bool,\n    invoice: PropTypes.object,\n    isFetching: PropTypes.bool,\n    moment: PropTypes.func,\n    order: PropTypes.object,\n    paymentCaptured: PropTypes.bool,\n    refunds: PropTypes.array\n  }\n\n  state = {\n    isOpen: false\n  }\n\n  /**\n    * @name formatDate()\n    * @method\n    * @summary Formats dates\n    * @param {Number} context - the date to be formatted\n    * @param {String} block - the preferred format\n    * @returns {String} formatted date\n    */\n  formatDate(context, block) {\n    const { moment } = this.props;\n    const dateFormat = block || \"MMM DD, YYYY hh:mm:ss A\";\n    return (moment && moment(context).format(dateFormat)) || context.toLocaleString();\n  }\n\n  /**\n    * @name handleClick()\n    * @method\n    * @summary Handle clicking the add discount link\n    * @param {Event} event - the event that fired\n    * @returns {null} null\n    */\n  handleClick = (event) => {\n    event.preventDefault();\n    this.setState({\n      isOpen: true\n    });\n  }\n\n  /**\n    * @name renderDiscountForm()\n    * @method\n    * @summary Displays the discount form\n    * @returns {null} null\n    */\n  renderDiscountForm() {\n    return (\n      <div>\n        {this.state.isOpen &&\n          <div>\n            <hr/>\n            <Components.DiscountList\n              id={this.props.order._id}\n              collection=\"Orders\"\n              validatedInput={true}\n            />\n            <hr/>\n          </div>\n        }\n      </div>\n    );\n  }\n\n  /**\n    * @name renderRefundsInfo()\n    * @method\n    * @summary Displays the refund information after the order payment breakdown on the invoice\n    * @returns {null} null\n    */\n  renderRefundsInfo() {\n    const { hasRefundingEnabled, isFetching, refunds } = this.props;\n    return (\n      <div>\n        {(hasRefundingEnabled && isFetching) &&\n          <div className=\"form-group order-summary-form-group\">\n            <strong>Loading Refunds</strong>\n            <div className=\"invoice-details\">\n              <i className=\"fa fa-spinner fa-spin\" />\n            </div>\n          </div>\n        }\n\n        {Array.isArray(refunds) && refunds.map((refund) => (\n          <div className=\"order-summary-form-group text-danger\" key={refund.created} style={{ marginBottom: 15 }}>\n            <strong>Refunded on: {this.formatDate(refund.created, \"MM/D/YYYY\")}</strong>\n            <div className=\"invoice-details\"><strong>{formatPriceString(refund.amount)}</strong></div>\n          </div>\n        ))}\n      </div>\n    );\n  }\n\n  /**\n    * @name renderTotal()\n    * @method\n    * @summary Displays the total payment form\n    * @returns {null} null\n    */\n  renderTotal() {\n    return (\n      <div className=\"order-summary-form-group\">\n        <hr/>\n        <strong>TOTAL</strong>\n        <div className=\"invoice-details\">\n          <strong>{formatPriceString(this.props.invoice.total)}</strong>\n        </div>\n      </div>\n    );\n  }\n\n  /**\n    * @name renderConditionalDisplay()\n    * @method\n    * @summary Displays either refunds info or the total payment form\n    * @returns {null} null\n    */\n  renderConditionalDisplay() {\n    const { canMakeAdjustments, paymentCaptured } = this.props;\n    return (\n      <div>\n        {canMakeAdjustments ?\n          <div> {this.renderTotal()} </div> :\n          <span>\n            {paymentCaptured ?\n              <div>\n                {this.renderRefundsInfo()}\n              </div>\n              :\n              <div> {this.renderTotal()} </div>\n            }\n          </span>\n        }\n      </div>\n    );\n  }\n\n  /**\n    * @name renderInvoice()\n    * @method\n    * @summary Displays the invoice form with broken down payment info\n    * @returns {null} null\n    */\n  renderInvoice() {\n    const { invoice, discounts } = this.props;\n\n    return (\n      <div>\n        <div className=\"order-summary-form-group\">\n          <strong><Components.Translation defaultValue=\"Items in order\" i18nKey=\"cartSubTotals.orderItems\" /></strong>\n          <div className=\"invoice-details\">\n            {invoice.totalItems}\n          </div>\n        </div>\n\n        <div className=\"order-summary-form-group\">\n          <strong><Components.Translation defaultValue=\"Subtotal\" i18nKey=\"cartSubTotals.subtotal\"/></strong>\n          <div className=\"invoice-details\">\n            {formatPriceString(invoice.subtotal)}\n          </div>\n        </div>\n\n        <div className=\"order-summary-form-group\">\n          <strong><Components.Translation defaultValue=\"Shipping\" i18nKey=\"cartSubTotals.shipping\"/></strong>\n          <div className=\"invoice-details\">\n            {formatPriceString(invoice.shipping)}\n          </div>\n        </div>\n\n        <div className=\"order-summary-form-group\">\n          <strong><Components.Translation defaultValue=\"Tax\" i18nKey=\"cartSubTotals.tax\"/></strong>\n          <div className=\"invoice-details\">\n            {formatPriceString(invoice.taxes)}\n          </div>\n        </div>\n\n        {discounts &&\n          <div>\n            <div className=\"order-summary-form-group\">\n              <strong><Components.Translation defaultValue=\"Discount\" i18nKey=\"cartSubTotals.discount\"/></strong>\n              <div className=\"invoice-details\">\n                {formatPriceString(invoice.discounts)}\n              </div>\n            </div>\n            {this.renderDiscountForm()}\n          </div>\n        }\n        {this.renderConditionalDisplay()}\n      </div>\n    );\n  }\n\n  render() {\n    return (\n      <Components.CardGroup>\n        <Components.Card>\n          <Components.CardHeader\n            actAsExpander={false}\n            i18nKeyTitle=\"admin.orderWorkflow.invoice.cardTitle\"\n            title=\"Invoice\"\n          />\n          <Components.CardBody expandable={false}>\n            <LineItems {...this.props} />\n\n            <div className=\"invoice-container\">\n              {this.renderInvoice()}\n            </div>\n\n            <InvoiceActions {...this.props}/>\n          </Components.CardBody>\n        </Components.Card>\n      </Components.CardGroup>\n    );\n  }\n}\n\nregisterComponent(\"Invoice\", Invoice, withMoment);\n\nexport default withMoment(Invoice);\n"]},"sourceType":"script","hash":"92c2c324ab50c0540089f3c03ed86853a756f983"}
