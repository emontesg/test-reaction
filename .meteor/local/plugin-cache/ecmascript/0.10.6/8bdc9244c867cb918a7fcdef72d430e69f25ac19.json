{"metadata":{},"options":{"plugins":[{"key":"base$0$0","visitor":{"Program":{"enter":[null]},"_exploded":true,"_verified":true},"options":{"generateLetDeclarations":true,"enforceStrictMode":false}},{"key":"transform-meteor-dynamic-import","visitor":{"_exploded":{},"_verified":{},"CallExpression":{"enter":[null]}},"options":{}},{"key":"base$0$2","visitor":{"CallExpression":{"enter":[null]},"BinaryExpression":{"enter":[null]},"MemberExpression":{"enter":[null],"exit":[null]},"_exploded":true,"_verified":true,"Identifier":{"enter":[null]},"JSXIdentifier":{"enter":[null]}},"options":{"polyfill":false,"useBuiltIns":false}},{"key":"base$0$3","visitor":{"_exploded":{},"_verified":{},"ClassDeclaration":{"enter":[null]},"ClassExpression":{"enter":[null]}},"options":{"loose":true}},{"key":"base$0$4","visitor":{"FunctionExpression":{"exit":[null]},"_exploded":true,"_verified":true},"options":{}},{"key":"base$0$5","visitor":{"ForInStatement":{"enter":[null]},"_exploded":true,"_verified":true},"options":{}},{"key":"base$0$6","visitor":{"Program":{"exit":[null]},"_exploded":true,"_verified":true},"options":{"allowTopLevelThis":true,"strictMode":false,"loose":true}},{"key":"base$0$1$0","visitor":{"_exploded":{},"_verified":{},"JSXNamespacedName":{"enter":[null]},"JSXElement":{"exit":[null]},"JSXFragment":{"exit":[null]},"Program":{"enter":[null],"exit":[null]},"JSXAttribute":{"enter":[null]}},"options":{"pragma":"React.createElement","pragmaFrag":"React.Fragment","throwIfNamespace":true,"useBuiltIns":false}},{"key":"base$0$1$1","visitor":{"_exploded":true,"_verified":true},"options":{}},{"key":"base$0$1$2","visitor":{"ExportDefaultDeclaration":{"enter":[null]},"CallExpression":{"enter":[null]},"_exploded":true,"_verified":true},"options":{}},{"key":"base$0$0$0","visitor":{"_exploded":true,"_verified":true},"options":{}},{"key":"base$0$0$1","visitor":{"_exploded":true,"_verified":true},"options":{}},{"key":"base$0$0$2","visitor":{"ArrowFunctionExpression":{"enter":[null]},"_exploded":true,"_verified":true},"options":{}},{"key":"base$0$0$3","visitor":{"BlockStatement":{"enter":[null]},"SwitchCase":{"enter":[null]},"_exploded":true,"_verified":true},"options":{}},{"key":"base$0$0$4","visitor":{"VariableDeclaration":{"enter":[null]},"CatchClause":{"enter":[null]},"_exploded":true,"BlockStatement":{"enter":[null]},"SwitchStatement":{"enter":[null]},"Program":{"enter":[null]},"_verified":true,"DoWhileStatement":{"enter":[null]},"ForInStatement":{"enter":[null]},"ForStatement":{"enter":[null]},"WhileStatement":{"enter":[null]},"ForOfStatement":{"enter":[null]}},"options":{}},{"key":"base$0$0$5","visitor":{"ExportDefaultDeclaration":{"enter":[null]},"ClassDeclaration":{"enter":[null]},"ClassExpression":{"enter":[null]},"_exploded":true,"_verified":true},"options":{"loose":true}},{"key":"base$0$0$6","visitor":{"ObjectExpression":{"exit":[null]},"_exploded":true,"_verified":true},"options":{"loose":true}},{"key":"base$0$0$7","visitor":{"ExportNamedDeclaration":{"enter":[null]},"CatchClause":{"enter":[null]},"AssignmentExpression":{"enter":[null]},"VariableDeclaration":{"enter":[null]},"_exploded":true,"_verified":true,"ForInStatement":{"enter":[null]},"ForOfStatement":{"enter":[null]}},"options":{}},{"key":"base$0$0$8","visitor":{"ForOfStatement":{"enter":[null]},"_exploded":true,"_verified":true},"options":{"loose":true}},{"key":"base$0$0$9","visitor":{"NumericLiteral":{"enter":[null]},"StringLiteral":{"enter":[null]},"_exploded":true,"_verified":true},"options":{}},{"key":"base$0$0$10","visitor":{"ObjectExpression":{"enter":[null]},"_exploded":true,"_verified":true},"options":{}},{"key":"base$0$0$11","visitor":{"_exploded":true,"_verified":true,"FunctionDeclaration":{"enter":[null]},"FunctionExpression":{"enter":[null]},"ObjectMethod":{"enter":[null]},"ArrowFunctionExpression":{"enter":[null]},"ClassMethod":{"enter":[null]}},"options":{}},{"key":"base$0$0$12","visitor":{"ObjectMethod":{"enter":[null]},"ObjectProperty":{"enter":[null]},"_exploded":true,"_verified":true},"options":{}},{"key":"base$0$0$13","visitor":{"ArrayExpression":{"enter":[null]},"CallExpression":{"enter":[null]},"NewExpression":{"enter":[null]},"_exploded":true,"_verified":true},"options":{}},{"key":"base$0$0$14","visitor":{"RegExpLiteral":{"enter":[null]},"_exploded":true,"_verified":true},"options":{}},{"key":"base$0$0$15","visitor":{"TaggedTemplateExpression":{"enter":[null]},"TemplateLiteral":{"enter":[null]},"_exploded":true,"_verified":true},"options":{"loose":true}},{"key":"base$0$0$16","visitor":{"UnaryExpression":{"enter":[null]},"_exploded":true,"_verified":true,"BlockStatement":{"enter":[null]},"CatchClause":{"enter":[null]},"DoWhileStatement":{"enter":[null]},"ForInStatement":{"enter":[null]},"ForStatement":{"enter":[null]},"FunctionDeclaration":{"enter":[null]},"FunctionExpression":{"enter":[null]},"Program":{"enter":[null]},"ObjectMethod":{"enter":[null]},"SwitchStatement":{"enter":[null]},"WhileStatement":{"enter":[null]},"ArrowFunctionExpression":{"enter":[null]},"ClassDeclaration":{"enter":[null]},"ClassExpression":{"enter":[null]},"ForOfStatement":{"enter":[null]},"ClassMethod":{"enter":[null]}},"options":{}},{"key":"base$0$0$17","visitor":{"RegExpLiteral":{"enter":[null]},"_exploded":true,"_verified":true},"options":{}},{"key":"base$0$0$18","visitor":{"_exploded":true,"_verified":true},"options":{}},{"key":"base$0$0$19","visitor":{"_exploded":{},"_verified":{},"VariableDeclarator":{"enter":[null]},"ExportNamedDeclaration":{"enter":[null]},"CatchClause":{"enter":[null]},"AssignmentExpression":{"enter":[null]},"ObjectExpression":{"enter":[null]},"FunctionDeclaration":{"enter":[null]},"FunctionExpression":{"enter":[null]},"ObjectMethod":{"enter":[null]},"ArrowFunctionExpression":{"enter":[null]},"ClassMethod":{"enter":[null]},"ForInStatement":{"enter":[null]},"ForOfStatement":{"enter":[null]}},"options":{}},{"key":"base$0$0$20","visitor":{"ObjectProperty":{"exit":[null]},"_exploded":true,"_verified":true},"options":{}},{"key":"base$0$0$21","visitor":{"_exploded":{},"_verified":{},"Program":{"enter":[null]},"ImportDeclaration":{"enter":[null,null]},"ClassProperty":{"enter":[null]},"AssignmentPattern":{"enter":[null]},"TypeCastExpression":{"enter":[null,null]},"ImportSpecifier":{"enter":[null]},"ClassDeclaration":{"enter":[null]},"ClassExpression":{"enter":[null]},"FunctionDeclaration":{"enter":[null]},"FunctionExpression":{"enter":[null]},"ObjectMethod":{"enter":[null]},"ArrowFunctionExpression":{"enter":[null]},"ClassMethod":{"enter":[null]},"AnyTypeAnnotation":{"enter":[null]},"ArrayTypeAnnotation":{"enter":[null]},"BooleanTypeAnnotation":{"enter":[null]},"BooleanLiteralTypeAnnotation":{"enter":[null]},"NullLiteralTypeAnnotation":{"enter":[null]},"ClassImplements":{"enter":[null]},"DeclareClass":{"enter":[null]},"DeclareFunction":{"enter":[null]},"DeclareInterface":{"enter":[null]},"DeclareModule":{"enter":[null]},"DeclareModuleExports":{"enter":[null]},"DeclareTypeAlias":{"enter":[null]},"DeclareOpaqueType":{"enter":[null]},"DeclareVariable":{"enter":[null]},"DeclareExportDeclaration":{"enter":[null]},"DeclareExportAllDeclaration":{"enter":[null]},"DeclaredPredicate":{"enter":[null]},"ExistsTypeAnnotation":{"enter":[null]},"FunctionTypeAnnotation":{"enter":[null]},"FunctionTypeParam":{"enter":[null]},"GenericTypeAnnotation":{"enter":[null]},"InferredPredicate":{"enter":[null]},"InterfaceExtends":{"enter":[null]},"InterfaceDeclaration":{"enter":[null]},"IntersectionTypeAnnotation":{"enter":[null]},"MixedTypeAnnotation":{"enter":[null]},"EmptyTypeAnnotation":{"enter":[null]},"NullableTypeAnnotation":{"enter":[null]},"NumberLiteralTypeAnnotation":{"enter":[null]},"NumberTypeAnnotation":{"enter":[null]},"ObjectTypeAnnotation":{"enter":[null]},"ObjectTypeCallProperty":{"enter":[null]},"ObjectTypeIndexer":{"enter":[null]},"ObjectTypeProperty":{"enter":[null]},"ObjectTypeSpreadProperty":{"enter":[null]},"OpaqueType":{"enter":[null]},"QualifiedTypeIdentifier":{"enter":[null]},"StringLiteralTypeAnnotation":{"enter":[null]},"StringTypeAnnotation":{"enter":[null]},"ThisTypeAnnotation":{"enter":[null]},"TupleTypeAnnotation":{"enter":[null]},"TypeofTypeAnnotation":{"enter":[null]},"TypeAlias":{"enter":[null]},"TypeAnnotation":{"enter":[null]},"TypeParameter":{"enter":[null]},"TypeParameterDeclaration":{"enter":[null]},"TypeParameterInstantiation":{"enter":[null]},"UnionTypeAnnotation":{"enter":[null]},"Variance":{"enter":[null]},"VoidTypeAnnotation":{"enter":[null]},"ExportAllDeclaration":{"enter":[null]},"ExportDefaultDeclaration":{"enter":[null]},"ExportNamedDeclaration":{"enter":[null]}},"options":{}},{"key":"base$0$0$22","visitor":{"AssignmentExpression":{"enter":[null]},"BinaryExpression":{"enter":[null]},"_exploded":true,"_verified":true},"options":{}},{"key":"base$0$0$23","visitor":{"_exploded":{},"_verified":{},"Program":{"enter":[null]}},"options":{}},{"key":"regenerator-transform","visitor":{"_exploded":true,"_verified":true,"FunctionDeclaration":{"exit":[null]},"FunctionExpression":{"exit":[null]},"ObjectMethod":{"exit":[null]},"ArrowFunctionExpression":{"exit":[null]},"ClassMethod":{"exit":[null]}},"options":{}}],"presets":[],"compact":false,"ast":true,"babelrc":false,"sourceFileName":"imports/plugins/core/taxes/client/settings/custom.js","filename":"imports/plugins/core/taxes/client/settings/custom.js","sourceMaps":true,"envName":"development","cwd":"/Users/estebandev/test-knowledge","passPerPreset":false,"parserOpts":{"sourceType":"module","sourceFileName":"imports/plugins/core/taxes/client/settings/custom.js","plugins":["dynamicImport","classProperties","jsx","jsx","flow","asyncGenerators","objectRestSpread","objectRestSpread","flow","asyncGenerators"]},"generatorOpts":{"filename":"imports/plugins/core/taxes/client/settings/custom.js","comments":true,"compact":false,"sourceMaps":true,"sourceFileName":"imports/plugins/core/taxes/client/settings/custom.js"}},"code":"var _typeof2 = _interopRequireDefault(require(\"@babel/runtime/helpers/typeof\"));\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { \"default\": obj }; }\n\nvar Meteor;\nmodule.watch(require(\"meteor/meteor\"), {\n  Meteor: function (v) {\n    Meteor = v;\n  }\n}, 0);\nvar $;\nmodule.watch(require(\"meteor/jquery\"), {\n  $: function (v) {\n    $ = v;\n  }\n}, 1);\nvar Template;\nmodule.watch(require(\"meteor/templating\"), {\n  Template: function (v) {\n    Template = v;\n  }\n}, 2);\nvar ReactiveDict;\nmodule.watch(require(\"meteor/reactive-dict\"), {\n  ReactiveDict: function (v) {\n    ReactiveDict = v;\n  }\n}, 3);\nvar AutoForm;\nmodule.watch(require(\"meteor/aldeed:autoform\"), {\n  AutoForm: function (v) {\n    AutoForm = v;\n  }\n}, 4);\nvar Shops;\nmodule.watch(require(\"../../../../../../lib/collections\"), {\n  Shops: function (v) {\n    Shops = v;\n  }\n}, 5);\nvar Countries;\nmodule.watch(require(\"../../../../../../client/collections\"), {\n  Countries: function (v) {\n    Countries = v;\n  }\n}, 6);\nvar Taxes, TaxCodes;\nmodule.watch(require(\"../../lib/collections\"), {\n  Taxes: function (v) {\n    Taxes = v;\n  },\n  TaxCodes: function (v) {\n    TaxCodes = v;\n  }\n}, 7);\nvar i18next;\nmodule.watch(require(\"../../../../../../client/api\"), {\n  i18next: function (v) {\n    i18next = v;\n  }\n}, 8);\nvar TaxSchema;\nmodule.watch(require(\"../../lib/collections/schemas\"), {\n  Taxes: function (v) {\n    TaxSchema = v;\n  }\n}, 9);\nvar IconButton, Loading, SortableTable;\nmodule.watch(require(\"../../../ui/client/components\"), {\n  IconButton: function (v) {\n    IconButton = v;\n  },\n  Loading: function (v) {\n    Loading = v;\n  },\n  SortableTable: function (v) {\n    SortableTable = v;\n  }\n}, 10);\n\n/* eslint no-shadow: [\"error\", { \"allow\": [\"options\"] }] */\n\n/* eslint no-unused-vars: [\"error\", { \"argsIgnorePattern\": \"[oO]ptions\" }] */\nTemplate.customTaxRates.onCreated(function () {\n  var _this = this;\n\n  this.autorun(function () {\n    _this.subscribe(\"Taxes\");\n  });\n  this.state = new ReactiveDict();\n  this.state.setDefault({\n    isEditing: false,\n    editingId: null\n  });\n});\nTemplate.customTaxRates.helpers({\n  editButton: function () {\n    var instance = Template.instance();\n    var state = instance.state;\n    var isEditing = state.equals(\"isEditing\", true);\n    var editingId = state.get(\"editingId\"); // toggle edit state\n\n    if (!isEditing) {\n      editingId = null;\n    } // return icon\n\n\n    return {\n      component: IconButton,\n      icon: \"fa fa-plus\",\n      onIcon: \"fa fa-pencil\",\n      toggle: true,\n      toggleOn: isEditing,\n      style: {\n        position: \"relative\",\n        top: \"-25px\",\n        right: \"8px\"\n      },\n      onClick: function () {\n        // remove active rows from grid\n        $(\".tax-grid-row\").removeClass(\"active\");\n        return state.set({\n          isEditing: !isEditing,\n          editingId: editingId\n        });\n      }\n    };\n  },\n  taxGrid: function () {\n    var filteredFields = [\"taxCode\", \"rate\", \"country\", \"region\", \"postal\"];\n    var noDataMessage = i18next.t(\"admin.taxSettings.noCustomTaxRatesFound\");\n    var instance = Template.instance(); //\n    // helper to get and select row from griddle\n    // into blaze for to select tax row for editing\n    //\n\n    function editRow(options) {\n      var currentId = instance.state.get(\"editingId\"); // isEditing is tax rate object\n\n      instance.state.set(\"isEditing\", options.props.data);\n      instance.state.set(\"editingId\", options.props.data._id); // toggle edit mode clicking on same row\n\n      if (currentId === options.props.data._id) {\n        instance.state.set(\"isEditing\", null);\n        instance.state.set(\"editingId\", null);\n      }\n    } //\n    // helper adds a class to every grid row\n    //\n\n\n    var customRowMetaData = {\n      bodyCssClassName: function () {\n        return \"tax-grid-row\";\n      }\n    }; // add i18n handling to headers\n\n    var customColumnMetadata = [];\n    filteredFields.forEach(function (field) {\n      var columnMeta = {\n        accessor: field,\n        Header: i18next.t(\"admin.taxGrid.\" + field)\n      };\n      customColumnMetadata.push(columnMeta);\n    }); // return tax Grid\n\n    return {\n      component: SortableTable,\n      publication: \"Taxes\",\n      collection: Taxes,\n      matchingResultsCount: \"taxes-count\",\n      showFilter: true,\n      rowMetadata: customRowMetaData,\n      filteredFields: filteredFields,\n      columns: filteredFields,\n      noDataMessage: noDataMessage,\n      onRowClick: editRow,\n      columnMetadata: customColumnMetadata,\n      externalLoadingComponent: Loading\n    };\n  },\n  instance: function () {\n    var instance = Template.instance();\n    return instance;\n  },\n  // schema for forms\n  taxSchema: function () {\n    return TaxSchema;\n  },\n  // list of countries for tax input\n  countryOptions: function () {\n    return Countries.find().fetch();\n  },\n  statesForCountry: function () {\n    var shop = Shops.findOne();\n    var selectedCountry = AutoForm.getFieldValue(\"country\");\n\n    if (!selectedCountry) {\n      return false;\n    }\n\n    if ((shop !== null ? shop.locales.countries[selectedCountry].states : undefined) === null) {\n      return false;\n    }\n\n    var options = [];\n\n    if (shop && (0, _typeof2.default)(shop.locales.countries[selectedCountry].states) === \"object\") {\n      for (var state in meteorBabelHelpers.sanitizeForInObject(shop.locales.countries[selectedCountry].states)) {\n        if ({}.hasOwnProperty.call(shop.locales.countries[selectedCountry].states, state)) {\n          var locale = shop.locales.countries[selectedCountry].states[state];\n          options.push({\n            label: locale.name,\n            value: state\n          });\n        }\n      }\n    }\n\n    return options;\n  },\n  taxRate: function () {\n    var shop = Shops.findOne();\n    var instance = Template.instance();\n    var id = instance.state.get(\"editingId\");\n    var tax = Taxes.findOne(id) || {}; // enforce a default country that makes sense.\n\n    if (!tax.country) {\n      if (shop && (0, _typeof2.default)(shop.addressBook) === \"object\") {\n        tax.country = shop.addressBook[0].country;\n      }\n    }\n\n    return tax;\n  },\n  taxCodes: function () {\n    var instance = Template.instance();\n\n    if (instance.subscriptionsReady()) {\n      var taxCodes = TaxCodes.find().fetch();\n      var options = [{\n        label: i18next.t(\"admin.taxSettings.taxable\"),\n        value: \"RC_TAX\"\n      }, {\n        label: i18next.t(\"admin.taxSettings.nottaxable\"),\n        value: \"RC_NOTAX\"\n      }];\n\n      for (var _iterator = taxCodes, _isArray = Array.isArray(_iterator), _i = 0, _iterator = _isArray ? _iterator : _iterator[Symbol.iterator]();;) {\n        var _ref;\n\n        if (_isArray) {\n          if (_i >= _iterator.length) break;\n          _ref = _iterator[_i++];\n        } else {\n          _i = _iterator.next();\n          if (_i.done) break;\n          _ref = _i.value;\n        }\n\n        var _taxCode = _ref;\n        options.push({\n          label: i18next.t(_taxCode.label),\n          value: _taxCode.id\n        });\n      }\n\n      return options;\n    }\n\n    return [];\n  }\n}); //\n// on submit lets clear the form state\n//\n\nTemplate.customTaxRates.events({\n  \"submit #customTaxRates-update-form\": function () {\n    var instance = Template.instance();\n    instance.state.set({\n      isEditing: false,\n      editingId: null\n    });\n  },\n  \"submit #customTaxRates-insert-form\": function () {\n    var instance = Template.instance();\n    instance.state.set({\n      isEditing: true,\n      editingId: null\n    });\n  },\n  \"click .cancel, .tax-grid-row .active\": function () {\n    var instance = Template.instance(); // remove active rows from grid\n\n    instance.state.set({\n      isEditing: false,\n      editingId: null\n    }); // ugly hack\n\n    $(\".tax-grid-row\").removeClass(\"active\");\n  },\n  \"click .delete\": function () {\n    var confirmTitle = i18next.t(\"admin.taxSettings.confirmRateDelete\");\n    var confirmButtonText = i18next.t(\"app.delete\");\n    var instance = Template.instance();\n    var id = instance.state.get(\"editingId\"); // confirm delete\n\n    Alerts.alert({\n      title: confirmTitle,\n      type: \"warning\",\n      showCancelButton: true,\n      confirmButtonText: confirmButtonText\n    }, function (isConfirm) {\n      if (isConfirm) {\n        if (id) {\n          Meteor.call(\"taxes/deleteRate\", id);\n          instance.state.set({\n            isEditing: false,\n            editingId: null\n          });\n        }\n      }\n    });\n  },\n  \"click .tax-grid-row\": function (event) {\n    // toggle all rows off, then add our active row\n    $(\".tax-grid-row\").removeClass(\"active\");\n    Template.instance().$(event.currentTarget).addClass(\"active\");\n  }\n}); //\n// Hooks for update and insert forms\n//\n\nAutoForm.hooks({\n  \"customTaxRates-update-form\": {\n    onSuccess: function () {\n      return Alerts.toast(i18next.t(\"admin.taxSettings.shopCustomTaxRatesSaved\"), \"success\");\n    },\n    onError: function (operation, error) {\n      return Alerts.toast(i18next.t(\"admin.taxSettings.shopCustomTaxRatesFailed\") + \" \" + error, \"error\");\n    }\n  },\n  \"customTaxRates-insert-form\": {\n    onSuccess: function () {\n      return Alerts.toast(i18next.t(\"admin.taxSettings.shopCustomTaxRatesSaved\"), \"success\");\n    },\n    onError: function (operation, error) {\n      return Alerts.toast(i18next.t(\"admin.taxSettings.shopCustomTaxRatesFailed\") + \" \" + error, \"error\");\n    }\n  }\n});","map":{"version":3,"sources":["imports/plugins/core/taxes/client/settings/custom.js"],"names":["Meteor","module","watch","require","v","$","Template","ReactiveDict","AutoForm","Shops","Countries","Taxes","TaxCodes","i18next","TaxSchema","IconButton","Loading","SortableTable","customTaxRates","onCreated","autorun","subscribe","state","setDefault","isEditing","editingId","helpers","editButton","instance","equals","get","component","icon","onIcon","toggle","toggleOn","style","position","top","right","onClick","removeClass","set","taxGrid","filteredFields","noDataMessage","t","editRow","options","currentId","props","data","_id","customRowMetaData","bodyCssClassName","customColumnMetadata","forEach","field","columnMeta","accessor","Header","push","publication","collection","matchingResultsCount","showFilter","rowMetadata","columns","onRowClick","columnMetadata","externalLoadingComponent","taxSchema","countryOptions","find","fetch","statesForCountry","shop","findOne","selectedCountry","getFieldValue","locales","countries","states","undefined","hasOwnProperty","call","locale","label","name","value","taxRate","id","tax","country","addressBook","taxCodes","subscriptionsReady","taxCode","events","confirmTitle","confirmButtonText","Alerts","alert","title","type","showCancelButton","isConfirm","event","currentTarget","addClass","hooks","onSuccess","toast","onError","operation","error"],"mappings":"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","sourcesContent":["import { Meteor } from \"meteor/meteor\";\nimport { $ } from \"meteor/jquery\";\nimport { Template } from \"meteor/templating\";\nimport { ReactiveDict } from \"meteor/reactive-dict\";\nimport { AutoForm } from \"meteor/aldeed:autoform\";\nimport { Shops } from \"/lib/collections\";\nimport { Countries } from \"/client/collections\";\nimport { Taxes, TaxCodes } from \"../../lib/collections\";\nimport { i18next } from \"/client/api\";\nimport { Taxes as TaxSchema } from \"../../lib/collections/schemas\";\nimport { IconButton, Loading, SortableTable } from \"/imports/plugins/core/ui/client/components\";\n\n/* eslint no-shadow: [\"error\", { \"allow\": [\"options\"] }] */\n/* eslint no-unused-vars: [\"error\", { \"argsIgnorePattern\": \"[oO]ptions\" }] */\n\nTemplate.customTaxRates.onCreated(function () {\n  this.autorun(() => {\n    this.subscribe(\"Taxes\");\n  });\n\n  this.state = new ReactiveDict();\n  this.state.setDefault({\n    isEditing: false,\n    editingId: null\n  });\n});\n\nTemplate.customTaxRates.helpers({\n  editButton() {\n    const instance = Template.instance();\n    const { state } = instance;\n    const isEditing = state.equals(\"isEditing\", true);\n    let editingId = state.get(\"editingId\");\n    // toggle edit state\n    if (!isEditing) {\n      editingId = null;\n    }\n    // return icon\n    return {\n      component: IconButton,\n      icon: \"fa fa-plus\",\n      onIcon: \"fa fa-pencil\",\n      toggle: true,\n      toggleOn: isEditing,\n      style: {\n        position: \"relative\",\n        top: \"-25px\",\n        right: \"8px\"\n      },\n      onClick() {\n        // remove active rows from grid\n        $(\".tax-grid-row\").removeClass(\"active\");\n        return state.set({\n          isEditing: !isEditing,\n          editingId\n        });\n      }\n    };\n  },\n  taxGrid() {\n    const filteredFields = [\"taxCode\", \"rate\", \"country\", \"region\", \"postal\"];\n    const noDataMessage = i18next.t(\"admin.taxSettings.noCustomTaxRatesFound\");\n    const instance = Template.instance();\n\n    //\n    // helper to get and select row from griddle\n    // into blaze for to select tax row for editing\n    //\n    function editRow(options) {\n      const currentId = instance.state.get(\"editingId\");\n      // isEditing is tax rate object\n      instance.state.set(\"isEditing\", options.props.data);\n      instance.state.set(\"editingId\", options.props.data._id);\n      // toggle edit mode clicking on same row\n      if (currentId === options.props.data._id) {\n        instance.state.set(\"isEditing\", null);\n        instance.state.set(\"editingId\", null);\n      }\n    }\n\n    //\n    // helper adds a class to every grid row\n    //\n    const customRowMetaData = {\n      bodyCssClassName: () => \"tax-grid-row\"\n    };\n\n    // add i18n handling to headers\n    const customColumnMetadata = [];\n    filteredFields.forEach((field) => {\n      const columnMeta = {\n        accessor: field,\n        Header: i18next.t(`admin.taxGrid.${field}`)\n      };\n      customColumnMetadata.push(columnMeta);\n    });\n\n    // return tax Grid\n    return {\n      component: SortableTable,\n      publication: \"Taxes\",\n      collection: Taxes,\n      matchingResultsCount: \"taxes-count\",\n      showFilter: true,\n      rowMetadata: customRowMetaData,\n      filteredFields,\n      columns: filteredFields,\n      noDataMessage,\n      onRowClick: editRow,\n      columnMetadata: customColumnMetadata,\n      externalLoadingComponent: Loading\n    };\n  },\n\n  instance() {\n    const instance = Template.instance();\n    return instance;\n  },\n  // schema for forms\n  taxSchema() {\n    return TaxSchema;\n  },\n  // list of countries for tax input\n  countryOptions() {\n    return Countries.find().fetch();\n  },\n  statesForCountry() {\n    const shop = Shops.findOne();\n    const selectedCountry = AutoForm.getFieldValue(\"country\");\n    if (!selectedCountry) {\n      return false;\n    }\n    if ((shop !== null ? shop.locales.countries[selectedCountry].states : undefined) === null) {\n      return false;\n    }\n    const options = [];\n    if (shop && typeof shop.locales.countries[selectedCountry].states === \"object\") {\n      for (const state in shop.locales.countries[selectedCountry].states) {\n        if ({}.hasOwnProperty.call(shop.locales.countries[selectedCountry].states, state)) {\n          const locale = shop.locales.countries[selectedCountry].states[state];\n          options.push({\n            label: locale.name,\n            value: state\n          });\n        }\n      }\n    }\n    return options;\n  },\n  taxRate() {\n    const shop = Shops.findOne();\n    const instance = Template.instance();\n    const id = instance.state.get(\"editingId\");\n    const tax = Taxes.findOne(id) || {};\n    // enforce a default country that makes sense.\n    if (!tax.country) {\n      if (shop && typeof shop.addressBook === \"object\") {\n        tax.country = shop.addressBook[0].country;\n      }\n    }\n    return tax;\n  },\n  taxCodes() {\n    const instance = Template.instance();\n    if (instance.subscriptionsReady()) {\n      const taxCodes = TaxCodes.find().fetch();\n      const options = [{\n        label: i18next.t(\"admin.taxSettings.taxable\"),\n        value: \"RC_TAX\"\n      }, {\n        label: i18next.t(\"admin.taxSettings.nottaxable\"),\n        value: \"RC_NOTAX\"\n      }];\n\n      for (const taxCode of taxCodes) {\n        options.push({\n          label: i18next.t(taxCode.label),\n          value: taxCode.id\n        });\n      }\n      return options;\n    }\n    return [];\n  }\n});\n\n//\n// on submit lets clear the form state\n//\nTemplate.customTaxRates.events({\n  \"submit #customTaxRates-update-form\"() {\n    const instance = Template.instance();\n    instance.state.set({\n      isEditing: false,\n      editingId: null\n    });\n  },\n  \"submit #customTaxRates-insert-form\"() {\n    const instance = Template.instance();\n    instance.state.set({\n      isEditing: true,\n      editingId: null\n    });\n  },\n  \"click .cancel, .tax-grid-row .active\"() {\n    const instance = Template.instance();\n    // remove active rows from grid\n    instance.state.set({\n      isEditing: false,\n      editingId: null\n    });\n    // ugly hack\n    $(\".tax-grid-row\").removeClass(\"active\");\n  },\n  \"click .delete\"() {\n    const confirmTitle = i18next.t(\"admin.taxSettings.confirmRateDelete\");\n    const confirmButtonText = i18next.t(\"app.delete\");\n    const instance = Template.instance();\n    const id = instance.state.get(\"editingId\");\n    // confirm delete\n    Alerts.alert({\n      title: confirmTitle,\n      type: \"warning\",\n      showCancelButton: true,\n      confirmButtonText\n    }, (isConfirm) => {\n      if (isConfirm) {\n        if (id) {\n          Meteor.call(\"taxes/deleteRate\", id);\n          instance.state.set({\n            isEditing: false,\n            editingId: null\n          });\n        }\n      }\n    });\n  },\n  \"click .tax-grid-row\"(event) {\n    // toggle all rows off, then add our active row\n    $(\".tax-grid-row\").removeClass(\"active\");\n    Template.instance().$(event.currentTarget).addClass(\"active\");\n  }\n});\n\n//\n// Hooks for update and insert forms\n//\nAutoForm.hooks({\n  \"customTaxRates-update-form\": {\n    onSuccess() {\n      return Alerts.toast(i18next.t(\"admin.taxSettings.shopCustomTaxRatesSaved\"), \"success\");\n    },\n    onError(operation, error) {\n      return Alerts.toast(`${i18next.t(\"admin.taxSettings.shopCustomTaxRatesFailed\")} ${error}`, \"error\");\n    }\n  },\n  \"customTaxRates-insert-form\": {\n    onSuccess() {\n      return Alerts.toast(i18next.t(\"admin.taxSettings.shopCustomTaxRatesSaved\"), \"success\");\n    },\n    onError(operation, error) {\n      return Alerts.toast(`${i18next.t(\"admin.taxSettings.shopCustomTaxRatesFailed\")} ${error}`, \"error\");\n    }\n  }\n});\n"]},"sourceType":"script","hash":"8bdc9244c867cb918a7fcdef72d430e69f25ac19"}
