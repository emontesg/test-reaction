{"metadata":{},"options":{"plugins":[{"key":"base$1$0","visitor":{"_exploded":{},"_verified":{},"JSXNamespacedName":{"enter":[null]},"JSXElement":{"exit":[null]},"JSXFragment":{"exit":[null]},"Program":{"enter":[null],"exit":[null]},"JSXAttribute":{"enter":[null]}},"options":{"pragma":"React.createElement","pragmaFrag":"React.Fragment","throwIfNamespace":true,"useBuiltIns":false}},{"key":"base$1$1","visitor":{"_exploded":true,"_verified":true},"options":{}},{"key":"base$1$2","visitor":{"ExportDefaultDeclaration":{"enter":[null]},"CallExpression":{"enter":[null]},"_exploded":true,"_verified":true},"options":{}},{"key":"base$0$0","visitor":{"Program":{"enter":[null]},"_exploded":true,"_verified":true},"options":{"generateLetDeclarations":true,"enforceStrictMode":false}},{"key":"base$0$1","visitor":{"_exploded":true,"_verified":true},"options":{}},{"key":"base$0$2","visitor":{"_exploded":{},"_verified":{},"Program":{"enter":[null]},"ImportDeclaration":{"enter":[null,null]},"ClassProperty":{"enter":[null]},"AssignmentPattern":{"enter":[null]},"TypeCastExpression":{"enter":[null,null]},"ImportSpecifier":{"enter":[null]},"ClassDeclaration":{"enter":[null]},"ClassExpression":{"enter":[null]},"FunctionDeclaration":{"enter":[null]},"FunctionExpression":{"enter":[null]},"ObjectMethod":{"enter":[null]},"ArrowFunctionExpression":{"enter":[null]},"ClassMethod":{"enter":[null]},"AnyTypeAnnotation":{"enter":[null]},"ArrayTypeAnnotation":{"enter":[null]},"BooleanTypeAnnotation":{"enter":[null]},"BooleanLiteralTypeAnnotation":{"enter":[null]},"NullLiteralTypeAnnotation":{"enter":[null]},"ClassImplements":{"enter":[null]},"DeclareClass":{"enter":[null]},"DeclareFunction":{"enter":[null]},"DeclareInterface":{"enter":[null]},"DeclareModule":{"enter":[null]},"DeclareModuleExports":{"enter":[null]},"DeclareTypeAlias":{"enter":[null]},"DeclareOpaqueType":{"enter":[null]},"DeclareVariable":{"enter":[null]},"DeclareExportDeclaration":{"enter":[null]},"DeclareExportAllDeclaration":{"enter":[null]},"DeclaredPredicate":{"enter":[null]},"ExistsTypeAnnotation":{"enter":[null]},"FunctionTypeAnnotation":{"enter":[null]},"FunctionTypeParam":{"enter":[null]},"GenericTypeAnnotation":{"enter":[null]},"InferredPredicate":{"enter":[null]},"InterfaceExtends":{"enter":[null]},"InterfaceDeclaration":{"enter":[null]},"IntersectionTypeAnnotation":{"enter":[null]},"MixedTypeAnnotation":{"enter":[null]},"EmptyTypeAnnotation":{"enter":[null]},"NullableTypeAnnotation":{"enter":[null]},"NumberLiteralTypeAnnotation":{"enter":[null]},"NumberTypeAnnotation":{"enter":[null]},"ObjectTypeAnnotation":{"enter":[null]},"ObjectTypeCallProperty":{"enter":[null]},"ObjectTypeIndexer":{"enter":[null]},"ObjectTypeProperty":{"enter":[null]},"ObjectTypeSpreadProperty":{"enter":[null]},"OpaqueType":{"enter":[null]},"QualifiedTypeIdentifier":{"enter":[null]},"StringLiteralTypeAnnotation":{"enter":[null]},"StringTypeAnnotation":{"enter":[null]},"ThisTypeAnnotation":{"enter":[null]},"TupleTypeAnnotation":{"enter":[null]},"TypeofTypeAnnotation":{"enter":[null]},"TypeAlias":{"enter":[null]},"TypeAnnotation":{"enter":[null]},"TypeParameter":{"enter":[null]},"TypeParameterDeclaration":{"enter":[null]},"TypeParameterInstantiation":{"enter":[null]},"UnionTypeAnnotation":{"enter":[null]},"Variance":{"enter":[null]},"VoidTypeAnnotation":{"enter":[null]},"ExportAllDeclaration":{"enter":[null]},"ExportDefaultDeclaration":{"enter":[null]},"ExportNamedDeclaration":{"enter":[null]}},"options":{}},{"key":"base$0$3","visitor":{"CallExpression":{"enter":[null]},"BinaryExpression":{"enter":[null]},"MemberExpression":{"enter":[null],"exit":[null]},"_exploded":true,"_verified":true,"Identifier":{"enter":[null]},"JSXIdentifier":{"enter":[null]}},"options":{"polyfill":false,"useBuiltIns":true}},{"key":"base$0$4","visitor":{"_exploded":true,"_verified":true},"options":{}},{"key":"base$0$5","visitor":{"_exploded":{},"_verified":{},"VariableDeclarator":{"enter":[null]},"ExportNamedDeclaration":{"enter":[null]},"CatchClause":{"enter":[null]},"AssignmentExpression":{"enter":[null]},"ObjectExpression":{"enter":[null]},"FunctionDeclaration":{"enter":[null]},"FunctionExpression":{"enter":[null]},"ObjectMethod":{"enter":[null]},"ArrowFunctionExpression":{"enter":[null]},"ClassMethod":{"enter":[null]},"ForInStatement":{"enter":[null]},"ForOfStatement":{"enter":[null]}},"options":{}},{"key":"transform-meteor-async-await","visitor":{"AwaitExpression":{"enter":[null]},"_exploded":true,"_verified":true,"FunctionDeclaration":{"exit":[null]},"FunctionExpression":{"exit":[null]},"ObjectMethod":{"exit":[null]},"ArrowFunctionExpression":{"exit":[null]},"ClassMethod":{"exit":[null]}},"options":{"useNativeAsyncAwait":false}},{"key":"transform-meteor-dynamic-import","visitor":{"_exploded":{},"_verified":{},"CallExpression":{"enter":[null]}},"options":{}},{"key":"base$0$8","visitor":{"_exploded":{},"_verified":{},"Program":{"enter":[null]}},"options":{}},{"key":"base$0$9","visitor":{"Program":{"exit":[null]},"_exploded":true,"_verified":true},"options":{"allowTopLevelThis":true,"strictMode":false,"loose":true}},{"key":"base$0$10","visitor":{"_exploded":{},"_verified":{},"ClassDeclaration":{"enter":[null]},"ClassExpression":{"enter":[null]}},"options":{"loose":true}}],"compact":false,"ast":true,"babelrc":false,"sourceFileName":"server/imports/fixtures/products.js","filename":"server/imports/fixtures/products.js","sourceMaps":true,"envName":"development","cwd":"/Users/estebandev/test-knowledge","passPerPreset":false,"presets":[],"parserOpts":{"sourceType":"module","sourceFileName":"server/imports/fixtures/products.js","plugins":["jsx","jsx","flow","flow","objectRestSpread","objectRestSpread","dynamicImport","asyncGenerators","classProperties"]},"generatorOpts":{"filename":"server/imports/fixtures/products.js","comments":true,"compact":false,"sourceMaps":true,"sourceFileName":"server/imports/fixtures/products.js"}},"code":"module.export({\n  metaField: () => metaField,\n  productVariant: () => productVariant,\n  addProduct: () => addProduct,\n  addProductSingleVariant: () => addProductSingleVariant,\n  getProduct: () => getProduct,\n  getProducts: () => getProducts\n});\n\nlet _random;\n\nmodule.watch(require(\"lodash/random\"), {\n  default(v) {\n    _random = v;\n  }\n\n}, 0);\n\nlet _defaults;\n\nmodule.watch(require(\"lodash/defaults\"), {\n  default(v) {\n    _defaults = v;\n  }\n\n}, 1);\nlet faker;\nmodule.watch(require(\"faker\"), {\n  default(v) {\n    faker = v;\n  }\n\n}, 2);\nlet Factory;\nmodule.watch(require(\"meteor/dburles:factory\"), {\n  Factory(v) {\n    Factory = v;\n  }\n\n}, 3);\nlet Products, Tags;\nmodule.watch(require(\"../../../lib/collections\"), {\n  Products(v) {\n    Products = v;\n  },\n\n  Tags(v) {\n    Tags = v;\n  }\n\n}, 4);\nlet getShop;\nmodule.watch(require(\"./shops\"), {\n  getShop(v) {\n    getShop = v;\n  }\n\n}, 5);\nlet Hooks;\nmodule.watch(require(\"../../api\"), {\n  Hooks(v) {\n    Hooks = v;\n  }\n\n}, 6);\n\nfunction metaField(options = {}) {\n  const defaults = {\n    key: faker.commerce.productAdjective(),\n    value: faker.commerce.productMaterial(),\n    scope: \"detail\"\n  };\n  return _defaults(options, defaults);\n}\n\nfunction productVariant(options = {}) {\n  const defaults = {\n    ancestors: [],\n    compareAtPrice: _random(0, 1000),\n    weight: _random(0, 10),\n    inventoryManagement: faker.random.boolean(),\n    inventoryPolicy: faker.random.boolean(),\n    lowInventoryWarningThreshold: _random(1, 5),\n    inventoryQuantity: _random(0, 100),\n    price: _random(10, 1000),\n    title: faker.commerce.productName(),\n    optionTitle: faker.commerce.productName(),\n    shopId: getShop()._id,\n    sku: _random(0, 6),\n    taxable: faker.random.boolean(),\n    type: \"variant\",\n    metafields: [metaField(), metaField({\n      key: \"facebook\",\n      scope: \"socialMessages\"\n    }), metaField({\n      key: \"twitter\",\n      scope: \"socialMessages\"\n    })]\n  };\n  return _defaults(options, defaults);\n}\n\nfunction addProduct(options = {}) {\n  const product = Factory.create(\"product\", options);\n  Hooks.Events.run(\"afterInsertCatalogProductInsertRevision\", product); // top level variant\n\n  const variant = Factory.create(\"variant\", Object.assign({}, productVariant(options), {\n    ancestors: [product._id]\n  }));\n  Hooks.Events.run(\"afterInsertCatalogProductInsertRevision\", variant);\n  const variant2 = Factory.create(\"variant\", Object.assign({}, productVariant(options), {\n    ancestors: [product._id, variant._id]\n  }));\n  Hooks.Events.run(\"afterInsertCatalogProductInsertRevision\", variant2);\n  const variant3 = Factory.create(\"variant\", Object.assign({}, productVariant(options), {\n    ancestors: [product._id, variant._id]\n  }));\n  Hooks.Events.run(\"afterInsertCatalogProductInsertRevision\", variant3);\n  return product;\n}\n\nfunction addProductSingleVariant() {\n  const product = Factory.create(\"product\");\n  Hooks.Events.run(\"afterInsertCatalogProductInsertRevision\", product); // top level variant\n\n  const variant = Factory.create(\"variant\", Object.assign({}, productVariant(), {\n    ancestors: [product._id]\n  }));\n  Hooks.Events.run(\"afterInsertCatalogProductInsertRevision\", variant);\n  return {\n    product,\n    variant\n  };\n}\n\nfunction getProduct() {\n  const existingProduct = Products.findOne();\n  return existingProduct || Factory.create(\"product\");\n}\n\nfunction getProducts(limit = 2) {\n  const products = [];\n  const existingProducts = Products.find({}, {\n    limit\n  }).fetch();\n\n  for (let i = 0; i < limit; i += 1) {\n    const product = existingProducts[i] || Factory.create(\"product\");\n    products.push(product);\n  }\n\n  return products;\n}\n\nmodule.exportDefault(function () {\n  /**\n   * @name tag\n   * @memberof Fixtures\n   * @example Factory.create(\"tag\")\n   * @summary Define a Tag for Products\n   * @property {String} name - `\"Tag\"`\n   * @property {String} slug - `\"tag\"`\n   * @property {Number} position - `_.random(0, 100000)`\n   * @property {Boolean} isTopLevel - `true`\n   * @property {String} shopId - `getShop()._id`\n   * @property {Date} createdAt - `faker.date.past()`\n   * @property {Date} updatedAt - `new Date()`\n   */\n  Factory.define(\"tag\", Tags, {\n    name: \"Tag\",\n    slug: \"tag\",\n    position: _random(0, 100000),\n    //  relatedTagIds: [],\n    isTopLevel: true,\n    shopId: getShop()._id,\n    createdAt: faker.date.past(),\n    updatedAt: new Date()\n  });\n  /**\n   * @name Product\n   * @memberof Fixtures\n   * @example const product = Factory.create(\"product\")\n   * @example Factory.create(\"variant\", Object.assign({}, productVariant(options), { ancestors: [product._id, variant._id] }));\n   * @summary Define a factory for Product\n   * @property {Array} ancestors `[]`\n   * @property {String} shopId `getShop()._id`\n   * @property {String} title `faker.commerce.productName()`\n   * @property {String} pageTitle `faker.lorem.sentence()`\n   * @property {String} description `faker.lorem.paragraph()`\n   * @property {String} type `\"simple\"` or `\"variant\"` for Product Variant\n   * @property {String} vendor `faker.company.companyName()`\n   * @property {Object} price `priceRange`\n   * @property {String} price.range `\"1.00 - 12.99\"`\n   * @property {Number} price.min `1.00`\n   * @property {Number} price.max `12.9`\n   * @property {Boolean} isLowQuantity `false`\n   * @property {Boolean} isSoldOut `false`\n   * @property {Boolean} isBackorder `false`\n   * @property {Array} metafields `[]`\n   * @property {Boolean} requiresShipping `true`\n   * @property {Array} hashtags `[]`\n   * @property {Boolean} isVisible `true`\n   * @property {Date} publishedAt `new Date()`\n   * @property {Date} createdAt `new Date()`\n   * @property {Date} updatedAt `new Date()`\n   */\n\n  const base = {\n    ancestors: [],\n    shopId: getShop()._id\n  };\n  const priceRange = {\n    range: \"1.00 - 12.99\",\n    min: 1.00,\n    max: 12.99\n  };\n  const product = {\n    title: faker.commerce.productName(),\n    pageTitle: faker.lorem.sentence(),\n    description: faker.lorem.paragraph(),\n    type: \"simple\",\n    vendor: faker.company.companyName(),\n    price: priceRange,\n    isLowQuantity: false,\n    isSoldOut: false,\n    isBackorder: false,\n    metafields: [],\n    requiresShipping: true,\n    // parcel: ?,\n    hashtags: [],\n    isVisible: true,\n    publishedAt: new Date(),\n    createdAt: new Date(),\n    updatedAt: new Date()\n  };\n  Factory.define(\"product\", Products, Object.assign({}, base, product));\n  Factory.define(\"variant\", Products, {\n    type: \"variant\"\n  });\n});","map":{"version":3,"sources":["server/imports/fixtures/products.js"],"names":["module","export","metaField","productVariant","addProduct","addProductSingleVariant","getProduct","getProducts","_random","watch","require","default","v","_defaults","faker","Factory","Products","Tags","getShop","Hooks","options","defaults","key","commerce","productAdjective","value","productMaterial","scope","ancestors","compareAtPrice","weight","inventoryManagement","random","boolean","inventoryPolicy","lowInventoryWarningThreshold","inventoryQuantity","price","title","productName","optionTitle","shopId","_id","sku","taxable","type","metafields","product","create","Events","run","variant","Object","assign","variant2","variant3","existingProduct","findOne","limit","products","existingProducts","find","fetch","i","push","exportDefault","define","name","slug","position","isTopLevel","createdAt","date","past","updatedAt","Date","base","priceRange","range","min","max","pageTitle","lorem","sentence","description","paragraph","vendor","company","companyName","isLowQuantity","isSoldOut","isBackorder","requiresShipping","hashtags","isVisible","publishedAt"],"mappings":"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","sourcesContent":["import faker from \"faker\";\nimport _ from \"lodash\";\nimport { Factory } from \"meteor/dburles:factory\";\nimport { Products, Tags } from \"/lib/collections\";\nimport { getShop } from \"./shops\";\nimport { Hooks } from \"/server/api\";\n\n/**\n * @method metaField\n * @memberof Fixtures\n * @param   {Object} [options] - options object to override generated default values\n * @param   {String} [options.key] - metaField key\n * @param   {String} [options.value] - metaField value\n * @param   {String} [options.scope] - metaField scope\n * @returns {Object} - randomly generated metaField\n */\nexport function metaField(options = {}) {\n  const defaults = {\n    key: faker.commerce.productAdjective(),\n    value: faker.commerce.productMaterial(),\n    scope: \"detail\"\n  };\n  return _.defaults(options, defaults);\n}\n\n/**\n * @method productVariant\n * @memberof Fixtures\n * @param {Object} [options] - Options object\n * @param {String} [options._id] - id\n * @param {String} [options.parentId] - variant's parent's ID. Sets variant as child.\n * @param {String} [options.compareAtPrice] - MSRP Price / Compare At Price\n * @param {String} [options.weight] - productVariant weight\n * @param {String} [options.inventoryManagement] - Track inventory for this product?\n * @param {String} [options.inventoryPolicy] - Allow overselling of this product?\n * @param {String} [options.lowInventoryWarningThreshold] - Qty left of inventory that sets off warning\n * @param {String} [options.inventoryQuantity] - Inventory Quantity\n * @param {String} [options.price] - productVariant price\n * @param {String} [options.title] - productVariant title\n * @param {String} [options.optionTitle] - productVariant option title\n * @param {String} [options.sku] - productVariant sku\n * @param {String} [options.taxable] - is this productVariant taxable?\n * @param {Object[]} [options.metafields] - productVariant metaFields\n *\n * @returns {Object} - randomly generated productVariant\n */\nexport function productVariant(options = {}) {\n  const defaults = {\n    ancestors: [],\n    compareAtPrice: _.random(0, 1000),\n    weight: _.random(0, 10),\n    inventoryManagement: faker.random.boolean(),\n    inventoryPolicy: faker.random.boolean(),\n    lowInventoryWarningThreshold: _.random(1, 5),\n    inventoryQuantity: _.random(0, 100),\n    price: _.random(10, 1000),\n    title: faker.commerce.productName(),\n    optionTitle: faker.commerce.productName(),\n    shopId: getShop()._id,\n    sku: _.random(0, 6),\n    taxable: faker.random.boolean(),\n    type: \"variant\",\n    metafields: [\n      metaField(),\n      metaField({\n        key: \"facebook\",\n        scope: \"socialMessages\"\n      }),\n      metaField({\n        key: \"twitter\",\n        scope: \"socialMessages\"\n      })\n    ]\n  };\n  return _.defaults(options, defaults);\n}\n\n/**\n * @method addProduct\n * @summary Create a product with variants\n * @memberof Fixtures\n * @param {Object} [options={}] [description]\n * @param {String} [options._id] - id\n * @param {String} [options.parentId] - variant's parent's ID. Sets variant as child.\n * @param {String} [options.compareAtPrice] - MSRP Price / Compare At Price\n * @param {String} [options.weight] - productVariant weight\n * @param {String} [options.inventoryManagement] - Track inventory for this product?\n * @param {String} [options.inventoryPolicy] - Allow overselling of this product?\n * @param {String} [options.lowInventoryWarningThreshold] - Qty left of inventory that sets off warning\n * @param {String} [options.inventoryQuantity] - Inventory Quantity\n * @param {String} [options.price] - productVariant price\n * @param {String} [options.title] - productVariant title\n * @param {String} [options.optionTitle] - productVariant option title\n * @param {String} [options.sku] - productVariant sku\n * @param {String} [options.taxable] - is this productVariant taxable?\n * @param {Object[]} [options.metafields] - productVariant metaFields\n * @returns {Object} Product\n */\nexport function addProduct(options = {}) {\n  const product = Factory.create(\"product\", options);\n  Hooks.Events.run(\"afterInsertCatalogProductInsertRevision\", product);\n  // top level variant\n  const variant = Factory.create(\"variant\", Object.assign({}, productVariant(options), { ancestors: [product._id] }));\n  Hooks.Events.run(\"afterInsertCatalogProductInsertRevision\", variant);\n  const variant2 = Factory.create(\"variant\", Object.assign({}, productVariant(options), { ancestors: [product._id, variant._id] }));\n  Hooks.Events.run(\"afterInsertCatalogProductInsertRevision\", variant2);\n  const variant3 = Factory.create(\"variant\", Object.assign({}, productVariant(options), { ancestors: [product._id, variant._id] }));\n  Hooks.Events.run(\"afterInsertCatalogProductInsertRevision\", variant3);\n  return product;\n}\n\n/**\n * @method addProductSingleVariant\n * @summary Create a product with 1 variant\n * @memberof Fixtures\n * @param {Object} [options={}] Product variant options object\n * @returns {Object} Product with Variant\n */\nexport function addProductSingleVariant() {\n  const product = Factory.create(\"product\");\n  Hooks.Events.run(\"afterInsertCatalogProductInsertRevision\", product);\n  // top level variant\n  const variant = Factory.create(\"variant\", Object.assign({}, productVariant(), { ancestors: [product._id] }));\n  Hooks.Events.run(\"afterInsertCatalogProductInsertRevision\", variant);\n  return { product, variant };\n}\n\n/**\n * @method getProduct\n * @summary Get a product\n * @memberof Fixtures\n * @param {Object} [options={}] Product variant options object\n * @returns {Object} Product\n */\nexport function getProduct() {\n  const existingProduct = Products.findOne();\n  return existingProduct || Factory.create(\"product\");\n}\n\n/**\n * @method getProducts\n * @summary Get a number of products\n * @memberof Fixtures\n * @param {Object} [limit=2] Number of products\n * @returns {Array} Array of products\n */\nexport function getProducts(limit = 2) {\n  const products = [];\n  const existingProducts = Products.find({}, { limit }).fetch();\n  for (let i = 0; i < limit; i += 1) {\n    const product = existingProducts[i] || Factory.create(\"product\");\n    products.push(product);\n  }\n  return products;\n}\n\nexport default function () {\n  /**\n   * @name tag\n   * @memberof Fixtures\n   * @example Factory.create(\"tag\")\n   * @summary Define a Tag for Products\n   * @property {String} name - `\"Tag\"`\n   * @property {String} slug - `\"tag\"`\n   * @property {Number} position - `_.random(0, 100000)`\n   * @property {Boolean} isTopLevel - `true`\n   * @property {String} shopId - `getShop()._id`\n   * @property {Date} createdAt - `faker.date.past()`\n   * @property {Date} updatedAt - `new Date()`\n   */\n  Factory.define(\"tag\", Tags, {\n    name: \"Tag\",\n    slug: \"tag\",\n    position: _.random(0, 100000),\n    //  relatedTagIds: [],\n    isTopLevel: true,\n    shopId: getShop()._id,\n    createdAt: faker.date.past(),\n    updatedAt: new Date()\n  });\n\n  /**\n   * @name Product\n   * @memberof Fixtures\n   * @example const product = Factory.create(\"product\")\n   * @example Factory.create(\"variant\", Object.assign({}, productVariant(options), { ancestors: [product._id, variant._id] }));\n   * @summary Define a factory for Product\n   * @property {Array} ancestors `[]`\n   * @property {String} shopId `getShop()._id`\n   * @property {String} title `faker.commerce.productName()`\n   * @property {String} pageTitle `faker.lorem.sentence()`\n   * @property {String} description `faker.lorem.paragraph()`\n   * @property {String} type `\"simple\"` or `\"variant\"` for Product Variant\n   * @property {String} vendor `faker.company.companyName()`\n   * @property {Object} price `priceRange`\n   * @property {String} price.range `\"1.00 - 12.99\"`\n   * @property {Number} price.min `1.00`\n   * @property {Number} price.max `12.9`\n   * @property {Boolean} isLowQuantity `false`\n   * @property {Boolean} isSoldOut `false`\n   * @property {Boolean} isBackorder `false`\n   * @property {Array} metafields `[]`\n   * @property {Boolean} requiresShipping `true`\n   * @property {Array} hashtags `[]`\n   * @property {Boolean} isVisible `true`\n   * @property {Date} publishedAt `new Date()`\n   * @property {Date} createdAt `new Date()`\n   * @property {Date} updatedAt `new Date()`\n   */\n  const base = {\n    ancestors: [],\n    shopId: getShop()._id\n  };\n\n  const priceRange = {\n    range: \"1.00 - 12.99\",\n    min: 1.00,\n    max: 12.99\n  };\n\n  const product = {\n    title: faker.commerce.productName(),\n    pageTitle: faker.lorem.sentence(),\n    description: faker.lorem.paragraph(),\n    type: \"simple\",\n    vendor: faker.company.companyName(),\n    price: priceRange,\n    isLowQuantity: false,\n    isSoldOut: false,\n    isBackorder: false,\n    metafields: [],\n    requiresShipping: true,\n    // parcel: ?,\n    hashtags: [],\n    isVisible: true,\n    publishedAt: new Date(),\n    createdAt: new Date(),\n    updatedAt: new Date()\n  };\n\n  Factory.define(\"product\", Products, Object.assign({}, base, product));\n  Factory.define(\"variant\", Products, {\n    type: \"variant\"\n  });\n}\n"]},"sourceType":"script","hash":"efeb97e8084b3b2a86f28dcc67fd3cf171631b5e"}
