{"metadata":{},"options":{"plugins":[{"key":"base$0$0","visitor":{"Program":{"enter":[null]},"_exploded":true,"_verified":true},"options":{"generateLetDeclarations":true,"enforceStrictMode":false}},{"key":"transform-meteor-dynamic-import","visitor":{"_exploded":{},"_verified":{},"CallExpression":{"enter":[null]}},"options":{}},{"key":"base$0$2","visitor":{"CallExpression":{"enter":[null]},"BinaryExpression":{"enter":[null]},"MemberExpression":{"enter":[null],"exit":[null]},"_exploded":true,"_verified":true,"Identifier":{"enter":[null]},"JSXIdentifier":{"enter":[null]}},"options":{"polyfill":false,"useBuiltIns":false}},{"key":"base$0$3","visitor":{"_exploded":{},"_verified":{},"ClassDeclaration":{"enter":[null]},"ClassExpression":{"enter":[null]}},"options":{"loose":true}},{"key":"base$0$4","visitor":{"FunctionExpression":{"exit":[null]},"_exploded":true,"_verified":true},"options":{}},{"key":"base$0$5","visitor":{"ForInStatement":{"enter":[null]},"_exploded":true,"_verified":true},"options":{}},{"key":"base$0$6","visitor":{"Program":{"exit":[null]},"_exploded":true,"_verified":true},"options":{"allowTopLevelThis":true,"strictMode":false,"loose":true}},{"key":"base$0$1$0","visitor":{"_exploded":{},"_verified":{},"JSXNamespacedName":{"enter":[null]},"JSXElement":{"exit":[null]},"JSXFragment":{"exit":[null]},"Program":{"enter":[null],"exit":[null]},"JSXAttribute":{"enter":[null]}},"options":{"pragma":"React.createElement","pragmaFrag":"React.Fragment","throwIfNamespace":true,"useBuiltIns":false}},{"key":"base$0$1$1","visitor":{"_exploded":true,"_verified":true},"options":{}},{"key":"base$0$1$2","visitor":{"ExportDefaultDeclaration":{"enter":[null]},"CallExpression":{"enter":[null]},"_exploded":true,"_verified":true},"options":{}},{"key":"base$0$0$0","visitor":{"_exploded":true,"_verified":true},"options":{}},{"key":"base$0$0$1","visitor":{"_exploded":true,"_verified":true},"options":{}},{"key":"base$0$0$2","visitor":{"ArrowFunctionExpression":{"enter":[null]},"_exploded":true,"_verified":true},"options":{}},{"key":"base$0$0$3","visitor":{"BlockStatement":{"enter":[null]},"SwitchCase":{"enter":[null]},"_exploded":true,"_verified":true},"options":{}},{"key":"base$0$0$4","visitor":{"VariableDeclaration":{"enter":[null]},"CatchClause":{"enter":[null]},"_exploded":true,"BlockStatement":{"enter":[null]},"SwitchStatement":{"enter":[null]},"Program":{"enter":[null]},"_verified":true,"DoWhileStatement":{"enter":[null]},"ForInStatement":{"enter":[null]},"ForStatement":{"enter":[null]},"WhileStatement":{"enter":[null]},"ForOfStatement":{"enter":[null]}},"options":{}},{"key":"base$0$0$5","visitor":{"ExportDefaultDeclaration":{"enter":[null]},"ClassDeclaration":{"enter":[null]},"ClassExpression":{"enter":[null]},"_exploded":true,"_verified":true},"options":{"loose":true}},{"key":"base$0$0$6","visitor":{"ObjectExpression":{"exit":[null]},"_exploded":true,"_verified":true},"options":{"loose":true}},{"key":"base$0$0$7","visitor":{"ExportNamedDeclaration":{"enter":[null]},"CatchClause":{"enter":[null]},"AssignmentExpression":{"enter":[null]},"VariableDeclaration":{"enter":[null]},"_exploded":true,"_verified":true,"ForInStatement":{"enter":[null]},"ForOfStatement":{"enter":[null]}},"options":{}},{"key":"base$0$0$8","visitor":{"ForOfStatement":{"enter":[null]},"_exploded":true,"_verified":true},"options":{"loose":true}},{"key":"base$0$0$9","visitor":{"NumericLiteral":{"enter":[null]},"StringLiteral":{"enter":[null]},"_exploded":true,"_verified":true},"options":{}},{"key":"base$0$0$10","visitor":{"ObjectExpression":{"enter":[null]},"_exploded":true,"_verified":true},"options":{}},{"key":"base$0$0$11","visitor":{"_exploded":true,"_verified":true,"FunctionDeclaration":{"enter":[null]},"FunctionExpression":{"enter":[null]},"ObjectMethod":{"enter":[null]},"ArrowFunctionExpression":{"enter":[null]},"ClassMethod":{"enter":[null]}},"options":{}},{"key":"base$0$0$12","visitor":{"ObjectMethod":{"enter":[null]},"ObjectProperty":{"enter":[null]},"_exploded":true,"_verified":true},"options":{}},{"key":"base$0$0$13","visitor":{"ArrayExpression":{"enter":[null]},"CallExpression":{"enter":[null]},"NewExpression":{"enter":[null]},"_exploded":true,"_verified":true},"options":{}},{"key":"base$0$0$14","visitor":{"RegExpLiteral":{"enter":[null]},"_exploded":true,"_verified":true},"options":{}},{"key":"base$0$0$15","visitor":{"TaggedTemplateExpression":{"enter":[null]},"TemplateLiteral":{"enter":[null]},"_exploded":true,"_verified":true},"options":{"loose":true}},{"key":"base$0$0$16","visitor":{"UnaryExpression":{"enter":[null]},"_exploded":true,"_verified":true,"BlockStatement":{"enter":[null]},"CatchClause":{"enter":[null]},"DoWhileStatement":{"enter":[null]},"ForInStatement":{"enter":[null]},"ForStatement":{"enter":[null]},"FunctionDeclaration":{"enter":[null]},"FunctionExpression":{"enter":[null]},"Program":{"enter":[null]},"ObjectMethod":{"enter":[null]},"SwitchStatement":{"enter":[null]},"WhileStatement":{"enter":[null]},"ArrowFunctionExpression":{"enter":[null]},"ClassDeclaration":{"enter":[null]},"ClassExpression":{"enter":[null]},"ForOfStatement":{"enter":[null]},"ClassMethod":{"enter":[null]}},"options":{}},{"key":"base$0$0$17","visitor":{"RegExpLiteral":{"enter":[null]},"_exploded":true,"_verified":true},"options":{}},{"key":"base$0$0$18","visitor":{"_exploded":true,"_verified":true},"options":{}},{"key":"base$0$0$19","visitor":{"_exploded":{},"_verified":{},"VariableDeclarator":{"enter":[null]},"ExportNamedDeclaration":{"enter":[null]},"CatchClause":{"enter":[null]},"AssignmentExpression":{"enter":[null]},"ObjectExpression":{"enter":[null]},"FunctionDeclaration":{"enter":[null]},"FunctionExpression":{"enter":[null]},"ObjectMethod":{"enter":[null]},"ArrowFunctionExpression":{"enter":[null]},"ClassMethod":{"enter":[null]},"ForInStatement":{"enter":[null]},"ForOfStatement":{"enter":[null]}},"options":{}},{"key":"base$0$0$20","visitor":{"ObjectProperty":{"exit":[null]},"_exploded":true,"_verified":true},"options":{}},{"key":"base$0$0$21","visitor":{"_exploded":{},"_verified":{},"Program":{"enter":[null]},"ImportDeclaration":{"enter":[null,null]},"ClassProperty":{"enter":[null]},"AssignmentPattern":{"enter":[null]},"TypeCastExpression":{"enter":[null,null]},"ImportSpecifier":{"enter":[null]},"ClassDeclaration":{"enter":[null]},"ClassExpression":{"enter":[null]},"FunctionDeclaration":{"enter":[null]},"FunctionExpression":{"enter":[null]},"ObjectMethod":{"enter":[null]},"ArrowFunctionExpression":{"enter":[null]},"ClassMethod":{"enter":[null]},"AnyTypeAnnotation":{"enter":[null]},"ArrayTypeAnnotation":{"enter":[null]},"BooleanTypeAnnotation":{"enter":[null]},"BooleanLiteralTypeAnnotation":{"enter":[null]},"NullLiteralTypeAnnotation":{"enter":[null]},"ClassImplements":{"enter":[null]},"DeclareClass":{"enter":[null]},"DeclareFunction":{"enter":[null]},"DeclareInterface":{"enter":[null]},"DeclareModule":{"enter":[null]},"DeclareModuleExports":{"enter":[null]},"DeclareTypeAlias":{"enter":[null]},"DeclareOpaqueType":{"enter":[null]},"DeclareVariable":{"enter":[null]},"DeclareExportDeclaration":{"enter":[null]},"DeclareExportAllDeclaration":{"enter":[null]},"DeclaredPredicate":{"enter":[null]},"ExistsTypeAnnotation":{"enter":[null]},"FunctionTypeAnnotation":{"enter":[null]},"FunctionTypeParam":{"enter":[null]},"GenericTypeAnnotation":{"enter":[null]},"InferredPredicate":{"enter":[null]},"InterfaceExtends":{"enter":[null]},"InterfaceDeclaration":{"enter":[null]},"IntersectionTypeAnnotation":{"enter":[null]},"MixedTypeAnnotation":{"enter":[null]},"EmptyTypeAnnotation":{"enter":[null]},"NullableTypeAnnotation":{"enter":[null]},"NumberLiteralTypeAnnotation":{"enter":[null]},"NumberTypeAnnotation":{"enter":[null]},"ObjectTypeAnnotation":{"enter":[null]},"ObjectTypeCallProperty":{"enter":[null]},"ObjectTypeIndexer":{"enter":[null]},"ObjectTypeProperty":{"enter":[null]},"ObjectTypeSpreadProperty":{"enter":[null]},"OpaqueType":{"enter":[null]},"QualifiedTypeIdentifier":{"enter":[null]},"StringLiteralTypeAnnotation":{"enter":[null]},"StringTypeAnnotation":{"enter":[null]},"ThisTypeAnnotation":{"enter":[null]},"TupleTypeAnnotation":{"enter":[null]},"TypeofTypeAnnotation":{"enter":[null]},"TypeAlias":{"enter":[null]},"TypeAnnotation":{"enter":[null]},"TypeParameter":{"enter":[null]},"TypeParameterDeclaration":{"enter":[null]},"TypeParameterInstantiation":{"enter":[null]},"UnionTypeAnnotation":{"enter":[null]},"Variance":{"enter":[null]},"VoidTypeAnnotation":{"enter":[null]},"ExportAllDeclaration":{"enter":[null]},"ExportDefaultDeclaration":{"enter":[null]},"ExportNamedDeclaration":{"enter":[null]}},"options":{}},{"key":"base$0$0$22","visitor":{"AssignmentExpression":{"enter":[null]},"BinaryExpression":{"enter":[null]},"_exploded":true,"_verified":true},"options":{}},{"key":"base$0$0$23","visitor":{"_exploded":{},"_verified":{},"Program":{"enter":[null]}},"options":{}},{"key":"regenerator-transform","visitor":{"_exploded":true,"_verified":true,"FunctionDeclaration":{"exit":[null]},"FunctionExpression":{"exit":[null]},"ObjectMethod":{"exit":[null]},"ArrowFunctionExpression":{"exit":[null]},"ClassMethod":{"exit":[null]}},"options":{}}],"presets":[],"compact":false,"ast":true,"babelrc":false,"sourceFileName":"imports/plugins/core/checkout/client/containers/cartDrawerContainer.js","filename":"imports/plugins/core/checkout/client/containers/cartDrawerContainer.js","sourceMaps":true,"envName":"development","cwd":"/Users/estebandev/test-knowledge","passPerPreset":false,"parserOpts":{"sourceType":"module","sourceFileName":"imports/plugins/core/checkout/client/containers/cartDrawerContainer.js","plugins":["dynamicImport","classProperties","jsx","jsx","flow","asyncGenerators","objectRestSpread","objectRestSpread","flow","asyncGenerators"]},"generatorOpts":{"filename":"imports/plugins/core/checkout/client/containers/cartDrawerContainer.js","comments":true,"compact":false,"sourceMaps":true,"sourceFileName":"imports/plugins/core/checkout/client/containers/cartDrawerContainer.js"}},"code":"var _withProps;\n\nmodule.watch(require(\"recompose/withProps\"), {\n  \"default\": function (v) {\n    _withProps = v;\n  }\n}, 0);\n\nvar _compose;\n\nmodule.watch(require(\"recompose/compose\"), {\n  \"default\": function (v) {\n    _compose = v;\n  }\n}, 1);\nvar registerComponent, composeWithTracker;\nmodule.watch(require(\"../../../components/lib\"), {\n  registerComponent: function (v) {\n    registerComponent = v;\n  },\n  composeWithTracker: function (v) {\n    composeWithTracker = v;\n  }\n}, 2);\nvar $;\nmodule.watch(require(\"meteor/jquery\"), {\n  $: function (v) {\n    $ = v;\n  }\n}, 3);\nvar Session;\nmodule.watch(require(\"meteor/session\"), {\n  Session: function (v) {\n    Session = v;\n  }\n}, 4);\nvar Meteor;\nmodule.watch(require(\"meteor/meteor\"), {\n  Meteor: function (v) {\n    Meteor = v;\n  }\n}, 5);\nvar Cart;\nmodule.watch(require(\"../../../../../../lib/collections\"), {\n  Cart: function (v) {\n    Cart = v;\n  }\n}, 6);\nvar getPrimaryMediaForOrderItem, ReactionProduct;\nmodule.watch(require(\"../../../../../../lib/api\"), {\n  getPrimaryMediaForOrderItem: function (v) {\n    getPrimaryMediaForOrderItem = v;\n  },\n  ReactionProduct: function (v) {\n    ReactionProduct = v;\n  }\n}, 7);\nvar Reaction;\nmodule.watch(require(\"../../../../../../client/api\"), {\n  Reaction: function (v) {\n    Reaction = v;\n  }\n}, 8);\nvar CartDrawer;\nmodule.watch(require(\"../components/cartDrawer\"), {\n  \"default\": function (v) {\n    CartDrawer = v;\n  }\n}, 9);\n// event handlers to pass in as props\nvar handlers = {\n  handleImage: function (item) {\n    var media = getPrimaryMediaForOrderItem(item);\n    return media && media.url({\n      store: \"small\"\n    });\n  },\n\n  /**\n  * showLowInventoryWarning\n  * @param {Object} productItem - product item object\n  * @return {Boolean} return true if low inventory on variant\n  */\n  handleLowInventory: function (productItem) {\n    var variants = productItem.variants;\n\n    if (variants && variants.inventoryPolicy && variants.lowInventoryWarningThreshold) {\n      return variants.inventoryQuantity <= variants.lowInventoryWarningThreshold;\n    }\n\n    return false;\n  },\n  handleShowProduct: function (productItem) {\n    if (productItem) {\n      Reaction.Router.go(\"product\", {\n        handle: productItem.productId,\n        variantId: productItem.variants._id\n      });\n      ReactionProduct.setCurrentVariant(productItem.variants._id);\n    }\n  },\n  pdpPath: function (productItem) {\n    if (productItem) {\n      var handle = productItem.productId;\n      return Reaction.Router.pathFor(\"product\", {\n        hash: {\n          handle: handle,\n          variantId: productItem.variants._id\n        }\n      });\n    }\n  },\n  handleRemoveItem: function (event, item) {\n    event.stopPropagation();\n    event.preventDefault();\n    var cartItemElement = $(event.target).closest(\".cart-drawer-swiper-slide\");\n    cartItemElement.fadeOut(500, function () {\n      return Meteor.call(\"cart/removeFromCart\", item._id);\n    });\n  },\n  handleCheckout: function () {\n    $(\"#cart-drawer-container\").fadeOut();\n    Session.set(\"displayCart\", false);\n    return Reaction.Router.go(\"cart/checkout\");\n  }\n}; // reactive Tracker wrapped function\n\nfunction composer(props, onData) {\n  var userId = Meteor.userId();\n  var shopId = Reaction.marketplace.merchantCarts ? Reaction.getShopId() : Reaction.getPrimaryShopId();\n  var cart = Cart.findOne({\n    userId: userId,\n    shopId: shopId\n  });\n  if (!cart) return;\n  Meteor.subscribe(\"CartImages\", cart._id);\n  var productItems = cart && cart.items;\n  onData(null, {\n    productItems: productItems\n  });\n} // register the containers\n\n\nregisterComponent(\"CartDrawer\", CartDrawer, [_withProps(handlers), composeWithTracker(composer)]);\nmodule.exportDefault(_compose(_withProps(handlers), composeWithTracker(composer))(CartDrawer));","map":{"version":3,"sources":["imports/plugins/core/checkout/client/containers/cartDrawerContainer.js"],"names":["_withProps","module","watch","require","v","_compose","registerComponent","composeWithTracker","$","Session","Meteor","Cart","getPrimaryMediaForOrderItem","ReactionProduct","Reaction","CartDrawer","handlers","handleImage","item","media","url","store","handleLowInventory","productItem","variants","inventoryPolicy","lowInventoryWarningThreshold","inventoryQuantity","handleShowProduct","Router","go","handle","productId","variantId","_id","setCurrentVariant","pdpPath","pathFor","hash","handleRemoveItem","event","stopPropagation","preventDefault","cartItemElement","target","closest","fadeOut","call","handleCheckout","set","composer","props","onData","userId","shopId","marketplace","merchantCarts","getShopId","getPrimaryShopId","cart","findOne","subscribe","productItems","items","exportDefault"],"mappings":"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","sourcesContent":["import { compose, withProps } from \"recompose\";\nimport { registerComponent, composeWithTracker } from \"@reactioncommerce/reaction-components\";\nimport { $ } from \"meteor/jquery\";\nimport { Session } from \"meteor/session\";\nimport { Meteor } from \"meteor/meteor\";\nimport { Cart } from \"/lib/collections\";\nimport { getPrimaryMediaForOrderItem, ReactionProduct } from \"/lib/api\";\nimport { Reaction } from \"/client/api\";\nimport CartDrawer from \"../components/cartDrawer\";\n\n// event handlers to pass in as props\nconst handlers = {\n  handleImage(item) {\n    const media = getPrimaryMediaForOrderItem(item);\n    return media && media.url({ store: \"small\" });\n  },\n\n  /**\n  * showLowInventoryWarning\n  * @param {Object} productItem - product item object\n  * @return {Boolean} return true if low inventory on variant\n  */\n  handleLowInventory(productItem) {\n    const { variants } = productItem;\n    if (variants && variants.inventoryPolicy &&\n      variants.lowInventoryWarningThreshold) {\n      return variants.inventoryQuantity <=\n        variants.lowInventoryWarningThreshold;\n    }\n    return false;\n  },\n\n  handleShowProduct(productItem) {\n    if (productItem) {\n      Reaction.Router.go(\"product\", {\n        handle: productItem.productId,\n        variantId: productItem.variants._id\n      });\n\n      ReactionProduct.setCurrentVariant(productItem.variants._id);\n    }\n  },\n\n  pdpPath(productItem) {\n    if (productItem) {\n      const handle = productItem.productId;\n      return Reaction.Router.pathFor(\"product\", {\n        hash: {\n          handle,\n          variantId: productItem.variants._id\n        }\n      });\n    }\n  },\n\n  handleRemoveItem(event, item) {\n    event.stopPropagation();\n    event.preventDefault();\n    const cartItemElement = $(event.target).closest(\".cart-drawer-swiper-slide\");\n    cartItemElement.fadeOut(500, () => Meteor.call(\"cart/removeFromCart\", item._id));\n  },\n\n  handleCheckout() {\n    $(\"#cart-drawer-container\").fadeOut();\n    Session.set(\"displayCart\", false);\n    return Reaction.Router.go(\"cart/checkout\");\n  }\n};\n\n// reactive Tracker wrapped function\nfunction composer(props, onData) {\n  const userId = Meteor.userId();\n  const shopId = Reaction.marketplace.merchantCarts ? Reaction.getShopId() : Reaction.getPrimaryShopId();\n  const cart = Cart.findOne({ userId, shopId });\n  if (!cart) return;\n\n  Meteor.subscribe(\"CartImages\", cart._id);\n\n  const productItems = cart && cart.items;\n  onData(null, {\n    productItems\n  });\n}\n\n// register the containers\nregisterComponent(\"CartDrawer\", CartDrawer, [\n  withProps(handlers),\n  composeWithTracker(composer)\n]);\n\nexport default compose(\n  withProps(handlers),\n  composeWithTracker(composer)\n)(CartDrawer);\n"]},"sourceType":"script","hash":"05c35abfaad013fab473b45442beb072ee697bd4"}
