{"metadata":{},"options":{"plugins":[{"key":"base$0$0","visitor":{"Program":{"enter":[null]},"_exploded":true,"_verified":true},"options":{"generateLetDeclarations":true,"enforceStrictMode":false}},{"key":"transform-meteor-dynamic-import","visitor":{"_exploded":{},"_verified":{},"CallExpression":{"enter":[null]}},"options":{}},{"key":"base$0$2","visitor":{"CallExpression":{"enter":[null]},"BinaryExpression":{"enter":[null]},"MemberExpression":{"enter":[null],"exit":[null]},"_exploded":true,"_verified":true,"Identifier":{"enter":[null]},"JSXIdentifier":{"enter":[null]}},"options":{"polyfill":false,"useBuiltIns":false}},{"key":"base$0$3","visitor":{"_exploded":{},"_verified":{},"ClassDeclaration":{"enter":[null]},"ClassExpression":{"enter":[null]}},"options":{"loose":true}},{"key":"base$0$4","visitor":{"FunctionExpression":{"exit":[null]},"_exploded":true,"_verified":true},"options":{}},{"key":"base$0$5","visitor":{"ForInStatement":{"enter":[null]},"_exploded":true,"_verified":true},"options":{}},{"key":"base$0$6","visitor":{"Program":{"exit":[null]},"_exploded":true,"_verified":true},"options":{"allowTopLevelThis":true,"strictMode":false,"loose":true}},{"key":"base$0$1$0","visitor":{"_exploded":{},"_verified":{},"JSXNamespacedName":{"enter":[null]},"JSXElement":{"exit":[null]},"JSXFragment":{"exit":[null]},"Program":{"enter":[null],"exit":[null]},"JSXAttribute":{"enter":[null]}},"options":{"pragma":"React.createElement","pragmaFrag":"React.Fragment","throwIfNamespace":true,"useBuiltIns":false}},{"key":"base$0$1$1","visitor":{"_exploded":true,"_verified":true},"options":{}},{"key":"base$0$1$2","visitor":{"ExportDefaultDeclaration":{"enter":[null]},"CallExpression":{"enter":[null]},"_exploded":true,"_verified":true},"options":{}},{"key":"base$0$0$0","visitor":{"_exploded":true,"_verified":true},"options":{}},{"key":"base$0$0$1","visitor":{"_exploded":true,"_verified":true},"options":{}},{"key":"base$0$0$2","visitor":{"ArrowFunctionExpression":{"enter":[null]},"_exploded":true,"_verified":true},"options":{}},{"key":"base$0$0$3","visitor":{"BlockStatement":{"enter":[null]},"SwitchCase":{"enter":[null]},"_exploded":true,"_verified":true},"options":{}},{"key":"base$0$0$4","visitor":{"VariableDeclaration":{"enter":[null]},"CatchClause":{"enter":[null]},"_exploded":true,"BlockStatement":{"enter":[null]},"SwitchStatement":{"enter":[null]},"Program":{"enter":[null]},"_verified":true,"DoWhileStatement":{"enter":[null]},"ForInStatement":{"enter":[null]},"ForStatement":{"enter":[null]},"WhileStatement":{"enter":[null]},"ForOfStatement":{"enter":[null]}},"options":{}},{"key":"base$0$0$5","visitor":{"ExportDefaultDeclaration":{"enter":[null]},"ClassDeclaration":{"enter":[null]},"ClassExpression":{"enter":[null]},"_exploded":true,"_verified":true},"options":{"loose":true}},{"key":"base$0$0$6","visitor":{"ObjectExpression":{"exit":[null]},"_exploded":true,"_verified":true},"options":{"loose":true}},{"key":"base$0$0$7","visitor":{"ExportNamedDeclaration":{"enter":[null]},"CatchClause":{"enter":[null]},"AssignmentExpression":{"enter":[null]},"VariableDeclaration":{"enter":[null]},"_exploded":true,"_verified":true,"ForInStatement":{"enter":[null]},"ForOfStatement":{"enter":[null]}},"options":{}},{"key":"base$0$0$8","visitor":{"ForOfStatement":{"enter":[null]},"_exploded":true,"_verified":true},"options":{"loose":true}},{"key":"base$0$0$9","visitor":{"NumericLiteral":{"enter":[null]},"StringLiteral":{"enter":[null]},"_exploded":true,"_verified":true},"options":{}},{"key":"base$0$0$10","visitor":{"ObjectExpression":{"enter":[null]},"_exploded":true,"_verified":true},"options":{}},{"key":"base$0$0$11","visitor":{"_exploded":true,"_verified":true,"FunctionDeclaration":{"enter":[null]},"FunctionExpression":{"enter":[null]},"ObjectMethod":{"enter":[null]},"ArrowFunctionExpression":{"enter":[null]},"ClassMethod":{"enter":[null]}},"options":{}},{"key":"base$0$0$12","visitor":{"ObjectMethod":{"enter":[null]},"ObjectProperty":{"enter":[null]},"_exploded":true,"_verified":true},"options":{}},{"key":"base$0$0$13","visitor":{"ArrayExpression":{"enter":[null]},"CallExpression":{"enter":[null]},"NewExpression":{"enter":[null]},"_exploded":true,"_verified":true},"options":{}},{"key":"base$0$0$14","visitor":{"RegExpLiteral":{"enter":[null]},"_exploded":true,"_verified":true},"options":{}},{"key":"base$0$0$15","visitor":{"TaggedTemplateExpression":{"enter":[null]},"TemplateLiteral":{"enter":[null]},"_exploded":true,"_verified":true},"options":{"loose":true}},{"key":"base$0$0$16","visitor":{"UnaryExpression":{"enter":[null]},"_exploded":true,"_verified":true,"BlockStatement":{"enter":[null]},"CatchClause":{"enter":[null]},"DoWhileStatement":{"enter":[null]},"ForInStatement":{"enter":[null]},"ForStatement":{"enter":[null]},"FunctionDeclaration":{"enter":[null]},"FunctionExpression":{"enter":[null]},"Program":{"enter":[null]},"ObjectMethod":{"enter":[null]},"SwitchStatement":{"enter":[null]},"WhileStatement":{"enter":[null]},"ArrowFunctionExpression":{"enter":[null]},"ClassDeclaration":{"enter":[null]},"ClassExpression":{"enter":[null]},"ForOfStatement":{"enter":[null]},"ClassMethod":{"enter":[null]}},"options":{}},{"key":"base$0$0$17","visitor":{"RegExpLiteral":{"enter":[null]},"_exploded":true,"_verified":true},"options":{}},{"key":"base$0$0$18","visitor":{"_exploded":true,"_verified":true},"options":{}},{"key":"base$0$0$19","visitor":{"_exploded":{},"_verified":{},"VariableDeclarator":{"enter":[null]},"ExportNamedDeclaration":{"enter":[null]},"CatchClause":{"enter":[null]},"AssignmentExpression":{"enter":[null]},"ObjectExpression":{"enter":[null]},"FunctionDeclaration":{"enter":[null]},"FunctionExpression":{"enter":[null]},"ObjectMethod":{"enter":[null]},"ArrowFunctionExpression":{"enter":[null]},"ClassMethod":{"enter":[null]},"ForInStatement":{"enter":[null]},"ForOfStatement":{"enter":[null]}},"options":{}},{"key":"base$0$0$20","visitor":{"ObjectProperty":{"exit":[null]},"_exploded":true,"_verified":true},"options":{}},{"key":"base$0$0$21","visitor":{"_exploded":{},"_verified":{},"Program":{"enter":[null]},"ImportDeclaration":{"enter":[null,null]},"ClassProperty":{"enter":[null]},"AssignmentPattern":{"enter":[null]},"TypeCastExpression":{"enter":[null,null]},"ImportSpecifier":{"enter":[null]},"ClassDeclaration":{"enter":[null]},"ClassExpression":{"enter":[null]},"FunctionDeclaration":{"enter":[null]},"FunctionExpression":{"enter":[null]},"ObjectMethod":{"enter":[null]},"ArrowFunctionExpression":{"enter":[null]},"ClassMethod":{"enter":[null]},"AnyTypeAnnotation":{"enter":[null]},"ArrayTypeAnnotation":{"enter":[null]},"BooleanTypeAnnotation":{"enter":[null]},"BooleanLiteralTypeAnnotation":{"enter":[null]},"NullLiteralTypeAnnotation":{"enter":[null]},"ClassImplements":{"enter":[null]},"DeclareClass":{"enter":[null]},"DeclareFunction":{"enter":[null]},"DeclareInterface":{"enter":[null]},"DeclareModule":{"enter":[null]},"DeclareModuleExports":{"enter":[null]},"DeclareTypeAlias":{"enter":[null]},"DeclareOpaqueType":{"enter":[null]},"DeclareVariable":{"enter":[null]},"DeclareExportDeclaration":{"enter":[null]},"DeclareExportAllDeclaration":{"enter":[null]},"DeclaredPredicate":{"enter":[null]},"ExistsTypeAnnotation":{"enter":[null]},"FunctionTypeAnnotation":{"enter":[null]},"FunctionTypeParam":{"enter":[null]},"GenericTypeAnnotation":{"enter":[null]},"InferredPredicate":{"enter":[null]},"InterfaceExtends":{"enter":[null]},"InterfaceDeclaration":{"enter":[null]},"IntersectionTypeAnnotation":{"enter":[null]},"MixedTypeAnnotation":{"enter":[null]},"EmptyTypeAnnotation":{"enter":[null]},"NullableTypeAnnotation":{"enter":[null]},"NumberLiteralTypeAnnotation":{"enter":[null]},"NumberTypeAnnotation":{"enter":[null]},"ObjectTypeAnnotation":{"enter":[null]},"ObjectTypeCallProperty":{"enter":[null]},"ObjectTypeIndexer":{"enter":[null]},"ObjectTypeProperty":{"enter":[null]},"ObjectTypeSpreadProperty":{"enter":[null]},"OpaqueType":{"enter":[null]},"QualifiedTypeIdentifier":{"enter":[null]},"StringLiteralTypeAnnotation":{"enter":[null]},"StringTypeAnnotation":{"enter":[null]},"ThisTypeAnnotation":{"enter":[null]},"TupleTypeAnnotation":{"enter":[null]},"TypeofTypeAnnotation":{"enter":[null]},"TypeAlias":{"enter":[null]},"TypeAnnotation":{"enter":[null]},"TypeParameter":{"enter":[null]},"TypeParameterDeclaration":{"enter":[null]},"TypeParameterInstantiation":{"enter":[null]},"UnionTypeAnnotation":{"enter":[null]},"Variance":{"enter":[null]},"VoidTypeAnnotation":{"enter":[null]},"ExportAllDeclaration":{"enter":[null]},"ExportDefaultDeclaration":{"enter":[null]},"ExportNamedDeclaration":{"enter":[null]}},"options":{}},{"key":"base$0$0$22","visitor":{"AssignmentExpression":{"enter":[null]},"BinaryExpression":{"enter":[null]},"_exploded":true,"_verified":true},"options":{}},{"key":"base$0$0$23","visitor":{"_exploded":{},"_verified":{},"Program":{"enter":[null]}},"options":{}},{"key":"regenerator-transform","visitor":{"_exploded":true,"_verified":true,"FunctionDeclaration":{"exit":[null]},"FunctionExpression":{"exit":[null]},"ObjectMethod":{"exit":[null]},"ArrowFunctionExpression":{"exit":[null]},"ClassMethod":{"exit":[null]}},"options":{}}],"presets":[],"compact":false,"ast":true,"babelrc":false,"sourceFileName":"imports/plugins/core/orders/client/components/invoiceActions.js","filename":"imports/plugins/core/orders/client/components/invoiceActions.js","sourceMaps":true,"envName":"development","cwd":"/Users/estebandev/test-knowledge","passPerPreset":false,"parserOpts":{"sourceType":"module","sourceFileName":"imports/plugins/core/orders/client/components/invoiceActions.js","plugins":["dynamicImport","classProperties","jsx","jsx","flow","asyncGenerators","objectRestSpread","objectRestSpread","flow","asyncGenerators"]},"generatorOpts":{"filename":"imports/plugins/core/orders/client/components/invoiceActions.js","comments":true,"compact":false,"sourceMaps":true,"sourceFileName":"imports/plugins/core/orders/client/components/invoiceActions.js"}},"code":"var _assertThisInitialized2 = _interopRequireDefault(require(\"@babel/runtime/helpers/assertThisInitialized\"));\n\nvar _inheritsLoose2 = _interopRequireDefault(require(\"@babel/runtime/helpers/inheritsLoose\"));\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { \"default\": obj }; }\n\nvar module1 = module;\nvar React, Component;\nmodule1.watch(require(\"react\"), {\n  \"default\": function (v) {\n    React = v;\n  },\n  Component: function (v) {\n    Component = v;\n  }\n}, 0);\nvar PropTypes;\nmodule1.watch(require(\"prop-types\"), {\n  \"default\": function (v) {\n    PropTypes = v;\n  }\n}, 1);\nvar formatPriceString;\nmodule1.watch(require(\"../../../../../../client/api\"), {\n  formatPriceString: function (v) {\n    formatPriceString = v;\n  }\n}, 2);\nvar Components, registerComponent;\nmodule1.watch(require(\"../../../components/lib\"), {\n  Components: function (v) {\n    Components = v;\n  },\n  registerComponent: function (v) {\n    registerComponent = v;\n  }\n}, 3);\n\n/**\n * @file InvoiceActions React Component for displaying the actionable data on the invoice section on the orders sideview\n *\n * @module InvoiceActions\n * @extends Component\n */\nvar InvoiceActions =\n/*#__PURE__*/\nfunction (_Component) {\n  (0, _inheritsLoose2.default)(InvoiceActions, _Component);\n\n  function InvoiceActions() {\n    var _temp, _this;\n\n    for (var _len = arguments.length, args = new Array(_len), _key = 0; _key < _len; _key++) {\n      args[_key] = arguments[_key];\n    }\n\n    return (_temp = _this = _Component.call.apply(_Component, [this].concat(args)) || this, _this.state = {\n      value: 0\n    }, _temp) || (0, _assertThisInitialized2.default)(_this);\n  }\n\n  var _proto = InvoiceActions.prototype;\n\n  _proto.renderCapturedTotal = function () {\n    function renderCapturedTotal() {\n      var invoice = this.props.invoice;\n      return React.createElement(\"div\", {\n        className: \"invoice-summary\"\n      }, React.createElement(\"span\", {\n        className: \"invoice-label captured-total\"\n      }, React.createElement(\"strong\", null, React.createElement(Components.Translation, {\n        defaultValue: \"Captured Total\",\n        i18nKey: \"admin.invoice.capturedTotal\"\n      }))), React.createElement(\"div\", {\n        className: \"invoice-details\"\n      }, React.createElement(\"strong\", null, formatPriceString(invoice.total))));\n    }\n\n    return renderCapturedTotal;\n  }();\n\n  _proto.renderAdjustedTotal = function () {\n    function renderAdjustedTotal() {\n      var adjustedTotal = this.props.adjustedTotal;\n      return React.createElement(\"div\", {\n        className: \"invoice-summary\"\n      }, React.createElement(\"span\", {\n        className: \"invoice-label adjusted-total\"\n      }, React.createElement(\"strong\", null, React.createElement(Components.Translation, {\n        defaultValue: \"Adjusted Total\",\n        i18nKey: \"admin.invoice.adjustedTotal\"\n      }))), React.createElement(\"div\", {\n        className: \"invoice-details\"\n      }, React.createElement(\"strong\", null, formatPriceString(adjustedTotal))));\n    }\n\n    return renderAdjustedTotal;\n  }();\n\n  _proto.renderRefundForm = function () {\n    function renderRefundForm() {\n      var _this2 = this;\n\n      var adjustedTotal = this.props.adjustedTotal;\n      return React.createElement(\"div\", null, this.props.hasRefundingEnabled && React.createElement(\"div\", {\n        className: \"flex refund-container\"\n      }, React.createElement(\"div\", {\n        className: \"refund-input\"\n      }, React.createElement(Components.NumericInput, {\n        numericType: \"currency\",\n        value: this.state.value,\n        maxValue: adjustedTotal,\n        format: this.props.currency,\n        classNames: {\n          input: {\n            amount: true\n          }\n        },\n        onChange: function (event, value) {\n          _this2.setState({\n            value: value\n          });\n        }\n      })), React.createElement(Components.Button, {\n        className: \"flex-item-fill refund-button\",\n        type: \"button\",\n        status: \"primary\",\n        bezelStyle: \"solid\",\n        disabled: this.props.isRefunding || this.state.value === 0,\n        onClick: function (event) {\n          _this2.props.handleRefund(event, _this2.state.value);\n\n          _this2.setState({\n            value: 0\n          });\n        }\n      }, this.props.isRefunding ? React.createElement(\"span\", {\n        id: \"btn-refund-payment\",\n        \"data-i18n\": \"order.applyRefund\"\n      }, \"Refunding \", React.createElement(\"i\", {\n        className: \"fa fa-spinner fa-spin\"\n      })) : React.createElement(\"span\", {\n        id: \"btn-refund-payment\",\n        \"data-i18n\": \"order.applyRefund\"\n      }, \"Apply Refund\"))), this.props.showAfterPaymentCaptured && React.createElement(\"div\", {\n        className: \"cancel-order-btn\"\n      }, React.createElement(Components.Button, {\n        className: \"btn btn-danger\",\n        bezelStyle: \"solid\",\n        label: \"Cancel Order\",\n        i18nKeyLabel: \"order.cancelOrderLabel\",\n        type: \"button\",\n        \"data-event-action\": \"cancelOrder\",\n        style: {\n          marginBottom: 10\n        },\n        \"data-i18n\": \"order.cancelOrderLabel\"\n      })), React.createElement(\"a\", {\n        className: \"btn btn-default btn-block\",\n        href: this.props.printOrder,\n        target: \"_blank\",\n        \"data-i18n\": \"app.printInvoice\"\n      }, \"Print Invoice\"));\n    }\n\n    return renderRefundForm;\n  }();\n\n  _proto.renderApproval = function () {\n    function renderApproval() {\n      if (this.props.paymentPendingApproval) {\n        return React.createElement(\"div\", {\n          className: \"btn-block\"\n        }, React.createElement(\"div\", null, React.createElement(Components.ButtonSelect, {\n          buttons: [{\n            name: \"Approve\",\n            i18nKeyLabel: \"order.approveInvoice\",\n            active: true,\n            status: \"success\",\n            eventAction: \"approveInvoice\",\n            bgColor: \"bg-success\",\n            buttonType: \"submit\"\n          }, {\n            name: \"Cancel\",\n            i18nKeyLabel: \"order.cancelInvoice\",\n            active: false,\n            status: \"danger\",\n            eventAction: \"cancelOrder\",\n            bgColor: \"bg-danger\",\n            buttonType: \"button\"\n          }]\n        })));\n      }\n\n      if (this.props.paymentApproved) {\n        return React.createElement(\"div\", {\n          className: \"flex\"\n        }, React.createElement(\"a\", {\n          className: \"btn btn-link\",\n          href: this.props.printOrder,\n          target: \"_blank\",\n          \"data-i18n\": \"app.print\"\n        }, \"Print\"), React.createElement(\"button\", {\n          className: \"btn btn-success flex-item-fill\",\n          type: \"button\",\n          \"data-event-action\": \"capturePayment\",\n          disabled: this.props.isCapturing,\n          onClick: this.props.handleCapturePayment\n        }, this.props.isCapturing ? React.createElement(\"span\", {\n          id: \"btn-capture-payment\"\n        }, \"Capturing \", React.createElement(\"i\", {\n          className: \"fa fa-spinner fa-spin\",\n          id: \"btn-processing\"\n        })) : React.createElement(\"span\", {\n          id: \"btn-capture-payment\",\n          \"data-i18n\": \"order.capturePayment\"\n        }, \"Capture Payment\")));\n      }\n    }\n\n    return renderApproval;\n  }();\n\n  _proto.render = function () {\n    function render() {\n      return React.createElement(\"form\", {\n        onSubmit: this.props.handleApprove\n      }, React.createElement(\"div\", {\n        style: {\n          marginBottom: 15,\n          marginTop: 15\n        }\n      }, this.renderApproval(), this.props.paymentCaptured && React.createElement(\"div\", {\n        className: \"total-container\"\n      }, this.renderCapturedTotal(), this.props.invoice.total !== this.props.adjustedTotal && this.renderAdjustedTotal(), this.renderRefundForm())));\n    }\n\n    return render;\n  }();\n\n  return InvoiceActions;\n}(Component);\n\nInvoiceActions.propTypes = {\n  adjustedTotal: PropTypes.number,\n  currency: PropTypes.object,\n  handleApprove: PropTypes.func,\n  handleCapturePayment: PropTypes.func,\n  handleRefund: PropTypes.func,\n  hasRefundingEnabled: PropTypes.bool,\n  invoice: PropTypes.object,\n  isCapturing: PropTypes.bool,\n  isRefunding: PropTypes.bool,\n  paymentApproved: PropTypes.bool,\n  paymentCaptured: PropTypes.bool,\n  paymentPendingApproval: PropTypes.bool,\n  printOrder: PropTypes.string,\n  showAfterPaymentCaptured: PropTypes.bool\n};\nregisterComponent(\"InvoiceActions\", InvoiceActions);\nmodule1.exportDefault(InvoiceActions);","map":{"version":3,"sources":["imports/plugins/core/orders/client/components/invoiceActions.js"],"names":["module1","module","React","Component","watch","require","v","PropTypes","formatPriceString","Components","registerComponent","InvoiceActions","state","value","renderCapturedTotal","invoice","props","total","renderAdjustedTotal","adjustedTotal","renderRefundForm","hasRefundingEnabled","currency","input","amount","event","setState","isRefunding","handleRefund","showAfterPaymentCaptured","marginBottom","printOrder","renderApproval","paymentPendingApproval","name","i18nKeyLabel","active","status","eventAction","bgColor","buttonType","paymentApproved","isCapturing","handleCapturePayment","render","handleApprove","marginTop","paymentCaptured","propTypes","number","object","func","bool","string","exportDefault"],"mappings":"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","sourcesContent":["import React, { Component } from \"react\";\nimport PropTypes from \"prop-types\";\nimport { formatPriceString } from \"/client/api\";\nimport { Components, registerComponent } from \"@reactioncommerce/reaction-components\";\n\n/**\n * @file InvoiceActions React Component for displaying the actionable data on the invoice section on the orders sideview\n *\n * @module InvoiceActions\n * @extends Component\n */\n\nclass InvoiceActions extends Component {\n  /**\n   * @name InvoiceActions propTypes\n   * @summary React component for displaying the actionable data on the invoice section on the orders sideview\n   * @param {Object} props - React PropTypes\n   * @property {Object} invoice - An object representing an invoice\n   * @property {Array} refunds - An array/list of refunds\n   * @property {Function} handleApprove - A function for approving payments\n   * @property {Function} handleCapturePayment - A function for capturing payments\n   * @property {Function} handleRefund - A function for refunding payments\n   * @property {Object} currency - A object represting current shop currency details\n   * @property {String} printOrder - A string representing the route/path for printed order\n   * @property {Number} adjustedTotal - The calculated adjusted total after refunds/discounts\n   * @property {Bool} paymentCaptured - A boolean indicating whether payment has been captured\n   * @property {Bool} hasRefundingEnabled - A boolean indicating whether payment supports refunds\n   * @property {Bool} paymentApproved - A boolean indicating whether payment has been approved\n   * @property {Bool} paymentPendingApproval - A boolean indicating whether payment is yet to be approved\n   * @property {Bool} showAfterPaymentCaptured - A boolean indicating that status of the order is completed\n   * @property {Bool} isCapturing - A boolean indicating whether payment is being captured\n   * @property {Bool} isRefunding - A boolean indicating whether payment is being refunded\n   * @return {Node} React node containing component for displaying the `invoice` section on the orders sideview\n   */\n  static propTypes = {\n    adjustedTotal: PropTypes.number,\n    currency: PropTypes.object,\n    handleApprove: PropTypes.func,\n    handleCapturePayment: PropTypes.func,\n    handleRefund: PropTypes.func,\n    hasRefundingEnabled: PropTypes.bool,\n    invoice: PropTypes.object,\n    isCapturing: PropTypes.bool,\n    isRefunding: PropTypes.bool,\n    paymentApproved: PropTypes.bool,\n    paymentCaptured: PropTypes.bool,\n    paymentPendingApproval: PropTypes.bool,\n    printOrder: PropTypes.string,\n    showAfterPaymentCaptured: PropTypes.bool\n  }\n\n  state = {\n    value: 0\n  }\n\n  renderCapturedTotal() {\n    const { invoice } = this.props;\n\n    return (\n      <div className=\"invoice-summary\">\n        <span className=\"invoice-label captured-total\">\n          <strong><Components.Translation defaultValue=\"Captured Total\" i18nKey=\"admin.invoice.capturedTotal\"/></strong>\n        </span>\n\n        <div className=\"invoice-details\">\n          <strong>{formatPriceString(invoice.total)}</strong>\n        </div>\n      </div>\n    );\n  }\n\n  renderAdjustedTotal() {\n    const { adjustedTotal } = this.props;\n\n    return (\n      <div className=\"invoice-summary\">\n        <span className=\"invoice-label adjusted-total\">\n          <strong><Components.Translation defaultValue=\"Adjusted Total\" i18nKey=\"admin.invoice.adjustedTotal\"/></strong>\n        </span>\n\n        <div className=\"invoice-details\">\n          <strong>{formatPriceString(adjustedTotal)}</strong>\n        </div>\n      </div>\n    );\n  }\n\n  renderRefundForm() {\n    const { adjustedTotal } = this.props;\n\n    return (\n      <div>\n        {this.props.hasRefundingEnabled &&\n          <div className=\"flex refund-container\">\n            <div className=\"refund-input\">\n              <Components.NumericInput\n                numericType=\"currency\"\n                value={this.state.value}\n                maxValue={adjustedTotal}\n                format={this.props.currency}\n                classNames={{\n                  input: {\n                    amount: true\n                  }\n                }}\n                onChange={(event, value) => {\n                  this.setState({\n                    value\n                  });\n                }}\n              />\n            </div>\n\n            <Components.Button\n              className=\"flex-item-fill refund-button\"\n              type=\"button\"\n              status=\"primary\"\n              bezelStyle=\"solid\"\n              disabled={this.props.isRefunding || this.state.value === 0}\n              onClick={(event) => {\n                this.props.handleRefund(event, this.state.value);\n                this.setState({\n                  value: 0\n                });\n              }}\n            >\n              {this.props.isRefunding ?\n                <span id=\"btn-refund-payment\" data-i18n=\"order.applyRefund\">Refunding <i className=\"fa fa-spinner fa-spin\" /></span> :\n                <span id=\"btn-refund-payment\" data-i18n=\"order.applyRefund\">Apply Refund</span>\n              }\n            </Components.Button>\n          </div>\n        }\n\n        {this.props.showAfterPaymentCaptured &&\n          <div className=\"cancel-order-btn\">\n            <Components.Button\n              className=\"btn btn-danger\"\n              bezelStyle=\"solid\"\n              label=\"Cancel Order\"\n              i18nKeyLabel=\"order.cancelOrderLabel\"\n              type=\"button\"\n              data-event-action=\"cancelOrder\"\n              style={{ marginBottom: 10 }}\n              data-i18n=\"order.cancelOrderLabel\"\n            />\n          </div>\n        }\n\n        <a\n          className=\"btn btn-default btn-block\"\n          href={this.props.printOrder}\n          target=\"_blank\"\n          data-i18n=\"app.printInvoice\"\n        >\n          Print Invoice\n        </a>\n      </div>\n    );\n  }\n\n  renderApproval() {\n    if (this.props.paymentPendingApproval) {\n      return (\n        <div className=\"btn-block\">\n          <div>\n            <Components.ButtonSelect\n              buttons= {[\n                {\n                  name: \"Approve\",\n                  i18nKeyLabel: \"order.approveInvoice\",\n                  active: true,\n                  status: \"success\",\n                  eventAction: \"approveInvoice\",\n                  bgColor: \"bg-success\",\n                  buttonType: \"submit\"\n                }, {\n                  name: \"Cancel\",\n                  i18nKeyLabel: \"order.cancelInvoice\",\n                  active: false,\n                  status: \"danger\",\n                  eventAction: \"cancelOrder\",\n                  bgColor: \"bg-danger\",\n                  buttonType: \"button\"\n                }\n              ]}\n            />\n          </div>\n        </div>\n      );\n    }\n\n    if (this.props.paymentApproved) {\n      return (\n        <div className=\"flex\">\n          <a\n            className=\"btn btn-link\"\n            href={this.props.printOrder}\n            target=\"_blank\"\n            data-i18n=\"app.print\"\n          >\n            Print\n          </a>\n\n          <button\n            className=\"btn btn-success flex-item-fill\"\n            type=\"button\"\n            data-event-action=\"capturePayment\"\n            disabled={this.props.isCapturing}\n            onClick = {this.props.handleCapturePayment}\n          >\n\n            {this.props.isCapturing ?\n              <span id=\"btn-capture-payment\">\n                Capturing <i className=\"fa fa-spinner fa-spin\" id=\"btn-processing\" />\n              </span> :\n              <span id=\"btn-capture-payment\" data-i18n=\"order.capturePayment\">Capture Payment</span>\n            }\n          </button>\n        </div>\n      );\n    }\n  }\n\n  render() {\n    return (\n      <form onSubmit={this.props.handleApprove}>\n\n        <div style={{ marginBottom: 15, marginTop: 15 }}>\n          {this.renderApproval()}\n          {this.props.paymentCaptured &&\n            <div className=\"total-container\">\n              {this.renderCapturedTotal()}\n              {this.props.invoice.total !== this.props.adjustedTotal && this.renderAdjustedTotal()}\n              {this.renderRefundForm()}\n            </div>\n          }\n        </div>\n      </form>\n\n    );\n  }\n}\n\nregisterComponent(\"InvoiceActions\", InvoiceActions);\n\nexport default InvoiceActions;\n"]},"sourceType":"script","hash":"bd3972fb48585804b66a6a6bf715692aed68effc"}
