{"metadata":{},"options":{"plugins":[{"key":"base$0$0","visitor":{"Program":{"enter":[null]},"_exploded":true,"_verified":true},"options":{"generateLetDeclarations":true,"enforceStrictMode":false}},{"key":"transform-meteor-dynamic-import","visitor":{"_exploded":{},"_verified":{},"CallExpression":{"enter":[null]}},"options":{}},{"key":"base$0$2","visitor":{"CallExpression":{"enter":[null]},"BinaryExpression":{"enter":[null]},"MemberExpression":{"enter":[null],"exit":[null]},"_exploded":true,"_verified":true,"Identifier":{"enter":[null]},"JSXIdentifier":{"enter":[null]}},"options":{"polyfill":false,"useBuiltIns":false}},{"key":"base$0$3","visitor":{"_exploded":{},"_verified":{},"ClassDeclaration":{"enter":[null]},"ClassExpression":{"enter":[null]}},"options":{"loose":true}},{"key":"base$0$4","visitor":{"FunctionExpression":{"exit":[null]},"_exploded":true,"_verified":true},"options":{}},{"key":"base$0$5","visitor":{"ForInStatement":{"enter":[null]},"_exploded":true,"_verified":true},"options":{}},{"key":"base$0$6","visitor":{"Program":{"exit":[null]},"_exploded":true,"_verified":true},"options":{"allowTopLevelThis":true,"strictMode":false,"loose":true}},{"key":"base$0$1$0","visitor":{"_exploded":{},"_verified":{},"JSXNamespacedName":{"enter":[null]},"JSXElement":{"exit":[null]},"JSXFragment":{"exit":[null]},"Program":{"enter":[null],"exit":[null]},"JSXAttribute":{"enter":[null]}},"options":{"pragma":"React.createElement","pragmaFrag":"React.Fragment","throwIfNamespace":true,"useBuiltIns":false}},{"key":"base$0$1$1","visitor":{"_exploded":true,"_verified":true},"options":{}},{"key":"base$0$1$2","visitor":{"ExportDefaultDeclaration":{"enter":[null]},"CallExpression":{"enter":[null]},"_exploded":true,"_verified":true},"options":{}},{"key":"base$0$0$0","visitor":{"_exploded":true,"_verified":true},"options":{}},{"key":"base$0$0$1","visitor":{"_exploded":true,"_verified":true},"options":{}},{"key":"base$0$0$2","visitor":{"ArrowFunctionExpression":{"enter":[null]},"_exploded":true,"_verified":true},"options":{}},{"key":"base$0$0$3","visitor":{"BlockStatement":{"enter":[null]},"SwitchCase":{"enter":[null]},"_exploded":true,"_verified":true},"options":{}},{"key":"base$0$0$4","visitor":{"VariableDeclaration":{"enter":[null]},"CatchClause":{"enter":[null]},"_exploded":true,"BlockStatement":{"enter":[null]},"SwitchStatement":{"enter":[null]},"Program":{"enter":[null]},"_verified":true,"DoWhileStatement":{"enter":[null]},"ForInStatement":{"enter":[null]},"ForStatement":{"enter":[null]},"WhileStatement":{"enter":[null]},"ForOfStatement":{"enter":[null]}},"options":{}},{"key":"base$0$0$5","visitor":{"ExportDefaultDeclaration":{"enter":[null]},"ClassDeclaration":{"enter":[null]},"ClassExpression":{"enter":[null]},"_exploded":true,"_verified":true},"options":{"loose":true}},{"key":"base$0$0$6","visitor":{"ObjectExpression":{"exit":[null]},"_exploded":true,"_verified":true},"options":{"loose":true}},{"key":"base$0$0$7","visitor":{"ExportNamedDeclaration":{"enter":[null]},"CatchClause":{"enter":[null]},"AssignmentExpression":{"enter":[null]},"VariableDeclaration":{"enter":[null]},"_exploded":true,"_verified":true,"ForInStatement":{"enter":[null]},"ForOfStatement":{"enter":[null]}},"options":{}},{"key":"base$0$0$8","visitor":{"ForOfStatement":{"enter":[null]},"_exploded":true,"_verified":true},"options":{"loose":true}},{"key":"base$0$0$9","visitor":{"NumericLiteral":{"enter":[null]},"StringLiteral":{"enter":[null]},"_exploded":true,"_verified":true},"options":{}},{"key":"base$0$0$10","visitor":{"ObjectExpression":{"enter":[null]},"_exploded":true,"_verified":true},"options":{}},{"key":"base$0$0$11","visitor":{"_exploded":true,"_verified":true,"FunctionDeclaration":{"enter":[null]},"FunctionExpression":{"enter":[null]},"ObjectMethod":{"enter":[null]},"ArrowFunctionExpression":{"enter":[null]},"ClassMethod":{"enter":[null]}},"options":{}},{"key":"base$0$0$12","visitor":{"ObjectMethod":{"enter":[null]},"ObjectProperty":{"enter":[null]},"_exploded":true,"_verified":true},"options":{}},{"key":"base$0$0$13","visitor":{"ArrayExpression":{"enter":[null]},"CallExpression":{"enter":[null]},"NewExpression":{"enter":[null]},"_exploded":true,"_verified":true},"options":{}},{"key":"base$0$0$14","visitor":{"RegExpLiteral":{"enter":[null]},"_exploded":true,"_verified":true},"options":{}},{"key":"base$0$0$15","visitor":{"TaggedTemplateExpression":{"enter":[null]},"TemplateLiteral":{"enter":[null]},"_exploded":true,"_verified":true},"options":{"loose":true}},{"key":"base$0$0$16","visitor":{"UnaryExpression":{"enter":[null]},"_exploded":true,"_verified":true,"BlockStatement":{"enter":[null]},"CatchClause":{"enter":[null]},"DoWhileStatement":{"enter":[null]},"ForInStatement":{"enter":[null]},"ForStatement":{"enter":[null]},"FunctionDeclaration":{"enter":[null]},"FunctionExpression":{"enter":[null]},"Program":{"enter":[null]},"ObjectMethod":{"enter":[null]},"SwitchStatement":{"enter":[null]},"WhileStatement":{"enter":[null]},"ArrowFunctionExpression":{"enter":[null]},"ClassDeclaration":{"enter":[null]},"ClassExpression":{"enter":[null]},"ForOfStatement":{"enter":[null]},"ClassMethod":{"enter":[null]}},"options":{}},{"key":"base$0$0$17","visitor":{"RegExpLiteral":{"enter":[null]},"_exploded":true,"_verified":true},"options":{}},{"key":"base$0$0$18","visitor":{"_exploded":true,"_verified":true},"options":{}},{"key":"base$0$0$19","visitor":{"_exploded":{},"_verified":{},"VariableDeclarator":{"enter":[null]},"ExportNamedDeclaration":{"enter":[null]},"CatchClause":{"enter":[null]},"AssignmentExpression":{"enter":[null]},"ObjectExpression":{"enter":[null]},"FunctionDeclaration":{"enter":[null]},"FunctionExpression":{"enter":[null]},"ObjectMethod":{"enter":[null]},"ArrowFunctionExpression":{"enter":[null]},"ClassMethod":{"enter":[null]},"ForInStatement":{"enter":[null]},"ForOfStatement":{"enter":[null]}},"options":{}},{"key":"base$0$0$20","visitor":{"ObjectProperty":{"exit":[null]},"_exploded":true,"_verified":true},"options":{}},{"key":"base$0$0$21","visitor":{"_exploded":{},"_verified":{},"Program":{"enter":[null]},"ImportDeclaration":{"enter":[null,null]},"ClassProperty":{"enter":[null]},"AssignmentPattern":{"enter":[null]},"TypeCastExpression":{"enter":[null,null]},"ImportSpecifier":{"enter":[null]},"ClassDeclaration":{"enter":[null]},"ClassExpression":{"enter":[null]},"FunctionDeclaration":{"enter":[null]},"FunctionExpression":{"enter":[null]},"ObjectMethod":{"enter":[null]},"ArrowFunctionExpression":{"enter":[null]},"ClassMethod":{"enter":[null]},"AnyTypeAnnotation":{"enter":[null]},"ArrayTypeAnnotation":{"enter":[null]},"BooleanTypeAnnotation":{"enter":[null]},"BooleanLiteralTypeAnnotation":{"enter":[null]},"NullLiteralTypeAnnotation":{"enter":[null]},"ClassImplements":{"enter":[null]},"DeclareClass":{"enter":[null]},"DeclareFunction":{"enter":[null]},"DeclareInterface":{"enter":[null]},"DeclareModule":{"enter":[null]},"DeclareModuleExports":{"enter":[null]},"DeclareTypeAlias":{"enter":[null]},"DeclareOpaqueType":{"enter":[null]},"DeclareVariable":{"enter":[null]},"DeclareExportDeclaration":{"enter":[null]},"DeclareExportAllDeclaration":{"enter":[null]},"DeclaredPredicate":{"enter":[null]},"ExistsTypeAnnotation":{"enter":[null]},"FunctionTypeAnnotation":{"enter":[null]},"FunctionTypeParam":{"enter":[null]},"GenericTypeAnnotation":{"enter":[null]},"InferredPredicate":{"enter":[null]},"InterfaceExtends":{"enter":[null]},"InterfaceDeclaration":{"enter":[null]},"IntersectionTypeAnnotation":{"enter":[null]},"MixedTypeAnnotation":{"enter":[null]},"EmptyTypeAnnotation":{"enter":[null]},"NullableTypeAnnotation":{"enter":[null]},"NumberLiteralTypeAnnotation":{"enter":[null]},"NumberTypeAnnotation":{"enter":[null]},"ObjectTypeAnnotation":{"enter":[null]},"ObjectTypeCallProperty":{"enter":[null]},"ObjectTypeIndexer":{"enter":[null]},"ObjectTypeProperty":{"enter":[null]},"ObjectTypeSpreadProperty":{"enter":[null]},"OpaqueType":{"enter":[null]},"QualifiedTypeIdentifier":{"enter":[null]},"StringLiteralTypeAnnotation":{"enter":[null]},"StringTypeAnnotation":{"enter":[null]},"ThisTypeAnnotation":{"enter":[null]},"TupleTypeAnnotation":{"enter":[null]},"TypeofTypeAnnotation":{"enter":[null]},"TypeAlias":{"enter":[null]},"TypeAnnotation":{"enter":[null]},"TypeParameter":{"enter":[null]},"TypeParameterDeclaration":{"enter":[null]},"TypeParameterInstantiation":{"enter":[null]},"UnionTypeAnnotation":{"enter":[null]},"Variance":{"enter":[null]},"VoidTypeAnnotation":{"enter":[null]},"ExportAllDeclaration":{"enter":[null]},"ExportDefaultDeclaration":{"enter":[null]},"ExportNamedDeclaration":{"enter":[null]}},"options":{}},{"key":"base$0$0$22","visitor":{"AssignmentExpression":{"enter":[null]},"BinaryExpression":{"enter":[null]},"_exploded":true,"_verified":true},"options":{}},{"key":"base$0$0$23","visitor":{"_exploded":{},"_verified":{},"Program":{"enter":[null]}},"options":{}},{"key":"regenerator-transform","visitor":{"_exploded":true,"_verified":true,"FunctionDeclaration":{"exit":[null]},"FunctionExpression":{"exit":[null]},"ObjectMethod":{"exit":[null]},"ArrowFunctionExpression":{"exit":[null]},"ClassMethod":{"exit":[null]}},"options":{}}],"presets":[],"compact":false,"ast":true,"babelrc":false,"sourceFileName":"imports/plugins/core/ui-navbar/client/containers/navbar.js","filename":"imports/plugins/core/ui-navbar/client/containers/navbar.js","sourceMaps":true,"envName":"development","cwd":"/Users/estebandev/test-knowledge","passPerPreset":false,"parserOpts":{"sourceType":"module","sourceFileName":"imports/plugins/core/ui-navbar/client/containers/navbar.js","plugins":["dynamicImport","classProperties","jsx","jsx","flow","asyncGenerators","objectRestSpread","objectRestSpread","flow","asyncGenerators"]},"generatorOpts":{"filename":"imports/plugins/core/ui-navbar/client/containers/navbar.js","comments":true,"compact":false,"sourceMaps":true,"sourceFileName":"imports/plugins/core/ui-navbar/client/containers/navbar.js"}},"code":"module.export({\n  composer: function () {\n    return composer;\n  }\n});\nvar registerComponent, composeWithTracker;\nmodule.watch(require(\"../../../components/lib\"), {\n  registerComponent: function (v) {\n    registerComponent = v;\n  },\n  composeWithTracker: function (v) {\n    composeWithTracker = v;\n  }\n}, 0);\nvar Meteor;\nmodule.watch(require(\"meteor/meteor\"), {\n  Meteor: function (v) {\n    Meteor = v;\n  }\n}, 1);\nvar Reaction;\nmodule.watch(require(\"../../../../../../client/api\"), {\n  Reaction: function (v) {\n    Reaction = v;\n  }\n}, 2);\nvar NavBar;\nmodule.watch(require(\"../components/navbar\"), {\n  \"default\": function (v) {\n    NavBar = v;\n  }\n}, 3);\nvar Shops;\nmodule.watch(require(\"../../../../../../lib/collections\"), {\n  Shops: function (v) {\n    Shops = v;\n  }\n}, 4);\nvar Media;\nmodule.watch(require(\"../../../files/client\"), {\n  Media: function (v) {\n    Media = v;\n  }\n}, 5);\n\nfunction composer(props, onData) {\n  var shopSub = Meteor.subscribe(\"MerchantShops\", Reaction.getShopsForUser([\"admin\"]));\n\n  if (!shopSub.ready()) {\n    return;\n  }\n\n  var shop = Shops.findOne(Reaction.getShopId());\n  var searchPackage = Reaction.Apps({\n    provides: \"ui-search\"\n  });\n  var user = Meteor.user();\n  var searchEnabled;\n  var searchTemplate;\n  var brandMedia;\n  var shops;\n\n  if (user && user.roles) {\n    // Get all shops for which user has roles\n    shops = Shops.find({\n      $and: [{\n        _id: {\n          $in: Object.keys(user.roles)\n        }\n      }, {\n        $or: [{\n          \"workflow.status\": \"active\"\n        }, {\n          _id: Reaction.getPrimaryShopId()\n        }]\n      }]\n    }).fetch();\n  }\n  /**\n   * handleShopSelectChange\n   * @method\n   * @summary Handle change in selected shop\n   * @param {script} event\n   * @param {String} shopId - selected shopId\n   * @since 1.5.8\n   * @return {void}\n  */\n\n\n  var handleShopSelectChange = function (event, shopId) {\n    // set shopId\n    Reaction.setShopId(shopId);\n  };\n\n  if (searchPackage.length) {\n    searchEnabled = true;\n    searchTemplate = searchPackage[0].template;\n  } else {\n    searchEnabled = false;\n  }\n\n  if (shop && Array.isArray(shop.brandAssets)) {\n    var brandAsset = shop.brandAssets.find(function (asset) {\n      return asset.type === \"navbarBrandImage\";\n    });\n    brandMedia = brandAsset && Media.findOneLocal(brandAsset.mediaId);\n  }\n\n  var hasProperPermission = Reaction.hasPermission(\"account/profile\");\n  onData(null, {\n    shop: shop,\n    brandMedia: brandMedia,\n    searchEnabled: searchEnabled,\n    searchTemplate: searchTemplate,\n    hasProperPermission: hasProperPermission,\n    shops: shops,\n    handleShopSelectChange: handleShopSelectChange\n  });\n}\n\nregisterComponent(\"NavBar\", NavBar, composeWithTracker(composer));\nmodule.exportDefault(composeWithTracker(composer)(NavBar));","map":{"version":3,"sources":["imports/plugins/core/ui-navbar/client/containers/navbar.js"],"names":["module","export","composer","registerComponent","composeWithTracker","watch","require","v","Meteor","Reaction","NavBar","Shops","Media","props","onData","shopSub","subscribe","getShopsForUser","ready","shop","findOne","getShopId","searchPackage","Apps","provides","user","searchEnabled","searchTemplate","brandMedia","shops","roles","find","$and","_id","$in","Object","keys","$or","getPrimaryShopId","fetch","handleShopSelectChange","event","shopId","setShopId","length","template","Array","isArray","brandAssets","brandAsset","asset","type","findOneLocal","mediaId","hasProperPermission","hasPermission","exportDefault"],"mappings":"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","sourcesContent":["import { registerComponent, composeWithTracker } from \"@reactioncommerce/reaction-components\";\nimport { Meteor } from \"meteor/meteor\";\nimport { Reaction } from \"/client/api\";\nimport NavBar from \"../components/navbar\";\nimport { Shops } from \"/lib/collections\";\nimport { Media } from \"/imports/plugins/core/files/client\";\n\nexport function composer(props, onData) {\n  const shopSub = Meteor.subscribe(\"MerchantShops\", Reaction.getShopsForUser([\"admin\"]));\n  if (!shopSub.ready()) {\n    return;\n  }\n  const shop = Shops.findOne(Reaction.getShopId());\n  const searchPackage = Reaction.Apps({ provides: \"ui-search\" });\n  const user = Meteor.user();\n  let searchEnabled;\n  let searchTemplate;\n  let brandMedia;\n\n  let shops;\n\n  if (user && user.roles) {\n    // Get all shops for which user has roles\n    shops = Shops.find({\n      $and: [\n        { _id: { $in: Object.keys(user.roles) } },\n        { $or: [{ \"workflow.status\": \"active\" }, { _id: Reaction.getPrimaryShopId() }] }\n      ]\n    }).fetch();\n  }\n\n  /**\n   * handleShopSelectChange\n   * @method\n   * @summary Handle change in selected shop\n   * @param {script} event\n   * @param {String} shopId - selected shopId\n   * @since 1.5.8\n   * @return {void}\n  */\n  const handleShopSelectChange = (event, shopId) => {\n    // set shopId\n    Reaction.setShopId(shopId);\n  };\n  if (searchPackage.length) {\n    searchEnabled = true;\n    searchTemplate = searchPackage[0].template;\n  } else {\n    searchEnabled = false;\n  }\n\n  if (shop && Array.isArray(shop.brandAssets)) {\n    const brandAsset = shop.brandAssets.find((asset) => asset.type === \"navbarBrandImage\");\n    brandMedia = brandAsset && Media.findOneLocal(brandAsset.mediaId);\n  }\n\n  const hasProperPermission = Reaction.hasPermission(\"account/profile\");\n\n  onData(null, {\n    shop,\n    brandMedia,\n    searchEnabled,\n    searchTemplate,\n    hasProperPermission,\n    shops,\n    handleShopSelectChange\n  });\n}\n\nregisterComponent(\"NavBar\", NavBar, composeWithTracker(composer));\n\nexport default composeWithTracker(composer)(NavBar);\n"]},"sourceType":"script","hash":"c36394e9cdb3dbd14a9f7ee2dd581bb2b822b256"}
