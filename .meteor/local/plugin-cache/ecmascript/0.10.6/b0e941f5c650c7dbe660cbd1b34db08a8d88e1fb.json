{"metadata":{},"options":{"plugins":[{"key":"base$0$0","visitor":{"Program":{"enter":[null]},"_exploded":true,"_verified":true},"options":{"generateLetDeclarations":true,"enforceStrictMode":false}},{"key":"transform-meteor-dynamic-import","visitor":{"_exploded":{},"_verified":{},"CallExpression":{"enter":[null]}},"options":{}},{"key":"base$0$2","visitor":{"CallExpression":{"enter":[null]},"BinaryExpression":{"enter":[null]},"MemberExpression":{"enter":[null],"exit":[null]},"_exploded":true,"_verified":true,"Identifier":{"enter":[null]},"JSXIdentifier":{"enter":[null]}},"options":{"polyfill":false,"useBuiltIns":false}},{"key":"base$0$3","visitor":{"_exploded":{},"_verified":{},"ClassDeclaration":{"enter":[null]},"ClassExpression":{"enter":[null]}},"options":{"loose":true}},{"key":"base$0$4","visitor":{"FunctionExpression":{"exit":[null]},"_exploded":true,"_verified":true},"options":{}},{"key":"base$0$5","visitor":{"ForInStatement":{"enter":[null]},"_exploded":true,"_verified":true},"options":{}},{"key":"base$0$6","visitor":{"Program":{"exit":[null]},"_exploded":true,"_verified":true},"options":{"allowTopLevelThis":true,"strictMode":false,"loose":true}},{"key":"base$0$1$0","visitor":{"_exploded":{},"_verified":{},"JSXNamespacedName":{"enter":[null]},"JSXElement":{"exit":[null]},"JSXFragment":{"exit":[null]},"Program":{"enter":[null],"exit":[null]},"JSXAttribute":{"enter":[null]}},"options":{"pragma":"React.createElement","pragmaFrag":"React.Fragment","throwIfNamespace":true,"useBuiltIns":false}},{"key":"base$0$1$1","visitor":{"_exploded":true,"_verified":true},"options":{}},{"key":"base$0$1$2","visitor":{"ExportDefaultDeclaration":{"enter":[null]},"CallExpression":{"enter":[null]},"_exploded":true,"_verified":true},"options":{}},{"key":"base$0$0$0","visitor":{"_exploded":true,"_verified":true},"options":{}},{"key":"base$0$0$1","visitor":{"_exploded":true,"_verified":true},"options":{}},{"key":"base$0$0$2","visitor":{"ArrowFunctionExpression":{"enter":[null]},"_exploded":true,"_verified":true},"options":{}},{"key":"base$0$0$3","visitor":{"BlockStatement":{"enter":[null]},"SwitchCase":{"enter":[null]},"_exploded":true,"_verified":true},"options":{}},{"key":"base$0$0$4","visitor":{"VariableDeclaration":{"enter":[null]},"CatchClause":{"enter":[null]},"_exploded":true,"BlockStatement":{"enter":[null]},"SwitchStatement":{"enter":[null]},"Program":{"enter":[null]},"_verified":true,"DoWhileStatement":{"enter":[null]},"ForInStatement":{"enter":[null]},"ForStatement":{"enter":[null]},"WhileStatement":{"enter":[null]},"ForOfStatement":{"enter":[null]}},"options":{}},{"key":"base$0$0$5","visitor":{"ExportDefaultDeclaration":{"enter":[null]},"ClassDeclaration":{"enter":[null]},"ClassExpression":{"enter":[null]},"_exploded":true,"_verified":true},"options":{"loose":true}},{"key":"base$0$0$6","visitor":{"ObjectExpression":{"exit":[null]},"_exploded":true,"_verified":true},"options":{"loose":true}},{"key":"base$0$0$7","visitor":{"ExportNamedDeclaration":{"enter":[null]},"CatchClause":{"enter":[null]},"AssignmentExpression":{"enter":[null]},"VariableDeclaration":{"enter":[null]},"_exploded":true,"_verified":true,"ForInStatement":{"enter":[null]},"ForOfStatement":{"enter":[null]}},"options":{}},{"key":"base$0$0$8","visitor":{"ForOfStatement":{"enter":[null]},"_exploded":true,"_verified":true},"options":{"loose":true}},{"key":"base$0$0$9","visitor":{"NumericLiteral":{"enter":[null]},"StringLiteral":{"enter":[null]},"_exploded":true,"_verified":true},"options":{}},{"key":"base$0$0$10","visitor":{"ObjectExpression":{"enter":[null]},"_exploded":true,"_verified":true},"options":{}},{"key":"base$0$0$11","visitor":{"_exploded":true,"_verified":true,"FunctionDeclaration":{"enter":[null]},"FunctionExpression":{"enter":[null]},"ObjectMethod":{"enter":[null]},"ArrowFunctionExpression":{"enter":[null]},"ClassMethod":{"enter":[null]}},"options":{}},{"key":"base$0$0$12","visitor":{"ObjectMethod":{"enter":[null]},"ObjectProperty":{"enter":[null]},"_exploded":true,"_verified":true},"options":{}},{"key":"base$0$0$13","visitor":{"ArrayExpression":{"enter":[null]},"CallExpression":{"enter":[null]},"NewExpression":{"enter":[null]},"_exploded":true,"_verified":true},"options":{}},{"key":"base$0$0$14","visitor":{"RegExpLiteral":{"enter":[null]},"_exploded":true,"_verified":true},"options":{}},{"key":"base$0$0$15","visitor":{"TaggedTemplateExpression":{"enter":[null]},"TemplateLiteral":{"enter":[null]},"_exploded":true,"_verified":true},"options":{"loose":true}},{"key":"base$0$0$16","visitor":{"UnaryExpression":{"enter":[null]},"_exploded":true,"_verified":true,"BlockStatement":{"enter":[null]},"CatchClause":{"enter":[null]},"DoWhileStatement":{"enter":[null]},"ForInStatement":{"enter":[null]},"ForStatement":{"enter":[null]},"FunctionDeclaration":{"enter":[null]},"FunctionExpression":{"enter":[null]},"Program":{"enter":[null]},"ObjectMethod":{"enter":[null]},"SwitchStatement":{"enter":[null]},"WhileStatement":{"enter":[null]},"ArrowFunctionExpression":{"enter":[null]},"ClassDeclaration":{"enter":[null]},"ClassExpression":{"enter":[null]},"ForOfStatement":{"enter":[null]},"ClassMethod":{"enter":[null]}},"options":{}},{"key":"base$0$0$17","visitor":{"RegExpLiteral":{"enter":[null]},"_exploded":true,"_verified":true},"options":{}},{"key":"base$0$0$18","visitor":{"_exploded":true,"_verified":true},"options":{}},{"key":"base$0$0$19","visitor":{"_exploded":{},"_verified":{},"VariableDeclarator":{"enter":[null]},"ExportNamedDeclaration":{"enter":[null]},"CatchClause":{"enter":[null]},"AssignmentExpression":{"enter":[null]},"ObjectExpression":{"enter":[null]},"FunctionDeclaration":{"enter":[null]},"FunctionExpression":{"enter":[null]},"ObjectMethod":{"enter":[null]},"ArrowFunctionExpression":{"enter":[null]},"ClassMethod":{"enter":[null]},"ForInStatement":{"enter":[null]},"ForOfStatement":{"enter":[null]}},"options":{}},{"key":"base$0$0$20","visitor":{"ObjectProperty":{"exit":[null]},"_exploded":true,"_verified":true},"options":{}},{"key":"base$0$0$21","visitor":{"_exploded":{},"_verified":{},"Program":{"enter":[null]},"ImportDeclaration":{"enter":[null,null]},"ClassProperty":{"enter":[null]},"AssignmentPattern":{"enter":[null]},"TypeCastExpression":{"enter":[null,null]},"ImportSpecifier":{"enter":[null]},"ClassDeclaration":{"enter":[null]},"ClassExpression":{"enter":[null]},"FunctionDeclaration":{"enter":[null]},"FunctionExpression":{"enter":[null]},"ObjectMethod":{"enter":[null]},"ArrowFunctionExpression":{"enter":[null]},"ClassMethod":{"enter":[null]},"AnyTypeAnnotation":{"enter":[null]},"ArrayTypeAnnotation":{"enter":[null]},"BooleanTypeAnnotation":{"enter":[null]},"BooleanLiteralTypeAnnotation":{"enter":[null]},"NullLiteralTypeAnnotation":{"enter":[null]},"ClassImplements":{"enter":[null]},"DeclareClass":{"enter":[null]},"DeclareFunction":{"enter":[null]},"DeclareInterface":{"enter":[null]},"DeclareModule":{"enter":[null]},"DeclareModuleExports":{"enter":[null]},"DeclareTypeAlias":{"enter":[null]},"DeclareOpaqueType":{"enter":[null]},"DeclareVariable":{"enter":[null]},"DeclareExportDeclaration":{"enter":[null]},"DeclareExportAllDeclaration":{"enter":[null]},"DeclaredPredicate":{"enter":[null]},"ExistsTypeAnnotation":{"enter":[null]},"FunctionTypeAnnotation":{"enter":[null]},"FunctionTypeParam":{"enter":[null]},"GenericTypeAnnotation":{"enter":[null]},"InferredPredicate":{"enter":[null]},"InterfaceExtends":{"enter":[null]},"InterfaceDeclaration":{"enter":[null]},"IntersectionTypeAnnotation":{"enter":[null]},"MixedTypeAnnotation":{"enter":[null]},"EmptyTypeAnnotation":{"enter":[null]},"NullableTypeAnnotation":{"enter":[null]},"NumberLiteralTypeAnnotation":{"enter":[null]},"NumberTypeAnnotation":{"enter":[null]},"ObjectTypeAnnotation":{"enter":[null]},"ObjectTypeCallProperty":{"enter":[null]},"ObjectTypeIndexer":{"enter":[null]},"ObjectTypeProperty":{"enter":[null]},"ObjectTypeSpreadProperty":{"enter":[null]},"OpaqueType":{"enter":[null]},"QualifiedTypeIdentifier":{"enter":[null]},"StringLiteralTypeAnnotation":{"enter":[null]},"StringTypeAnnotation":{"enter":[null]},"ThisTypeAnnotation":{"enter":[null]},"TupleTypeAnnotation":{"enter":[null]},"TypeofTypeAnnotation":{"enter":[null]},"TypeAlias":{"enter":[null]},"TypeAnnotation":{"enter":[null]},"TypeParameter":{"enter":[null]},"TypeParameterDeclaration":{"enter":[null]},"TypeParameterInstantiation":{"enter":[null]},"UnionTypeAnnotation":{"enter":[null]},"Variance":{"enter":[null]},"VoidTypeAnnotation":{"enter":[null]},"ExportAllDeclaration":{"enter":[null]},"ExportDefaultDeclaration":{"enter":[null]},"ExportNamedDeclaration":{"enter":[null]}},"options":{}},{"key":"base$0$0$22","visitor":{"AssignmentExpression":{"enter":[null]},"BinaryExpression":{"enter":[null]},"_exploded":true,"_verified":true},"options":{}},{"key":"base$0$0$23","visitor":{"_exploded":{},"_verified":{},"Program":{"enter":[null]}},"options":{}},{"key":"regenerator-transform","visitor":{"_exploded":true,"_verified":true,"FunctionDeclaration":{"exit":[null]},"FunctionExpression":{"exit":[null]},"ObjectMethod":{"exit":[null]},"ArrowFunctionExpression":{"exit":[null]},"ClassMethod":{"exit":[null]}},"options":{}}],"presets":[],"compact":false,"ast":true,"babelrc":false,"sourceFileName":"imports/plugins/included/product-variant/containers/variantEditContainer.js","filename":"imports/plugins/included/product-variant/containers/variantEditContainer.js","sourceMaps":true,"envName":"development","cwd":"/Users/estebandev/test-knowledge","passPerPreset":false,"parserOpts":{"sourceType":"module","sourceFileName":"imports/plugins/included/product-variant/containers/variantEditContainer.js","plugins":["dynamicImport","classProperties","jsx","jsx","flow","asyncGenerators","objectRestSpread","objectRestSpread","flow","asyncGenerators"]},"generatorOpts":{"filename":"imports/plugins/included/product-variant/containers/variantEditContainer.js","comments":true,"compact":false,"sourceMaps":true,"sourceFileName":"imports/plugins/included/product-variant/containers/variantEditContainer.js"}},"code":"var _inheritsLoose2 = _interopRequireDefault(require(\"@babel/runtime/helpers/inheritsLoose\"));\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { \"default\": obj }; }\n\nvar _compose;\n\nmodule.watch(require(\"recompose/compose\"), {\n  \"default\": function (v) {\n    _compose = v;\n  }\n}, 0);\nvar React, Component;\nmodule.watch(require(\"react\"), {\n  \"default\": function (v) {\n    React = v;\n  },\n  Component: function (v) {\n    Component = v;\n  }\n}, 1);\nvar PropTypes;\nmodule.watch(require(\"prop-types\"), {\n  \"default\": function (v) {\n    PropTypes = v;\n  }\n}, 2);\nvar registerComponent, composeWithTracker;\nmodule.watch(require(\"../../../core/components/lib\"), {\n  registerComponent: function (v) {\n    registerComponent = v;\n  },\n  composeWithTracker: function (v) {\n    composeWithTracker = v;\n  }\n}, 3);\nvar Meteor;\nmodule.watch(require(\"meteor/meteor\"), {\n  Meteor: function (v) {\n    Meteor = v;\n  }\n}, 4);\nvar ReactionProduct;\nmodule.watch(require(\"../../../../../lib/api\"), {\n  ReactionProduct: function (v) {\n    ReactionProduct = v;\n  }\n}, 5);\nvar Products;\nmodule.watch(require(\"../../../../../lib/collections\"), {\n  Products: function (v) {\n    Products = v;\n  }\n}, 6);\nvar Countries;\nmodule.watch(require(\"../../../../../client/collections\"), {\n  Countries: function (v) {\n    Countries = v;\n  }\n}, 7);\nvar Reaction, i18next;\nmodule.watch(require(\"../../../../../client/api\"), {\n  Reaction: function (v) {\n    Reaction = v;\n  },\n  i18next: function (v) {\n    i18next = v;\n  }\n}, 8);\nvar applyProductRevision;\nmodule.watch(require(\"../../../../../lib/api/products\"), {\n  applyProductRevision: function (v) {\n    applyProductRevision = v;\n  }\n}, 9);\nvar VariantEdit;\nmodule.watch(require(\"../components/variantEdit\"), {\n  \"default\": function (v) {\n    VariantEdit = v;\n  }\n}, 10);\n\nvar wrapComponent = function (Comp) {\n  var _class, _temp;\n\n  return _temp = _class =\n  /*#__PURE__*/\n  function (_Component) {\n    (0, _inheritsLoose2.default)(VariantEditContainer, _Component);\n\n    function VariantEditContainer() {\n      return _Component.apply(this, arguments) || this;\n    }\n\n    var _proto = VariantEditContainer.prototype;\n\n    _proto.handleCreateNewChildVariant = function () {\n      function handleCreateNewChildVariant(variant) {\n        Meteor.call(\"products/createVariant\", variant._id, function (error, result) {\n          if (error) {\n            Alerts.alert({\n              text: i18next.t(\"productDetailEdit.addVariantFail\", {\n                title: variant.title\n              }),\n              confirmButtonText: i18next.t(\"app.close\", {\n                defaultValue: \"Close\"\n              })\n            });\n          } else if (result) {\n            var newVariantId = result;\n            var selectedProduct = ReactionProduct.selectedProduct();\n            var handle = selectedProduct.__published && selectedProduct.__published.handle || selectedProduct.handle;\n            ReactionProduct.setCurrentVariant(newVariantId); // Session.set(\"variant-form-\" + newVariantId, true);\n\n            var cardName = \"variant-\" + newVariantId;\n            Reaction.state.set(\"edit/focus\", cardName);\n            Reaction.Router.go(\"product\", {\n              handle: handle,\n              variantId: newVariantId\n            });\n          }\n        });\n      }\n\n      return handleCreateNewChildVariant;\n    }();\n\n    _proto.render = function () {\n      function render() {\n        return React.createElement(Comp, {\n          childVariants: this.props.childVariants,\n          countries: this.props.countries,\n          editFocus: this.props.editFocus,\n          handleCreateNewChildVariant: this.handleCreateNewChildVariant,\n          variant: this.props.variant\n        });\n      }\n\n      return render;\n    }();\n\n    return VariantEditContainer;\n  }(Component), _class.propTypes = {\n    childVariants: PropTypes.arrayOf(PropTypes.object),\n    countries: PropTypes.arrayOf(PropTypes.object),\n    editFocus: PropTypes.string,\n    variant: PropTypes.object\n  }, _temp;\n};\n\nfunction composer(props, onData) {\n  Meteor.subscribe(\"TaxCodes\").ready();\n  var productHandle = Reaction.Router.getParam(\"handle\");\n\n  if (!productHandle) {\n    Reaction.clearActionView();\n  }\n\n  if (ReactionProduct.selectedTopVariant()) {\n    var variant = Products.findOne({\n      _id: ReactionProduct.selectedTopVariant()._id\n    });\n    var revisedVariant = applyProductRevision(variant);\n    var childVariants = ReactionProduct.getVariants(revisedVariant._id);\n    onData(null, {\n      countries: Countries.find({}).fetch(),\n      editFocus: Reaction.state.get(\"edit/focus\"),\n      childVariants: childVariants,\n      variant: revisedVariant\n    });\n  } else {\n    onData(null, {\n      countries: Countries.find({}).fetch()\n    });\n  }\n}\n\nregisterComponent(\"VariantEditForm\", VariantEdit, [composeWithTracker(composer), wrapComponent]);\nmodule.exportDefault(_compose(composeWithTracker(composer), wrapComponent)(VariantEdit));","map":{"version":3,"sources":["imports/plugins/included/product-variant/containers/variantEditContainer.js"],"names":["_compose","module","watch","require","v","React","Component","PropTypes","registerComponent","composeWithTracker","Meteor","ReactionProduct","Products","Countries","Reaction","i18next","applyProductRevision","VariantEdit","wrapComponent","Comp","handleCreateNewChildVariant","variant","call","_id","error","result","Alerts","alert","text","t","title","confirmButtonText","defaultValue","newVariantId","selectedProduct","handle","__published","setCurrentVariant","cardName","state","set","Router","go","variantId","render","props","childVariants","countries","editFocus","propTypes","arrayOf","object","string","composer","onData","subscribe","ready","productHandle","getParam","clearActionView","selectedTopVariant","findOne","revisedVariant","getVariants","find","fetch","get","exportDefault"],"mappings":"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","sourcesContent":["import React, { Component } from \"react\";\nimport PropTypes from \"prop-types\";\nimport { compose } from \"recompose\";\nimport { registerComponent, composeWithTracker } from \"@reactioncommerce/reaction-components\";\nimport { Meteor } from \"meteor/meteor\";\nimport { ReactionProduct } from \"/lib/api\";\nimport { Products } from \"/lib/collections\";\nimport { Countries } from \"/client/collections\";\nimport { Reaction, i18next } from \"/client/api\";\nimport { applyProductRevision } from \"/lib/api/products\";\nimport VariantEdit from \"../components/variantEdit\";\n\n\nconst wrapComponent = (Comp) => (\n  class VariantEditContainer extends Component {\n    static propTypes = {\n      childVariants: PropTypes.arrayOf(PropTypes.object),\n      countries: PropTypes.arrayOf(PropTypes.object),\n      editFocus: PropTypes.string,\n      variant: PropTypes.object\n    };\n\n    handleCreateNewChildVariant(variant) {\n      Meteor.call(\"products/createVariant\", variant._id, (error, result) => {\n        if (error) {\n          Alerts.alert({\n            text: i18next.t(\"productDetailEdit.addVariantFail\", { title: variant.title }),\n            confirmButtonText: i18next.t(\"app.close\", { defaultValue: \"Close\" })\n          });\n        } else if (result) {\n          const newVariantId = result;\n          const selectedProduct = ReactionProduct.selectedProduct();\n          const handle = (selectedProduct.__published && selectedProduct.__published.handle) || selectedProduct.handle;\n          ReactionProduct.setCurrentVariant(newVariantId);\n          // Session.set(\"variant-form-\" + newVariantId, true);\n          const cardName = `variant-${newVariantId}`;\n          Reaction.state.set(\"edit/focus\", cardName);\n\n          Reaction.Router.go(\"product\", {\n            handle,\n            variantId: newVariantId\n          });\n        }\n      });\n    }\n\n    render() {\n      return (\n        <Comp\n          childVariants={this.props.childVariants}\n          countries={this.props.countries}\n          editFocus={this.props.editFocus}\n          handleCreateNewChildVariant={this.handleCreateNewChildVariant}\n          variant={this.props.variant}\n        />\n      );\n    }\n  }\n);\n\nfunction composer(props, onData) {\n  Meteor.subscribe(\"TaxCodes\").ready();\n\n  const productHandle = Reaction.Router.getParam(\"handle\");\n\n  if (!productHandle) {\n    Reaction.clearActionView();\n  }\n\n  if (ReactionProduct.selectedTopVariant()) {\n    const variant = Products.findOne({\n      _id: ReactionProduct.selectedTopVariant()._id\n    });\n\n    const revisedVariant = applyProductRevision(variant);\n    const childVariants = ReactionProduct.getVariants(revisedVariant._id);\n\n    onData(null, {\n      countries: Countries.find({}).fetch(),\n      editFocus: Reaction.state.get(\"edit/focus\"),\n      childVariants,\n      variant: revisedVariant\n    });\n  } else {\n    onData(null, {\n      countries: Countries.find({}).fetch()\n    });\n  }\n}\n\n\nregisterComponent(\"VariantEditForm\", VariantEdit, [\n  composeWithTracker(composer),\n  wrapComponent\n]);\n\nexport default compose(\n  composeWithTracker(composer),\n  wrapComponent\n)(VariantEdit);\n"]},"sourceType":"script","hash":"b0e941f5c650c7dbe660cbd1b34db08a8d88e1fb"}
