{"metadata":{},"options":{"plugins":[{"key":"base$0$0","visitor":{"Program":{"enter":[null]},"_exploded":true,"_verified":true},"options":{"generateLetDeclarations":true,"enforceStrictMode":false}},{"key":"transform-meteor-dynamic-import","visitor":{"_exploded":{},"_verified":{},"CallExpression":{"enter":[null]}},"options":{}},{"key":"base$0$2","visitor":{"CallExpression":{"enter":[null]},"BinaryExpression":{"enter":[null]},"MemberExpression":{"enter":[null],"exit":[null]},"_exploded":true,"_verified":true,"Identifier":{"enter":[null]},"JSXIdentifier":{"enter":[null]}},"options":{"polyfill":false,"useBuiltIns":false}},{"key":"base$0$3","visitor":{"_exploded":{},"_verified":{},"ClassDeclaration":{"enter":[null]},"ClassExpression":{"enter":[null]}},"options":{"loose":true}},{"key":"base$0$4","visitor":{"FunctionExpression":{"exit":[null]},"_exploded":true,"_verified":true},"options":{}},{"key":"base$0$5","visitor":{"ForInStatement":{"enter":[null]},"_exploded":true,"_verified":true},"options":{}},{"key":"base$0$6","visitor":{"Program":{"exit":[null]},"_exploded":true,"_verified":true},"options":{"allowTopLevelThis":true,"strictMode":false,"loose":true}},{"key":"base$0$1$0","visitor":{"_exploded":{},"_verified":{},"JSXNamespacedName":{"enter":[null]},"JSXElement":{"exit":[null]},"JSXFragment":{"exit":[null]},"Program":{"enter":[null],"exit":[null]},"JSXAttribute":{"enter":[null]}},"options":{"pragma":"React.createElement","pragmaFrag":"React.Fragment","throwIfNamespace":true,"useBuiltIns":false}},{"key":"base$0$1$1","visitor":{"_exploded":true,"_verified":true},"options":{}},{"key":"base$0$1$2","visitor":{"ExportDefaultDeclaration":{"enter":[null]},"CallExpression":{"enter":[null]},"_exploded":true,"_verified":true},"options":{}},{"key":"base$0$0$0","visitor":{"_exploded":true,"_verified":true},"options":{}},{"key":"base$0$0$1","visitor":{"_exploded":true,"_verified":true},"options":{}},{"key":"base$0$0$2","visitor":{"ArrowFunctionExpression":{"enter":[null]},"_exploded":true,"_verified":true},"options":{}},{"key":"base$0$0$3","visitor":{"BlockStatement":{"enter":[null]},"SwitchCase":{"enter":[null]},"_exploded":true,"_verified":true},"options":{}},{"key":"base$0$0$4","visitor":{"VariableDeclaration":{"enter":[null]},"CatchClause":{"enter":[null]},"_exploded":true,"BlockStatement":{"enter":[null]},"SwitchStatement":{"enter":[null]},"Program":{"enter":[null]},"_verified":true,"DoWhileStatement":{"enter":[null]},"ForInStatement":{"enter":[null]},"ForStatement":{"enter":[null]},"WhileStatement":{"enter":[null]},"ForOfStatement":{"enter":[null]}},"options":{}},{"key":"base$0$0$5","visitor":{"ExportDefaultDeclaration":{"enter":[null]},"ClassDeclaration":{"enter":[null]},"ClassExpression":{"enter":[null]},"_exploded":true,"_verified":true},"options":{"loose":true}},{"key":"base$0$0$6","visitor":{"ObjectExpression":{"exit":[null]},"_exploded":true,"_verified":true},"options":{"loose":true}},{"key":"base$0$0$7","visitor":{"ExportNamedDeclaration":{"enter":[null]},"CatchClause":{"enter":[null]},"AssignmentExpression":{"enter":[null]},"VariableDeclaration":{"enter":[null]},"_exploded":true,"_verified":true,"ForInStatement":{"enter":[null]},"ForOfStatement":{"enter":[null]}},"options":{}},{"key":"base$0$0$8","visitor":{"ForOfStatement":{"enter":[null]},"_exploded":true,"_verified":true},"options":{"loose":true}},{"key":"base$0$0$9","visitor":{"NumericLiteral":{"enter":[null]},"StringLiteral":{"enter":[null]},"_exploded":true,"_verified":true},"options":{}},{"key":"base$0$0$10","visitor":{"ObjectExpression":{"enter":[null]},"_exploded":true,"_verified":true},"options":{}},{"key":"base$0$0$11","visitor":{"_exploded":true,"_verified":true,"FunctionDeclaration":{"enter":[null]},"FunctionExpression":{"enter":[null]},"ObjectMethod":{"enter":[null]},"ArrowFunctionExpression":{"enter":[null]},"ClassMethod":{"enter":[null]}},"options":{}},{"key":"base$0$0$12","visitor":{"ObjectMethod":{"enter":[null]},"ObjectProperty":{"enter":[null]},"_exploded":true,"_verified":true},"options":{}},{"key":"base$0$0$13","visitor":{"ArrayExpression":{"enter":[null]},"CallExpression":{"enter":[null]},"NewExpression":{"enter":[null]},"_exploded":true,"_verified":true},"options":{}},{"key":"base$0$0$14","visitor":{"RegExpLiteral":{"enter":[null]},"_exploded":true,"_verified":true},"options":{}},{"key":"base$0$0$15","visitor":{"TaggedTemplateExpression":{"enter":[null]},"TemplateLiteral":{"enter":[null]},"_exploded":true,"_verified":true},"options":{"loose":true}},{"key":"base$0$0$16","visitor":{"UnaryExpression":{"enter":[null]},"_exploded":true,"_verified":true,"BlockStatement":{"enter":[null]},"CatchClause":{"enter":[null]},"DoWhileStatement":{"enter":[null]},"ForInStatement":{"enter":[null]},"ForStatement":{"enter":[null]},"FunctionDeclaration":{"enter":[null]},"FunctionExpression":{"enter":[null]},"Program":{"enter":[null]},"ObjectMethod":{"enter":[null]},"SwitchStatement":{"enter":[null]},"WhileStatement":{"enter":[null]},"ArrowFunctionExpression":{"enter":[null]},"ClassDeclaration":{"enter":[null]},"ClassExpression":{"enter":[null]},"ForOfStatement":{"enter":[null]},"ClassMethod":{"enter":[null]}},"options":{}},{"key":"base$0$0$17","visitor":{"RegExpLiteral":{"enter":[null]},"_exploded":true,"_verified":true},"options":{}},{"key":"base$0$0$18","visitor":{"_exploded":true,"_verified":true},"options":{}},{"key":"base$0$0$19","visitor":{"_exploded":{},"_verified":{},"VariableDeclarator":{"enter":[null]},"ExportNamedDeclaration":{"enter":[null]},"CatchClause":{"enter":[null]},"AssignmentExpression":{"enter":[null]},"ObjectExpression":{"enter":[null]},"FunctionDeclaration":{"enter":[null]},"FunctionExpression":{"enter":[null]},"ObjectMethod":{"enter":[null]},"ArrowFunctionExpression":{"enter":[null]},"ClassMethod":{"enter":[null]},"ForInStatement":{"enter":[null]},"ForOfStatement":{"enter":[null]}},"options":{}},{"key":"base$0$0$20","visitor":{"ObjectProperty":{"exit":[null]},"_exploded":true,"_verified":true},"options":{}},{"key":"base$0$0$21","visitor":{"_exploded":{},"_verified":{},"Program":{"enter":[null]},"ImportDeclaration":{"enter":[null,null]},"ClassProperty":{"enter":[null]},"AssignmentPattern":{"enter":[null]},"TypeCastExpression":{"enter":[null,null]},"ImportSpecifier":{"enter":[null]},"ClassDeclaration":{"enter":[null]},"ClassExpression":{"enter":[null]},"FunctionDeclaration":{"enter":[null]},"FunctionExpression":{"enter":[null]},"ObjectMethod":{"enter":[null]},"ArrowFunctionExpression":{"enter":[null]},"ClassMethod":{"enter":[null]},"AnyTypeAnnotation":{"enter":[null]},"ArrayTypeAnnotation":{"enter":[null]},"BooleanTypeAnnotation":{"enter":[null]},"BooleanLiteralTypeAnnotation":{"enter":[null]},"NullLiteralTypeAnnotation":{"enter":[null]},"ClassImplements":{"enter":[null]},"DeclareClass":{"enter":[null]},"DeclareFunction":{"enter":[null]},"DeclareInterface":{"enter":[null]},"DeclareModule":{"enter":[null]},"DeclareModuleExports":{"enter":[null]},"DeclareTypeAlias":{"enter":[null]},"DeclareOpaqueType":{"enter":[null]},"DeclareVariable":{"enter":[null]},"DeclareExportDeclaration":{"enter":[null]},"DeclareExportAllDeclaration":{"enter":[null]},"DeclaredPredicate":{"enter":[null]},"ExistsTypeAnnotation":{"enter":[null]},"FunctionTypeAnnotation":{"enter":[null]},"FunctionTypeParam":{"enter":[null]},"GenericTypeAnnotation":{"enter":[null]},"InferredPredicate":{"enter":[null]},"InterfaceExtends":{"enter":[null]},"InterfaceDeclaration":{"enter":[null]},"IntersectionTypeAnnotation":{"enter":[null]},"MixedTypeAnnotation":{"enter":[null]},"EmptyTypeAnnotation":{"enter":[null]},"NullableTypeAnnotation":{"enter":[null]},"NumberLiteralTypeAnnotation":{"enter":[null]},"NumberTypeAnnotation":{"enter":[null]},"ObjectTypeAnnotation":{"enter":[null]},"ObjectTypeCallProperty":{"enter":[null]},"ObjectTypeIndexer":{"enter":[null]},"ObjectTypeProperty":{"enter":[null]},"ObjectTypeSpreadProperty":{"enter":[null]},"OpaqueType":{"enter":[null]},"QualifiedTypeIdentifier":{"enter":[null]},"StringLiteralTypeAnnotation":{"enter":[null]},"StringTypeAnnotation":{"enter":[null]},"ThisTypeAnnotation":{"enter":[null]},"TupleTypeAnnotation":{"enter":[null]},"TypeofTypeAnnotation":{"enter":[null]},"TypeAlias":{"enter":[null]},"TypeAnnotation":{"enter":[null]},"TypeParameter":{"enter":[null]},"TypeParameterDeclaration":{"enter":[null]},"TypeParameterInstantiation":{"enter":[null]},"UnionTypeAnnotation":{"enter":[null]},"Variance":{"enter":[null]},"VoidTypeAnnotation":{"enter":[null]},"ExportAllDeclaration":{"enter":[null]},"ExportDefaultDeclaration":{"enter":[null]},"ExportNamedDeclaration":{"enter":[null]}},"options":{}},{"key":"base$0$0$22","visitor":{"AssignmentExpression":{"enter":[null]},"BinaryExpression":{"enter":[null]},"_exploded":true,"_verified":true},"options":{}},{"key":"base$0$0$23","visitor":{"_exploded":{},"_verified":{},"Program":{"enter":[null]}},"options":{}},{"key":"regenerator-transform","visitor":{"_exploded":true,"_verified":true,"FunctionDeclaration":{"exit":[null]},"FunctionExpression":{"exit":[null]},"ObjectMethod":{"exit":[null]},"ArrowFunctionExpression":{"exit":[null]},"ClassMethod":{"exit":[null]}},"options":{}}],"presets":[],"compact":false,"ast":true,"babelrc":false,"sourceFileName":"imports/plugins/core/layout/lib/reactionLayout.js","filename":"imports/plugins/core/layout/lib/reactionLayout.js","sourceMaps":true,"envName":"development","cwd":"/Users/estebandev/test-knowledge","passPerPreset":false,"parserOpts":{"sourceType":"module","sourceFileName":"imports/plugins/core/layout/lib/reactionLayout.js","plugins":["dynamicImport","classProperties","jsx","jsx","flow","asyncGenerators","objectRestSpread","objectRestSpread","flow","asyncGenerators"]},"generatorOpts":{"filename":"imports/plugins/core/layout/lib/reactionLayout.js","comments":true,"compact":false,"sourceMaps":true,"sourceFileName":"imports/plugins/core/layout/lib/reactionLayout.js"}},"code":"var _objectSpread2 = _interopRequireDefault(require(\"@babel/runtime/helpers/objectSpread\"));\n\nvar _createClass2 = _interopRequireDefault(require(\"@babel/runtime/helpers/createClass\"));\n\nvar _inheritsLoose2 = _interopRequireDefault(require(\"@babel/runtime/helpers/inheritsLoose\"));\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { \"default\": obj }; }\n\nvar _compose;\n\nmodule.watch(require(\"recompose/compose\"), {\n  \"default\": function (v) {\n    _compose = v;\n  }\n}, 0);\nvar React, Component;\nmodule.watch(require(\"react\"), {\n  \"default\": function (v) {\n    React = v;\n  },\n  Component: function (v) {\n    Component = v;\n  }\n}, 1);\nvar PropTypes;\nmodule.watch(require(\"prop-types\"), {\n  \"default\": function (v) {\n    PropTypes = v;\n  }\n}, 2);\nvar Radium;\nmodule.watch(require(\"radium\"), {\n  \"default\": function (v) {\n    Radium = v;\n  }\n}, 3);\nvar getComponent, registerComponent, composeWithTracker;\nmodule.watch(require(\"../../components/lib\"), {\n  getComponent: function (v) {\n    getComponent = v;\n  },\n  registerComponent: function (v) {\n    registerComponent = v;\n  },\n  composeWithTracker: function (v) {\n    composeWithTracker = v;\n  }\n}, 4);\nvar Meteor;\nmodule.watch(require(\"meteor/meteor\"), {\n  Meteor: function (v) {\n    Meteor = v;\n  }\n}, 5);\nvar Reaction;\nmodule.watch(require(\"../../../../../client/api\"), {\n  Reaction: function (v) {\n    Reaction = v;\n  }\n}, 6);\nvar classnames;\nmodule.watch(require(\"classnames\"), {\n  \"default\": function (v) {\n    classnames = v;\n  }\n}, 7);\nvar Templates;\nmodule.watch(require(\"../../../../../lib/collections\"), {\n  Templates: function (v) {\n    Templates = v;\n  }\n}, 8);\n\nvar ReactionLayout =\n/*#__PURE__*/\nfunction (_Component) {\n  (0, _inheritsLoose2.default)(ReactionLayout, _Component);\n\n  function ReactionLayout() {\n    return _Component.apply(this, arguments) || this;\n  }\n\n  var _proto = ReactionLayout.prototype;\n\n  _proto.checkElementPermissions = function () {\n    function checkElementPermissions(block) {\n      var permissions;\n      var hasAdminAccess = Reaction.hasAdminAccess();\n\n      if (hasAdminAccess === false) {\n        permissions = block.audience || this.props.defaultAudience;\n      } else {\n        permissions = block.permissions || this.props.defaultPermissions;\n      }\n\n      return Reaction.hasPermission(permissions || []);\n    }\n\n    return checkElementPermissions;\n  }();\n\n  _proto.renderLayout = function () {\n    function renderLayout(children) {\n      var _this = this;\n\n      if (!Array.isArray(children)) {\n        return null;\n      }\n\n      var elements = children.map(function (block, index) {\n        var childElements;\n\n        if (Array.isArray(block.children)) {\n          childElements = block.children.map(function (child, childIndex) {\n            if (child.type === \"block\") {\n              return _this.renderLayout([child]);\n            }\n\n            if (_this.checkElementPermissions(child)) {\n              var component = child.component;\n\n              try {\n                if (typeof child.component === \"string\") {\n                  component = getComponent(child.component);\n                }\n\n                return React.createElement(component, (0, _objectSpread2.default)({\n                  key: childIndex\n                }, child.props || {}, _this.props.layoutProps));\n              } catch (e) {\n                return null;\n              }\n            }\n\n            return null;\n          });\n        }\n\n        if (_this.checkElementPermissions(block)) {\n          var _classnames;\n\n          return React.createElement(block.element || \"div\", {\n            key: index,\n            // className: classnames(`rui col-xs-${block.columns || 12}`, block.className),\n            className: classnames((_classnames = {\n              rui: true,\n              item: true\n            }, _classnames[block.size || \"full\"] = true, _classnames.align = typeof block.align === \"string\", _classnames[block.align || \"start\"] = true, _classnames.justify = typeof block.align === \"string\", _classnames[block.justify || \"start\"] = true, _classnames.axis = true, _classnames.horizontal = block.axis === \"horizontal\", _classnames.vertical = block.axis !== \"horizontal\", _classnames), block.className),\n            style: block.style,\n            children: childElements\n          });\n        }\n\n        return null;\n      });\n      return elements;\n    }\n\n    return renderLayout;\n  }();\n\n  _proto.render = function () {\n    function render() {\n      return React.createElement(\"div\", {\n        className: \"rui layout-base items flex\"\n      }, this.renderLayout(this.layout));\n    }\n\n    return render;\n  }();\n\n  (0, _createClass2.default)(ReactionLayout, [{\n    key: \"layout\",\n    get: function () {\n      return this.props.layout;\n    }\n  }]);\n  return ReactionLayout;\n}(Component);\n\nReactionLayout.propTypes = {\n  defaultAudience: PropTypes.oneOfType([PropTypes.string, PropTypes.arrayOf(PropTypes.string)]),\n  defaultPermissions: PropTypes.oneOfType([PropTypes.string, PropTypes.arrayOf(PropTypes.string)]),\n  layout: PropTypes.oneOfType([PropTypes.object, PropTypes.array]),\n  layoutProps: PropTypes.object\n};\n\nfunction composer(props, onData) {\n  var sub = Meteor.subscribe(\"Templates\");\n\n  if (sub.ready()) {\n    var templateInfo = Templates.findOne({\n      name: props.layoutName\n    });\n\n    if (templateInfo) {\n      var templateData = templateInfo.template;\n      onData(null, {\n        defaultPermissions: [\"admin\"],\n        defaultAudience: [\"guest\", \"anonymous\"],\n        layout: templateData\n      });\n    }\n  }\n}\n\nregisterComponent(\"ReactionLayout\", ReactionLayout, [composeWithTracker(composer), Radium]);\nmodule.exportDefault(_compose(composeWithTracker(composer), Radium)(ReactionLayout));","map":{"version":3,"sources":["imports/plugins/core/layout/lib/reactionLayout.js"],"names":["_compose","module","watch","require","v","React","Component","PropTypes","Radium","getComponent","registerComponent","composeWithTracker","Meteor","Reaction","classnames","Templates","ReactionLayout","checkElementPermissions","block","permissions","hasAdminAccess","audience","props","defaultAudience","defaultPermissions","hasPermission","renderLayout","children","Array","isArray","elements","map","index","childElements","child","childIndex","type","component","createElement","key","layoutProps","e","element","className","rui","item","size","align","justify","axis","horizontal","vertical","style","render","layout","propTypes","oneOfType","string","arrayOf","object","array","composer","onData","sub","subscribe","ready","templateInfo","findOne","name","layoutName","templateData","template","exportDefault"],"mappings":"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","sourcesContent":["import React, { Component } from \"react\";\nimport PropTypes from \"prop-types\";\nimport Radium from \"radium\";\nimport { compose } from \"recompose\";\nimport { getComponent, registerComponent, composeWithTracker } from \"@reactioncommerce/reaction-components\";\nimport { Meteor } from \"meteor/meteor\";\nimport { Reaction } from \"/client/api\";\nimport classnames from \"classnames\";\nimport { Templates } from \"/lib/collections\";\n\nclass ReactionLayout extends Component {\n  get layout() {\n    return this.props.layout;\n  }\n\n  checkElementPermissions(block) {\n    let permissions;\n    const hasAdminAccess = Reaction.hasAdminAccess();\n\n    if (hasAdminAccess === false) {\n      permissions = block.audience || this.props.defaultAudience;\n    } else {\n      permissions = block.permissions || this.props.defaultPermissions;\n    }\n\n    return Reaction.hasPermission(permissions || []);\n  }\n\n  renderLayout(children) {\n    if (!Array.isArray(children)) {\n      return null;\n    }\n\n    const elements = children.map((block, index) => {\n      let childElements;\n\n      if (Array.isArray(block.children)) {\n        childElements = block.children.map((child, childIndex) => {\n          if (child.type === \"block\") {\n            return this.renderLayout([child]);\n          }\n\n          if (this.checkElementPermissions(child)) {\n            let { component } = child;\n\n            try {\n              if (typeof child.component === \"string\") {\n                component = getComponent(child.component);\n              }\n\n              return React.createElement(component, {\n                key: childIndex,\n                ...(child.props || {}),\n                ...this.props.layoutProps\n              });\n            } catch (e) {\n              return null;\n            }\n          }\n\n          return null;\n        });\n      }\n\n\n      if (this.checkElementPermissions(block)) {\n        return React.createElement(block.element || \"div\", {\n          key: index,\n          // className: classnames(`rui col-xs-${block.columns || 12}`, block.className),\n          className: classnames({\n            rui: true,\n            item: true,\n            [block.size || \"full\"]: true,\n            align: typeof block.align === \"string\",\n            [block.align || \"start\"]: true,\n            justify: typeof block.align === \"string\",\n            [block.justify || \"start\"]: true,\n            axis: true, // typeof block.axis === \"string\",\n            horizontal: block.axis === \"horizontal\",\n            vertical: block.axis !== \"horizontal\"\n          }, block.className),\n          style: block.style,\n          children: childElements\n        });\n      }\n\n      return null;\n    });\n\n    return elements;\n  }\n\n  render() {\n    return (\n      <div className=\"rui layout-base items flex\">\n        {this.renderLayout(this.layout)}\n      </div>\n    );\n  }\n}\n\nReactionLayout.propTypes = {\n  defaultAudience: PropTypes.oneOfType([\n    PropTypes.string,\n    PropTypes.arrayOf(PropTypes.string)\n  ]),\n  defaultPermissions: PropTypes.oneOfType([\n    PropTypes.string,\n    PropTypes.arrayOf(PropTypes.string)\n  ]),\n  layout: PropTypes.oneOfType([PropTypes.object, PropTypes.array]),\n  layoutProps: PropTypes.object\n};\n\nfunction composer(props, onData) {\n  const sub = Meteor.subscribe(\"Templates\");\n\n  if (sub.ready()) {\n    const templateInfo = Templates.findOne({\n      name: props.layoutName\n    });\n\n    if (templateInfo) {\n      const templateData = templateInfo.template;\n\n      onData(null, {\n        defaultPermissions: [\"admin\"],\n        defaultAudience: [\"guest\", \"anonymous\"],\n        layout: templateData\n      });\n    }\n  }\n}\n\nregisterComponent(\"ReactionLayout\", ReactionLayout, [\n  composeWithTracker(composer),\n  Radium\n]);\n\nexport default compose(\n  composeWithTracker(composer),\n  Radium\n)(ReactionLayout);\n"]},"sourceType":"script","hash":"b5a4c6425fe7629d81e1d60d12758cd5fa659f7b"}
