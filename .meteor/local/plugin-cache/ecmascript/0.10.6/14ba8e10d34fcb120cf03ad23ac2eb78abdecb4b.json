{"metadata":{},"options":{"plugins":[{"key":"base$0$0","visitor":{"Program":{"enter":[null]},"_exploded":true,"_verified":true},"options":{"generateLetDeclarations":true,"enforceStrictMode":false}},{"key":"transform-meteor-dynamic-import","visitor":{"_exploded":{},"_verified":{},"CallExpression":{"enter":[null]}},"options":{}},{"key":"base$0$2","visitor":{"CallExpression":{"enter":[null]},"BinaryExpression":{"enter":[null]},"MemberExpression":{"enter":[null],"exit":[null]},"_exploded":true,"_verified":true,"Identifier":{"enter":[null]},"JSXIdentifier":{"enter":[null]}},"options":{"polyfill":false,"useBuiltIns":false}},{"key":"base$0$3","visitor":{"_exploded":{},"_verified":{},"ClassDeclaration":{"enter":[null]},"ClassExpression":{"enter":[null]}},"options":{"loose":true}},{"key":"base$0$4","visitor":{"FunctionExpression":{"exit":[null]},"_exploded":true,"_verified":true},"options":{}},{"key":"base$0$5","visitor":{"ForInStatement":{"enter":[null]},"_exploded":true,"_verified":true},"options":{}},{"key":"base$0$6","visitor":{"Program":{"exit":[null]},"_exploded":true,"_verified":true},"options":{"allowTopLevelThis":true,"strictMode":false,"loose":true}},{"key":"base$0$1$0","visitor":{"_exploded":{},"_verified":{},"JSXNamespacedName":{"enter":[null]},"JSXElement":{"exit":[null]},"JSXFragment":{"exit":[null]},"Program":{"enter":[null],"exit":[null]},"JSXAttribute":{"enter":[null]}},"options":{"pragma":"React.createElement","pragmaFrag":"React.Fragment","throwIfNamespace":true,"useBuiltIns":false}},{"key":"base$0$1$1","visitor":{"_exploded":true,"_verified":true},"options":{}},{"key":"base$0$1$2","visitor":{"ExportDefaultDeclaration":{"enter":[null]},"CallExpression":{"enter":[null]},"_exploded":true,"_verified":true},"options":{}},{"key":"base$0$0$0","visitor":{"_exploded":true,"_verified":true},"options":{}},{"key":"base$0$0$1","visitor":{"_exploded":true,"_verified":true},"options":{}},{"key":"base$0$0$2","visitor":{"ArrowFunctionExpression":{"enter":[null]},"_exploded":true,"_verified":true},"options":{}},{"key":"base$0$0$3","visitor":{"BlockStatement":{"enter":[null]},"SwitchCase":{"enter":[null]},"_exploded":true,"_verified":true},"options":{}},{"key":"base$0$0$4","visitor":{"VariableDeclaration":{"enter":[null]},"CatchClause":{"enter":[null]},"_exploded":true,"BlockStatement":{"enter":[null]},"SwitchStatement":{"enter":[null]},"Program":{"enter":[null]},"_verified":true,"DoWhileStatement":{"enter":[null]},"ForInStatement":{"enter":[null]},"ForStatement":{"enter":[null]},"WhileStatement":{"enter":[null]},"ForOfStatement":{"enter":[null]}},"options":{}},{"key":"base$0$0$5","visitor":{"ExportDefaultDeclaration":{"enter":[null]},"ClassDeclaration":{"enter":[null]},"ClassExpression":{"enter":[null]},"_exploded":true,"_verified":true},"options":{"loose":true}},{"key":"base$0$0$6","visitor":{"ObjectExpression":{"exit":[null]},"_exploded":true,"_verified":true},"options":{"loose":true}},{"key":"base$0$0$7","visitor":{"ExportNamedDeclaration":{"enter":[null]},"CatchClause":{"enter":[null]},"AssignmentExpression":{"enter":[null]},"VariableDeclaration":{"enter":[null]},"_exploded":true,"_verified":true,"ForInStatement":{"enter":[null]},"ForOfStatement":{"enter":[null]}},"options":{}},{"key":"base$0$0$8","visitor":{"ForOfStatement":{"enter":[null]},"_exploded":true,"_verified":true},"options":{"loose":true}},{"key":"base$0$0$9","visitor":{"NumericLiteral":{"enter":[null]},"StringLiteral":{"enter":[null]},"_exploded":true,"_verified":true},"options":{}},{"key":"base$0$0$10","visitor":{"ObjectExpression":{"enter":[null]},"_exploded":true,"_verified":true},"options":{}},{"key":"base$0$0$11","visitor":{"_exploded":true,"_verified":true,"FunctionDeclaration":{"enter":[null]},"FunctionExpression":{"enter":[null]},"ObjectMethod":{"enter":[null]},"ArrowFunctionExpression":{"enter":[null]},"ClassMethod":{"enter":[null]}},"options":{}},{"key":"base$0$0$12","visitor":{"ObjectMethod":{"enter":[null]},"ObjectProperty":{"enter":[null]},"_exploded":true,"_verified":true},"options":{}},{"key":"base$0$0$13","visitor":{"ArrayExpression":{"enter":[null]},"CallExpression":{"enter":[null]},"NewExpression":{"enter":[null]},"_exploded":true,"_verified":true},"options":{}},{"key":"base$0$0$14","visitor":{"RegExpLiteral":{"enter":[null]},"_exploded":true,"_verified":true},"options":{}},{"key":"base$0$0$15","visitor":{"TaggedTemplateExpression":{"enter":[null]},"TemplateLiteral":{"enter":[null]},"_exploded":true,"_verified":true},"options":{"loose":true}},{"key":"base$0$0$16","visitor":{"UnaryExpression":{"enter":[null]},"_exploded":true,"_verified":true,"BlockStatement":{"enter":[null]},"CatchClause":{"enter":[null]},"DoWhileStatement":{"enter":[null]},"ForInStatement":{"enter":[null]},"ForStatement":{"enter":[null]},"FunctionDeclaration":{"enter":[null]},"FunctionExpression":{"enter":[null]},"Program":{"enter":[null]},"ObjectMethod":{"enter":[null]},"SwitchStatement":{"enter":[null]},"WhileStatement":{"enter":[null]},"ArrowFunctionExpression":{"enter":[null]},"ClassDeclaration":{"enter":[null]},"ClassExpression":{"enter":[null]},"ForOfStatement":{"enter":[null]},"ClassMethod":{"enter":[null]}},"options":{}},{"key":"base$0$0$17","visitor":{"RegExpLiteral":{"enter":[null]},"_exploded":true,"_verified":true},"options":{}},{"key":"base$0$0$18","visitor":{"_exploded":true,"_verified":true},"options":{}},{"key":"base$0$0$19","visitor":{"_exploded":{},"_verified":{},"VariableDeclarator":{"enter":[null]},"ExportNamedDeclaration":{"enter":[null]},"CatchClause":{"enter":[null]},"AssignmentExpression":{"enter":[null]},"ObjectExpression":{"enter":[null]},"FunctionDeclaration":{"enter":[null]},"FunctionExpression":{"enter":[null]},"ObjectMethod":{"enter":[null]},"ArrowFunctionExpression":{"enter":[null]},"ClassMethod":{"enter":[null]},"ForInStatement":{"enter":[null]},"ForOfStatement":{"enter":[null]}},"options":{}},{"key":"base$0$0$20","visitor":{"ObjectProperty":{"exit":[null]},"_exploded":true,"_verified":true},"options":{}},{"key":"base$0$0$21","visitor":{"_exploded":{},"_verified":{},"Program":{"enter":[null]},"ImportDeclaration":{"enter":[null,null]},"ClassProperty":{"enter":[null]},"AssignmentPattern":{"enter":[null]},"TypeCastExpression":{"enter":[null,null]},"ImportSpecifier":{"enter":[null]},"ClassDeclaration":{"enter":[null]},"ClassExpression":{"enter":[null]},"FunctionDeclaration":{"enter":[null]},"FunctionExpression":{"enter":[null]},"ObjectMethod":{"enter":[null]},"ArrowFunctionExpression":{"enter":[null]},"ClassMethod":{"enter":[null]},"AnyTypeAnnotation":{"enter":[null]},"ArrayTypeAnnotation":{"enter":[null]},"BooleanTypeAnnotation":{"enter":[null]},"BooleanLiteralTypeAnnotation":{"enter":[null]},"NullLiteralTypeAnnotation":{"enter":[null]},"ClassImplements":{"enter":[null]},"DeclareClass":{"enter":[null]},"DeclareFunction":{"enter":[null]},"DeclareInterface":{"enter":[null]},"DeclareModule":{"enter":[null]},"DeclareModuleExports":{"enter":[null]},"DeclareTypeAlias":{"enter":[null]},"DeclareOpaqueType":{"enter":[null]},"DeclareVariable":{"enter":[null]},"DeclareExportDeclaration":{"enter":[null]},"DeclareExportAllDeclaration":{"enter":[null]},"DeclaredPredicate":{"enter":[null]},"ExistsTypeAnnotation":{"enter":[null]},"FunctionTypeAnnotation":{"enter":[null]},"FunctionTypeParam":{"enter":[null]},"GenericTypeAnnotation":{"enter":[null]},"InferredPredicate":{"enter":[null]},"InterfaceExtends":{"enter":[null]},"InterfaceDeclaration":{"enter":[null]},"IntersectionTypeAnnotation":{"enter":[null]},"MixedTypeAnnotation":{"enter":[null]},"EmptyTypeAnnotation":{"enter":[null]},"NullableTypeAnnotation":{"enter":[null]},"NumberLiteralTypeAnnotation":{"enter":[null]},"NumberTypeAnnotation":{"enter":[null]},"ObjectTypeAnnotation":{"enter":[null]},"ObjectTypeCallProperty":{"enter":[null]},"ObjectTypeIndexer":{"enter":[null]},"ObjectTypeProperty":{"enter":[null]},"ObjectTypeSpreadProperty":{"enter":[null]},"OpaqueType":{"enter":[null]},"QualifiedTypeIdentifier":{"enter":[null]},"StringLiteralTypeAnnotation":{"enter":[null]},"StringTypeAnnotation":{"enter":[null]},"ThisTypeAnnotation":{"enter":[null]},"TupleTypeAnnotation":{"enter":[null]},"TypeofTypeAnnotation":{"enter":[null]},"TypeAlias":{"enter":[null]},"TypeAnnotation":{"enter":[null]},"TypeParameter":{"enter":[null]},"TypeParameterDeclaration":{"enter":[null]},"TypeParameterInstantiation":{"enter":[null]},"UnionTypeAnnotation":{"enter":[null]},"Variance":{"enter":[null]},"VoidTypeAnnotation":{"enter":[null]},"ExportAllDeclaration":{"enter":[null]},"ExportDefaultDeclaration":{"enter":[null]},"ExportNamedDeclaration":{"enter":[null]}},"options":{}},{"key":"base$0$0$22","visitor":{"AssignmentExpression":{"enter":[null]},"BinaryExpression":{"enter":[null]},"_exploded":true,"_verified":true},"options":{}},{"key":"base$0$0$23","visitor":{"_exploded":{},"_verified":{},"Program":{"enter":[null]}},"options":{}},{"key":"regenerator-transform","visitor":{"_exploded":true,"_verified":true,"FunctionDeclaration":{"exit":[null]},"FunctionExpression":{"exit":[null]},"ObjectMethod":{"exit":[null]},"ArrowFunctionExpression":{"exit":[null]},"ClassMethod":{"exit":[null]}},"options":{}}],"presets":[],"compact":false,"ast":true,"babelrc":false,"sourceFileName":"imports/plugins/core/dashboard/client/components/toolbar.js","filename":"imports/plugins/core/dashboard/client/components/toolbar.js","sourceMaps":true,"envName":"development","cwd":"/Users/estebandev/test-knowledge","passPerPreset":false,"parserOpts":{"sourceType":"module","sourceFileName":"imports/plugins/core/dashboard/client/components/toolbar.js","plugins":["dynamicImport","classProperties","jsx","jsx","flow","asyncGenerators","objectRestSpread","objectRestSpread","flow","asyncGenerators"]},"generatorOpts":{"filename":"imports/plugins/core/dashboard/client/components/toolbar.js","comments":true,"compact":false,"sourceMaps":true,"sourceFileName":"imports/plugins/core/dashboard/client/components/toolbar.js"}},"code":"var _extends2 = _interopRequireDefault(require(\"@babel/runtime/helpers/extends\"));\n\nvar _assertThisInitialized2 = _interopRequireDefault(require(\"@babel/runtime/helpers/assertThisInitialized\"));\n\nvar _inheritsLoose2 = _interopRequireDefault(require(\"@babel/runtime/helpers/inheritsLoose\"));\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { \"default\": obj }; }\n\nvar React, Component;\nmodule.watch(require(\"react\"), {\n  \"default\": function (v) {\n    React = v;\n  },\n  Component: function (v) {\n    Component = v;\n  }\n}, 0);\nvar PropTypes;\nmodule.watch(require(\"prop-types\"), {\n  \"default\": function (v) {\n    PropTypes = v;\n  }\n}, 1);\nvar Blaze;\nmodule.watch(require(\"meteor/gadicc:blaze-react-component\"), {\n  \"default\": function (v) {\n    Blaze = v;\n  }\n}, 2);\nvar Tracker;\nmodule.watch(require(\"meteor/tracker\"), {\n  Tracker: function (v) {\n    Tracker = v;\n  }\n}, 3);\nvar Components;\nmodule.watch(require(\"../../../components/lib\"), {\n  Components: function (v) {\n    Components = v;\n  }\n}, 4);\nvar FlatButton, Switch, Icon, VerticalDivider;\nmodule.watch(require(\"../../../ui/client/components\"), {\n  FlatButton: function (v) {\n    FlatButton = v;\n  },\n  Switch: function (v) {\n    Switch = v;\n  },\n  Icon: function (v) {\n    Icon = v;\n  },\n  VerticalDivider: function (v) {\n    VerticalDivider = v;\n  }\n}, 5);\nvar Translatable;\nmodule.watch(require(\"../../../ui/client/providers\"), {\n  Translatable: function (v) {\n    Translatable = v;\n  }\n}, 6);\nvar Reaction;\nmodule.watch(require(\"../../../../../../client/api\"), {\n  Reaction: function (v) {\n    Reaction = v;\n  }\n}, 7);\nvar ShopSelect;\nmodule.watch(require(\"../components/shopSelect\"), {\n  \"default\": function (v) {\n    ShopSelect = v;\n  }\n}, 8);\n\nvar PublishControls =\n/*#__PURE__*/\nfunction (_Component) {\n  (0, _inheritsLoose2.default)(PublishControls, _Component);\n\n  function PublishControls() {\n    var _temp, _this;\n\n    for (var _len = arguments.length, args = new Array(_len), _key = 0; _key < _len; _key++) {\n      args[_key] = arguments[_key];\n    }\n\n    return (_temp = _this = _Component.call.apply(_Component, [this].concat(args)) || this, _this.onViewContextChange = function (event, isChecked) {\n      if (typeof _this.props.onViewContextChange === \"function\") {\n        _this.props.onViewContextChange(event, isChecked ? \"administrator\" : \"customer\");\n      }\n    }, _this.onShopSelectChange = function (event, shopId) {\n      if (typeof _this.props.onShopSelectChange === \"function\") {\n        _this.props.onShopSelectChange(event, shopId);\n      }\n    }, _temp) || (0, _assertThisInitialized2.default)(_this);\n  }\n\n  var _proto = PublishControls.prototype;\n\n  _proto.componentDidMount = function () {\n    function componentDidMount() {\n      var _this2 = this;\n\n      // Tracker is used to determine if a user has `hasShopSwitcherAccess` permission\n      // If they do not, set the shop one time, and then not again\n      // If the user does have hasShopSwitcherAccess` permission, shop is set by this.renderShopSelect()\n      this.tracker = Tracker.autorun(function () {\n        if (!Reaction.hasShopSwitcherAccess()) {\n          _this2.onShopSelectChange(null, Reaction.getSellerShopId());\n        }\n      });\n    }\n\n    return componentDidMount;\n  }();\n\n  _proto.componentWillUnmount = function () {\n    function componentWillUnmount() {\n      // Unmount the tracker that is checking for `hasShopSwitcherAccess` permission\n      this.tracker.stop();\n    }\n\n    return componentWillUnmount;\n  }();\n\n  _proto.renderViewControls = function () {\n    function renderViewControls() {\n      if (this.props.showViewAsControls) {\n        return React.createElement(FlatButton, {\n          label: \"Private\",\n          i18nKeyLabel: \"app.private\",\n          i18nKeyToggleOnLabel: \"app.public\",\n          toggleOnLabel: \"Public\",\n          icon: \"fa fa-eye-slash\",\n          onIcon: \"fa fa-eye\",\n          toggle: true,\n          value: \"public\",\n          onValue: \"private\",\n          toggleOn: this.isVisible === \"public\",\n          onToggle: this.handleVisibilityChange\n        });\n      }\n\n      return null;\n    }\n\n    return renderViewControls;\n  }();\n\n  _proto.renderShopSelect = function () {\n    function renderShopSelect() {\n      // If a user has owner, admin, or marketplace permissions for more than one (1) shops\n      // show the shop switcher to allow for easy switching between the shops\n      if (Reaction.hasShopSwitcherAccess()) {\n        return React.createElement(ShopSelect, {\n          onShopSelectChange: this.onShopSelectChange,\n          shopId: this.props.shopId,\n          shops: this.props.shops\n        });\n      }\n\n      return null;\n    }\n\n    return renderShopSelect;\n  }();\n\n  _proto.renderVisibilitySwitch = function () {\n    function renderVisibilitySwitch() {\n      if (this.props.hasCreateProductAccess) {\n        return React.createElement(Switch, {\n          i18nKeyLabel: \"app.editMode\",\n          i18nKeyOnLabel: \"app.editMode\",\n          label: \"Edit Mode\",\n          onLabel: \"Edit Mode\",\n          checked: !this.props.isPreview,\n          onChange: this.onViewContextChange\n        });\n      }\n\n      return null;\n    }\n\n    return renderVisibilitySwitch;\n  }();\n\n  _proto.renderAdminButton = function () {\n    function renderAdminButton() {\n      return React.createElement(\"div\", {\n        className: \"hidden-xs\"\n      }, React.createElement(Components.ToolbarGroup, {\n        visibleOnMobile: true\n      }, React.createElement(VerticalDivider, {\n        key: \"divder-2\"\n      }), React.createElement(FlatButton, {\n        key: \"dashboard-button\",\n        onClick: function () {\n          Reaction.showActionView({\n            i18nKeyTitle: \"dashboard.coreTitle\",\n            title: \"Dashboard\",\n            template: \"dashboardPackages\"\n          });\n        }\n      }, React.createElement(Icon, {\n        icon: \"icon icon-reaction-logo\"\n      }))));\n    }\n\n    return renderAdminButton;\n  }();\n\n  _proto.renderAddButton = function () {\n    function renderAddButton() {\n      if (this.props.hasCreateProductAccess) {\n        return React.createElement(FlatButton, {\n          i18nKeyTooltip: \"app.shortcut.addProductLabel\",\n          icon: \"fa fa-plus\",\n          tooltip: \"Add Product\",\n          onClick: this.props.onAddProduct\n        });\n      }\n\n      return null;\n    }\n\n    return renderAddButton;\n  }();\n\n  _proto.renderPackageButons = function () {\n    function renderPackageButons() {\n      if (Array.isArray(this.props.packageButtons)) {\n        return this.props.packageButtons.map(function (packageButton, index) {\n          return React.createElement(FlatButton, (0, _extends2.default)({}, packageButton, {\n            key: index\n          }));\n        });\n      }\n\n      return null;\n    }\n\n    return renderPackageButons;\n  }();\n\n  _proto.renderCustomControls = function () {\n    function renderCustomControls() {\n      if (this.props.dashboardHeaderTemplate && this.props.hasCreateProductAccess) {\n        if (this.props.isEnabled) {\n          return [React.createElement(\"div\", {\n            className: \"hidden-xs\",\n            key: \"customControlsVerticaldivider\"\n          }, React.createElement(VerticalDivider, null)), React.createElement(Blaze, {\n            key: \"customControls\",\n            template: this.props.dashboardHeaderTemplate\n          })];\n        }\n\n        return [React.createElement(Blaze, {\n          key: \"customControls\",\n          template: this.props.dashboardHeaderTemplate\n        })];\n      }\n\n      return null;\n    }\n\n    return renderCustomControls;\n  }();\n\n  _proto.render = function () {\n    function render() {\n      return React.createElement(Components.Toolbar, null, React.createElement(Components.ToolbarGroup, {\n        firstChild: true\n      }, this.renderVisibilitySwitch(), this.renderShopSelect()), React.createElement(Components.ToolbarGroup, {\n        lastChild: true\n      }, this.renderAddButton(), this.renderPackageButons(), this.renderCustomControls()), this.renderAdminButton());\n    }\n\n    return render;\n  }();\n\n  return PublishControls;\n}(Component);\n\nPublishControls.propTypes = {\n  dashboardHeaderTemplate: PropTypes.oneOfType([PropTypes.func, PropTypes.node, PropTypes.string]),\n  documentIds: PropTypes.arrayOf(PropTypes.string),\n  documents: PropTypes.arrayOf(PropTypes.object),\n  hasCreateProductAccess: PropTypes.bool,\n  isEnabled: PropTypes.bool,\n  isPreview: PropTypes.bool,\n  onAddProduct: PropTypes.func,\n  onShopSelectChange: PropTypes.func,\n  onViewContextChange: PropTypes.func,\n  onVisibilityChange: PropTypes.func,\n  packageButtons: PropTypes.arrayOf(PropTypes.object),\n  shopId: PropTypes.string,\n  shops: PropTypes.arrayOf(PropTypes.object),\n  showViewAsControls: PropTypes.bool,\n  translation: PropTypes.shape({\n    lang: PropTypes.string\n  })\n};\nPublishControls.defaultProps = {\n  showViewAsControls: true\n};\nmodule.exportDefault(Translatable()(PublishControls));","map":{"version":3,"sources":["imports/plugins/core/dashboard/client/components/toolbar.js"],"names":["React","Component","module","watch","require","v","PropTypes","Blaze","Tracker","Components","FlatButton","Switch","Icon","VerticalDivider","Translatable","Reaction","ShopSelect","PublishControls","onViewContextChange","event","isChecked","props","onShopSelectChange","shopId","componentDidMount","tracker","autorun","hasShopSwitcherAccess","getSellerShopId","componentWillUnmount","stop","renderViewControls","showViewAsControls","isVisible","handleVisibilityChange","renderShopSelect","shops","renderVisibilitySwitch","hasCreateProductAccess","isPreview","renderAdminButton","showActionView","i18nKeyTitle","title","template","renderAddButton","onAddProduct","renderPackageButons","Array","isArray","packageButtons","map","packageButton","index","renderCustomControls","dashboardHeaderTemplate","isEnabled","render","propTypes","oneOfType","func","node","string","documentIds","arrayOf","documents","object","bool","onVisibilityChange","translation","shape","lang","defaultProps","exportDefault"],"mappings":"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","sourcesContent":["import React, { Component } from \"react\";\nimport PropTypes from \"prop-types\";\nimport Blaze from \"meteor/gadicc:blaze-react-component\";\nimport { Tracker } from \"meteor/tracker\";\nimport { Components } from \"@reactioncommerce/reaction-components\";\nimport {\n  FlatButton,\n  Switch,\n  Icon,\n  VerticalDivider\n} from \"/imports/plugins/core/ui/client/components\";\nimport { Translatable } from \"/imports/plugins/core/ui/client/providers\";\nimport { Reaction } from \"/client/api\";\nimport ShopSelect from \"../components/shopSelect\";\n\nclass PublishControls extends Component {\n  static propTypes = {\n    dashboardHeaderTemplate: PropTypes.oneOfType([PropTypes.func, PropTypes.node, PropTypes.string]),\n    documentIds: PropTypes.arrayOf(PropTypes.string),\n    documents: PropTypes.arrayOf(PropTypes.object),\n    hasCreateProductAccess: PropTypes.bool,\n    isEnabled: PropTypes.bool,\n    isPreview: PropTypes.bool,\n    onAddProduct: PropTypes.func,\n    onShopSelectChange: PropTypes.func,\n    onViewContextChange: PropTypes.func,\n    onVisibilityChange: PropTypes.func,\n    packageButtons: PropTypes.arrayOf(PropTypes.object),\n    shopId: PropTypes.string,\n    shops: PropTypes.arrayOf(PropTypes.object),\n    showViewAsControls: PropTypes.bool,\n    translation: PropTypes.shape({\n      lang: PropTypes.string\n    })\n  }\n\n  static defaultProps = {\n    showViewAsControls: true\n  }\n\n  componentDidMount() {\n    // Tracker is used to determine if a user has `hasShopSwitcherAccess` permission\n    // If they do not, set the shop one time, and then not again\n    // If the user does have hasShopSwitcherAccess` permission, shop is set by this.renderShopSelect()\n    this.tracker = Tracker.autorun(() => {\n      if (!Reaction.hasShopSwitcherAccess()) {\n        this.onShopSelectChange(null, Reaction.getSellerShopId());\n      }\n    });\n  }\n\n  componentWillUnmount() {\n    // Unmount the tracker that is checking for `hasShopSwitcherAccess` permission\n    this.tracker.stop();\n  }\n\n  onViewContextChange = (event, isChecked) => {\n    if (typeof this.props.onViewContextChange === \"function\") {\n      this.props.onViewContextChange(event, isChecked ? \"administrator\" : \"customer\");\n    }\n  }\n\n  // Passthrough to shopSelectChange handler in container above\n  onShopSelectChange = (event, shopId) => {\n    if (typeof this.props.onShopSelectChange === \"function\") {\n      this.props.onShopSelectChange(event, shopId);\n    }\n  }\n\n  renderViewControls() {\n    if (this.props.showViewAsControls) {\n      return (\n        <FlatButton\n          label=\"Private\"\n          i18nKeyLabel=\"app.private\"\n          i18nKeyToggleOnLabel=\"app.public\"\n          toggleOnLabel=\"Public\"\n          icon=\"fa fa-eye-slash\"\n          onIcon=\"fa fa-eye\"\n          toggle={true}\n          value=\"public\"\n          onValue=\"private\"\n          toggleOn={this.isVisible === \"public\"}\n          onToggle={this.handleVisibilityChange}\n        />\n      );\n    }\n\n    return null;\n  }\n\n  renderShopSelect() {\n    // If a user has owner, admin, or marketplace permissions for more than one (1) shops\n    // show the shop switcher to allow for easy switching between the shops\n    if (Reaction.hasShopSwitcherAccess()) {\n      return (\n        <ShopSelect\n          onShopSelectChange={this.onShopSelectChange}\n          shopId={this.props.shopId}\n          shops={this.props.shops}\n        />\n      );\n    }\n\n    return null;\n  }\n\n  renderVisibilitySwitch() {\n    if (this.props.hasCreateProductAccess) {\n      return (\n        <Switch\n          i18nKeyLabel=\"app.editMode\"\n          i18nKeyOnLabel=\"app.editMode\"\n          label={\"Edit Mode\"}\n          onLabel={\"Edit Mode\"}\n          checked={!this.props.isPreview}\n          onChange={this.onViewContextChange}\n        />\n      );\n    }\n\n    return null;\n  }\n\n  renderAdminButton() {\n    return (\n      <div className=\"hidden-xs\">\n        <Components.ToolbarGroup visibleOnMobile={true}>\n          <VerticalDivider key={\"divder-2\"} />\n          <FlatButton\n            key=\"dashboard-button\"\n            onClick={() => {\n              Reaction.showActionView({\n                i18nKeyTitle: \"dashboard.coreTitle\",\n                title: \"Dashboard\",\n                template: \"dashboardPackages\"\n              });\n            }}\n          >\n            <Icon icon=\"icon icon-reaction-logo\" />\n          </FlatButton>\n        </Components.ToolbarGroup>\n      </div>\n    );\n  }\n\n  renderAddButton() {\n    if (this.props.hasCreateProductAccess) {\n      return (\n        <FlatButton\n          i18nKeyTooltip=\"app.shortcut.addProductLabel\"\n          icon={\"fa fa-plus\"}\n          tooltip={\"Add Product\"}\n          onClick={this.props.onAddProduct}\n        />\n      );\n    }\n\n    return null;\n  }\n\n  renderPackageButons() {\n    if (Array.isArray(this.props.packageButtons)) {\n      return this.props.packageButtons.map((packageButton, index) => (\n        <FlatButton {...packageButton} key={index} />\n      ));\n    }\n\n    return null;\n  }\n\n  renderCustomControls() {\n    if (this.props.dashboardHeaderTemplate && this.props.hasCreateProductAccess) {\n      if (this.props.isEnabled) {\n        return [\n          <div className=\"hidden-xs\" key=\"customControlsVerticaldivider\"><VerticalDivider/></div>,\n          <Blaze key=\"customControls\" template={this.props.dashboardHeaderTemplate} />\n        ];\n      }\n      return [\n        <Blaze key=\"customControls\" template={this.props.dashboardHeaderTemplate} />\n      ];\n    }\n\n    return null;\n  }\n\n  render() {\n    return (\n      <Components.Toolbar>\n        <Components.ToolbarGroup firstChild={true}>\n          {this.renderVisibilitySwitch()}\n          {this.renderShopSelect()}\n        </Components.ToolbarGroup>\n        <Components.ToolbarGroup lastChild={true}>\n          {this.renderAddButton()}\n          {this.renderPackageButons()}\n          {this.renderCustomControls()}\n        </Components.ToolbarGroup>\n        {this.renderAdminButton()}\n      </Components.Toolbar>\n    );\n  }\n}\n\nexport default Translatable()(PublishControls);\n"]},"sourceType":"script","hash":"14ba8e10d34fcb120cf03ad23ac2eb78abdecb4b"}
