{"metadata":{},"options":{"plugins":[{"key":"base$0$0","visitor":{"Program":{"enter":[null]},"_exploded":true,"_verified":true},"options":{"generateLetDeclarations":true,"enforceStrictMode":false}},{"key":"transform-meteor-dynamic-import","visitor":{"_exploded":{},"_verified":{},"CallExpression":{"enter":[null]}},"options":{}},{"key":"base$0$2","visitor":{"CallExpression":{"enter":[null]},"BinaryExpression":{"enter":[null]},"MemberExpression":{"enter":[null],"exit":[null]},"_exploded":true,"_verified":true,"Identifier":{"enter":[null]},"JSXIdentifier":{"enter":[null]}},"options":{"polyfill":false,"useBuiltIns":false}},{"key":"base$0$3","visitor":{"_exploded":{},"_verified":{},"ClassDeclaration":{"enter":[null]},"ClassExpression":{"enter":[null]}},"options":{"loose":true}},{"key":"base$0$4","visitor":{"FunctionExpression":{"exit":[null]},"_exploded":true,"_verified":true},"options":{}},{"key":"base$0$5","visitor":{"ForInStatement":{"enter":[null]},"_exploded":true,"_verified":true},"options":{}},{"key":"base$0$6","visitor":{"Program":{"exit":[null]},"_exploded":true,"_verified":true},"options":{"allowTopLevelThis":true,"strictMode":false,"loose":true}},{"key":"base$0$1$0","visitor":{"_exploded":{},"_verified":{},"JSXNamespacedName":{"enter":[null]},"JSXElement":{"exit":[null]},"JSXFragment":{"exit":[null]},"Program":{"enter":[null],"exit":[null]},"JSXAttribute":{"enter":[null]}},"options":{"pragma":"React.createElement","pragmaFrag":"React.Fragment","throwIfNamespace":true,"useBuiltIns":false}},{"key":"base$0$1$1","visitor":{"_exploded":true,"_verified":true},"options":{}},{"key":"base$0$1$2","visitor":{"ExportDefaultDeclaration":{"enter":[null]},"CallExpression":{"enter":[null]},"_exploded":true,"_verified":true},"options":{}},{"key":"base$0$0$0","visitor":{"_exploded":true,"_verified":true},"options":{}},{"key":"base$0$0$1","visitor":{"_exploded":true,"_verified":true},"options":{}},{"key":"base$0$0$2","visitor":{"ArrowFunctionExpression":{"enter":[null]},"_exploded":true,"_verified":true},"options":{}},{"key":"base$0$0$3","visitor":{"BlockStatement":{"enter":[null]},"SwitchCase":{"enter":[null]},"_exploded":true,"_verified":true},"options":{}},{"key":"base$0$0$4","visitor":{"VariableDeclaration":{"enter":[null]},"CatchClause":{"enter":[null]},"_exploded":true,"BlockStatement":{"enter":[null]},"SwitchStatement":{"enter":[null]},"Program":{"enter":[null]},"_verified":true,"DoWhileStatement":{"enter":[null]},"ForInStatement":{"enter":[null]},"ForStatement":{"enter":[null]},"WhileStatement":{"enter":[null]},"ForOfStatement":{"enter":[null]}},"options":{}},{"key":"base$0$0$5","visitor":{"ExportDefaultDeclaration":{"enter":[null]},"ClassDeclaration":{"enter":[null]},"ClassExpression":{"enter":[null]},"_exploded":true,"_verified":true},"options":{"loose":true}},{"key":"base$0$0$6","visitor":{"ObjectExpression":{"exit":[null]},"_exploded":true,"_verified":true},"options":{"loose":true}},{"key":"base$0$0$7","visitor":{"ExportNamedDeclaration":{"enter":[null]},"CatchClause":{"enter":[null]},"AssignmentExpression":{"enter":[null]},"VariableDeclaration":{"enter":[null]},"_exploded":true,"_verified":true,"ForInStatement":{"enter":[null]},"ForOfStatement":{"enter":[null]}},"options":{}},{"key":"base$0$0$8","visitor":{"ForOfStatement":{"enter":[null]},"_exploded":true,"_verified":true},"options":{"loose":true}},{"key":"base$0$0$9","visitor":{"NumericLiteral":{"enter":[null]},"StringLiteral":{"enter":[null]},"_exploded":true,"_verified":true},"options":{}},{"key":"base$0$0$10","visitor":{"ObjectExpression":{"enter":[null]},"_exploded":true,"_verified":true},"options":{}},{"key":"base$0$0$11","visitor":{"_exploded":true,"_verified":true,"FunctionDeclaration":{"enter":[null]},"FunctionExpression":{"enter":[null]},"ObjectMethod":{"enter":[null]},"ArrowFunctionExpression":{"enter":[null]},"ClassMethod":{"enter":[null]}},"options":{}},{"key":"base$0$0$12","visitor":{"ObjectMethod":{"enter":[null]},"ObjectProperty":{"enter":[null]},"_exploded":true,"_verified":true},"options":{}},{"key":"base$0$0$13","visitor":{"ArrayExpression":{"enter":[null]},"CallExpression":{"enter":[null]},"NewExpression":{"enter":[null]},"_exploded":true,"_verified":true},"options":{}},{"key":"base$0$0$14","visitor":{"RegExpLiteral":{"enter":[null]},"_exploded":true,"_verified":true},"options":{}},{"key":"base$0$0$15","visitor":{"TaggedTemplateExpression":{"enter":[null]},"TemplateLiteral":{"enter":[null]},"_exploded":true,"_verified":true},"options":{"loose":true}},{"key":"base$0$0$16","visitor":{"UnaryExpression":{"enter":[null]},"_exploded":true,"_verified":true,"BlockStatement":{"enter":[null]},"CatchClause":{"enter":[null]},"DoWhileStatement":{"enter":[null]},"ForInStatement":{"enter":[null]},"ForStatement":{"enter":[null]},"FunctionDeclaration":{"enter":[null]},"FunctionExpression":{"enter":[null]},"Program":{"enter":[null]},"ObjectMethod":{"enter":[null]},"SwitchStatement":{"enter":[null]},"WhileStatement":{"enter":[null]},"ArrowFunctionExpression":{"enter":[null]},"ClassDeclaration":{"enter":[null]},"ClassExpression":{"enter":[null]},"ForOfStatement":{"enter":[null]},"ClassMethod":{"enter":[null]}},"options":{}},{"key":"base$0$0$17","visitor":{"RegExpLiteral":{"enter":[null]},"_exploded":true,"_verified":true},"options":{}},{"key":"base$0$0$18","visitor":{"_exploded":true,"_verified":true},"options":{}},{"key":"base$0$0$19","visitor":{"_exploded":{},"_verified":{},"VariableDeclarator":{"enter":[null]},"ExportNamedDeclaration":{"enter":[null]},"CatchClause":{"enter":[null]},"AssignmentExpression":{"enter":[null]},"ObjectExpression":{"enter":[null]},"FunctionDeclaration":{"enter":[null]},"FunctionExpression":{"enter":[null]},"ObjectMethod":{"enter":[null]},"ArrowFunctionExpression":{"enter":[null]},"ClassMethod":{"enter":[null]},"ForInStatement":{"enter":[null]},"ForOfStatement":{"enter":[null]}},"options":{}},{"key":"base$0$0$20","visitor":{"ObjectProperty":{"exit":[null]},"_exploded":true,"_verified":true},"options":{}},{"key":"base$0$0$21","visitor":{"_exploded":{},"_verified":{},"Program":{"enter":[null]},"ImportDeclaration":{"enter":[null,null]},"ClassProperty":{"enter":[null]},"AssignmentPattern":{"enter":[null]},"TypeCastExpression":{"enter":[null,null]},"ImportSpecifier":{"enter":[null]},"ClassDeclaration":{"enter":[null]},"ClassExpression":{"enter":[null]},"FunctionDeclaration":{"enter":[null]},"FunctionExpression":{"enter":[null]},"ObjectMethod":{"enter":[null]},"ArrowFunctionExpression":{"enter":[null]},"ClassMethod":{"enter":[null]},"AnyTypeAnnotation":{"enter":[null]},"ArrayTypeAnnotation":{"enter":[null]},"BooleanTypeAnnotation":{"enter":[null]},"BooleanLiteralTypeAnnotation":{"enter":[null]},"NullLiteralTypeAnnotation":{"enter":[null]},"ClassImplements":{"enter":[null]},"DeclareClass":{"enter":[null]},"DeclareFunction":{"enter":[null]},"DeclareInterface":{"enter":[null]},"DeclareModule":{"enter":[null]},"DeclareModuleExports":{"enter":[null]},"DeclareTypeAlias":{"enter":[null]},"DeclareOpaqueType":{"enter":[null]},"DeclareVariable":{"enter":[null]},"DeclareExportDeclaration":{"enter":[null]},"DeclareExportAllDeclaration":{"enter":[null]},"DeclaredPredicate":{"enter":[null]},"ExistsTypeAnnotation":{"enter":[null]},"FunctionTypeAnnotation":{"enter":[null]},"FunctionTypeParam":{"enter":[null]},"GenericTypeAnnotation":{"enter":[null]},"InferredPredicate":{"enter":[null]},"InterfaceExtends":{"enter":[null]},"InterfaceDeclaration":{"enter":[null]},"IntersectionTypeAnnotation":{"enter":[null]},"MixedTypeAnnotation":{"enter":[null]},"EmptyTypeAnnotation":{"enter":[null]},"NullableTypeAnnotation":{"enter":[null]},"NumberLiteralTypeAnnotation":{"enter":[null]},"NumberTypeAnnotation":{"enter":[null]},"ObjectTypeAnnotation":{"enter":[null]},"ObjectTypeCallProperty":{"enter":[null]},"ObjectTypeIndexer":{"enter":[null]},"ObjectTypeProperty":{"enter":[null]},"ObjectTypeSpreadProperty":{"enter":[null]},"OpaqueType":{"enter":[null]},"QualifiedTypeIdentifier":{"enter":[null]},"StringLiteralTypeAnnotation":{"enter":[null]},"StringTypeAnnotation":{"enter":[null]},"ThisTypeAnnotation":{"enter":[null]},"TupleTypeAnnotation":{"enter":[null]},"TypeofTypeAnnotation":{"enter":[null]},"TypeAlias":{"enter":[null]},"TypeAnnotation":{"enter":[null]},"TypeParameter":{"enter":[null]},"TypeParameterDeclaration":{"enter":[null]},"TypeParameterInstantiation":{"enter":[null]},"UnionTypeAnnotation":{"enter":[null]},"Variance":{"enter":[null]},"VoidTypeAnnotation":{"enter":[null]},"ExportAllDeclaration":{"enter":[null]},"ExportDefaultDeclaration":{"enter":[null]},"ExportNamedDeclaration":{"enter":[null]}},"options":{}},{"key":"base$0$0$22","visitor":{"AssignmentExpression":{"enter":[null]},"BinaryExpression":{"enter":[null]},"_exploded":true,"_verified":true},"options":{}},{"key":"base$0$0$23","visitor":{"_exploded":{},"_verified":{},"Program":{"enter":[null]}},"options":{}},{"key":"regenerator-transform","visitor":{"_exploded":true,"_verified":true,"FunctionDeclaration":{"exit":[null]},"FunctionExpression":{"exit":[null]},"ObjectMethod":{"exit":[null]},"ArrowFunctionExpression":{"exit":[null]},"ClassMethod":{"exit":[null]}},"options":{}}],"presets":[],"compact":false,"ast":true,"babelrc":false,"sourceFileName":"imports/plugins/core/accounts/client/components/addressBookGrid.js","filename":"imports/plugins/core/accounts/client/components/addressBookGrid.js","sourceMaps":true,"envName":"development","cwd":"/Users/estebandev/test-knowledge","passPerPreset":false,"parserOpts":{"sourceType":"module","sourceFileName":"imports/plugins/core/accounts/client/components/addressBookGrid.js","plugins":["dynamicImport","classProperties","jsx","jsx","flow","asyncGenerators","objectRestSpread","objectRestSpread","flow","asyncGenerators"]},"generatorOpts":{"filename":"imports/plugins/core/accounts/client/components/addressBookGrid.js","comments":true,"compact":false,"sourceMaps":true,"sourceFileName":"imports/plugins/core/accounts/client/components/addressBookGrid.js"}},"code":"var _createClass2 = _interopRequireDefault(require(\"@babel/runtime/helpers/createClass\"));\n\nvar _assertThisInitialized2 = _interopRequireDefault(require(\"@babel/runtime/helpers/assertThisInitialized\"));\n\nvar _inheritsLoose2 = _interopRequireDefault(require(\"@babel/runtime/helpers/inheritsLoose\"));\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { \"default\": obj }; }\n\nvar React, Component;\nmodule.watch(require(\"react\"), {\n  \"default\": function (v) {\n    React = v;\n  },\n  Component: function (v) {\n    Component = v;\n  }\n}, 0);\nvar PropTypes;\nmodule.watch(require(\"prop-types\"), {\n  \"default\": function (v) {\n    PropTypes = v;\n  }\n}, 1);\nvar Components, registerComponent;\nmodule.watch(require(\"../../../components/lib\"), {\n  Components: function (v) {\n    Components = v;\n  },\n  registerComponent: function (v) {\n    registerComponent = v;\n  }\n}, 2);\n\nvar AddressBookGrid =\n/*#__PURE__*/\nfunction (_Component) {\n  (0, _inheritsLoose2.default)(AddressBookGrid, _Component);\n\n  function AddressBookGrid() {\n    var _temp, _this;\n\n    for (var _len = arguments.length, args = new Array(_len), _key = 0; _key < _len; _key++) {\n      args[_key] = arguments[_key];\n    }\n\n    return (_temp = _this = _Component.call.apply(_Component, [this].concat(args)) || this, _this.state = {\n      defaultShippingAddressId: _this.defaultShippingAddressId,\n      defaultBillingAddressId: _this.defaultBillingAddressId\n    }, _this.onSelect = function (_id, usage) {\n      var select = _this.props.select;\n\n      _this.setDefaultAddress(_id, usage);\n\n      select(_id, usage);\n    }, _temp) || (0, _assertThisInitialized2.default)(_this);\n  }\n\n  var _proto = AddressBookGrid.prototype;\n\n  _proto.componentWillReceiveProps = function () {\n    function componentWillReceiveProps(nextProps) {\n      var _this2 = this;\n\n      var addressBook = nextProps.addressBook;\n      if (!Array.isArray(addressBook)) addressBook = []; // if a new address has been added to the addressBook\n      // check to see if the new address is now the default shipping or billing address\n\n      addressBook.forEach(function (addy) {\n        if (addy.isShippingDefault && addy._id !== _this2.defaultShippingAddressId) {\n          _this2.setDefaultAddress(addy._id, \"shipping\");\n        }\n\n        if (addy.isBillingDefault && addy._id !== _this2.defaultBillingAddressId) {\n          _this2.setDefaultAddress(addy._id, \"billing\");\n        }\n      });\n    }\n\n    return componentWillReceiveProps;\n  }(); // Address Book Grid helpers\n\n  /**\n   * @method setDefaultaddress\n   * @summary updating the compoenet state with the new default shipping or billing address.\n   * @since 2.0.0\n   * @param {String} _id - address object _id.\n   * @param {String} usage - the address usage \"shipping\" or \"billing\".\n   */\n\n\n  _proto.setDefaultAddress = function () {\n    function setDefaultAddress(_id, usage) {\n      if (usage === \"shipping\") {\n        this.setState({\n          defaultShippingAddressId: _id\n        });\n      }\n\n      if (usage === \"billing\") {\n        this.setState({\n          defaultBillingAddressId: _id\n        });\n      }\n    }\n\n    return setDefaultAddress;\n  }();\n  /**\n   * @method addressBook\n   * @summary getter that returns the addressBook array if avalible on the props or an empty array.\n   * @since 2.0.0\n   * @return {Array} addressBook - array of address object or an empty array.\n   */\n\n\n  /**\n   * @method renderHeading\n   * @summary renders address book grid heading content\n   * @since 2.0.0\n   * @return {Object} - JSX\n   */\n  _proto.renderHeading = function () {\n    function renderHeading() {\n      return React.createElement(\"div\", {\n        className: \"address-list-header\"\n      }, React.createElement(\"div\", {\n        className: \"address-list-heading\"\n      }, React.createElement(\"h4\", null, React.createElement(Components.Translation, {\n        defaultValue: \"Select a shipping address\",\n        i18nKey: \"addressBookGrid.selectShippingAddress\"\n      }))), React.createElement(\"div\", {\n        className: \"address-list-heading\"\n      }, React.createElement(\"h4\", null, React.createElement(Components.Translation, {\n        defaultValue: \"Select a billing address\",\n        i18nKey: \"addressBookGrid.selectBillingAddress\"\n      }))), React.createElement(\"div\", {\n        className: \"address-list-heading-blank\"\n      }));\n    }\n\n    return renderHeading;\n  }();\n  /**\n   * @method renderAddress\n   * @summary renders an address\n   * @since 2.0.0\n   * @param {Object} address - address object that we destructor to get the needed property\n   * @return {Object} - JSX\n   */\n\n\n  _proto.renderAddress = function () {\n    function renderAddress(_ref) {\n      var address1 = _ref.address1,\n          address2 = _ref.address2,\n          city = _ref.city,\n          region = _ref.region,\n          postal = _ref.postal,\n          country = _ref.country,\n          phone = _ref.phone;\n      return React.createElement(\"address\", null, ((address1 || \"\") + \" \" + (address2 || \"\")).trim(), React.createElement(\"br\", null), city, \", \", region, \" \", postal, \" \", country, React.createElement(\"br\", null), phone || \"\");\n    }\n\n    return renderAddress;\n  }();\n  /**\n   * @method renderAddressGrid\n   * @summary renders address grid by mapping over the addressBook array\n   * @since 2.0.0\n   * @return {Object} - JSX\n   */\n\n\n  _proto.renderAddressGrid = function () {\n    function renderAddressGrid() {\n      var _this3 = this;\n\n      var addressBook = this.addressBook;\n      var _props = this.props,\n          edit = _props.edit,\n          remove = _props.remove;\n      return addressBook.map(function (address) {\n        var _this3$state = _this3.state,\n            defaultBillingAddressId = _this3$state.defaultBillingAddressId,\n            defaultShippingAddressId = _this3$state.defaultShippingAddressId;\n        var _id = address._id,\n            fullName = address.fullName;\n        var activeShipping = defaultShippingAddressId === _id ? \"active\" : \"\";\n        var activeBilling = defaultBillingAddressId === _id ? \"active\" : \"\";\n        return React.createElement(\"div\", {\n          className: \"address-list-item\",\n          key: _id\n        }, React.createElement(\"div\", {\n          className: \"address \" + activeShipping,\n          role: \"button\",\n          tabIndex: \"0\",\n          onKeyUp: function (e) {\n            if (e.keyCode === 13) _this3.onSelect(_id, \"shipping\");\n          },\n          onClick: function () {\n            _this3.onSelect(_id, \"shipping\");\n          }\n        }, React.createElement(\"strong\", null, fullName), _this3.renderAddress(address)), React.createElement(\"div\", {\n          className: \"address \" + activeBilling,\n          role: \"button\",\n          tabIndex: \"0\",\n          onKeyUp: function (e) {\n            if (e.keyCode === 13) _this3.onSelect(_id, \"billing\");\n          },\n          onClick: function () {\n            _this3.onSelect(_id, \"billing\");\n          }\n        }, React.createElement(\"strong\", null, fullName), _this3.renderAddress(address)), React.createElement(\"div\", {\n          className: \"controls\"\n        }, React.createElement(Components.Button, {\n          className: \"btn btn-default\",\n          onClick: function () {\n            edit(_id);\n          },\n          icon: \"fa fa-pencil\",\n          tooltip: \"Edit Address\",\n          i18nKeyTooltip: \"addressBookGrid.edit\"\n        }), React.createElement(Components.Button, {\n          className: \"btn btn-default danger-action\",\n          onClick: function () {\n            remove(_id);\n          },\n          icon: \"fa fa-trash-o\",\n          tooltip: \"Remove Address\",\n          i18nKeyTooltip: \"addressBookGrid.removeAddress\"\n        })));\n      });\n    }\n\n    return renderAddressGrid;\n  }();\n\n  _proto.render = function () {\n    function render() {\n      return React.createElement(\"div\", {\n        className: \"address-list\"\n      }, this.renderHeading(), this.renderAddressGrid());\n    }\n\n    return render;\n  }();\n\n  (0, _createClass2.default)(AddressBookGrid, [{\n    key: \"addressBook\",\n    get: function () {\n      var addressBook = this.props.addressBook;\n      if (!Array.isArray(addressBook)) addressBook = [];\n      return addressBook;\n    }\n    /**\n     * @method defaultShippingAddressId\n     * @summary getter that returns ether the default shipping address _id or and empty string.\n     * @since 2.0.0\n     * @return {String} - default shipping address _id or empty string.\n     */\n\n  }, {\n    key: \"defaultShippingAddressId\",\n    get: function () {\n      var addressBook = this.addressBook;\n      var defaultShippingAddress = addressBook.find(function (addy) {\n        return addy.isShippingDefault;\n      });\n      return defaultShippingAddress ? defaultShippingAddress._id : \"\";\n    }\n    /**\n     * @method defaultBillingAddressId\n     * @summary getter that returns ether the default billing address _id or and empty string.\n     * @since 2.0.0\n     * @return {String} - default billing address _id or empty string.\n     */\n\n  }, {\n    key: \"defaultBillingAddressId\",\n    get: function () {\n      var addressBook = this.addressBook;\n      var defaultBillingAddress = addressBook.find(function (addy) {\n        return addy.isBillingDefault;\n      });\n      return defaultBillingAddress ? defaultBillingAddress._id : \"\";\n    } // Address Book Actions\n\n    /**\n     * @method onSelect\n     * @summary handler when an address in the grid is selected as\n     * a default shipping or billing address. This handler sets the default address\n     * in component state as well as calling the parent reducer to set the default address in db.\n     * @since 2.0.0\n     * @param {String} _id - address object _id.\n     * @param {String} usage - the address usage \"shipping\" or \"billing\".\n     */\n\n  }]);\n  return AddressBookGrid;\n}(Component);\n\nAddressBookGrid.propTypes = {\n  // array of address objects\n  addressBook: PropTypes.arrayOf(PropTypes.shape({\n    _id: PropTypes.string,\n    fullName: PropTypes.string,\n    address1: PropTypes.string,\n    address2: PropTypes.string,\n    postal: PropTypes.string,\n    city: PropTypes.string,\n    region: PropTypes.string,\n    country: PropTypes.string,\n    phone: PropTypes.string,\n    isBillingDefault: PropTypes.bool,\n    isShippingDefault: PropTypes.bool,\n    isCommercal: PropTypes.bool\n  })),\n  // selects an address to be edited and renders the AddressBookForm\n  edit: PropTypes.func,\n  // removes the selected address\n  remove: PropTypes.func,\n  // selects a default shipping or billing address\n  select: PropTypes.func\n};\nAddressBookGrid.defaultProps = {\n  edit: function () {},\n  remove: function () {},\n  select: function () {}\n};\nregisterComponent(\"AddressBookGrid\", AddressBookGrid);\nmodule.exportDefault(AddressBookGrid);","map":{"version":3,"sources":["imports/plugins/core/accounts/client/components/addressBookGrid.js"],"names":["React","Component","module","watch","require","v","PropTypes","Components","registerComponent","AddressBookGrid","state","defaultShippingAddressId","defaultBillingAddressId","onSelect","_id","usage","select","props","setDefaultAddress","componentWillReceiveProps","nextProps","addressBook","Array","isArray","forEach","addy","isShippingDefault","isBillingDefault","setState","renderHeading","renderAddress","address1","address2","city","region","postal","country","phone","trim","renderAddressGrid","edit","remove","map","address","fullName","activeShipping","activeBilling","e","keyCode","render","defaultShippingAddress","find","defaultBillingAddress","propTypes","arrayOf","shape","string","bool","isCommercal","func","defaultProps","exportDefault"],"mappings":"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","sourcesContent":["import React, { Component } from \"react\";\nimport PropTypes from \"prop-types\";\nimport { Components, registerComponent } from \"@reactioncommerce/reaction-components\";\n\nclass AddressBookGrid extends Component {\n  static propTypes = {\n    // array of address objects\n    addressBook: PropTypes.arrayOf(PropTypes.shape({\n      _id: PropTypes.string,\n      fullName: PropTypes.string,\n      address1: PropTypes.string,\n      address2: PropTypes.string,\n      postal: PropTypes.string,\n      city: PropTypes.string,\n      region: PropTypes.string,\n      country: PropTypes.string,\n      phone: PropTypes.string,\n      isBillingDefault: PropTypes.bool,\n      isShippingDefault: PropTypes.bool,\n      isCommercal: PropTypes.bool\n    })),\n    // selects an address to be edited and renders the AddressBookForm\n    edit: PropTypes.func,\n    // removes the selected address\n    remove: PropTypes.func,\n    // selects a default shipping or billing address\n    select: PropTypes.func\n  }\n\n  static defaultProps = {\n    edit() {},\n    remove() {},\n    select() {}\n  }\n\n  state = {\n    defaultShippingAddressId: this.defaultShippingAddressId,\n    defaultBillingAddressId: this.defaultBillingAddressId\n  }\n\n  componentWillReceiveProps(nextProps) {\n    let { addressBook } = nextProps;\n    if (!Array.isArray(addressBook)) addressBook = [];\n    // if a new address has been added to the addressBook\n    // check to see if the new address is now the default shipping or billing address\n    addressBook.forEach((addy) => {\n      if (addy.isShippingDefault && addy._id !== this.defaultShippingAddressId) {\n        this.setDefaultAddress(addy._id, \"shipping\");\n      }\n\n      if (addy.isBillingDefault && addy._id !== this.defaultBillingAddressId) {\n        this.setDefaultAddress(addy._id, \"billing\");\n      }\n    });\n  }\n\n  // Address Book Grid helpers\n\n  /**\n   * @method setDefaultaddress\n   * @summary updating the compoenet state with the new default shipping or billing address.\n   * @since 2.0.0\n   * @param {String} _id - address object _id.\n   * @param {String} usage - the address usage \"shipping\" or \"billing\".\n   */\n  setDefaultAddress(_id, usage) {\n    if (usage === \"shipping\") {\n      this.setState({\n        defaultShippingAddressId: _id\n      });\n    }\n    if (usage === \"billing\") {\n      this.setState({\n        defaultBillingAddressId: _id\n      });\n    }\n  }\n\n  /**\n   * @method addressBook\n   * @summary getter that returns the addressBook array if avalible on the props or an empty array.\n   * @since 2.0.0\n   * @return {Array} addressBook - array of address object or an empty array.\n   */\n  get addressBook() {\n    let { addressBook } = this.props;\n    if (!Array.isArray(addressBook)) addressBook = [];\n    return addressBook;\n  }\n\n  /**\n   * @method defaultShippingAddressId\n   * @summary getter that returns ether the default shipping address _id or and empty string.\n   * @since 2.0.0\n   * @return {String} - default shipping address _id or empty string.\n   */\n  get defaultShippingAddressId() {\n    const { addressBook } = this;\n    const defaultShippingAddress = addressBook.find((addy) => addy.isShippingDefault);\n    return (defaultShippingAddress) ? defaultShippingAddress._id : \"\";\n  }\n\n  /**\n   * @method defaultBillingAddressId\n   * @summary getter that returns ether the default billing address _id or and empty string.\n   * @since 2.0.0\n   * @return {String} - default billing address _id or empty string.\n   */\n  get defaultBillingAddressId() {\n    const { addressBook } = this;\n    const defaultBillingAddress = addressBook.find((addy) => addy.isBillingDefault);\n    return (defaultBillingAddress) ? defaultBillingAddress._id : \"\";\n  }\n\n  // Address Book Actions\n\n  /**\n   * @method onSelect\n   * @summary handler when an address in the grid is selected as\n   * a default shipping or billing address. This handler sets the default address\n   * in component state as well as calling the parent reducer to set the default address in db.\n   * @since 2.0.0\n   * @param {String} _id - address object _id.\n   * @param {String} usage - the address usage \"shipping\" or \"billing\".\n   */\n  onSelect = (_id, usage) => {\n    const { select } = this.props;\n    this.setDefaultAddress(_id, usage);\n    select(_id, usage);\n  }\n\n  /**\n   * @method renderHeading\n   * @summary renders address book grid heading content\n   * @since 2.0.0\n   * @return {Object} - JSX\n   */\n  renderHeading() {\n    return (\n      <div className=\"address-list-header\">\n        <div className=\"address-list-heading\">\n          <h4>\n            <Components.Translation defaultValue=\"Select a shipping address\" i18nKey=\"addressBookGrid.selectShippingAddress\" />\n          </h4>\n        </div>\n        <div className=\"address-list-heading\">\n          <h4>\n            <Components.Translation defaultValue=\"Select a billing address\" i18nKey=\"addressBookGrid.selectBillingAddress\"/>\n          </h4>\n        </div>\n        <div className=\"address-list-heading-blank\" />\n      </div>\n    );\n  }\n\n  /**\n   * @method renderAddress\n   * @summary renders an address\n   * @since 2.0.0\n   * @param {Object} address - address object that we destructor to get the needed property\n   * @return {Object} - JSX\n   */\n  renderAddress({ address1, address2, city, region, postal, country, phone }) {\n    return (\n      <address>\n        {`${address1 || \"\"} ${address2 || \"\"}`.trim()}<br/>\n        {city}, {region} {postal} {country}<br/>\n        {phone || \"\"}\n      </address>\n    );\n  }\n\n  /**\n   * @method renderAddressGrid\n   * @summary renders address grid by mapping over the addressBook array\n   * @since 2.0.0\n   * @return {Object} - JSX\n   */\n  renderAddressGrid() {\n    const { addressBook } = this;\n    const { edit, remove } = this.props;\n    return addressBook.map((address) => {\n      const { defaultBillingAddressId, defaultShippingAddressId } = this.state;\n      const { _id, fullName } = address;\n      const activeShipping = (defaultShippingAddressId === _id) ? \"active\" : \"\";\n      const activeBilling = (defaultBillingAddressId === _id) ? \"active\" : \"\";\n      return (\n        <div className=\"address-list-item\" key={_id}>\n          <div\n            className={`address ${activeShipping}`}\n            role=\"button\"\n            tabIndex=\"0\"\n            onKeyUp={(e) => { if (e.keyCode === 13) this.onSelect(_id, \"shipping\"); }}\n            onClick={() => { this.onSelect(_id, \"shipping\"); }}\n          >\n            <strong>{fullName}</strong>\n            {this.renderAddress(address)}\n          </div>\n          <div\n            className={`address ${activeBilling}`}\n            role=\"button\"\n            tabIndex=\"0\"\n            onKeyUp={(e) => { if (e.keyCode === 13) this.onSelect(_id, \"billing\"); }}\n            onClick={() => { this.onSelect(_id, \"billing\"); }}\n          >\n            <strong>{fullName}</strong>\n            {this.renderAddress(address)}\n          </div>\n          {/* <span className=\"sr-only\"> */}\n          <div className=\"controls\">\n            <Components.Button\n              className=\"btn btn-default\"\n              onClick={() => { edit(_id); }}\n              icon=\"fa fa-pencil\"\n              tooltip=\"Edit Address\"\n              i18nKeyTooltip=\"addressBookGrid.edit\"\n            />\n            <Components.Button\n              className=\"btn btn-default danger-action\"\n              onClick={() => { remove(_id); }}\n              icon=\"fa fa-trash-o\"\n              tooltip=\"Remove Address\"\n              i18nKeyTooltip=\"addressBookGrid.removeAddress\"\n            />\n          </div>\n        </div>\n      );\n    });\n  }\n\n  render() {\n    return (\n      <div className=\"address-list\">\n        {this.renderHeading()}\n        {this.renderAddressGrid()}\n      </div>\n    );\n  }\n}\n\nregisterComponent(\"AddressBookGrid\", AddressBookGrid);\n\nexport default AddressBookGrid;\n"]},"sourceType":"script","hash":"468772985275e78b75b50e8ae06c694edd8438b4"}
