{"metadata":{},"options":{"plugins":[{"key":"base$0$0","visitor":{"Program":{"enter":[null]},"_exploded":true,"_verified":true},"options":{"generateLetDeclarations":true,"enforceStrictMode":false}},{"key":"transform-meteor-dynamic-import","visitor":{"_exploded":{},"_verified":{},"CallExpression":{"enter":[null]}},"options":{}},{"key":"base$0$2","visitor":{"CallExpression":{"enter":[null]},"BinaryExpression":{"enter":[null]},"MemberExpression":{"enter":[null],"exit":[null]},"_exploded":true,"_verified":true,"Identifier":{"enter":[null]},"JSXIdentifier":{"enter":[null]}},"options":{"polyfill":false,"useBuiltIns":false}},{"key":"base$0$3","visitor":{"_exploded":{},"_verified":{},"ClassDeclaration":{"enter":[null]},"ClassExpression":{"enter":[null]}},"options":{"loose":true}},{"key":"base$0$4","visitor":{"FunctionExpression":{"exit":[null]},"_exploded":true,"_verified":true},"options":{}},{"key":"base$0$5","visitor":{"ForInStatement":{"enter":[null]},"_exploded":true,"_verified":true},"options":{}},{"key":"base$0$6","visitor":{"Program":{"exit":[null]},"_exploded":true,"_verified":true},"options":{"allowTopLevelThis":true,"strictMode":false,"loose":true}},{"key":"base$0$1$0","visitor":{"_exploded":{},"_verified":{},"JSXNamespacedName":{"enter":[null]},"JSXElement":{"exit":[null]},"JSXFragment":{"exit":[null]},"Program":{"enter":[null],"exit":[null]},"JSXAttribute":{"enter":[null]}},"options":{"pragma":"React.createElement","pragmaFrag":"React.Fragment","throwIfNamespace":true,"useBuiltIns":false}},{"key":"base$0$1$1","visitor":{"_exploded":true,"_verified":true},"options":{}},{"key":"base$0$1$2","visitor":{"ExportDefaultDeclaration":{"enter":[null]},"CallExpression":{"enter":[null]},"_exploded":true,"_verified":true},"options":{}},{"key":"base$0$0$0","visitor":{"_exploded":true,"_verified":true},"options":{}},{"key":"base$0$0$1","visitor":{"_exploded":true,"_verified":true},"options":{}},{"key":"base$0$0$2","visitor":{"ArrowFunctionExpression":{"enter":[null]},"_exploded":true,"_verified":true},"options":{}},{"key":"base$0$0$3","visitor":{"BlockStatement":{"enter":[null]},"SwitchCase":{"enter":[null]},"_exploded":true,"_verified":true},"options":{}},{"key":"base$0$0$4","visitor":{"VariableDeclaration":{"enter":[null]},"CatchClause":{"enter":[null]},"_exploded":true,"BlockStatement":{"enter":[null]},"SwitchStatement":{"enter":[null]},"Program":{"enter":[null]},"_verified":true,"DoWhileStatement":{"enter":[null]},"ForInStatement":{"enter":[null]},"ForStatement":{"enter":[null]},"WhileStatement":{"enter":[null]},"ForOfStatement":{"enter":[null]}},"options":{}},{"key":"base$0$0$5","visitor":{"ExportDefaultDeclaration":{"enter":[null]},"ClassDeclaration":{"enter":[null]},"ClassExpression":{"enter":[null]},"_exploded":true,"_verified":true},"options":{"loose":true}},{"key":"base$0$0$6","visitor":{"ObjectExpression":{"exit":[null]},"_exploded":true,"_verified":true},"options":{"loose":true}},{"key":"base$0$0$7","visitor":{"ExportNamedDeclaration":{"enter":[null]},"CatchClause":{"enter":[null]},"AssignmentExpression":{"enter":[null]},"VariableDeclaration":{"enter":[null]},"_exploded":true,"_verified":true,"ForInStatement":{"enter":[null]},"ForOfStatement":{"enter":[null]}},"options":{}},{"key":"base$0$0$8","visitor":{"ForOfStatement":{"enter":[null]},"_exploded":true,"_verified":true},"options":{"loose":true}},{"key":"base$0$0$9","visitor":{"NumericLiteral":{"enter":[null]},"StringLiteral":{"enter":[null]},"_exploded":true,"_verified":true},"options":{}},{"key":"base$0$0$10","visitor":{"ObjectExpression":{"enter":[null]},"_exploded":true,"_verified":true},"options":{}},{"key":"base$0$0$11","visitor":{"_exploded":true,"_verified":true,"FunctionDeclaration":{"enter":[null]},"FunctionExpression":{"enter":[null]},"ObjectMethod":{"enter":[null]},"ArrowFunctionExpression":{"enter":[null]},"ClassMethod":{"enter":[null]}},"options":{}},{"key":"base$0$0$12","visitor":{"ObjectMethod":{"enter":[null]},"ObjectProperty":{"enter":[null]},"_exploded":true,"_verified":true},"options":{}},{"key":"base$0$0$13","visitor":{"ArrayExpression":{"enter":[null]},"CallExpression":{"enter":[null]},"NewExpression":{"enter":[null]},"_exploded":true,"_verified":true},"options":{}},{"key":"base$0$0$14","visitor":{"RegExpLiteral":{"enter":[null]},"_exploded":true,"_verified":true},"options":{}},{"key":"base$0$0$15","visitor":{"TaggedTemplateExpression":{"enter":[null]},"TemplateLiteral":{"enter":[null]},"_exploded":true,"_verified":true},"options":{"loose":true}},{"key":"base$0$0$16","visitor":{"UnaryExpression":{"enter":[null]},"_exploded":true,"_verified":true,"BlockStatement":{"enter":[null]},"CatchClause":{"enter":[null]},"DoWhileStatement":{"enter":[null]},"ForInStatement":{"enter":[null]},"ForStatement":{"enter":[null]},"FunctionDeclaration":{"enter":[null]},"FunctionExpression":{"enter":[null]},"Program":{"enter":[null]},"ObjectMethod":{"enter":[null]},"SwitchStatement":{"enter":[null]},"WhileStatement":{"enter":[null]},"ArrowFunctionExpression":{"enter":[null]},"ClassDeclaration":{"enter":[null]},"ClassExpression":{"enter":[null]},"ForOfStatement":{"enter":[null]},"ClassMethod":{"enter":[null]}},"options":{}},{"key":"base$0$0$17","visitor":{"RegExpLiteral":{"enter":[null]},"_exploded":true,"_verified":true},"options":{}},{"key":"base$0$0$18","visitor":{"_exploded":true,"_verified":true},"options":{}},{"key":"base$0$0$19","visitor":{"_exploded":{},"_verified":{},"VariableDeclarator":{"enter":[null]},"ExportNamedDeclaration":{"enter":[null]},"CatchClause":{"enter":[null]},"AssignmentExpression":{"enter":[null]},"ObjectExpression":{"enter":[null]},"FunctionDeclaration":{"enter":[null]},"FunctionExpression":{"enter":[null]},"ObjectMethod":{"enter":[null]},"ArrowFunctionExpression":{"enter":[null]},"ClassMethod":{"enter":[null]},"ForInStatement":{"enter":[null]},"ForOfStatement":{"enter":[null]}},"options":{}},{"key":"base$0$0$20","visitor":{"ObjectProperty":{"exit":[null]},"_exploded":true,"_verified":true},"options":{}},{"key":"base$0$0$21","visitor":{"_exploded":{},"_verified":{},"Program":{"enter":[null]},"ImportDeclaration":{"enter":[null,null]},"ClassProperty":{"enter":[null]},"AssignmentPattern":{"enter":[null]},"TypeCastExpression":{"enter":[null,null]},"ImportSpecifier":{"enter":[null]},"ClassDeclaration":{"enter":[null]},"ClassExpression":{"enter":[null]},"FunctionDeclaration":{"enter":[null]},"FunctionExpression":{"enter":[null]},"ObjectMethod":{"enter":[null]},"ArrowFunctionExpression":{"enter":[null]},"ClassMethod":{"enter":[null]},"AnyTypeAnnotation":{"enter":[null]},"ArrayTypeAnnotation":{"enter":[null]},"BooleanTypeAnnotation":{"enter":[null]},"BooleanLiteralTypeAnnotation":{"enter":[null]},"NullLiteralTypeAnnotation":{"enter":[null]},"ClassImplements":{"enter":[null]},"DeclareClass":{"enter":[null]},"DeclareFunction":{"enter":[null]},"DeclareInterface":{"enter":[null]},"DeclareModule":{"enter":[null]},"DeclareModuleExports":{"enter":[null]},"DeclareTypeAlias":{"enter":[null]},"DeclareOpaqueType":{"enter":[null]},"DeclareVariable":{"enter":[null]},"DeclareExportDeclaration":{"enter":[null]},"DeclareExportAllDeclaration":{"enter":[null]},"DeclaredPredicate":{"enter":[null]},"ExistsTypeAnnotation":{"enter":[null]},"FunctionTypeAnnotation":{"enter":[null]},"FunctionTypeParam":{"enter":[null]},"GenericTypeAnnotation":{"enter":[null]},"InferredPredicate":{"enter":[null]},"InterfaceExtends":{"enter":[null]},"InterfaceDeclaration":{"enter":[null]},"IntersectionTypeAnnotation":{"enter":[null]},"MixedTypeAnnotation":{"enter":[null]},"EmptyTypeAnnotation":{"enter":[null]},"NullableTypeAnnotation":{"enter":[null]},"NumberLiteralTypeAnnotation":{"enter":[null]},"NumberTypeAnnotation":{"enter":[null]},"ObjectTypeAnnotation":{"enter":[null]},"ObjectTypeCallProperty":{"enter":[null]},"ObjectTypeIndexer":{"enter":[null]},"ObjectTypeProperty":{"enter":[null]},"ObjectTypeSpreadProperty":{"enter":[null]},"OpaqueType":{"enter":[null]},"QualifiedTypeIdentifier":{"enter":[null]},"StringLiteralTypeAnnotation":{"enter":[null]},"StringTypeAnnotation":{"enter":[null]},"ThisTypeAnnotation":{"enter":[null]},"TupleTypeAnnotation":{"enter":[null]},"TypeofTypeAnnotation":{"enter":[null]},"TypeAlias":{"enter":[null]},"TypeAnnotation":{"enter":[null]},"TypeParameter":{"enter":[null]},"TypeParameterDeclaration":{"enter":[null]},"TypeParameterInstantiation":{"enter":[null]},"UnionTypeAnnotation":{"enter":[null]},"Variance":{"enter":[null]},"VoidTypeAnnotation":{"enter":[null]},"ExportAllDeclaration":{"enter":[null]},"ExportDefaultDeclaration":{"enter":[null]},"ExportNamedDeclaration":{"enter":[null]}},"options":{}},{"key":"base$0$0$22","visitor":{"AssignmentExpression":{"enter":[null]},"BinaryExpression":{"enter":[null]},"_exploded":true,"_verified":true},"options":{}},{"key":"base$0$0$23","visitor":{"_exploded":{},"_verified":{},"Program":{"enter":[null]}},"options":{}},{"key":"regenerator-transform","visitor":{"_exploded":true,"_verified":true,"FunctionDeclaration":{"exit":[null]},"FunctionExpression":{"exit":[null]},"ObjectMethod":{"exit":[null]},"ArrowFunctionExpression":{"exit":[null]},"ClassMethod":{"exit":[null]}},"options":{}}],"presets":[],"compact":false,"ast":true,"babelrc":false,"sourceFileName":"imports/plugins/core/ui/client/containers/tagListContainer.js","filename":"imports/plugins/core/ui/client/containers/tagListContainer.js","sourceMaps":true,"envName":"development","cwd":"/Users/estebandev/test-knowledge","passPerPreset":false,"parserOpts":{"sourceType":"module","sourceFileName":"imports/plugins/core/ui/client/containers/tagListContainer.js","plugins":["dynamicImport","classProperties","jsx","jsx","flow","asyncGenerators","objectRestSpread","objectRestSpread","flow","asyncGenerators"]},"generatorOpts":{"filename":"imports/plugins/core/ui/client/containers/tagListContainer.js","comments":true,"compact":false,"sourceMaps":true,"sourceFileName":"imports/plugins/core/ui/client/containers/tagListContainer.js"}},"code":"var _extends2 = _interopRequireDefault(require(\"@babel/runtime/helpers/extends\"));\n\nvar _createClass2 = _interopRequireDefault(require(\"@babel/runtime/helpers/createClass\"));\n\nvar _inheritsLoose2 = _interopRequireDefault(require(\"@babel/runtime/helpers/inheritsLoose\"));\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { \"default\": obj }; }\n\nvar _compose;\n\nmodule.watch(require(\"recompose/compose\"), {\n  \"default\": function (v) {\n    _compose = v;\n  }\n}, 0);\n\nvar _map;\n\nmodule.watch(require(\"lodash/map\"), {\n  \"default\": function (v) {\n    _map = v;\n  }\n}, 1);\n\nvar _isArray;\n\nmodule.watch(require(\"lodash/isArray\"), {\n  \"default\": function (v) {\n    _isArray = v;\n  }\n}, 2);\n\nvar _debounce;\n\nmodule.watch(require(\"lodash/debounce\"), {\n  \"default\": function (v) {\n    _debounce = v;\n  }\n}, 3);\nvar React, Component;\nmodule.watch(require(\"react\"), {\n  \"default\": function (v) {\n    React = v;\n  },\n  Component: function (v) {\n    Component = v;\n  }\n}, 4);\nvar PropTypes;\nmodule.watch(require(\"prop-types\"), {\n  \"default\": function (v) {\n    PropTypes = v;\n  }\n}, 5);\nvar update;\nmodule.watch(require(\"immutability-helper\"), {\n  \"default\": function (v) {\n    update = v;\n  }\n}, 6);\nvar registerComponent, composeWithTracker, Components;\nmodule.watch(require(\"../../../components/lib\"), {\n  registerComponent: function (v) {\n    registerComponent = v;\n  },\n  composeWithTracker: function (v) {\n    composeWithTracker = v;\n  },\n  Components: function (v) {\n    Components = v;\n  }\n}, 7);\nvar Meteor;\nmodule.watch(require(\"meteor/meteor\"), {\n  Meteor: function (v) {\n    Meteor = v;\n  }\n}, 8);\nvar Reaction, i18next;\nmodule.watch(require(\"../../../../../../client/api\"), {\n  Reaction: function (v) {\n    Reaction = v;\n  },\n  i18next: function (v) {\n    i18next = v;\n  }\n}, 9);\nvar TagList;\nmodule.watch(require(\"../components/tags/tagList\"), {\n  \"default\": function (v) {\n    TagList = v;\n  }\n}, 10);\nvar Tags;\nmodule.watch(require(\"../../../../../../lib/collections\"), {\n  Tags: function (v) {\n    Tags = v;\n  }\n}, 11);\nvar getTagIds;\nmodule.watch(require(\"../../../../../../lib/selectors/tags\"), {\n  getTagIds: function (v) {\n    getTagIds = v;\n  }\n}, 12);\n\nfunction updateSuggestions(term, _ref) {\n  var excludeTags = _ref.excludeTags;\n  var slug = Reaction.getSlug(term);\n  var selector = {\n    slug: new RegExp(slug, \"i\")\n  };\n\n  if (Array.isArray(excludeTags)) {\n    selector._id = {\n      $nin: excludeTags\n    };\n  }\n\n  var tags = Tags.find(selector).map(function (tag) {\n    return {\n      label: tag.name\n    };\n  });\n  return tags;\n}\n\nvar wrapComponent = function (Comp) {\n  var _class, _temp;\n\n  return _temp = _class =\n  /*#__PURE__*/\n  function (_Component) {\n    (0, _inheritsLoose2.default)(TagListContainer, _Component);\n\n    function TagListContainer(props) {\n      var _this;\n\n      _this = _Component.call(this, props) || this;\n\n      _this.handleNewTagSave = function (tag) {\n        if (_this.productId && _this.canSaveTag(tag)) {\n          Meteor.call(\"products/updateProductTags\", _this.productId, tag.name, null, function (error) {\n            if (error) {\n              return Alerts.toast(i18next.t(\"productDetail.tagExists\"), \"error\");\n            }\n\n            _this.setState({\n              newTag: {\n                name: \"\"\n              },\n              suggestions: []\n            });\n\n            return true;\n          });\n        }\n      };\n\n      _this.handleNewTagUpdate = function (tag) {\n        _this.setState({\n          newTag: tag\n        });\n      };\n\n      _this.handleTagSave = function (tag) {\n        if (_this.productId && _this.canSaveTag(tag)) {\n          Meteor.call(\"products/updateProductTags\", _this.productId, tag.name, tag._id, function (error) {\n            if (error) {\n              return Alerts.toast(i18next.t(\"productDetail.tagExists\"), \"error\");\n            }\n\n            _this.setState({\n              suggestions: []\n            });\n\n            return true;\n          });\n        }\n      };\n\n      _this.handleTagRemove = function (tag) {\n        if (_this.productId) {\n          Meteor.call(\"products/removeProductTag\", _this.productId, tag._id, function (error) {\n            if (error) {\n              Alerts.toast(i18next.t(\"productDetail.tagInUse\"), \"error\");\n            }\n          });\n        }\n      };\n\n      _this.handleTagUpdate = function (tag) {\n        var _tagsByKey;\n\n        var newState = update(_this.state, {\n          tagsByKey: (_tagsByKey = {}, _tagsByKey[tag._id] = {\n            $set: tag\n          }, _tagsByKey)\n        });\n\n        _this.setState(newState);\n      };\n\n      _this.handleMoveTag = function (dragIndex, hoverIndex) {\n        var tag = _this.state.tagIds[dragIndex]; // Apply new sort order to variant list\n\n        var newState = update(_this.state, {\n          tagIds: {\n            $splice: [[dragIndex, 1], [hoverIndex, 0, tag]]\n          }\n        }); // Set local state so the component does't have to wait for a round-trip\n        // to the server to get the updated list of variants\n\n        _this.setState(newState, function () {\n          // Save the updated positions\n          if (_this.props.product) {\n            _this.debounceUpdateTagOrder();\n          }\n        });\n      };\n\n      _this.handleGetSuggestions = function (suggestionUpdateRequest) {\n        var suggestions = updateSuggestions(suggestionUpdateRequest.value, {\n          excludeTags: _this.state.tagIds\n        });\n\n        _this.setState({\n          suggestions: suggestions\n        });\n      };\n\n      _this.handleClearSuggestions = function () {\n        _this.setState({\n          suggestions: []\n        });\n      };\n\n      _this.state = {\n        tagIds: props.tagIds || [],\n        tagsByKey: props.tagsByKey || {},\n        newTag: {\n          name: \"\"\n        },\n        suggestions: []\n      };\n      _this.debounceUpdateTagOrder = _debounce(function () {\n        Meteor.call(\"products/updateProductField\", _this.props.product._id, \"hashtags\", _this.state.tagIds);\n      }, 500);\n      return _this;\n    }\n\n    var _proto = TagListContainer.prototype;\n\n    _proto.componentWillReceiveProps = function () {\n      function componentWillReceiveProps(nextProps) {\n        this.setState({\n          tagIds: nextProps.tagIds || [],\n          tagsByKey: nextProps.tagsByKey || {}\n        });\n      }\n\n      return componentWillReceiveProps;\n    }();\n\n    _proto.canSaveTag = function () {\n      function canSaveTag(tag) {\n        // Blank tags cannot be saved\n        if (typeof tag.name === \"string\" && tag.name.trim().length === 0) {\n          return false;\n        } // If the tag does not have an id, then allow the save\n\n\n        if (!tag._id) {\n          return true;\n        } // Get the original tag from the props\n        // Tags from props are not mutated, and come from an outside source\n\n\n        var originalTag = this.props.tagsByKey[tag._id];\n\n        if (originalTag && originalTag.name !== tag.name) {\n          return true;\n        }\n\n        return false;\n      }\n\n      return canSaveTag;\n    }();\n\n    _proto.render = function () {\n      function render() {\n        return React.createElement(Components.DragDropProvider, null, React.createElement(Comp, (0, _extends2.default)({\n          newTag: this.state.newTag,\n          onClick: this.handleEditButtonClick,\n          onClearSuggestions: this.handleClearSuggestions,\n          onGetSuggestions: this.handleGetSuggestions,\n          onMoveTag: this.handleMoveTag,\n          onNewTagSave: this.handleNewTagSave,\n          onNewTagUpdate: this.handleNewTagUpdate,\n          onTagRemove: this.handleTagRemove,\n          onTagSave: this.handleTagSave,\n          onTagUpdate: this.handleTagUpdate,\n          suggestions: this.state.suggestions,\n          tags: this.tags,\n          tooltip: \"Unpublished changes\"\n        }, this.props)));\n      }\n\n      return render;\n    }();\n\n    (0, _createClass2.default)(TagListContainer, [{\n      key: \"productId\",\n      get: function () {\n        if (this.props.product) {\n          return this.props.product._id;\n        }\n\n        return null;\n      }\n    }, {\n      key: \"tags\",\n      get: function () {\n        var _this2 = this;\n\n        if (this.props.editable) {\n          return this.state.tagIds.map(function (tagId) {\n            return _this2.state.tagsByKey[tagId];\n          });\n        }\n\n        return this.props.tagsAsArray;\n      }\n    }]);\n    return TagListContainer;\n  }(Component), _class.propTypes = {\n    children: PropTypes.node,\n    editable: PropTypes.bool,\n    hasPermission: PropTypes.bool,\n    product: PropTypes.object,\n    tagIds: PropTypes.arrayOf(PropTypes.string),\n    tagsAsArray: PropTypes.arrayOf(PropTypes.object),\n    tagsByKey: PropTypes.object\n  }, _temp;\n};\n\nfunction composer(props, onData) {\n  var tags = props.tags;\n\n  if (props.product) {\n    if (_isArray(props.product.hashtags)) {\n      tags = _map(props.product.hashtags, function (id) {\n        return Tags.findOne(id);\n      });\n    }\n  }\n\n  var isEditable = props.editable;\n\n  if (typeof isEditable !== \"boolean\") {\n    isEditable = Reaction.hasPermission(props.permissions);\n  }\n\n  var tagsByKey = {};\n\n  if (Array.isArray(tags)) {\n    for (var _iterator = tags, _isArray2 = Array.isArray(_iterator), _i = 0, _iterator = _isArray2 ? _iterator : _iterator[Symbol.iterator]();;) {\n      var _ref2;\n\n      if (_isArray2) {\n        if (_i >= _iterator.length) break;\n        _ref2 = _iterator[_i++];\n      } else {\n        _i = _iterator.next();\n        if (_i.done) break;\n        _ref2 = _i.value;\n      }\n\n      var _tag = _ref2;\n\n      if (_tag) {\n        tagsByKey[_tag._id] = _tag;\n      }\n    }\n  }\n\n  onData(null, {\n    isProductTags: props.product !== undefined,\n    tagIds: getTagIds({\n      tags: tags\n    }),\n    tagsByKey: tagsByKey,\n    tagsAsArray: tags,\n    editable: isEditable\n  });\n}\n\nregisterComponent(\"TagList\", TagList, [composeWithTracker(composer), wrapComponent]);\nmodule.exportDefault(_compose(composeWithTracker(composer), wrapComponent)(TagList));","map":{"version":3,"sources":["imports/plugins/core/ui/client/containers/tagListContainer.js"],"names":["_compose","module","watch","require","v","_map","_isArray","_debounce","React","Component","PropTypes","update","registerComponent","composeWithTracker","Components","Meteor","Reaction","i18next","TagList","Tags","getTagIds","updateSuggestions","term","excludeTags","slug","getSlug","selector","RegExp","Array","isArray","_id","$nin","tags","find","map","tag","label","name","wrapComponent","Comp","props","handleNewTagSave","productId","canSaveTag","call","error","Alerts","toast","t","setState","newTag","suggestions","handleNewTagUpdate","handleTagSave","handleTagRemove","handleTagUpdate","newState","state","tagsByKey","$set","handleMoveTag","dragIndex","hoverIndex","tagIds","$splice","product","debounceUpdateTagOrder","handleGetSuggestions","suggestionUpdateRequest","value","handleClearSuggestions","componentWillReceiveProps","nextProps","trim","length","originalTag","render","handleEditButtonClick","editable","tagId","tagsAsArray","propTypes","children","node","bool","hasPermission","object","arrayOf","string","composer","onData","hashtags","id","findOne","isEditable","permissions","isProductTags","undefined","exportDefault"],"mappings":"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","sourcesContent":["import React, { Component } from \"react\";\nimport PropTypes from \"prop-types\";\nimport _ from \"lodash\";\nimport update from \"immutability-helper\";\nimport { compose } from \"recompose\";\nimport { registerComponent, composeWithTracker, Components } from \"@reactioncommerce/reaction-components\";\nimport { Meteor } from \"meteor/meteor\";\nimport { Reaction, i18next } from \"/client/api\";\nimport TagList from \"../components/tags/tagList\";\nimport { Tags } from \"/lib/collections\";\nimport { getTagIds } from \"/lib/selectors/tags\";\n\nfunction updateSuggestions(term, { excludeTags }) {\n  const slug = Reaction.getSlug(term);\n\n  const selector = {\n    slug: new RegExp(slug, \"i\")\n  };\n\n  if (Array.isArray(excludeTags)) {\n    selector._id = {\n      $nin: excludeTags\n    };\n  }\n\n  const tags = Tags.find(selector).map((tag) => ({\n    label: tag.name\n  }));\n\n  return tags;\n}\n\nconst wrapComponent = (Comp) => (\n  class TagListContainer extends Component {\n    static propTypes = {\n      children: PropTypes.node,\n      editable: PropTypes.bool,\n      hasPermission: PropTypes.bool,\n      product: PropTypes.object,\n      tagIds: PropTypes.arrayOf(PropTypes.string),\n      tagsAsArray: PropTypes.arrayOf(PropTypes.object),\n      tagsByKey: PropTypes.object\n    }\n\n    constructor(props) {\n      super(props);\n\n      this.state = {\n        tagIds: props.tagIds || [],\n        tagsByKey: props.tagsByKey || {},\n        newTag: {\n          name: \"\"\n        },\n        suggestions: []\n      };\n\n      this.debounceUpdateTagOrder = _.debounce(() => {\n        Meteor.call(\n          \"products/updateProductField\",\n          this.props.product._id,\n          \"hashtags\",\n          this.state.tagIds\n        );\n      }, 500);\n    }\n\n    componentWillReceiveProps(nextProps) {\n      this.setState({\n        tagIds: nextProps.tagIds || [],\n        tagsByKey: nextProps.tagsByKey || {}\n      });\n    }\n\n    get productId() {\n      if (this.props.product) {\n        return this.props.product._id;\n      }\n      return null;\n    }\n\n    canSaveTag(tag) {\n      // Blank tags cannot be saved\n      if (typeof tag.name === \"string\" && tag.name.trim().length === 0) {\n        return false;\n      }\n\n      // If the tag does not have an id, then allow the save\n      if (!tag._id) {\n        return true;\n      }\n\n      // Get the original tag from the props\n      // Tags from props are not mutated, and come from an outside source\n      const originalTag = this.props.tagsByKey[tag._id];\n\n      if (originalTag && originalTag.name !== tag.name) {\n        return true;\n      }\n\n      return false;\n    }\n\n    handleNewTagSave = (tag) => {\n      if (this.productId && this.canSaveTag(tag)) {\n        Meteor.call(\"products/updateProductTags\", this.productId, tag.name, null, (error) => {\n          if (error) {\n            return Alerts.toast(i18next.t(\"productDetail.tagExists\"), \"error\");\n          }\n\n          this.setState({\n            newTag: {\n              name: \"\"\n            },\n            suggestions: []\n          });\n\n          return true;\n        });\n      }\n    }\n\n    handleNewTagUpdate = (tag) => {\n      this.setState({\n        newTag: tag\n      });\n    }\n\n    handleTagSave = (tag) => {\n      if (this.productId && this.canSaveTag(tag)) {\n        Meteor.call(\"products/updateProductTags\", this.productId, tag.name, tag._id, (error) => {\n          if (error) {\n            return Alerts.toast(i18next.t(\"productDetail.tagExists\"), \"error\");\n          }\n\n          this.setState({\n            suggestions: []\n          });\n\n          return true;\n        });\n      }\n    }\n\n    handleTagRemove = (tag) => {\n      if (this.productId) {\n        Meteor.call(\"products/removeProductTag\", this.productId, tag._id, (error) => {\n          if (error) {\n            Alerts.toast(i18next.t(\"productDetail.tagInUse\"), \"error\");\n          }\n        });\n      }\n    }\n\n    handleTagUpdate = (tag) => {\n      const newState = update(this.state, {\n        tagsByKey: {\n          [tag._id]: {\n            $set: tag\n          }\n        }\n      });\n\n      this.setState(newState);\n    }\n\n    handleMoveTag = (dragIndex, hoverIndex) => {\n      const tag = this.state.tagIds[dragIndex];\n\n      // Apply new sort order to variant list\n      const newState = update(this.state, {\n        tagIds: {\n          $splice: [\n            [dragIndex, 1],\n            [hoverIndex, 0, tag]\n          ]\n        }\n      });\n\n      // Set local state so the component does't have to wait for a round-trip\n      // to the server to get the updated list of variants\n      this.setState(newState, () => {\n        // Save the updated positions\n        if (this.props.product) {\n          this.debounceUpdateTagOrder();\n        }\n      });\n    }\n\n    handleGetSuggestions = (suggestionUpdateRequest) => {\n      const suggestions = updateSuggestions(\n        suggestionUpdateRequest.value,\n        { excludeTags: this.state.tagIds }\n      );\n\n      this.setState({\n        suggestions\n      });\n    }\n\n    handleClearSuggestions = () => {\n      this.setState({\n        suggestions: []\n      });\n    }\n\n    get tags() {\n      if (this.props.editable) {\n        return this.state.tagIds.map((tagId) => this.state.tagsByKey[tagId]);\n      }\n\n      return this.props.tagsAsArray;\n    }\n\n    render() {\n      return (\n        <Components.DragDropProvider>\n          <Comp\n            newTag={this.state.newTag}\n            onClick={this.handleEditButtonClick}\n            onClearSuggestions={this.handleClearSuggestions}\n            onGetSuggestions={this.handleGetSuggestions}\n            onMoveTag={this.handleMoveTag}\n            onNewTagSave={this.handleNewTagSave}\n            onNewTagUpdate={this.handleNewTagUpdate}\n            onTagRemove={this.handleTagRemove}\n            onTagSave={this.handleTagSave}\n            onTagUpdate={this.handleTagUpdate}\n            suggestions={this.state.suggestions}\n            tags={this.tags}\n            tooltip=\"Unpublished changes\"\n            {...this.props}\n          />\n        </Components.DragDropProvider>\n      );\n    }\n  }\n);\n\nfunction composer(props, onData) {\n  let { tags } = props;\n\n  if (props.product) {\n    if (_.isArray(props.product.hashtags)) {\n      tags = _.map(props.product.hashtags, (id) => Tags.findOne(id));\n    }\n  }\n\n  let isEditable = props.editable;\n\n  if (typeof isEditable !== \"boolean\") {\n    isEditable = Reaction.hasPermission(props.permissions);\n  }\n\n  const tagsByKey = {};\n\n  if (Array.isArray(tags)) {\n    for (const tag of tags) {\n      if (tag) {\n        tagsByKey[tag._id] = tag;\n      }\n    }\n  }\n\n  onData(null, {\n    isProductTags: props.product !== undefined,\n    tagIds: getTagIds({ tags }),\n    tagsByKey,\n    tagsAsArray: tags,\n    editable: isEditable\n  });\n}\n\nregisterComponent(\"TagList\", TagList, [\n  composeWithTracker(composer),\n  wrapComponent\n]);\n\nexport default compose(\n  composeWithTracker(composer),\n  wrapComponent\n)(TagList);\n"]},"sourceType":"script","hash":"5ccc88554de0d87dc881df488d8e62d7122e2b53"}
