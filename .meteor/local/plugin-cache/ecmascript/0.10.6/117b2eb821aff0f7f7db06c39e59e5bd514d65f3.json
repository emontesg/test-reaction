{"metadata":{},"options":{"plugins":[{"key":"base$0$0","visitor":{"Program":{"enter":[null]},"_exploded":true,"_verified":true},"options":{"generateLetDeclarations":true,"enforceStrictMode":false}},{"key":"transform-meteor-dynamic-import","visitor":{"_exploded":{},"_verified":{},"CallExpression":{"enter":[null]}},"options":{}},{"key":"base$0$2","visitor":{"CallExpression":{"enter":[null]},"BinaryExpression":{"enter":[null]},"MemberExpression":{"enter":[null],"exit":[null]},"_exploded":true,"_verified":true,"Identifier":{"enter":[null]},"JSXIdentifier":{"enter":[null]}},"options":{"polyfill":false,"useBuiltIns":false}},{"key":"base$0$3","visitor":{"_exploded":{},"_verified":{},"ClassDeclaration":{"enter":[null]},"ClassExpression":{"enter":[null]}},"options":{"loose":true}},{"key":"base$0$4","visitor":{"FunctionExpression":{"exit":[null]},"_exploded":true,"_verified":true},"options":{}},{"key":"base$0$5","visitor":{"ForInStatement":{"enter":[null]},"_exploded":true,"_verified":true},"options":{}},{"key":"base$0$6","visitor":{"Program":{"exit":[null]},"_exploded":true,"_verified":true},"options":{"allowTopLevelThis":true,"strictMode":false,"loose":true}},{"key":"base$0$1$0","visitor":{"_exploded":{},"_verified":{},"JSXNamespacedName":{"enter":[null]},"JSXElement":{"exit":[null]},"JSXFragment":{"exit":[null]},"Program":{"enter":[null],"exit":[null]},"JSXAttribute":{"enter":[null]}},"options":{"pragma":"React.createElement","pragmaFrag":"React.Fragment","throwIfNamespace":true,"useBuiltIns":false}},{"key":"base$0$1$1","visitor":{"_exploded":true,"_verified":true},"options":{}},{"key":"base$0$1$2","visitor":{"ExportDefaultDeclaration":{"enter":[null]},"CallExpression":{"enter":[null]},"_exploded":true,"_verified":true},"options":{}},{"key":"base$0$0$0","visitor":{"_exploded":true,"_verified":true},"options":{}},{"key":"base$0$0$1","visitor":{"_exploded":true,"_verified":true},"options":{}},{"key":"base$0$0$2","visitor":{"ArrowFunctionExpression":{"enter":[null]},"_exploded":true,"_verified":true},"options":{}},{"key":"base$0$0$3","visitor":{"BlockStatement":{"enter":[null]},"SwitchCase":{"enter":[null]},"_exploded":true,"_verified":true},"options":{}},{"key":"base$0$0$4","visitor":{"VariableDeclaration":{"enter":[null]},"CatchClause":{"enter":[null]},"_exploded":true,"BlockStatement":{"enter":[null]},"SwitchStatement":{"enter":[null]},"Program":{"enter":[null]},"_verified":true,"DoWhileStatement":{"enter":[null]},"ForInStatement":{"enter":[null]},"ForStatement":{"enter":[null]},"WhileStatement":{"enter":[null]},"ForOfStatement":{"enter":[null]}},"options":{}},{"key":"base$0$0$5","visitor":{"ExportDefaultDeclaration":{"enter":[null]},"ClassDeclaration":{"enter":[null]},"ClassExpression":{"enter":[null]},"_exploded":true,"_verified":true},"options":{"loose":true}},{"key":"base$0$0$6","visitor":{"ObjectExpression":{"exit":[null]},"_exploded":true,"_verified":true},"options":{"loose":true}},{"key":"base$0$0$7","visitor":{"ExportNamedDeclaration":{"enter":[null]},"CatchClause":{"enter":[null]},"AssignmentExpression":{"enter":[null]},"VariableDeclaration":{"enter":[null]},"_exploded":true,"_verified":true,"ForInStatement":{"enter":[null]},"ForOfStatement":{"enter":[null]}},"options":{}},{"key":"base$0$0$8","visitor":{"ForOfStatement":{"enter":[null]},"_exploded":true,"_verified":true},"options":{"loose":true}},{"key":"base$0$0$9","visitor":{"NumericLiteral":{"enter":[null]},"StringLiteral":{"enter":[null]},"_exploded":true,"_verified":true},"options":{}},{"key":"base$0$0$10","visitor":{"ObjectExpression":{"enter":[null]},"_exploded":true,"_verified":true},"options":{}},{"key":"base$0$0$11","visitor":{"_exploded":true,"_verified":true,"FunctionDeclaration":{"enter":[null]},"FunctionExpression":{"enter":[null]},"ObjectMethod":{"enter":[null]},"ArrowFunctionExpression":{"enter":[null]},"ClassMethod":{"enter":[null]}},"options":{}},{"key":"base$0$0$12","visitor":{"ObjectMethod":{"enter":[null]},"ObjectProperty":{"enter":[null]},"_exploded":true,"_verified":true},"options":{}},{"key":"base$0$0$13","visitor":{"ArrayExpression":{"enter":[null]},"CallExpression":{"enter":[null]},"NewExpression":{"enter":[null]},"_exploded":true,"_verified":true},"options":{}},{"key":"base$0$0$14","visitor":{"RegExpLiteral":{"enter":[null]},"_exploded":true,"_verified":true},"options":{}},{"key":"base$0$0$15","visitor":{"TaggedTemplateExpression":{"enter":[null]},"TemplateLiteral":{"enter":[null]},"_exploded":true,"_verified":true},"options":{"loose":true}},{"key":"base$0$0$16","visitor":{"UnaryExpression":{"enter":[null]},"_exploded":true,"_verified":true,"BlockStatement":{"enter":[null]},"CatchClause":{"enter":[null]},"DoWhileStatement":{"enter":[null]},"ForInStatement":{"enter":[null]},"ForStatement":{"enter":[null]},"FunctionDeclaration":{"enter":[null]},"FunctionExpression":{"enter":[null]},"Program":{"enter":[null]},"ObjectMethod":{"enter":[null]},"SwitchStatement":{"enter":[null]},"WhileStatement":{"enter":[null]},"ArrowFunctionExpression":{"enter":[null]},"ClassDeclaration":{"enter":[null]},"ClassExpression":{"enter":[null]},"ForOfStatement":{"enter":[null]},"ClassMethod":{"enter":[null]}},"options":{}},{"key":"base$0$0$17","visitor":{"RegExpLiteral":{"enter":[null]},"_exploded":true,"_verified":true},"options":{}},{"key":"base$0$0$18","visitor":{"_exploded":true,"_verified":true},"options":{}},{"key":"base$0$0$19","visitor":{"_exploded":{},"_verified":{},"VariableDeclarator":{"enter":[null]},"ExportNamedDeclaration":{"enter":[null]},"CatchClause":{"enter":[null]},"AssignmentExpression":{"enter":[null]},"ObjectExpression":{"enter":[null]},"FunctionDeclaration":{"enter":[null]},"FunctionExpression":{"enter":[null]},"ObjectMethod":{"enter":[null]},"ArrowFunctionExpression":{"enter":[null]},"ClassMethod":{"enter":[null]},"ForInStatement":{"enter":[null]},"ForOfStatement":{"enter":[null]}},"options":{}},{"key":"base$0$0$20","visitor":{"ObjectProperty":{"exit":[null]},"_exploded":true,"_verified":true},"options":{}},{"key":"base$0$0$21","visitor":{"_exploded":{},"_verified":{},"Program":{"enter":[null]},"ImportDeclaration":{"enter":[null,null]},"ClassProperty":{"enter":[null]},"AssignmentPattern":{"enter":[null]},"TypeCastExpression":{"enter":[null,null]},"ImportSpecifier":{"enter":[null]},"ClassDeclaration":{"enter":[null]},"ClassExpression":{"enter":[null]},"FunctionDeclaration":{"enter":[null]},"FunctionExpression":{"enter":[null]},"ObjectMethod":{"enter":[null]},"ArrowFunctionExpression":{"enter":[null]},"ClassMethod":{"enter":[null]},"AnyTypeAnnotation":{"enter":[null]},"ArrayTypeAnnotation":{"enter":[null]},"BooleanTypeAnnotation":{"enter":[null]},"BooleanLiteralTypeAnnotation":{"enter":[null]},"NullLiteralTypeAnnotation":{"enter":[null]},"ClassImplements":{"enter":[null]},"DeclareClass":{"enter":[null]},"DeclareFunction":{"enter":[null]},"DeclareInterface":{"enter":[null]},"DeclareModule":{"enter":[null]},"DeclareModuleExports":{"enter":[null]},"DeclareTypeAlias":{"enter":[null]},"DeclareOpaqueType":{"enter":[null]},"DeclareVariable":{"enter":[null]},"DeclareExportDeclaration":{"enter":[null]},"DeclareExportAllDeclaration":{"enter":[null]},"DeclaredPredicate":{"enter":[null]},"ExistsTypeAnnotation":{"enter":[null]},"FunctionTypeAnnotation":{"enter":[null]},"FunctionTypeParam":{"enter":[null]},"GenericTypeAnnotation":{"enter":[null]},"InferredPredicate":{"enter":[null]},"InterfaceExtends":{"enter":[null]},"InterfaceDeclaration":{"enter":[null]},"IntersectionTypeAnnotation":{"enter":[null]},"MixedTypeAnnotation":{"enter":[null]},"EmptyTypeAnnotation":{"enter":[null]},"NullableTypeAnnotation":{"enter":[null]},"NumberLiteralTypeAnnotation":{"enter":[null]},"NumberTypeAnnotation":{"enter":[null]},"ObjectTypeAnnotation":{"enter":[null]},"ObjectTypeCallProperty":{"enter":[null]},"ObjectTypeIndexer":{"enter":[null]},"ObjectTypeProperty":{"enter":[null]},"ObjectTypeSpreadProperty":{"enter":[null]},"OpaqueType":{"enter":[null]},"QualifiedTypeIdentifier":{"enter":[null]},"StringLiteralTypeAnnotation":{"enter":[null]},"StringTypeAnnotation":{"enter":[null]},"ThisTypeAnnotation":{"enter":[null]},"TupleTypeAnnotation":{"enter":[null]},"TypeofTypeAnnotation":{"enter":[null]},"TypeAlias":{"enter":[null]},"TypeAnnotation":{"enter":[null]},"TypeParameter":{"enter":[null]},"TypeParameterDeclaration":{"enter":[null]},"TypeParameterInstantiation":{"enter":[null]},"UnionTypeAnnotation":{"enter":[null]},"Variance":{"enter":[null]},"VoidTypeAnnotation":{"enter":[null]},"ExportAllDeclaration":{"enter":[null]},"ExportDefaultDeclaration":{"enter":[null]},"ExportNamedDeclaration":{"enter":[null]}},"options":{}},{"key":"base$0$0$22","visitor":{"AssignmentExpression":{"enter":[null]},"BinaryExpression":{"enter":[null]},"_exploded":true,"_verified":true},"options":{}},{"key":"base$0$0$23","visitor":{"_exploded":{},"_verified":{},"Program":{"enter":[null]}},"options":{}},{"key":"regenerator-transform","visitor":{"_exploded":true,"_verified":true,"FunctionDeclaration":{"exit":[null]},"FunctionExpression":{"exit":[null]},"ObjectMethod":{"exit":[null]},"ArrowFunctionExpression":{"exit":[null]},"ClassMethod":{"exit":[null]}},"options":{}}],"presets":[],"compact":false,"ast":true,"babelrc":false,"sourceFileName":"imports/plugins/core/discounts/client/components/list.js","filename":"imports/plugins/core/discounts/client/components/list.js","sourceMaps":true,"envName":"development","cwd":"/Users/estebandev/test-knowledge","passPerPreset":false,"parserOpts":{"sourceType":"module","sourceFileName":"imports/plugins/core/discounts/client/components/list.js","plugins":["dynamicImport","classProperties","jsx","jsx","flow","asyncGenerators","objectRestSpread","objectRestSpread","flow","asyncGenerators"]},"generatorOpts":{"filename":"imports/plugins/core/discounts/client/components/list.js","comments":true,"compact":false,"sourceMaps":true,"sourceFileName":"imports/plugins/core/discounts/client/components/list.js"}},"code":"var _inheritsLoose2 = _interopRequireDefault(require(\"@babel/runtime/helpers/inheritsLoose\"));\n\nvar _assertThisInitialized2 = _interopRequireDefault(require(\"@babel/runtime/helpers/assertThisInitialized\"));\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { \"default\": obj }; }\n\nvar React, Component;\nmodule.watch(require(\"react\"), {\n  \"default\": function (v) {\n    React = v;\n  },\n  Component: function (v) {\n    Component = v;\n  }\n}, 0);\nvar PropTypes;\nmodule.watch(require(\"prop-types\"), {\n  \"default\": function (v) {\n    PropTypes = v;\n  }\n}, 1);\nvar Meteor;\nmodule.watch(require(\"meteor/meteor\"), {\n  Meteor: function (v) {\n    Meteor = v;\n  }\n}, 2);\nvar registerComponent, composeWithTracker;\nmodule.watch(require(\"../../../components/lib\"), {\n  registerComponent: function (v) {\n    registerComponent = v;\n  },\n  composeWithTracker: function (v) {\n    composeWithTracker = v;\n  }\n}, 3);\nvar Translation, IconButton;\nmodule.watch(require(\"../../../ui/client/components\"), {\n  Translation: function (v) {\n    Translation = v;\n  },\n  IconButton: function (v) {\n    IconButton = v;\n  }\n}, 4);\nvar Reaction;\nmodule.watch(require(\"../../../../../../client/api\"), {\n  Reaction: function (v) {\n    Reaction = v;\n  }\n}, 5);\nvar DiscountForm;\nmodule.watch(require(\"./form\"), {\n  \"default\": function (v) {\n    DiscountForm = v;\n  }\n}, 6);\n\nvar DiscountList =\n/*#__PURE__*/\nfunction (_Component) {\n  (0, _inheritsLoose2.default)(DiscountList, _Component);\n\n  function DiscountList(props) {\n    var _this;\n\n    _this = _Component.call(this, props) || this;\n    _this.handleClick = _this.handleClick.bind((0, _assertThisInitialized2.default)(_this));\n    return _this;\n  } // handle remove click\n\n\n  var _proto = DiscountList.prototype;\n\n  _proto.handleClick = function () {\n    function handleClick(event, codeId) {\n      return Meteor.call(\"discounts/codes/remove\", this.props.id, codeId, this.props.collection);\n    }\n\n    return handleClick;\n  }(); // list items\n\n\n  _proto.renderList = function () {\n    function renderList() {\n      var _this2 = this;\n\n      var listItems = this.props.listItems.map(function (listItem) {\n        return _this2.renderItem(listItem.id, listItem.code);\n      });\n      return React.createElement(\"div\", {\n        className: \"rui list-group\"\n      }, listItems);\n    }\n\n    return renderList;\n  }(); // render item\n\n\n  _proto.renderItem = function () {\n    function renderItem(_id, code) {\n      var _this3 = this;\n\n      var TrashCan;\n\n      if (this.props.collection !== \"Orders\") {\n        TrashCan = React.createElement(\"div\", {\n          className: \"pull-right\"\n        }, React.createElement(IconButton, {\n          icon: \"fa fa-remove\",\n          onClick: function (e) {\n            return _this3.handleClick(e, _id);\n          }\n        }));\n      }\n\n      return React.createElement(\"div\", {\n        className: \"rui list-group-item\",\n        key: _id\n      }, React.createElement(\"span\", null, code, \"\\xA0\", React.createElement(Translation, {\n        defaultValue: \"code\",\n        i18nKey: \"discounts.code\"\n      }), \"\\xA0\", React.createElement(Translation, {\n        defaultValue: \"Discount applied\",\n        i18nKey: \"discounts.applied\"\n      })), TrashCan);\n    }\n\n    return renderItem;\n  }(); // load form input view\n\n\n  _proto.renderNoneFound = function () {\n    function renderNoneFound() {\n      return React.createElement(DiscountForm, {\n        id: this.props.id,\n        collection: this.props.collection,\n        validatedInput: this.props.validatedInput\n      });\n    }\n\n    return renderNoneFound;\n  }(); // render list view\n\n\n  _proto.render = function () {\n    function render() {\n      var listItems = this.props.listItems;\n      return listItems.length >= 1 ? this.renderList() : this.renderNoneFound();\n    }\n\n    return render;\n  }();\n\n  return DiscountList;\n}(Component);\n\nDiscountList.propTypes = {\n  collection: PropTypes.string,\n  id: PropTypes.string,\n  listItems: PropTypes.array,\n  validatedInput: PropTypes.bool\n};\n\nfunction composer(props, onData) {\n  var currentCart = Reaction.Collections[props.collection].findOne({\n    _id: props.id\n  });\n  var listItems = [];\n  var listItem = currentCart.billing.find(function (element) {\n    return element.paymentMethod && element.paymentMethod.processor === \"code\";\n  });\n\n  if (listItem) {\n    listItems.push({\n      id: listItem._id,\n      code: listItem.paymentMethod.code,\n      discount: listItem.paymentMethod.amount\n    });\n  }\n\n  onData(null, {\n    collection: props.collection,\n    validatedInput: props.validatedInput,\n    id: props.id,\n    listItems: listItems\n  });\n}\n\nvar options = {\n  propsToWatch: [\"billing\"]\n};\nvar discountListComponent = composeWithTracker(composer, options)(DiscountList);\nregisterComponent(\"DiscountList\", discountListComponent);\nmodule.exportDefault(discountListComponent);","map":{"version":3,"sources":["imports/plugins/core/discounts/client/components/list.js"],"names":["React","Component","module","watch","require","v","PropTypes","Meteor","registerComponent","composeWithTracker","Translation","IconButton","Reaction","DiscountForm","DiscountList","props","handleClick","bind","event","codeId","call","id","collection","renderList","listItems","map","listItem","renderItem","code","_id","TrashCan","e","renderNoneFound","validatedInput","render","length","propTypes","string","array","bool","composer","onData","currentCart","Collections","findOne","billing","find","element","paymentMethod","processor","push","discount","amount","options","propsToWatch","discountListComponent","exportDefault"],"mappings":"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","sourcesContent":["import React, { Component } from \"react\";\nimport PropTypes from \"prop-types\";\nimport { Meteor } from \"meteor/meteor\";\nimport { registerComponent, composeWithTracker } from \"@reactioncommerce/reaction-components\";\nimport { Translation, IconButton } from \"/imports/plugins/core/ui/client/components\";\nimport { Reaction } from \"/client/api\";\nimport DiscountForm from \"./form\";\n\nclass DiscountList extends Component {\n  constructor(props) {\n    super(props);\n    this.handleClick = this.handleClick.bind(this);\n  }\n\n  // handle remove click\n  handleClick(event, codeId) {\n    return Meteor.call(\"discounts/codes/remove\", this.props.id, codeId, this.props.collection);\n  }\n  // list items\n  renderList() {\n    const listItems = this.props.listItems.map((listItem) => this.renderItem(listItem.id, listItem.code));\n\n    return (\n      <div className=\"rui list-group\">{listItems}</div>\n    );\n  }\n  // render item\n  renderItem(_id, code) {\n    let TrashCan;\n\n    if (this.props.collection !== \"Orders\") {\n      TrashCan = (\n        <div className=\"pull-right\">\n          <IconButton icon=\"fa fa-remove\" onClick={(e) => this.handleClick(e, _id)}/>\n        </div>\n      );\n    }\n    return (\n      <div className=\"rui list-group-item\" key={_id}>\n        <span>\n          {code}&nbsp;\n          <Translation defaultValue=\"code\" i18nKey={\"discounts.code\"} />&nbsp;\n          <Translation defaultValue=\"Discount applied\" i18nKey={\"discounts.applied\"} />\n        </span>\n        {TrashCan}\n      </div>\n    );\n  }\n\n  // load form input view\n  renderNoneFound() {\n    return (\n      <DiscountForm id={this.props.id} collection={this.props.collection} validatedInput={this.props.validatedInput} />\n    );\n  }\n\n  // render list view\n  render() {\n    const { listItems } = this.props;\n    return (listItems.length >= 1) ? this.renderList() : this.renderNoneFound();\n  }\n}\n\nDiscountList.propTypes = {\n  collection: PropTypes.string,\n  id: PropTypes.string,\n  listItems: PropTypes.array,\n  validatedInput: PropTypes.bool\n};\n\nfunction composer(props, onData) {\n  const currentCart = Reaction.Collections[props.collection].findOne({\n    _id: props.id\n  });\n\n  const listItems = [];\n  const listItem = currentCart.billing.find((element) => element.paymentMethod && element.paymentMethod.processor === \"code\");\n  if (listItem) {\n    listItems.push({\n      id: listItem._id,\n      code: listItem.paymentMethod.code,\n      discount: listItem.paymentMethod.amount\n    });\n  }\n\n  onData(null, {\n    collection: props.collection,\n    validatedInput: props.validatedInput,\n    id: props.id,\n    listItems\n  });\n}\n\nconst options = {\n  propsToWatch: [\"billing\"]\n};\n\nconst discountListComponent = composeWithTracker(composer, options)(DiscountList);\nregisterComponent(\"DiscountList\", discountListComponent);\n\nexport default discountListComponent;\n"]},"sourceType":"script","hash":"117b2eb821aff0f7f7db06c39e59e5bd514d65f3"}
