{"metadata":{},"options":{"plugins":[{"key":"base$0$0","visitor":{"Program":{"enter":[null]},"_exploded":true,"_verified":true},"options":{"generateLetDeclarations":true,"enforceStrictMode":false}},{"key":"transform-meteor-dynamic-import","visitor":{"_exploded":{},"_verified":{},"CallExpression":{"enter":[null]}},"options":{}},{"key":"base$0$2","visitor":{"CallExpression":{"enter":[null]},"BinaryExpression":{"enter":[null]},"MemberExpression":{"enter":[null],"exit":[null]},"_exploded":true,"_verified":true,"Identifier":{"enter":[null]},"JSXIdentifier":{"enter":[null]}},"options":{"polyfill":false,"useBuiltIns":false}},{"key":"base$0$3","visitor":{"_exploded":{},"_verified":{},"ClassDeclaration":{"enter":[null]},"ClassExpression":{"enter":[null]}},"options":{"loose":true}},{"key":"base$0$4","visitor":{"FunctionExpression":{"exit":[null]},"_exploded":true,"_verified":true},"options":{}},{"key":"base$0$5","visitor":{"ForInStatement":{"enter":[null]},"_exploded":true,"_verified":true},"options":{}},{"key":"base$0$6","visitor":{"Program":{"exit":[null]},"_exploded":true,"_verified":true},"options":{"allowTopLevelThis":true,"strictMode":false,"loose":true}},{"key":"base$0$1$0","visitor":{"_exploded":{},"_verified":{},"JSXNamespacedName":{"enter":[null]},"JSXElement":{"exit":[null]},"JSXFragment":{"exit":[null]},"Program":{"enter":[null],"exit":[null]},"JSXAttribute":{"enter":[null]}},"options":{"pragma":"React.createElement","pragmaFrag":"React.Fragment","throwIfNamespace":true,"useBuiltIns":false}},{"key":"base$0$1$1","visitor":{"_exploded":true,"_verified":true},"options":{}},{"key":"base$0$1$2","visitor":{"ExportDefaultDeclaration":{"enter":[null]},"CallExpression":{"enter":[null]},"_exploded":true,"_verified":true},"options":{}},{"key":"base$0$0$0","visitor":{"_exploded":true,"_verified":true},"options":{}},{"key":"base$0$0$1","visitor":{"_exploded":true,"_verified":true},"options":{}},{"key":"base$0$0$2","visitor":{"ArrowFunctionExpression":{"enter":[null]},"_exploded":true,"_verified":true},"options":{}},{"key":"base$0$0$3","visitor":{"BlockStatement":{"enter":[null]},"SwitchCase":{"enter":[null]},"_exploded":true,"_verified":true},"options":{}},{"key":"base$0$0$4","visitor":{"VariableDeclaration":{"enter":[null]},"CatchClause":{"enter":[null]},"_exploded":true,"BlockStatement":{"enter":[null]},"SwitchStatement":{"enter":[null]},"Program":{"enter":[null]},"_verified":true,"DoWhileStatement":{"enter":[null]},"ForInStatement":{"enter":[null]},"ForStatement":{"enter":[null]},"WhileStatement":{"enter":[null]},"ForOfStatement":{"enter":[null]}},"options":{}},{"key":"base$0$0$5","visitor":{"ExportDefaultDeclaration":{"enter":[null]},"ClassDeclaration":{"enter":[null]},"ClassExpression":{"enter":[null]},"_exploded":true,"_verified":true},"options":{"loose":true}},{"key":"base$0$0$6","visitor":{"ObjectExpression":{"exit":[null]},"_exploded":true,"_verified":true},"options":{"loose":true}},{"key":"base$0$0$7","visitor":{"ExportNamedDeclaration":{"enter":[null]},"CatchClause":{"enter":[null]},"AssignmentExpression":{"enter":[null]},"VariableDeclaration":{"enter":[null]},"_exploded":true,"_verified":true,"ForInStatement":{"enter":[null]},"ForOfStatement":{"enter":[null]}},"options":{}},{"key":"base$0$0$8","visitor":{"ForOfStatement":{"enter":[null]},"_exploded":true,"_verified":true},"options":{"loose":true}},{"key":"base$0$0$9","visitor":{"NumericLiteral":{"enter":[null]},"StringLiteral":{"enter":[null]},"_exploded":true,"_verified":true},"options":{}},{"key":"base$0$0$10","visitor":{"ObjectExpression":{"enter":[null]},"_exploded":true,"_verified":true},"options":{}},{"key":"base$0$0$11","visitor":{"_exploded":true,"_verified":true,"FunctionDeclaration":{"enter":[null]},"FunctionExpression":{"enter":[null]},"ObjectMethod":{"enter":[null]},"ArrowFunctionExpression":{"enter":[null]},"ClassMethod":{"enter":[null]}},"options":{}},{"key":"base$0$0$12","visitor":{"ObjectMethod":{"enter":[null]},"ObjectProperty":{"enter":[null]},"_exploded":true,"_verified":true},"options":{}},{"key":"base$0$0$13","visitor":{"ArrayExpression":{"enter":[null]},"CallExpression":{"enter":[null]},"NewExpression":{"enter":[null]},"_exploded":true,"_verified":true},"options":{}},{"key":"base$0$0$14","visitor":{"RegExpLiteral":{"enter":[null]},"_exploded":true,"_verified":true},"options":{}},{"key":"base$0$0$15","visitor":{"TaggedTemplateExpression":{"enter":[null]},"TemplateLiteral":{"enter":[null]},"_exploded":true,"_verified":true},"options":{"loose":true}},{"key":"base$0$0$16","visitor":{"UnaryExpression":{"enter":[null]},"_exploded":true,"_verified":true,"BlockStatement":{"enter":[null]},"CatchClause":{"enter":[null]},"DoWhileStatement":{"enter":[null]},"ForInStatement":{"enter":[null]},"ForStatement":{"enter":[null]},"FunctionDeclaration":{"enter":[null]},"FunctionExpression":{"enter":[null]},"Program":{"enter":[null]},"ObjectMethod":{"enter":[null]},"SwitchStatement":{"enter":[null]},"WhileStatement":{"enter":[null]},"ArrowFunctionExpression":{"enter":[null]},"ClassDeclaration":{"enter":[null]},"ClassExpression":{"enter":[null]},"ForOfStatement":{"enter":[null]},"ClassMethod":{"enter":[null]}},"options":{}},{"key":"base$0$0$17","visitor":{"RegExpLiteral":{"enter":[null]},"_exploded":true,"_verified":true},"options":{}},{"key":"base$0$0$18","visitor":{"_exploded":true,"_verified":true},"options":{}},{"key":"base$0$0$19","visitor":{"_exploded":{},"_verified":{},"VariableDeclarator":{"enter":[null]},"ExportNamedDeclaration":{"enter":[null]},"CatchClause":{"enter":[null]},"AssignmentExpression":{"enter":[null]},"ObjectExpression":{"enter":[null]},"FunctionDeclaration":{"enter":[null]},"FunctionExpression":{"enter":[null]},"ObjectMethod":{"enter":[null]},"ArrowFunctionExpression":{"enter":[null]},"ClassMethod":{"enter":[null]},"ForInStatement":{"enter":[null]},"ForOfStatement":{"enter":[null]}},"options":{}},{"key":"base$0$0$20","visitor":{"ObjectProperty":{"exit":[null]},"_exploded":true,"_verified":true},"options":{}},{"key":"base$0$0$21","visitor":{"_exploded":{},"_verified":{},"Program":{"enter":[null]},"ImportDeclaration":{"enter":[null,null]},"ClassProperty":{"enter":[null]},"AssignmentPattern":{"enter":[null]},"TypeCastExpression":{"enter":[null,null]},"ImportSpecifier":{"enter":[null]},"ClassDeclaration":{"enter":[null]},"ClassExpression":{"enter":[null]},"FunctionDeclaration":{"enter":[null]},"FunctionExpression":{"enter":[null]},"ObjectMethod":{"enter":[null]},"ArrowFunctionExpression":{"enter":[null]},"ClassMethod":{"enter":[null]},"AnyTypeAnnotation":{"enter":[null]},"ArrayTypeAnnotation":{"enter":[null]},"BooleanTypeAnnotation":{"enter":[null]},"BooleanLiteralTypeAnnotation":{"enter":[null]},"NullLiteralTypeAnnotation":{"enter":[null]},"ClassImplements":{"enter":[null]},"DeclareClass":{"enter":[null]},"DeclareFunction":{"enter":[null]},"DeclareInterface":{"enter":[null]},"DeclareModule":{"enter":[null]},"DeclareModuleExports":{"enter":[null]},"DeclareTypeAlias":{"enter":[null]},"DeclareOpaqueType":{"enter":[null]},"DeclareVariable":{"enter":[null]},"DeclareExportDeclaration":{"enter":[null]},"DeclareExportAllDeclaration":{"enter":[null]},"DeclaredPredicate":{"enter":[null]},"ExistsTypeAnnotation":{"enter":[null]},"FunctionTypeAnnotation":{"enter":[null]},"FunctionTypeParam":{"enter":[null]},"GenericTypeAnnotation":{"enter":[null]},"InferredPredicate":{"enter":[null]},"InterfaceExtends":{"enter":[null]},"InterfaceDeclaration":{"enter":[null]},"IntersectionTypeAnnotation":{"enter":[null]},"MixedTypeAnnotation":{"enter":[null]},"EmptyTypeAnnotation":{"enter":[null]},"NullableTypeAnnotation":{"enter":[null]},"NumberLiteralTypeAnnotation":{"enter":[null]},"NumberTypeAnnotation":{"enter":[null]},"ObjectTypeAnnotation":{"enter":[null]},"ObjectTypeCallProperty":{"enter":[null]},"ObjectTypeIndexer":{"enter":[null]},"ObjectTypeProperty":{"enter":[null]},"ObjectTypeSpreadProperty":{"enter":[null]},"OpaqueType":{"enter":[null]},"QualifiedTypeIdentifier":{"enter":[null]},"StringLiteralTypeAnnotation":{"enter":[null]},"StringTypeAnnotation":{"enter":[null]},"ThisTypeAnnotation":{"enter":[null]},"TupleTypeAnnotation":{"enter":[null]},"TypeofTypeAnnotation":{"enter":[null]},"TypeAlias":{"enter":[null]},"TypeAnnotation":{"enter":[null]},"TypeParameter":{"enter":[null]},"TypeParameterDeclaration":{"enter":[null]},"TypeParameterInstantiation":{"enter":[null]},"UnionTypeAnnotation":{"enter":[null]},"Variance":{"enter":[null]},"VoidTypeAnnotation":{"enter":[null]},"ExportAllDeclaration":{"enter":[null]},"ExportDefaultDeclaration":{"enter":[null]},"ExportNamedDeclaration":{"enter":[null]}},"options":{}},{"key":"base$0$0$22","visitor":{"AssignmentExpression":{"enter":[null]},"BinaryExpression":{"enter":[null]},"_exploded":true,"_verified":true},"options":{}},{"key":"base$0$0$23","visitor":{"_exploded":{},"_verified":{},"Program":{"enter":[null]}},"options":{}},{"key":"regenerator-transform","visitor":{"_exploded":true,"_verified":true,"FunctionDeclaration":{"exit":[null]},"FunctionExpression":{"exit":[null]},"ObjectMethod":{"exit":[null]},"ArrowFunctionExpression":{"exit":[null]},"ClassMethod":{"exit":[null]}},"options":{}}],"presets":[],"compact":false,"ast":true,"babelrc":false,"sourceFileName":"imports/plugins/included/product-variant/containers/gridItemControlsContainer.js","filename":"imports/plugins/included/product-variant/containers/gridItemControlsContainer.js","sourceMaps":true,"envName":"development","cwd":"/Users/estebandev/test-knowledge","passPerPreset":false,"parserOpts":{"sourceType":"module","sourceFileName":"imports/plugins/included/product-variant/containers/gridItemControlsContainer.js","plugins":["dynamicImport","classProperties","jsx","jsx","flow","asyncGenerators","objectRestSpread","objectRestSpread","flow","asyncGenerators"]},"generatorOpts":{"filename":"imports/plugins/included/product-variant/containers/gridItemControlsContainer.js","comments":true,"compact":false,"sourceMaps":true,"sourceFileName":"imports/plugins/included/product-variant/containers/gridItemControlsContainer.js"}},"code":"var _inheritsLoose2 = _interopRequireDefault(require(\"@babel/runtime/helpers/inheritsLoose\"));\n\nvar _assertThisInitialized2 = _interopRequireDefault(require(\"@babel/runtime/helpers/assertThisInitialized\"));\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { \"default\": obj }; }\n\nvar _compose;\n\nmodule.watch(require(\"recompose/compose\"), {\n  \"default\": function (v) {\n    _compose = v;\n  }\n}, 0);\nvar React, Component;\nmodule.watch(require(\"react\"), {\n  \"default\": function (v) {\n    React = v;\n  },\n  Component: function (v) {\n    Component = v;\n  }\n}, 1);\nvar PropTypes;\nmodule.watch(require(\"prop-types\"), {\n  \"default\": function (v) {\n    PropTypes = v;\n  }\n}, 2);\nvar registerComponent, composeWithTracker;\nmodule.watch(require(\"../../../core/components/lib\"), {\n  registerComponent: function (v) {\n    registerComponent = v;\n  },\n  composeWithTracker: function (v) {\n    composeWithTracker = v;\n  }\n}, 3);\nvar Session;\nmodule.watch(require(\"meteor/session\"), {\n  Session: function (v) {\n    Session = v;\n  }\n}, 4);\nvar Validation;\nmodule.watch(require(\"@reactioncommerce/schemas\"), {\n  Validation: function (v) {\n    Validation = v;\n  }\n}, 5);\nvar Reaction;\nmodule.watch(require(\"../../../../../client/api\"), {\n  Reaction: function (v) {\n    Reaction = v;\n  }\n}, 6);\nvar GridItemControls;\nmodule.watch(require(\"../components/gridItemControls\"), {\n  \"default\": function (v) {\n    GridItemControls = v;\n  }\n}, 7);\nvar ReactionProduct;\nmodule.watch(require(\"../../../../../lib/api\"), {\n  ReactionProduct: function (v) {\n    ReactionProduct = v;\n  }\n}, 8);\nvar ProductVariant;\nmodule.watch(require(\"../../../../../lib/collections/schemas/products\"), {\n  ProductVariant: function (v) {\n    ProductVariant = v;\n  }\n}, 9);\n\nvar wrapComponent = function (Comp) {\n  var _class, _temp;\n\n  return _temp = _class =\n  /*#__PURE__*/\n  function (_Component) {\n    (0, _inheritsLoose2.default)(GridItemControlsContainer, _Component);\n\n    function GridItemControlsContainer(props) {\n      var _this;\n\n      _this = _Component.call(this, props) || this;\n\n      _this.hasCreateProductPermission = function () {\n        return Reaction.hasPermission(\"createProduct\");\n      };\n\n      _this.hasChanges = function () {\n        return !!_this.props.product.__draft;\n      };\n\n      _this.checkValidation = function () {\n        // this returns an array with a single object\n        var variants = ReactionProduct.getVariants(_this.props.product._id); // should validate variants if they exist to determine if product is Valid\n\n        if (variants.length !== 0) {\n          var validatedVariants = variants.map(function (variant) {\n            return _this.validation.validate(variant);\n          });\n\n          _this.setState({\n            validProduct: Object.assign({}, _this.props.product, {\n              __isValid: validatedVariants[0].isValid\n            })\n          });\n        } else {\n          // if variants do not exist then validation should pass\n          _this.setState({\n            validProduct: Object.assign({}, _this.props.product, {\n              __isValid: true\n            })\n          });\n        }\n      };\n\n      _this.checked = function () {\n        return _this.props.isSelected === true;\n      };\n\n      _this.validation = new Validation(ProductVariant);\n      _this.validProduct = props.product;\n      _this.hasCreateProductPermission = _this.hasCreateProductPermission.bind((0, _assertThisInitialized2.default)(_this));\n      _this.hasChanges = _this.hasChanges.bind((0, _assertThisInitialized2.default)(_this));\n      _this.checked = _this.checked.bind((0, _assertThisInitialized2.default)(_this));\n      _this.checkValidation = _this.checkValidation.bind((0, _assertThisInitialized2.default)(_this));\n      return _this;\n    }\n\n    var _proto = GridItemControlsContainer.prototype;\n\n    _proto.componentWillMount = function () {\n      function componentWillMount() {\n        this.checkValidation();\n      }\n\n      return componentWillMount;\n    }();\n\n    _proto.render = function () {\n      function render() {\n        return React.createElement(Comp, {\n          product: this.state.validProduct,\n          hasCreateProductPermission: this.hasCreateProductPermission,\n          hasChanges: this.hasChanges,\n          checked: this.checked\n        });\n      }\n\n      return render;\n    }();\n\n    return GridItemControlsContainer;\n  }(Component), _class.propTypes = {\n    isSelected: PropTypes.bool,\n    product: PropTypes.object\n  }, _temp;\n};\n\nfunction composer(props, onData) {\n  var product = props.product;\n  var isSelected;\n\n  if (product) {\n    var selectedProducts = Session.get(\"productGrid/selectedProducts\");\n    isSelected = Array.isArray(selectedProducts) ? selectedProducts.indexOf(product._id) >= 0 : false;\n  }\n\n  onData(null, {\n    product: product,\n    isSelected: isSelected\n  });\n}\n\nregisterComponent(\"GridItemControls\", GridItemControls, [composeWithTracker(composer), wrapComponent]);\nmodule.exportDefault(_compose(composeWithTracker(composer), wrapComponent)(GridItemControls));","map":{"version":3,"sources":["imports/plugins/included/product-variant/containers/gridItemControlsContainer.js"],"names":["_compose","module","watch","require","v","React","Component","PropTypes","registerComponent","composeWithTracker","Session","Validation","Reaction","GridItemControls","ReactionProduct","ProductVariant","wrapComponent","Comp","props","hasCreateProductPermission","hasPermission","hasChanges","product","__draft","checkValidation","variants","getVariants","_id","length","validatedVariants","map","variant","validation","validate","setState","validProduct","Object","assign","__isValid","isValid","checked","isSelected","bind","componentWillMount","render","state","propTypes","bool","object","composer","onData","selectedProducts","get","Array","isArray","indexOf","exportDefault"],"mappings":"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","sourcesContent":["import React, { Component } from \"react\";\nimport PropTypes from \"prop-types\";\nimport { compose } from \"recompose\";\nimport { registerComponent, composeWithTracker } from \"@reactioncommerce/reaction-components\";\nimport { Session } from \"meteor/session\";\nimport { Validation } from \"@reactioncommerce/schemas\";\nimport { Reaction } from \"/client/api\";\nimport GridItemControls from \"../components/gridItemControls\";\nimport { ReactionProduct } from \"/lib/api\";\nimport { ProductVariant } from \"/lib/collections/schemas/products\";\n\nconst wrapComponent = (Comp) => (\n  class GridItemControlsContainer extends Component {\n    static propTypes = {\n      isSelected: PropTypes.bool,\n      product: PropTypes.object\n    }\n\n    constructor(props) {\n      super(props);\n\n      this.validation = new Validation(ProductVariant);\n      this.validProduct = props.product;\n\n      this.hasCreateProductPermission = this.hasCreateProductPermission.bind(this);\n      this.hasChanges = this.hasChanges.bind(this);\n      this.checked = this.checked.bind(this);\n      this.checkValidation = this.checkValidation.bind(this);\n    }\n\n    componentWillMount() {\n      this.checkValidation();\n    }\n\n    hasCreateProductPermission = () => Reaction.hasPermission(\"createProduct\")\n\n    hasChanges = () => !!this.props.product.__draft\n\n    // This method checks validation of the variants of the all the products on the Products grid to\n    // check whether all required fields have been submitted before publishing\n    checkValidation = () => {\n      // this returns an array with a single object\n      const variants = ReactionProduct.getVariants(this.props.product._id);\n\n      // should validate variants if they exist to determine if product is Valid\n      if (variants.length !== 0) {\n        const validatedVariants = variants.map((variant) => this.validation.validate(variant));\n        this.setState({\n          validProduct: Object.assign({}, this.props.product, { __isValid: validatedVariants[0].isValid })\n        });\n      } else {\n        // if variants do not exist then validation should pass\n        this.setState({\n          validProduct: Object.assign({}, this.props.product, { __isValid: true })\n        });\n      }\n    }\n\n    checked = () => this.props.isSelected === true\n\n    render() {\n      return (\n        <Comp\n          product={this.state.validProduct}\n          hasCreateProductPermission={this.hasCreateProductPermission}\n          hasChanges={this.hasChanges}\n          checked={this.checked}\n        />\n      );\n    }\n  }\n);\n\nfunction composer(props, onData) {\n  const { product } = props;\n  let isSelected;\n\n  if (product) {\n    const selectedProducts = Session.get(\"productGrid/selectedProducts\");\n    isSelected = Array.isArray(selectedProducts) ? selectedProducts.indexOf(product._id) >= 0 : false;\n  }\n\n  onData(null, {\n    product,\n    isSelected\n  });\n}\n\nregisterComponent(\"GridItemControls\", GridItemControls, [\n  composeWithTracker(composer),\n  wrapComponent\n]);\n\nexport default compose(\n  composeWithTracker(composer),\n  wrapComponent\n)(GridItemControls);\n"]},"sourceType":"script","hash":"5f9f7e32a7792344ca1cd620270527b8733d7d73"}
