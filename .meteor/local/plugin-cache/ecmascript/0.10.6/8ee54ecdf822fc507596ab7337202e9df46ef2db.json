{"metadata":{},"options":{"plugins":[{"key":"base$0$0","visitor":{"Program":{"enter":[null]},"_exploded":true,"_verified":true},"options":{"generateLetDeclarations":true,"enforceStrictMode":false}},{"key":"transform-meteor-dynamic-import","visitor":{"_exploded":{},"_verified":{},"CallExpression":{"enter":[null]}},"options":{}},{"key":"base$0$2","visitor":{"CallExpression":{"enter":[null]},"BinaryExpression":{"enter":[null]},"MemberExpression":{"enter":[null],"exit":[null]},"_exploded":true,"_verified":true,"Identifier":{"enter":[null]},"JSXIdentifier":{"enter":[null]}},"options":{"polyfill":false,"useBuiltIns":false}},{"key":"base$0$3","visitor":{"_exploded":{},"_verified":{},"ClassDeclaration":{"enter":[null]},"ClassExpression":{"enter":[null]}},"options":{"loose":true}},{"key":"base$0$4","visitor":{"FunctionExpression":{"exit":[null]},"_exploded":true,"_verified":true},"options":{}},{"key":"base$0$5","visitor":{"ForInStatement":{"enter":[null]},"_exploded":true,"_verified":true},"options":{}},{"key":"base$0$6","visitor":{"Program":{"exit":[null]},"_exploded":true,"_verified":true},"options":{"allowTopLevelThis":true,"strictMode":false,"loose":true}},{"key":"base$0$1$0","visitor":{"_exploded":{},"_verified":{},"JSXNamespacedName":{"enter":[null]},"JSXElement":{"exit":[null]},"JSXFragment":{"exit":[null]},"Program":{"enter":[null],"exit":[null]},"JSXAttribute":{"enter":[null]}},"options":{"pragma":"React.createElement","pragmaFrag":"React.Fragment","throwIfNamespace":true,"useBuiltIns":false}},{"key":"base$0$1$1","visitor":{"_exploded":true,"_verified":true},"options":{}},{"key":"base$0$1$2","visitor":{"ExportDefaultDeclaration":{"enter":[null]},"CallExpression":{"enter":[null]},"_exploded":true,"_verified":true},"options":{}},{"key":"base$0$0$0","visitor":{"_exploded":true,"_verified":true},"options":{}},{"key":"base$0$0$1","visitor":{"_exploded":true,"_verified":true},"options":{}},{"key":"base$0$0$2","visitor":{"ArrowFunctionExpression":{"enter":[null]},"_exploded":true,"_verified":true},"options":{}},{"key":"base$0$0$3","visitor":{"BlockStatement":{"enter":[null]},"SwitchCase":{"enter":[null]},"_exploded":true,"_verified":true},"options":{}},{"key":"base$0$0$4","visitor":{"VariableDeclaration":{"enter":[null]},"CatchClause":{"enter":[null]},"_exploded":true,"BlockStatement":{"enter":[null]},"SwitchStatement":{"enter":[null]},"Program":{"enter":[null]},"_verified":true,"DoWhileStatement":{"enter":[null]},"ForInStatement":{"enter":[null]},"ForStatement":{"enter":[null]},"WhileStatement":{"enter":[null]},"ForOfStatement":{"enter":[null]}},"options":{}},{"key":"base$0$0$5","visitor":{"ExportDefaultDeclaration":{"enter":[null]},"ClassDeclaration":{"enter":[null]},"ClassExpression":{"enter":[null]},"_exploded":true,"_verified":true},"options":{"loose":true}},{"key":"base$0$0$6","visitor":{"ObjectExpression":{"exit":[null]},"_exploded":true,"_verified":true},"options":{"loose":true}},{"key":"base$0$0$7","visitor":{"ExportNamedDeclaration":{"enter":[null]},"CatchClause":{"enter":[null]},"AssignmentExpression":{"enter":[null]},"VariableDeclaration":{"enter":[null]},"_exploded":true,"_verified":true,"ForInStatement":{"enter":[null]},"ForOfStatement":{"enter":[null]}},"options":{}},{"key":"base$0$0$8","visitor":{"ForOfStatement":{"enter":[null]},"_exploded":true,"_verified":true},"options":{"loose":true}},{"key":"base$0$0$9","visitor":{"NumericLiteral":{"enter":[null]},"StringLiteral":{"enter":[null]},"_exploded":true,"_verified":true},"options":{}},{"key":"base$0$0$10","visitor":{"ObjectExpression":{"enter":[null]},"_exploded":true,"_verified":true},"options":{}},{"key":"base$0$0$11","visitor":{"_exploded":true,"_verified":true,"FunctionDeclaration":{"enter":[null]},"FunctionExpression":{"enter":[null]},"ObjectMethod":{"enter":[null]},"ArrowFunctionExpression":{"enter":[null]},"ClassMethod":{"enter":[null]}},"options":{}},{"key":"base$0$0$12","visitor":{"ObjectMethod":{"enter":[null]},"ObjectProperty":{"enter":[null]},"_exploded":true,"_verified":true},"options":{}},{"key":"base$0$0$13","visitor":{"ArrayExpression":{"enter":[null]},"CallExpression":{"enter":[null]},"NewExpression":{"enter":[null]},"_exploded":true,"_verified":true},"options":{}},{"key":"base$0$0$14","visitor":{"RegExpLiteral":{"enter":[null]},"_exploded":true,"_verified":true},"options":{}},{"key":"base$0$0$15","visitor":{"TaggedTemplateExpression":{"enter":[null]},"TemplateLiteral":{"enter":[null]},"_exploded":true,"_verified":true},"options":{"loose":true}},{"key":"base$0$0$16","visitor":{"UnaryExpression":{"enter":[null]},"_exploded":true,"_verified":true,"BlockStatement":{"enter":[null]},"CatchClause":{"enter":[null]},"DoWhileStatement":{"enter":[null]},"ForInStatement":{"enter":[null]},"ForStatement":{"enter":[null]},"FunctionDeclaration":{"enter":[null]},"FunctionExpression":{"enter":[null]},"Program":{"enter":[null]},"ObjectMethod":{"enter":[null]},"SwitchStatement":{"enter":[null]},"WhileStatement":{"enter":[null]},"ArrowFunctionExpression":{"enter":[null]},"ClassDeclaration":{"enter":[null]},"ClassExpression":{"enter":[null]},"ForOfStatement":{"enter":[null]},"ClassMethod":{"enter":[null]}},"options":{}},{"key":"base$0$0$17","visitor":{"RegExpLiteral":{"enter":[null]},"_exploded":true,"_verified":true},"options":{}},{"key":"base$0$0$18","visitor":{"_exploded":true,"_verified":true},"options":{}},{"key":"base$0$0$19","visitor":{"_exploded":{},"_verified":{},"VariableDeclarator":{"enter":[null]},"ExportNamedDeclaration":{"enter":[null]},"CatchClause":{"enter":[null]},"AssignmentExpression":{"enter":[null]},"ObjectExpression":{"enter":[null]},"FunctionDeclaration":{"enter":[null]},"FunctionExpression":{"enter":[null]},"ObjectMethod":{"enter":[null]},"ArrowFunctionExpression":{"enter":[null]},"ClassMethod":{"enter":[null]},"ForInStatement":{"enter":[null]},"ForOfStatement":{"enter":[null]}},"options":{}},{"key":"base$0$0$20","visitor":{"ObjectProperty":{"exit":[null]},"_exploded":true,"_verified":true},"options":{}},{"key":"base$0$0$21","visitor":{"_exploded":{},"_verified":{},"Program":{"enter":[null]},"ImportDeclaration":{"enter":[null,null]},"ClassProperty":{"enter":[null]},"AssignmentPattern":{"enter":[null]},"TypeCastExpression":{"enter":[null,null]},"ImportSpecifier":{"enter":[null]},"ClassDeclaration":{"enter":[null]},"ClassExpression":{"enter":[null]},"FunctionDeclaration":{"enter":[null]},"FunctionExpression":{"enter":[null]},"ObjectMethod":{"enter":[null]},"ArrowFunctionExpression":{"enter":[null]},"ClassMethod":{"enter":[null]},"AnyTypeAnnotation":{"enter":[null]},"ArrayTypeAnnotation":{"enter":[null]},"BooleanTypeAnnotation":{"enter":[null]},"BooleanLiteralTypeAnnotation":{"enter":[null]},"NullLiteralTypeAnnotation":{"enter":[null]},"ClassImplements":{"enter":[null]},"DeclareClass":{"enter":[null]},"DeclareFunction":{"enter":[null]},"DeclareInterface":{"enter":[null]},"DeclareModule":{"enter":[null]},"DeclareModuleExports":{"enter":[null]},"DeclareTypeAlias":{"enter":[null]},"DeclareOpaqueType":{"enter":[null]},"DeclareVariable":{"enter":[null]},"DeclareExportDeclaration":{"enter":[null]},"DeclareExportAllDeclaration":{"enter":[null]},"DeclaredPredicate":{"enter":[null]},"ExistsTypeAnnotation":{"enter":[null]},"FunctionTypeAnnotation":{"enter":[null]},"FunctionTypeParam":{"enter":[null]},"GenericTypeAnnotation":{"enter":[null]},"InferredPredicate":{"enter":[null]},"InterfaceExtends":{"enter":[null]},"InterfaceDeclaration":{"enter":[null]},"IntersectionTypeAnnotation":{"enter":[null]},"MixedTypeAnnotation":{"enter":[null]},"EmptyTypeAnnotation":{"enter":[null]},"NullableTypeAnnotation":{"enter":[null]},"NumberLiteralTypeAnnotation":{"enter":[null]},"NumberTypeAnnotation":{"enter":[null]},"ObjectTypeAnnotation":{"enter":[null]},"ObjectTypeCallProperty":{"enter":[null]},"ObjectTypeIndexer":{"enter":[null]},"ObjectTypeProperty":{"enter":[null]},"ObjectTypeSpreadProperty":{"enter":[null]},"OpaqueType":{"enter":[null]},"QualifiedTypeIdentifier":{"enter":[null]},"StringLiteralTypeAnnotation":{"enter":[null]},"StringTypeAnnotation":{"enter":[null]},"ThisTypeAnnotation":{"enter":[null]},"TupleTypeAnnotation":{"enter":[null]},"TypeofTypeAnnotation":{"enter":[null]},"TypeAlias":{"enter":[null]},"TypeAnnotation":{"enter":[null]},"TypeParameter":{"enter":[null]},"TypeParameterDeclaration":{"enter":[null]},"TypeParameterInstantiation":{"enter":[null]},"UnionTypeAnnotation":{"enter":[null]},"Variance":{"enter":[null]},"VoidTypeAnnotation":{"enter":[null]},"ExportAllDeclaration":{"enter":[null]},"ExportDefaultDeclaration":{"enter":[null]},"ExportNamedDeclaration":{"enter":[null]}},"options":{}},{"key":"base$0$0$22","visitor":{"AssignmentExpression":{"enter":[null]},"BinaryExpression":{"enter":[null]},"_exploded":true,"_verified":true},"options":{}},{"key":"base$0$0$23","visitor":{"_exploded":{},"_verified":{},"Program":{"enter":[null]}},"options":{}},{"key":"regenerator-transform","visitor":{"_exploded":true,"_verified":true,"FunctionDeclaration":{"exit":[null]},"FunctionExpression":{"exit":[null]},"ObjectMethod":{"exit":[null]},"ArrowFunctionExpression":{"exit":[null]},"ClassMethod":{"exit":[null]}},"options":{}}],"presets":[],"compact":false,"ast":true,"babelrc":false,"sourceFileName":"imports/plugins/core/accounts/client/helpers/util.js","filename":"imports/plugins/core/accounts/client/helpers/util.js","sourceMaps":true,"envName":"development","cwd":"/Users/estebandev/test-knowledge","passPerPreset":false,"parserOpts":{"sourceType":"module","sourceFileName":"imports/plugins/core/accounts/client/helpers/util.js","plugins":["dynamicImport","classProperties","jsx","jsx","flow","asyncGenerators","objectRestSpread","objectRestSpread","flow","asyncGenerators"]},"generatorOpts":{"filename":"imports/plugins/core/accounts/client/helpers/util.js","comments":true,"compact":false,"sourceMaps":true,"sourceFileName":"imports/plugins/core/accounts/client/helpers/util.js"}},"code":"module.export({\n  ServiceConfigHelper: function () {\n    return ServiceConfigHelper;\n  }\n});\n\nvar _isFunction;\n\nmodule.watch(require(\"lodash/isFunction\"), {\n  \"default\": function (v) {\n    _isFunction = v;\n  }\n}, 0);\n\nvar _filter;\n\nmodule.watch(require(\"lodash/filter\"), {\n  \"default\": function (v) {\n    _filter = v;\n  }\n}, 1);\n\nvar _extend;\n\nmodule.watch(require(\"lodash/extend\"), {\n  \"default\": function (v) {\n    _extend = v;\n  }\n}, 2);\n\nvar _map;\n\nmodule.watch(require(\"lodash/map\"), {\n  \"default\": function (v) {\n    _map = v;\n  }\n}, 3);\nvar Accounts;\nmodule.watch(require(\"meteor/accounts-base\"), {\n  Accounts: function (v) {\n    Accounts = v;\n  }\n}, 4);\nvar ServiceConfiguration;\nmodule.watch(require(\"meteor/service-configuration\"), {\n  ServiceConfiguration: function (v) {\n    ServiceConfiguration = v;\n  }\n}, 5);\n\nfunction capitalize(str) {\n  var finalString = str === null ? \"\" : String(str);\n  return finalString.charAt(0).toUpperCase() + str.slice(1);\n}\n\nvar providers = {\n  Facebook: {},\n  Google: {},\n  Twitter: {},\n  Instagram: {}\n};\n\nproviders.Facebook.fields = function () {\n  return [{\n    property: \"appId\",\n    label: \"App ID\"\n  }, {\n    property: \"secret\",\n    label: \"App Secret\"\n  }];\n};\n\nproviders.Google.fields = function () {\n  return [{\n    property: \"clientId\",\n    label: \"Client ID\"\n  }, {\n    property: \"secret\",\n    label: \"Client secret\"\n  }];\n};\n\nproviders.Twitter.fields = function () {\n  return [{\n    property: \"consumerKey\",\n    label: \"API key\"\n  }, {\n    property: \"secret\",\n    label: \"API secret\"\n  }];\n};\n\nproviders.Instagram.fields = function () {\n  return [{\n    property: \"clientId\",\n    label: \"Client ID\"\n  }, {\n    property: \"secret\",\n    label: \"Client secret\"\n  }];\n};\n\nvar ServiceConfigHelper =\n/*#__PURE__*/\nfunction () {\n  function ServiceConfigHelper() {}\n\n  var _proto = ServiceConfigHelper.prototype;\n\n  _proto.availableServices = function () {\n    function availableServices() {\n      var services = Package[\"accounts-oauth\"] ? Accounts.oauth.serviceNames() : [];\n      services.sort();\n      return services;\n    }\n\n    return availableServices;\n  }();\n\n  _proto.capitalizedServiceName = function () {\n    function capitalizedServiceName(name) {\n      if (name === \"meteor-developer\") {\n        return \"MeteorDeveloperAccount\";\n      }\n\n      return capitalize(name);\n    }\n\n    return capitalizedServiceName;\n  }();\n\n  _proto.configFieldsForService = function () {\n    function configFieldsForService(name) {\n      var capitalizedName = this.capitalizedServiceName(name);\n      var template = providers[capitalizedName];\n\n      if (template) {\n        var fields = template.fields();\n        return _map(fields, function (field) {\n          if (!field.type) {\n            field.type = field.property === \"secret\" ? \"password\" : \"text\";\n          }\n\n          return _extend(field, {\n            type: field.type\n          });\n        });\n      }\n\n      return [];\n    }\n\n    return configFieldsForService;\n  }();\n\n  _proto.services = function () {\n    function services(extendEach) {\n      var _this = this;\n\n      var availableServices = this.availableServices();\n      var configurations = ServiceConfiguration.configurations.find().fetch();\n      return _map(availableServices, function (name) {\n        var matchingConfigurations = _filter(configurations, {\n          service: name\n        });\n\n        var service = {\n          name: name,\n          label: _this.capitalizedServiceName(name),\n          fields: _this.configFieldsForService(name)\n        };\n\n        if (matchingConfigurations.length) {\n          service = _extend(service, matchingConfigurations[0]);\n        }\n\n        if (_isFunction(extendEach)) {\n          service = _extend(service, extendEach(service) || {});\n        }\n\n        return service;\n      });\n    }\n\n    return services;\n  }();\n  /**\n   * @method addProvider\n   * @memberof Accounts\n   * @summary Add an OAuth provider, with field definitions required to render the form\n   * which collects and stores configuation settings for the provider.\n   * @example ServiceConfigHelper.addProvider(\"Untappd\", [{ property: \"clientId\", label: \"Client ID\" }]), { property:\n   *  \"secret\", label: \"Client Secret\" }]);\n   * @see https://github.com/reactioncommerce/reaction/pull/3231\n   * @param {string} provider Display Name of the provider\n   * @param {object[]} fields Array of plain old JavaScript objects with the keys `property`\n   * (\"apiKey\", for example. `apiKey` should correspond to your OAuth provider's\n   * implementation) and `label` (\"API Key\", for example)\n   */\n\n\n  ServiceConfigHelper.addProvider = function () {\n    function addProvider(provider, fields) {\n      providers[provider] = {\n        fields: function () {\n          return fields;\n        }\n      };\n    }\n\n    return addProvider;\n  }();\n\n  return ServiceConfigHelper;\n}();","map":{"version":3,"sources":["imports/plugins/core/accounts/client/helpers/util.js"],"names":["module","export","ServiceConfigHelper","_isFunction","watch","require","v","_filter","_extend","_map","Accounts","ServiceConfiguration","capitalize","str","finalString","String","charAt","toUpperCase","slice","providers","Facebook","Google","Twitter","Instagram","fields","property","label","availableServices","services","Package","oauth","serviceNames","sort","capitalizedServiceName","name","configFieldsForService","capitalizedName","template","field","type","extendEach","configurations","find","fetch","matchingConfigurations","service","length","addProvider","provider"],"mappings":"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","sourcesContent":["import _ from \"lodash\";\nimport { Accounts } from \"meteor/accounts-base\";\nimport { ServiceConfiguration } from \"meteor/service-configuration\";\n\nfunction capitalize(str) {\n  const finalString = str === null ? \"\" : String(str);\n  return finalString.charAt(0).toUpperCase() + str.slice(1);\n}\n\nconst providers = {\n  Facebook: {},\n  Google: {},\n  Twitter: {},\n  Instagram: {}\n};\n\nproviders.Facebook.fields = function () {\n  return [\n    { property: \"appId\", label: \"App ID\" },\n    { property: \"secret\", label: \"App Secret\" }\n  ];\n};\n\nproviders.Google.fields = function () {\n  return [\n    { property: \"clientId\", label: \"Client ID\" },\n    { property: \"secret\", label: \"Client secret\" }\n  ];\n};\n\nproviders.Twitter.fields = function () {\n  return [\n    { property: \"consumerKey\", label: \"API key\" },\n    { property: \"secret\", label: \"API secret\" }\n  ];\n};\n\nproviders.Instagram.fields = function () {\n  return [\n    { property: \"clientId\", label: \"Client ID\" },\n    { property: \"secret\", label: \"Client secret\" }\n  ];\n};\n\n\nexport class ServiceConfigHelper {\n  availableServices() {\n    const services = Package[\"accounts-oauth\"] ? Accounts.oauth.serviceNames() : [];\n    services.sort();\n\n    return services;\n  }\n\n  capitalizedServiceName(name) {\n    if (name === \"meteor-developer\") {\n      return \"MeteorDeveloperAccount\";\n    }\n\n    return capitalize(name);\n  }\n\n  configFieldsForService(name) {\n    const capitalizedName = this.capitalizedServiceName(name);\n    const template = providers[capitalizedName];\n\n    if (template) {\n      const fields = template.fields();\n\n      return _.map(fields, (field) => {\n        if (!field.type) {\n          field.type = field.property === \"secret\" ? \"password\" : \"text\";\n        }\n\n        return _.extend(field, {\n          type: field.type\n        });\n      });\n    }\n\n    return [];\n  }\n\n  services(extendEach) {\n    const availableServices = this.availableServices();\n    const configurations = ServiceConfiguration.configurations.find().fetch();\n\n    return _.map(availableServices, (name) => {\n      const matchingConfigurations = _.filter(configurations, { service: name });\n      let service = {\n        name,\n        label: this.capitalizedServiceName(name),\n        fields: this.configFieldsForService(name)\n      };\n\n      if (matchingConfigurations.length) {\n        service = _.extend(service, matchingConfigurations[0]);\n      }\n\n      if (_.isFunction(extendEach)) {\n        service = _.extend(service, extendEach(service) || {});\n      }\n\n      return service;\n    });\n  }\n\n  /**\n   * @method addProvider\n   * @memberof Accounts\n   * @summary Add an OAuth provider, with field definitions required to render the form\n   * which collects and stores configuation settings for the provider.\n   * @example ServiceConfigHelper.addProvider(\"Untappd\", [{ property: \"clientId\", label: \"Client ID\" }]), { property:\n   *  \"secret\", label: \"Client Secret\" }]);\n   * @see https://github.com/reactioncommerce/reaction/pull/3231\n   * @param {string} provider Display Name of the provider\n   * @param {object[]} fields Array of plain old JavaScript objects with the keys `property`\n   * (\"apiKey\", for example. `apiKey` should correspond to your OAuth provider's\n   * implementation) and `label` (\"API Key\", for example)\n   */\n  static addProvider(provider, fields) {\n    providers[provider] = {\n      fields: () => fields\n    };\n  }\n}\n"]},"sourceType":"script","hash":"8ee54ecdf822fc507596ab7337202e9df46ef2db"}
