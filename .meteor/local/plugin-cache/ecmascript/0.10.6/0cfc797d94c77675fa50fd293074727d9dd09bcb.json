{"metadata":{},"options":{"plugins":[{"key":"base$0$0","visitor":{"Program":{"enter":[null]},"_exploded":true,"_verified":true},"options":{"generateLetDeclarations":true,"enforceStrictMode":false}},{"key":"transform-meteor-dynamic-import","visitor":{"_exploded":{},"_verified":{},"CallExpression":{"enter":[null]}},"options":{}},{"key":"base$0$2","visitor":{"CallExpression":{"enter":[null]},"BinaryExpression":{"enter":[null]},"MemberExpression":{"enter":[null],"exit":[null]},"_exploded":true,"_verified":true,"Identifier":{"enter":[null]},"JSXIdentifier":{"enter":[null]}},"options":{"polyfill":false,"useBuiltIns":false}},{"key":"base$0$3","visitor":{"_exploded":{},"_verified":{},"ClassDeclaration":{"enter":[null]},"ClassExpression":{"enter":[null]}},"options":{"loose":true}},{"key":"base$0$4","visitor":{"FunctionExpression":{"exit":[null]},"_exploded":true,"_verified":true},"options":{}},{"key":"base$0$5","visitor":{"ForInStatement":{"enter":[null]},"_exploded":true,"_verified":true},"options":{}},{"key":"base$0$6","visitor":{"Program":{"exit":[null]},"_exploded":true,"_verified":true},"options":{"allowTopLevelThis":true,"strictMode":false,"loose":true}},{"key":"base$0$1$0","visitor":{"_exploded":{},"_verified":{},"JSXNamespacedName":{"enter":[null]},"JSXElement":{"exit":[null]},"JSXFragment":{"exit":[null]},"Program":{"enter":[null],"exit":[null]},"JSXAttribute":{"enter":[null]}},"options":{"pragma":"React.createElement","pragmaFrag":"React.Fragment","throwIfNamespace":true,"useBuiltIns":false}},{"key":"base$0$1$1","visitor":{"_exploded":true,"_verified":true},"options":{}},{"key":"base$0$1$2","visitor":{"ExportDefaultDeclaration":{"enter":[null]},"CallExpression":{"enter":[null]},"_exploded":true,"_verified":true},"options":{}},{"key":"base$0$0$0","visitor":{"_exploded":true,"_verified":true},"options":{}},{"key":"base$0$0$1","visitor":{"_exploded":true,"_verified":true},"options":{}},{"key":"base$0$0$2","visitor":{"ArrowFunctionExpression":{"enter":[null]},"_exploded":true,"_verified":true},"options":{}},{"key":"base$0$0$3","visitor":{"BlockStatement":{"enter":[null]},"SwitchCase":{"enter":[null]},"_exploded":true,"_verified":true},"options":{}},{"key":"base$0$0$4","visitor":{"VariableDeclaration":{"enter":[null]},"CatchClause":{"enter":[null]},"_exploded":true,"BlockStatement":{"enter":[null]},"SwitchStatement":{"enter":[null]},"Program":{"enter":[null]},"_verified":true,"DoWhileStatement":{"enter":[null]},"ForInStatement":{"enter":[null]},"ForStatement":{"enter":[null]},"WhileStatement":{"enter":[null]},"ForOfStatement":{"enter":[null]}},"options":{}},{"key":"base$0$0$5","visitor":{"ExportDefaultDeclaration":{"enter":[null]},"ClassDeclaration":{"enter":[null]},"ClassExpression":{"enter":[null]},"_exploded":true,"_verified":true},"options":{"loose":true}},{"key":"base$0$0$6","visitor":{"ObjectExpression":{"exit":[null]},"_exploded":true,"_verified":true},"options":{"loose":true}},{"key":"base$0$0$7","visitor":{"ExportNamedDeclaration":{"enter":[null]},"CatchClause":{"enter":[null]},"AssignmentExpression":{"enter":[null]},"VariableDeclaration":{"enter":[null]},"_exploded":true,"_verified":true,"ForInStatement":{"enter":[null]},"ForOfStatement":{"enter":[null]}},"options":{}},{"key":"base$0$0$8","visitor":{"ForOfStatement":{"enter":[null]},"_exploded":true,"_verified":true},"options":{"loose":true}},{"key":"base$0$0$9","visitor":{"NumericLiteral":{"enter":[null]},"StringLiteral":{"enter":[null]},"_exploded":true,"_verified":true},"options":{}},{"key":"base$0$0$10","visitor":{"ObjectExpression":{"enter":[null]},"_exploded":true,"_verified":true},"options":{}},{"key":"base$0$0$11","visitor":{"_exploded":true,"_verified":true,"FunctionDeclaration":{"enter":[null]},"FunctionExpression":{"enter":[null]},"ObjectMethod":{"enter":[null]},"ArrowFunctionExpression":{"enter":[null]},"ClassMethod":{"enter":[null]}},"options":{}},{"key":"base$0$0$12","visitor":{"ObjectMethod":{"enter":[null]},"ObjectProperty":{"enter":[null]},"_exploded":true,"_verified":true},"options":{}},{"key":"base$0$0$13","visitor":{"ArrayExpression":{"enter":[null]},"CallExpression":{"enter":[null]},"NewExpression":{"enter":[null]},"_exploded":true,"_verified":true},"options":{}},{"key":"base$0$0$14","visitor":{"RegExpLiteral":{"enter":[null]},"_exploded":true,"_verified":true},"options":{}},{"key":"base$0$0$15","visitor":{"TaggedTemplateExpression":{"enter":[null]},"TemplateLiteral":{"enter":[null]},"_exploded":true,"_verified":true},"options":{"loose":true}},{"key":"base$0$0$16","visitor":{"UnaryExpression":{"enter":[null]},"_exploded":true,"_verified":true,"BlockStatement":{"enter":[null]},"CatchClause":{"enter":[null]},"DoWhileStatement":{"enter":[null]},"ForInStatement":{"enter":[null]},"ForStatement":{"enter":[null]},"FunctionDeclaration":{"enter":[null]},"FunctionExpression":{"enter":[null]},"Program":{"enter":[null]},"ObjectMethod":{"enter":[null]},"SwitchStatement":{"enter":[null]},"WhileStatement":{"enter":[null]},"ArrowFunctionExpression":{"enter":[null]},"ClassDeclaration":{"enter":[null]},"ClassExpression":{"enter":[null]},"ForOfStatement":{"enter":[null]},"ClassMethod":{"enter":[null]}},"options":{}},{"key":"base$0$0$17","visitor":{"RegExpLiteral":{"enter":[null]},"_exploded":true,"_verified":true},"options":{}},{"key":"base$0$0$18","visitor":{"_exploded":true,"_verified":true},"options":{}},{"key":"base$0$0$19","visitor":{"_exploded":{},"_verified":{},"VariableDeclarator":{"enter":[null]},"ExportNamedDeclaration":{"enter":[null]},"CatchClause":{"enter":[null]},"AssignmentExpression":{"enter":[null]},"ObjectExpression":{"enter":[null]},"FunctionDeclaration":{"enter":[null]},"FunctionExpression":{"enter":[null]},"ObjectMethod":{"enter":[null]},"ArrowFunctionExpression":{"enter":[null]},"ClassMethod":{"enter":[null]},"ForInStatement":{"enter":[null]},"ForOfStatement":{"enter":[null]}},"options":{}},{"key":"base$0$0$20","visitor":{"ObjectProperty":{"exit":[null]},"_exploded":true,"_verified":true},"options":{}},{"key":"base$0$0$21","visitor":{"_exploded":{},"_verified":{},"Program":{"enter":[null]},"ImportDeclaration":{"enter":[null,null]},"ClassProperty":{"enter":[null]},"AssignmentPattern":{"enter":[null]},"TypeCastExpression":{"enter":[null,null]},"ImportSpecifier":{"enter":[null]},"ClassDeclaration":{"enter":[null]},"ClassExpression":{"enter":[null]},"FunctionDeclaration":{"enter":[null]},"FunctionExpression":{"enter":[null]},"ObjectMethod":{"enter":[null]},"ArrowFunctionExpression":{"enter":[null]},"ClassMethod":{"enter":[null]},"AnyTypeAnnotation":{"enter":[null]},"ArrayTypeAnnotation":{"enter":[null]},"BooleanTypeAnnotation":{"enter":[null]},"BooleanLiteralTypeAnnotation":{"enter":[null]},"NullLiteralTypeAnnotation":{"enter":[null]},"ClassImplements":{"enter":[null]},"DeclareClass":{"enter":[null]},"DeclareFunction":{"enter":[null]},"DeclareInterface":{"enter":[null]},"DeclareModule":{"enter":[null]},"DeclareModuleExports":{"enter":[null]},"DeclareTypeAlias":{"enter":[null]},"DeclareOpaqueType":{"enter":[null]},"DeclareVariable":{"enter":[null]},"DeclareExportDeclaration":{"enter":[null]},"DeclareExportAllDeclaration":{"enter":[null]},"DeclaredPredicate":{"enter":[null]},"ExistsTypeAnnotation":{"enter":[null]},"FunctionTypeAnnotation":{"enter":[null]},"FunctionTypeParam":{"enter":[null]},"GenericTypeAnnotation":{"enter":[null]},"InferredPredicate":{"enter":[null]},"InterfaceExtends":{"enter":[null]},"InterfaceDeclaration":{"enter":[null]},"IntersectionTypeAnnotation":{"enter":[null]},"MixedTypeAnnotation":{"enter":[null]},"EmptyTypeAnnotation":{"enter":[null]},"NullableTypeAnnotation":{"enter":[null]},"NumberLiteralTypeAnnotation":{"enter":[null]},"NumberTypeAnnotation":{"enter":[null]},"ObjectTypeAnnotation":{"enter":[null]},"ObjectTypeCallProperty":{"enter":[null]},"ObjectTypeIndexer":{"enter":[null]},"ObjectTypeProperty":{"enter":[null]},"ObjectTypeSpreadProperty":{"enter":[null]},"OpaqueType":{"enter":[null]},"QualifiedTypeIdentifier":{"enter":[null]},"StringLiteralTypeAnnotation":{"enter":[null]},"StringTypeAnnotation":{"enter":[null]},"ThisTypeAnnotation":{"enter":[null]},"TupleTypeAnnotation":{"enter":[null]},"TypeofTypeAnnotation":{"enter":[null]},"TypeAlias":{"enter":[null]},"TypeAnnotation":{"enter":[null]},"TypeParameter":{"enter":[null]},"TypeParameterDeclaration":{"enter":[null]},"TypeParameterInstantiation":{"enter":[null]},"UnionTypeAnnotation":{"enter":[null]},"Variance":{"enter":[null]},"VoidTypeAnnotation":{"enter":[null]},"ExportAllDeclaration":{"enter":[null]},"ExportDefaultDeclaration":{"enter":[null]},"ExportNamedDeclaration":{"enter":[null]}},"options":{}},{"key":"base$0$0$22","visitor":{"AssignmentExpression":{"enter":[null]},"BinaryExpression":{"enter":[null]},"_exploded":true,"_verified":true},"options":{}},{"key":"base$0$0$23","visitor":{"_exploded":{},"_verified":{},"Program":{"enter":[null]}},"options":{}},{"key":"regenerator-transform","visitor":{"_exploded":true,"_verified":true,"FunctionDeclaration":{"exit":[null]},"FunctionExpression":{"exit":[null]},"ObjectMethod":{"exit":[null]},"ArrowFunctionExpression":{"exit":[null]},"ClassMethod":{"exit":[null]}},"options":{}}],"presets":[],"compact":false,"ast":true,"babelrc":false,"sourceFileName":"imports/plugins/core/accounts/client/components/editGroup.js","filename":"imports/plugins/core/accounts/client/components/editGroup.js","sourceMaps":true,"envName":"development","cwd":"/Users/estebandev/test-knowledge","passPerPreset":false,"parserOpts":{"sourceType":"module","sourceFileName":"imports/plugins/core/accounts/client/components/editGroup.js","plugins":["dynamicImport","classProperties","jsx","jsx","flow","asyncGenerators","objectRestSpread","objectRestSpread","flow","asyncGenerators"]},"generatorOpts":{"filename":"imports/plugins/core/accounts/client/components/editGroup.js","comments":true,"compact":false,"sourceMaps":true,"sourceFileName":"imports/plugins/core/accounts/client/components/editGroup.js"}},"code":"var _inheritsLoose2 = _interopRequireDefault(require(\"@babel/runtime/helpers/inheritsLoose\"));\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { \"default\": obj }; }\n\nvar _isEmpty;\n\nmodule.watch(require(\"lodash/isEmpty\"), {\n  \"default\": function (v) {\n    _isEmpty = v;\n  }\n}, 0);\n\nvar _isEqual;\n\nmodule.watch(require(\"lodash/isEqual\"), {\n  \"default\": function (v) {\n    _isEqual = v;\n  }\n}, 1);\nvar Meteor;\nmodule.watch(require(\"meteor/meteor\"), {\n  Meteor: function (v) {\n    Meteor = v;\n  }\n}, 2);\nvar React, Component;\nmodule.watch(require(\"react\"), {\n  \"default\": function (v) {\n    React = v;\n  },\n  Component: function (v) {\n    Component = v;\n  }\n}, 3);\nvar classnames;\nmodule.watch(require(\"classnames\"), {\n  \"default\": function (v) {\n    classnames = v;\n  }\n}, 4);\nvar PropTypes;\nmodule.watch(require(\"prop-types\"), {\n  \"default\": function (v) {\n    PropTypes = v;\n  }\n}, 5);\nvar Components;\nmodule.watch(require(\"../../../components/lib\"), {\n  Components: function (v) {\n    Components = v;\n  }\n}, 6);\nvar ReactionAlerts;\nmodule.watch(require(\"../../../layout/client/templates/layout/alerts/inlineAlerts\"), {\n  \"default\": function (v) {\n    ReactionAlerts = v;\n  }\n}, 7);\nvar Reaction;\nmodule.watch(require(\"../../../../../../client/api\"), {\n  Reaction: function (v) {\n    Reaction = v;\n  }\n}, 8);\nvar groupPermissions;\nmodule.watch(require(\"../helpers/accountsHelper\"), {\n  groupPermissions: function (v) {\n    groupPermissions = v;\n  }\n}, 9);\n\n/**\n * @summary React component to display edit group panel\n * @memberof Accounts\n * @extends {Component}\n * @property {Array} accounts\n * @property {Array} groups\n * @property {Function} onChangeGroup\n * @property {Array} packages\n * @property {Object} selectedGroup\n */\nvar EditGroup =\n/*#__PURE__*/\nfunction (_Component) {\n  (0, _inheritsLoose2.default)(EditGroup, _Component);\n\n  function EditGroup(props) {\n    var _this;\n\n    _this = _Component.call(this, props) || this;\n\n    _this.selectGroup = function (grp) {\n      return function (event) {\n        event.preventDefault();\n\n        if (_this.props.onChangeGroup) {\n          _this.props.onChangeGroup(grp);\n        }\n\n        _this.setState({\n          isEditing: false\n        });\n      };\n    };\n\n    _this.groupListClass = function (grp) {\n      return classnames({\n        \"groups-item-selected\": grp._id === _this.state.selectedGroup._id,\n        \"groups-list\": true\n      });\n    };\n\n    _this.removeAlert = function (oldAlert) {\n      return _this.setState({\n        alertArray: _this.state.alertArray.filter(function (alert) {\n          return !_isEqual(alert, oldAlert);\n        })\n      });\n    };\n\n    _this.createGroup = function (groupData) {\n      Meteor.call(\"group/createGroup\", groupData, Reaction.getShopId(), function (err, res) {\n        if (err) {\n          return ReactionAlerts.add(err.reason, \"danger\", Object.assign({}, _this.state.alertOptions, {\n            i18nKey: \"admin.settings.createGroupError\"\n          }));\n        }\n\n        if (_this.props.onChangeGroup) {\n          _this.props.onChangeGroup(res.group);\n        }\n\n        ReactionAlerts.add(\"Created successfully\", \"success\", Object.assign({}, _this.state.alertOptions, {\n          i18nKey: \"admin.settings.createGroupSuccess\"\n        }));\n\n        _this.setState({\n          isEditing: false\n        });\n      });\n    };\n\n    _this.updateGroup = function (groupId, groupData) {\n      Meteor.call(\"group/updateGroup\", groupId, groupData, Reaction.getShopId(), function (err, res) {\n        if (err) {\n          return ReactionAlerts.add(err.reason, \"danger\", Object.assign({}, _this.state.alertOptions, {\n            i18nKey: \"admin.settings.updateGroupError\"\n          }));\n        }\n\n        if (_this.props.onChangeGroup) {\n          _this.props.onChangeGroup(res.group);\n        }\n\n        ReactionAlerts.add(\"Created successfully\", \"success\", Object.assign({}, _this.state.alertOptions, {\n          i18nKey: \"admin.settings.updateGroupSuccess\"\n        }));\n\n        _this.setState({\n          isEditing: false\n        });\n      });\n    };\n\n    _this.showForm = function () {\n      var grp = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : {};\n      return function (e) {\n        e.preventDefault();\n        e.stopPropagation();\n\n        _this.setState({\n          isEditing: true,\n          selectedGroup: grp\n        });\n      };\n    };\n\n    _this.renderGroupForm = function () {\n      if (!_this.state.isEditing) {\n        return null;\n      }\n\n      if (_isEmpty(_this.state.selectedGroup)) {\n        return React.createElement(Components.GroupForm, {\n          submitLabel: \"Create Group\",\n          i18nKeyLabel: \"admin.groups.create\",\n          group: _this.state.selectedGroup,\n          createGroup: _this.createGroup\n        });\n      }\n\n      return React.createElement(Components.GroupForm, {\n        className: \"update-form\",\n        submitLabel: \"Update Group\",\n        i18nKeyLabel: \"admin.groups.update\",\n        group: _this.state.selectedGroup,\n        updateGroup: _this.updateGroup\n      });\n    };\n\n    _this.renderPermissionsList = function () {\n      if (_this.state.isEditing) {\n        return null;\n      }\n\n      return React.createElement(Components.PermissionsList, {\n        permissions: groupPermissions(_this.props.packages),\n        group: _this.state.selectedGroup,\n        updateGroup: _this.updateGroup\n      });\n    };\n\n    var accounts = props.accounts,\n        selectedGroup = props.selectedGroup,\n        groups = props.groups;\n    var alertId = \"edit-group-comp\";\n    _this.state = {\n      alertOptions: {\n        placement: alertId,\n        id: alertId,\n        autoHide: 4000\n      },\n      selectedGroup: selectedGroup || {},\n      isEditing: false,\n      groups: groups,\n      accounts: accounts\n    };\n    return _this;\n  }\n\n  var _proto = EditGroup.prototype;\n\n  _proto.componentWillReceiveProps = function () {\n    function componentWillReceiveProps(nextProps) {\n      var groups = nextProps.groups,\n          selectedGroup = nextProps.selectedGroup;\n      this.setState({\n        groups: groups,\n        selectedGroup: selectedGroup\n      });\n    }\n\n    return componentWillReceiveProps;\n  }();\n\n  _proto.renderGroups = function () {\n    function renderGroups() {\n      var _this2 = this;\n\n      return React.createElement(Components.List, null, this.state.groups.map(function (grp, index) {\n        return React.createElement(\"div\", {\n          key: index,\n          className: _this2.groupListClass(grp)\n        }, React.createElement(Components.ListItem, {\n          label: grp.name,\n          onClick: _this2.selectGroup(grp),\n          listItemClassName: \"flex flex-justify-spaceBetween\"\n        }, React.createElement(Components.IconButton, {\n          icon: \"fa fa-pencil\",\n          onClick: _this2.showForm(grp)\n        })));\n      }), React.createElement(Components.ListItem, {\n        label: \"New Group\",\n        i18nKeyLabel: \"admin.groups.newGroup\",\n        onClick: this.showForm()\n      }, React.createElement(\"i\", {\n        className: \"fa fa-plus\"\n      })));\n    }\n\n    return renderGroups;\n  }();\n\n  _proto.render = function () {\n    function render() {\n      var alertId = this.state.alertOptions.id;\n      return React.createElement(\"div\", {\n        className: \"edit-group-container\"\n      }, React.createElement(Components.Card, null, React.createElement(Components.CardHeader, {\n        actAsExpander: true,\n        i18nKeyTitle: \"admin.groups.editGroups\",\n        title: \"Edit Groups\"\n      }), React.createElement(Components.CardBody, {\n        expandable: true\n      }, React.createElement(\"div\", {\n        className: \"settings\"\n      }, React.createElement(Components.Alerts, {\n        placement: alertId,\n        id: alertId,\n        onAlertRemove: this.removeAlert\n      }), this.renderGroups(), this.renderGroupForm(), this.renderPermissionsList()))));\n    }\n\n    return render;\n  }();\n\n  return EditGroup;\n}(Component);\n\nEditGroup.propTypes = {\n  accounts: PropTypes.array,\n  groups: PropTypes.array,\n  onChangeGroup: PropTypes.func,\n  packages: PropTypes.array,\n  selectedGroup: PropTypes.object\n};\nmodule.exportDefault(EditGroup);","map":{"version":3,"sources":["imports/plugins/core/accounts/client/components/editGroup.js"],"names":["_isEmpty","module","watch","require","v","_isEqual","Meteor","React","Component","classnames","PropTypes","Components","ReactionAlerts","Reaction","groupPermissions","EditGroup","props","selectGroup","grp","event","preventDefault","onChangeGroup","setState","isEditing","groupListClass","_id","state","selectedGroup","removeAlert","oldAlert","alertArray","filter","alert","createGroup","groupData","call","getShopId","err","res","add","reason","Object","assign","alertOptions","i18nKey","group","updateGroup","groupId","showForm","e","stopPropagation","renderGroupForm","renderPermissionsList","packages","accounts","groups","alertId","placement","id","autoHide","componentWillReceiveProps","nextProps","renderGroups","map","index","name","render","propTypes","array","func","object","exportDefault"],"mappings":"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","sourcesContent":["import { Meteor } from \"meteor/meteor\";\nimport _ from \"lodash\";\nimport React, { Component } from \"react\";\nimport classnames from \"classnames\";\nimport PropTypes from \"prop-types\";\nimport { Components } from \"@reactioncommerce/reaction-components\";\nimport ReactionAlerts from \"/imports/plugins/core/layout/client/templates/layout/alerts/inlineAlerts\";\nimport { Reaction } from \"/client/api\";\nimport { groupPermissions } from \"../helpers/accountsHelper\";\n\n/**\n * @summary React component to display edit group panel\n * @memberof Accounts\n * @extends {Component}\n * @property {Array} accounts\n * @property {Array} groups\n * @property {Function} onChangeGroup\n * @property {Array} packages\n * @property {Object} selectedGroup\n */\nclass EditGroup extends Component {\n  static propTypes = {\n    accounts: PropTypes.array,\n    groups: PropTypes.array,\n    onChangeGroup: PropTypes.func,\n    packages: PropTypes.array,\n    selectedGroup: PropTypes.object\n  };\n\n  constructor(props) {\n    super(props);\n    const { accounts, selectedGroup, groups } = props;\n    const alertId = \"edit-group-comp\";\n\n    this.state = {\n      alertOptions: { placement: alertId, id: alertId, autoHide: 4000 },\n      selectedGroup: selectedGroup || {},\n      isEditing: false,\n      groups,\n      accounts\n    };\n  }\n\n  componentWillReceiveProps(nextProps) {\n    const { groups, selectedGroup } = nextProps;\n    this.setState({ groups, selectedGroup });\n  }\n\n  selectGroup = (grp) => (event) => {\n    event.preventDefault();\n    if (this.props.onChangeGroup) {\n      this.props.onChangeGroup(grp);\n    }\n    this.setState({ isEditing: false });\n  };\n\n  groupListClass = (grp) => classnames({\n    \"groups-item-selected\": grp._id === this.state.selectedGroup._id,\n    \"groups-list\": true\n  });\n\n  removeAlert = (oldAlert) => this.setState({\n    alertArray: this.state.alertArray.filter((alert) => !_.isEqual(alert, oldAlert))\n  });\n\n  createGroup = (groupData) => {\n    Meteor.call(\"group/createGroup\", groupData, Reaction.getShopId(), (err, res) => {\n      if (err) {\n        return ReactionAlerts.add(\n          err.reason,\n          \"danger\",\n          Object.assign({}, this.state.alertOptions, { i18nKey: \"admin.settings.createGroupError\" })\n        );\n      }\n\n      if (this.props.onChangeGroup) {\n        this.props.onChangeGroup(res.group);\n      }\n\n      ReactionAlerts.add(\n        \"Created successfully\",\n        \"success\",\n        Object.assign({}, this.state.alertOptions, { i18nKey: \"admin.settings.createGroupSuccess\" })\n      );\n\n      this.setState({ isEditing: false });\n    });\n  };\n\n  updateGroup = (groupId, groupData) => {\n    Meteor.call(\"group/updateGroup\", groupId, groupData, Reaction.getShopId(), (err, res) => {\n      if (err) {\n        return ReactionAlerts.add(\n          err.reason,\n          \"danger\",\n          Object.assign({}, this.state.alertOptions, { i18nKey: \"admin.settings.updateGroupError\" })\n        );\n      }\n\n      if (this.props.onChangeGroup) {\n        this.props.onChangeGroup(res.group);\n      }\n\n      ReactionAlerts.add(\n        \"Created successfully\",\n        \"success\",\n        Object.assign({}, this.state.alertOptions, { i18nKey: \"admin.settings.updateGroupSuccess\" })\n      );\n\n      this.setState({ isEditing: false });\n    });\n  };\n\n  showForm = ((grp) = {}) => (e) => {\n    e.preventDefault();\n    e.stopPropagation();\n    this.setState({ isEditing: true, selectedGroup: grp });\n  };\n\n  renderGroupForm = () => {\n    if (!this.state.isEditing) {\n      return null;\n    }\n    if (_.isEmpty(this.state.selectedGroup)) {\n      return (\n        <Components.GroupForm\n          submitLabel=\"Create Group\"\n          i18nKeyLabel=\"admin.groups.create\"\n          group={this.state.selectedGroup}\n          createGroup={this.createGroup}\n        />\n      );\n    }\n    return (\n      <Components.GroupForm\n        className=\"update-form\"\n        submitLabel=\"Update Group\"\n        i18nKeyLabel=\"admin.groups.update\"\n        group={this.state.selectedGroup}\n        updateGroup={this.updateGroup}\n      />\n    );\n  };\n\n  renderGroups() {\n    return (\n      <Components.List>\n        {this.state.groups.map((grp, index) => (\n          <div key={index} className={this.groupListClass(grp)}>\n            <Components.ListItem label={grp.name} onClick={this.selectGroup(grp)} listItemClassName=\"flex flex-justify-spaceBetween\">\n              <Components.IconButton\n                icon=\"fa fa-pencil\"\n                onClick={this.showForm(grp)}\n              />\n            </Components.ListItem>\n          </div>\n        ))}\n        <Components.ListItem label=\"New Group\" i18nKeyLabel=\"admin.groups.newGroup\" onClick={this.showForm()}>\n          <i className=\"fa fa-plus\" />\n        </Components.ListItem>\n      </Components.List>\n    );\n  }\n\n  renderPermissionsList = () => {\n    if (this.state.isEditing) {\n      return null;\n    }\n    return (\n      <Components.PermissionsList\n        permissions={groupPermissions(this.props.packages)}\n        group={this.state.selectedGroup}\n        updateGroup={this.updateGroup}\n      />\n    );\n  };\n\n  render() {\n    const alertId = this.state.alertOptions.id;\n    return (\n      <div className=\"edit-group-container\">\n        <Components.Card>\n          <Components.CardHeader actAsExpander={true} i18nKeyTitle=\"admin.groups.editGroups\" title=\"Edit Groups\" />\n          <Components.CardBody expandable={true}>\n            <div className=\"settings\">\n              <Components.Alerts placement={alertId} id={alertId} onAlertRemove={this.removeAlert} />\n              {this.renderGroups()}\n              {this.renderGroupForm()}\n              {this.renderPermissionsList()}\n            </div>\n          </Components.CardBody>\n        </Components.Card>\n      </div>\n    );\n  }\n}\n\nexport default EditGroup;\n"]},"sourceType":"script","hash":"0cfc797d94c77675fa50fd293074727d9dd09bcb"}
