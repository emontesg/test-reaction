{"metadata":{},"options":{"plugins":[{"key":"base$0$0","visitor":{"Program":{"enter":[null]},"_exploded":true,"_verified":true},"options":{"generateLetDeclarations":true,"enforceStrictMode":false}},{"key":"transform-meteor-dynamic-import","visitor":{"_exploded":{},"_verified":{},"CallExpression":{"enter":[null]}},"options":{}},{"key":"base$0$2","visitor":{"CallExpression":{"enter":[null]},"BinaryExpression":{"enter":[null]},"MemberExpression":{"enter":[null],"exit":[null]},"_exploded":true,"_verified":true,"Identifier":{"enter":[null]},"JSXIdentifier":{"enter":[null]}},"options":{"polyfill":false,"useBuiltIns":false}},{"key":"base$0$3","visitor":{"_exploded":{},"_verified":{},"ClassDeclaration":{"enter":[null]},"ClassExpression":{"enter":[null]}},"options":{"loose":true}},{"key":"base$0$4","visitor":{"FunctionExpression":{"exit":[null]},"_exploded":true,"_verified":true},"options":{}},{"key":"base$0$5","visitor":{"ForInStatement":{"enter":[null]},"_exploded":true,"_verified":true},"options":{}},{"key":"base$0$6","visitor":{"Program":{"exit":[null]},"_exploded":true,"_verified":true},"options":{"allowTopLevelThis":true,"strictMode":false,"loose":true}},{"key":"base$0$1$0","visitor":{"_exploded":{},"_verified":{},"JSXNamespacedName":{"enter":[null]},"JSXElement":{"exit":[null]},"JSXFragment":{"exit":[null]},"Program":{"enter":[null],"exit":[null]},"JSXAttribute":{"enter":[null]}},"options":{"pragma":"React.createElement","pragmaFrag":"React.Fragment","throwIfNamespace":true,"useBuiltIns":false}},{"key":"base$0$1$1","visitor":{"_exploded":true,"_verified":true},"options":{}},{"key":"base$0$1$2","visitor":{"ExportDefaultDeclaration":{"enter":[null]},"CallExpression":{"enter":[null]},"_exploded":true,"_verified":true},"options":{}},{"key":"base$0$0$0","visitor":{"_exploded":true,"_verified":true},"options":{}},{"key":"base$0$0$1","visitor":{"_exploded":true,"_verified":true},"options":{}},{"key":"base$0$0$2","visitor":{"ArrowFunctionExpression":{"enter":[null]},"_exploded":true,"_verified":true},"options":{}},{"key":"base$0$0$3","visitor":{"BlockStatement":{"enter":[null]},"SwitchCase":{"enter":[null]},"_exploded":true,"_verified":true},"options":{}},{"key":"base$0$0$4","visitor":{"VariableDeclaration":{"enter":[null]},"CatchClause":{"enter":[null]},"_exploded":true,"BlockStatement":{"enter":[null]},"SwitchStatement":{"enter":[null]},"Program":{"enter":[null]},"_verified":true,"DoWhileStatement":{"enter":[null]},"ForInStatement":{"enter":[null]},"ForStatement":{"enter":[null]},"WhileStatement":{"enter":[null]},"ForOfStatement":{"enter":[null]}},"options":{}},{"key":"base$0$0$5","visitor":{"ExportDefaultDeclaration":{"enter":[null]},"ClassDeclaration":{"enter":[null]},"ClassExpression":{"enter":[null]},"_exploded":true,"_verified":true},"options":{"loose":true}},{"key":"base$0$0$6","visitor":{"ObjectExpression":{"exit":[null]},"_exploded":true,"_verified":true},"options":{"loose":true}},{"key":"base$0$0$7","visitor":{"ExportNamedDeclaration":{"enter":[null]},"CatchClause":{"enter":[null]},"AssignmentExpression":{"enter":[null]},"VariableDeclaration":{"enter":[null]},"_exploded":true,"_verified":true,"ForInStatement":{"enter":[null]},"ForOfStatement":{"enter":[null]}},"options":{}},{"key":"base$0$0$8","visitor":{"ForOfStatement":{"enter":[null]},"_exploded":true,"_verified":true},"options":{"loose":true}},{"key":"base$0$0$9","visitor":{"NumericLiteral":{"enter":[null]},"StringLiteral":{"enter":[null]},"_exploded":true,"_verified":true},"options":{}},{"key":"base$0$0$10","visitor":{"ObjectExpression":{"enter":[null]},"_exploded":true,"_verified":true},"options":{}},{"key":"base$0$0$11","visitor":{"_exploded":true,"_verified":true,"FunctionDeclaration":{"enter":[null]},"FunctionExpression":{"enter":[null]},"ObjectMethod":{"enter":[null]},"ArrowFunctionExpression":{"enter":[null]},"ClassMethod":{"enter":[null]}},"options":{}},{"key":"base$0$0$12","visitor":{"ObjectMethod":{"enter":[null]},"ObjectProperty":{"enter":[null]},"_exploded":true,"_verified":true},"options":{}},{"key":"base$0$0$13","visitor":{"ArrayExpression":{"enter":[null]},"CallExpression":{"enter":[null]},"NewExpression":{"enter":[null]},"_exploded":true,"_verified":true},"options":{}},{"key":"base$0$0$14","visitor":{"RegExpLiteral":{"enter":[null]},"_exploded":true,"_verified":true},"options":{}},{"key":"base$0$0$15","visitor":{"TaggedTemplateExpression":{"enter":[null]},"TemplateLiteral":{"enter":[null]},"_exploded":true,"_verified":true},"options":{"loose":true}},{"key":"base$0$0$16","visitor":{"UnaryExpression":{"enter":[null]},"_exploded":true,"_verified":true,"BlockStatement":{"enter":[null]},"CatchClause":{"enter":[null]},"DoWhileStatement":{"enter":[null]},"ForInStatement":{"enter":[null]},"ForStatement":{"enter":[null]},"FunctionDeclaration":{"enter":[null]},"FunctionExpression":{"enter":[null]},"Program":{"enter":[null]},"ObjectMethod":{"enter":[null]},"SwitchStatement":{"enter":[null]},"WhileStatement":{"enter":[null]},"ArrowFunctionExpression":{"enter":[null]},"ClassDeclaration":{"enter":[null]},"ClassExpression":{"enter":[null]},"ForOfStatement":{"enter":[null]},"ClassMethod":{"enter":[null]}},"options":{}},{"key":"base$0$0$17","visitor":{"RegExpLiteral":{"enter":[null]},"_exploded":true,"_verified":true},"options":{}},{"key":"base$0$0$18","visitor":{"_exploded":true,"_verified":true},"options":{}},{"key":"base$0$0$19","visitor":{"_exploded":{},"_verified":{},"VariableDeclarator":{"enter":[null]},"ExportNamedDeclaration":{"enter":[null]},"CatchClause":{"enter":[null]},"AssignmentExpression":{"enter":[null]},"ObjectExpression":{"enter":[null]},"FunctionDeclaration":{"enter":[null]},"FunctionExpression":{"enter":[null]},"ObjectMethod":{"enter":[null]},"ArrowFunctionExpression":{"enter":[null]},"ClassMethod":{"enter":[null]},"ForInStatement":{"enter":[null]},"ForOfStatement":{"enter":[null]}},"options":{}},{"key":"base$0$0$20","visitor":{"ObjectProperty":{"exit":[null]},"_exploded":true,"_verified":true},"options":{}},{"key":"base$0$0$21","visitor":{"_exploded":{},"_verified":{},"Program":{"enter":[null]},"ImportDeclaration":{"enter":[null,null]},"ClassProperty":{"enter":[null]},"AssignmentPattern":{"enter":[null]},"TypeCastExpression":{"enter":[null,null]},"ImportSpecifier":{"enter":[null]},"ClassDeclaration":{"enter":[null]},"ClassExpression":{"enter":[null]},"FunctionDeclaration":{"enter":[null]},"FunctionExpression":{"enter":[null]},"ObjectMethod":{"enter":[null]},"ArrowFunctionExpression":{"enter":[null]},"ClassMethod":{"enter":[null]},"AnyTypeAnnotation":{"enter":[null]},"ArrayTypeAnnotation":{"enter":[null]},"BooleanTypeAnnotation":{"enter":[null]},"BooleanLiteralTypeAnnotation":{"enter":[null]},"NullLiteralTypeAnnotation":{"enter":[null]},"ClassImplements":{"enter":[null]},"DeclareClass":{"enter":[null]},"DeclareFunction":{"enter":[null]},"DeclareInterface":{"enter":[null]},"DeclareModule":{"enter":[null]},"DeclareModuleExports":{"enter":[null]},"DeclareTypeAlias":{"enter":[null]},"DeclareOpaqueType":{"enter":[null]},"DeclareVariable":{"enter":[null]},"DeclareExportDeclaration":{"enter":[null]},"DeclareExportAllDeclaration":{"enter":[null]},"DeclaredPredicate":{"enter":[null]},"ExistsTypeAnnotation":{"enter":[null]},"FunctionTypeAnnotation":{"enter":[null]},"FunctionTypeParam":{"enter":[null]},"GenericTypeAnnotation":{"enter":[null]},"InferredPredicate":{"enter":[null]},"InterfaceExtends":{"enter":[null]},"InterfaceDeclaration":{"enter":[null]},"IntersectionTypeAnnotation":{"enter":[null]},"MixedTypeAnnotation":{"enter":[null]},"EmptyTypeAnnotation":{"enter":[null]},"NullableTypeAnnotation":{"enter":[null]},"NumberLiteralTypeAnnotation":{"enter":[null]},"NumberTypeAnnotation":{"enter":[null]},"ObjectTypeAnnotation":{"enter":[null]},"ObjectTypeCallProperty":{"enter":[null]},"ObjectTypeIndexer":{"enter":[null]},"ObjectTypeProperty":{"enter":[null]},"ObjectTypeSpreadProperty":{"enter":[null]},"OpaqueType":{"enter":[null]},"QualifiedTypeIdentifier":{"enter":[null]},"StringLiteralTypeAnnotation":{"enter":[null]},"StringTypeAnnotation":{"enter":[null]},"ThisTypeAnnotation":{"enter":[null]},"TupleTypeAnnotation":{"enter":[null]},"TypeofTypeAnnotation":{"enter":[null]},"TypeAlias":{"enter":[null]},"TypeAnnotation":{"enter":[null]},"TypeParameter":{"enter":[null]},"TypeParameterDeclaration":{"enter":[null]},"TypeParameterInstantiation":{"enter":[null]},"UnionTypeAnnotation":{"enter":[null]},"Variance":{"enter":[null]},"VoidTypeAnnotation":{"enter":[null]},"ExportAllDeclaration":{"enter":[null]},"ExportDefaultDeclaration":{"enter":[null]},"ExportNamedDeclaration":{"enter":[null]}},"options":{}},{"key":"base$0$0$22","visitor":{"AssignmentExpression":{"enter":[null]},"BinaryExpression":{"enter":[null]},"_exploded":true,"_verified":true},"options":{}},{"key":"base$0$0$23","visitor":{"_exploded":{},"_verified":{},"Program":{"enter":[null]}},"options":{}},{"key":"regenerator-transform","visitor":{"_exploded":true,"_verified":true,"FunctionDeclaration":{"exit":[null]},"FunctionExpression":{"exit":[null]},"ObjectMethod":{"exit":[null]},"ArrowFunctionExpression":{"exit":[null]},"ClassMethod":{"exit":[null]}},"options":{}}],"presets":[],"compact":false,"ast":true,"babelrc":false,"sourceFileName":"imports/plugins/included/product-variant/components/variantForm.js","filename":"imports/plugins/included/product-variant/components/variantForm.js","sourceMaps":true,"envName":"development","cwd":"/Users/estebandev/test-knowledge","passPerPreset":false,"parserOpts":{"sourceType":"module","sourceFileName":"imports/plugins/included/product-variant/components/variantForm.js","plugins":["dynamicImport","classProperties","jsx","jsx","flow","asyncGenerators","objectRestSpread","objectRestSpread","flow","asyncGenerators"]},"generatorOpts":{"filename":"imports/plugins/included/product-variant/components/variantForm.js","comments":true,"compact":false,"sourceMaps":true,"sourceFileName":"imports/plugins/included/product-variant/components/variantForm.js"}},"code":"var _objectSpread6 = _interopRequireDefault(require(\"@babel/runtime/helpers/objectSpread\"));\n\nvar _createClass2 = _interopRequireDefault(require(\"@babel/runtime/helpers/createClass\"));\n\nvar _inheritsLoose2 = _interopRequireDefault(require(\"@babel/runtime/helpers/inheritsLoose\"));\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { \"default\": obj }; }\n\nfunction _slicedToArray(arr, i) { return _arrayWithHoles(arr) || _iterableToArrayLimit(arr, i) || _nonIterableRest(); }\n\nfunction _nonIterableRest() { throw new TypeError(\"Invalid attempt to destructure non-iterable instance\"); }\n\nfunction _iterableToArrayLimit(arr, i) { var _arr = []; var _n = true; var _d = false; var _e = undefined; try { for (var _i = arr[Symbol.iterator](), _s; !(_n = (_s = _i.next()).done); _n = true) { _arr.push(_s.value); if (i && _arr.length === i) break; } } catch (err) { _d = true; _e = err; } finally { try { if (!_n && _i[\"return\"] != null) _i[\"return\"](); } finally { if (_d) throw _e; } } return _arr; }\n\nfunction _arrayWithHoles(arr) { if (Array.isArray(arr)) return arr; }\n\nvar _isEqual;\n\nmodule.watch(require(\"lodash/isEqual\"), {\n  \"default\": function (v) {\n    _isEqual = v;\n  }\n}, 0);\nvar React, Component;\nmodule.watch(require(\"react\"), {\n  \"default\": function (v) {\n    React = v;\n  },\n  Component: function (v) {\n    Component = v;\n  }\n}, 1);\nvar PropTypes;\nmodule.watch(require(\"prop-types\"), {\n  \"default\": function (v) {\n    PropTypes = v;\n  }\n}, 2);\nvar classnames;\nmodule.watch(require(\"classnames\"), {\n  \"default\": function (v) {\n    classnames = v;\n  }\n}, 3);\nvar Velocity;\nmodule.watch(require(\"velocity-animate\"), {\n  \"default\": function (v) {\n    Velocity = v;\n  }\n}, 4);\nmodule.watch(require(\"velocity-animate/velocity.ui\"));\nvar Components;\nmodule.watch(require(\"../../../core/components/lib\"), {\n  Components: function (v) {\n    Components = v;\n  }\n}, 5);\nvar findCurrency;\nmodule.watch(require(\"../../../../../client/api\"), {\n  findCurrency: function (v) {\n    findCurrency = v;\n  }\n}, 6);\nvar fieldNames = [\"title\", \"originCountry\", \"compareAtPrice\", \"price\", \"width\", \"length\", \"height\", \"weight\", \"taxCode\", \"taxDescription\", \"inventoryQuantity\", \"inventoryPolicy\", \"lowInventoryWarningThreshold\"];\nvar fieldGroups = {\n  title: {\n    group: \"variantDetails\"\n  },\n  originCountry: {\n    group: \"variantDetails\"\n  },\n  compareAtPrice: {\n    group: \"variantDetails\"\n  },\n  price: {\n    group: \"variantDetails\"\n  },\n  width: {\n    group: \"variantDetails\"\n  },\n  length: {\n    group: \"variantDetails\"\n  },\n  height: {\n    group: \"variantDetails\"\n  },\n  weight: {\n    group: \"variantDetails\"\n  },\n  taxCode: {\n    group: \"taxable\"\n  },\n  taxDescription: {\n    group: \"taxable\"\n  },\n  inventoryQuantity: {\n    group: \"inventoryManagement\"\n  },\n  inventoryPolicy: {\n    group: \"inventoryManagement\"\n  },\n  lowInventoryWarningThreshold: {\n    group: \"inventoryManagement\"\n  }\n};\n\nvar VariantForm =\n/*#__PURE__*/\nfunction (_Component) {\n  (0, _inheritsLoose2.default)(VariantForm, _Component);\n\n  function VariantForm(props) {\n    var _this;\n\n    _this = _Component.call(this, props) || this;\n\n    _this.handleFieldChange = function (event, value, field) {\n      _this.setState(function (_ref) {\n        var _objectSpread2;\n\n        var variant = _ref.variant;\n        return {\n          variant: (0, _objectSpread6.default)({}, variant, (_objectSpread2 = {}, _objectSpread2[field] = value, _objectSpread2))\n        };\n      });\n    };\n\n    _this.handleFieldBlur = function (event, value, field) {\n      if (_this.props.onVariantFieldSave) {\n        _this.props.onVariantFieldSave(_this.variant._id, field, value, _this.state.variant);\n      }\n    };\n\n    _this.handleSelectChange = function (value, field) {\n      _this.setState(function (_ref2) {\n        var _objectSpread3;\n\n        var variant = _ref2.variant;\n        return {\n          variant: (0, _objectSpread6.default)({}, variant, (_objectSpread3 = {}, _objectSpread3[field] = value, _objectSpread3))\n        };\n      }, function () {\n        if (_this.props.onVariantFieldSave) {\n          _this.props.onVariantFieldSave(_this.variant._id, field, value, _this.state.variant);\n        }\n      });\n    };\n\n    _this.handleCheckboxChange = function (event, value, field) {\n      _this.setState(function (_ref3) {\n        var _objectSpread4;\n\n        var variant = _ref3.variant;\n        return {\n          variant: (0, _objectSpread6.default)({}, variant, (_objectSpread4 = {}, _objectSpread4[field] = value, _objectSpread4))\n        };\n      });\n\n      _this.handleFieldBlur(event, value, field);\n    };\n\n    _this.handleInventoryPolicyChange = function (event, value, field) {\n      /*\n      Due to some confusing verbiage on how inventoryPolicy works / is displayed, we need to handle this field\n      differently than we handle the other checkboxes in this component. Specifically, we display the opposite value of\n      what the actual field value is. Because this is a checkbox, that means that the opposite value is actually the\n      field value as well, not just a display value, so we need to reverse the boolean value when it gets passed into\n      this function before we send it to the server to update the data. Other than reversing the value, this function\n      is the same as `handleCheckboxChange`.\n      */\n      var inverseValue = !value;\n\n      _this.setState(function (_ref4) {\n        var _objectSpread5;\n\n        var variant = _ref4.variant;\n        return {\n          variant: (0, _objectSpread6.default)({}, variant, (_objectSpread5 = {}, _objectSpread5[field] = inverseValue, _objectSpread5))\n        };\n      });\n\n      _this.handleFieldBlur(event, inverseValue, field);\n    };\n\n    _this.handleCardExpand = function (event, card, cardName, isExpanded) {\n      if (typeof _this.props.onCardExpand === \"function\") {\n        _this.props.onCardExpand(isExpanded ? cardName : undefined);\n      }\n    };\n\n    _this.handleVariantVisibilityToggle = function (variant) {\n      return _this.props.onVisibilityButtonClick(variant);\n    };\n\n    _this.isExpanded = function (groupName) {\n      return _this.state.expandedCard === groupName;\n    };\n\n    _this.state = {\n      expandedCard: props.editFocus,\n      variant: props.variant,\n      inventoryPolicy: props.variant.inventoryPolicy,\n      taxable: props.variant.taxable,\n      inventoryManagement: props.variant.inventoryManagement\n    };\n    return _this;\n  }\n\n  var _proto = VariantForm.prototype;\n\n  _proto.componentWillReceiveProps = function () {\n    function componentWillReceiveProps(nextProps) {\n      var nextVariant = nextProps.variant || {};\n      var currentVariant = this.state.variant || {};\n\n      if (_isEqual(nextVariant, currentVariant) === false) {\n        for (var _i = 0; _i < fieldNames.length; _i++) {\n          var fieldName = fieldNames[_i];\n\n          if (nextVariant[fieldName] !== currentVariant[fieldName]) {\n            if (fieldName !== \"taxCode\") {\n              this.animateFieldFlash(fieldName);\n            }\n          }\n        }\n\n        this.setState({\n          expandedCard: nextProps.editFocus,\n          inventoryManagement: nextProps.variant.inventoryManagement,\n          inventoryPolicy: nextProps.variant.inventoryPolicy,\n          taxable: nextProps.variant.taxable,\n          variant: nextProps.variant\n        });\n      }\n\n      this.setState({\n        expandedCard: nextProps.editFocus\n      });\n    }\n\n    return componentWillReceiveProps;\n  }();\n\n  _proto.fieldGroupForFieldName = function () {\n    function fieldGroupForFieldName(field) {\n      // Other wise, if a field was passed\n      // const fieldName = this.state.viewProps.field;\n      var fieldName; // If the field is an array of field name\n\n      if (Array.isArray(field) && field.length) {\n        // Use the first field name\n        var _field = _slicedToArray(field, 1);\n\n        fieldName = _field[0];\n      } else {\n        fieldName = field;\n      }\n\n      var fieldData = fieldGroups[fieldName];\n\n      if (fieldData && fieldData.group) {\n        return fieldData.group;\n      }\n\n      return fieldName;\n    }\n\n    return fieldGroupForFieldName;\n  }();\n\n  _proto.animateFieldFlash = function () {\n    function animateFieldFlash(fieldName) {\n      var fieldRef = this.refs[fieldName + \"Input\"];\n\n      if (fieldRef) {\n        var input = fieldRef.refs.input;\n        var isFieldValid = this.props.validation.isFieldValid(fieldName);\n        var flashColor = isFieldValid ? \"#f0fff4\" : \"#ffeeef\";\n        Velocity.RunSequence([{\n          e: input,\n          p: {\n            backgroundColor: flashColor\n          },\n          o: {\n            duration: 200\n          }\n        }, {\n          e: input,\n          p: {\n            backgroundColor: \"#fff\"\n          },\n          o: {\n            duration: 100\n          }\n        }]);\n      }\n    }\n\n    return animateFieldFlash;\n  }();\n\n  _proto.renderTaxCodeField = function () {\n    function renderTaxCodeField() {\n      if (this.props.isProviderEnabled()) {\n        return React.createElement(Components.Select, {\n          clearable: false,\n          i18nKeyLabel: \"productVariant.taxCode\",\n          i18nKeyPlaceholder: \"productVariant.selectTaxCode\",\n          label: \"Tax Code\",\n          name: \"taxCode\",\n          ref: \"taxCodeInput\",\n          options: this.props.fetchTaxCodes(),\n          onChange: this.handleSelectChange,\n          value: this.variant.taxCode\n        });\n      }\n\n      return React.createElement(Components.TextField, {\n        i18nKeyLabel: \"productVariant.taxCode\",\n        i18nKeyPlaceholder: \"productVariant.selectTaxCode\",\n        placeholder: \"Select Tax Code\",\n        label: \"Tax Code\",\n        name: \"taxCode\",\n        ref: \"taxCodeInput\",\n        value: this.variant.taxCode,\n        onBlur: this.handleFieldBlur,\n        onChange: this.handleFieldChange,\n        onReturnKeyDown: this.handleFieldBlur,\n        validation: this.props.validation\n      });\n    }\n\n    return renderTaxCodeField;\n  }();\n\n  _proto.renderArchiveButton = function () {\n    function renderArchiveButton() {\n      var _this2 = this;\n\n      if (this.props.isDeleted) {\n        return React.createElement(Components.Button, {\n          icon: \"refresh\",\n          className: \"rui btn btn-default btn-restore-variant flat\",\n          tooltip: \"Restore\",\n          onClick: function () {\n            return _this2.props.restoreVariant(_this2.variant);\n          }\n        });\n      }\n\n      return React.createElement(Components.Button, {\n        icon: \"archive\",\n        className: \"rui btn btn-default btn-remove-variant flat\",\n        tooltip: \"Archive\",\n        onClick: function () {\n          return _this2.props.removeVariant(_this2.variant);\n        }\n      });\n    }\n\n    return renderArchiveButton;\n  }();\n\n  _proto.renderArchivedLabel = function () {\n    function renderArchivedLabel() {\n      if (this.props.isDeleted) {\n        return React.createElement(\"div\", {\n          className: \"panel-subheading\"\n        }, React.createElement(\"span\", {\n          className: \"badge badge-danger\",\n          \"data-i18n\": \"app.archived\"\n        }, React.createElement(\"span\", null, \"Archived\")));\n      }\n    }\n\n    return renderArchivedLabel;\n  }();\n\n  _proto.renderInventoryPolicyField = function () {\n    function renderInventoryPolicyField() {\n      if (this.props.hasChildVariants(this.variant)) {\n        return React.createElement(\"div\", {\n          className: \"col-sm-12\"\n        }, React.createElement(Components.Switch, {\n          i18nKeyLabel: \"productVariant.inventoryPolicy\",\n          i18nKeyOnLabel: \"productVariant.inventoryPolicy\",\n          name: \"inventoryPolicy\",\n          label: \"Allow backorder\",\n          onLabel: \"Allow backorder\",\n          checked: !this.state.inventoryPolicy,\n          onChange: this.handleInventoryPolicyChange,\n          validation: this.props.validation,\n          disabled: true,\n          helpText: \"Backorder allowance is now controlled by options\",\n          i18nKeyHelpText: \"admin.helpText.variantBackorderToggle\",\n          style: {\n            backgroundColor: \"lightgrey\",\n            cursor: \"not-allowed\"\n          }\n        }));\n      }\n\n      return React.createElement(\"div\", {\n        className: \"col-sm-12\"\n      }, React.createElement(Components.Switch, {\n        i18nKeyLabel: \"productVariant.inventoryPolicy\",\n        i18nKeyOnLabel: \"productVariant.inventoryPolicy\",\n        name: \"inventoryPolicy\",\n        label: \"Allow backorder\",\n        onLabel: \"Allow backorder\",\n        checked: !this.state.inventoryPolicy,\n        onChange: this.handleInventoryPolicyChange,\n        validation: this.props.validation\n      }));\n    }\n\n    return renderInventoryPolicyField;\n  }();\n\n  _proto.renderQuantityField = function () {\n    function renderQuantityField() {\n      if (this.props.hasChildVariants(this.variant)) {\n        return React.createElement(\"div\", {\n          className: \"col-sm-6\"\n        }, React.createElement(Components.TextField, {\n          i18nKeyLabel: \"productVariant.inventoryQuantity\",\n          i18nKeyPlaceholder: \"0\",\n          placeholder: \"0\",\n          label: \"Quantity\",\n          type: \"number\",\n          name: \"inventoryQuantity\",\n          ref: \"inventoryQuantityInput\",\n          value: this.props.onUpdateQuantityField(this.variant),\n          style: {\n            backgroundColor: \"lightgrey\",\n            cursor: \"not-allowed\"\n          },\n          disabled: true,\n          helpText: \"Variant inventory is now controlled by options\",\n          i18nKeyHelpText: \"admin.helpText.variantInventoryQuantity\"\n        }));\n      }\n\n      return React.createElement(\"div\", {\n        className: \"col-sm-6\"\n      }, React.createElement(Components.TextField, {\n        i18nKeyLabel: \"productVariant.inventoryQuantity\",\n        i18nKeyPlaceholder: \"0\",\n        placeholder: \"0\",\n        label: \"Quantity\",\n        type: \"number\",\n        name: \"inventoryQuantity\",\n        ref: \"inventoryQuantityInput\",\n        value: this.variant.inventoryQuantity,\n        onChange: this.handleFieldChange,\n        onBlur: this.handleFieldBlur,\n        onReturnKeyDown: this.handleFieldBlur,\n        validation: this.props.validation,\n        helpText: \"Option inventory\",\n        i18nKeyHelpText: \"admin.helpText.optionInventoryQuantity\"\n      }));\n    }\n\n    return renderQuantityField;\n  }();\n\n  _proto.renderVariantFields = function () {\n    function renderVariantFields() {\n      var _this3 = this;\n\n      var cardName = \"variant-\" + this.variant._id;\n      var classNames = classnames({\n        \"variant-card\": true,\n        \"active\": this.isExpanded(cardName)\n      });\n      var currency = findCurrency(null, true);\n      return React.createElement(Components.CardGroup, null, React.createElement(Components.Card, {\n        className: classNames,\n        expandable: true,\n        expanded: this.isExpanded(cardName),\n        name: cardName,\n        onExpand: this.handleCardExpand\n      }, React.createElement(Components.CardHeader, {\n        actAsExpander: true,\n        i18nKeyTitle: \"productDetailEdit.variantDetails\",\n        title: \"Variant Details\",\n        isValid: this.props.validation.isValid\n      }, this.renderArchivedLabel(), React.createElement(Components.Button, {\n        icon: \"files-o\",\n        className: \"rui btn btn-default btn-clone-variant flat\",\n        tooltip: \"Duplicate\",\n        onClick: function () {\n          return _this3.props.cloneVariant(_this3.variant);\n        }\n      }), React.createElement(Components.VisibilityButton, {\n        onClick: function () {\n          return _this3.handleVariantVisibilityToggle(_this3.variant);\n        },\n        bezelStyle: \"flat\",\n        primary: false,\n        toggleOn: this.variant.isVisible\n      }), this.renderArchiveButton()), React.createElement(Components.CardBody, {\n        expandable: true\n      }, React.createElement(Components.TextField, {\n        i18nKeyLabel: \"productVariant.title\",\n        i18nKeyPlaceholder: \"productVariant.title\",\n        placeholder: \"Label\",\n        label: \"Label\",\n        name: \"title\",\n        ref: \"titleInput\",\n        value: this.variant.title,\n        onBlur: this.handleFieldBlur,\n        onChange: this.handleFieldChange,\n        onReturnKeyDown: this.handleFieldBlur,\n        validation: this.props.validation\n      }), React.createElement(Components.Select, {\n        clearable: false,\n        i18nKeyLabel: \"productVariant.originCountry\",\n        i18nKeyPlaceholder: \"productVariant.originCountry\",\n        label: \"Origin Country\",\n        name: \"originCountry\",\n        ref: \"countryOfOriginInput\",\n        options: this.props.countries,\n        onChange: this.handleSelectChange,\n        value: this.variant.originCountry\n      }), React.createElement(\"div\", {\n        className: \"row\"\n      }, React.createElement(\"div\", {\n        className: \"col-sm-6\"\n      }, React.createElement(Components.NumericInput, {\n        i18nKeyLabel: \"productVariant.price\",\n        i18nKeyPlaceholder: \"0.00\",\n        placeholder: \"0.00\",\n        label: \"Price\",\n        name: \"price\",\n        ref: \"priceInput\",\n        value: this.variant.price,\n        format: currency,\n        numericType: \"currency\",\n        style: this.props.greyDisabledFields(this.variant),\n        disabled: this.props.hasChildVariants(this.variant),\n        onBlur: this.handleFieldBlur,\n        onChange: this.handleFieldChange,\n        onReturnKeyDown: this.handleFieldBlur,\n        validation: this.props.validation\n      })), React.createElement(\"div\", {\n        className: \"col-sm-6\"\n      }, React.createElement(Components.NumericInput, {\n        i18nKeyLabel: \"productVariant.compareAtPrice\",\n        i18nKeyPlaceholder: \"0.00\",\n        placeholder: \"0.00\",\n        label: \"Compare At Price\",\n        name: \"compareAtPrice\",\n        ref: \"compareAtPriceInput\",\n        value: this.variant.compareAtPrice,\n        numericType: \"currency\",\n        format: currency,\n        onBlur: this.handleFieldBlur,\n        onChange: this.handleFieldChange,\n        onReturnKeyDown: this.handleFieldBlur,\n        validation: this.props.validation\n      }))), React.createElement(Components.Divider, null), React.createElement(\"div\", {\n        className: \"row\"\n      }, React.createElement(\"div\", {\n        className: \"col-sm-6\"\n      }, React.createElement(Components.TextField, {\n        i18nKeyLabel: \"productVariant.width\",\n        i18nKeyPlaceholder: \"0\",\n        placeholder: \"0\",\n        label: \"Width\",\n        name: \"width\",\n        ref: \"widthInput\",\n        value: this.variant.width,\n        onBlur: this.handleFieldBlur,\n        onChange: this.handleFieldChange,\n        onReturnKeyDown: this.handleFieldBlur,\n        validation: this.props.validation\n      })), React.createElement(\"div\", {\n        className: \"col-sm-6\"\n      }, React.createElement(Components.TextField, {\n        i18nKeyLabel: \"productVariant.length\",\n        i18nKeyPlaceholder: \"0\",\n        placeholder: \"0\",\n        label: \"Length\",\n        name: \"length\",\n        ref: \"lengthInput\",\n        value: this.variant.length,\n        onBlur: this.handleFieldBlur,\n        onChange: this.handleFieldChange,\n        onReturnKeyDown: this.handleFieldBlur,\n        validation: this.props.validation\n      }))), React.createElement(\"div\", {\n        className: \"row\"\n      }, React.createElement(\"div\", {\n        className: \"col-sm-6\"\n      }, React.createElement(Components.TextField, {\n        i18nKeyLabel: \"productVariant.height\",\n        i18nKeyPlaceholder: \"0\",\n        placeholder: \"0\",\n        label: \"Height\",\n        name: \"height\",\n        ref: \"heightInput\",\n        value: this.variant.height,\n        onBlur: this.handleFieldBlur,\n        onChange: this.handleFieldChange,\n        onReturnKeyDown: this.handleFieldBlur,\n        validation: this.props.validation\n      })), React.createElement(\"div\", {\n        className: \"col-sm-6\"\n      }, React.createElement(Components.TextField, {\n        i18nKeyLabel: \"productVariant.weight\",\n        i18nKeyPlaceholder: \"0\",\n        placeholder: \"0\",\n        label: \"Weight\",\n        name: \"weight\",\n        ref: \"weightInput\",\n        value: this.variant.weight,\n        onBlur: this.handleFieldBlur,\n        onChange: this.handleFieldChange,\n        onReturnKeyDown: this.handleFieldBlur,\n        validation: this.props.validation\n      }))))), React.createElement(Components.SettingsCard, {\n        enabled: this.state.taxable,\n        expandable: true,\n        i18nKeyTitle: \"productVariant.taxable\",\n        name: \"taxable\",\n        packageName: \"reaction-product-variant\",\n        saveOpenStateToPreferences: true,\n        showSwitch: true,\n        title: \"Taxable\",\n        onSwitchChange: this.handleCheckboxChange\n      }, this.renderTaxCodeField(), React.createElement(Components.TextField, {\n        i18nKeyLabel: \"productVariant.taxDescription\",\n        i18nKeyPlaceholder: \"productVariant.taxDescription\",\n        placeholder: \"Tax Description\",\n        label: \"Tax Description\",\n        name: \"taxDescription\",\n        ref: \"taxDescriptionInput\",\n        value: this.variant.taxDescription,\n        onBlur: this.handleFieldBlur,\n        onChange: this.handleFieldChange,\n        onReturnKeyDown: this.handleFieldBlur,\n        validation: this.props.validation\n      })), React.createElement(Components.SettingsCard, {\n        enabled: this.state.inventoryManagement,\n        expandable: true,\n        i18nKeyTitle: \"productVariant.inventoryManagement\",\n        name: \"inventoryManagement\",\n        packageName: \"reaction-product-variant\",\n        saveOpenStateToPreferences: true,\n        showSwitch: true,\n        title: \"Inventory Tracking\",\n        onSwitchChange: this.handleCheckboxChange\n      }, React.createElement(\"div\", {\n        className: \"row\"\n      }, this.renderQuantityField(), React.createElement(\"div\", {\n        className: \"col-sm-6\"\n      }, React.createElement(Components.TextField, {\n        i18nKeyLabel: \"productVariant.lowInventoryWarningThreshold\",\n        i18nKeyPlaceholder: \"0\",\n        placeholder: \"0\",\n        type: \"number\",\n        label: \"Warn At\",\n        name: \"lowInventoryWarningThreshold\",\n        ref: \"lowInventoryWarningThresholdInput\",\n        value: this.variant.lowInventoryWarningThreshold,\n        onBlur: this.handleFieldBlur,\n        onChange: this.handleFieldChange,\n        onReturnKeyDown: this.handleFieldBlur,\n        validation: this.props.validation\n      }))), React.createElement(\"div\", {\n        className: \"row\"\n      }, this.renderInventoryPolicyField())));\n    }\n\n    return renderVariantFields;\n  }();\n\n  _proto.renderOptionFields = function () {\n    function renderOptionFields() {\n      var _this4 = this;\n\n      var cardName = \"variant-\" + this.variant._id;\n      var classNames = classnames({\n        \"variant-option-card\": true,\n        \"active\": this.isExpanded(cardName)\n      });\n      var currency = findCurrency(null, true);\n      return React.createElement(Components.CardGroup, null, React.createElement(Components.Card, {\n        className: classNames,\n        expandable: true,\n        expanded: this.isExpanded(cardName),\n        name: cardName,\n        onExpand: this.handleCardExpand\n      }, React.createElement(Components.CardHeader, {\n        actAsExpander: true,\n        title: this.variant.optionTitle || \"Label is required\",\n        isValid: this.props.validation.isValid\n      }, this.renderArchivedLabel(), React.createElement(Components.Button, {\n        icon: \"files-o\",\n        className: \"rui btn btn-default btn-clone-variant flat\",\n        tooltip: \"Duplicate\",\n        onClick: function () {\n          return _this4.props.cloneVariant(_this4.variant);\n        }\n      }), React.createElement(Components.VisibilityButton, {\n        onClick: function () {\n          return _this4.handleVariantVisibilityToggle(_this4.variant);\n        },\n        bezelStyle: \"flat\",\n        primary: false,\n        toggleOn: this.variant.isVisible\n      }), this.renderArchiveButton()), React.createElement(Components.CardBody, {\n        expandable: true\n      }, React.createElement(Components.TextField, {\n        i18nKeyLabel: \"productVariant.optionTitle\",\n        i18nKeyPlaceholder: \"productVariant.optionTitle\",\n        placeholder: \"optionTitle\",\n        label: \"Short Label\",\n        name: \"optionTitle\",\n        ref: \"optionTitleInput\",\n        value: this.variant.optionTitle,\n        onBlur: this.handleFieldBlur,\n        onChange: this.handleFieldChange,\n        onReturnKeyDown: this.handleFieldBlur,\n        validation: this.props.validation,\n        helpText: \"Displayed on Product Detail Page\",\n        i18nKeyHelpText: \"admin.helpText.optionTitle\"\n      }), React.createElement(Components.TextField, {\n        i18nKeyLabel: \"productVariant.title\",\n        i18nKeyPlaceholder: \"productVariant.title\",\n        placeholder: \"Label\",\n        label: \"Label\",\n        name: \"title\",\n        ref: \"titleInput\",\n        value: this.variant.title,\n        onBlur: this.handleFieldBlur,\n        onChange: this.handleFieldChange,\n        onReturnKeyDown: this.handleFieldBlur,\n        validation: this.props.validation,\n        helpText: \"Displayed in cart, checkout, and orders\",\n        i18nKeyHelpText: \"admin.helpText.title\"\n      }), React.createElement(\"div\", {\n        className: \"row\"\n      }, React.createElement(\"div\", {\n        className: \"col-sm-6\"\n      }, React.createElement(Components.NumericInput, {\n        i18nKeyLabel: \"productVariant.price\",\n        i18nKeyPlaceholder: \"0.00\",\n        placeholder: \"0.00\",\n        label: \"Price\",\n        name: \"price\",\n        ref: \"priceInput\",\n        value: this.variant.price,\n        format: currency,\n        numericType: \"currency\",\n        style: this.props.greyDisabledFields(this.variant),\n        disabled: this.props.hasChildVariants(this.variant),\n        onBlur: this.handleFieldBlur,\n        onChange: this.handleFieldChange,\n        onReturnKeyDown: this.handleFieldBlur,\n        validation: this.props.validation,\n        helpText: \"Purchase price\",\n        i18nKeyHelpText: \"admin.helpText.price\"\n      })), React.createElement(\"div\", {\n        className: \"col-sm-6\"\n      }, React.createElement(Components.NumericInput, {\n        i18nKeyLabel: \"productVariant.compareAtPrice\",\n        i18nKeyPlaceholder: \"0.00\",\n        placeholder: \"0.00\",\n        label: \"Compare At Price\",\n        name: \"compareAtPrice\",\n        ref: \"compareAtPriceInput\",\n        value: this.variant.compareAtPrice,\n        format: currency,\n        numericType: \"currency\",\n        onBlur: this.handleFieldBlur,\n        onChange: this.handleFieldChange,\n        onReturnKeyDown: this.handleFieldBlur,\n        validation: this.props.validation,\n        helpText: \"Original price or MSRP\",\n        i18nKeyHelpText: \"admin.helpText.compareAtPrice\"\n      }))), React.createElement(\"div\", {\n        className: \"row\"\n      }, this.renderQuantityField(), this.renderInventoryPolicyField()), React.createElement(\"div\", {\n        className: \"row\"\n      }, React.createElement(\"div\", {\n        className: \"col-sm-6\"\n      }, React.createElement(Components.TextField, {\n        i18nKeyLabel: \"productVariant.width\",\n        i18nKeyPlaceholder: \"0\",\n        placeholder: \"0\",\n        label: \"Width\",\n        name: \"width\",\n        ref: \"widthInput\",\n        value: this.variant.width,\n        onBlur: this.handleFieldBlur,\n        onChange: this.handleFieldChange,\n        onReturnKeyDown: this.handleFieldBlur,\n        validation: this.props.validation\n      })), React.createElement(\"div\", {\n        className: \"col-sm-6\"\n      }, React.createElement(Components.TextField, {\n        i18nKeyLabel: \"productVariant.length\",\n        i18nKeyPlaceholder: \"0\",\n        placeholder: \"0\",\n        label: \"Length\",\n        name: \"length\",\n        ref: \"lengthInput\",\n        value: this.variant.length,\n        onBlur: this.handleFieldBlur,\n        onChange: this.handleFieldChange,\n        onReturnKeyDown: this.handleFieldBlur,\n        validation: this.props.validation\n      }))), React.createElement(\"div\", {\n        className: \"row\"\n      }, React.createElement(\"div\", {\n        className: \"col-sm-6\"\n      }, React.createElement(Components.TextField, {\n        i18nKeyLabel: \"productVariant.height\",\n        i18nKeyPlaceholder: \"0\",\n        placeholder: \"0\",\n        label: \"Height\",\n        name: \"height\",\n        ref: \"heightInput\",\n        value: this.variant.height,\n        onBlur: this.handleFieldBlur,\n        onChange: this.handleFieldChange,\n        onReturnKeyDown: this.handleFieldBlur,\n        validation: this.props.validation\n      })), React.createElement(\"div\", {\n        className: \"col-sm-6\"\n      }, React.createElement(Components.TextField, {\n        i18nKeyLabel: \"productVariant.weight\",\n        i18nKeyPlaceholder: \"0\",\n        placeholder: \"0\",\n        label: \"Weight\",\n        name: \"weight\",\n        ref: \"weightInput\",\n        value: this.variant.weight,\n        onBlur: this.handleFieldBlur,\n        onChange: this.handleFieldChange,\n        onReturnKeyDown: this.handleFieldBlur,\n        validation: this.props.validation\n      }))))));\n    }\n\n    return renderOptionFields;\n  }();\n\n  _proto.render = function () {\n    function render() {\n      if (this.props.type === \"option\") {\n        return React.createElement(\"div\", null, this.renderOptionFields());\n      }\n\n      return React.createElement(\"div\", null, this.renderVariantFields());\n    }\n\n    return render;\n  }();\n\n  (0, _createClass2.default)(VariantForm, [{\n    key: \"variant\",\n    get: function () {\n      return this.state.variant || this.props.variant || {};\n    }\n  }]);\n  return VariantForm;\n}(Component);\n\nVariantForm.propTypes = {\n  cloneVariant: PropTypes.func,\n  countries: PropTypes.arrayOf(PropTypes.object),\n  editFocus: PropTypes.oneOfType([PropTypes.string, PropTypes.arrayOf(PropTypes.string)]),\n  fetchTaxCodes: PropTypes.func,\n  greyDisabledFields: PropTypes.func,\n  hasChildVariants: PropTypes.func,\n  isDeleted: PropTypes.bool,\n  isProviderEnabled: PropTypes.func,\n  onCardExpand: PropTypes.func,\n  onFieldChange: PropTypes.func,\n  onUpdateQuantityField: PropTypes.func,\n  onVariantFieldSave: PropTypes.func,\n  onVisibilityButtonClick: PropTypes.func,\n  removeVariant: PropTypes.func,\n  restoreVariant: PropTypes.func,\n  type: PropTypes.string,\n  validation: PropTypes.object,\n  variant: PropTypes.object\n};\nmodule.exportDefault(VariantForm);","map":{"version":3,"sources":["imports/plugins/included/product-variant/components/variantForm.js"],"names":["_isEqual","module","watch","require","v","React","Component","PropTypes","classnames","Velocity","Components","findCurrency","fieldNames","fieldGroups","title","group","originCountry","compareAtPrice","price","width","length","height","weight","taxCode","taxDescription","inventoryQuantity","inventoryPolicy","lowInventoryWarningThreshold","VariantForm","props","handleFieldChange","event","value","field","setState","variant","handleFieldBlur","onVariantFieldSave","_id","state","handleSelectChange","handleCheckboxChange","handleInventoryPolicyChange","inverseValue","handleCardExpand","card","cardName","isExpanded","onCardExpand","undefined","handleVariantVisibilityToggle","onVisibilityButtonClick","groupName","expandedCard","editFocus","taxable","inventoryManagement","componentWillReceiveProps","nextProps","nextVariant","currentVariant","fieldName","animateFieldFlash","fieldGroupForFieldName","Array","isArray","fieldData","fieldRef","refs","input","isFieldValid","validation","flashColor","RunSequence","e","p","backgroundColor","o","duration","renderTaxCodeField","isProviderEnabled","fetchTaxCodes","renderArchiveButton","isDeleted","restoreVariant","removeVariant","renderArchivedLabel","renderInventoryPolicyField","hasChildVariants","cursor","renderQuantityField","onUpdateQuantityField","renderVariantFields","classNames","currency","isValid","cloneVariant","isVisible","countries","greyDisabledFields","renderOptionFields","optionTitle","render","type","propTypes","func","arrayOf","object","oneOfType","string","bool","onFieldChange","exportDefault"],"mappings":"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","sourcesContent":["import React, { Component } from \"react\";\nimport PropTypes from \"prop-types\";\nimport classnames from \"classnames\";\nimport _ from \"lodash\";\nimport Velocity from \"velocity-animate\";\nimport \"velocity-animate/velocity.ui\";\nimport { Components } from \"@reactioncommerce/reaction-components\";\nimport { findCurrency } from \"/client/api\";\n\nconst fieldNames = [\n  \"title\",\n  \"originCountry\",\n  \"compareAtPrice\",\n  \"price\",\n  \"width\",\n  \"length\",\n  \"height\",\n  \"weight\",\n  \"taxCode\",\n  \"taxDescription\",\n  \"inventoryQuantity\",\n  \"inventoryPolicy\",\n  \"lowInventoryWarningThreshold\"\n];\n\nconst fieldGroups = {\n  title: { group: \"variantDetails\" },\n  originCountry: { group: \"variantDetails\" },\n  compareAtPrice: { group: \"variantDetails\" },\n  price: { group: \"variantDetails\" },\n  width: { group: \"variantDetails\" },\n  length: { group: \"variantDetails\" },\n  height: { group: \"variantDetails\" },\n  weight: { group: \"variantDetails\" },\n  taxCode: { group: \"taxable\" },\n  taxDescription: { group: \"taxable\" },\n  inventoryQuantity: { group: \"inventoryManagement\" },\n  inventoryPolicy: { group: \"inventoryManagement\" },\n  lowInventoryWarningThreshold: { group: \"inventoryManagement\" }\n};\n\nclass VariantForm extends Component {\n  constructor(props) {\n    super(props);\n\n    this.state = {\n      expandedCard: props.editFocus,\n      variant: props.variant,\n      inventoryPolicy: props.variant.inventoryPolicy,\n      taxable: props.variant.taxable,\n      inventoryManagement: props.variant.inventoryManagement\n    };\n  }\n\n  componentWillReceiveProps(nextProps) {\n    const nextVariant = nextProps.variant || {};\n    const currentVariant = this.state.variant || {};\n\n    if (_.isEqual(nextVariant, currentVariant) === false) {\n      for (const fieldName of fieldNames) {\n        if (nextVariant[fieldName] !== currentVariant[fieldName]) {\n          if (fieldName !== \"taxCode\") {\n            this.animateFieldFlash(fieldName);\n          }\n        }\n      }\n\n      this.setState({\n        expandedCard: nextProps.editFocus,\n        inventoryManagement: nextProps.variant.inventoryManagement,\n        inventoryPolicy: nextProps.variant.inventoryPolicy,\n        taxable: nextProps.variant.taxable,\n        variant: nextProps.variant\n      });\n    }\n\n    this.setState({\n      expandedCard: nextProps.editFocus\n    });\n  }\n\n  fieldGroupForFieldName(field) {\n    // Other wise, if a field was passed\n    // const fieldName = this.state.viewProps.field;\n\n    let fieldName;\n\n    // If the field is an array of field name\n    if (Array.isArray(field) && field.length) {\n      // Use the first field name\n      [fieldName] = field;\n    } else {\n      fieldName = field;\n    }\n\n    const fieldData = fieldGroups[fieldName];\n\n    if (fieldData && fieldData.group) {\n      return fieldData.group;\n    }\n\n    return fieldName;\n  }\n\n  animateFieldFlash(fieldName) {\n    const fieldRef = this.refs[`${fieldName}Input`];\n\n    if (fieldRef) {\n      const { input } = fieldRef.refs;\n      const isFieldValid = this.props.validation.isFieldValid(fieldName);\n      const flashColor = isFieldValid ? \"#f0fff4\" : \"#ffeeef\";\n\n      Velocity.RunSequence([\n        { e: input, p: { backgroundColor: flashColor }, o: { duration: 200 } },\n        { e: input, p: { backgroundColor: \"#fff\" }, o: { duration: 100 } }\n      ]);\n    }\n  }\n\n  get variant() {\n    return this.state.variant || this.props.variant || {};\n  }\n\n  handleFieldChange = (event, value, field) => {\n    this.setState(({ variant }) => ({\n      variant: {\n        ...variant,\n        [field]: value\n      }\n    }));\n  }\n\n  handleFieldBlur = (event, value, field) => {\n    if (this.props.onVariantFieldSave) {\n      this.props.onVariantFieldSave(this.variant._id, field, value, this.state.variant);\n    }\n  }\n\n  handleSelectChange = (value, field) => {\n    this.setState(({ variant }) => ({\n      variant: {\n        ...variant,\n        [field]: value\n      }\n    }), () => {\n      if (this.props.onVariantFieldSave) {\n        this.props.onVariantFieldSave(this.variant._id, field, value, this.state.variant);\n      }\n    });\n  }\n\n  handleCheckboxChange = (event, value, field) => {\n    this.setState(({ variant }) => ({\n      variant: {\n        ...variant,\n        [field]: value\n      }\n    }));\n\n    this.handleFieldBlur(event, value, field);\n  }\n\n  handleInventoryPolicyChange = (event, value, field) => {\n    /*\n    Due to some confusing verbiage on how inventoryPolicy works / is displayed, we need to handle this field\n    differently than we handle the other checkboxes in this component. Specifically, we display the opposite value of\n    what the actual field value is. Because this is a checkbox, that means that the opposite value is actually the\n    field value as well, not just a display value, so we need to reverse the boolean value when it gets passed into\n    this function before we send it to the server to update the data. Other than reversing the value, this function\n    is the same as `handleCheckboxChange`.\n    */\n\n    const inverseValue = !value;\n\n    this.setState(({ variant }) => ({\n      variant: {\n        ...variant,\n        [field]: inverseValue\n      }\n    }));\n\n\n    this.handleFieldBlur(event, inverseValue, field);\n  }\n\n  handleCardExpand = (event, card, cardName, isExpanded) => {\n    if (typeof this.props.onCardExpand === \"function\") {\n      this.props.onCardExpand(isExpanded ? cardName : undefined);\n    }\n  }\n\n  handleVariantVisibilityToggle = (variant) => this.props.onVisibilityButtonClick(variant)\n\n  isExpanded = (groupName) => this.state.expandedCard === groupName\n\n  renderTaxCodeField() {\n    if (this.props.isProviderEnabled()) {\n      return (\n        <Components.Select\n          clearable={false}\n          i18nKeyLabel=\"productVariant.taxCode\"\n          i18nKeyPlaceholder=\"productVariant.selectTaxCode\"\n          label=\"Tax Code\"\n          name=\"taxCode\"\n          ref=\"taxCodeInput\"\n          options={this.props.fetchTaxCodes()}\n          onChange={this.handleSelectChange}\n          value={this.variant.taxCode}\n        />\n      );\n    }\n    return (\n      <Components.TextField\n        i18nKeyLabel=\"productVariant.taxCode\"\n        i18nKeyPlaceholder=\"productVariant.selectTaxCode\"\n        placeholder=\"Select Tax Code\"\n        label=\"Tax Code\"\n        name=\"taxCode\"\n        ref=\"taxCodeInput\"\n        value={this.variant.taxCode}\n        onBlur={this.handleFieldBlur}\n        onChange={this.handleFieldChange}\n        onReturnKeyDown={this.handleFieldBlur}\n        validation={this.props.validation}\n      />\n    );\n  }\n\n  renderArchiveButton() {\n    if (this.props.isDeleted) {\n      return (\n        <Components.Button\n          icon=\"refresh\"\n          className=\"rui btn btn-default btn-restore-variant flat\"\n          tooltip=\"Restore\"\n          onClick={() => this.props.restoreVariant(this.variant)}\n        />\n      );\n    }\n    return (\n      <Components.Button\n        icon=\"archive\"\n        className=\"rui btn btn-default btn-remove-variant flat\"\n        tooltip=\"Archive\"\n        onClick={() => this.props.removeVariant(this.variant)}\n      />\n    );\n  }\n\n  renderArchivedLabel() {\n    if (this.props.isDeleted) {\n      return (\n        <div className=\"panel-subheading\">\n          <span className=\"badge badge-danger\" data-i18n=\"app.archived\">\n            <span>Archived</span>\n          </span>\n        </div>\n      );\n    }\n  }\n\n  renderInventoryPolicyField() {\n    if (this.props.hasChildVariants(this.variant)) {\n      return (\n        <div className=\"col-sm-12\">\n          <Components.Switch\n            i18nKeyLabel=\"productVariant.inventoryPolicy\"\n            i18nKeyOnLabel=\"productVariant.inventoryPolicy\"\n            name=\"inventoryPolicy\"\n            label={\"Allow backorder\"}\n            onLabel={\"Allow backorder\"}\n            checked={!this.state.inventoryPolicy}\n            onChange={this.handleInventoryPolicyChange}\n            validation={this.props.validation}\n            disabled={true}\n            helpText={\"Backorder allowance is now controlled by options\"}\n            i18nKeyHelpText={\"admin.helpText.variantBackorderToggle\"}\n            style={{ backgroundColor: \"lightgrey\", cursor: \"not-allowed\" }}\n          />\n        </div>\n      );\n    }\n\n    return (\n      <div className=\"col-sm-12\">\n        <Components.Switch\n          i18nKeyLabel=\"productVariant.inventoryPolicy\"\n          i18nKeyOnLabel=\"productVariant.inventoryPolicy\"\n          name=\"inventoryPolicy\"\n          label={\"Allow backorder\"}\n          onLabel={\"Allow backorder\"}\n          checked={!this.state.inventoryPolicy}\n          onChange={this.handleInventoryPolicyChange}\n          validation={this.props.validation}\n        />\n      </div>\n    );\n  }\n\n  renderQuantityField() {\n    if (this.props.hasChildVariants(this.variant)) {\n      return (\n        <div className=\"col-sm-6\">\n          <Components.TextField\n            i18nKeyLabel=\"productVariant.inventoryQuantity\"\n            i18nKeyPlaceholder=\"0\"\n            placeholder=\"0\"\n            label=\"Quantity\"\n            type=\"number\"\n            name=\"inventoryQuantity\"\n            ref=\"inventoryQuantityInput\"\n            value={this.props.onUpdateQuantityField(this.variant)}\n            style={{ backgroundColor: \"lightgrey\", cursor: \"not-allowed\" }}\n            disabled={true}\n            helpText={\"Variant inventory is now controlled by options\"}\n            i18nKeyHelpText={\"admin.helpText.variantInventoryQuantity\"}\n          />\n        </div>\n      );\n    }\n\n    return (\n      <div className=\"col-sm-6\">\n        <Components.TextField\n          i18nKeyLabel=\"productVariant.inventoryQuantity\"\n          i18nKeyPlaceholder=\"0\"\n          placeholder=\"0\"\n          label=\"Quantity\"\n          type=\"number\"\n          name=\"inventoryQuantity\"\n          ref=\"inventoryQuantityInput\"\n          value={this.variant.inventoryQuantity}\n          onChange={this.handleFieldChange}\n          onBlur={this.handleFieldBlur}\n          onReturnKeyDown={this.handleFieldBlur}\n          validation={this.props.validation}\n          helpText={\"Option inventory\"}\n          i18nKeyHelpText={\"admin.helpText.optionInventoryQuantity\"}\n        />\n      </div>\n    );\n  }\n\n  renderVariantFields() {\n    const cardName = `variant-${this.variant._id}`;\n\n    const classNames = classnames({\n      \"variant-card\": true,\n      \"active\": this.isExpanded(cardName)\n    });\n\n    const currency = findCurrency(null, true);\n\n    return (\n      <Components.CardGroup>\n        <Components.Card\n          className={classNames}\n          expandable={true}\n          expanded={this.isExpanded(cardName)}\n          name={cardName}\n          onExpand={this.handleCardExpand}\n        >\n          <Components.CardHeader\n            actAsExpander={true}\n            i18nKeyTitle=\"productDetailEdit.variantDetails\"\n            title=\"Variant Details\"\n            isValid={this.props.validation.isValid}\n          >\n            {this.renderArchivedLabel()}\n            <Components.Button\n              icon=\"files-o\"\n              className=\"rui btn btn-default btn-clone-variant flat\"\n              tooltip=\"Duplicate\"\n              onClick={() => this.props.cloneVariant(this.variant)}\n            />\n            <Components.VisibilityButton\n              onClick={() => this.handleVariantVisibilityToggle(this.variant)}\n              bezelStyle=\"flat\"\n              primary={false}\n              toggleOn={this.variant.isVisible}\n            />\n            {this.renderArchiveButton()}\n          </Components.CardHeader>\n          <Components.CardBody expandable={true}>\n            <Components.TextField\n              i18nKeyLabel=\"productVariant.title\"\n              i18nKeyPlaceholder=\"productVariant.title\"\n              placeholder=\"Label\"\n              label=\"Label\"\n              name=\"title\"\n              ref=\"titleInput\"\n              value={this.variant.title}\n              onBlur={this.handleFieldBlur}\n              onChange={this.handleFieldChange}\n              onReturnKeyDown={this.handleFieldBlur}\n              validation={this.props.validation}\n            />\n            <Components.Select\n              clearable={false}\n              i18nKeyLabel=\"productVariant.originCountry\"\n              i18nKeyPlaceholder=\"productVariant.originCountry\"\n              label=\"Origin Country\"\n              name=\"originCountry\"\n              ref=\"countryOfOriginInput\"\n              options={this.props.countries}\n              onChange={this.handleSelectChange}\n              value={this.variant.originCountry}\n            />\n            <div className=\"row\">\n              <div className=\"col-sm-6\">\n                <Components.NumericInput\n                  i18nKeyLabel=\"productVariant.price\"\n                  i18nKeyPlaceholder=\"0.00\"\n                  placeholder=\"0.00\"\n                  label=\"Price\"\n                  name=\"price\"\n                  ref=\"priceInput\"\n                  value={this.variant.price}\n                  format={currency}\n                  numericType=\"currency\"\n                  style={this.props.greyDisabledFields(this.variant)}\n                  disabled={this.props.hasChildVariants(this.variant)}\n                  onBlur={this.handleFieldBlur}\n                  onChange={this.handleFieldChange}\n                  onReturnKeyDown={this.handleFieldBlur}\n                  validation={this.props.validation}\n                />\n              </div>\n              <div className=\"col-sm-6\">\n                <Components.NumericInput\n                  i18nKeyLabel=\"productVariant.compareAtPrice\"\n                  i18nKeyPlaceholder=\"0.00\"\n                  placeholder=\"0.00\"\n                  label=\"Compare At Price\"\n                  name=\"compareAtPrice\"\n                  ref=\"compareAtPriceInput\"\n                  value={this.variant.compareAtPrice}\n                  numericType=\"currency\"\n                  format={currency}\n                  onBlur={this.handleFieldBlur}\n                  onChange={this.handleFieldChange}\n                  onReturnKeyDown={this.handleFieldBlur}\n                  validation={this.props.validation}\n                />\n              </div>\n            </div>\n            <Components.Divider />\n            <div className=\"row\">\n              <div className=\"col-sm-6\">\n                <Components.TextField\n                  i18nKeyLabel=\"productVariant.width\"\n                  i18nKeyPlaceholder=\"0\"\n                  placeholder=\"0\"\n                  label=\"Width\"\n                  name=\"width\"\n                  ref=\"widthInput\"\n                  value={this.variant.width}\n                  onBlur={this.handleFieldBlur}\n                  onChange={this.handleFieldChange}\n                  onReturnKeyDown={this.handleFieldBlur}\n                  validation={this.props.validation}\n                />\n              </div>\n              <div className=\"col-sm-6\">\n                <Components.TextField\n                  i18nKeyLabel=\"productVariant.length\"\n                  i18nKeyPlaceholder=\"0\"\n                  placeholder=\"0\"\n                  label=\"Length\"\n                  name=\"length\"\n                  ref=\"lengthInput\"\n                  value={this.variant.length}\n                  onBlur={this.handleFieldBlur}\n                  onChange={this.handleFieldChange}\n                  onReturnKeyDown={this.handleFieldBlur}\n                  validation={this.props.validation}\n                />\n              </div>\n            </div>\n\n            <div className=\"row\">\n              <div className=\"col-sm-6\">\n                <Components.TextField\n                  i18nKeyLabel=\"productVariant.height\"\n                  i18nKeyPlaceholder=\"0\"\n                  placeholder=\"0\"\n                  label=\"Height\"\n                  name=\"height\"\n                  ref=\"heightInput\"\n                  value={this.variant.height}\n                  onBlur={this.handleFieldBlur}\n                  onChange={this.handleFieldChange}\n                  onReturnKeyDown={this.handleFieldBlur}\n                  validation={this.props.validation}\n                />\n              </div>\n              <div className=\"col-sm-6\">\n                <Components.TextField\n                  i18nKeyLabel=\"productVariant.weight\"\n                  i18nKeyPlaceholder=\"0\"\n                  placeholder=\"0\"\n                  label=\"Weight\"\n                  name=\"weight\"\n                  ref=\"weightInput\"\n                  value={this.variant.weight}\n                  onBlur={this.handleFieldBlur}\n                  onChange={this.handleFieldChange}\n                  onReturnKeyDown={this.handleFieldBlur}\n                  validation={this.props.validation}\n                />\n              </div>\n            </div>\n          </Components.CardBody>\n        </Components.Card>\n\n        <Components.SettingsCard\n          enabled={this.state.taxable}\n          expandable={true}\n          i18nKeyTitle=\"productVariant.taxable\"\n          name=\"taxable\"\n          packageName={\"reaction-product-variant\"}\n          saveOpenStateToPreferences={true}\n          showSwitch={true}\n          title=\"Taxable\"\n          onSwitchChange={this.handleCheckboxChange}\n        >\n          {this.renderTaxCodeField()}\n          <Components.TextField\n            i18nKeyLabel=\"productVariant.taxDescription\"\n            i18nKeyPlaceholder=\"productVariant.taxDescription\"\n            placeholder=\"Tax Description\"\n            label=\"Tax Description\"\n            name=\"taxDescription\"\n            ref=\"taxDescriptionInput\"\n            value={this.variant.taxDescription}\n            onBlur={this.handleFieldBlur}\n            onChange={this.handleFieldChange}\n            onReturnKeyDown={this.handleFieldBlur}\n            validation={this.props.validation}\n          />\n        </Components.SettingsCard>\n\n        <Components.SettingsCard\n          enabled={this.state.inventoryManagement}\n          expandable={true}\n          i18nKeyTitle=\"productVariant.inventoryManagement\"\n          name=\"inventoryManagement\"\n          packageName={\"reaction-product-variant\"}\n          saveOpenStateToPreferences={true}\n          showSwitch={true}\n          title=\"Inventory Tracking\"\n          onSwitchChange={this.handleCheckboxChange}\n        >\n          <div className=\"row\">\n            {this.renderQuantityField()}\n            <div className=\"col-sm-6\">\n              <Components.TextField\n                i18nKeyLabel=\"productVariant.lowInventoryWarningThreshold\"\n                i18nKeyPlaceholder=\"0\"\n                placeholder=\"0\"\n                type=\"number\"\n                label=\"Warn At\"\n                name=\"lowInventoryWarningThreshold\"\n                ref=\"lowInventoryWarningThresholdInput\"\n                value={this.variant.lowInventoryWarningThreshold}\n                onBlur={this.handleFieldBlur}\n                onChange={this.handleFieldChange}\n                onReturnKeyDown={this.handleFieldBlur}\n                validation={this.props.validation}\n              />\n            </div>\n          </div>\n          <div className=\"row\">\n            {this.renderInventoryPolicyField()}\n          </div>\n        </Components.SettingsCard>\n      </Components.CardGroup>\n    );\n  }\n\n\n  renderOptionFields() {\n    const cardName = `variant-${this.variant._id}`;\n\n    const classNames = classnames({\n      \"variant-option-card\": true,\n      \"active\": this.isExpanded(cardName)\n    });\n\n    const currency = findCurrency(null, true);\n\n    return (\n      <Components.CardGroup>\n        <Components.Card\n          className={classNames}\n          expandable={true}\n          expanded={this.isExpanded(cardName)}\n          name={cardName}\n          onExpand={this.handleCardExpand}\n        >\n          <Components.CardHeader\n            actAsExpander={true}\n            title={this.variant.optionTitle || \"Label is required\"}\n            isValid={this.props.validation.isValid}\n          >\n            {this.renderArchivedLabel()}\n            <Components.Button\n              icon=\"files-o\"\n              className=\"rui btn btn-default btn-clone-variant flat\"\n              tooltip=\"Duplicate\"\n              onClick={() => this.props.cloneVariant(this.variant)}\n            />\n            <Components.VisibilityButton\n              onClick={() => this.handleVariantVisibilityToggle(this.variant)}\n              bezelStyle=\"flat\"\n              primary={false}\n              toggleOn={this.variant.isVisible}\n            />\n            {this.renderArchiveButton()}\n          </Components.CardHeader>\n          <Components.CardBody expandable={true}>\n            <Components.TextField\n              i18nKeyLabel=\"productVariant.optionTitle\"\n              i18nKeyPlaceholder=\"productVariant.optionTitle\"\n              placeholder=\"optionTitle\"\n              label=\"Short Label\"\n              name=\"optionTitle\"\n              ref=\"optionTitleInput\"\n              value={this.variant.optionTitle}\n              onBlur={this.handleFieldBlur}\n              onChange={this.handleFieldChange}\n              onReturnKeyDown={this.handleFieldBlur}\n              validation={this.props.validation}\n              helpText={\"Displayed on Product Detail Page\"}\n              i18nKeyHelpText={\"admin.helpText.optionTitle\"}\n            />\n            <Components.TextField\n              i18nKeyLabel=\"productVariant.title\"\n              i18nKeyPlaceholder=\"productVariant.title\"\n              placeholder=\"Label\"\n              label=\"Label\"\n              name=\"title\"\n              ref=\"titleInput\"\n              value={this.variant.title}\n              onBlur={this.handleFieldBlur}\n              onChange={this.handleFieldChange}\n              onReturnKeyDown={this.handleFieldBlur}\n              validation={this.props.validation}\n              helpText={\"Displayed in cart, checkout, and orders\"}\n              i18nKeyHelpText={\"admin.helpText.title\"}\n            />\n            <div className=\"row\">\n              <div className=\"col-sm-6\">\n                <Components.NumericInput\n                  i18nKeyLabel=\"productVariant.price\"\n                  i18nKeyPlaceholder=\"0.00\"\n                  placeholder=\"0.00\"\n                  label=\"Price\"\n                  name=\"price\"\n                  ref=\"priceInput\"\n                  value={this.variant.price}\n                  format={currency}\n                  numericType=\"currency\"\n                  style={this.props.greyDisabledFields(this.variant)}\n                  disabled={this.props.hasChildVariants(this.variant)}\n                  onBlur={this.handleFieldBlur}\n                  onChange={this.handleFieldChange}\n                  onReturnKeyDown={this.handleFieldBlur}\n                  validation={this.props.validation}\n                  helpText={\"Purchase price\"}\n                  i18nKeyHelpText={\"admin.helpText.price\"}\n                />\n              </div>\n              <div className=\"col-sm-6\">\n                <Components.NumericInput\n                  i18nKeyLabel=\"productVariant.compareAtPrice\"\n                  i18nKeyPlaceholder=\"0.00\"\n                  placeholder=\"0.00\"\n                  label=\"Compare At Price\"\n                  name=\"compareAtPrice\"\n                  ref=\"compareAtPriceInput\"\n                  value={this.variant.compareAtPrice}\n                  format={currency}\n                  numericType=\"currency\"\n                  onBlur={this.handleFieldBlur}\n                  onChange={this.handleFieldChange}\n                  onReturnKeyDown={this.handleFieldBlur}\n                  validation={this.props.validation}\n                  helpText={\"Original price or MSRP\"}\n                  i18nKeyHelpText={\"admin.helpText.compareAtPrice\"}\n                />\n              </div>\n            </div>\n\n            <div className=\"row\">\n              {this.renderQuantityField()}\n              {this.renderInventoryPolicyField()}\n            </div>\n            <div className=\"row\">\n              <div className=\"col-sm-6\">\n                <Components.TextField\n                  i18nKeyLabel=\"productVariant.width\"\n                  i18nKeyPlaceholder=\"0\"\n                  placeholder=\"0\"\n                  label=\"Width\"\n                  name=\"width\"\n                  ref=\"widthInput\"\n                  value={this.variant.width}\n                  onBlur={this.handleFieldBlur}\n                  onChange={this.handleFieldChange}\n                  onReturnKeyDown={this.handleFieldBlur}\n                  validation={this.props.validation}\n                />\n              </div>\n              <div className=\"col-sm-6\">\n                <Components.TextField\n                  i18nKeyLabel=\"productVariant.length\"\n                  i18nKeyPlaceholder=\"0\"\n                  placeholder=\"0\"\n                  label=\"Length\"\n                  name=\"length\"\n                  ref=\"lengthInput\"\n                  value={this.variant.length}\n                  onBlur={this.handleFieldBlur}\n                  onChange={this.handleFieldChange}\n                  onReturnKeyDown={this.handleFieldBlur}\n                  validation={this.props.validation}\n                />\n              </div>\n            </div>\n\n            <div className=\"row\">\n              <div className=\"col-sm-6\">\n                <Components.TextField\n                  i18nKeyLabel=\"productVariant.height\"\n                  i18nKeyPlaceholder=\"0\"\n                  placeholder=\"0\"\n                  label=\"Height\"\n                  name=\"height\"\n                  ref=\"heightInput\"\n                  value={this.variant.height}\n                  onBlur={this.handleFieldBlur}\n                  onChange={this.handleFieldChange}\n                  onReturnKeyDown={this.handleFieldBlur}\n                  validation={this.props.validation}\n                />\n              </div>\n              <div className=\"col-sm-6\">\n                <Components.TextField\n                  i18nKeyLabel=\"productVariant.weight\"\n                  i18nKeyPlaceholder=\"0\"\n                  placeholder=\"0\"\n                  label=\"Weight\"\n                  name=\"weight\"\n                  ref=\"weightInput\"\n                  value={this.variant.weight}\n                  onBlur={this.handleFieldBlur}\n                  onChange={this.handleFieldChange}\n                  onReturnKeyDown={this.handleFieldBlur}\n                  validation={this.props.validation}\n                />\n              </div>\n            </div>\n          </Components.CardBody>\n        </Components.Card>\n      </Components.CardGroup>\n    );\n  }\n\n  render() {\n    if (this.props.type === \"option\") {\n      return (\n        <div>\n          {this.renderOptionFields()}\n        </div>\n      );\n    }\n    return (\n      <div>\n        {this.renderVariantFields()}\n      </div>\n    );\n  }\n}\n\nVariantForm.propTypes = {\n  cloneVariant: PropTypes.func,\n  countries: PropTypes.arrayOf(PropTypes.object),\n  editFocus: PropTypes.oneOfType([PropTypes.string, PropTypes.arrayOf(PropTypes.string)]),\n  fetchTaxCodes: PropTypes.func,\n  greyDisabledFields: PropTypes.func,\n  hasChildVariants: PropTypes.func,\n  isDeleted: PropTypes.bool,\n  isProviderEnabled: PropTypes.func,\n  onCardExpand: PropTypes.func,\n  onFieldChange: PropTypes.func,\n  onUpdateQuantityField: PropTypes.func,\n  onVariantFieldSave: PropTypes.func,\n  onVisibilityButtonClick: PropTypes.func,\n  removeVariant: PropTypes.func,\n  restoreVariant: PropTypes.func,\n  type: PropTypes.string,\n  validation: PropTypes.object,\n  variant: PropTypes.object\n};\n\nexport default VariantForm;\n"]},"sourceType":"script","hash":"f12b5d11d85854d9caed2e9ccc9e69a06883728a"}
