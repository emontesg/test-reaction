{"metadata":{},"options":{"plugins":[{"key":"base$0$0","visitor":{"Program":{"enter":[null]},"_exploded":true,"_verified":true},"options":{"generateLetDeclarations":true,"enforceStrictMode":false}},{"key":"transform-meteor-dynamic-import","visitor":{"_exploded":{},"_verified":{},"CallExpression":{"enter":[null]}},"options":{}},{"key":"base$0$2","visitor":{"CallExpression":{"enter":[null]},"BinaryExpression":{"enter":[null]},"MemberExpression":{"enter":[null],"exit":[null]},"_exploded":true,"_verified":true,"Identifier":{"enter":[null]},"JSXIdentifier":{"enter":[null]}},"options":{"polyfill":false,"useBuiltIns":false}},{"key":"base$0$3","visitor":{"_exploded":{},"_verified":{},"ClassDeclaration":{"enter":[null]},"ClassExpression":{"enter":[null]}},"options":{"loose":true}},{"key":"base$0$4","visitor":{"FunctionExpression":{"exit":[null]},"_exploded":true,"_verified":true},"options":{}},{"key":"base$0$5","visitor":{"ForInStatement":{"enter":[null]},"_exploded":true,"_verified":true},"options":{}},{"key":"base$0$6","visitor":{"Program":{"exit":[null]},"_exploded":true,"_verified":true},"options":{"allowTopLevelThis":true,"strictMode":false,"loose":true}},{"key":"base$0$1$0","visitor":{"_exploded":{},"_verified":{},"JSXNamespacedName":{"enter":[null]},"JSXElement":{"exit":[null]},"JSXFragment":{"exit":[null]},"Program":{"enter":[null],"exit":[null]},"JSXAttribute":{"enter":[null]}},"options":{"pragma":"React.createElement","pragmaFrag":"React.Fragment","throwIfNamespace":true,"useBuiltIns":false}},{"key":"base$0$1$1","visitor":{"_exploded":true,"_verified":true},"options":{}},{"key":"base$0$1$2","visitor":{"ExportDefaultDeclaration":{"enter":[null]},"CallExpression":{"enter":[null]},"_exploded":true,"_verified":true},"options":{}},{"key":"base$0$0$0","visitor":{"_exploded":true,"_verified":true},"options":{}},{"key":"base$0$0$1","visitor":{"_exploded":true,"_verified":true},"options":{}},{"key":"base$0$0$2","visitor":{"ArrowFunctionExpression":{"enter":[null]},"_exploded":true,"_verified":true},"options":{}},{"key":"base$0$0$3","visitor":{"BlockStatement":{"enter":[null]},"SwitchCase":{"enter":[null]},"_exploded":true,"_verified":true},"options":{}},{"key":"base$0$0$4","visitor":{"VariableDeclaration":{"enter":[null]},"CatchClause":{"enter":[null]},"_exploded":true,"BlockStatement":{"enter":[null]},"SwitchStatement":{"enter":[null]},"Program":{"enter":[null]},"_verified":true,"DoWhileStatement":{"enter":[null]},"ForInStatement":{"enter":[null]},"ForStatement":{"enter":[null]},"WhileStatement":{"enter":[null]},"ForOfStatement":{"enter":[null]}},"options":{}},{"key":"base$0$0$5","visitor":{"ExportDefaultDeclaration":{"enter":[null]},"ClassDeclaration":{"enter":[null]},"ClassExpression":{"enter":[null]},"_exploded":true,"_verified":true},"options":{"loose":true}},{"key":"base$0$0$6","visitor":{"ObjectExpression":{"exit":[null]},"_exploded":true,"_verified":true},"options":{"loose":true}},{"key":"base$0$0$7","visitor":{"ExportNamedDeclaration":{"enter":[null]},"CatchClause":{"enter":[null]},"AssignmentExpression":{"enter":[null]},"VariableDeclaration":{"enter":[null]},"_exploded":true,"_verified":true,"ForInStatement":{"enter":[null]},"ForOfStatement":{"enter":[null]}},"options":{}},{"key":"base$0$0$8","visitor":{"ForOfStatement":{"enter":[null]},"_exploded":true,"_verified":true},"options":{"loose":true}},{"key":"base$0$0$9","visitor":{"NumericLiteral":{"enter":[null]},"StringLiteral":{"enter":[null]},"_exploded":true,"_verified":true},"options":{}},{"key":"base$0$0$10","visitor":{"ObjectExpression":{"enter":[null]},"_exploded":true,"_verified":true},"options":{}},{"key":"base$0$0$11","visitor":{"_exploded":true,"_verified":true,"FunctionDeclaration":{"enter":[null]},"FunctionExpression":{"enter":[null]},"ObjectMethod":{"enter":[null]},"ArrowFunctionExpression":{"enter":[null]},"ClassMethod":{"enter":[null]}},"options":{}},{"key":"base$0$0$12","visitor":{"ObjectMethod":{"enter":[null]},"ObjectProperty":{"enter":[null]},"_exploded":true,"_verified":true},"options":{}},{"key":"base$0$0$13","visitor":{"ArrayExpression":{"enter":[null]},"CallExpression":{"enter":[null]},"NewExpression":{"enter":[null]},"_exploded":true,"_verified":true},"options":{}},{"key":"base$0$0$14","visitor":{"RegExpLiteral":{"enter":[null]},"_exploded":true,"_verified":true},"options":{}},{"key":"base$0$0$15","visitor":{"TaggedTemplateExpression":{"enter":[null]},"TemplateLiteral":{"enter":[null]},"_exploded":true,"_verified":true},"options":{"loose":true}},{"key":"base$0$0$16","visitor":{"UnaryExpression":{"enter":[null]},"_exploded":true,"_verified":true,"BlockStatement":{"enter":[null]},"CatchClause":{"enter":[null]},"DoWhileStatement":{"enter":[null]},"ForInStatement":{"enter":[null]},"ForStatement":{"enter":[null]},"FunctionDeclaration":{"enter":[null]},"FunctionExpression":{"enter":[null]},"Program":{"enter":[null]},"ObjectMethod":{"enter":[null]},"SwitchStatement":{"enter":[null]},"WhileStatement":{"enter":[null]},"ArrowFunctionExpression":{"enter":[null]},"ClassDeclaration":{"enter":[null]},"ClassExpression":{"enter":[null]},"ForOfStatement":{"enter":[null]},"ClassMethod":{"enter":[null]}},"options":{}},{"key":"base$0$0$17","visitor":{"RegExpLiteral":{"enter":[null]},"_exploded":true,"_verified":true},"options":{}},{"key":"base$0$0$18","visitor":{"_exploded":true,"_verified":true},"options":{}},{"key":"base$0$0$19","visitor":{"_exploded":{},"_verified":{},"VariableDeclarator":{"enter":[null]},"ExportNamedDeclaration":{"enter":[null]},"CatchClause":{"enter":[null]},"AssignmentExpression":{"enter":[null]},"ObjectExpression":{"enter":[null]},"FunctionDeclaration":{"enter":[null]},"FunctionExpression":{"enter":[null]},"ObjectMethod":{"enter":[null]},"ArrowFunctionExpression":{"enter":[null]},"ClassMethod":{"enter":[null]},"ForInStatement":{"enter":[null]},"ForOfStatement":{"enter":[null]}},"options":{}},{"key":"base$0$0$20","visitor":{"ObjectProperty":{"exit":[null]},"_exploded":true,"_verified":true},"options":{}},{"key":"base$0$0$21","visitor":{"_exploded":{},"_verified":{},"Program":{"enter":[null]},"ImportDeclaration":{"enter":[null,null]},"ClassProperty":{"enter":[null]},"AssignmentPattern":{"enter":[null]},"TypeCastExpression":{"enter":[null,null]},"ImportSpecifier":{"enter":[null]},"ClassDeclaration":{"enter":[null]},"ClassExpression":{"enter":[null]},"FunctionDeclaration":{"enter":[null]},"FunctionExpression":{"enter":[null]},"ObjectMethod":{"enter":[null]},"ArrowFunctionExpression":{"enter":[null]},"ClassMethod":{"enter":[null]},"AnyTypeAnnotation":{"enter":[null]},"ArrayTypeAnnotation":{"enter":[null]},"BooleanTypeAnnotation":{"enter":[null]},"BooleanLiteralTypeAnnotation":{"enter":[null]},"NullLiteralTypeAnnotation":{"enter":[null]},"ClassImplements":{"enter":[null]},"DeclareClass":{"enter":[null]},"DeclareFunction":{"enter":[null]},"DeclareInterface":{"enter":[null]},"DeclareModule":{"enter":[null]},"DeclareModuleExports":{"enter":[null]},"DeclareTypeAlias":{"enter":[null]},"DeclareOpaqueType":{"enter":[null]},"DeclareVariable":{"enter":[null]},"DeclareExportDeclaration":{"enter":[null]},"DeclareExportAllDeclaration":{"enter":[null]},"DeclaredPredicate":{"enter":[null]},"ExistsTypeAnnotation":{"enter":[null]},"FunctionTypeAnnotation":{"enter":[null]},"FunctionTypeParam":{"enter":[null]},"GenericTypeAnnotation":{"enter":[null]},"InferredPredicate":{"enter":[null]},"InterfaceExtends":{"enter":[null]},"InterfaceDeclaration":{"enter":[null]},"IntersectionTypeAnnotation":{"enter":[null]},"MixedTypeAnnotation":{"enter":[null]},"EmptyTypeAnnotation":{"enter":[null]},"NullableTypeAnnotation":{"enter":[null]},"NumberLiteralTypeAnnotation":{"enter":[null]},"NumberTypeAnnotation":{"enter":[null]},"ObjectTypeAnnotation":{"enter":[null]},"ObjectTypeCallProperty":{"enter":[null]},"ObjectTypeIndexer":{"enter":[null]},"ObjectTypeProperty":{"enter":[null]},"ObjectTypeSpreadProperty":{"enter":[null]},"OpaqueType":{"enter":[null]},"QualifiedTypeIdentifier":{"enter":[null]},"StringLiteralTypeAnnotation":{"enter":[null]},"StringTypeAnnotation":{"enter":[null]},"ThisTypeAnnotation":{"enter":[null]},"TupleTypeAnnotation":{"enter":[null]},"TypeofTypeAnnotation":{"enter":[null]},"TypeAlias":{"enter":[null]},"TypeAnnotation":{"enter":[null]},"TypeParameter":{"enter":[null]},"TypeParameterDeclaration":{"enter":[null]},"TypeParameterInstantiation":{"enter":[null]},"UnionTypeAnnotation":{"enter":[null]},"Variance":{"enter":[null]},"VoidTypeAnnotation":{"enter":[null]},"ExportAllDeclaration":{"enter":[null]},"ExportDefaultDeclaration":{"enter":[null]},"ExportNamedDeclaration":{"enter":[null]}},"options":{}},{"key":"base$0$0$22","visitor":{"AssignmentExpression":{"enter":[null]},"BinaryExpression":{"enter":[null]},"_exploded":true,"_verified":true},"options":{}},{"key":"base$0$0$23","visitor":{"_exploded":{},"_verified":{},"Program":{"enter":[null]}},"options":{}},{"key":"regenerator-transform","visitor":{"_exploded":true,"_verified":true,"FunctionDeclaration":{"exit":[null]},"FunctionExpression":{"exit":[null]},"ObjectMethod":{"exit":[null]},"ArrowFunctionExpression":{"exit":[null]},"ClassMethod":{"exit":[null]}},"options":{}}],"presets":[],"compact":false,"ast":true,"babelrc":false,"sourceFileName":"lib/collections/schemas/products.js","filename":"lib/collections/schemas/products.js","sourceMaps":true,"envName":"development","cwd":"/Users/estebandev/test-knowledge","passPerPreset":false,"parserOpts":{"sourceType":"module","sourceFileName":"lib/collections/schemas/products.js","plugins":["dynamicImport","classProperties","jsx","jsx","flow","asyncGenerators","objectRestSpread","objectRestSpread","flow","asyncGenerators"]},"generatorOpts":{"filename":"lib/collections/schemas/products.js","comments":true,"compact":false,"sourceMaps":true,"sourceFileName":"lib/collections/schemas/products.js"}},"code":"module.export({\n  VariantMedia: function () {\n    return VariantMedia;\n  },\n  ProductPosition: function () {\n    return ProductPosition;\n  },\n  ProductVariant: function () {\n    return ProductVariant;\n  },\n  PriceRange: function () {\n    return PriceRange;\n  },\n  Product: function () {\n    return Product;\n  }\n});\nvar SimpleSchema;\nmodule.watch(require(\"simpl-schema\"), {\n  \"default\": function (v) {\n    SimpleSchema = v;\n  }\n}, 0);\nvar check;\nmodule.watch(require(\"meteor/check\"), {\n  check: function (v) {\n    check = v;\n  }\n}, 1);\nvar Meteor;\nmodule.watch(require(\"meteor/meteor\"), {\n  Meteor: function (v) {\n    Meteor = v;\n  }\n}, 2);\nvar Random;\nmodule.watch(require(\"meteor/random\"), {\n  Random: function (v) {\n    Random = v;\n  }\n}, 3);\nvar Tracker;\nmodule.watch(require(\"meteor/tracker\"), {\n  Tracker: function (v) {\n    Tracker = v;\n  }\n}, 4);\nvar registerSchema;\nmodule.watch(require(\"@reactioncommerce/schemas\"), {\n  registerSchema: function (v) {\n    registerSchema = v;\n  }\n}, 5);\nvar ReactionProduct, getSlug;\nmodule.watch(require(\"../../api\"), {\n  ReactionProduct: function (v) {\n    ReactionProduct = v;\n  },\n  getSlug: function (v) {\n    getSlug = v;\n  }\n}, 6);\nvar createdAtAutoValue, shopIdAutoValue, shopDefaultCountry, updatedAtAutoValue;\nmodule.watch(require(\"./helpers\"), {\n  createdAtAutoValue: function (v) {\n    createdAtAutoValue = v;\n  },\n  shopIdAutoValue: function (v) {\n    shopIdAutoValue = v;\n  },\n  shopDefaultCountry: function (v) {\n    shopDefaultCountry = v;\n  },\n  updatedAtAutoValue: function (v) {\n    updatedAtAutoValue = v;\n  }\n}, 7);\nvar Event;\nmodule.watch(require(\"./event\"), {\n  Event: function (v) {\n    Event = v;\n  }\n}, 8);\nvar Metafield;\nmodule.watch(require(\"./metafield\"), {\n  Metafield: function (v) {\n    Metafield = v;\n  }\n}, 9);\nvar ShippingParcel;\nmodule.watch(require(\"./shipping\"), {\n  ShippingParcel: function (v) {\n    ShippingParcel = v;\n  }\n}, 10);\nvar Workflow;\nmodule.watch(require(\"./workflow\"), {\n  Workflow: function (v) {\n    Workflow = v;\n  }\n}, 11);\nvar VariantMedia = new SimpleSchema({\n  \"mediaId\": {\n    type: String,\n    optional: true\n  },\n  \"priority\": {\n    type: SimpleSchema.Integer,\n    optional: true\n  },\n  \"metafields\": {\n    type: Array,\n    optional: true\n  },\n  \"metafields.$\": {\n    type: Metafield\n  },\n  \"updatedAt\": {\n    type: Date,\n    optional: true\n  },\n  \"createdAt\": {\n    type: Date,\n    autoValue: createdAtAutoValue\n  }\n}, {\n  check: check,\n  tracker: Tracker\n});\nregisterSchema(\"VariantMedia\", VariantMedia);\n/**\n * @name ProductPosition\n * @memberof schemas\n * @type {SimpleSchema}\n * @property {String} tag optional\n * @property {Number} position optional\n * @property {Boolean} pinned optional\n * @property {Number} weight optional, default value: `0`\n * @property {Date} updatedAt required\n */\n\nvar ProductPosition = new SimpleSchema({\n  tag: {\n    type: String,\n    optional: true\n  },\n  position: {\n    type: SimpleSchema.Integer,\n    optional: true\n  },\n  pinned: {\n    type: Boolean,\n    optional: true\n  },\n  weight: {\n    type: SimpleSchema.Integer,\n    optional: true,\n    defaultValue: 0,\n    min: 0,\n    max: 3\n  },\n  updatedAt: {\n    type: Date\n  }\n}, {\n  check: check,\n  tracker: Tracker\n});\nregisterSchema(\"ProductPosition\", ProductPosition);\n/**\n * @name ProductVariant\n * @memberof schemas\n * @type {SimpleSchema}\n * @property {String} _id required, Variant ID\n * @property {String[]} ancestors, default value: `[]`\n * @property {Number} index optional, Variant position number in list. Keep array index for moving variants in a list.\n * @property {Boolean} isVisible, default value: `false`\n * @property {Boolean} isDeleted, default value: `false`\n * @property {String} barcode optional\n * @property {Number} compareAtPrice optional, Compare at price\n * @property {String} fulfillmentService optional, Fullfillment service\n * @property {Number} weight, default value: `0`\n * @property {Number} length optional, default value: `0`\n * @property {Number} width optional, default value: `0`\n * @property {Number} height optional, default value: `0`\n * @property {Boolean} inventoryManagement, default value: `true`\n * @property {Boolean} inventoryPolicy, default value: `false`, If disabled, item can be sold even if it not in stock.\n * @property {Number} lowInventoryWarningThreshold, default value: `0`, Warn of low inventory at this number\n * @property {Number} inventoryQuantity, default value: `0`\n * @property {Number} minOrderQuantity optional\n * @property {Boolean} isLowQuantity optional, true when at least 1 variant is below `lowInventoryWarningThreshold`\n * @property {Boolean} isSoldOut optional, denormalized field, indicates when all variants `inventoryQuantity` is 0\n * @property {Number} price, default value: `0.00`\n * @property {String} shopId required, Variant ShopId\n * @property {String} sku optional\n * @property {String} type, default value: `\"variant\"`\n * @property {Boolean} taxable, default value: `true`\n * @property {String} taxCode, default value: `\"0000\"`\n * @property {String} taxDescription optional\n * @property {String} title, Label for customers, default value: `\"\"`\n * @property {String} optionTitle, Option internal name, default value: `\"Untitled option\"`\n * @property {Metafield[]} metafields optional\n * @property {Date} createdAt optional\n * @property {Date} updatedAt optional\n * @property {Event[]} eventLog optional, Variant Event Log\n * @property {Workflow} workflow optional\n * @property {String} originCountry optional\n */\n\nvar ProductVariant = new SimpleSchema({\n  \"_id\": {\n    type: String,\n    label: \"Variant ID\"\n  },\n  \"ancestors\": {\n    type: Array,\n    defaultValue: []\n  },\n  \"ancestors.$\": {\n    type: String\n  },\n  \"index\": {\n    label: \"Variant position number in list\",\n    type: SimpleSchema.Integer,\n    optional: true\n  },\n  \"isVisible\": {\n    type: Boolean,\n    index: 1,\n    defaultValue: false\n  },\n  \"isDeleted\": {\n    type: Boolean,\n    index: 1,\n    defaultValue: false\n  },\n  \"barcode\": {\n    label: \"Barcode\",\n    type: String,\n    optional: true,\n    custom: function () {\n      if (Meteor.isClient) {\n        if (this.siblingField(\"type\").value === \"inventory\" && !this.value) {\n          return SimpleSchema.ErrorTypes.REQUIRED;\n        }\n      }\n    }\n  },\n  \"compareAtPrice\": {\n    label: \"Compare At Price\",\n    type: Number,\n    optional: true,\n    min: 0,\n    defaultValue: 0.00\n  },\n  \"weight\": {\n    label: \"Weight\",\n    type: Number,\n    min: 0,\n    optional: true,\n    defaultValue: 0,\n    custom: function () {\n      if (Meteor.isClient) {\n        if (!(this.siblingField(\"type\").value === \"inventory\" || this.value || this.value === 0)) {\n          return SimpleSchema.ErrorTypes.REQUIRED;\n        }\n      }\n    }\n  },\n  \"length\": {\n    label: \"Length\",\n    type: Number,\n    min: 0,\n    optional: true,\n    defaultValue: 0\n  },\n  \"width\": {\n    label: \"Width\",\n    type: Number,\n    min: 0,\n    optional: true,\n    defaultValue: 0\n  },\n  \"height\": {\n    label: \"Height\",\n    type: Number,\n    min: 0,\n    optional: true,\n    defaultValue: 0\n  },\n  \"inventoryManagement\": {\n    type: Boolean,\n    label: \"Inventory Tracking\",\n    optional: true,\n    defaultValue: true,\n    custom: function () {\n      if (Meteor.isClient) {\n        if (!(this.siblingField(\"type\").value === \"inventory\" || this.value || this.value === false)) {\n          return SimpleSchema.ErrorTypes.REQUIRED;\n        }\n      }\n    }\n  },\n  \"inventoryPolicy\": {\n    type: Boolean,\n    label: \"Deny when out of stock\",\n    optional: true,\n    defaultValue: false,\n    custom: function () {\n      if (Meteor.isClient) {\n        if (!(this.siblingField(\"type\").value === \"inventory\" || this.value || this.value === false)) {\n          return SimpleSchema.ErrorTypes.REQUIRED;\n        }\n      }\n    }\n  },\n  \"lowInventoryWarningThreshold\": {\n    type: SimpleSchema.Integer,\n    label: \"Warn at\",\n    min: 0,\n    optional: true,\n    defaultValue: 0\n  },\n  \"inventoryQuantity\": {\n    type: SimpleSchema.Integer,\n    label: \"Quantity\",\n    optional: true,\n    defaultValue: 0,\n    custom: function () {\n      if (Meteor.isClient) {\n        if (this.siblingField(\"type\").value !== \"inventory\") {\n          if (ReactionProduct.checkChildVariants(this.docId) === 0 && !this.value) {\n            return SimpleSchema.ErrorTypes.REQUIRED;\n          }\n        }\n      }\n    }\n  },\n  \"minOrderQuantity\": {\n    label: \"Minimum order quantity\",\n    type: SimpleSchema.Integer,\n    optional: true\n  },\n  \"isLowQuantity\": {\n    label: \"Indicates that the product quantity is too low\",\n    type: Boolean,\n    optional: true\n  },\n  \"isSoldOut\": {\n    label: \"Indicates when the product quantity is zero\",\n    type: Boolean,\n    optional: true\n  },\n  \"price\": {\n    label: \"Price\",\n    type: Number,\n    defaultValue: 0.00,\n    min: 0,\n    optional: true\n  },\n  \"shopId\": {\n    type: String,\n    autoValue: shopIdAutoValue,\n    index: 1,\n    label: \"Variant ShopId\"\n  },\n  \"sku\": {\n    label: \"SKU\",\n    type: String,\n    optional: true\n  },\n  \"type\": {\n    label: \"Type\",\n    type: String,\n    defaultValue: \"variant\"\n  },\n  \"taxable\": {\n    label: \"Taxable\",\n    type: Boolean,\n    defaultValue: true,\n    optional: true\n  },\n  \"taxCode\": {\n    label: \"Tax Code\",\n    type: String,\n    defaultValue: \"0000\",\n    optional: true\n  },\n  \"taxDescription\": {\n    type: String,\n    optional: true,\n    label: \"Tax Description\"\n  },\n  \"title\": {\n    label: \"Label\",\n    type: String,\n    defaultValue: \"\"\n  },\n  \"optionTitle\": {\n    label: \"Option\",\n    type: String,\n    optional: true,\n    defaultValue: \"Untitled Option\"\n  },\n  \"metafields\": {\n    type: Array,\n    optional: true\n  },\n  \"metafields.$\": {\n    type: Metafield\n  },\n  \"createdAt\": {\n    label: \"Created at\",\n    type: Date,\n    optional: true\n  },\n  \"updatedAt\": {\n    label: \"Updated at\",\n    type: Date,\n    optional: true\n  },\n  // TODO: REVIEW - Does this need to exist? Should we use workflow instead?\n  // Should it be called 'history' or something else instead?\n  // Should this go into the Logger instead? Is the logger robust enough for this?\n  \"eventLog\": {\n    label: \"Variant Event Log\",\n    type: Array,\n    optional: true\n  },\n  \"eventLog.$\": {\n    type: Event\n  },\n  \"workflow\": {\n    type: Workflow,\n    optional: true,\n    defaultValue: {}\n  },\n  \"originCountry\": {\n    type: String,\n    optional: true,\n    autoValue: shopDefaultCountry\n  }\n}, {\n  check: check,\n  tracker: Tracker\n});\nregisterSchema(\"ProductVariant\", ProductVariant);\n/**\n * @name PriceRange\n * @type {SimpleSchema}\n * @memberof schemas\n * @property {String} range, default value: `\"0.00\"`\n * @property {Number} min optional, default value: `0`\n * @property {Number} max optional, default value: `0`\n */\n\nvar PriceRange = new SimpleSchema({\n  range: {\n    type: String,\n    defaultValue: \"0.00\"\n  },\n  min: {\n    type: Number,\n    defaultValue: 0,\n    optional: true\n  },\n  max: {\n    type: Number,\n    defaultValue: 0,\n    optional: true\n  }\n}, {\n  check: check,\n  tracker: Tracker\n});\nregisterSchema(\"PriceRange\", PriceRange);\n/**\n * @name Product\n * @type {SimpleSchema}\n * @memberof schemas\n * @property {String} _id Product ID\n * @property {String[]} ancestors default value: `[]`\n * @property {String} shopId Product ShopID\n * @property {String} title Product Title\n * @property {String} pageTitle optional\n * @property {String} description optional\n * @property {String} productType optional\n * @property {String} originCountry optional\n * @property {String} type default value: `\"simple\"`\n * @property {String} vendor optional\n * @property {Metafield[]} metafields optional\n * @property {Object} positions ProductPosition\n * @property {PriceRange} price denormalized, object with range string, min and max\n * @property {Boolean} isLowQuantity denormalized, true when at least 1 variant is below `lowInventoryWarningThreshold`\n * @property {Boolean} isSoldOut denormalized, Indicates when all variants `inventoryQuantity` is zero\n * @property {Boolean} isBackorder denormalized, `true` if product not in stock, but customers anyway could order it\n * @property {Boolean} requiresShipping default value: `true`, Require a shipping address\n * @property {ShippingParcel} parcel optional\n * @property {String[]} hashtags optional\n * @property {String} twitterMsg optional\n * @property {String} facebookMsg optional\n * @property {String} googleplusMsg optional\n * @property {String} pinterestMsg optional\n * @property {String} metaDescription optional\n * @property {String} handle optional, slug\n * @property {Boolean} isDeleted, default value: `false`\n * @property {Boolean} isVisible, default value: `false`\n * @property {String} template, default value: `\"productDetailSimple\"`\n * @property {Date} createdAt required\n * @property {Date} updatedAt optional\n * @property {Date} publishedAt optional\n * @property {String} publishedScope optional\n * @property {Workflow} workflow optional\n */\n\nvar Product = new SimpleSchema({\n  \"_id\": {\n    type: String,\n    label: \"Product Id\"\n  },\n  \"ancestors\": {\n    type: Array,\n    defaultValue: []\n  },\n  \"ancestors.$\": {\n    type: String\n  },\n  \"shopId\": {\n    type: String,\n    autoValue: shopIdAutoValue,\n    index: 1,\n    label: \"Product ShopId\"\n  },\n  \"title\": {\n    type: String,\n    defaultValue: \"\",\n    label: \"Product Title\"\n  },\n  \"pageTitle\": {\n    type: String,\n    optional: true\n  },\n  \"description\": {\n    type: String,\n    optional: true\n  },\n  \"productType\": {\n    type: String,\n    optional: true\n  },\n  \"originCountry\": {\n    type: String,\n    optional: true,\n    autoValue: shopDefaultCountry\n  },\n  \"type\": {\n    label: \"Type\",\n    type: String,\n    defaultValue: \"simple\"\n  },\n  \"vendor\": {\n    type: String,\n    optional: true\n  },\n  \"metafields\": {\n    type: Array,\n    optional: true\n  },\n  \"metafields.$\": {\n    type: Metafield\n  },\n  \"positions\": {\n    type: Object,\n    // ProductPosition\n    blackbox: true,\n    optional: true\n  },\n  \"price\": {\n    label: \"Price\",\n    type: PriceRange\n  },\n  \"isLowQuantity\": {\n    label: \"Indicates that the product quantity is too low\",\n    type: Boolean,\n    optional: true\n  },\n  \"isSoldOut\": {\n    label: \"Indicates when the product quantity is zero\",\n    type: Boolean,\n    optional: true\n  },\n  \"isBackorder\": {\n    label: \"Indicates when the seller has allowed the sale of product which\" + \" is not in stock\",\n    type: Boolean,\n    optional: true\n  },\n  \"requiresShipping\": {\n    label: \"Require a shipping address\",\n    type: Boolean,\n    defaultValue: true,\n    optional: true\n  },\n  \"parcel\": {\n    type: ShippingParcel,\n    optional: true\n  },\n  \"hashtags\": {\n    type: Array,\n    optional: true,\n    index: 1\n  },\n  \"hashtags.$\": {\n    type: String\n  },\n  \"twitterMsg\": {\n    type: String,\n    optional: true,\n    max: 140\n  },\n  \"facebookMsg\": {\n    type: String,\n    optional: true,\n    max: 255\n  },\n  \"googleplusMsg\": {\n    type: String,\n    optional: true,\n    max: 255\n  },\n  \"pinterestMsg\": {\n    type: String,\n    optional: true,\n    max: 255\n  },\n  \"metaDescription\": {\n    type: String,\n    optional: true\n  },\n  \"handle\": {\n    type: String,\n    optional: true,\n    index: 1,\n    autoValue: function () {\n      var slug = getSlug(this.value);\n\n      if (!slug && this.siblingField(\"title\").value) {\n        slug = getSlug(this.siblingField(\"title\").value);\n      } else if (!slug) {\n        slug = this.siblingField(\"_id\").value || Random.id();\n      }\n\n      if (this.isInsert) {\n        return slug;\n      } else if (this.isUpsert) {\n        return {\n          $setOnInsert: slug\n        };\n      }\n    }\n  },\n  \"changedHandleWas\": {\n    type: String,\n    optional: true\n  },\n  \"isDeleted\": {\n    type: Boolean,\n    index: 1,\n    defaultValue: false\n  },\n  \"isVisible\": {\n    type: Boolean,\n    index: 1,\n    defaultValue: false\n  },\n  \"template\": {\n    label: \"Template\",\n    type: String,\n    defaultValue: \"productDetailSimple\"\n  },\n  \"createdAt\": {\n    type: Date,\n    autoValue: createdAtAutoValue\n  },\n  \"updatedAt\": {\n    type: Date,\n    autoValue: updatedAtAutoValue,\n    optional: true\n  },\n  \"publishedAt\": {\n    type: Date,\n    optional: true\n  },\n  \"publishedScope\": {\n    type: String,\n    optional: true\n  },\n  \"workflow\": {\n    type: Workflow,\n    optional: true,\n    defaultValue: {}\n  }\n}, {\n  check: check,\n  tracker: Tracker\n});\nregisterSchema(\"Product\", Product);","map":{"version":3,"sources":["lib/collections/schemas/products.js"],"names":["module","export","VariantMedia","ProductPosition","ProductVariant","PriceRange","Product","SimpleSchema","watch","require","v","check","Meteor","Random","Tracker","registerSchema","ReactionProduct","getSlug","createdAtAutoValue","shopIdAutoValue","shopDefaultCountry","updatedAtAutoValue","Event","Metafield","ShippingParcel","Workflow","type","String","optional","Integer","Array","Date","autoValue","tracker","tag","position","pinned","Boolean","weight","defaultValue","min","max","updatedAt","label","index","custom","isClient","siblingField","value","ErrorTypes","REQUIRED","Number","checkChildVariants","docId","range","Object","blackbox","slug","id","isInsert","isUpsert","$setOnInsert"],"mappings":"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","sourcesContent":["import SimpleSchema from \"simpl-schema\";\nimport { check } from \"meteor/check\";\nimport { Meteor } from \"meteor/meteor\";\nimport { Random } from \"meteor/random\";\nimport { Tracker } from \"meteor/tracker\";\nimport { registerSchema } from \"@reactioncommerce/schemas\";\nimport { ReactionProduct, getSlug } from \"/lib/api\";\nimport { createdAtAutoValue, shopIdAutoValue, shopDefaultCountry, updatedAtAutoValue } from \"./helpers\";\nimport { Event } from \"./event\";\nimport { Metafield } from \"./metafield\";\nimport { ShippingParcel } from \"./shipping\";\nimport { Workflow } from \"./workflow\";\n\n/**\n * @name VariantMedia\n * @memberof schemas\n * @type {SimpleSchema}\n * @property {String} mediaId optional\n * @property {Number} priority optional\n * @property {Metafield[]} metafields optional\n * @property {Date} updatedAt optional\n * @property {Date} createdAt required\n */\nexport const VariantMedia = new SimpleSchema({\n  \"mediaId\": {\n    type: String,\n    optional: true\n  },\n  \"priority\": {\n    type: SimpleSchema.Integer,\n    optional: true\n  },\n  \"metafields\": {\n    type: Array,\n    optional: true\n  },\n  \"metafields.$\": {\n    type: Metafield\n  },\n  \"updatedAt\": {\n    type: Date,\n    optional: true\n  },\n  \"createdAt\": {\n    type: Date,\n    autoValue: createdAtAutoValue\n  }\n}, { check, tracker: Tracker });\n\nregisterSchema(\"VariantMedia\", VariantMedia);\n\n/**\n * @name ProductPosition\n * @memberof schemas\n * @type {SimpleSchema}\n * @property {String} tag optional\n * @property {Number} position optional\n * @property {Boolean} pinned optional\n * @property {Number} weight optional, default value: `0`\n * @property {Date} updatedAt required\n */\nexport const ProductPosition = new SimpleSchema({\n  tag: {\n    type: String,\n    optional: true\n  },\n  position: {\n    type: SimpleSchema.Integer,\n    optional: true\n  },\n  pinned: {\n    type: Boolean,\n    optional: true\n  },\n  weight: {\n    type: SimpleSchema.Integer,\n    optional: true,\n    defaultValue: 0,\n    min: 0,\n    max: 3\n  },\n  updatedAt: {\n    type: Date\n  }\n}, { check, tracker: Tracker });\n\nregisterSchema(\"ProductPosition\", ProductPosition);\n\n/**\n * @name ProductVariant\n * @memberof schemas\n * @type {SimpleSchema}\n * @property {String} _id required, Variant ID\n * @property {String[]} ancestors, default value: `[]`\n * @property {Number} index optional, Variant position number in list. Keep array index for moving variants in a list.\n * @property {Boolean} isVisible, default value: `false`\n * @property {Boolean} isDeleted, default value: `false`\n * @property {String} barcode optional\n * @property {Number} compareAtPrice optional, Compare at price\n * @property {String} fulfillmentService optional, Fullfillment service\n * @property {Number} weight, default value: `0`\n * @property {Number} length optional, default value: `0`\n * @property {Number} width optional, default value: `0`\n * @property {Number} height optional, default value: `0`\n * @property {Boolean} inventoryManagement, default value: `true`\n * @property {Boolean} inventoryPolicy, default value: `false`, If disabled, item can be sold even if it not in stock.\n * @property {Number} lowInventoryWarningThreshold, default value: `0`, Warn of low inventory at this number\n * @property {Number} inventoryQuantity, default value: `0`\n * @property {Number} minOrderQuantity optional\n * @property {Boolean} isLowQuantity optional, true when at least 1 variant is below `lowInventoryWarningThreshold`\n * @property {Boolean} isSoldOut optional, denormalized field, indicates when all variants `inventoryQuantity` is 0\n * @property {Number} price, default value: `0.00`\n * @property {String} shopId required, Variant ShopId\n * @property {String} sku optional\n * @property {String} type, default value: `\"variant\"`\n * @property {Boolean} taxable, default value: `true`\n * @property {String} taxCode, default value: `\"0000\"`\n * @property {String} taxDescription optional\n * @property {String} title, Label for customers, default value: `\"\"`\n * @property {String} optionTitle, Option internal name, default value: `\"Untitled option\"`\n * @property {Metafield[]} metafields optional\n * @property {Date} createdAt optional\n * @property {Date} updatedAt optional\n * @property {Event[]} eventLog optional, Variant Event Log\n * @property {Workflow} workflow optional\n * @property {String} originCountry optional\n */\nexport const ProductVariant = new SimpleSchema({\n  \"_id\": {\n    type: String,\n    label: \"Variant ID\"\n  },\n  \"ancestors\": {\n    type: Array,\n    defaultValue: []\n  },\n  \"ancestors.$\": {\n    type: String\n  },\n  \"index\": {\n    label: \"Variant position number in list\",\n    type: SimpleSchema.Integer,\n    optional: true\n  },\n  \"isVisible\": {\n    type: Boolean,\n    index: 1,\n    defaultValue: false\n  },\n  \"isDeleted\": {\n    type: Boolean,\n    index: 1,\n    defaultValue: false\n  },\n  \"barcode\": {\n    label: \"Barcode\",\n    type: String,\n    optional: true,\n    custom() {\n      if (Meteor.isClient) {\n        if (this.siblingField(\"type\").value === \"inventory\" && !this.value) {\n          return SimpleSchema.ErrorTypes.REQUIRED;\n        }\n      }\n    }\n  },\n  \"compareAtPrice\": {\n    label: \"Compare At Price\",\n    type: Number,\n    optional: true,\n    min: 0,\n    defaultValue: 0.00\n  },\n  \"weight\": {\n    label: \"Weight\",\n    type: Number,\n    min: 0,\n    optional: true,\n    defaultValue: 0,\n    custom() {\n      if (Meteor.isClient) {\n        if (!(this.siblingField(\"type\").value === \"inventory\" || this.value ||\n          this.value === 0)) {\n          return SimpleSchema.ErrorTypes.REQUIRED;\n        }\n      }\n    }\n  },\n  \"length\": {\n    label: \"Length\",\n    type: Number,\n    min: 0,\n    optional: true,\n    defaultValue: 0\n  },\n  \"width\": {\n    label: \"Width\",\n    type: Number,\n    min: 0,\n    optional: true,\n    defaultValue: 0\n  },\n  \"height\": {\n    label: \"Height\",\n    type: Number,\n    min: 0,\n    optional: true,\n    defaultValue: 0\n  },\n  \"inventoryManagement\": {\n    type: Boolean,\n    label: \"Inventory Tracking\",\n    optional: true,\n    defaultValue: true,\n    custom() {\n      if (Meteor.isClient) {\n        if (!(this.siblingField(\"type\").value === \"inventory\" || this.value ||\n          this.value === false)) {\n          return SimpleSchema.ErrorTypes.REQUIRED;\n        }\n      }\n    }\n  },\n  \"inventoryPolicy\": {\n    type: Boolean,\n    label: \"Deny when out of stock\",\n    optional: true,\n    defaultValue: false,\n    custom() {\n      if (Meteor.isClient) {\n        if (!(this.siblingField(\"type\").value === \"inventory\" || this.value ||\n          this.value === false)) {\n          return SimpleSchema.ErrorTypes.REQUIRED;\n        }\n      }\n    }\n  },\n  \"lowInventoryWarningThreshold\": {\n    type: SimpleSchema.Integer,\n    label: \"Warn at\",\n    min: 0,\n    optional: true,\n    defaultValue: 0\n  },\n  \"inventoryQuantity\": {\n    type: SimpleSchema.Integer,\n    label: \"Quantity\",\n    optional: true,\n    defaultValue: 0,\n    custom() {\n      if (Meteor.isClient) {\n        if (this.siblingField(\"type\").value !== \"inventory\") {\n          if (ReactionProduct.checkChildVariants(this.docId) === 0 && !this.value) {\n            return SimpleSchema.ErrorTypes.REQUIRED;\n          }\n        }\n      }\n    }\n  },\n  \"minOrderQuantity\": {\n    label: \"Minimum order quantity\",\n    type: SimpleSchema.Integer,\n    optional: true\n  },\n  \"isLowQuantity\": {\n    label: \"Indicates that the product quantity is too low\",\n    type: Boolean,\n    optional: true\n  },\n  \"isSoldOut\": {\n    label: \"Indicates when the product quantity is zero\",\n    type: Boolean,\n    optional: true\n  },\n  \"price\": {\n    label: \"Price\",\n    type: Number,\n    defaultValue: 0.00,\n    min: 0,\n    optional: true\n  },\n  \"shopId\": {\n    type: String,\n    autoValue: shopIdAutoValue,\n    index: 1,\n    label: \"Variant ShopId\"\n  },\n  \"sku\": {\n    label: \"SKU\",\n    type: String,\n    optional: true\n  },\n  \"type\": {\n    label: \"Type\",\n    type: String,\n    defaultValue: \"variant\"\n  },\n  \"taxable\": {\n    label: \"Taxable\",\n    type: Boolean,\n    defaultValue: true,\n    optional: true\n  },\n  \"taxCode\": {\n    label: \"Tax Code\",\n    type: String,\n    defaultValue: \"0000\",\n    optional: true\n  },\n  \"taxDescription\": {\n    type: String,\n    optional: true,\n    label: \"Tax Description\"\n  },\n  \"title\": {\n    label: \"Label\",\n    type: String,\n    defaultValue: \"\"\n  },\n  \"optionTitle\": {\n    label: \"Option\",\n    type: String,\n    optional: true,\n    defaultValue: \"Untitled Option\"\n  },\n  \"metafields\": {\n    type: Array,\n    optional: true\n  },\n  \"metafields.$\": {\n    type: Metafield\n  },\n  \"createdAt\": {\n    label: \"Created at\",\n    type: Date,\n    optional: true\n  },\n  \"updatedAt\": {\n    label: \"Updated at\",\n    type: Date,\n    optional: true\n  },\n  // TODO: REVIEW - Does this need to exist? Should we use workflow instead?\n  // Should it be called 'history' or something else instead?\n  // Should this go into the Logger instead? Is the logger robust enough for this?\n  \"eventLog\": {\n    label: \"Variant Event Log\",\n    type: Array,\n    optional: true\n  },\n  \"eventLog.$\": {\n    type: Event\n  },\n  \"workflow\": {\n    type: Workflow,\n    optional: true,\n    defaultValue: {}\n  },\n  \"originCountry\": {\n    type: String,\n    optional: true,\n    autoValue: shopDefaultCountry\n  }\n}, { check, tracker: Tracker });\n\nregisterSchema(\"ProductVariant\", ProductVariant);\n\n/**\n * @name PriceRange\n * @type {SimpleSchema}\n * @memberof schemas\n * @property {String} range, default value: `\"0.00\"`\n * @property {Number} min optional, default value: `0`\n * @property {Number} max optional, default value: `0`\n */\nexport const PriceRange = new SimpleSchema({\n  range: {\n    type: String,\n    defaultValue: \"0.00\"\n  },\n  min: {\n    type: Number,\n    defaultValue: 0,\n    optional: true\n  },\n  max: {\n    type: Number,\n    defaultValue: 0,\n    optional: true\n  }\n}, { check, tracker: Tracker });\n\nregisterSchema(\"PriceRange\", PriceRange);\n\n/**\n * @name Product\n * @type {SimpleSchema}\n * @memberof schemas\n * @property {String} _id Product ID\n * @property {String[]} ancestors default value: `[]`\n * @property {String} shopId Product ShopID\n * @property {String} title Product Title\n * @property {String} pageTitle optional\n * @property {String} description optional\n * @property {String} productType optional\n * @property {String} originCountry optional\n * @property {String} type default value: `\"simple\"`\n * @property {String} vendor optional\n * @property {Metafield[]} metafields optional\n * @property {Object} positions ProductPosition\n * @property {PriceRange} price denormalized, object with range string, min and max\n * @property {Boolean} isLowQuantity denormalized, true when at least 1 variant is below `lowInventoryWarningThreshold`\n * @property {Boolean} isSoldOut denormalized, Indicates when all variants `inventoryQuantity` is zero\n * @property {Boolean} isBackorder denormalized, `true` if product not in stock, but customers anyway could order it\n * @property {Boolean} requiresShipping default value: `true`, Require a shipping address\n * @property {ShippingParcel} parcel optional\n * @property {String[]} hashtags optional\n * @property {String} twitterMsg optional\n * @property {String} facebookMsg optional\n * @property {String} googleplusMsg optional\n * @property {String} pinterestMsg optional\n * @property {String} metaDescription optional\n * @property {String} handle optional, slug\n * @property {Boolean} isDeleted, default value: `false`\n * @property {Boolean} isVisible, default value: `false`\n * @property {String} template, default value: `\"productDetailSimple\"`\n * @property {Date} createdAt required\n * @property {Date} updatedAt optional\n * @property {Date} publishedAt optional\n * @property {String} publishedScope optional\n * @property {Workflow} workflow optional\n */\nexport const Product = new SimpleSchema({\n  \"_id\": {\n    type: String,\n    label: \"Product Id\"\n  },\n  \"ancestors\": {\n    type: Array,\n    defaultValue: []\n  },\n  \"ancestors.$\": {\n    type: String\n  },\n  \"shopId\": {\n    type: String,\n    autoValue: shopIdAutoValue,\n    index: 1,\n    label: \"Product ShopId\"\n  },\n  \"title\": {\n    type: String,\n    defaultValue: \"\",\n    label: \"Product Title\"\n  },\n  \"pageTitle\": {\n    type: String,\n    optional: true\n  },\n  \"description\": {\n    type: String,\n    optional: true\n  },\n  \"productType\": {\n    type: String,\n    optional: true\n  },\n  \"originCountry\": {\n    type: String,\n    optional: true,\n    autoValue: shopDefaultCountry\n  },\n  \"type\": {\n    label: \"Type\",\n    type: String,\n    defaultValue: \"simple\"\n  },\n  \"vendor\": {\n    type: String,\n    optional: true\n  },\n  \"metafields\": {\n    type: Array,\n    optional: true\n  },\n  \"metafields.$\": {\n    type: Metafield\n  },\n  \"positions\": {\n    type: Object, // ProductPosition\n    blackbox: true,\n    optional: true\n  },\n  \"price\": {\n    label: \"Price\",\n    type: PriceRange\n  },\n  \"isLowQuantity\": {\n    label: \"Indicates that the product quantity is too low\",\n    type: Boolean,\n    optional: true\n  },\n  \"isSoldOut\": {\n    label: \"Indicates when the product quantity is zero\",\n    type: Boolean,\n    optional: true\n  },\n  \"isBackorder\": {\n    label: \"Indicates when the seller has allowed the sale of product which\" +\n    \" is not in stock\",\n    type: Boolean,\n    optional: true\n  },\n  \"requiresShipping\": {\n    label: \"Require a shipping address\",\n    type: Boolean,\n    defaultValue: true,\n    optional: true\n  },\n  \"parcel\": {\n    type: ShippingParcel,\n    optional: true\n  },\n  \"hashtags\": {\n    type: Array,\n    optional: true,\n    index: 1\n  },\n  \"hashtags.$\": {\n    type: String\n  },\n  \"twitterMsg\": {\n    type: String,\n    optional: true,\n    max: 140\n  },\n  \"facebookMsg\": {\n    type: String,\n    optional: true,\n    max: 255\n  },\n  \"googleplusMsg\": {\n    type: String,\n    optional: true,\n    max: 255\n  },\n  \"pinterestMsg\": {\n    type: String,\n    optional: true,\n    max: 255\n  },\n  \"metaDescription\": {\n    type: String,\n    optional: true\n  },\n  \"handle\": {\n    type: String,\n    optional: true,\n    index: 1,\n    autoValue() {\n      let slug = getSlug(this.value);\n\n      if (!slug && this.siblingField(\"title\").value) {\n        slug = getSlug(this.siblingField(\"title\").value);\n      } else if (!slug) {\n        slug = this.siblingField(\"_id\").value || Random.id();\n      }\n      if (this.isInsert) {\n        return slug;\n      } else if (this.isUpsert) {\n        return {\n          $setOnInsert: slug\n        };\n      }\n    }\n  },\n  \"changedHandleWas\": {\n    type: String,\n    optional: true\n  },\n  \"isDeleted\": {\n    type: Boolean,\n    index: 1,\n    defaultValue: false\n  },\n  \"isVisible\": {\n    type: Boolean,\n    index: 1,\n    defaultValue: false\n  },\n  \"template\": {\n    label: \"Template\",\n    type: String,\n    defaultValue: \"productDetailSimple\"\n  },\n  \"createdAt\": {\n    type: Date,\n    autoValue: createdAtAutoValue\n  },\n  \"updatedAt\": {\n    type: Date,\n    autoValue: updatedAtAutoValue,\n    optional: true\n  },\n  \"publishedAt\": {\n    type: Date,\n    optional: true\n  },\n  \"publishedScope\": {\n    type: String,\n    optional: true\n  },\n  \"workflow\": {\n    type: Workflow,\n    optional: true,\n    defaultValue: {}\n  }\n}, { check, tracker: Tracker });\n\nregisterSchema(\"Product\", Product);\n"]},"sourceType":"script","hash":"9e71e74133d6e54a3e9aad702f3b67ab7f7d105c"}
