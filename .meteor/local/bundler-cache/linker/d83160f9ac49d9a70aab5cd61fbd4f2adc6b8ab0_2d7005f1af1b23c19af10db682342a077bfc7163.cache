[{"type":"js","data":"//////////////////////////////////////////////////////////////////////////\n//                                                                      //\n// This is a generated file. You can view the original                  //\n// source in your browser if your browser supports source maps.         //\n// Source maps are supported by all recent versions of Chrome, Safari,  //\n// and Firefox, and by Internet Explorer 11.                            //\n//                                                                      //\n//////////////////////////////////////////////////////////////////////////\n\n\n(function () {\n\n/* Imports */\nvar Meteor = Package.meteor.Meteor;\nvar global = Package.meteor.global;\nvar meteorEnv = Package.meteor.meteorEnv;\nvar Accounts = Package['accounts-base'].Accounts;\nvar OAuth = Package.oauth.OAuth;\nvar Oauth = Package.oauth.Oauth;\nvar Template = Package['templating-runtime'].Template;\nvar Random = Package.random.Random;\nvar ServiceConfiguration = Package['service-configuration'].ServiceConfiguration;\nvar Blaze = Package.blaze.Blaze;\nvar UI = Package.blaze.UI;\nvar Handlebars = Package.blaze.Handlebars;\nvar Spacebars = Package.spacebars.Spacebars;\nvar HTML = Package.htmljs.HTML;\n\n/* Package-scope variables */\nvar Instagram;\n\n(function(){\n\n/////////////////////////////////////////////////////////////////////////////////////////////////////////\n//                                                                                                     //\n// packages/bozhao_accounts-instagram/instagram_client.js                                              //\n//                                                                                                     //\n/////////////////////////////////////////////////////////////////////////////////////////////////////////\n                                                                                                       //\nInstagram = {};\n\nInstagram.requestCredential = function (options, credentialRequestCompleteCallback) {\n  if (!credentialRequestCompleteCallback && typeof options === 'function') {\n    credentialRequestCompleteCallback = options;\n    options = {};\n  }\n\n  var config = ServiceConfiguration.configurations.findOne({service: 'instagram'});\n  if (!config) {\n    credentialRequestCompleteCallback && credentialRequestCompleteCallback(\n      new ServiceConfiguration.ConfigError());\n    return;\n  }\n  var credentialToken = Random.secret();\n  var loginStyle = OAuth._loginStyle('instagram', config, options);\n  var scope = (config.scope) || ['basic', 'likes', 'relationships', 'comments'];\n  var flatScope = _.map(scope, encodeURIComponent).join('+');\n\n  var loginUrl =\n    'https://instagram.com/oauth/authorize' +\n      '?client_id=' + config.clientId +\n      '&response_type=code' +\n      '&scope=' + flatScope +\n      '&redirect_uri=' + OAuth._redirectUri('instagram', config) +\n      '&state=' + OAuth._stateParam(loginStyle, credentialToken);\n\n  OAuth.launchLogin({\n    loginService: \"instagram\"\n    , loginStyle: loginStyle\n    , loginUrl: loginUrl\n    , credentialRequestCompleteCallback: credentialRequestCompleteCallback\n    , credentialToken: credentialToken\n  });\n};\n\n/////////////////////////////////////////////////////////////////////////////////////////////////////////\n\n}).call(this);\n\n\n\n\n\n\n(function(){\n\n/////////////////////////////////////////////////////////////////////////////////////////////////////////\n//                                                                                                     //\n// packages/bozhao_accounts-instagram/instagram.js                                                     //\n//                                                                                                     //\n/////////////////////////////////////////////////////////////////////////////////////////////////////////\n                                                                                                       //\nAccounts.oauth.registerService('instagram');\n\nif (Meteor.isClient) {\n  Meteor.loginWithInstagram = function(options, callback) {\n    // support a callback without options\n    if (! callback && typeof options === \"function\") {\n      callback = options;\n      options = null;\n    }\n\n    var credentialRequestCompleteCallback = Accounts.oauth.credentialRequestCompleteHandler(callback);\n    Instagram.requestCredential(options, credentialRequestCompleteCallback);\n  };\n} else {\n  Accounts.addAutopublishFields({\n    forLoggedInUser: ['services.instagram'],\n    forOtherUsers: [\n      'services.instagram.username',\n      'services.instagram.full_name',\n      'services.instagram.profile_picture'\n    ]\n  });\n}\n\n/////////////////////////////////////////////////////////////////////////////////////////////////////////\n\n}).call(this);\n\n\n\n\n\n\n(function(){\n\n/////////////////////////////////////////////////////////////////////////////////////////////////////////\n//                                                                                                     //\n// packages/bozhao_accounts-instagram/template.instagram_configuration.js                              //\n//                                                                                                     //\n/////////////////////////////////////////////////////////////////////////////////////////////////////////\n                                                                                                       //\n\nTemplate.__checkName(\"configureLoginServiceDialogForInstagram\");\nTemplate[\"configureLoginServiceDialogForInstagram\"] = new Template(\"Template.configureLoginServiceDialogForInstagram\", (function() {\n  var view = this;\n  return [ HTML.Raw(\"<p>\\n        Follow these steps to configure your Instagram client:\\n    </p>\\n    \"), HTML.OL(\"\\n        \", HTML.Raw('<li>\\n            Visit <a href=\"http://instagram.com/developer/clients/register/\" target=\"_blank\">http://instagram.com/developer/clients/register/</a>\\n        </li>'), \"\\n        \", HTML.LI(\"\\n            Set Callback URL to: \", HTML.SPAN({\n    class: \"url\"\n  }, Blaze.View(\"lookup:siteUrl\", function() {\n    return Spacebars.mustache(view.lookup(\"siteUrl\"));\n  }), \"_oauth/instagram\"), \"\\n        \"), \"\\n    \") ];\n}));\n\n/////////////////////////////////////////////////////////////////////////////////////////////////////////\n\n}).call(this);\n\n\n\n\n\n\n(function(){\n\n/////////////////////////////////////////////////////////////////////////////////////////////////////////\n//                                                                                                     //\n// packages/bozhao_accounts-instagram/instagram_configuration.js                                       //\n//                                                                                                     //\n/////////////////////////////////////////////////////////////////////////////////////////////////////////\n                                                                                                       //\nTemplate.configureLoginServiceDialogForInstagram.helpers({\n  siteUrl: function () {\n    return Meteor.absoluteUrl();\n  }\n});\n\nTemplate.configureLoginServiceDialogForInstagram.fields = function () {\n  return [\n    {property: 'clientId', label: 'Client Id'},\n    {property: 'secret', label: 'Client Secret'}\n  ];\n};\n\n/////////////////////////////////////////////////////////////////////////////////////////////////////////\n\n}).call(this);\n\n\n/* Exports */\nPackage._define(\"bozhao:accounts-instagram\", {\n  Instagram: Instagram\n});\n\n})();\n","servePath":"/packages/bozhao_accounts-instagram.js"}]