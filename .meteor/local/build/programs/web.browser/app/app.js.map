{"version":3,"sources":["meteor://ğŸ’»app/imports/plugins/core/checkout/client/templates/checkout/addressBook/addressBook.js","meteor://ğŸ’»app/imports/plugins/core/checkout/client/templates/checkout/completed/completed.js","meteor://ğŸ’»app/imports/plugins/core/checkout/client/templates/checkout/login/login.js","meteor://ğŸ’»app/imports/plugins/core/checkout/client/templates/checkout/progressBar/progressBar.js","meteor://ğŸ’»app/imports/plugins/core/checkout/client/templates/checkout/review/review.js","meteor://ğŸ’»app/imports/plugins/core/checkout/client/templates/checkout/checkout.js","meteor://ğŸ’»app/imports/plugins/core/checkout/client/templates/cartDrawer/cartDrawer.js","meteor://ğŸ’»app/imports/plugins/core/checkout/client/templates/cartIcon/cartIcon.js","meteor://ğŸ’»app/imports/plugins/core/checkout/client/components/addEmail.js","meteor://ğŸ’»app/imports/plugins/core/checkout/client/components/cartDrawer.js","meteor://ğŸ’»app/imports/plugins/core/checkout/client/components/cartIcon.js","meteor://ğŸ’»app/imports/plugins/core/checkout/client/components/cartItems.js","meteor://ğŸ’»app/imports/plugins/core/checkout/client/components/cartPanel.js","meteor://ğŸ’»app/imports/plugins/core/checkout/client/components/cartSubTotal.js","meteor://ğŸ’»app/imports/plugins/core/checkout/client/components/completedOrder.js","meteor://ğŸ’»app/imports/plugins/core/checkout/client/components/completedOrderItem.js","meteor://ğŸ’»app/imports/plugins/core/checkout/client/components/completedOrderPaymentMethods.js","meteor://ğŸ’»app/imports/plugins/core/checkout/client/components/completedOrderSummary.js","meteor://ğŸ’»app/imports/plugins/core/checkout/client/components/completedShopOrders.js","meteor://ğŸ’»app/imports/plugins/core/checkout/client/components/emptyCartDrawer.js","meteor://ğŸ’»app/imports/plugins/core/checkout/client/components/shopOrderSummary.js","meteor://ğŸ’»app/imports/plugins/core/checkout/client/containers/cartDrawerContainer.js","meteor://ğŸ’»app/imports/plugins/core/checkout/client/containers/cartIconContainer.js","meteor://ğŸ’»app/imports/plugins/core/checkout/client/containers/cartPanelContainer.js","meteor://ğŸ’»app/imports/plugins/core/checkout/client/containers/cartSubTotalContainer.js","meteor://ğŸ’»app/imports/plugins/core/checkout/client/containers/completedOrderContainer.js","meteor://ğŸ’»app/imports/plugins/core/checkout/client/helpers/cart.js","meteor://ğŸ’»app/imports/plugins/core/checkout/client/methods/cart.js","meteor://ğŸ’»app/imports/plugins/core/checkout/client/index.js","meteor://ğŸ’»app/imports/plugins/core/dashboard/client/templates/packages/grid/grid.js","meteor://ğŸ’»app/imports/plugins/core/dashboard/client/templates/packages/grid/package.js","meteor://ğŸ’»app/imports/plugins/core/dashboard/client/templates/packages/packages.js","meteor://ğŸ’»app/imports/plugins/core/dashboard/client/templates/shop/settings/ShopBrandMediaManager.js","meteor://ğŸ’»app/imports/plugins/core/dashboard/client/templates/shop/settings/settings.js","meteor://ğŸ’»app/imports/plugins/core/dashboard/client/templates/shop/settings/shopBrandImageOption.js","meteor://ğŸ’»app/imports/plugins/core/dashboard/client/templates/import/import.js","meteor://ğŸ’»app/imports/plugins/core/dashboard/client/templates/settings/settings.js","meteor://ğŸ’»app/imports/plugins/core/dashboard/client/templates/dashboard.js","meteor://ğŸ’»app/imports/plugins/core/dashboard/client/components/actionView.js","meteor://ğŸ’»app/imports/plugins/core/dashboard/client/components/index.js","meteor://ğŸ’»app/imports/plugins/core/dashboard/client/components/packageList.js","meteor://ğŸ’»app/imports/plugins/core/dashboard/client/components/shopSelect.js","meteor://ğŸ’»app/imports/plugins/core/dashboard/client/components/shortcutBar.js","meteor://ğŸ’»app/imports/plugins/core/dashboard/client/components/toolbar.js","meteor://ğŸ’»app/imports/plugins/core/dashboard/client/containers/actionViewContainer.js","meteor://ğŸ’»app/imports/plugins/core/dashboard/client/containers/index.js","meteor://ğŸ’»app/imports/plugins/core/dashboard/client/containers/packageListContainer.js","meteor://ğŸ’»app/imports/plugins/core/dashboard/client/containers/toolbarContainer.js","meteor://ğŸ’»app/imports/plugins/core/dashboard/client/index.js","meteor://ğŸ’»app/imports/plugins/core/layout/client/templates/layout/alerts/alerts.js","meteor://ğŸ’»app/imports/plugins/core/layout/client/templates/layout/alerts/inlineAlerts.js","meteor://ğŸ’»app/imports/plugins/core/layout/client/templates/layout/alerts/reactionAlerts.js","meteor://ğŸ’»app/imports/plugins/core/layout/client/templates/layout/createContentMenu/createContentMenu.js","meteor://ğŸ’»app/imports/plugins/core/layout/client/templates/layout/notFound/notFound.js","meteor://ğŸ’»app/imports/plugins/core/layout/client/templates/layout/notice/unauthorized.js","meteor://ğŸ’»app/imports/plugins/core/layout/client/templates/theme/theme.js","meteor://ğŸ’»app/imports/plugins/core/layout/client/components/coreLayout.js","meteor://ğŸ’»app/imports/plugins/core/layout/client/components/footer.js","meteor://ğŸ’»app/imports/plugins/core/layout/client/components/printLayout.js","meteor://ğŸ’»app/imports/plugins/core/layout/client/index.js","meteor://ğŸ’»app/imports/plugins/core/layout/lib/index.js","meteor://ğŸ’»app/imports/plugins/core/layout/lib/reactionLayout.js","meteor://ğŸ’»app/imports/plugins/core/accounts/client/templates/dashboard/dashboard.js","meteor://ğŸ’»app/imports/plugins/core/accounts/client/templates/inline/inline.js","meteor://ğŸ’»app/imports/plugins/core/accounts/client/templates/login/loginForm.js","meteor://ğŸ’»app/imports/plugins/core/accounts/client/templates/members/member.js","meteor://ğŸ’»app/imports/plugins/core/accounts/client/templates/profile/profile.js","meteor://ğŸ’»app/imports/plugins/core/accounts/client/templates/profile/userOrdersList.js","meteor://ğŸ’»app/imports/plugins/core/accounts/client/templates/updatePassword/updatePassword.js","meteor://ğŸ’»app/imports/plugins/core/accounts/client/templates/dropdown/helpers/helpers.js","meteor://ğŸ’»app/imports/plugins/core/accounts/client/templates/dropdown/helpers/index.js","meteor://ğŸ’»app/imports/plugins/core/accounts/client/templates/dropdown/helpers/util.js","meteor://ğŸ’»app/imports/plugins/core/accounts/client/components/accountsDashboard.js","meteor://ğŸ’»app/imports/plugins/core/accounts/client/components/addressBook.js","meteor://ğŸ’»app/imports/plugins/core/accounts/client/components/addressBookForm.js","meteor://ğŸ’»app/imports/plugins/core/accounts/client/components/addressBookGrid.js","meteor://ğŸ’»app/imports/plugins/core/accounts/client/components/addressBookReview.js","meteor://ğŸ’»app/imports/plugins/core/accounts/client/components/adminInviteForm.js","meteor://ğŸ’»app/imports/plugins/core/accounts/client/components/editGroup.js","meteor://ğŸ’»app/imports/plugins/core/accounts/client/components/forgotPassword.js","meteor://ğŸ’»app/imports/plugins/core/accounts/client/components/groupForm.js","meteor://ğŸ’»app/imports/plugins/core/accounts/client/components/groupHeader.js","meteor://ğŸ’»app/imports/plugins/core/accounts/client/components/groupsTable.js","meteor://ğŸ’»app/imports/plugins/core/accounts/client/components/groupsTableButton.js","meteor://ğŸ’»app/imports/plugins/core/accounts/client/components/groupsTableCell.js","meteor://ğŸ’»app/imports/plugins/core/accounts/client/components/login.js","meteor://ğŸ’»app/imports/plugins/core/accounts/client/components/loginButtons.js","meteor://ğŸ’»app/imports/plugins/core/accounts/client/components/loginFormMessages.js","meteor://ğŸ’»app/imports/plugins/core/accounts/client/components/loginInline.js","meteor://ğŸ’»app/imports/plugins/core/accounts/client/components/mainDropdown.js","meteor://ğŸ’»app/imports/plugins/core/accounts/client/components/manageGroups.js","meteor://ğŸ’»app/imports/plugins/core/accounts/client/components/ordersList.js","meteor://ğŸ’»app/imports/plugins/core/accounts/client/components/permissionsList.js","meteor://ğŸ’»app/imports/plugins/core/accounts/client/components/signIn.js","meteor://ğŸ’»app/imports/plugins/core/accounts/client/components/signUp.js","meteor://ğŸ’»app/imports/plugins/core/accounts/client/components/updateEmail.js","meteor://ğŸ’»app/imports/plugins/core/accounts/client/components/updatePasswordOverlay.js","meteor://ğŸ’»app/imports/plugins/core/accounts/client/components/verifyAccount.js","meteor://ğŸ’»app/imports/plugins/core/accounts/client/containers/accountsDashboardContainer.js","meteor://ğŸ’»app/imports/plugins/core/accounts/client/containers/addressBookContainer.js","meteor://ğŸ’»app/imports/plugins/core/accounts/client/containers/auth.js","meteor://ğŸ’»app/imports/plugins/core/accounts/client/containers/editGroupContainer.js","meteor://ğŸ’»app/imports/plugins/core/accounts/client/containers/forgotPassword.js","meteor://ğŸ’»app/imports/plugins/core/accounts/client/containers/loginInline.js","meteor://ğŸ’»app/imports/plugins/core/accounts/client/containers/mainDropdown.js","meteor://ğŸ’»app/imports/plugins/core/accounts/client/containers/messages.js","meteor://ğŸ’»app/imports/plugins/core/accounts/client/containers/passwordOverlay.js","meteor://ğŸ’»app/imports/plugins/core/accounts/client/containers/updateEmail.js","meteor://ğŸ’»app/imports/plugins/core/accounts/client/containers/userOrdersListContainer.js","meteor://ğŸ’»app/imports/plugins/core/accounts/client/containers/verifyAccount.js","meteor://ğŸ’»app/imports/plugins/core/accounts/client/helpers/accountsHelper.js","meteor://ğŸ’»app/imports/plugins/core/accounts/client/helpers/helpers.js","meteor://ğŸ’»app/imports/plugins/core/accounts/client/helpers/index.js","meteor://ğŸ’»app/imports/plugins/core/accounts/client/helpers/util.js","meteor://ğŸ’»app/imports/plugins/core/accounts/client/index.js","meteor://ğŸ’»app/imports/plugins/core/connectors/client/templates/settings/connectors.js","meteor://ğŸ’»app/imports/plugins/core/connectors/client/templates/index.js","meteor://ğŸ’»app/imports/plugins/core/connectors/client/index.js","meteor://ğŸ’»app/imports/plugins/core/orders/client/templates/list/pdf.js","meteor://ğŸ’»app/imports/plugins/core/orders/client/templates/list/summary.js","meteor://ğŸ’»app/imports/plugins/core/orders/client/templates/workflow/shippingInvoice.js","meteor://ğŸ’»app/imports/plugins/core/orders/client/templates/workflow/shippingSummary.js","meteor://ğŸ’»app/imports/plugins/core/orders/client/templates/workflow/shippingTracking.js","meteor://ğŸ’»app/imports/plugins/core/orders/client/templates/workflow/workflow.js","meteor://ğŸ’»app/imports/plugins/core/orders/client/templates/orders.js","meteor://ğŸ’»app/imports/plugins/core/orders/client/components/invoice.js","meteor://ğŸ’»app/imports/plugins/core/orders/client/components/invoiceActions.js","meteor://ğŸ’»app/imports/plugins/core/orders/client/components/lineItems.js","meteor://ğŸ’»app/imports/plugins/core/orders/client/components/orderBulkActionsBar.js","meteor://ğŸ’»app/imports/plugins/core/orders/client/components/orderDashboard.js","meteor://ğŸ’»app/imports/plugins/core/orders/client/components/orderFilter.js","meteor://ğŸ’»app/imports/plugins/core/orders/client/components/orderSearch.js","meteor://ğŸ’»app/imports/plugins/core/orders/client/components/orderSummary.js","meteor://ğŸ’»app/imports/plugins/core/orders/client/components/orderTable.js","meteor://ğŸ’»app/imports/plugins/core/orders/client/components/orderTableColumn.js","meteor://ğŸ’»app/imports/plugins/core/orders/client/components/productImage.js","meteor://ğŸ’»app/imports/plugins/core/orders/client/containers/invoiceContainer.js","meteor://ğŸ’»app/imports/plugins/core/orders/client/containers/orderDashboardContainer.js","meteor://ğŸ’»app/imports/plugins/core/orders/client/containers/orderSubscriptionContainer.js","meteor://ğŸ’»app/imports/plugins/core/orders/client/containers/orderSummaryContainer.js","meteor://ğŸ’»app/imports/plugins/core/orders/client/containers/orderTableContainer.js","meteor://ğŸ’»app/imports/plugins/core/orders/client/helpers/index.js","meteor://ğŸ’»app/imports/plugins/core/orders/client/index.js","meteor://ğŸ’»app/imports/plugins/core/orders/lib/constants.js","meteor://ğŸ’»app/imports/plugins/core/payments/client/checkout/payment/index.js","meteor://ğŸ’»app/imports/plugins/core/payments/client/checkout/payment/methods.js","meteor://ğŸ’»app/imports/plugins/core/payments/client/checkout/index.js","meteor://ğŸ’»app/imports/plugins/core/payments/client/settings/index.js","meteor://ğŸ’»app/imports/plugins/core/payments/client/settings/settings.js","meteor://ğŸ’»app/imports/plugins/core/payments/client/index.js","meteor://ğŸ’»app/imports/plugins/core/shipping/client/templates/checkout/shipping.js","meteor://ğŸ’»app/imports/plugins/core/shipping/client/templates/settings/shipping.js","meteor://ğŸ’»app/imports/plugins/core/shipping/client/templates/index.js","meteor://ğŸ’»app/imports/plugins/core/shipping/client/index.js","meteor://ğŸ’»app/imports/plugins/core/ui/client/components/button/button.js","meteor://ğŸ’»app/imports/plugins/core/ui/client/components/button/button.jsx","meteor://ğŸ’»app/imports/plugins/core/ui/client/components/button/buttonSelect.js","meteor://ğŸ’»app/imports/plugins/core/ui/client/components/button/editButton.js","meteor://ğŸ’»app/imports/plugins/core/ui/client/components/button/flatButton.js","meteor://ğŸ’»app/imports/plugins/core/ui/client/components/button/handle.js","meteor://ğŸ’»app/imports/plugins/core/ui/client/components/button/iconButton.js","meteor://ğŸ’»app/imports/plugins/core/ui/client/components/button/index.js","meteor://ğŸ’»app/imports/plugins/core/ui/client/components/button/visibilityButton.js","meteor://ğŸ’»app/imports/plugins/core/ui/client/components/cards/card.js","meteor://ğŸ’»app/imports/plugins/core/ui/client/components/cards/cardBody.js","meteor://ğŸ’»app/imports/plugins/core/ui/client/components/cards/cardGroup.js","meteor://ğŸ’»app/imports/plugins/core/ui/client/components/cards/cardHeader.js","meteor://ğŸ’»app/imports/plugins/core/ui/client/components/cards/cardTitle.js","meteor://ğŸ’»app/imports/plugins/core/ui/client/components/cards/cardToolbar.js","meteor://ğŸ’»app/imports/plugins/core/ui/client/components/cards/cards.js","meteor://ğŸ’»app/imports/plugins/core/ui/client/components/cards/index.js","meteor://ğŸ’»app/imports/plugins/core/ui/client/components/cards/settingsCard.js","meteor://ğŸ’»app/imports/plugins/core/ui/client/components/textfield/textfield.js","meteor://ğŸ’»app/imports/plugins/core/ui/client/components/table/sortableTableComponents/filter.js","meteor://ğŸ’»app/imports/plugins/core/ui/client/components/table/sortableTableComponents/index.js","meteor://ğŸ’»app/imports/plugins/core/ui/client/components/table/sortableTableComponents/pagination.js","meteor://ğŸ’»app/imports/plugins/core/ui/client/components/table/sortableTableComponents/paginationButtons.js","meteor://ğŸ’»app/imports/plugins/core/ui/client/components/table/index.js","meteor://ğŸ’»app/imports/plugins/core/ui/client/components/table/sortableTable.js","meteor://ğŸ’»app/imports/plugins/core/ui/client/components/table/sortableTableLegacy.js","meteor://ğŸ’»app/imports/plugins/core/ui/client/components/alerts/alert.js","meteor://ğŸ’»app/imports/plugins/core/ui/client/components/alerts/alerts.js","meteor://ğŸ’»app/imports/plugins/core/ui/client/components/alerts/index.js","meteor://ğŸ’»app/imports/plugins/core/ui/client/components/app/app.js","meteor://ğŸ’»app/imports/plugins/core/ui/client/components/app/index.js","meteor://ğŸ’»app/imports/plugins/core/ui/client/components/avatar/avatar.js","meteor://ğŸ’»app/imports/plugins/core/ui/client/components/avatar/index.js","meteor://ğŸ’»app/imports/plugins/core/ui/client/components/badge/badge.js","meteor://ğŸ’»app/imports/plugins/core/ui/client/components/badge/index.js","meteor://ğŸ’»app/imports/plugins/core/ui/client/components/badge/inventoryBadge.js","meteor://ğŸ’»app/imports/plugins/core/ui/client/components/buttonGroup/buttonGroup.js","meteor://ğŸ’»app/imports/plugins/core/ui/client/components/buttonGroup/buttonToolbar.js","meteor://ğŸ’»app/imports/plugins/core/ui/client/components/buttonGroup/index.js","meteor://ğŸ’»app/imports/plugins/core/ui/client/components/calendarPicker/calendarPicker.js","meteor://ğŸ’»app/imports/plugins/core/ui/client/components/calendarPicker/dayPickerRangeController.js","meteor://ğŸ’»app/imports/plugins/core/ui/client/components/checkbox/checkbox.js","meteor://ğŸ’»app/imports/plugins/core/ui/client/components/checkbox/index.js","meteor://ğŸ’»app/imports/plugins/core/ui/client/components/checkbox/rolloverCheckbox.js","meteor://ğŸ’»app/imports/plugins/core/ui/client/components/clickToCopy/clickToCopy.js","meteor://ğŸ’»app/imports/plugins/core/ui/client/components/divider/divider.js","meteor://ğŸ’»app/imports/plugins/core/ui/client/components/divider/verticalDivider.js","meteor://ğŸ’»app/imports/plugins/core/ui/client/components/forms/form.js","meteor://ğŸ’»app/imports/plugins/core/ui/client/components/forms/formActions.js","meteor://ğŸ’»app/imports/plugins/core/ui/client/components/forms/index.js","meteor://ğŸ’»app/imports/plugins/core/ui/client/components/icon/icon.js","meteor://ğŸ’»app/imports/plugins/core/ui/client/components/icon/index.js","meteor://ğŸ’»app/imports/plugins/core/ui/client/components/items/item.js","meteor://ğŸ’»app/imports/plugins/core/ui/client/components/items/items.js","meteor://ğŸ’»app/imports/plugins/core/ui/client/components/list/index.js","meteor://ğŸ’»app/imports/plugins/core/ui/client/components/list/list.js","meteor://ğŸ’»app/imports/plugins/core/ui/client/components/list/listItem.js","meteor://ğŸ’»app/imports/plugins/core/ui/client/components/loading/loading.js","meteor://ğŸ’»app/imports/plugins/core/ui/client/components/media/hint.js","meteor://ğŸ’»app/imports/plugins/core/ui/client/components/media/index.js","meteor://ğŸ’»app/imports/plugins/core/ui/client/components/media/mediaGallery.js","meteor://ğŸ’»app/imports/plugins/core/ui/client/components/media/mediaItem.js","meteor://ğŸ’»app/imports/plugins/core/ui/client/components/media/mediaUploader.js","meteor://ğŸ’»app/imports/plugins/core/ui/client/components/menu/dropDownMenu.js","meteor://ğŸ’»app/imports/plugins/core/ui/client/components/menu/index.js","meteor://ğŸ’»app/imports/plugins/core/ui/client/components/menu/menu.js","meteor://ğŸ’»app/imports/plugins/core/ui/client/components/menu/menuItem.js","meteor://ğŸ’»app/imports/plugins/core/ui/client/components/metadata/index.js","meteor://ğŸ’»app/imports/plugins/core/ui/client/components/metadata/metadata.js","meteor://ğŸ’»app/imports/plugins/core/ui/client/components/metadata/metafield.js","meteor://ğŸ’»app/imports/plugins/core/ui/client/components/modal/index.js","meteor://ğŸ’»app/imports/plugins/core/ui/client/components/modal/overlay.js","meteor://ğŸ’»app/imports/plugins/core/ui/client/components/multiselect/multiselect.js","meteor://ğŸ’»app/imports/plugins/core/ui/client/components/notFound/index.js","meteor://ğŸ’»app/imports/plugins/core/ui/client/components/notFound/notFound.js","meteor://ğŸ’»app/imports/plugins/core/ui/client/components/numericInput/numberTypeInput.js","meteor://ğŸ’»app/imports/plugins/core/ui/client/components/numericInput/numericInput.js","meteor://ğŸ’»app/imports/plugins/core/ui/client/components/popover/index.js","meteor://ğŸ’»app/imports/plugins/core/ui/client/components/popover/popover.js","meteor://ğŸ’»app/imports/plugins/core/ui/client/components/popover/popoverContent.js","meteor://ğŸ’»app/imports/plugins/core/ui/client/components/progress/circularProgress.js","meteor://ğŸ’»app/imports/plugins/core/ui/client/components/select/select.react.js","meteor://ğŸ’»app/imports/plugins/core/ui/client/components/slider/slider.js","meteor://ğŸ’»app/imports/plugins/core/ui/client/components/switch/index.js","meteor://ğŸ’»app/imports/plugins/core/ui/client/components/switch/switch.js","meteor://ğŸ’»app/imports/plugins/core/ui/client/components/tabs/index.js","meteor://ğŸ’»app/imports/plugins/core/ui/client/components/tabs/tabItem.js","meteor://ğŸ’»app/imports/plugins/core/ui/client/components/tabs/tabList.js","meteor://ğŸ’»app/imports/plugins/core/ui/client/components/tags/index.js","meteor://ğŸ’»app/imports/plugins/core/ui/client/components/tags/tagItem.js","meteor://ğŸ’»app/imports/plugins/core/ui/client/components/tags/tagList.js","meteor://ğŸ’»app/imports/plugins/core/ui/client/components/toolbar/index.js","meteor://ğŸ’»app/imports/plugins/core/ui/client/components/toolbar/toolbar.js","meteor://ğŸ’»app/imports/plugins/core/ui/client/components/toolbar/toolbarGroup.js","meteor://ğŸ’»app/imports/plugins/core/ui/client/components/toolbar/toolbarText.js","meteor://ğŸ’»app/imports/plugins/core/ui/client/components/tooltip/tooltip.js","meteor://ğŸ’»app/imports/plugins/core/ui/client/components/translation/currency.js","meteor://ğŸ’»app/imports/plugins/core/ui/client/components/translation/index.js","meteor://ğŸ’»app/imports/plugins/core/ui/client/components/translation/translation.js","meteor://ğŸ’»app/imports/plugins/core/ui/client/components/index.js","meteor://ğŸ’»app/imports/plugins/core/ui/client/containers/alerts.js","meteor://ğŸ’»app/imports/plugins/core/ui/client/containers/appContainer.js","meteor://ğŸ’»app/imports/plugins/core/ui/client/containers/avatar.js","meteor://ğŸ’»app/imports/plugins/core/ui/client/containers/edit.js","meteor://ğŸ’»app/imports/plugins/core/ui/client/containers/index.js","meteor://ğŸ’»app/imports/plugins/core/ui/client/containers/inventoryBadge.js","meteor://ğŸ’»app/imports/plugins/core/ui/client/containers/mediaGallery.js","meteor://ğŸ’»app/imports/plugins/core/ui/client/containers/sortableItem.js","meteor://ğŸ’»app/imports/plugins/core/ui/client/containers/tagListContainer.js","meteor://ğŸ’»app/imports/plugins/core/ui/client/helpers/helpers.js","meteor://ğŸ’»app/imports/plugins/core/ui/client/helpers/react-template-helper.js","meteor://ğŸ’»app/imports/plugins/core/ui/client/providers/admin.js","meteor://ğŸ’»app/imports/plugins/core/ui/client/providers/adminContextProvider.js","meteor://ğŸ’»app/imports/plugins/core/ui/client/providers/dragDropProvider.js","meteor://ğŸ’»app/imports/plugins/core/ui/client/providers/index.js","meteor://ğŸ’»app/imports/plugins/core/ui/client/providers/translatable.js","meteor://ğŸ’»app/imports/plugins/core/ui/client/providers/translationProvider.js","meteor://ğŸ’»app/imports/plugins/core/ui/client/index.js","meteor://ğŸ’»app/imports/plugins/core/catalog/client/templates/settings.js","meteor://ğŸ’»app/imports/plugins/core/catalog/client/index.js","meteor://ğŸ’»app/imports/plugins/core/email/client/templates/email.js","meteor://ğŸ’»app/imports/plugins/core/email/client/actions/index.js","meteor://ğŸ’»app/imports/plugins/core/email/client/actions/settings.js","meteor://ğŸ’»app/imports/plugins/core/email/client/components/emailConfig.js","meteor://ğŸ’»app/imports/plugins/core/email/client/components/emailLogs.js","meteor://ğŸ’»app/imports/plugins/core/email/client/components/emailSettings.js","meteor://ğŸ’»app/imports/plugins/core/email/client/components/emailTableColumn.js","meteor://ğŸ’»app/imports/plugins/core/email/client/containers/emailConfig.js","meteor://ğŸ’»app/imports/plugins/core/email/client/containers/emailLogs.js","meteor://ğŸ’»app/imports/plugins/core/email/client/containers/emailSettings.js","meteor://ğŸ’»app/imports/plugins/core/email/client/index.js","meteor://ğŸ’»app/imports/plugins/core/revisions/client/templates/settings.js","meteor://ğŸ’»app/imports/plugins/core/revisions/client/components/publishControls.js","meteor://ğŸ’»app/imports/plugins/core/revisions/client/components/settings.js","meteor://ğŸ’»app/imports/plugins/core/revisions/client/components/simpleDiff.js","meteor://ğŸ’»app/imports/plugins/core/revisions/client/containers/publishContainer.js","meteor://ğŸ’»app/imports/plugins/core/revisions/client/containers/settingsContainer.js","meteor://ğŸ’»app/imports/plugins/core/revisions/client/index.js","meteor://ğŸ’»app/imports/plugins/core/revisions/lib/api/index.js","meteor://ğŸ’»app/imports/plugins/core/revisions/lib/api/revisions.js","meteor://ğŸ’»app/imports/plugins/core/taxes/client/settings/custom.js","meteor://ğŸ’»app/imports/plugins/core/taxes/client/settings/settings.js","meteor://ğŸ’»app/imports/plugins/core/taxes/client/index.js","meteor://ğŸ’»app/imports/plugins/core/taxes/lib/collections/schemas/config.js","meteor://ğŸ’»app/imports/plugins/core/taxes/lib/collections/schemas/index.js","meteor://ğŸ’»app/imports/plugins/core/taxes/lib/collections/schemas/taxcodes.js","meteor://ğŸ’»app/imports/plugins/core/taxes/lib/collections/schemas/taxes.js","meteor://ğŸ’»app/imports/plugins/core/taxes/lib/collections/schemas/taxrates.js","meteor://ğŸ’»app/imports/plugins/core/taxes/lib/collections/collections.js","meteor://ğŸ’»app/imports/plugins/core/taxes/lib/collections/index.js","meteor://ğŸ’»app/imports/plugins/core/templates/client/templates/settings.js","meteor://ğŸ’»app/imports/plugins/core/templates/client/index.js","meteor://ğŸ’»app/imports/plugins/core/templates/lib/collections/schemas/emailtemplates.js","meteor://ğŸ’»app/imports/plugins/core/templates/lib/collections/schemas/index.js","meteor://ğŸ’»app/imports/plugins/core/discounts/lib/collections/schemas/config.js","meteor://ğŸ’»app/imports/plugins/core/discounts/lib/collections/schemas/discounts.js","meteor://ğŸ’»app/imports/plugins/core/discounts/lib/collections/schemas/index.js","meteor://ğŸ’»app/imports/plugins/core/discounts/client/components/form.js","meteor://ğŸ’»app/imports/plugins/core/discounts/client/components/list.js","meteor://ğŸ’»app/imports/plugins/core/components/lib/composer/compose.js","meteor://ğŸ’»app/imports/plugins/core/components/lib/composer/index.js","meteor://ğŸ’»app/imports/plugins/core/components/lib/composer/tracker.js","meteor://ğŸ’»app/imports/plugins/core/components/lib/components.js","meteor://ğŸ’»app/imports/plugins/core/components/lib/hoc.js","meteor://ğŸ’»app/imports/plugins/core/components/lib/index.js","meteor://ğŸ’»app/imports/plugins/core/job-collection/lib/index.js","meteor://ğŸ’»app/imports/plugins/core/router/lib/hooks.js","meteor://ğŸ’»app/imports/plugins/core/router/lib/index.js","meteor://ğŸ’»app/imports/plugins/core/router/lib/router.js","meteor://ğŸ’»app/imports/plugins/core/router/client/browserRouter.js","meteor://ğŸ’»app/imports/plugins/core/router/client/index.js","meteor://ğŸ’»app/imports/plugins/core/router/client/startup.js","meteor://ğŸ’»app/imports/plugins/core/i18n/client/components/currencyDropdown.js","meteor://ğŸ’»app/imports/plugins/core/i18n/client/components/languageDropdown.js","meteor://ğŸ’»app/imports/plugins/core/i18n/client/components/localizationSettings.js","meteor://ğŸ’»app/imports/plugins/core/i18n/client/containers/currencyDropdown.js","meteor://ğŸ’»app/imports/plugins/core/i18n/client/containers/languageDropdown.js","meteor://ğŸ’»app/imports/plugins/core/i18n/client/containers/localizationSettings.js","meteor://ğŸ’»app/imports/plugins/core/i18n/client/index.js","meteor://ğŸ’»app/imports/plugins/core/ui-navbar/client/components/brand.js","meteor://ğŸ’»app/imports/plugins/core/ui-navbar/client/components/navbar.js","meteor://ğŸ’»app/imports/plugins/core/ui-navbar/client/components/navbarCheckout.js","meteor://ğŸ’»app/imports/plugins/core/ui-navbar/client/containers/navbar.js","meteor://ğŸ’»app/imports/plugins/core/ui-navbar/client/containers/navbarCheckout.js","meteor://ğŸ’»app/imports/plugins/core/ui-navbar/client/index.js","meteor://ğŸ’»app/imports/plugins/core/ui-tagnav/client/components/tagGroup.js","meteor://ğŸ’»app/imports/plugins/core/ui-tagnav/client/components/tagGroupBody.js","meteor://ğŸ’»app/imports/plugins/core/ui-tagnav/client/components/tagGroupHeader.js","meteor://ğŸ’»app/imports/plugins/core/ui-tagnav/client/components/tagNav.js","meteor://ğŸ’»app/imports/plugins/core/ui-tagnav/client/containers/tagNavContainer.js","meteor://ğŸ’»app/imports/plugins/core/ui-tagnav/client/helpers/index.js","meteor://ğŸ’»app/imports/plugins/core/ui-tagnav/client/helpers/tags.js","meteor://ğŸ’»app/imports/plugins/core/ui-tagnav/client/index.js","meteor://ğŸ’»app/imports/plugins/core/dom/client/dom.js","meteor://ğŸ’»app/imports/plugins/core/dom/client/index.js","meteor://ğŸ’»app/imports/plugins/core/files/client/index.js","meteor://ğŸ’»app/imports/plugins/included/payments-paypal/client/templates/checkout/express/checkoutButton.js","meteor://ğŸ’»app/imports/plugins/included/payments-paypal/client/templates/checkout/express/index.js","meteor://ğŸ’»app/imports/plugins/included/payments-paypal/client/templates/checkout/payflow/index.js","meteor://ğŸ’»app/imports/plugins/included/payments-paypal/client/templates/checkout/payflow/payflowForm.js","meteor://ğŸ’»app/imports/plugins/included/payments-paypal/client/templates/checkout/return/cancel.js","meteor://ğŸ’»app/imports/plugins/included/payments-paypal/client/templates/checkout/return/done.js","meteor://ğŸ’»app/imports/plugins/included/payments-paypal/client/templates/checkout/return/index.js","meteor://ğŸ’»app/imports/plugins/included/payments-paypal/client/templates/settings/express.js","meteor://ğŸ’»app/imports/plugins/included/payments-paypal/client/templates/settings/payflow.js","meteor://ğŸ’»app/imports/plugins/included/payments-paypal/client/lib/paypalRestApi.js","meteor://ğŸ’»app/imports/plugins/included/payments-paypal/client/index.js","meteor://ğŸ’»app/imports/plugins/included/payments-paypal/lib/collections/schemas/index.js","meteor://ğŸ’»app/imports/plugins/included/payments-paypal/lib/collections/schemas/paypal.js","meteor://ğŸ’»app/imports/plugins/included/payments-paypal/lib/api/express.js","meteor://ğŸ’»app/imports/plugins/included/payments-paypal/lib/api/index.js","meteor://ğŸ’»app/imports/plugins/included/payments-paypal/lib/api/payflow.js","meteor://ğŸ’»app/imports/plugins/included/product-variant/client/templates/products/productGrid/publishControls.js","meteor://ğŸ’»app/imports/plugins/included/product-variant/client/templates/products/productSettings/productSettings.js","meteor://ğŸ’»app/imports/plugins/included/product-variant/client/templates/products/products.js","meteor://ğŸ’»app/imports/plugins/included/product-variant/client/templates/products/variantForm.js","meteor://ğŸ’»app/imports/plugins/included/product-variant/client/index.js","meteor://ğŸ’»app/imports/plugins/included/product-variant/components/customer/productGrid.js","meteor://ğŸ’»app/imports/plugins/included/product-variant/components/customer/productGridItem.js","meteor://ğŸ’»app/imports/plugins/included/product-variant/components/gridItemControls.js","meteor://ğŸ’»app/imports/plugins/included/product-variant/components/gridItemNotice.js","meteor://ğŸ’»app/imports/plugins/included/product-variant/components/productGrid.js","meteor://ğŸ’»app/imports/plugins/included/product-variant/components/productGridItems.js","meteor://ğŸ’»app/imports/plugins/included/product-variant/components/products.js","meteor://ğŸ’»app/imports/plugins/included/product-variant/components/variantEdit.js","meteor://ğŸ’»app/imports/plugins/included/product-variant/components/variantForm.js","meteor://ğŸ’»app/imports/plugins/included/product-variant/containers/gridItemControlsContainer.js","meteor://ğŸ’»app/imports/plugins/included/product-variant/containers/gridItemNoticeContainer.js","meteor://ğŸ’»app/imports/plugins/included/product-variant/containers/gridPublishContainer.js","meteor://ğŸ’»app/imports/plugins/included/product-variant/containers/productGridContainer.js","meteor://ğŸ’»app/imports/plugins/included/product-variant/containers/productGridItemsContainer.js","meteor://ğŸ’»app/imports/plugins/included/product-variant/containers/productsContainer.js","meteor://ğŸ’»app/imports/plugins/included/product-variant/containers/productsContainerAdmin.js","meteor://ğŸ’»app/imports/plugins/included/product-variant/containers/productsContainerCustomer.js","meteor://ğŸ’»app/imports/plugins/included/product-variant/containers/variantEditContainer.js","meteor://ğŸ’»app/imports/plugins/included/product-variant/containers/variantFormContainer.js","meteor://ğŸ’»app/imports/plugins/included/inventory/client/index.js","meteor://ğŸ’»app/imports/plugins/included/marketplace/client/templates/becomeSellerButton/becomeSellerButton.js","meteor://ğŸ’»app/imports/plugins/included/marketplace/client/templates/dashboard/merchant-settings.js","meteor://ğŸ’»app/imports/plugins/included/marketplace/client/templates/dashboard/settings.js","meteor://ğŸ’»app/imports/plugins/included/marketplace/client/templates/shops/shopSelect.js","meteor://ğŸ’»app/imports/plugins/included/marketplace/client/templates/stripeConnectSignupButton/stripeConnectSignupButton.js","meteor://ğŸ’»app/imports/plugins/included/marketplace/client/components/index.js","meteor://ğŸ’»app/imports/plugins/included/marketplace/client/components/inviteOwner.js","meteor://ğŸ’»app/imports/plugins/included/marketplace/client/components/marketplaceShopTableCell.js","meteor://ğŸ’»app/imports/plugins/included/marketplace/client/components/marketplaceShops.js","meteor://ğŸ’»app/imports/plugins/included/marketplace/client/containers/index.js","meteor://ğŸ’»app/imports/plugins/included/marketplace/client/containers/marketplaceShops.js","meteor://ğŸ’»app/imports/plugins/included/marketplace/client/index.js","meteor://ğŸ’»app/imports/plugins/included/marketplace/lib/collections/schemas/index.js","meteor://ğŸ’»app/imports/plugins/included/marketplace/lib/collections/schemas/marketplace.js","meteor://ğŸ’»app/imports/plugins/included/marketplace/lib/constants.js","meteor://ğŸ’»app/imports/plugins/included/shipping-rates/client/templates/settings/rates.js","meteor://ğŸ’»app/imports/plugins/included/shipping-rates/client/templates/index.js","meteor://ğŸ’»app/imports/plugins/included/shipping-rates/client/index.js","meteor://ğŸ’»app/imports/plugins/included/social/client/templates/apps/facebook.js","meteor://ğŸ’»app/imports/plugins/included/social/client/templates/apps/googleplus.js","meteor://ğŸ’»app/imports/plugins/included/social/client/templates/apps/pinterest.js","meteor://ğŸ’»app/imports/plugins/included/social/client/templates/apps/twitter.js","meteor://ğŸ’»app/imports/plugins/included/social/client/templates/dashboard/social.js","meteor://ğŸ’»app/imports/plugins/included/social/client/templates/social.js","meteor://ğŸ’»app/imports/plugins/included/social/client/components/facebook.js","meteor://ğŸ’»app/imports/plugins/included/social/client/components/googleplus.js","meteor://ğŸ’»app/imports/plugins/included/social/client/components/index.js","meteor://ğŸ’»app/imports/plugins/included/social/client/components/pinterest.js","meteor://ğŸ’»app/imports/plugins/included/social/client/components/settings.js","meteor://ğŸ’»app/imports/plugins/included/social/client/components/socialButtons.js","meteor://ğŸ’»app/imports/plugins/included/social/client/components/twitter.js","meteor://ğŸ’»app/imports/plugins/included/social/client/containers/socialSettingsContainer.js","meteor://ğŸ’»app/imports/plugins/included/social/client/index.js","meteor://ğŸ’»app/imports/plugins/included/social/lib/helpers.js","meteor://ğŸ’»app/imports/plugins/included/connectors-shopify/client/settings/shopify.js","meteor://ğŸ’»app/imports/plugins/included/connectors-shopify/client/index.js","meteor://ğŸ’»app/imports/plugins/included/connectors-shopify/lib/collections/schemas/index.js","meteor://ğŸ’»app/imports/plugins/included/connectors-shopify/lib/collections/schemas/shopifyConnect.js","meteor://ğŸ’»app/imports/plugins/included/discount-codes/client/templates/codes.js","meteor://ğŸ’»app/imports/plugins/included/discount-codes/client/templates/index.js","meteor://ğŸ’»app/imports/plugins/included/discount-codes/client/templates/settings.js","meteor://ğŸ’»app/imports/plugins/included/discount-codes/client/collections/codes.js","meteor://ğŸ’»app/imports/plugins/included/discount-codes/client/index.js","meteor://ğŸ’»app/imports/plugins/included/discount-codes/lib/collections/schemas/codes.js","meteor://ğŸ’»app/imports/plugins/included/discount-codes/lib/collections/schemas/config.js","meteor://ğŸ’»app/imports/plugins/included/discount-codes/lib/collections/schemas/index.js","meteor://ğŸ’»app/imports/plugins/included/discount-rates/client/settings/rates.js","meteor://ğŸ’»app/imports/plugins/included/discount-rates/client/collections/rates.js","meteor://ğŸ’»app/imports/plugins/included/discount-rates/client/index.js","meteor://ğŸ’»app/imports/plugins/included/discount-rates/lib/collections/schemas/config.js","meteor://ğŸ’»app/imports/plugins/included/discount-rates/lib/collections/schemas/index.js","meteor://ğŸ’»app/imports/plugins/included/discount-rates/lib/collections/schemas/rates.js","meteor://ğŸ’»app/imports/plugins/included/notifications/client/templates/notifications.js","meteor://ğŸ’»app/imports/plugins/included/notifications/client/components/index.js","meteor://ğŸ’»app/imports/plugins/included/notifications/client/components/notification.js","meteor://ğŸ’»app/imports/plugins/included/notifications/client/components/notificationDropdown.js","meteor://ğŸ’»app/imports/plugins/included/notifications/client/components/notificationRoute.js","meteor://ğŸ’»app/imports/plugins/included/notifications/client/containers/index.js","meteor://ğŸ’»app/imports/plugins/included/notifications/client/containers/notification.js","meteor://ğŸ’»app/imports/plugins/included/notifications/client/containers/notificationRoute.js","meteor://ğŸ’»app/imports/plugins/included/notifications/client/index.js","meteor://ğŸ’»app/imports/plugins/included/payments-authnet/client/checkout/authnet.js","meteor://ğŸ’»app/imports/plugins/included/payments-authnet/client/settings/authnet.js","meteor://ğŸ’»app/imports/plugins/included/payments-authnet/client/api/authnet.js","meteor://ğŸ’»app/imports/plugins/included/payments-authnet/client/api/index.js","meteor://ğŸ’»app/imports/plugins/included/payments-authnet/client/index.js","meteor://ğŸ’»app/imports/plugins/included/payments-authnet/lib/collections/schemas/authnet.js","meteor://ğŸ’»app/imports/plugins/included/payments-authnet/lib/collections/schemas/index.js","meteor://ğŸ’»app/imports/plugins/included/payments-braintree/client/checkout/braintree.js","meteor://ğŸ’»app/imports/plugins/included/payments-braintree/client/settings/braintree.js","meteor://ğŸ’»app/imports/plugins/included/payments-braintree/client/api/braintree.js","meteor://ğŸ’»app/imports/plugins/included/payments-braintree/client/index.js","meteor://ğŸ’»app/imports/plugins/included/payments-braintree/lib/collections/schemas/braintree.js","meteor://ğŸ’»app/imports/plugins/included/payments-braintree/lib/collections/schemas/index.js","meteor://ğŸ’»app/imports/plugins/included/payments-stripe/client/checkout/stripe.js","meteor://ğŸ’»app/imports/plugins/included/payments-stripe/client/settings/authorize.js","meteor://ğŸ’»app/imports/plugins/included/payments-stripe/client/settings/merchant-settings.js","meteor://ğŸ’»app/imports/plugins/included/payments-stripe/client/settings/stripe.js","meteor://ğŸ’»app/imports/plugins/included/payments-stripe/client/index.js","meteor://ğŸ’»app/imports/plugins/included/payments-stripe/lib/collections/schemas/index.js","meteor://ğŸ’»app/imports/plugins/included/payments-stripe/lib/collections/schemas/stripe.js","meteor://ğŸ’»app/imports/plugins/included/product-admin/client/templates/productAdmin.js","meteor://ğŸ’»app/imports/plugins/included/product-admin/client/components/index.js","meteor://ğŸ’»app/imports/plugins/included/product-admin/client/components/productAdmin.js","meteor://ğŸ’»app/imports/plugins/included/product-admin/client/containers/productAdmin.js","meteor://ğŸ’»app/imports/plugins/included/product-admin/client/index.js","meteor://ğŸ’»app/imports/plugins/included/product-detail-simple/client/templates/productDetailSimple.js","meteor://ğŸ’»app/imports/plugins/included/product-detail-simple/client/components/addToCartButton.js","meteor://ğŸ’»app/imports/plugins/included/product-detail-simple/client/components/childVariant.js","meteor://ğŸ’»app/imports/plugins/included/product-detail-simple/client/components/index.js","meteor://ğŸ’»app/imports/plugins/included/product-detail-simple/client/components/metadata.js","meteor://ğŸ’»app/imports/plugins/included/product-detail-simple/client/components/priceRange.js","meteor://ğŸ’»app/imports/plugins/included/product-detail-simple/client/components/productDetail.js","meteor://ğŸ’»app/imports/plugins/included/product-detail-simple/client/components/productField.js","meteor://ğŸ’»app/imports/plugins/included/product-detail-simple/client/components/productNotFound.js","meteor://ğŸ’»app/imports/plugins/included/product-detail-simple/client/components/tags.js","meteor://ğŸ’»app/imports/plugins/included/product-detail-simple/client/components/variant.js","meteor://ğŸ’»app/imports/plugins/included/product-detail-simple/client/components/variantList.js","meteor://ğŸ’»app/imports/plugins/included/product-detail-simple/client/containers/index.js","meteor://ğŸ’»app/imports/plugins/included/product-detail-simple/client/containers/productDetail.js","meteor://ğŸ’»app/imports/plugins/included/product-detail-simple/client/containers/publish.js","meteor://ğŸ’»app/imports/plugins/included/product-detail-simple/client/containers/social.js","meteor://ğŸ’»app/imports/plugins/included/product-detail-simple/client/containers/variantList.js","meteor://ğŸ’»app/imports/plugins/included/product-detail-simple/client/selectors/variants.js","meteor://ğŸ’»app/imports/plugins/included/product-detail-simple/client/index.js","meteor://ğŸ’»app/imports/plugins/included/search-mongo/client/settings/search.js","meteor://ğŸ’»app/imports/plugins/included/search-mongo/client/index.js","meteor://ğŸ’»app/imports/plugins/included/search-mongo/lib/collections/schemas/index.js","meteor://ğŸ’»app/imports/plugins/included/search-mongo/lib/collections/schemas/search.js","meteor://ğŸ’»app/imports/plugins/included/shipping-shippo/client/settings/carriers.js","meteor://ğŸ’»app/imports/plugins/included/shipping-shippo/client/settings/shippo.js","meteor://ğŸ’»app/imports/plugins/included/shipping-shippo/client/settings/shippoTableColumn.js","meteor://ğŸ’»app/imports/plugins/included/shipping-shippo/client/index.js","meteor://ğŸ’»app/imports/plugins/included/shipping-shippo/lib/collections/schemas/index.js","meteor://ğŸ’»app/imports/plugins/included/shipping-shippo/lib/collections/schemas/shippo.js","meteor://ğŸ’»app/imports/plugins/included/sms/client/templates/smsSettings.js","meteor://ğŸ’»app/imports/plugins/included/sms/client/actions/index.js","meteor://ğŸ’»app/imports/plugins/included/sms/client/actions/settings.js","meteor://ğŸ’»app/imports/plugins/included/sms/client/components/smsSettings.js","meteor://ğŸ’»app/imports/plugins/included/sms/client/containers/smsSettingsContainer.js","meteor://ğŸ’»app/imports/plugins/included/sms/client/index.js","meteor://ğŸ’»app/imports/plugins/included/taxes-avalara/client/settings/avalara.js","meteor://ğŸ’»app/imports/plugins/included/taxes-avalara/client/components/avalaraSettingsForm.js","meteor://ğŸ’»app/imports/plugins/included/taxes-avalara/client/components/index.js","meteor://ğŸ’»app/imports/plugins/included/taxes-avalara/client/containers/avalaraSettingsFormContainer.js","meteor://ğŸ’»app/imports/plugins/included/taxes-avalara/client/containers/index.js","meteor://ğŸ’»app/imports/plugins/included/taxes-avalara/client/index.js","meteor://ğŸ’»app/imports/plugins/included/taxes-avalara/lib/collections/schemas/index.js","meteor://ğŸ’»app/imports/plugins/included/taxes-avalara/lib/collections/schemas/schema.js","meteor://ğŸ’»app/imports/plugins/included/taxes-taxcloud/client/settings/taxcloud.js","meteor://ğŸ’»app/imports/plugins/included/taxes-taxcloud/client/components/index.js","meteor://ğŸ’»app/imports/plugins/included/taxes-taxcloud/client/components/taxCloudSettingsForm.js","meteor://ğŸ’»app/imports/plugins/included/taxes-taxcloud/client/containers/index.js","meteor://ğŸ’»app/imports/plugins/included/taxes-taxcloud/client/containers/taxCloudSettingsFormContainer.js","meteor://ğŸ’»app/imports/plugins/included/taxes-taxcloud/client/index.js","meteor://ğŸ’»app/imports/plugins/included/taxes-taxcloud/lib/collections/schemas/index.js","meteor://ğŸ’»app/imports/plugins/included/taxes-taxcloud/lib/collections/schemas/schema.js","meteor://ğŸ’»app/imports/plugins/included/taxes-taxjar/client/settings/taxjar.js","meteor://ğŸ’»app/imports/plugins/included/taxes-taxjar/client/index.js","meteor://ğŸ’»app/imports/plugins/included/taxes-taxjar/lib/collections/schemas/index.js","meteor://ğŸ’»app/imports/plugins/included/taxes-taxjar/lib/collections/schemas/schema.js","meteor://ğŸ’»app/imports/plugins/included/ui-search/lib/components/searchModal.js","meteor://ğŸ’»app/imports/plugins/included/ui-search/lib/containers/searchModalContainer.js","meteor://ğŸ’»app/imports/plugins/included/ui-search/lib/containers/searchSubscription.js","meteor://ğŸ’»app/imports/plugins/included/ui-search/lib/helpers/accountsTable.js","meteor://ğŸ’»app/imports/plugins/included/ui-search/lib/helpers/index.js","meteor://ğŸ’»app/imports/plugins/included/ui-search/client/index.js","meteor://ğŸ’»app/imports/plugins/included/default-theme/client/favicons.js","meteor://ğŸ’»app/imports/plugins/included/default-theme/client/index.js","meteor://ğŸ’»app/imports/plugins/custom/knowledge-payments/client/settings/templates/knowledgeSettings.js","meteor://ğŸ’»app/imports/plugins/custom/knowledge-payments/client/settings/components/KnowledgeSettingsForm.js","meteor://ğŸ’»app/imports/plugins/custom/knowledge-payments/client/settings/components/index.js","meteor://ğŸ’»app/imports/plugins/custom/knowledge-payments/client/settings/containers/index.js","meteor://ğŸ’»app/imports/plugins/custom/knowledge-payments/client/settings/containers/knowledgeSettingsFormContainer.js","meteor://ğŸ’»app/imports/plugins/custom/knowledge-payments/client/checkout/knowledgePaymentForm.js","meteor://ğŸ’»app/imports/plugins/custom/knowledge-payments/client/index.js","meteor://ğŸ’»app/lib/api/router/metadata.js","meteor://ğŸ’»app/lib/api/account-validation.js","meteor://ğŸ’»app/lib/api/catalog.js","meteor://ğŸ’»app/lib/api/core.js","meteor://ğŸ’»app/lib/api/helpers.js","meteor://ğŸ’»app/lib/api/index.js","meteor://ğŸ’»app/lib/api/match.js","meteor://ğŸ’»app/lib/api/products.js","meteor://ğŸ’»app/lib/api/prop-types.js","meteor://ğŸ’»app/lib/collections/schemas/accounts.js","meteor://ğŸ’»app/lib/collections/schemas/address.js","meteor://ğŸ’»app/lib/collections/schemas/assets.js","meteor://ğŸ’»app/lib/collections/schemas/cart.js","meteor://ğŸ’»app/lib/collections/schemas/catalog.js","meteor://ğŸ’»app/lib/collections/schemas/emails.js","meteor://ğŸ’»app/lib/collections/schemas/event.js","meteor://ğŸ’»app/lib/collections/schemas/groups.js","meteor://ğŸ’»app/lib/collections/schemas/helpers.js","meteor://ğŸ’»app/lib/collections/schemas/index.js","meteor://ğŸ’»app/lib/collections/schemas/inventory.js","meteor://ğŸ’»app/lib/collections/schemas/layouts.js","meteor://ğŸ’»app/lib/collections/schemas/logs.js","meteor://ğŸ’»app/lib/collections/schemas/metafield.js","meteor://ğŸ’»app/lib/collections/schemas/notifications.js","meteor://ğŸ’»app/lib/collections/schemas/orders.js","meteor://ğŸ’»app/lib/collections/schemas/payments.js","meteor://ğŸ’»app/lib/collections/schemas/products.js","meteor://ğŸ’»app/lib/collections/schemas/registry.js","meteor://ğŸ’»app/lib/collections/schemas/revisions.js","meteor://ğŸ’»app/lib/collections/schemas/shipping.js","meteor://ğŸ’»app/lib/collections/schemas/shops.js","meteor://ğŸ’»app/lib/collections/schemas/sms.js","meteor://ğŸ’»app/lib/collections/schemas/social.js","meteor://ğŸ’»app/lib/collections/schemas/tags.js","meteor://ğŸ’»app/lib/collections/schemas/templates.js","meteor://ğŸ’»app/lib/collections/schemas/translations.js","meteor://ğŸ’»app/lib/collections/schemas/workflow.js","meteor://ğŸ’»app/lib/collections/transform/cartOrder.js","meteor://ğŸ’»app/lib/collections/collections.js","meteor://ğŸ’»app/lib/collections/index.js","meteor://ğŸ’»app/lib/collections/jobs.js","meteor://ğŸ’»app/lib/collections/search.js","meteor://ğŸ’»app/lib/core/templates.js","meteor://ğŸ’»app/lib/selectors/tags.js","meteor://ğŸ’»app/lib/selectors/variants.js","meteor://ğŸ’»app/client/lib/buffer.js","meteor://ğŸ’»app/client/modules/core/helpers/apps.js","meteor://ğŸ’»app/client/modules/core/helpers/globals.js","meteor://ğŸ’»app/client/modules/core/helpers/layout.js","meteor://ğŸ’»app/client/modules/core/helpers/permissions.js","meteor://ğŸ’»app/client/modules/core/helpers/templates.js","meteor://ğŸ’»app/client/modules/core/helpers/utils.js","meteor://ğŸ’»app/client/modules/core/accounts.js","meteor://ğŸ’»app/client/modules/core/index.js","meteor://ğŸ’»app/client/modules/core/startup.js","meteor://ğŸ’»app/client/modules/core/subscriptions.js","meteor://ğŸ’»app/client/modules/core/main.js","meteor://ğŸ’»app/client/modules/i18n/currency.js","meteor://ğŸ’»app/client/modules/i18n/helpers.js","meteor://ğŸ’»app/client/modules/i18n/index.js","meteor://ğŸ’»app/client/modules/i18n/startup.js","meteor://ğŸ’»app/client/modules/i18n/main.js","meteor://ğŸ’»app/client/modules/logger/index.js","meteor://ğŸ’»app/client/modules/router/helpers.js","meteor://ğŸ’»app/client/modules/router/hooks.js","meteor://ğŸ’»app/client/modules/router/index.js","meteor://ğŸ’»app/client/modules/router/main.js","meteor://ğŸ’»app/client/api/index.js","meteor://ğŸ’»app/client/collections/countries.js","meteor://ğŸ’»app/client/collections/index.js","meteor://ğŸ’»app/client/collections/taxEntitycodes.js","meteor://ğŸ’»app/client/config/defaults.js","meteor://ğŸ’»app/client/plugins.js"],"names":["Template","module","watch","require","v","Components","checkoutAddressBook","helpers","AddressBook","currentData","status","position","component","heading","defaultValue","i18nKey","checkout","icon","template","CompletedOrderContainer","cartCompleted","completedOrder","Meteor","Reaction","Cart","checkoutLogin","checkoutLoginCompleted","self","cart","findOne","workflow","currentStatus","guestUser","hasPermission","user","_includes","checkoutProgressBar","progressbarStatusClass","cartWorkflow","thisStep","previouslyVisited","CartSubTotals","checkoutReview","onRendered","call","cartCheckout","Subscriptions","ready","cartCount","items","length","onCreated","_id","checkoutSteps","isCompleted","isPending","checkoutStepBadge","checkoutStepBadgeClass","workflowStep","instance","data","Swiper","$","Session","cartDrawer","displayCartDrawer","equals","storedCart","count","quantity","emptyCartDrawer","openCartDrawer","swiper","fadeIn","direction","setWrapperSize","loop","grabCursor","slidesPerView","wrapperClass","slideClass","slideActiveClass","pagination","paginationClickable","CartDrawerContainer","CartDrawer","EmptyCartDrawer","cartIcon","events","fadeOut","toggleSession","module1","React","Component","PropTypes","Orders","i18next","AddEmail","props","handleFieldChange","event","value","field","setState","state","hasEmail","orderEmail","order","handleSubmit","bind","preventDefault","cartId","Router","getQueryParam","email","err","results","Alerts","toast","t","userId","error","render","propTypes","object","string","exportDefault","productItems","pdpPath","handleRemoveItem","handleCheckout","handleImage","handleLowInventory","handleShowProduct","map","item","func","array","CartIcon","handleClick","getCount","isRequired","registerComponent","CartItems","removalClick","mediaUrl","display","productId","backgroundImage","marginRight","title","variants","CartPanel","textAlign","marginBottom","marginTop","fontSize","onClick","classnames","CartSubTotal","componentWillReceiveProps","nextProps","validateDiscount","Number","source","cartDiscount","validateShipping","cartShipping","validateTaxes","cartTaxes","isLoading","tableClass","cartSubTotal","cartTotal","number","bool","CompletedShopOrders","CompletedOrderPaymentMethod","CompletedOrderSummary","CompletedOrder","shops","orderSummary","paymentMethods","isProfilePage","headerText","shop","shopKey","Object","keys","name","shippingMethod","shipping","shipment","address","fullName","address1","address2","city","region","postal","country","paymentMethod","key","getPrimaryMediaForOrderItem","CompletedOrderItem","product","price","creditCardClasses","VISA","MAST","DISC","AMEX","processor","method","storedCard","creditCardType","substring","toUpperCase","creditCardClass","ShopOrderSummary","discounts","total","shopName","shippingName","label","deliveryDate","carrier","handleKeepShopping","stopPropagation","keepShopping","shopSummary","quantityTotal","subTotal","taxes","_withProps","_compose","composeWithTracker","ReactionProduct","handlers","media","url","store","productItem","inventoryPolicy","lowInventoryWarningThreshold","inventoryQuantity","go","handle","variantId","setCurrentVariant","pathFor","hash","cartItemElement","target","closest","set","composer","onData","shopId","marketplace","merchantCarts","getShopId","getPrimaryShopId","subscribe","Velocity","e","document","querySelector","opacity","subscription","setTimeout","stopped","getSubTotal","getShippingTotal","getDiscounts","getTaxTotal","getTotal","hocs","sessionId","get","Manager","orderSub","imageSub","subtotal","shippingTotal","tax","getShopSummary","getUniquePaymentMethods","registerHelper","cartHelpers","showCartIconWarning","showLowInventoryWarning","showItemLowInventoryWarning","variant","billing","replace","_clone","check","Logger","methods","checkoutCart","invoice","selector","update","$set","$addToSet","result","debug","Error","inline","autoHide","placement","exports","CartIconContainer","CartPanelContainer","CartSubTotalContainer","_groupBy","ReactiveDict","pkgPermissions","pkg","enableReactionPackage","reactionPackage","packageId","app","i18nKeyLabel","type","route","disableReactionPackage","alert","showCancelButton","packagesGrid","setDefault","groups","appsByGroup","apps","autorun","Apps","provides","enabled","groupedApps","container","appsInGroup","groupName","group","packagesGridGroup","packageProps","enablePackage","gridPackage","cardProps","package","packageName","controls","priority","push","onIcon","toggle","toggleOn","pushActionView","onContentClick","showPackageManagementEvent","PackageList","PackageListContainer","dashboardPackages","PackageListComponent","ShopBrandImageOption","ShopBrandMediaManager","renderBrandImages","brandMediaList","selectedMediaId","metadata","arrayOf","_isArray","AutoForm","Packages","Shops","Media","shopSettings","checked","shown","brandAssets","mediaId","ownerId","findLocal","packageData","addressBook","showAppSwitch","getMarketplaceSettings","hooks","shopEditForm","onSuccess","onError","operation","shopEditAddressForm","shopEditExternalServicesForm","shopEditOptionsForm","settingsKey","getAttribute","fields","property","optionsShopSettings","isSelected","asset","handleRemoveClick","confirmButtonText","shouldRemove","remove","catch","FileRecord","Products","uploadHandler","files","i","parts","split","$elemMatch","barcode","fileRecord","fromFile","upload","then","insert","import","_find","settingsHeader","registry","getActionView","isActionViewAtRootView","thisApp","reactionApp","getRouteName","settingsData","includes","hideActionView","popActionView","settingsSidebar","settingsSidebarItem","parentData","translateRegistry","dashboardHeader","getRegistryForCurrentRoute","showActionView","Blaze","Admin","Radium","VelocityTransitionGroup","debounce","IconButton","Translation","Overlay","getComponent","getStyles","minWidth","Math","min","viewportWidth","viewSize","viewMaxSize","actionView","isBigView","meta","isSmView","dashboardSize","isMdView","isLgView","actionViewIsOpen","base","width","maxWidth","header","alignItems","minHeight","height","padding","flex","margin","body","overflow","WebkitOverflowScrolling","masterViewPanel","masterView","detailViewPanel","top","right","zIndex","detailView","backButton","backButtonContainers","ActionView","isMobile","enterAnimation","animation","translateX","duration","easing","leaveAnimation","rtlEnterAnimation","rtlLeaveAnimation","enterAnimationForDetailView","leaveAnimationForDetailView","handleResize","window","componentDidMount","addEventListener","componentWillUnmount","removeEventListener","renderControlComponent","styles","createElement","renderDetailComponent","renderFooter","renderBackButton","button","handleActionViewBack","handleActionViewClose","renderDetailViewBackButton","isDetailViewAtRootView","handleActionViewDetailBack","handleActionViewDetailClose","renderMasterView","renderDetailView","baseClassName","detailViewIsOpen","backButtonEnterAnimation","backButtonLeaveAnimaton","renderActionView","showDetailViewOverlay","isRtl","className","showOverlay","matchMedia","matches","includesDashboard","actionViewIsLargeSize","left","opaticy","buttons","language","Toolbar","ShortcutBar","_map","Card","CardHeader","CardBody","CardGroup","ListItem","isExpanded","cardName","handleCardExpand","onCardExpand","renderSections","groupedPackages","Array","isArray","packages","index","elements","handleShowPackage","actionComponent","i18nKeyTitle","ShopSelect","renderDropDownMenu","menuItems","isTagNav","onShopSelectChange","_isEqual","FlatButton","Icon","renderAdminButton","handleShowDashboard","isActive","currentView","handleOpenShortcut","justifyContent","Tracker","Switch","VerticalDivider","Translatable","PublishControls","onViewContextChange","isChecked","tracker","hasShopSwitcherAccess","getSellerShopId","stop","renderViewControls","showViewAsControls","isVisible","handleVisibilityChange","renderShopSelect","renderVisibilitySwitch","hasCreateProductAccess","isPreview","renderAddButton","onAddProduct","renderPackageButons","packageButtons","packageButton","renderCustomControls","dashboardHeaderTemplate","isEnabled","oneOfType","node","documentIds","documents","onVisibilityChange","translation","shape","lang","defaultProps","export","ActionViewContainer","StyleRoot","AdminContextProvider","popActionViewDetail","hideActionViewDetail","shortcuts","shortcut","href","isActiveClassName","tooltip","i18nKeyTooltip","tooltipPosition","max","documentElement","clientWidth","innerWidth","isAdminArea","getActionViewDetail","isActionViewDetailAtRootView","isActionViewOpen","isActionViewDetailOpen","Comp","CompositeComponent","ToolbarContainer","Roles","audience","getRolesForUser","settings","dashboard","filter","d","actions","Tags","isRevisionControlEnabled","handleAddProduct","setUserPreferences","isClient","currentTag","currentTagId","handleShopSelectChange","test","setShopId","routeName","shopIds","getShopsForUser","find","$in","fetch","showPackageShortcuts","registryItems","i18n","handleViewContextChange","inlineAlert","isFirstRender","$node","firstNode","defer","collection_","seen","removeClass","hide","options","inlineAlerts","alerts","alertPlacement","alertId","id","_defaults","Mongo","defaultOptions","dismissable","classes","alertsLimit","html","add","alertMessage","mode","alertOptions","a","message","sort","created","skip","forEach","row","Date","removeSeen","$ne","removeType","Collection","_isObject","ReactDOM","swal","Alert","getRootNode","getAlertWrapper","rootNode","getElementById","insertAdjacentHTML","initAlertWrapper","startup","assign","titleOrOptions","messageOrCallback","callback","useRejections","isConfirm","dismiss","undefined","text","success","createContentMenu","buttonProps","notFound","getElementsByTagName","unauthorized","addBodyClasses","context","theme","join","addClass","Hooks","onEnter","PrimaryShop","MerchantShops","marketplaceEnabled","merchantTheme","CoreLayout","structure","layoutHeader","layoutFooter","headerComponent","footerComponent","pageClassName","mainNode","mainComponent","Footer","PrintLayout","ReactionLayout","Templates","checkElementPermissions","block","permissions","hasAdminAccess","defaultAudience","defaultPermissions","renderLayout","children","childElements","child","childIndex","layoutProps","element","rui","size","align","justify","axis","horizontal","vertical","style","layout","sub","templateInfo","layoutName","templateData","_filter","ServiceConfiguration","Collections","ServiceConfigHelper","accountsDashboard","isShopMember","role","isShopGuest","members","subscriptionsReady","shopUsers","users","member","userSub","Accounts","emails","username","isAdmin","userIsInRole","roles","services","AccountsDashboard","accountsSettings","serviceHelper","configurations","matchingConfigurations","service","valueForField","fieldName","configFieldsForService","currentTarget","input","attr","loginInline","loginInlineComponent","LoginInline","loginForm","Login","loginFormMessages","LoginFormMessages","_get","_uniq","_each","getPermissionMap","permissionMap","existing","permission","val","setActionViewDetail","memberSettings","isOwnerDisabled","hasPermissionChecked","GLOBAL_GROUP","groupsForUser","groupUserId","getGroupsForUser","shopLabel","thisShopId","permissionGroups","registryItem","x","hasManyPermissions","Boolean","showAvalaraTaxSettings","avalara","accountsDetail","ReactionAvatar","is","$icon","confirm","ReactiveVar","isOwnerOfProfile","targetUserId","loggedInUserId","getTargetAccount","account","accountProfile","userHasPassword","doesUserExist","targetUser","UpdateEmail","profile","picture","currentUser","src","userOrders","createdAt","limit","displayName","Account","displayEmail","defaultEmail","showMerchantSignup","allowMerchantSignup","userHasShop","userOrdersList","completedOrders","orders","OrdersList","Random","LoginFormSharedHelpers","LoginFormValidation","onResetPasswordLink","token","done","renderWithData","loginFormUpdatePasswordOverlay","isOpen","onEnrollmentLink","loginFormChangePassword","uniqueId","formMessages","oldPasswordInput","passwordInput","oldPassword","trim","password","validatedOldPassword","validationLevel","validatedPassword","templateInstance","errors","isEmptyObject","changePassword","info","reason","messages","hasError","capitalize","str","finalString","String","charAt","slice","_isFunction","_extend","providers","Facebook","Google","Twitter","availableServices","Package","oauth","serviceNames","capitalizedServiceName","capitalizedName","extendEach","sortUsersIntoGroups","sortGroups","accounts","adminGroups","sortedGroups","defaultSelectedGroup","selectedGroup","grp","renderGroupsTable","loading","handleMethodLoad","handleMethodDone","handleGroupSelect","renderGroupDetail","setEntryMode","switchMode","newMode","editAddress","onSelect","usage","updateAddress","findAddress","onRemove","removeAddress","onAdd","validateAddress","addAddress","hasEditAddress","clearForm","validated","validationResults","onCancel","onEdit","initMode","addy","renderCheckoutIcon","renderHeading","renderControlBar","controlBarContent","translationContent","hasAddress","renderContent","countries","regionsByCountry","markCart","content","phone","isBillingDefault","isShippingDefault","isCommercal","oneOf","HTTP","AddressBookForm","fieldLabelMap","clientValidation","enteredAddress","requiredFields","validation","isValid","indexOf","onSubmit","onFieldChange","setRegionOptions","onSelectChange","Event","regions","isCommercial","res","countryCode","country_code","prevState","componentWillMount","firstRegion","renderAddressOptions","paddingLeft","renderButtons","cancel","cancelBtn","regionField","AddressBookGrid","defaultShippingAddressId","defaultBillingAddressId","select","setDefaultAddress","renderAddress","renderAddressGrid","edit","activeShipping","activeBilling","keyCode","defaultShippingAddress","defaultBillingAddress","AddressBookReview","isEnteredSelected","handleSelection","suggestedAddress","handleEdit","selectEntered","selectSuggested","renderField","showError","fieldErrors","_startCase","ReactionAlerts","getDefaultUserInviteGroup","AdminInviteForm","removeAlert","oldAlert","alertArray","onChange","groupId","messageKey","renderDropDownButton","buttonElement","opt","dropOptions","renderForm","canInviteToGroup","_isEmpty","groupPermissions","EditGroup","selectGroup","onChangeGroup","isEditing","groupListClass","createGroup","groupData","updateGroup","showForm","renderGroupForm","renderPermissionsList","renderGroups","Button","TextField","Forgot","onFormSubmit","credentials","renderFormMessages","renderEmailErrors","i18nKeyReason","renderSpinnerOnWait","isDisabled","emailClasses","onSignInClick","GroupForm","description","submitLabel","GroupHeader","columnName","showSortItems","numberOfRows","SortableTable","GroupsTable","columnMetadata","Header","accessor","Cell","onGroupSelect","withPermissions","GroupsTableButton","handleRemoveUserFromGroup","hasPermissions","slug","withMoment","getUserAvatar","GroupsTableCell","handleUserGroupChange","moment","userAvatar","format","toLocaleString","ownerGroup","hasOwnerAccess","onMethodDone","onMethodLoad","dropDownButton","ownerGrpId","loginFormCurrentView","showForgotPasswordView","showSignUpView","showSignInView","LoginButtons","renderLoginButtons","enabledServices","loginServices","onSocialClick","capitalizeName","renderSeparator","onSeparator","ValidEmail","handleEmailSubmit","renderEmailForm","i18nKeyMessage","allowGuestCheckout","continueAsGuest","iconStyle","menuStyle","MainDropdown","userImage","userName","color","fontWeight","letterSpacing","renderAdminIcons","adminShortcuts","renderUserIcons","userShortcuts","option","renderSignOutButton","renderSignInComponent","currentAccount","paddingRight","handleChange","to","attachment","getInvitableGroups","ManageGroups","groupsInvitable","allOrdersInfo","orderKey","orderId","_compact","_remove","resolvePermissions","removePermissions","current","old","currentArray","PermissionsList","togglePermission","toggledPermission","renderSubPermissions","childPermission","renderPermissions","jsx","SignIn","location","renderPasswordErrors","passwordClasses","onForgotPasswordClick","onSignUpClick","SignUp","hasPasswordService","showSpinner","newEmail","oldEmail","handleUpdateEmail","UpdatePasswordOverlay","handleCancel","renderSpinnerOnLoad","renderPasswordResetText","PropType","VerifyAccount","classNames","withIsAdmin","Groups","alertConfirm","updateMethodCall","finally","changeOwnerWarn","cancelButtonText","removeMethodCall","adminUserSub","grpSub","adminQuery","adminUsers","ids","reduce","admGrps","Countries","Promise","resolve","reject","errorMessage","details","formErrors","summary","shopCountries","locales","states","templateHeading","AuthContainer","handleFormSubmit","pword","validatedEmail","loginWithPassword","currentRoute","path","newUserData","createUser","shouldShowSeperator","handleSocialLogin","serviceName","loginWithService","renderAuthView","ForgotPassword","ForgotPasswordContainer","emailAddress","LoginInlineContainer","pushCartWorkflow","isStripeEnabled","primaryShopId","stripePkg","getPackageSettingsWithOptions","withCurrentAccount","i18nextDep","displayUser","depend","getAdminShortcutIcons","logout","wrapComponent","reasons","passwordValue","resetPassword","getUserPreferences","handleFormCancel","orderInfo","verified","onEmailVerificationLink","verifyEmail","wrapper","affectedDocs","newGroups","matchingAccounts","acc","prev","next","firstGroup","registeredPackages","newObj","Instagram","addProvider","provider","AccountsDashboardContainer","AddressBookContainer","UserOrdersListContainer","EditGroupContainer","MainDropdownContainer","MessagesContainer","UpdatePasswordOverlayContainer","connectorSettings","completedPDFLayout","readyVar","params","dateFormat","locale","Locale","f","ordersListSummary","accounting","InvoiceContainer","getBillingInfo","orderCreditMethod","creditMethods","creditMethod","coreOrderShippingInvoice","refunds","refundAmount","isCapturing","isRefunding","isFetching","currencies","currency","warn","reverse","invoiceTotal","currencySymbol","symbol","paymentPackageId","paymentSettingsKey","checkSupportedMethods","support","orderStatus","orderMode","alertText","showCloseButton","confirmButtonColor","cancelButtonColor","returnToStock","unformat","disabled","capturedDisabled","OrderSummaryContainer","coreOrderShippingSummary","getShippingInfo","coreOrderShippingTracking","orderDep","Dependency","showTrackingEditForm","getOrder","shipmentId","fulfillment","timeout","prefix","getShopPrefix","sms","tracking","trackingNumber","changed","printableLabels","shippingLabelUrl","customsLabelUrl","isShipped","shippedItems","every","shipmentItem","fullItem","orderItem","isNotCanceled","canceledItems","completedItems","editTracking","getPackageSettings","flatRates","editing","view","shipmentMethod","shipmentReady","shipmentWorkflow","coreOrderWorkflow","orderFulfillmentData","baseOrder","fulfillmentNumber","OrderDashboardContainer","ordersComponent","formatPriceString","LineItems","InvoiceActions","Invoice","formatDate","renderDiscountForm","renderRefundsInfo","hasRefundingEnabled","refund","amount","renderTotal","renderConditionalDisplay","canMakeAdjustments","paymentCaptured","renderInvoice","totalItems","displayMedia","renderCapturedTotal","renderAdjustedTotal","adjustedTotal","renderRefundForm","handleRefund","showAfterPaymentCaptured","printOrder","renderApproval","paymentPendingApproval","active","eventAction","bgColor","buttonType","paymentApproved","handleCapturePayment","handleApprove","uniqueItem","renderLineItem","renderPopOverLineItem","selectedItems","handleItemSelect","handleInputChange","renderLineItemInvoice","taxDetail","taxCode","renderLineItemRefund","editedItems","refundedQuantity","refundedTotal","getRefundedItemsInfo","renderPopOver","popOverIsOpen","pin","popOverContent","selectAllItems","uniqueItems","handleSelectAllItems","clearRefunds","handleRefundItems","handlePopOverOpen","getSelectedItemsInfo","Checkbox","List","OrderBulkActionsBar","handleListItemClick","setShippingStatus","handlePaymentClick","handleBulkPaymentCapture","printed","renderLoadingSpinner","renderShippingFLowList","renderFlowList","picked","packed","labeled","shipped","multipleSelect","selectAllOrders","capturePayment","toggleShippingFlowList","OrderTable","OrderFilter","OrderSearch","OrderDashboard","detailClassName","listClassName","openList","handleListToggle","handleDetailToggle","clearFilter","filterDates","filterShippingStatus","filterWorkflowStatus","onPageChange","onPageSizeChange","pages","currentPage","handleSelect","query","searchQuery","Constants","handleDatesChange","startDate","endDate","date","handleWorkflowChange","workflowLabel","handleShippingChange","shippingLabel","dateLabel","attachmentDirection","dir","workflowStatus","shippingStatus","handleClear","Badge","ClickToCopy","getOrderRiskBadge","getOrderRiskStatus","getTaxRiskStatus","OrderSummary","badgeStatus","orderLink","truncateId","shortId","profileShippingAddress","orderPaymentRisk","orderTaxRisk","lineHeight","marginLeft","cursor","fromNow","transactionId","shipmentStatus","Avatar","Loading","OrderTableColumn","colClassNames","control","headerClassNames","pageSize","pageIndex","fulfillmentBadgeStatus","renderOrderButton","startWorkflow","chevronDirection","renderOrderInfo","renderShipmentInfo","orderRisk","renderOrderCard","getTrProps","getTheadProps","getTrGroupProps","getTableProps","customColumnMetadata","filteredFields","columnNames","colHeader","resizable","sortable","columnNameLabel","columnMeta","headerClassName","original","page","RolloverCheckbox","renderCheckboxOnSelect","columnAccessor","column","createdDate","truncatedId","MEDIA_PLACEHOLDER","ProductImage","renderBadge","badge","_sumBy","handleClearRefunds","lineItem","isEdited","adjustedQuantity","isUpdating","updateEditedItems","itemIds","approvePayment","capturePayments","handleCancelPayment","orderTotal","refundTotal","parseFloat","toFixed","refundItemsQuantity","totalAmount","alertToCapture","alertToRefund","refundInfo","refundItemsTotal","allowOutsideClick","orderBillingInfo","paymentMethodId","paymentMethodName","isRefundable","handleClose","togglePopOver","toggleUpdating","isAdjusted","billingInfo","discount","capture","setQueryParams","alertDialog","alertType","riskBadge","shopBilling","orderDiscounts","abs","o","enabledPaymentsArr","lineNumber","OrderSubscription","formattedEndDate","endOf","formattedStartDate","startOf","$gte","toISOString","$lte","handleSearchChange","shippingFilter","toLowerCase","workflowFilter","filterString","updatePage","offset","updatePageSize","Counts","orderSearchResultsIds","orderSearchResults","orderSearch","ordersSubscription","totalOrderCount","ceil","_every","delivered","canceled","PACKAGE_NAME","ORDER_LIST_FILTERS_PREFERENCE_NAME","ORDER_LIST_SELECTED_ORDER_PREFERENCE_NAME","shippingStates","shippingStrings","setListItemsToDefault","isInputChecked","selectedItemsArray","updatedSelectedArray","areAllSelected","orderIds","updateBulkStatusHelper","statusIndex","updateBulkLoadingHelper","prevStatusIndex","maxIndex","shippingStatusUpdateCall","selectedOrders","filteredSelectedOrders","orderText","capitalizeStatus","substr","orderCount","shippingRecord","orderNumber","displayAlert","skippedOrdersText","orderAlreadyInStateText","falsePreviousStatuses","numberOfSkippedOrders","skippedState","whichFalseState","setSelected","falseCurrentState","trueCurrentState","displayRegressionAlert","ordersToRegress","regress","pickedShippingStatus","isNotPicked","isPicked","orderWorkflow","packedShippingStatus","isNotPacked","isPacked","labeledShippingStatus","isNotLabeled","isLabeled","shippedShippingStatus","isNotShipped","orderWorkflowStatus","selectedOrdersIds","billingRecord","approvePaymentError","capturePaymentError","creditBillingRecords","riskLevel","billingForShop","taxCalculationFailed","bypassAddressValidation","shippingInfo","DEFAULT_FILTER_NAME","corePaymentMethods","enabledPayments","payments","paymentsEnabled","openActionView","dashboardRegistryEntry","paymentRegistryEntry","paymentSettings","paymentMethodOptions","shopEditPaymentMethodsForm","EJSON","uniqObjects","objs","jsonBlobs","obj","JSON","stringify","uniqueBlobs","blob","parse","cartShippingQuotes","currentCart","shipmentQuotes","quote","shippingMethodsQueryStatus","queryStatus","failingShippingProvider","quotesQueryStatus","shipmentQuotesQueryStatus","requestStatus","shippingProvider","cartShipmentMethods","shipmentMethods","enabledShipping","enabledShippingArr","coreCheckoutShipping","isLoadingShippingMethods","shippingOpts","shippingQuotes","hasShippingMethods","didAllQueriesFail","hasEnabledShippingProviders","isReady","marketplaceSettings","merchantShippingRates","shippingRegistryEntry","shippingSettings","Tooltip","createTooltip","destroy","iconComponent","elementProps","attrs","buttonAttributes","itemKeyTitle","createFragment","tagName","onToggle","onValue","handleKeyUp","tooltipOpen","handleButtonMouseOver","handleButtonMouseOut","renderOnStateIcon","renderNormalStateIcon","renderIcon","renderTooltipContent","isTooltipOpen","renderLabel","toggleOnLabel","i18nKeyToggleOnLabel","primary","bezelStyle","containerStyle","iconAfter","tabIndex","tooltipAttachment","extraProps","onKeyUp","buttonChildren","any","ButtonSelect","currentButton","activeButton","nonActiveButtons","defaultBgClassNames","toggleIcon","toggleClassNames","handleDefaultState","defaultButton","defaultNonActiveButtons","filterButtons","handleToggle","handleButtonChange","EditButton","buttonClassName","Handle","connectDragSource","otherProps","kind","iconClassName","onIconClassName","VisibilityButton","Children","handleExpanderClick","isControlled","onExpand","expanded","newProps","actAsExpander","expandable","cloneElement","noPadding","renderCard","padded","handleSwitchChange","expandOnSwitchOn","onSwitchChange","renderTitle","renderImage","imageView","renderDisclsoureArrow","expanderClassName","expander","open","borderColor","renderChildren","showSwitch","switchOn","switchName","CardTitle","rest","CardToolbar","card","SettingsCard","handleExpand","saveOpenStateToPreferences","updateUserPreferences","renderCardBody","preferences","decoratedComponent","TextareaAutosize","getEventValue","onBlur","onFocus","onKeyDown","onReturnKeyDown","renderMultilineInput","placeholder","i18nKeyPlaceholder","maxRows","renderSingleLineInput","inputClassName","minValue","maxValue","multiline","renderHelpText","helpMode","isHelpMode","validationMessage","helpText","i18nKeyHelpText","textFieldStyle","isNaN","SortableTableFilter","PaginationButtons","SortableTablePagination","handlePageSizeChange","getSafePage","changePage","applyPage","safePage","showPageSizeOptions","pageSizeOptions","showPageJump","canPrevious","canNext","PreviousComponent","NextComponent","paginationStyle","pageText","which","ofText","rowsText","previousText","nextText","angleDirection","renderIconPosition","renderText","SortableTableLegacy","matchSorter","ReactTable","customFilter","pivotId","handleFilterInput","renderPaginationBottom","getTableData","setMinRows","filterInput","maxPages","getMeteorData","collection","matchingResultsCount","publication","matchingResults","pubHandle","transform","rowInfo","onRowClick","renderColumns","displayColumns","renderData","filterType","originalData","filteredData","renderColumnFilter","renderTableFilter","selectedRowsClassName","selectedRows","displayNoResultsFound","displayText","noDataMessage","defaultClassName","tableClassName","defaultPageSize","loadingText","showPaginationTop","isSortable","getPaginationProps","manual","isFilterable","isResizeable","minRows","noDataText","TacoTable","columns","onAlertSeen","onAlertRemove","alertClassName","handleAlertRemove","handleAlertSeen","ConnectedToolbarComponent","ConnectedAdminViewComponent","ConnectedShortcutBarContainer","customerApp","adminApp","adminContentContainer","adminContainer","scrollableContainer","App","saveActionViewState","handleKeyDown","altKey","userWas","userIs","renderAdminApp","routeOptions","routeData","hasDashboardAccess","isAdminApp","facebookId","fgColor","googleId","md5Email","round","skypeId","textSizeRatio","twitterHandle","vkontakteId","colors","handleMouseOver","handleMouseOut","badgeSize","indicator","InventoryBadge","ButtonGroup","ButtonToolbar","omit","DayPickerRangeController","CalendarPicker","onDatesChange","onFocusChange","focusedInput","initialStartDate","initialEndDate","autoFocusEndDate","renderDayContents","day","isRTL","minimumNights","isDayBlocked","isDayHighlighted","enableOutsideDays","withPortal","initialVisibleMonth","numberOfMonths","onOutsideClick","keepOpenOnDateSelect","renderCalendarInfo","navPrev","navNext","onPrevMonthClick","onNextMonthClick","monthFormat","isOutsideRange","Loadable","loader","loaded","DayPicker","floor","random","onMouseOut","checkboxClassName","extendedClassName","CopyToClipboard","handleCtcMouseOver","handleCtcMouseOut","copyToClipboard","copied","btn","Divider","dividerStyle","background","separator","divider","backgroundColor","_update","_set","_at","Form","newdoc","doc","fieldsProp","autoSave","validate","handleSelectChange","handleMultiSelectChange","schema","validationSchema","docPath","objectKeys","fieldNames","pick","newContext","namedContext","docToValidate","cleanedObject","_simpleSchema","clean","isFieldHidden","hideFields","renderFormField","sharedProps","fieldElement","renderComponent","inputType","fieldHasError","validationErrors","validationError","keyErrorMessage","formGroupClassName","additionalFieldProps","fieldSchema","getDefinition","fieldType","fieldTypeString","fieldProps","renderWithSchema","renderFromFields","endsWith","fullFieldName","fieldData","tempObj","fieldProp","renderFormActions","_objectKeys","mergedSchema","FormActions","fa","Item","Items","actionType","handleOnKeyUp","renderAction","actionClassName","contentClassName","renderSubItems","listItemClassName","Hint","isTouchDetected","hintTextMouse","hintTextTouch","bottom","borderRadius","MediaGallery","MediaItem","MediaUploader","Dropzone","Measure","handleDropClick","dropzone","handleDrop","onDrop","dimensions","renderAddItem","editable","renderProgressItem","renderFeaturedMedia","onMouseEnterMedia","onMouseLeaveMedia","onMoveMedia","onRemoveMedia","featuredMedia","contentRect","bounds","measureRef","renderMediaThumbnails","mediaList","renderMediaGalleryUploader","containerWidth","mediaGalleryWidth","uploadProgress","inst","hasMedia","renderMediaGallery","gallery","mediaGalleryHeight","bytesUploaded","bytesTotal","percentage","ReactImageMagnify","SortableItem","handleKeyPress","handleMouseEnter","onMouseEnter","handleMouseLeave","onMouseLeave","handleRemoveMedia","getSource","defaultSource","renderRevision","revision","changeType","renderControls","removeButton","mediaHeight","mediaWidth","zoomable","smallImage","imageClassName","fadeDurationInMs","hoverDelayInMs","pressDuration","largeImage","isHintEnabled","enlargedImageContainerClassName","hintComponent","connectDropTarget","mediaElement","uploadFiles","acceptedFiles","filesArray","from","isUploading","promises","browserFile","promise","all","_isMounted","DropDownMenu","handleDropdownToggle","handleMenuItemChange","menuItem","closeOnClick","handleOpen","onRequestOpen","constraints","targetAttachment","menuClassName","isClickable","toArray","onPublishClick","revisions","Menu","MenuItem","renderMenuItems","newChild","i18nKeySelectedLabel","selectionLabel","Metadata","Metafield","handleMetaChange","metafield","onMetaChange","handleMetaSave","onMetaSave","handleMetaRemove","onMetaRemove","renderMetadata","metafields","renderMetadataForm","renderMetadataCreateForm","newMetafield","newMetadata","refs","keyInput","valueInput","handleBlur","handleRemove","RunSequence","p","renderActionButton","blank","i18nKeyDetailName","detailNamePlaceholder","i18nKeyDetailInformation","detailInfoPlaceholder","i18nKeyDetailInfo","renderOverlay","Select","MultiSelect","selectProps","translatedPlaceholder","multi","simpleValue","NotFound","NumberTypeInput","handleIncrementButton","handleDecrementButton","newValue","parseInt","edited","fieldClassName","NumericInput","numberValue","selectAll","moneyFormat","unformattedValue","formatted","formatMoney","decimal","ctrl","setSelectionRange","textValueClassName","displayValue","Popover","PopoverContent","TetherComponent","handleDisplayButtonClick","onDisplayButtonClick","handleClickOutside","renderPopoverChildren","showDropdownButton","maxHeight","overflowY","showArrow","tooltipContent","onclickOutside","onClickOutside","CircularProgress","indeterminate","Nouislider","Slider","range","start","tooltips","connect","step","orientation","onSlide","checkboxRef","ref","_checkbox","labelElement","onLabel","i18nKeyOnLabel","switchControlClassName","TabList","TabItem","tab","selectedTab","TagItem","TagList","Autosuggest","handleTagFormSubmit","_saved","saveTag","handleTagRemove","onTagRemove","tag","parentTag","handleTagUpdate","onTagUpdate","handleTagKeyDown","handleTagMouseOut","onTagMouseOut","handleTagSelect","onTagSelect","handleTagMouseOver","onTagMouseOver","handleTagInputBlur","onTagInputBlur","updatedTag","handleSuggestionsUpdateRequested","suggestion","onGetSuggestions","handleSuggestionsClearRequested","onClearSuggestions","onTagClick","_updated","autoSuggestInput","getSuggestionValue","onTagSave","renderTag","fullWidth","renderEditableTag","draggable","renderAutosuggestInput","renderBlankEditableTag","renderSuggestion","inputPlaceholder","suggestions","i18nKeyInputPlaceholder","ReactionPropTypes","handleNewTagSave","onNewTagSave","handleNewTagUpdate","onNewTagUpdate","handleTagSave","handleTagClick","hasDropdownClassName","navbarSelectedClassName","renderTags","tags","arrayProps","onMoveTag","enableNewTagForm","newTag","onTagSort","Tag","showBookmark","arrayOfTags","ToolbarGroup","ToolbarText","firstChild","lastChild","visibleOnMobile","renderTooltip","Currency","priceRange","_camelCase","makeNsSetter","hasDashboardAccessForAnyShop","emailObj","EditContainer","handleEditButtonClick","onEditButtonClick","returnValue","editView","viewProps","handleVisibilityButtonClick","onVisibilityButtonClick","renderVisibilityButton","showsVisibilityButton","renderEditButton","hasChange","__draft","draft","diff","hasChangedField","autoHideEditButton","visibilityButton","editButton","only","viewAs","AlertContainer","AppContainer","ReactionAvatarContainer","InventoryBadgeContainer","MediaGalleryContainer","TagListContainer","soldOut","inventoryManagement","getVariantQuantity","_sortBy","Revisions","imageUrl","imageHeight","handleMouseEnterMedia","handleMouseLeaveMedia","handleMoveMedia","dragIndex","hoverIndex","newMediaOrder","$splice","sortedMediaIDs","handleUpload","selectedProductId","selectedVariant","selectedProduct","file","toGrid","on","previousMediaIds","nextMediaIds","fetchMediaRevisions","mediaRevisions","$nin","sortMedia","sortedMedia","m","appendRevisionsToMedia","newMedia","image","documentId","documentData","ComposeSortableItem","DragSource","DropTarget","collectDropSource","monitor","dragSource","isDragging","collectDropTarget","dropTarget","cardSource","beginDrag","cardTarget","hover","getItem","onMove","drop","itemType","SortableItemComponent","contextTypes","dragDropManager","_debounce","getTagIds","updateSuggestions","term","excludeTags","getSlug","RegExp","canSaveTag","newState","tagsByKey","handleMoveTag","tagIds","debounceUpdateTagOrder","handleGetSuggestions","suggestionUpdateRequest","handleClearSuggestions","originalTag","tagId","tagsAsArray","hashtags","isEditable","isProductTags","templateClassName","_isString","defaults","classNameData","classNameOverrides","_omit","parentTemplate","parentTemplateName","parentNode","getData","comp","onDestroyed","unmountComponentAtNode","getView","parentView","match","AdminComponent","adminContext","getChildContext","childContextTypes","adminClassName","admin","DragDropManager","HTML5Backend","defaultManager","DragDropProvider","TranslationProvider","TranslatableComponent","translations","catalogSettings","EmailLogs","EmailConfig","emailSettings","_pick","saveSettings","host","port","save","timer","showPassword","showSettings","togglePassword","toggleSettings","renderSettingsDisplay","NotSet","renderSettingsUpdate","Jobs","renderEmailsTable","customRowMetaData","bodyCssClassName","colWidth","colStyle","colClassName","instanceOf","subject","EmailSettings","hasAuth","isSaving","handleStateChange","newSettings","providerNames","emailProviders","unshift","EmailTableColumn","handleAction","emailId","renderColumn","getServiceConfig","checkEmailStatus","nextSettings","getShopSettings","mail","config","resend","SearchContainer","revisionControlSettings","SearchContainerComponent","SimpleDiff","isDocumentVisible","onAction","showDiffs","handleToggleShowChanges","handlePublishClick","renderChanges","diffs","renderDeletionStatus","hasChanges","primaryRevision","isDeleted","handleRestore","renderPublishButton","renderMoreOptionsButton","renderUndoButton","renderArchiveButton","renderSettingsButton","primaryDocumentId","hasRevisions","primaryRevisionObj","primaryDocument","diffHasActualChanges","documentType","some","RevisionControlSettings","general","onUpdateSettings","renderDiff","change","rightHandSide","rhs","toString","leftHandSide","lhs","whiteSpace","PublishContainer","productIds","parentDocument","documentIdsSet","Set","onPublishSuccess","publishToCatalog","handlePublishActions","action","SettingsComponent","RevisionSettingsContainer","handleUpdateSettings","packageInfo","RevisionApi","Taxes","TaxCodes","TaxSchema","customTaxRates","editingId","taxGrid","editRow","currentId","showFilter","rowMetadata","externalLoadingComponent","taxSchema","countryOptions","statesForCountry","selectedCountry","getFieldValue","hasOwnProperty","taxRate","taxCodes","confirmTitle","taxSettings","TaxPackageConfig","registerSchema","PackageConfig","clone","extend","optional","blackbox","SimpleSchema","unique","shopIdAutoValue","autoValue","allowedValues","TaxRates","county","rate","Schemas","attachSchema","EmailTemplates","templateSettings","templateGrid","typeEmail","emailTemplateSchema","insertDoc","templateId","docId","TemplateInstance","prototype","levels","numLevel","Integer","DiscountsPackageConfig","Discounts","Transactions","appliedAt","DiscountForm","validatedInput","attempts","discountApplied","debounceDiscounts","timerId","clearInterval","renderApplied","renderDiscountLink","DiscountList","codeId","renderList","listItems","listItem","renderItem","code","TrashCan","renderNoneFound","propsToWatch","discountListComponent","compose","_getDisplayName","shallowEqual","hoistStatics","dataLoader","Child","errorHandler","loadingHandler","env","pure","shouldSubscribe","shouldUpdate","Container","args","propsCache","_subscribe","shouldComponentUpdate","nextState","_unmounted","_unsubscribe","_shouldSubscribe","firstRun","_cachedWatchingProps","currentProps","payload","_stop","finalProps","__composerData","getTrackerLoader","reactiveMapper","trackerCleanup","handler","nonreactive","composeOptions","CustomLoader","ComponentsTable","registerHOC","replaceComponent","getRawComponent","getHOCs","copyHOCs","loadRegisteredComponents","_setDisplayName","rawComponent","newHOCs","existingComponent","existingHOCs","hoc","newComponent","previousComponent","newHocs","sourceComponentName","targetComponent","sourceComponent","withCurrentUser","withMomentTimezone","withIsOwner","_lifecycle","_difference","momentTimezone","tz","accSub","isGuest","isAnonymous","isOwner","Job","JobCollection","Match","createJobCollection","later","isServer","_hooks","onExit","_addHook","enter","cb","leave","arguments","callbacks","run","Link","NavLink","Prompt","withRouter","history","_uniqBy","Route","createBrowserHistory","createMemoryHistory","pathToRegexp","queryParse","Immutable","Map","routerReadyDependency","routerChangeDependency","_initialized","triggerRouterReady","toJS","setCurrentRoute","getParam","newParams","queryParams","watchPathChange","routes","activeClassName","foundPath","pathObject","shopSlug","toPath","compile","compiledPath","queryString","actualPath","routerGo","startsWith","routerReadyWaitFor","reload","fullPath","hasRoutePermission","getRegistryRouteName","selectLayout","setLayout","setWorkflow","currentLayout","currentWorkflow","public","merchantTemplates","workflowName","layoutStructure","dashboardControls","dashboardHeaderControls","adminControlsFooter","layoutTheme","sortedLayout","foundLayout","optionsHasTemplate","hasReactComponent","console","initPackageRoutes","reactionContext","shopPrefix","pkgs","routeDefinitions","shopSub","shopSubWaitFor","indexLayout","indexRoute","notFoundLayout","newRoutes","reactionLayout","newRouteConfig","triggersEnter","triggersExit","uniqRoutes","reactRouterRoutes","reactComponents","_routes","initBrowserRouter","matchPath","ReactRouter","equal","MetaData","BrowserRouter","handleLocationChange","foundPaths","pathname","exact","re","values","exec","search","toObject","previousRouteData","previousRoute","init","unsubscribeFromHistory","listen","rootNodeHtml","computation","primaryShopSub","merchantShopSub","packageSub","isLoaded","onLogin","loggingIn","currencyDisplay","currentCurrency","LanguageDropDown","languages","currentLanguage","ShopSchema","Shop","LocalizationSettings","handleUpdateCurrencyConfiguration","currencyIndex","findIndex","newStateCurrencies","onUpdateCurrencyConfiguration","handleUpdateLangaugeConfiguration","languageIndex","newStateLanguages","onUpdateLanguageConfiguration","formData","onUpdateLocalization","handleAllOn","onEnableAllLanguages","onEnableAllCurrencies","handleAllOff","handleReloadTranslations","onReloadTranslations","renderCurrencies","renderLanguages","renderListControls","timezone","timezoneOptions","currencyOptions","baseUOM","uomOptions","baseUOL","uolOptions","enabledLanguages","CurrencyDropdown","currencyName","merchantCurrency","profileCurrency","class","LanguageDropdown","merchantLanguage","handleUpdateLanguageConfiguration","l","handleEnableAllLanguages","handleEnableAllCurrencies","handleTranslationReload","flushAll","currencyList","unitsOfMeasure","measure","uom","unitsOfLength","uol","timezones","names","Brand","logo","NavBar","navBarVisible","searchModalOpen","toggleNavbarVisibility","handleCloseNavbar","handleOpenSearchModal","handleCloseSearchModal","renderLanguage","renderCurrency","renderBrand","brandMedia","renderSearchButton","searchEnabled","renderNotificationIcon","hasProperPermission","renderCartContainerAndPanel","renderMainDropdown","renderHamburgerButton","renderTagNav","visibility","hamburger","brand","notifications","mainDropdown","cartContainer","NavBarCheckout","searchPackage","searchTemplate","$and","$or","brandAsset","findOneLocal","Navbar","TagHelpers","TagGroup","tagGroupProps","renderTree","tagGroupBodyProps","subTagGroups","subTags","tagItem","TagGroupBody","onUpdateTag","genTagsList","TagGroupHeader","handleTagTreeMove","TagNav","selectedTag","editContainerItem","navButtonStyles","navbarOrientation","navbarPosition","navbarAnchor","navbarVisibility","closeNavbar","canEdit","NavbarStates","Orientation","Position","Anchor","Visible","NavbarOrientation","Vertical","Horizontal","NavbarPosition","Static","Fixed","NavbarAnchor","Top","Right","Bottom","Left","None","TagNavHelpers","onTagCreate","createTag","removeTag","sortTags","onTagDragAdd","movedTagId","toListId","toIndex","ofList","moveTagToNewParent","parentTagId","updateTag","tagById","excludeTagsObj","hasSubTags","foundTag","relatedTagIds","onWindowResize","matchQuery","attachBodyListener","closeDropdown","attachedBodyListener","detachhBodyListener","closestNavItem","closeDropdownTimeout","clearTimeout","currentSelectedTag","previousEdit","hasEditRights","isTopLevel","moveItem","oldArray","fromIndex","newArray","splice","tagObject","getTags","$pullAll","TagNavContainer","DOM","setMetaTag","attributes","currentMetaTag","setAttribute","newMetaTag","head","appendChild","addLinkTag","newLinkTag","removeDocHeadAddedTags","querySelectorAll","removeChild","MeteorFileCollection","MediaRecords","downloadEndpointPrefix","uploadEndpoint","absoluteUrlPrefix","absoluteUrl","DDP","PaypalClientAPI","paypal","initXO","msg","closeFlow","urlPrefix","startFlow","expressCheckoutSettingsValid","merchantId","paypalCheckoutButton","expressCheckoutSettings","load","isConfigured","setup","environment","click","expressCheckoutEnabled","PaypalPayment","PayPal","submitting","uiEnd","buttonText","removeAttr","paymentAlert","hidePaymentAlert","getError","detailSubpart","response","handlePaypalSubmitError","singleError","serverError","len","thisError","formattedError","issue","pop","fatal","paypalPayflowForm","addHooks","payerNamePieces","payerName","form","first_name","last_name","cardNumber","expire_month","expireMonth","expire_year","expireYear","cvv2","cvv","getCardType","authorize","transaction","saved","normalizedStatus","supportedStatuses","normalizedMode","intent","authId","transactions","related_resources","authorization","authorizationId","create_time","updatedAt","update_time","beginSubmit","endSubmit","paypalCancel","isDuplicate","duplicateErrorCode","show","buildPaymentMethod","TRANSACTIONID","AMT","ORDERTIME","paypalDone","checkoutUrl","payerId","c","PAYMENTSTATUS","payError","payResult","PaypalPackageConfig","paypalExpressSettings","paypalPayFlowSettings","_once","script","async","_checkReady","checkReady","setInterval","_loaded","Express","getSettings","valueName","expressCheckoutAccountOptions","express_mode","express","signature","return_url","getAbsoluteUrl","cancel_url","accountOptions","PayFlow","payflowAccountOptions","payflow_mode","client_id","client_secret","cardInfo","paymentInfo","captureDetails","is_final_capture","paymentObj","payer","payment_method","funding_instruments","parseCardData","credit_card","parsePaymentData","gridPublishControls","PublishComponent","GridProductPublish","getPrimaryMediaForItem","applyProductRevision","updateVariantProductField","productSettings","products","hasSelectedProducts","itemWeightActive","weight","getTag","positions","currentWeight","productSettingsListItem","__published","setActionView","displayPrice","getProductPriceRange","getTopVariants","listItemActiveClassName","ancestors","publishProduct","cloneProduct","archiveProduct","variantForm","VariantEditForm","GridItemControls","GridItemNotice","ProductGrid","ProductGridItems","VariantForm","VariantEdit","ProductGridCustomer","ProductGridItemCustomer","GridItemControlsContainer","GridItemNoticeContainer","GridPublishContainer","ProductGridContainer","ProductGridItemsContainer","ProductsContainer","ProductsContainerAdmin","ProductsContainerCustomer","VariantFormContainer","VariantEditContainer","loadMoreProducts","canLoadMoreProducts","loadProducts","scrollY","innerHeight","scrollHeight","atBottom","productsSubscription","renderNotFound","renderProductGrid","ProductGridItem","productURL","renderNotices","isSoldOut","isLowQuantity","isBackorder","noticeContent","noticeClassNames","renderMedia","large","renderAdditionalMedia","additionalMedia","img","small","medium","renderGridContent","isSearch","productClassNames","weightClass","pinned","renderArchived","__isValid","hasCreateProductPermission","renderNotice","renderProductGridItems","productMediaById","handleDoubleClick","onDoubleClick","renderPinned","renderVisible","productMedia","primaryMedia","isMediumWeight","mediaArray","renderHoverClassName","getIds","productsByKey","renderSpinner","renderLoadMoreProductsButton","showNotFound","hasProducts","handleCreateNewChildVariant","renderVariant","editFocus","renderOptionsCard","renderChildVariants","childVariants","childVariant","findCurrency","fieldGroups","originCountry","compareAtPrice","taxDescription","handleFieldBlur","onVariantFieldSave","handleCheckboxChange","handleInventoryPolicyChange","inverseValue","handleVariantVisibilityToggle","expandedCard","taxable","nextVariant","currentVariant","animateFieldFlash","fieldGroupForFieldName","fieldRef","isFieldValid","flashColor","renderTaxCodeField","isProviderEnabled","fetchTaxCodes","restoreVariant","removeVariant","renderArchivedLabel","renderInventoryPolicyField","hasChildVariants","renderQuantityField","onUpdateQuantityField","renderVariantFields","cloneVariant","greyDisabledFields","renderOptionFields","optionTitle","Validation","ProductVariant","checkValidation","getVariants","validatedVariants","validProduct","selectedProducts","topVariants","topVariant","inventoryThreshold","GridProductPublishContainer","isProductVisible","_without","handleSelectProductItem","filteredProducts","handleProductDrag","dragProductId","hoverProductId","dragProductWeight","dropProductWeight","$merge","handleProductDrop","initialLoad","create","variantIds","_max","_min","onPageClick","productPath","handleCheckboxSelect","list","checkbox","activeItems","selected","shiftKey","indexes","itemSelectHandler","unmountMe","metaKey","ctrlKey","ITEMS_INCREMENT","resubscribeAfterCloning","ProductsComponent","reactiveProductIds","oldVal","newVal","threshold","scrollContainer","scrollTop","clientHeight","isInitialLoad","prerenderReady","shopIdOrSlug","scrollLimit","viewAsPref","editMode","activeShopsIds","activeShop","productCursor","sortedProducts","sortProducts","Catalog","$sort","newVariantId","productHandle","clearActionView","selectedTopVariant","revisedVariant","providerName","taxCodesArray","codes","taxCodeProvider","checkChildVariants","selectedVariantId","handleVariantFieldSave","validationStatus","runVariantValidation","updateInventoryPolicyIfChildVariants","getSiblings","parent","getVariantParent","updateQuantityIfChildVariants","variantQuantity","becomeSellerButton","marketplaceMerchantSettings","MarketplacePackageConfig","marketplaceShopSettings","inviteOwner","InviteOwner","marketplaceOptionsForm","shopSelect","isActiveShop","currentShopName","stripeConnectSignupButton","primaryStripePackage","clientId","phoneNumber","businessName","company","streetAddress","zip","defaultEmailAddress","firstName","last","lastName","stripeConnectAuthorizeUrl","autofillParams","MarketplaceShops","MarketplaceShopTableCell","shopData","renderSpinnerButton","SHOP_WORKFLOW_STATUS_ACTIVE","SHOP_WORKFLOW_STATUS_DISABLED","onWorkflowChange","renderShopsTable","MarketplaceShopsContainer","ShopTypes","EnabledPackagesByShopType","SellerShop","shopType","enabledPackages","stripeConnectSettings","SHOP_WORKFLOW_STATUS_ARCHIVED","Shipping","shippingRatesSettings","shippingGrid","shippingRate","providerRates","facebook","profilePage","ref1","origin","appendTo","hostname","appId","FB","ui","encodeURIComponent","fbAsyncInit","xfbml","version","s","js","fjs","insertBefore","googleplus","ref2","itemtype","itemprop","pinterest","preferredUrl","twitter","SocialSettingsContainer","socialSettings","SocialSettingsComponent","_merge","reactionSocial","socialTemplates","templates","appsOrder","getOpenGraphMeta","Helmet","FacebookSocialButton","showText","iconClassNames","altIcon","getGooglePlusMeta","GooglePlusSocialButton","encodedUrl","SocialButtons","GooglePlus","Pinterest","SocialSettings","PinterestSocialButton","baseUrl","SocialPackageConfig","socialProviders","handleSettingChange","onSettingChange","formName","onSettingsSave","getSchemaForField","renderCards","onSettingExpand","onSettingEnableChange","getProviderComponentByName","buttonSettngs","buttonComponent","getTwitterMeta","TwitterSocialButton","createSocialSettings","handleSettingEnable","handleSettingExpand","handleSettingsSave","settingName","socialPackage","merge","socialButtons","ShopifyConnectPackageConfig","shopifyConnectSettings","shopifyImport","shopifySync","activeWebhooks","webhooks","integrationIsActive","integration","integrations","integrationsArray","webhook","currentDomain","webhooksDomain","hookIsActive","hook","synchooks","topic","syncType","matchingHooks","synchook","selectedOptionsNodeList","getElementsByName","formEvent","optionsNodeList","optionsList","Synchook","Webhook","discountCodesCheckout","DiscountCodes","DiscountSchema","customDiscountCodes","discountGrid","discountSchema","discountCode","DiscountCodesPackageConfig","DiscountRates","DiscountRateSchema","customDiscountRates","discountRateSchema","discountRate","DiscountRatesPackageConfig","discountMethod","NotificationRouteContainer","notificationRoute","NotificationDropdown","Notification","NotificationRoute","renderButton","unread","notificationList","handleDelete","markOneAsRead","markAllAsRead","handleNoNotifications","notifyArr","notify","actionViewData","handleMarkAllAsRead","renderDropdownHead","timeNow","timeSent","read","showViewAll","NotificationContainer","Notifications","AuthNetPayment","AuthNet","tpl","handleAuthNetSubmitError","authnetPaymentForm","expire_date","expirationYear","expirationMonth","transId","_original","responseCode","AuthNetPackageConfig","authnetSettings","Braintree","BraintreePayment","braintreePaymentForm","handleBraintreeSubmitError","submitToBrainTree","cardData","currencyCode","tx","normalizeState","normalizeMode","creditCard","cardType","last4","normalizedStates","authorization_expired","authorized","authorizing","settlement_pending","settlement_confirmed","settlement_declined","failed","gateway_rejected","processor_declined","settled","settling","submitted_for_settlement","voided","stateString","normalizedState","default","normalizedModes","modeString","BraintreePackageConfig","braintreeSettings","braintree","paymentData","StripePayment","handleStripeSubmitError","luhnValid","sum","validCardNumber","validExpireMonth","validExpireYear","validCVV","stripePaymentForm","apply","onResultReceived","stripeConnectAuthorize","authCode","stripeConnectMerchantSignup","stripeConnectIsConnected","stripe","connectAuth","access_token","StripePackageConfig","stripeSettings","StripeConnectAuthorizationCredentials","token_type","stripe_publishable_key","scope","livemode","stripe_user_id","refresh_token","ProductAdmin","pageTitle","vendor","facebookMsg","twitterMsg","pinterestMsg","googleplusMsg","handleDeleteProduct","onDeleteProduct","handleRestoreProduct","onRestoreProduct","onProductFieldSave","handleToggleVisibility","nextProduct","currentProduct","cardGroupName","renderProductVisibilityLabel","permalink","handleProductFieldChange","revisonDocumentIds","handleProductFieldSave","updateValue","forceUpdate","handleMetafieldSave","handleProductRestore","parser","templateFor","productDetailSimple","PDC","ProductDetail","productDetailSimpleToolbar","PublishContainerComponent","ProductPublish","AddToCartButton","handleCartQuantityChange","onCartQuantityChange","hasVariants","cartQuantity","onAddToCart","ChildVariant","renderValidationButton","invalidVariant","variantValidation","renderInventoryStatus","primaryMediaItem","Variant","VariantList","ProductMetadata","ProductTags","ProductField","PriceRange","ProductNotFound","showEditControls","editContainerProps","hasAdminPermission","mediaGalleryComponent","onProductFieldChange","socialComponent","topVariantComponent","handleFocus","_input","renderTextField","textFieldClassName","textFieldProps","pdp","itemProp","fieldTitle","selfValidation","variantTitleElement","variantElement","handleVariantEditClick","editButtonProps","onEditVariant","handleVariantVisibilityClick","onVariantVisibiltyToggle","isVariantVisible","handleChildVariantClick","onVariantClick","handleChildVariantEditClick","renderVariants","addButton","onCreateVariant","variantIsSelected","onMoveVariant","variantList","childVariantMedia","mediaItem","ProductDetailContainer","SocialContainer","VariantListContainer","handleAddToCart","maxQuantity","totalQuantity","storedQuantity","productClick","animate","addToCartText","addToCartTitle","alertWidth","oppositeDirection","css","handleSlideOut","animationTimeOut","handleSlideIn","textTimeOut","as","complete","tagSub","revisionType","viewProductAs","productSub","setProduct","ancestor","getVariantPriceRange","productRevision","ProductPublishContainer","ProductSocialContainer","getChildVariants","getVariantIds","variantIsInActionView","actionViewVariant","inventoryTotal","qty","inventoryPercentage","inventoryWidth","b","handleCreateVariant","handleVariantClick","handleEditVariant","editVariant","variantIsVisible","handleMoveVariant","newVariantOrder","SearchPackageConfig","searchSettings","ShippoTableColumn","shippoCarriers","carrierGrid","shippoProvider","shippoCarrier","ShippoPackageConfig","shippoSettings","formType","successMsg","smsSettings","SmsSettings","apiKey","apiToken","smsProvider","smsPhone","smsProviders","Sms","AvalaraSettingsFormContainer","avalaraSettings","_inRange","AvalaraPackageConfig","Logs","LogSchema","AvalaraSettingsForm","handleLogToggle","showLogs","log","handleTestCredentials","enableLogging","changedInfo","targetField","statusCode","connectionValid","hiddenFields","shownFields","shownLogFields","arr","apiLoginId","logType","logFieldsProp","countryDefaults","formSettings","_schema","validCountries","TaxCloudSettingsFormContainer","taxCloudSettings","taxCloudForm","TaxCloudSettingsForm","TaxCloudPackageConfig","taxcloud","TaxJarPackageConfig","taxJarSettings","packageConfigSchema","accountsTable","SearchModal","activeTab","handleToggleProducts","handleToggleAccounts","handleOnKeyUpToggleProducts","isKeyboardAction","handleOnKeyUpToggleAccounts","textField","renderSearchInput","siteName","renderSearchTypeToggle","productTabClassName","accountsTabClassName","renderProductSearchTags","handleAccountClick","_pull","ReactDom","SearchSubscription","tagToggle","getModalRootNode","modalNode","handleUrlChange","handleChildUnmount","renderChild","localStorage","setItem","newFacet","classList","facets","onClose","createPortal","getSiteName","getProductHashtags","productResults","foundHashtags","searchResultsSubscription","searchCollection","shopMembersSubscription","tagSearchResults","accountResults","ProductSearch","productHashtags","AccountSearch","DataType","rowData","tdClassName","renderer","cellData","SearchModalContainer","basePath","linkTags","rel","sizes","metaTags","addTag","KnowledgeSettingsFormContainer","knowledgeSettings","ExampleSettings","KnowledgeSettingsForm","handleCheckBox","setting","Authorize","Capture","Refund","saveUpdate","knowledgePaymentForm","infoPay","FlashMessages","sendError","SellerShops","keywords","titleCase","param","currentShop","validationMethods","OptionalOrNull","processedEmail","passwordOptions","currentProductId","currentVariantId","visibileVariant","variantPrices","firstPrice","lastPrice","lastIndexOf","priceMin","priceMax","visibleChildren","POSITIVE_INFINITY","NEGATIVE_INFINITY","getPublishedOrRevision","getProduct","Core","isPackageEnabled","getSeller","sellerShopId","noFallback","seller","getSellerShop","filteredShopIds","shopIdsWithRoles","shopsWithPermission","rolesUserHas","hasRole","roleUserHas","hasPermissionForAll","shopsOfUser","latinLangs","getShopName","getShopLang","getPrimaryShopLang","getCurrentTag","formatPhoneNumber","toCamelCase","isObject","mergeDeep","convertWeight","ValidCardNumber","ValidExpireMonth","ValidExpireYear","ValidCVV","isValidNumber","getPhoneCode","slugify","lazyLoadSlugify","mod","domain","domains","leading","marketplaceNakedRoutes","absUrl","slugString","await","countryExtension","needscamels","registryLabel","i18nKeyDescription","convertedWeight","Where","pattern","OneOf","OrderHookOptions","orderBy","__revisions","cleanProduct","revisedProduct","sorted","changedHandleWas","newUrl","isVariantValidChild","parentVariantId","checkInventoryVariants","inventoryVariants","getProductsByTag","newRelatedTags","relatedTag","relatedTags","productOrArray","alertSettings","toggleVisibility","isAncestorDeleted","includeSelf","archivedCount","TagSchema","propName","valid","Profile","Email","createdAtAutoValue","updatedAtAutoValue","Address","TaxSettings","exemptionNo","customerUsageType","regEx","RegEx","Id","withoutCodeCountries","custom","Assets","ns","CartItem","shopIdAutoValueForCart","Payment","Product","Shipment","ShippingParcel","Workflow","isInsert","isUpdate","isFromTrustedCode","unset","contentType","Emails","jobId","trigger","schemaIdAutoValue","shopDefaultCountry","closestSubschemaFieldName","isUpsert","$setOnInsert","isSet","merchantCart","operator","Inventory","Document","Notes","LayoutStructure","Layout","level","handled","namespace","valueType","hasDetails","History","ExportHistory","OrderItem","OrderTransaction","Order","OrderDocument","docType","dateAttempted","exportMethod","destinationIdentifier","itemId","paymentId","inventoryId","PaymentItem","PaymentMethod","PaymentMethodArgument","CurrencyExchangeRate","userCurrency","exchangeRate","raw","VariantMedia","ProductPosition","siblingField","ErrorTypes","REQUIRED","Permissions","Registry","CorePackageConfig","ShippoShippingMethod","ShippingMethod","ShipmentQuote","ShipmentItem","ShippoShipment","ShipmentQuotesQueryStatus","ShippoShippingProvider","ShippingProvider","ShippingPackageConfig","serviceLevelToken","rateId","containers","trackingStatusStatus","trackingStatusDate","numOfShippingMethodsFound","carrierAccountId","serviceAuth","serviceSecret","serviceUrl","CustomEmailSettings","Languages","ShopTheme","BrandAsset","scale","thousand","continents","themeId","MerchantShop","SocialProvider","Url","ReactLayout","sharedFields","defaultData","cartOrderTransform","_values","getSummary","prop","prop2","handling","getShippingTotalByShop","uniqueShopShippingTotals","shippingRec","getSubtotalByShop","uniqueShopSubTotals","taxTotal","getTaxesByShop","subtotals","taxRates","taxRatesByShop","shopTaxTotals","shopSubtotal","shopTaxRate","shopTaxTotal","getDiscountsByShop","discountsByShop","discountTotal","getTotalByShop","shippingTotalByShop","shopsInCart","shopTotals","shopTaxes","shopTotal","getItemsByShop","itemsByShop","getPaymentMethods","billingMethods","methodObjects","paymentMethodObject","uniqueMethods","billingMethod","uniqueValueArray","taxesByShop","subTotalsByShop","shippingByShop","shopItems","shopObjects","sortedShopObjects","shopObject","Translations","mediaRecordsIndex","rawMedia","createIndex","newInstance","sellerShops","rawCollection","noCollectionSuffix","strings","global","Buffer","_cloneDeep","optionHash","registryFilter","reactionApps","matchingRegistry","itemFilter","hasAccess","hasPermissionToRegistryItem","hasRoleAccessForShop","showForShopTypes","hideForShopTypes","filterVal","itemVal","getGuestLoginState","_pluck","sessionVariable","positiveState","session","positive","isGuestFlow","groupSub","defaultRoles","reactionTemplates","layoutConfigCollection","workflowTargetCollection","currentCollection","currentCollectionWorkflow","layoutWorkflows","loggedInUser","Spacebars","monthOptionsVar","lazyLoadMonths","months","monthOptions","monthsList","month","mnum","showDefaultOption","concat","yearOptions","year","getFullYear","downCamel","v1","v2","nl2br","SafeString","nCount","pString","loginWithAnonymous","anonymous","newSession","callLoginMethod","methodArguments","userCallback","Globals","Utils","Log","AccountsCollection","userPrefs","cookieName","packageSettings","preference","isLocalStorageAvailable","readCookie","onbeforeunload","createSessionCookie","loginWithToken","testKey","nameEq","ca","cookie","SubsManager","PrimaryShopPackages","BrandAssets","Sessions","UserProfile","MeteorAccounts","localeDep","reactionState","deps","_shopId","_primaryShopId","_ready","marketplacePkgSettings","primaryShopName","merchantLocale","createCountryCollection","localeCurrency","shopCurrency","storedShopId","checkPermissions","checkUserId","checkGroup","roleCheck","validateUserId","hasDashboardAccessForMultipleShops","adminShopIds","ownerPermissions","adminPermissions","dashboardPermissions","getDep","syncedPackages","currentPreference","getPrimaryShopName","getPrimaryShopPrefix","getPrimaryShopSettings","getPrimaryShopCurrency","providedShopId","getShopCurrency","userPermissions","viewData","viewStack","actionViewStack","pushActionViewDetail","detailViewStack","actionViewDetailStack","clearActionViewDetail","currentRouteName","has","formatNumber","currencyDep","defaultCurrency","useDefaultShopCurrency","formatPrice","defaultShopCurrency","currentPrice","prices","originalPrice","_formatPrice","shopFormat","actualPrice","pos","adjustedPrice","formattedPrice","precision","where","modifiedCurrency","i18nMessage","getBrowserLanguage","i18nextBrowserLanguageDetector","i18nextLocalStorageCache","i18nextSprintfPostProcessor","i18nextJquery","getLabelsFor","getValidationErrorMessages","addValidator","sibling","now","expire","validationContext","_validationErrors","_deps","setDefaultMessages","en","dateBeforeNow","lookupQuerystring","lookupCookie","lookupLocalStorage","caches","htmlTag","userProfileLanguage","userLanguage","reactive","shopLanguage","packageNamespaces","resources","use","detection","defaultNS","fallbackNS","lng","fallbackLng","schemaName","schemaInstance","labels","messageBox","setLanguage","localize","tName","i18nName","handleName","selectorAttr","targetAttr","parseDefaultValueFromContent","navigator","browserLanguage","titleCaseName","errorType","merchantShopsReadyOrSkipped","bunyan","REACTION_LOG_LEVEL","createLogger","ReactionCore","ReactionRouter","TaxEntityCodes","DEFAULT_LAYOUT","DEFAULT_WORKFLOW","INDEX_OPTIONS","setDefaultTemplate"],"mappings":"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","file":"/app.js","sourcesContent":["import { Template } from \"meteor/templating\";\nimport { Components } from \"@reactioncommerce/reaction-components\";\n\n/**\n * Helpers: Checkout Address Book\n */\nTemplate.checkoutAddressBook.helpers({\n  /**\n   * @method AddressBook\n   * @summary returns a component for updating a user's address.\n   * @since 2.0.0\n   * @return {Object} - contains the component for updating a user's address.\n   */\n  AddressBook() {\n    const { status, position } = Template.currentData();\n    return {\n      component: Components.AddressBook,\n      heading: {\n        defaultValue: \"Choose shipping & billing address\",\n        i18nKey: \"addressBookGrid.chooseAddress\",\n        checkout: {\n          icon: (status === true || status === this.template) ? \"active\" : \"\",\n          position\n        }\n      }\n    };\n  }\n});\n","import { Template } from \"meteor/templating\";\nimport CompletedOrderContainer from \"/imports/plugins/core/checkout/client/containers/completedOrderContainer\";\n\n/**\n * cartCompleted helpers\n *\n * if order status = new translate submitted message\n */\nTemplate.cartCompleted.helpers({\n  completedOrder() {\n    return { component: CompletedOrderContainer };\n  }\n});\n","import { Meteor } from \"meteor/meteor\";\nimport { Template } from \"meteor/templating\";\nimport { Reaction } from \"/client/api\";\nimport { Cart } from \"/lib/collections\";\n\n\n/**\n * checkoutLoginCompleted\n * returns true if we've already past this stage,\n * or if the user is a guest but not anonymous\n */\n\nTemplate.checkoutLogin.helpers({\n  checkoutLoginCompleted() {\n    const self = this;\n    const cart = Cart.findOne();\n    if (cart && cart.workflow) {\n      const currentStatus = cart.workflow.status;\n      const guestUser = Reaction.hasPermission(\"guest\", Meteor.user());\n\n      // when you click as \"continue as guest\" you ARE still anonymous.\n      // you are only NOT anonymous if you sign up or have supply an email. Hence\n      // we check only that the user is at least guest before moving to next step.\n      // since sign up users can still have guest permission.\n      if (currentStatus !== self.template && guestUser === true) {\n        return true;\n      }\n    }\n    return false;\n  }\n});\n","import _ from \"lodash\";\nimport { Cart } from \"/lib/collections\";\nimport { Template } from \"meteor/templating\";\n\n/**\n * checkoutProgressBar helpers\n * progressbar status: \"visited first\",\"previous visited\",\"active\",\"next\"\n */\n\nTemplate.checkoutProgressBar.helpers({\n  progressbarStatusClass() {\n    const cartWorkflow = Cart.findOne().workflow;\n    const thisStep = cartWorkflow.status === this.template; // active\n    const previouslyVisited = _.includes(cartWorkflow.workflow, this.template);\n\n    if (previouslyVisited === true && thisStep === false) {\n      return \"visited\";\n    } else if (thisStep === true) {\n      return \"visited active\";\n    }\n    return \"\";\n  }\n});\n","import \"./review.html\";\nimport { Meteor } from \"meteor/meteor\";\nimport { Template } from \"meteor/templating\";\nimport CartSubTotals from \"../../../containers/cartSubTotalContainer\";\n\n/**\n* review status\n* trigger checkoutPayment step on template checkoutReview render\n*/\n\nTemplate.checkoutReview.onRendered(() => {\n  Meteor.call(\"workflow/pushCartWorkflow\", \"coreCartWorkflow\", \"checkoutReview\");\n});\n\nTemplate.checkoutReview.helpers({\n  CartSubTotals() {\n    return CartSubTotals;\n  }\n});\n","import { Reaction } from \"/client/api\";\nimport { Cart } from \"/lib/collections\";\nimport { Meteor } from \"meteor/meteor\";\nimport { Template } from \"meteor/templating\";\nimport \"./checkout.html\";\n\n//\n// cartCheckout is a wrapper template\n// controlling the load order of checkout step templates\n//\n\nTemplate.cartCheckout.helpers({\n  cart() {\n    if (Reaction.Subscriptions.Cart.ready()) {\n      return Cart.findOne();\n    }\n    return {};\n  },\n  cartCount() {\n    const cart = Cart.findOne();\n    if (cart.items && cart.items.length > 0) {\n      return true;\n    }\n    return false;\n  }\n});\n\n\nTemplate.cartCheckout.onCreated(() => {\n  if (Reaction.Subscriptions.Cart.ready()) {\n    const cart = Cart.findOne();\n    if (cart && cart.workflow && cart.workflow.status === \"new\") {\n      // if user logged in as normal user, we must pass it through the first stage\n      Meteor.call(\"workflow/pushCartWorkflow\", \"coreCartWorkflow\", \"checkoutLogin\", cart._id);\n    }\n  }\n});\n\n/**\n * checkoutSteps Helpers\n * helper isPending evaluates that this is\n * the current step, or has been processed already\n */\nTemplate.checkoutSteps.helpers({\n  isCompleted() {\n    if (this.status === true) {\n      return this.status;\n    }\n    return false;\n  },\n\n  isPending() {\n    if (this.status === this.template) {\n      return this.status;\n    }\n    return false;\n  }\n});\n\n/**\n * checkoutStepBadge Helpers\n */\nTemplate.checkoutStepBadge.helpers({\n  checkoutStepBadgeClass() {\n    const workflowStep = Template.instance().data;\n    // let currentStatus = Cart.findOne().workflow.status;\n    if (workflowStep.status === true || workflowStep.status === this.template) {\n      return \"active\";\n    }\n    return \"\";\n  }\n});\n","import Swiper from \"swiper\";\nimport { Components } from \"@reactioncommerce/reaction-components\";\nimport { $ } from \"meteor/jquery\";\nimport { Cart } from \"/lib/collections\";\nimport { Session } from \"meteor/session\";\nimport { Template } from \"meteor/templating\";\n\n/**\n * cartDrawer helpers\n *\n * @provides displayCartDrawer\n * @returns  open or closed cart drawer template\n */\n\nTemplate.cartDrawer.helpers({\n  displayCartDrawer() {\n    if (!Session.equals(\"displayCart\", true)) {\n      return null;\n    }\n\n    const storedCart = Cart.findOne();\n    let count = 0;\n\n    if (typeof storedCart === \"object\" && storedCart.items) {\n      for (const items of storedCart.items) {\n        count += items.quantity;\n      }\n    }\n\n    if (count === 0) {\n      return Template.emptyCartDrawer;\n    }\n    return Template.openCartDrawer;\n  }\n});\n\n/**\n * openCartDrawer helpers\n *\n */\nTemplate.openCartDrawer.onRendered(() => {\n  /**\n   * Add swiper to openCartDrawer\n   *\n   */\n\n  let swiper;\n\n  $(\"#cart-drawer-container\").fadeIn(() => {\n    if (!swiper) {\n      swiper = new Swiper(\".cart-drawer-swiper-container\", {\n        direction: \"horizontal\",\n        setWrapperSize: true,\n        loop: false,\n        grabCursor: true,\n        slidesPerView: \"auto\",\n        wrapperClass: \"cart-drawer-swiper-wrapper\",\n        slideClass: \"cart-drawer-swiper-slide\",\n        slideActiveClass: \"cart-drawer-swiper-slide-active\",\n        pagination: \".cart-drawer-pagination\",\n        paginationClickable: true\n      });\n    }\n  });\n});\n\nTemplate.openCartDrawer.helpers({\n  CartDrawerContainer() {\n    return Components.CartDrawer;\n  }\n});\n\nTemplate.emptyCartDrawer.onRendered(() => $(\"#cart-drawer-container\").fadeIn());\n\nTemplate.emptyCartDrawer.helpers({\n  EmptyCartDrawer() {\n    return Components.EmptyCartDrawer;\n  }\n});\n","import { $ } from \"meteor/jquery\";\nimport { Reaction } from \"/client/api\";\nimport { Cart } from \"/lib/collections\";\nimport { Template } from \"meteor/templating\";\n\n/**\n * cartIcon helpers\n *\n */\nTemplate.cartIcon.helpers({\n  cart() {\n    return Cart.findOne();\n  }\n});\n\nTemplate.cartIcon.events({\n  \"click .cart-icon\"() {\n    return $(\"#cart-drawer-container\").fadeOut(300, () => Reaction.toggleSession(\"displayCart\"));\n  }\n});\n","import React, { Component } from \"react\";\nimport PropTypes from \"prop-types\";\nimport { Meteor } from \"meteor/meteor\";\nimport { Orders } from \"/lib/collections\";\nimport { Reaction, i18next } from \"/client/api\";\nimport { Components } from \"@reactioncommerce/reaction-components\";\n\n/**\n * @file AddEmail React Component allows user to add an email after completing an order\n *\n * @module AddEmail\n * @extends Component\n */\n\nclass AddEmail extends Component {\n  constructor(props) {\n    super(props);\n    this.state = {\n      hasEmail: !!this.props.orderEmail,\n      order: this.props.order\n    };\n\n    this.handleSubmit = this.handleSubmit.bind(this);\n    this.handleFieldChange = this.handleFieldChange.bind(this);\n  }\n\n  /**\n   * @name handleFieldChange()\n   * @method\n   * @summary handle setting state whenever the field on the form change\n   * @param {Event} event - the event that fired\n   * @param {String} value - the new value for the field\n   * @param {String} field - which field to modify it's value\n   * @return {null} null\n   */\n  handleFieldChange = (event, value, field) => {\n    this.setState({\n      [field]: value\n    });\n  };\n\n  /**\n   * @name handleSubmit()\n   * @method\n   * @summary Handle submitting the email form\n   * @param {Event} event - the event that fired\n   * @returns {null} null\n   */\n  handleSubmit(event) {\n    event.preventDefault();\n    const cartId = Reaction.Router.getQueryParam(\"_id\");\n\n    Meteor.call(\"orders/addOrderEmail\", cartId, this.state.email, (err, results) => {\n      if (err) {\n        Alerts.toast(i18next.t(\"mail.alerts.cantSendEmail\"), \"error\");\n      } else {\n        // we need to re-grab order here so it has the email\n        const order = Orders.findOne({\n          userId: Meteor.userId(),\n          cartId\n        });\n        Meteor.call(\"orders/sendNotification\", order, (error) => {\n          if (!error) {\n            Alerts.toast(i18next.t(\"mail.alerts.emailSent\"), \"success\");\n            this.setState({\n              hasEmail: true\n            });\n          } else {\n            Alerts.toast(i18next.t(\"mail.alerts.addOrderEmailFailed\"), \"error\");\n          }\n        });\n      }\n      return results;\n    });\n  }\n\n  render() {\n    if (this.state.hasEmail) {\n      return (\n        <p>\n          <Components.Translation defaultValue=\"Order updates will be sent to\" i18nKey={\"cartCompleted.trackYourDelivery\"} />\n          &nbsp;<strong>{this.props.orderEmail}</strong>\n        </p>\n      );\n    }\n    return (\n      <div className=\"order-details-email-box-container\">\n        <div className=\"order-details-email-box\">\n          <form onSubmit={this.handleSubmit} className=\"add-email-input\">\n            <Components.Translation defaultValue=\"Hello! Add an email and receive order updates\" i18nKey=\"{cartCompleted.registerGuest}\" />\n            <div>\n              <Components.TextField\n                name=\"email\"\n                type=\"email\"\n                value={this.state.email}\n                onChange={this.handleFieldChange}\n              />\n              <Components.Button\n                type=\"submit\"\n                label=\"Add Email\"\n                bezelStyle={\"solid\"}\n                onClick={this.handleSubmit}\n              />\n            </div>\n          </form>\n        </div>\n        <div className=\"order-details-email-box-side\" />\n      </div>\n    );\n  }\n}\n\n/**\n * @name AddEmail propTypes\n * @type {propTypes}\n * @param {Object} props - React PropTypes\n * @property {Object} order - An object representing the order\n * @property {String} orderEmail - a string containing the email attached to the order if it exists\n * @return {Node} React node containing input box when no email has been attached to the order\n */\nAddEmail.propTypes = {\n  order: PropTypes.object,\n  orderEmail: PropTypes.string\n};\n\nexport default AddEmail;\n","import React from \"react\";\nimport PropTypes from \"prop-types\";\nimport { Components } from \"@reactioncommerce/reaction-components\";\n\nconst CartDrawer = ({ productItems, pdpPath, handleRemoveItem, handleCheckout, handleImage, handleLowInventory, handleShowProduct }) => (\n  <div>\n    <div className=\"cart-drawer-swiper-container\">\n      <div className=\"cart-drawer-swiper-wrapper\">\n        <div className=\"cart-drawer-swiper-slide\">\n          <Components.CartSubTotal />\n        </div>\n        {productItems.map((item) => (\n          <div className=\"cart-drawer-swiper-slide\" key={item._id}>\n            <Components.CartItems\n              item={item}\n              pdpPath={pdpPath}\n              handleLowInventory={handleLowInventory}\n              handleImage={handleImage}\n              handleRemoveItem={handleRemoveItem}\n              handleShowProduct={handleShowProduct}\n            />\n          </div>\n        ))}\n      </div>\n    </div>\n    <div className=\"cart-drawer-pagination\" />\n    <div className=\"row\">\n      <Components.Button\n        bezelStyle=\"solid\"\n        className={{\n          \"btn-lg\": true,\n          \"btn-block\": true\n        }}\n        status=\"cta\"\n        id=\"btn-checkout\"\n        label=\"Checkout now\"\n        i18nKeyLabel=\"cartDrawer.checkout\"\n        onClick={handleCheckout}\n      />\n    </div>\n  </div>\n);\n\nCartDrawer.propTypes = {\n  handleCheckout: PropTypes.func,\n  handleImage: PropTypes.func,\n  handleLowInventory: PropTypes.func,\n  handleRemoveItem: PropTypes.func,\n  handleShowProduct: PropTypes.func,\n  pdpPath: PropTypes.func,\n  productItems: PropTypes.array\n};\n\nexport default CartDrawer;\n","import React from \"react\";\nimport PropTypes from \"prop-types\";\nimport { Components } from \"@reactioncommerce/reaction-components\";\n\nconst CartIcon = ({ handleClick, cart }) => (\n  <Components.Button\n    tagName=\"div\"\n    className={{\n      \"btn\": false,\n      \"btn-default\": false,\n      \"cart-icon\": true\n    }}\n    onClick={handleClick}\n  >\n    <span data-event-category=\"cart\">\n      <i className=\"fa fa-shopping-cart fa-2x\" />\n    </span>\n    <div className=\"badge\">{cart ? cart.getCount() : 0}</div>\n  </Components.Button>\n);\n\nCartIcon.propTypes = {\n  cart: PropTypes.object,\n  handleClick: PropTypes.func.isRequired\n};\n\nexport default CartIcon;\n","import React, { Component } from \"react\";\nimport PropTypes from \"prop-types\";\nimport { Components, registerComponent } from \"@reactioncommerce/reaction-components\";\n\nclass CartItems extends Component {\n  static propTypes = {\n    handleImage: PropTypes.func,\n    handleLowInventory: PropTypes.func,\n    handleRemoveItem: PropTypes.func,\n    handleShowProduct: PropTypes.func,\n    item: PropTypes.object,\n    pdpPath: PropTypes.func\n  }\n\n  handleClick = (event) => {\n    event.preventDefault();\n\n    if (typeof this.props.handleShowProduct === \"function\") {\n      this.props.handleShowProduct(this.props.item);\n    }\n  }\n\n  removalClick = (event) => {\n    event.preventDefault();\n\n    if (typeof this.props.handleRemoveItem === \"function\") {\n      this.props.handleRemoveItem(event, this.props.item);\n    }\n  }\n\n  render() {\n    const {\n      handleLowInventory,\n      pdpPath,\n      handleImage,\n      item\n    } = this.props;\n\n    const mediaUrl = handleImage(item);\n\n    return (\n      <div\n        className=\"cart-items\"\n        key={item._id}\n        style={{ display: \"inline-block\" }}\n      >\n        {handleLowInventory(item) &&\n          <div className=\"badge badge-top badge-low-inv-warning\">\n            <Components.Translation i18nKey=\"cartDrawerItems.limitedSupply\" defaultValue=\"Limited supply\" />\n          </div>\n        }\n        <Components.IconButton\n          icon=\"fa fa-times fa-lg remove-cart-item\"\n          onClick={this.removalClick}\n          kind=\"removeItem\"\n        />\n        <a href={pdpPath(item)}\n          data-event-action=\"product-click\"\n          data-event-value={item.productId}\n          onClick={this.handleClick}\n        >\n          {mediaUrl ?\n            <div className=\"center-cropped\" style={{ backgroundImage: `url('${mediaUrl}')` }}>\n              <img src={mediaUrl} className=\"product-grid-item-images img-responsive\" alt=\"\" />\n            </div> :\n            <div className=\"center-cropped\" style={{ backgroundImage: \"url('/resources/placeholder.gif')\" }}>\n              <img src=\"/resources/placeholder.gif\" className=\"product-grid-item-images img-responsive\" alt=\"\" />\n            </div>\n          }\n        </a>\n        <div className=\"cart-labels\">\n          <div>\n            <span className=\"badge\" style={{ marginRight: \"3px\" }}>{item.quantity}</span>\n            <span className=\"cart-item-title\">\n              {item.title}\n              <br />\n              <small>{item.variants.title}</small>\n            </span>\n          </div>\n        </div>\n      </div>\n    );\n  }\n}\n\nregisterComponent(\"CartItems\", CartItems);\n\nexport default CartItems;\n","import React from \"react\";\nimport PropTypes from \"prop-types\";\nimport { Components } from \"@reactioncommerce/reaction-components\";\n\nconst CartPanel = (props) => (\n  <div style={{ textAlign: \"center\" }}>\n    <span id=\"spin\" >\n      <i className=\"fa fa-circle-o-notch fa-spin fa-3x fa-fw\"\n        style={{ marginBottom: \"10px\", marginTop: \"10px\", fontSize: \"2.65em\" }}\n      />\n    </span>\n    <div className=\"cart-alert-text\">{}</div>\n    <div className=\"cart-alert-checkout\">\n      <Components.Button\n        id=\"btn-checkout\"\n        bezelStyle=\"solid\"\n        className=\"btn-lg btn-block\"\n        i18nKeyLabel=\"cartDrawer.checkout\"\n        label=\"Checkout now\"\n        onClick={props.onClick || props.checkout}\n        status=\"success\"\n      />\n    </div>\n  </div>\n);\n\nCartPanel.propTypes = {\n  checkout: PropTypes.func,\n  onClick: PropTypes.func\n};\n\nexport default CartPanel;\n","import React, { Component } from \"react\";\nimport PropTypes from \"prop-types\";\nimport classnames from \"classnames\";\nimport { Components } from \"@reactioncommerce/reaction-components\";\n\nclass CartSubTotal extends Component {\n  static propTypes = {\n    cartCount: PropTypes.number,\n    cartDiscount: PropTypes.string,\n    cartShipping: PropTypes.string,\n    cartSubTotal: PropTypes.string,\n    cartTaxes: PropTypes.string,\n    cartTotal: PropTypes.string,\n    isLoading: PropTypes.bool\n  }\n\n  constructor(props) {\n    super(props);\n    this.state = {\n      ...props\n    };\n  }\n\n  componentWillReceiveProps(nextProps) {\n    this.setState({\n      ...nextProps\n    });\n  }\n\n  get source() {\n    return this.props.isLoading ? this.state : this.props;\n  }\n\n  validateDiscount() {\n    if (Number(this.source.cartDiscount) > 0) {\n      return (\n        <tr>\n          <td><Components.Translation defaultValue=\"Discount\" i18nKey=\"cartSubTotals.discount\" /></td>\n          <td><Components.Currency amount={this.source.cartDiscount} /></td>\n        </tr>\n      );\n    }\n  }\n  validateShipping() {\n    if (Number(this.source.cartShipping) > 0) {\n      return (\n        <tr>\n          <td><Components.Translation defaultValue=\"Shipping\" i18nKey=\"cartSubTotals.shipping\" /></td>\n          <td><Components.Currency amount={this.source.cartShipping} /></td>\n        </tr>\n      );\n    }\n  }\n  validateTaxes() {\n    if (Number(this.source.cartTaxes) > 0) {\n      return (\n        <tr>\n          <td><Components.Translation defaultValue=\"Tax\" i18nKey=\"cartSubTotals.tax\" /></td>\n          <td><Components.Currency amount={this.source.cartTaxes} /></td>\n        </tr>\n      );\n    }\n  }\n  render() {\n    const { isLoading } = this.props;\n    const tableClass = classnames({\n      \"table\": true,\n      \"table-condensed\": true,\n      \"loading\": isLoading\n    });\n    return (\n      <div className=\"cart-items\">\n        <div className=\"cart-totals\">\n          { isLoading && <Components.Loading/> }\n          <table className={tableClass}>\n            <thead>\n              <tr><th><Components.Translation defaultValue=\"Your cart\" i18nKey=\"cartSubTotals.head\" /></th></tr>\n            </thead>\n            <tbody>\n              <tr>\n                <td><Components.Translation defaultValue=\"Items in cart\" i18nKey=\"cartSubTotals.items\" /></td>\n                <td>{this.source.cartCount}</td>\n              </tr>\n              <tr>\n                <td><Components.Translation defaultValue=\"Sub total\" i18nKey=\"cartSubTotals.subtotal\" /></td>\n                <td><Components.Currency amount={this.source.cartSubTotal} /></td>\n              </tr>\n              {this.validateDiscount()}\n              {this.validateShipping()}\n              {this.validateTaxes()}\n              <tr>\n                <td><Components.Translation defaultValue=\"Total\" i18nKey=\"cartSubTotals.total\" /></td>\n                <td><Components.Currency amount={this.source.cartTotal} /></td>\n              </tr>\n            </tbody>\n          </table>\n        </div>\n      </div>\n    );\n  }\n}\n\nexport default CartSubTotal;\n","import React from \"react\";\nimport PropTypes from \"prop-types\";\nimport { Components } from \"@reactioncommerce/reaction-components\";\nimport CompletedShopOrders from \"./completedShopOrders\";\nimport CompletedOrderPaymentMethod from \"./completedOrderPaymentMethods\";\nimport CompletedOrderSummary from \"./completedOrderSummary\";\nimport AddEmail from \"./addEmail\";\n\n/**\n * @summary Displays a summary/information about the order the user has just completed\n * @param {Object} props - React PropTypes\n * @property {Object} order - An object representing the order\n * @property {Array} shops - An Array contains information broken down by shop\n * @property {Object} orderSummary - An object containing the items making up the order summary\n * @property {Array} paymentMethod - An array of paymentMethod objects\n * @property {Booleam} isProfilePage - A boolean value that checks if current page is user profile page\n * @return {Node} React node containing the top-level component for displaying the completed order/receipt page\n */\nconst CompletedOrder = ({ order, shops, orderSummary, paymentMethods, isProfilePage }) => {\n  if (!order) {\n    return (\n      <Components.NotFound\n        i18nKeyTitle=\"order.notFound\"\n        icon=\"fa fa-barcode\"\n        title=\"Order Not Found\"\n      />\n    );\n  }\n\n  let headerText;\n\n  if (isProfilePage) {\n    headerText = (<p className=\"order-id\"><strong>Order ID </strong>{order._id}</p>);\n  } else {\n    headerText = (\n      <div className=\"order-details-header\">\n        {/* This is the left side / main content */}\n        <h3><Components.Translation defaultValue=\"Thank You\" i18nKey={\"cartCompleted.thankYou\"} /></h3>\n        <p><strong>Order ID </strong>{order._id}</p>\n        {/* show a different message depending on whether we have an email or not */}\n        <AddEmail order={order} orderEmail={order.email} />\n        {/* This is the left side / main content*/}\n      </div>\n    );\n  }\n\n  return (\n    <div className=\"container order-completed\">\n      { headerText }\n      <div className=\"order-details-main\">\n        <div className=\"order-details-content-title\">\n          <p><Components.Translation defaultValue=\"Your Items\" i18nKey={\"cartCompleted.yourItems\"} /></p>\n        </div>\n        {shops.map((shop) => {\n          const shopKey = Object.keys(shop);\n          return (\n            <CompletedShopOrders\n              shopName={shop[shopKey].name}\n              items={shop[shopKey].items}\n              key={shopKey}\n              shippingMethod={shop[shopKey].shippingMethod}\n              isProfilePage={isProfilePage}\n            />\n          );\n        })}\n      </div>\n\n      <div className=\"order-details-side\">\n\n        {/* This is the right side / side content */}\n        <div className=\"shipping-payment-details\">\n          <div className=\"shipping-info\">\n            <div className=\"order-details-content-title\">\n              <p> <Components.Translation defaultValue=\"Shipping Address\" i18nKey={\"cartCompleted.shippingAddress\"} /></p>\n            </div>\n            {orderSummary.shipping.map((shipment) => {\n              if (shipment.address.fullName || shipment.address.address1) {\n                return <div className=\"order-details-info-box\" key={shipment._id}>\n                  <div className=\"order-details-info-box-content\">\n                    <p>\n                      {shipment.address.fullName}<br/>\n                      {shipment.address.address1} {shipment.address.address2}<br/>\n                      {shipment.address.city}, {shipment.address.region} {shipment.address.postal} {shipment.address.country}\n                    </p>\n                  </div>\n                </div>;\n              }\n              return null;\n            })}\n          </div>\n\n          <div className=\"payment-info\">\n            <div className=\"order-details-content-title\">\n              <p><Components.Translation defaultValue=\"Payment Method\" i18nKey={\"cartCompleted.paymentMethod\"} /></p>\n            </div>\n            {paymentMethods.map((paymentMethod) => <CompletedOrderPaymentMethod key={paymentMethod.key} paymentMethod={paymentMethod} />)}\n          </div>\n        </div>\n        <CompletedOrderSummary shops={shops} orderSummary={orderSummary} isProfilePage={isProfilePage} />\n        {/* This is the right side / side content */}\n      </div>\n\n    </div>\n  );\n};\n\nCompletedOrder.propTypes = {\n  isProfilePage: PropTypes.bool,\n  order: PropTypes.object,\n  orderSummary: PropTypes.object,\n  paymentMethods: PropTypes.array,\n  shops: PropTypes.array\n};\n\nexport default CompletedOrder;\n","import React from \"react\";\nimport PropTypes from \"prop-types\";\nimport { getPrimaryMediaForOrderItem } from \"/lib/api\";\nimport { Components, registerComponent } from \"@reactioncommerce/reaction-components\";\n\n/**\n * @summary Shows the individual line items for a completed order\n * @param {Object} props - React PropTypes\n * @property {Object} item - An object representing each item on the order\n * @return {Node} React node containing each line item on an order\n */\nconst CompletedOrderItem = ({ item }) => (\n  <div className=\"row order-details-line\">\n    <div className=\"order-details-media\">\n      <Components.ProductImage\n        item={item}\n        displayMedia={getPrimaryMediaForOrderItem}\n        size=\"small\"\n        badge={false}\n      />\n    </div>\n    <div className=\"order-details-title\">{item.product.title}<p>{item.variants.title}</p></div>\n    <div className=\"order-details-quantity\"><span>{item.quantity}</span></div>\n    <div className=\"order-details-price\"><Components.Currency amount={item.variants.price} /></div>\n  </div>\n);\n\nCompletedOrderItem.propTypes = {\n  item: PropTypes.object\n};\n\nregisterComponent(\"CompletedOrderItem\", CompletedOrderItem);\n\nexport default CompletedOrderItem;\n","import React from \"react\";\nimport PropTypes from \"prop-types\";\nimport { Components, registerComponent } from \"@reactioncommerce/reaction-components\";\n\nconst creditCardClasses = {\n  VISA: \"fa fa-cc-visa\",\n  MAST: \"fa fa-cc-mastercard\",\n  DISC: \"fa fa-cc-discover\",\n  AMEX: \"fa fa-cc-amex\"\n};\n\n/**\n * @summary Displays one of possibly many payment methods on an order\n * @param {Object} props - React PropTypes\n * @property {Object} paymentMethod - An object representing the payment method\n * @return {Node} React node containing each payment method\n */\nconst CompletedOrderPaymentMethod = ({ paymentMethod }) => {\n  // allow i18n override for \"processor\" label\n  const i18nKey = `checkout.paymentMethod.${paymentMethod.processor}`;\n  // display stored card methods\n  if (paymentMethod.method === \"credit\" && paymentMethod.storedCard) {\n    const creditCardType = paymentMethod.storedCard.substring(0, 4).toUpperCase();\n    const creditCardClass = creditCardClasses[creditCardType];\n    return <div className=\"order-details-info-box\">\n      <div className=\"order-details-info-box-content\">\n        <p className=\"order-details-payment-method\"><i className={creditCardClass} /> &nbsp;&nbsp;{paymentMethod.storedCard}</p>\n      </div>\n    </div>;\n  }\n  return <div className=\"order-details-info-box\">\n    <div className=\"order-details-info-box-content\">\n      <p className=\"order-details-payment-method\">\n        <Components.Translation defaultValue={paymentMethod.processor} i18nKey={i18nKey} />\n      </p>\n    </div>\n  </div>;\n};\n\nCompletedOrderPaymentMethod.propTypes = {\n  paymentMethod: PropTypes.object\n};\n\nregisterComponent(\"CompletedOrderPaymentMethod\", CompletedOrderPaymentMethod);\n\nexport default CompletedOrderPaymentMethod;\n","import React from \"react\";\nimport PropTypes from \"prop-types\";\nimport { Components, registerComponent } from \"@reactioncommerce/reaction-components\";\nimport ShopOrderSummary from \"./shopOrderSummary\";\n\n\n/**\n * @summary Display the summary/total information for an order\n * @param {Object} props - React PropTypes\n * @property {Array} shops - An array of summary information broken down by shop\n * @property {Object} orderSummary - An object representing the \"bottom line\" summary for the order\n * @property {boolean} isProfilePage - Checks if current page is Profile Page\n * @return {Node} React node containing the order summary broken down by shop\n */\nconst CompletedOrderSummary = ({ shops, orderSummary, isProfilePage }) => (\n  <div>\n    <div className=\"order-details-content-title\">\n      <p><Components.Translation defaultValue=\"Order Summary\" i18nKey={\"cartCompleted.orderSummary\"} /></p>\n    </div>\n    <div className=\"order-details-info-box\">\n      {shops.map((shop) => {\n        const shopKey = Object.keys(shop);\n        return <ShopOrderSummary shopSummary={shop[shopKey]} key={shopKey} isProfilePage={isProfilePage} />;\n      })}\n      <hr />\n      {orderSummary.discounts > 0 &&\n        <div className=\"order-summary-line\">\n          <div className=\"order-summary-discount-title\">\n            <Components.Translation defaultValue=\"Discount Total\" i18nKey={\"cartCompleted.discountTotal\"}/>\n          </div>\n          <div className=\"order-summary-discount-value\">\n            <Components.Currency amount={orderSummary.discounts}/>\n          </div>\n        </div>\n      }\n      <div className=\"order-summary-line\">\n        <div className=\"order-summary-total-title\">\n          <Components.Translation defaultValue=\"Order Total\" i18nKey={\"cartCompleted.orderTotal\"}/>\n        </div>\n        <div className=\"order-summary-total-value\">\n          <Components.Currency amount={orderSummary.total}/>\n        </div>\n      </div>\n    </div>\n  </div>\n);\n\nCompletedOrderSummary.propTypes = {\n  isProfilePage: PropTypes.bool,\n  orderSummary: PropTypes.object,\n  shops: PropTypes.array\n};\n\nregisterComponent(\"CompletedOrderSummary\", CompletedOrderSummary);\n\nexport default CompletedOrderSummary;\n","import React from \"react\";\nimport PropTypes from \"prop-types\";\nimport { registerComponent } from \"@reactioncommerce/reaction-components\";\nimport CompletedOrderItem from \"./completedOrderItem\";\n\n/**\n * @summary Displays the order breakdown for each Shop\n * @param {Object} props - React PropTypes\n * @property {String} shopName - The name of the shop\n * @property {Array} items - an array of individual items for this shop\n * @property {boolean} isProfilePage - Checks if current page is profile page\n * @return {Node} React node containing the break down of the order by Shop\n */\nconst CompletedShopOrders = ({ shopName, items, shippingMethod, isProfilePage }) => {\n  const shippingName = isProfilePage ? (\n    <span>\n      <strong>\n        {shippingMethod.label}\n      </strong>{shippingMethod.deliveryDate && <span> - estimated delivery {shippingMethod.deliveryDate}</span>}\n    </span>\n  ) : `${shippingMethod.carrier} - ${shippingMethod.label}`;\n  return (\n    <div className=\"order-details-shop-breakdown\">\n      {/* This is the left side / main content */}\n      <div className=\"order-details-info-box\">\n        <div className=\"store-detail-box\">\n          <span className=\"order-details-store-title\">{shopName}</span>\n          <span className=\"order-details-shipping-name\">{shippingName}</span>\n        </div>\n      </div>\n      <div className=\"order-details-info-box-topless\">\n        {items.map((item) => <CompletedOrderItem item={item} key={item._id} />)}\n      </div>\n\n      {/* This is the left side / main content */}\n    </div>\n  );\n};\n\nCompletedShopOrders.propTypes = {\n  isProfilePage: PropTypes.bool,\n  items: PropTypes.array,\n  order: PropTypes.object,\n  shippingMethod: PropTypes.object,\n  shopName: PropTypes.string\n};\n\nregisterComponent(\"CompletedShopOrders\", CompletedShopOrders);\n\nexport default CompletedShopOrders;\n","import React from \"react\";\nimport PropTypes from \"prop-types\";\nimport { $ } from \"meteor/jquery\";\nimport { Components, registerComponent } from \"@reactioncommerce/reaction-components\";\nimport { Reaction } from \"/client/api\";\n\nfunction handleKeepShopping(event) {\n  event.stopPropagation();\n  event.preventDefault();\n  return $(\"#cart-drawer-container\").fadeOut(300, () => Reaction.toggleSession(\"displayCart\"));\n}\n\nconst EmptyCartDrawer = () => (\n  <div className=\"cart-drawer\" id=\"cart-drawer\">\n    <div className=\"cart-drawer-empty\">\n      <div className=\"row cart-drawer-empty-msg\">\n        <p className=\"text-align\">\n          <i className=\"fa fa-frown-o fa-lg\" />\n        </p>\n        <p className=\"text-align\">\n          <Components.Translation defaultValue=\"We're sad. Your cart is empty.\" i18nKey=\"cartDrawer.empty\" />\n        </p>\n      </div>\n      <div className=\"row\">\n        <Components.Button\n          id=\"btn-keep-shopping\"\n          bezelStyle=\"solid\"\n          className=\"btn-lg btn-block\"\n          i18nKeyLabel=\"cartDrawer.keepShopping\"\n          label=\"Keep on shopping\"\n          onClick={handleKeepShopping}\n          status=\"warning\"\n        />\n      </div>\n    </div>\n  </div>\n);\n\nEmptyCartDrawer.propTypes = {\n  keepShopping: PropTypes.func\n};\n\nregisterComponent(\"EmptyCartDrawer\", EmptyCartDrawer);\n\nexport default EmptyCartDrawer;\n","import React from \"react\";\nimport PropTypes from \"prop-types\";\nimport { Components, registerComponent } from \"@reactioncommerce/reaction-components\";\n\n/**\n * @summary Displays the order summary for each shop\n * @param {Object} props - React PropTypes\n * @property {Object} shopSummary - An object representing the summary information for this Shop\n * @property {boolean} isProfilePage - Checks if current page is profile page (unused)\n * @return {Node} React node containing the summary information for each shop\n */\nconst ShopOrderSummary = ({ shopSummary }) => (\n  <div className=\"order-details-info-box-content\">\n    <div className=\"order-summary-line\">\n      <div className=\"order-summary-header-line\" />\n      <div className=\"order-summary-store-name\">\n        <Components.Translation defaultValue=\"Fulfilled by\" i18nKey={\"cartCompleted.fulfilledBy\"}/> {shopSummary.name}\n      </div>\n    </div>\n    <div className=\"order-summary-line\">\n      <div className=\"order-summary-title\">\n        <Components.Translation defaultValue=\"Items in order\" i18nKey={\"cartCompleted.orderItems\"}/>\n      </div>\n      <div className=\"order-summary-value\">{shopSummary.quantityTotal}</div>\n    </div>\n    <div className=\"order-summary-line\">\n      <div className=\"order-summary-title\">\n        <Components.Translation defaultValue=\"Subtotal\" i18nKey={\"cartCompleted.orderSubtotal\"}/>\n      </div>\n      <div className=\"order-summary-value\">\n        <Components.Currency amount={shopSummary.subTotal}/>\n      </div>\n    </div>\n    {shopSummary.shipping > 0 &&\n      <div className=\"order-summary-line\">\n        <div className=\"order-summary-title\">\n          <Components.Translation defaultValue=\"Shipping\" i18nKey={\"cartCompleted.orderShipping\"}/>\n        </div>\n        <div className=\"order-summary-value\">\n          <Components.Currency amount={shopSummary.shipping}/>\n        </div>\n      </div>\n    }\n    {shopSummary.taxes > 0 &&\n      <div className=\"order-summary-line\">\n        <div className=\"order-summary-title\">\n          <Components.Translation defaultValue=\"Tax\" i18nKey={\"cartCompleted.orderTax\"}/>\n        </div>\n        <div className=\"order-summary-value\">\n          <Components.Currency amount={shopSummary.taxes}/>\n        </div>\n      </div>\n    }\n  </div>\n);\n\nShopOrderSummary.propTypes = {\n  isProfilePage: PropTypes.bool,\n  shopSummary: PropTypes.object\n};\n\nregisterComponent(\"ShopOrderSummary\", ShopOrderSummary);\n\nexport default ShopOrderSummary;\n","import { compose, withProps } from \"recompose\";\nimport { registerComponent, composeWithTracker } from \"@reactioncommerce/reaction-components\";\nimport { $ } from \"meteor/jquery\";\nimport { Session } from \"meteor/session\";\nimport { Meteor } from \"meteor/meteor\";\nimport { Cart } from \"/lib/collections\";\nimport { getPrimaryMediaForOrderItem, ReactionProduct } from \"/lib/api\";\nimport { Reaction } from \"/client/api\";\nimport CartDrawer from \"../components/cartDrawer\";\n\n// event handlers to pass in as props\nconst handlers = {\n  handleImage(item) {\n    const media = getPrimaryMediaForOrderItem(item);\n    return media && media.url({ store: \"small\" });\n  },\n\n  /**\n  * showLowInventoryWarning\n  * @param {Object} productItem - product item object\n  * @return {Boolean} return true if low inventory on variant\n  */\n  handleLowInventory(productItem) {\n    const { variants } = productItem;\n    if (variants && variants.inventoryPolicy &&\n      variants.lowInventoryWarningThreshold) {\n      return variants.inventoryQuantity <=\n        variants.lowInventoryWarningThreshold;\n    }\n    return false;\n  },\n\n  handleShowProduct(productItem) {\n    if (productItem) {\n      Reaction.Router.go(\"product\", {\n        handle: productItem.productId,\n        variantId: productItem.variants._id\n      });\n\n      ReactionProduct.setCurrentVariant(productItem.variants._id);\n    }\n  },\n\n  pdpPath(productItem) {\n    if (productItem) {\n      const handle = productItem.productId;\n      return Reaction.Router.pathFor(\"product\", {\n        hash: {\n          handle,\n          variantId: productItem.variants._id\n        }\n      });\n    }\n  },\n\n  handleRemoveItem(event, item) {\n    event.stopPropagation();\n    event.preventDefault();\n    const cartItemElement = $(event.target).closest(\".cart-drawer-swiper-slide\");\n    cartItemElement.fadeOut(500, () => Meteor.call(\"cart/removeFromCart\", item._id));\n  },\n\n  handleCheckout() {\n    $(\"#cart-drawer-container\").fadeOut();\n    Session.set(\"displayCart\", false);\n    return Reaction.Router.go(\"cart/checkout\");\n  }\n};\n\n// reactive Tracker wrapped function\nfunction composer(props, onData) {\n  const userId = Meteor.userId();\n  const shopId = Reaction.marketplace.merchantCarts ? Reaction.getShopId() : Reaction.getPrimaryShopId();\n  const cart = Cart.findOne({ userId, shopId });\n  if (!cart) return;\n\n  Meteor.subscribe(\"CartImages\", cart._id);\n\n  const productItems = cart && cart.items;\n  onData(null, {\n    productItems\n  });\n}\n\n// register the containers\nregisterComponent(\"CartDrawer\", CartDrawer, [\n  withProps(handlers),\n  composeWithTracker(composer)\n]);\n\nexport default compose(\n  withProps(handlers),\n  composeWithTracker(composer)\n)(CartDrawer);\n","import Velocity from \"velocity-animate\";\nimport { compose, withProps } from \"recompose\";\nimport { registerComponent, composeWithTracker } from \"@reactioncommerce/reaction-components\";\nimport { Cart } from \"/lib/collections\";\nimport { Reaction } from \"/client/api\";\nimport CartIcon from \"../components/cartIcon\";\n\nconst handlers = {\n  handleClick(e) {\n    e.preventDefault();\n    const cartDrawer = document.querySelector(\"#cart-drawer-container\");\n    Velocity(cartDrawer, { opacity: 1 }, 300, () => {\n      Reaction.toggleSession(\"displayCart\");\n    });\n  }\n};\n\nconst composer = (props, onData) => {\n  const subscription = Reaction.Subscriptions.Cart;\n\n  if (subscription.ready()) {\n    const cart = Cart.findOne();\n    onData(null, { cart });\n  }\n};\n\nregisterComponent(\"CartIcon\", CartIcon, [\n  withProps(handlers),\n  composeWithTracker(composer)\n]);\n\nexport default compose(\n  withProps(handlers),\n  composeWithTracker(composer)\n)(CartIcon);\n","import { withProps } from \"recompose\";\nimport { registerComponent } from \"@reactioncommerce/reaction-components\";\nimport { $ } from \"meteor/jquery\";\nimport { Session } from \"meteor/session\";\nimport { Reaction } from \"/client/api\";\nimport CartPanel from \"../components/cartPanel\";\n\nconst handlers = {\n  checkout() {\n    $(\"#cart-drawer-container\").fadeOut();\n    Session.set(\"displayCart\", false);\n    return Reaction.Router.go(\"cart/checkout\");\n  }\n};\n\nregisterComponent(\"CartPanel\", CartPanel, withProps(handlers));\n\nexport default withProps(handlers)(CartPanel);\n","import { setTimeout } from \"timers\";\nimport { compose } from \"recompose\";\nimport { registerComponent, composeWithTracker } from \"@reactioncommerce/reaction-components\";\nimport { Cart } from \"/lib/collections\";\nimport CartSubTotal from \"../components/cartSubTotal\";\n\nfunction composer(props, onData) {\n  onData(null, {\n    isLoading: true\n  });\n\n  let stopped = false;\n  setTimeout(() => {\n    if (stopped) return;\n    const cart = Cart.findOne();\n    if (cart) {\n      onData(null, {\n        cartSubTotal: cart.getSubTotal(),\n        cartCount: cart.getCount(),\n        cartShipping: cart.getShippingTotal(),\n        cartDiscount: cart.getDiscounts(),\n        cartTaxes: cart.getTaxTotal(),\n        cartTotal: cart.getTotal(),\n        isLoading: false\n      });\n    }\n  }, 200);\n\n  return () => {\n    stopped = true;\n  };\n}\n\nconst hocs = [\n  composeWithTracker(composer)\n];\n\nregisterComponent(\"CartSubTotal\", CartSubTotal, hocs);\n\nexport default compose(...hocs)(CartSubTotal);\n","import { compose } from \"recompose\";\nimport { Meteor } from \"meteor/meteor\";\nimport { Session } from \"meteor/session\";\nimport { Orders } from \"/lib/collections\";\nimport { Reaction } from \"/client/api\";\nimport { registerComponent, composeWithTracker } from \"@reactioncommerce/reaction-components\";\nimport CompletedOrder from \"../components/completedOrder\";\n\nfunction composer(props, onData) {\n  // The Cart subscription does not update when you delete the original record\n  // but don't change parameters so we need to re-init that subscription here.\n  // (possibly because the oplog is tied to the original id?)\n  // I think this is a bug in SubscriptionManager but that should be revisited later\n  const sessionId = Session.get(\"sessionId\");\n  Reaction.Subscriptions.Cart = Reaction.Subscriptions.Manager.subscribe(\"Cart\", sessionId, Meteor.userId());\n  const cartId = Reaction.Router.getQueryParam(\"_id\");\n  const orderSub = Meteor.subscribe(\"CompletedCartOrder\", Meteor.userId(), cartId);\n\n  if (orderSub.ready()) {\n    const order = Orders.findOne({\n      userId: Meteor.userId(),\n      cartId\n    });\n\n    if (order) {\n      const imageSub = Meteor.subscribe(\"OrderImages\", order._id);\n\n      const orderSummary = {\n        quantityTotal: order.getCount(),\n        subtotal: order.getSubTotal(),\n        shippingTotal: order.getShippingTotal(),\n        tax: order.getTaxTotal(),\n        discounts: order.getDiscounts(),\n        total: order.getTotal(),\n        shipping: order.shipping\n      };\n\n      if (imageSub.ready()) {\n        onData(null, {\n          isProfilePage: false,\n          shops: order.getShopSummary(),\n          order,\n          orderSummary,\n          paymentMethods: order.getUniquePaymentMethods()\n        });\n      }\n    } else {\n      onData(null, {\n        order\n      });\n    }\n  }\n}\n\nregisterComponent(\"CompletedOrder\", CompletedOrder, [\n  composeWithTracker(composer)\n]);\n\nexport default compose(composeWithTracker(composer))(CompletedOrder);\n","import { Cart } from \"/lib/collections\";\nimport { Template } from \"meteor/templating\";\n\n/*\n * Template helpers for cart\n *\n */\n\n/**\n * cart template helper\n * @description\n * methods to return cart calculated values\n * cartCount, cartSubTotal, cartShipping, cartTaxes, cartTotal\n * are calculated by a transformation on the collection\n * and are available to use in template as cart.xxx\n * in template: {{cart.getCount}}\n * in code: Cart.findOne().getTotal()\n * @return {Object} returns inventory helpers\n */\nTemplate.registerHelper(\"cart\", () => {\n  const cartHelpers = {\n    /**\n     * showCartIconWarning\n     * @return {Boolean} return true if low inventory on any item in cart\n     */\n    showCartIconWarning() {\n      if (this.showLowInventoryWarning()) {\n        return true;\n      }\n      return false;\n    },\n    /**\n     * showLowInventoryWarning\n     * @return {Boolean} return true if low inventory on any item in cart\n     */\n    showLowInventoryWarning() {\n      let item;\n      const storedCart = Cart.findOne();\n      // we're not being picky here - first thing in cart\n      // that is low will trigger a inventory warning\n      if (storedCart && storedCart.items) {\n        for (item of storedCart.items) {\n          if (item.variants && item.variants.inventoryPolicy &&\n            item.variants.lowInventoryWarningThreshold) {\n            return item.variants.inventoryQuantity <=\n              item.variants.lowInventoryWarningThreshold;\n          }\n        }\n      }\n      return false;\n    },\n    /**\n     * showLowInventoryWarning\n     * @param {Object} variant - variant object to check inventory levels on\n     * @return {Boolean} return true if low inventory on variant\n     */\n    showItemLowInventoryWarning(variant) {\n      if (variant && variant.inventoryPolicy &&\n        variant.lowInventoryWarningThreshold) {\n        return variant.inventoryQuantity <=\n          variant.lowInventoryWarningThreshold;\n      }\n      return false;\n    }\n  };\n  return cartHelpers;\n});\n\n/**\n * cartPayerName\n * @summary gets current cart billing address / payment name\n * @return {String} returns cart.billing[0].fullName\n */\nTemplate.registerHelper(\"cartPayerName\", () => {\n  const cart = Cart.findOne();\n  if (cart && cart.billing && cart.billing[0] && cart.billing[0].address && cart.billing[0].address.fullName) {\n    const name = cart.billing[0].address.fullName;\n    if (name.replace(/[a-zA-Z ]*/, \"\").length === 0) return name;\n  }\n});\n","import _ from \"lodash\";\nimport { Meteor } from \"meteor/meteor\";\nimport { check } from \"meteor/check\";\nimport { Logger, Reaction, i18next } from \"/client/api\";\nimport { Cart } from \"/lib/collections\";\n\n// Client Cart Methods\n// Stubs with matching server methods.\nMeteor.methods({\n  // Not used for stripe connect integration\n  // Under consideration for deprecation and migrating other payment Packages\n  // to payments-stripe style methods\n  \"cart/submitPayment\"(paymentMethod) {\n    check(paymentMethod, Object);\n    const checkoutCart = Cart.findOne({\n      userId: Meteor.userId()\n    });\n\n    const cart = _.clone(checkoutCart);\n    const cartId = cart._id;\n    const invoice = {\n      shipping: cart.getShippingTotal(),\n      subtotal: cart.getSubTotal(),\n      taxes: cart.getTaxTotal(),\n      discounts: cart.getDiscounts(),\n      total: cart.getTotal()\n    };\n    // we won't actually close the order at this stage.\n    // we'll just update the workflow and billing data where\n    // method-hooks can process the workflow update.\n\n    let selector;\n    let update;\n    // temp hack until we build out multiple billing handlers\n    // if we have an existing item update it, otherwise add to set.\n    if (cart.billing) {\n      selector = {\n        \"_id\": cartId,\n        \"billing._id\": cart.billing[0]._id\n      };\n      update = {\n        $set: {\n          \"billing.$.paymentMethod\": paymentMethod,\n          \"billing.$.invoice\": invoice\n        }\n      };\n    } else {\n      selector = {\n        _id: cartId\n      };\n      update = {\n        $addToSet: {\n          \"billing.paymentMethod\": paymentMethod,\n          \"billing.invoice\": invoice\n        }\n      };\n    }\n\n    Cart.update(selector, update, (error, result) => {\n      if (error) {\n        Logger.debug(error, \"An error occurred saving the order\");\n        throw new Meteor.Error(\"An error occurred saving the order\", error);\n      } else {\n        // it's ok and a safety check for this to be called multiple times\n        Meteor.call(\"workflow/pushCartWorkflow\", \"coreCartWorkflow\", \"paymentSubmitted\");\n        // Client Stub Actions\n        if (result === 1) {\n          Reaction.Router.go(\"cart/completed\", {}, {\n            _id: cartId\n          });\n        } else {\n          Alerts.inline(i18next.t(\"checkoutPayment.failedToPlaceOrder\"), \"danger\", {\n            autoHide: true,\n            placement: \"paymentMethod\"\n          });\n          Logger.debug(error, \"An error occurred saving the order\", cartId, error);\n          throw new Meteor.Error(\"An error occurred saving the order\", cartId, error);\n        }\n      }\n    });\n  }\n});\n","import \"./helpers/cart\";\nimport \"./methods/cart\";\n\nimport \"./templates/cartDrawer/cartDrawer.html\";\nimport \"./templates/cartDrawer/cartDrawer.js\";\n\nimport \"./templates/cartIcon/cartIcon.html\";\nimport \"./templates/cartIcon/cartIcon.js\";\n\nimport \"./templates/checkout/addressBook/addressBook.html\";\nimport \"./templates/checkout/addressBook/addressBook.js\";\nimport \"./templates/checkout/completed/completed.html\";\nimport \"./templates/checkout/completed/completed.js\";\nimport \"./templates/checkout/login/login.html\";\nimport \"./templates/checkout/login/login.js\";\nimport \"./templates/checkout/progressBar/progressBar.html\";\nimport \"./templates/checkout/progressBar/progressBar.js\";\nimport \"./templates/checkout/review/review.html\";\nimport \"./templates/checkout/review/review.js\";\nimport \"./templates/checkout/checkout.html\";\nimport \"./templates/checkout/checkout.js\";\n\nexport { default as CartDrawer } from \"./components/cartDrawer\";\nexport { default as CartIcon } from \"./components/cartIcon\";\nexport { default as CartItems } from \"./components/cartItems\";\nexport { default as CartPanel } from \"./components/cartPanel\";\nexport { default as CartSubTotal } from \"./components/cartSubTotal\";\nexport { default as EmptyCartDrawer } from \"./components/emptyCartDrawer\";\n\nexport { default as CartDrawerContainer } from \"./containers/cartDrawerContainer\";\nexport { default as CartIconContainer } from \"./containers/cartIconContainer\";\nexport { default as CartPanelContainer } from \"./containers/cartPanelContainer\";\nexport { default as CartSubTotalContainer } from \"./containers/cartSubTotalContainer\";\n","import _ from \"lodash\";\nimport { Template } from \"meteor/templating\";\nimport { ReactiveDict } from \"meteor/reactive-dict\";\nimport { Meteor } from \"meteor/meteor\";\nimport { Reaction, i18next } from \"/client/api\";\n\nfunction pkgPermissions(pkg) {\n  // if (Reaction.hasPermission(\"dashboard\")) {\n  //   // route specific permissions\n  //   if (pkg.name) {\n  //     return Reaction.hasPermission(pkg.name);\n  //   }\n  //   // name is a global group role for packages\n  //   if (pkg.template) {\n  //     return Reaction.hasPermission(pkg.template);\n  //   }\n  // }\n  return Reaction.hasPermission(pkg.name);\n}\n\nfunction enableReactionPackage(reactionPackage) {\n  const self = reactionPackage;\n\n  Meteor.call(\"shop/togglePackage\", self.packageId, false, (error, result) => {\n    if (result === 1) {\n      Alerts.toast(\n        i18next.t(\n          \"gridPackage.pkgEnabled\",\n          { app: i18next.t(self.i18nKeyLabel) }\n        ),\n        \"error\", {\n          type: `pkg-enabled-${self.name}`\n        }\n      );\n      if (self.name || self.route) {\n        const route = self.name || self.route;\n        return Reaction.Router.go(route);\n      }\n    } else if (error) {\n      return Alerts.toast(\n        i18next.t(\n          \"gridPackage.pkgDisabled\",\n          { app: i18next.t(self.i18nKeyLabel) }\n        ),\n        \"warning\"\n      );\n    }\n  });\n}\n\nfunction disableReactionPackage(reactionPackage) {\n  const self = reactionPackage;\n\n  if (self.name === \"core\") {\n    return;\n  }\n\n  Alerts.alert(\n    \"Disable Package\",\n    i18next.t(\"gridPackage.disableConfirm\", { app: i18next.t(self.i18nKeyLabel) }),\n    {\n      type: \"warning\",\n      showCancelButton: true\n    },\n    () => {\n      Meteor.call(\"shop/togglePackage\", self.packageId, true, (error, result) => {\n        if (result === 1) {\n          return Alerts.toast(\n            i18next.t(\"gridPackage.pkgDisabled\", {\n              app: i18next.t(self.i18nKeyLabel)\n            }),\n            \"success\"\n          );\n        } else if (error) {\n          throw new Meteor.Error(\"error-disabling-package\", error);\n        }\n      });\n    }\n  );\n}\n\nTemplate.packagesGrid.onCreated(function () {\n  this.state = new ReactiveDict();\n  this.state.setDefault({\n    groups: [],\n    appsByGroup: {},\n    apps: []\n  });\n\n  this.autorun(() => {\n    const apps = Reaction.Apps({ provides: \"dashboard\", enabled: true });\n    const groupedApps = _.groupBy(apps, (app) => app.container || \"misc\");\n    this.state.set(\"apps\", apps);\n    this.state.set(\"appsByGroup\", groupedApps);\n    this.state.set(\"groups\", Object.keys(groupedApps));\n  });\n});\n\n/**\n * packagesGrid helpers\n */\nTemplate.packagesGrid.helpers({\n  groups() {\n    return Template.instance().state.get(\"groups\");\n  },\n\n  appsInGroup(groupName) {\n    const group = Template.instance().state.get(\"appsByGroup\") || {};\n    return group[groupName] || false;\n  },\n\n  shopId() {\n    return Reaction.getShopId();\n  },\n\n\n  pkgPermissions\n});\n\nTemplate.packagesGridGroup.helpers({\n  pkgPermissions,\n\n  packageProps(app) {\n    return {\n      package: app,\n      enablePackage(reactionPackage, value) {\n        if (value === true) {\n          enableReactionPackage(reactionPackage);\n        } else {\n          disableReactionPackage(reactionPackage);\n        }\n      }\n    };\n  }\n});\n","import { Template } from \"meteor/templating\";\nimport { Reaction } from \"/client/api\";\n/* eslint no-loop-func: 0 */\n\n/**\n * gridPackage helpers\n */\nTemplate.gridPackage.helpers({\n  /**\n   * Properties for the card\n   * @see packages/reaction-ui/client/components/cards/cards.js\n   * @return {CardProps} Object of properties for the card component\n   */\n  cardProps() {\n    const instance = Template.instance();\n    const { data } = instance;\n    const apps = Reaction.Apps({\n      provides: \"settings\",\n      name: data.package.packageName\n    });\n\n    const controls = [];\n\n    if (data.package.priority > 1) {\n      controls.push({\n        icon: \"fa fa-plus-square fa-fw\",\n        onIcon: \"fa fa-check-square fa-fw\",\n        toggle: true,\n        toggleOn: data.package.enabled,\n        onClick() {\n          if (instance.data.enablePackage) {\n            instance.data.enablePackage(data.package, !data.package.enabled);\n          }\n        }\n      });\n    }\n\n    for (const app of apps) {\n      controls.push({\n        icon: app.icon || \"fa fa-cog fa-fw\",\n        onClick() {\n          Reaction.pushActionView(app);\n        }\n      });\n    }\n\n    if (data.package.route) {\n      controls.push({\n        icon: \"angle-right\",\n        onClick() {\n          Reaction.pushActionView(data.package);\n        }\n      });\n    }\n\n    return {\n      controls,\n      onContentClick() {\n        Reaction.pushActionView(data.package);\n      }\n    };\n  },\n\n  showPackageManagementEvent(pkg) {\n    if (pkg.name && pkg.route && pkg.template) {\n      return \"showPackageManagement\";\n    }\n  }\n});\n","import { Template } from \"meteor/templating\";\nimport { PackageList } from \"../../components\";\nimport { PackageListContainer } from \"../../containers\";\n\nTemplate.dashboardPackages.helpers({\n  PackageListComponent() {\n    return {\n      component: PackageListContainer(PackageList)\n    };\n  }\n});\n","import React, { Component } from \"react\";\nimport PropTypes from \"prop-types\";\nimport { Components } from \"@reactioncommerce/reaction-components\";\nimport ShopBrandImageOption from \"./shopBrandImageOption\";\n\nclass ShopBrandMediaManager extends Component {\n  static propTypes = {\n    brandMediaList: PropTypes.arrayOf(PropTypes.object),\n    metadata: PropTypes.object,\n    selectedMediaId: PropTypes.string\n  };\n\n  renderBrandImages() {\n    const { brandMediaList, selectedMediaId } = this.props;\n\n    return (brandMediaList || []).map((media) => (\n      <ShopBrandImageOption key={media._id} isSelected={selectedMediaId === media._id} media={media} />\n    ));\n  }\n\n  render() {\n    const { metadata } = this.props;\n\n    return (\n      <div>\n        {/* DragDropProvider is needed to avoid errors but we don't currently support dragging */}\n        <Components.DragDropProvider>\n          <div className=\"rui gallery-thumbnails\">\n            {this.renderBrandImages()}\n          </div>\n        </Components.DragDropProvider>\n        <Components.MediaUploader metadata={metadata} />\n      </div>\n    );\n  }\n}\n\nexport default ShopBrandMediaManager;\n","import _ from \"lodash\";\nimport { Meteor } from \"meteor/meteor\";\nimport { Template } from \"meteor/templating\";\nimport { AutoForm } from \"meteor/aldeed:autoform\";\nimport { Reaction, i18next } from \"/client/api\";\nimport { Packages, Shops } from \"/lib/collections\";\nimport { Media } from \"/imports/plugins/core/files/client\";\nimport ShopBrandMediaManager from \"./ShopBrandMediaManager\";\n\n\n/**\n * shopSettings helpers\n *\n */\nTemplate.shopSettings.helpers({\n  checked(enabled) {\n    if (enabled === true) {\n      return \"checked\";\n    }\n    return \"\";\n  },\n  shown(enabled) {\n    if (enabled !== true) {\n      return \"hidden\";\n    }\n    return \"\";\n  },\n  ShopBrandMediaManager() {\n    const shopId = Reaction.getShopId();\n\n    const shop = Shops.findOne({\n      \"_id\": shopId,\n      \"brandAssets.type\": \"navbarBrandImage\"\n    });\n\n    let selectedMediaId;\n    if (shop && _.isArray(shop.brandAssets)) {\n      selectedMediaId = shop.brandAssets[0].mediaId;\n    }\n\n    const userId = Meteor.userId();\n    const metadata = { type: \"brandAsset\", ownerId: userId, shopId };\n\n    const brandMediaList = Media.findLocal({\n      \"metadata.shopId\": Reaction.getShopId(),\n      \"metadata.type\": \"brandAsset\"\n    });\n\n    return {\n      component: ShopBrandMediaManager,\n      brandMediaList,\n      metadata,\n      selectedMediaId\n    };\n  },\n  shop() {\n    return Shops.findOne({\n      _id: Reaction.getShopId()\n    });\n  },\n  packageData() {\n    return Packages.findOne({\n      name: \"core\",\n      shopId: Reaction.getShopId()\n    });\n  },\n  addressBook() {\n    const address = Shops.findOne({\n      _id: Reaction.getShopId()\n    }).addressBook;\n    return address[0];\n  },\n  showAppSwitch(template) {\n    if (template === \"optionsShopSettings\") {\n      // do not have switch for options card/panel\n      return false;\n    }\n\n    if (Reaction.getMarketplaceSettings()) {\n      // if marketplace is enabled, only the primary shop can switch apps on and off.\n      return Reaction.getShopId() === Reaction.getPrimaryShopId();\n    }\n\n    // If marketplace is disabled, every shop can switch apps\n    return true;\n  }\n});\n\n/**\n * shopSettings autoform alerts\n */\n\nAutoForm.hooks({\n  shopEditForm: {\n    onSuccess() {\n      return Alerts.toast(i18next.t(\"admin.alerts.shopGeneralSettingsSaved\"), \"success\");\n    },\n    onError(operation, error) {\n      return Alerts.toast(`${i18next.t(\"admin.alerts.shopGeneralSettingsFailed\")} ${error}`, \"error\");\n    }\n  }\n});\n\nAutoForm.hooks({\n  shopEditAddressForm: {\n    onSuccess() {\n      return Alerts.toast(i18next.t(\"admin.alerts.shopAddressSettingsSaved\"), \"success\");\n    },\n    onError(operation, error) {\n      return Alerts.toast(`${i18next.t(\"admin.alerts.shopAddressSettingsFailed\")} ${error}`, \"error\");\n    }\n  }\n});\n\nAutoForm.hooks({\n  shopEditExternalServicesForm: {\n    onSuccess() {\n      return Alerts.toast(i18next.t(\"admin.alerts.shopExternalServicesSettingsSaved\"), \"success\");\n    },\n    onError(operation, error) {\n      return Alerts.toast(\n        `${i18next.t(\"admin.alerts.shopExternalServicesSettingsFailed\")} ${error}`,\n        \"error\"\n      );\n    }\n  }\n});\n\nAutoForm.hooks({\n  shopEditOptionsForm: {\n    onSuccess() {\n      return Alerts.toast(i18next.t(\"admin.alerts.shopOptionsSettingsSaved\"), \"success\");\n    },\n    onError(operation, error) {\n      return Alerts.toast(`${i18next.t(\"admin.alerts.shopOptionsSettingsFailed\")} ${error}`, \"error\");\n    }\n  }\n});\n\nTemplate.shopSettings.events({\n  /**\n   * settings update enabled status for services on change\n   * @param  {event} event    jQuery Event\n   * @return {void}\n   */\n  \"change input[name=enabled]\": (event) => {\n    const settingsKey = event.target.getAttribute(\"data-key\");\n    const packageId = event.target.getAttribute(\"data-id\");\n    const fields = [{\n      property: \"enabled\",\n      value: event.target.checked\n    }];\n\n    Meteor.call(\"registry/update\", packageId, settingsKey, fields);\n    Meteor.call(\"shop/togglePackage\", packageId, !event.target.checked);\n  }\n});\n\nTemplate.optionsShopSettings.helpers({\n  packageData() {\n    return Packages.findOne({\n      name: \"core\",\n      shopId: Reaction.getShopId()\n    });\n  }\n});\n","import React, { Component } from \"react\";\nimport PropTypes from \"prop-types\";\nimport { Meteor } from \"meteor/meteor\";\nimport { Components, registerComponent } from \"@reactioncommerce/reaction-components\";\nimport { Media } from \"/imports/plugins/core/files/client\";\nimport { i18next, Logger } from \"/client/api\";\n\nclass ShopBrandImageOption extends Component {\n  static propTypes = {\n    isSelected: PropTypes.bool,\n    media: PropTypes.object.isRequired\n  };\n\n  handleClick = () => {\n    const { isSelected, media } = this.props;\n\n    if (isSelected) return;\n\n    const asset = { mediaId: media._id, type: \"navbarBrandImage\" };\n\n    Meteor.call(\"shop/updateBrandAssets\", asset, (error, result) => {\n      if (error || result !== 1) {\n        return Alerts.toast(i18next.t(\"shopSettings.shopBrandAssetsFailed\"), \"error\");\n      }\n\n      Alerts.toast(i18next.t(\"shopSettings.shopBrandAssetsSaved\"), \"success\");\n    });\n  };\n\n  handleRemoveClick = () => {\n    const { media } = this.props;\n\n    Alerts.alert({\n      title: \"Remove this brand image?\",\n      type: \"warning\",\n      showCancelButton: true,\n      confirmButtonText: \"Remove\"\n    }, (shouldRemove) => {\n      if (shouldRemove) Media.remove(media._id).catch((error) => { Logger.error(error); });\n    });\n  };\n\n  render() {\n    const { media } = this.props;\n\n    return (\n      <Components.MediaItem\n        editable\n        onClick={this.handleClick}\n        onRemoveMedia={this.handleRemoveClick}\n        size=\"small\"\n        source={media}\n      />\n    );\n  }\n}\n\nregisterComponent(\"ShopBrandImageOption\", ShopBrandImageOption);\n\nexport default ShopBrandImageOption;\n","import { Template } from \"meteor/templating\";\nimport { Meteor } from \"meteor/meteor\";\nimport { FileRecord } from \"@reactioncommerce/file-collections\";\nimport { Logger, Reaction } from \"/client/api\";\nimport { Products } from \"/lib/collections\";\nimport { Media } from \"/imports/plugins/core/files/client\";\n\nfunction uploadHandler(event) {\n  const shopId = Reaction.getShopId();\n  const userId = Meteor.userId();\n  const { files } = event.target.files;\n\n  for (let i = 0; i < files.length; i += 1) {\n    const parts = files[i].name.split(\".\");\n    let product;\n    if (parts[0]) {\n      product = Products.findOne({\n        \"variants.barcode\": parts[0]\n      }, {\n        variants: {\n          $elemMatch: {\n            barcode: parts[0]\n          }\n        }\n      });\n    }\n    if (product) {\n      const fileRecord = FileRecord.fromFile(files[i]);\n      fileRecord.metadata = {\n        ownerId: userId,\n        productId: product._id,\n        variantId: product.variants[0]._id,\n        shopId,\n        priority: Number(parts[1]) || 0\n      };\n      fileRecord.upload()\n        .then(() => Media.insert(fileRecord))\n        .catch((error) => {\n          Logger.error(error);\n        });\n    }\n  }\n}\n\nTemplate.import.events({\n  \"submit form#form-import-images\"(event) {\n    event.preventDefault();\n    uploadHandler(event);\n  }\n});\n","import _ from \"lodash\";\nimport { Template } from \"meteor/templating\";\nimport { Reaction } from \"/client/api\";\nimport { Packages } from \"/lib/collections\";\n\n/**\n * Helpers for Settings Header (actionView)\n */\nTemplate.settingsHeader.helpers({\n\n  /**\n   * Data pased to action view\n   * @return {Object} Registry entry for item\n   */\n  registry() {\n    return Reaction.getActionView() || {};\n  },\n\n  isActionViewAtRootView() {\n    return Reaction.isActionViewAtRootView();\n  },\n\n  /**\n   * thisApp\n   * @return {Object} Registry entry for item\n   */\n  thisApp() {\n    const reactionApp = Packages.findOne({\n      \"registry.provides\": \"settings\",\n      \"registry.route\": Reaction.Router.getRouteName()\n    }, {\n      enabled: 1,\n      registry: 1,\n      name: 1,\n      route: 1\n    });\n\n    if (reactionApp) {\n      const settingsData = _.find(reactionApp.registry, (item) => item.route === Reaction.Router.getRouteName() && item.provides && item.provides.includes(\"settings\")); // eslint-disable-line max-len\n\n      return settingsData;\n    }\n    return reactionApp;\n  }\n\n});\n\n/**\n * Events for Setting Header (actionView)\n */\nTemplate.settingsHeader.events({\n  \"click [data-event-action=closeSettings]\": () => {\n    Reaction.hideActionView();\n  },\n\n  \"click .js-back-button\"() {\n    Reaction.popActionView();\n  }\n});\n\n/**\n * Helpers for Settings Sidebar (actionView)\n */\nTemplate.settingsSidebar.helpers({\n\n  /**\n   * pkgPermissions Check package permissions\n   * @return {Boolean} user has permission to see settings for this package\n   */\n  pkgPermissions() {\n    if (Reaction.hasPermission(\"dashboard\")) {\n      if (this.name) {\n        return Reaction.hasPermission(this.name);\n      }\n\n      return Reaction.hasPermission(this.name);\n    }\n\n    return false;\n  }\n});\n\nTemplate.settingsSidebarItem.helpers({\n\n  /**\n   * label\n   * @return {String} Label for item\n   */\n  label() {\n    return Template.parentData(1).label || this.label;\n  }\n});\n","import { Template } from \"meteor/templating\";\nimport { Reaction } from \"/client/api\";\nimport { translateRegistry } from \"/lib/api\";\n\n//\n// registry helper for the dashboard, assembles i18n labels\n//\nTemplate.dashboardHeader.helpers({\n  registry() {\n    // just some handle little helpers for default package i18nKey/i18nLabel\n    const route = Reaction.Router.getRouteName();\n    const registry = Reaction.getRegistryForCurrentRoute() || {};\n    if (registry && route) {\n      return translateRegistry(registry);\n    }\n  }\n});\n\n//\n// dashboard events\n//\nTemplate.dashboardHeader.events({\n  \"click [data-event-action=showPackageSettings]\"() {\n    Reaction.showActionView();\n  }\n});\n","import React, { Component } from \"react\";\nimport PropTypes from \"prop-types\";\nimport classnames from \"classnames\";\nimport Blaze from \"meteor/gadicc:blaze-react-component\";\nimport { Admin } from \"/imports/plugins/core/ui/client/providers\";\nimport Radium from \"radium\";\nimport \"velocity-animate\";\nimport \"velocity-animate/velocity.ui\";\nimport { VelocityTransitionGroup } from \"velocity-react\";\nimport debounce from \"lodash/debounce\";\nimport {\n  IconButton,\n  Translation,\n  Overlay\n} from \"/imports/plugins/core/ui/client/components\";\nimport { getComponent } from \"@reactioncommerce/reaction-components\";\n\n\nconst getStyles = (props) => {\n  const minWidth = Math.min(props.viewportWidth, 400);\n  let viewSize = minWidth;\n  let viewMaxSize = \"400px\";\n  const actionView = props.actionView || {};\n  const provides = actionView.provides || [];\n  // legacy provides could be a string, is an array since 1.5.0, check for either.\n  // prototype.includes has the fortunate side affect of checking string equality as well as array inclusion.\n  const isBigView = provides.includes(\"dashboard\") ||\n                    (provides.includes(\"shortcut\") && actionView.container === \"dashboard\");\n  if (isBigView) {\n    viewSize = \"90vw\";\n    viewMaxSize = \"100%\";\n  }\n\n  if (actionView.meta && actionView.meta.actionView) {\n    const isSmView = actionView.meta.actionView.dashboardSize === \"sm\";\n    const isMdView = actionView.meta.actionView.dashboardSize === \"md\";\n    const isLgView = actionView.meta.actionView.dashboardSize === \"lg\";\n\n    if (isSmView) {\n      viewSize = `${minWidth}px`;\n      viewMaxSize = `${minWidth}px`;\n    }\n    if (isMdView) {\n      viewSize = \"50vw\";\n      viewMaxSize = \"50vw\";\n    }\n    if (isLgView) {\n      viewSize = \"90vw\";\n      viewMaxSize = \"90vw\";\n    }\n  }\n\n  if (props.actionViewIsOpen === false) {\n    viewSize = 400;\n  }\n\n  return {\n    base: {\n      \"display\": \"flex\",\n      \"flexDirection\": \"row\",\n      \"height\": \"100vh\",\n      \"position\": \"relative\",\n      \"width\": viewSize,\n      \"maxWidth\": viewMaxSize,\n      \"boxShadow\": isBigView ? \"0 0 40px rgba(0,0,0,.1)\" : \"\",\n      \"flex\": \"0 0 auto\",\n      \"backgroundColor\": \"white\",\n      \"overflow\": \"hidden\",\n      \"transition\": \"width 300ms cubic-bezier(0.455, 0.03, 0.515, 0.955))\",\n      \"zIndex\": 1050,\n      \"@media only screen and (max-width: 949px)\": {\n        width: \"auto\",\n        maxWidth: \"100%\"\n      },\n      \"@media only screen and (max-width: 767px)\": {\n        maxWidth: \"100%\"\n      }\n    },\n    header: {\n      display: \"flex\",\n      alignItems: \"center\",\n      position: \"relative\",\n      minHeight: \"56px\",\n      height: \"56px\",\n      padding: \"0 20px\"\n    },\n    heading: {\n      display: \"flex\",\n      alignItems: \"center\",\n      flex: \"1 1 auto\",\n      position: \"relative\",\n      margin: \"0 0 0 1rem\",\n      height: \"100%\"\n    },\n    body: {\n      display: \"flex\",\n      flex: \"1 1 auto\",\n      overflow: \"auto\",\n      WebkitOverflowScrolling: \"touch\"\n    },\n    masterViewPanel: {\n      \"display\": \"flex\",\n      \"flexDirection\": \"column\",\n      \"flex\": \"1 1 auto\",\n      \"maxWidth\": viewMaxSize,\n      \"@media only screen and (max-width: 949px)\": {\n        width: \"100vw\",\n        maxWidth: \"100%\"\n      }\n    },\n    masterView: {\n      flex: \"1 1 auto\",\n      // height: \"100%\",\n      overflow: \"auto\"\n      // WebkitOverflowScrolling: \"touch\"\n    },\n    detailViewPanel: {\n      \"display\": \"flex\",\n      \"flexDirection\": \"column\",\n      \"flex\": \"1 1 auto\",\n      \"maxWidth\": viewMaxSize,\n      \"height\": \"100vh\",\n      \"backgroundColor\": \"white\",\n      \"borderRight\": \"1px solid #ccc\",\n      \"@media only screen and (max-width: 949px)\": {\n        position: \"absolute\",\n        top: 0,\n        right: 0,\n        width: \"96vw\",\n        zIndex: 1050\n      }\n    },\n    detailView: {\n      width: \"100%\"\n    },\n    backButton: {\n      height: \"100%\"\n    },\n    backButtonContainers: {\n      display: \"flex\",\n      alignItems: \"center\",\n      height: \"100%\"\n    }\n  };\n};\n\nclass ActionView extends Component {\n  static propTypes = {\n    actionView: PropTypes.object,\n    actionViewIsOpen: PropTypes.bool,\n    buttons: PropTypes.array,\n    detailView: PropTypes.object,\n    detailViewIsOpen: PropTypes.bool,\n    handleActionViewBack: PropTypes.func,\n    handleActionViewClose: PropTypes.func,\n    handleActionViewDetailBack: PropTypes.func,\n    handleActionViewDetailClose: PropTypes.func,\n    isActionViewAtRootView: PropTypes.bool,\n    isDetailViewAtRootView: PropTypes.bool,\n    language: PropTypes.string,\n    viewportWidth: PropTypes.number\n  }\n\n  constructor(props) {\n    super(props);\n\n    this.state = {\n      isMobile: this.isMobile,\n      enterAnimation: {\n        animation: { translateX: 0 },\n        duration: 200,\n        easing: \"easeInOutQuad\"\n      },\n      leaveAnimation: {\n        animation: { translateX: 400 },\n        duration: 200,\n        easing: \"easeInOutQuad\"\n      },\n      rtlEnterAnimation: {\n        animation: { translateX: [\"0%\", \"-100%\"] },\n        duration: 200,\n        easing: \"easeInOutQuad\"\n      },\n      rtlLeaveAnimation: {\n        animation: { translateX: \"-100%\" },\n        duration: 200,\n        easing: \"easeInOutQuad\"\n      },\n      enterAnimationForDetailView: {\n        animation: { width: 400 },\n        duration: 200,\n        easing: \"easeInOutQuad\"\n      },\n      leaveAnimationForDetailView: {\n        animation: { width: 0 },\n        duration: 200,\n        easing: \"easeInOutQuad\"\n      }\n    };\n\n    this.handleResize = debounce(() => {\n      if (window) {\n        this.setState({\n          isMobile: this.isMobile\n        });\n      }\n    }, 66);\n  }\n\n  componentDidMount() {\n    if (window) {\n      window.addEventListener(\"resize\", this.handleResize, false);\n    }\n  }\n\n  componentWillUnmount() {\n    if (window) {\n      window.removeEventListener(\"resize\", this.handleResize);\n    }\n  }\n\n  renderControlComponent() {\n    if (this.props.actionView && typeof this.props.actionView.template === \"string\") {\n      // Render a react component if one has been registered by name\n      try {\n        const component = getComponent(this.props.actionView.template);\n\n        return (\n          <div style={this.styles.masterView} className=\"master\">\n            {React.createElement(component, this.props.actionView.data)}\n          </div>\n        );\n      } catch (e) {\n        return (\n          <div style={this.styles.masterView} className=\"master\">\n            <Blaze\n              {...this.props.actionView.data}\n              template={this.props.actionView.template}\n            />\n          </div>\n        );\n      }\n    }\n\n    return null;\n  }\n\n  renderDetailComponent() {\n    if (this.props.detailView && typeof this.props.detailView.template === \"string\") {\n      return (\n        <div style={this.styles.detailView} className=\"detail\">\n          <Blaze\n            {...this.props.detailView.data}\n            template={this.props.detailView.template}\n          />\n        </div>\n      );\n    }\n\n    return null;\n  }\n\n  renderFooter() {\n    // if (this.props.footerTemplate) {\n    //   return (\n    //     <Blaze template={this.props.footerTemplate} />\n    //   );\n    // }\n  }\n\n  renderBackButton() {\n    let button;\n\n    if (this.props.isActionViewAtRootView === false) {\n      button = (\n        <IconButton\n          bezelStyle={\"flat\"}\n          icon=\"fa fa-arrow-left\"\n          onClick={this.props.handleActionViewBack}\n        />\n      );\n    } else {\n      button = (\n        <IconButton\n          bezelStyle={\"flat\"}\n          icon=\"fa fa-times\"\n          onClick={this.props.handleActionViewClose}\n        />\n      );\n    }\n\n    return (\n      <div style={this.styles.backButton}>\n        <div style={this.styles.backButtonContainers}>\n          {button}\n        </div>\n      </div>\n    );\n  }\n\n  get isMobile() {\n    return window.matchMedia(\"(max-width: 991px)\").matches;\n  }\n\n  get actionViewIsLargeSize() {\n    const { meta } = this.props.actionView;\n    const dashboardSize = (meta && meta.actionView && meta.actionView.dashboardSize) || \"sm\";\n    const includesDashboard = this.props.actionView.provides && this.props.actionView.provides.includes(\"dashboard\");\n\n    return includesDashboard || dashboardSize !== \"sm\";\n  }\n\n  get showOverlay() {\n    if (this.props.actionViewIsOpen === false) {\n      return false;\n    }\n\n    return this.actionViewIsLargeSize || this.state.isMobile;\n  }\n\n  get showDetailViewOverlay() {\n    return this.props.detailViewIsOpen && this.state.isMobile;\n  }\n\n  renderDetailViewBackButton() {\n    if (this.props.isDetailViewAtRootView === false) {\n      return (\n        <div style={this.styles.backButton}>\n          <div style={this.styles.backButtonContainers}>\n            <IconButton\n              bezelStyle={\"flat\"}\n              icon=\"fa fa-arrow-left\"\n              onClick={this.props.handleActionViewDetailBack}\n            />\n          </div>\n        </div>\n      );\n    }\n\n    return (\n      <IconButton\n        bezelStyle={\"flat\"}\n        icon=\"fa fa-times\"\n        onClick={this.props.handleActionViewDetailClose}\n      />\n    );\n  }\n\n  get styles() {\n    return getStyles(this.props);\n  }\n\n  get backButtonEnterAnimation() {\n    return {\n      animation: {\n        display: \"flex\",\n        position: \"absolute\",\n        left: 20,\n        opaticy: 1\n      },\n      duration: 200\n    };\n  }\n\n  get backButtonLeaveAnimaton() {\n    return {\n      animation: {\n        display: \"flex\",\n        position: \"absolute\",\n        left: -30,\n        opaticy: 0\n      },\n      duration: 200\n\n    };\n  }\n\n  renderMasterView() {\n    const { actionView } = this.props;\n\n    return (\n      <div style={this.styles.masterViewPanel}>\n        <div style={this.styles.header} className=\"header\">\n          {this.renderBackButton()}\n          <div style={this.styles.heading} className=\"heading\">\n            <h3 className=\"title\" style={this.styles.title}>\n              <Translation\n                defaultValue={actionView.label || \"Dashboard\"}\n                i18nKey={actionView.i18nKeyLabel || \"admin.dashboard.coreTitle\"}\n              />\n            </h3>\n          </div>\n\n          <div className=\"controlsÂ»\">\n            {/* Controls */}\n          </div>\n        </div>\n        <div style={this.styles.body} className=\"admin-controls-content action-view-body\">\n\n          {this.renderControlComponent()}\n\n        </div>\n      </div>\n\n    );\n  }\n\n  renderDetailView() {\n    const { actionView } = this.props;\n\n    const baseClassName = classnames({\n      \"rui\": true,\n      \"admin\": true,\n      \"action-view-pane\": true,\n      \"action-view-detail\": true\n    });\n\n    if (this.props.detailViewIsOpen) {\n      return (\n        <div className={baseClassName} style={this.styles.detailViewPanel}>\n          <div style={this.styles.header} className=\"header\">\n            <VelocityTransitionGroup\n              enter={this.backButtonEnterAnimation}\n              leave={this.backButtonLeaveAnimaton}\n            >\n              {this.renderDetailViewBackButton()}\n            </VelocityTransitionGroup>\n\n            <div style={this.styles.heading} className=\"heading\">\n              <h3 className=\"title\" style={this.styles.title}>\n                <Translation\n                  defaultValue={actionView.label}\n                  i18nKey={actionView.i18nKeyLabel}\n                />\n              </h3>\n            </div>\n\n            <div className=\"controls\">\n              {/* Controls */}\n            </div>\n          </div>\n          <div style={this.styles.body} className=\"admin-controls-content action-view-body\">\n\n            {/* this.renderControlComponent() */}\n            {this.renderDetailComponent()}\n          </div>\n        </div>\n\n      );\n    }\n  }\n\n  renderActionView() {\n    const baseClassName = classnames({\n      \"rui\": true,\n      \"admin\": true,\n      \"action-view-pane\": true,\n      \"action-view\": true,\n      \"open\": this.props.actionViewIsOpen\n    });\n\n    if (this.props.actionViewIsOpen) {\n      return (\n        <div style={this.styles.base} className={baseClassName} role=\"complementary\">\n\n          {this.renderMasterView()}\n          <Overlay\n            isVisible={this.showDetailViewOverlay}\n            onClick={this.props.handleActionViewDetailClose}\n          />\n          <VelocityTransitionGroup\n            enter={this.state.enterAnimationForDetailView}\n            leave={this.state.leaveAnimationForDetailView}\n          >\n            {this.renderDetailView()}\n          </VelocityTransitionGroup>\n\n\n          <div className=\"admin-controls-footer\">\n            <div className=\"admin-controls-container\">\n              {this.renderFooter()}\n            </div>\n          </div>\n        </div>\n      );\n    }\n\n    return null;\n  }\n\n  render() {\n    const isRtl = document.querySelector(\"html\").className === \"rtl\";\n    return (\n      <div>\n        <VelocityTransitionGroup\n          enter={isRtl ? this.state.rtlEnterAnimation : this.state.enterAnimation}\n          leave={isRtl ? this.state.rtlLeaveAnimation : this.state.leaveAnimation}\n        >\n          {this.renderActionView()}\n        </VelocityTransitionGroup>\n\n        <Overlay\n          isVisible={this.showOverlay}\n          onClick={this.props.handleActionViewClose}\n        />\n      </div>\n    );\n  }\n}\n\nexport default Admin()(Radium(ActionView));\n","export { default as ActionView } from \"./actionView\";\nexport { default as PackageList } from \"./packageList\";\nexport { default as Toolbar } from \"./toolbar\";\nexport { default as ShortcutBar } from \"./shortcutBar\";\n","import React, { Component } from \"react\";\nimport PropTypes from \"prop-types\";\nimport { map } from \"lodash\";\nimport { Card, CardHeader, CardBody, CardGroup, ListItem } from \"/imports/plugins/core/ui/client/components\";\nimport { getComponent } from \"@reactioncommerce/reaction-components\";\n\nclass PackageList extends Component {\n  static propTypes = {\n    groupedPackages: PropTypes.object,\n    handleShowPackage: PropTypes.func,\n    onCardExpand: PropTypes.func\n  }\n\n  state = {}\n\n  isExpanded(cardName) {\n    if (this.state[`card_${cardName}`] && typeof this.state[`card_${cardName}`].isExpanded === \"boolean\") {\n      return this.state[`card_${cardName}`].isExpanded;\n    }\n\n    return true;\n  }\n\n  handleCardExpand(cardName) {\n    let isExpanded;\n\n    if (typeof this.state[`card_${cardName}`] === \"undefined\") {\n      isExpanded = false;\n    } else {\n      isExpanded = !this.state[`card_${cardName}`].isExpanded;\n    }\n\n    this.setState({\n      [`card_${cardName}`]: {\n        isExpanded\n      }\n    });\n\n    if (this.props.onCardExpand) {\n      this.props.onCardExpand(cardName);\n    }\n  }\n\n  renderSections() {\n    if (this.props.groupedPackages) {\n      // Loop through the groups of packages\n      return map(this.props.groupedPackages, (group, groupName) => {\n        // Loop through the individual cards of packages\n        if (Array.isArray(group.packages)) {\n          const items = group.packages.map((packageData, index) => {\n            const elements = [];\n\n            // Standard list element\n            elements.push((\n              <ListItem\n                key={index}\n                i18nKeyLabel={packageData.i18nKeyLabel}\n                icon={packageData.icon}\n                label={packageData.label}\n                onClick={this.props.handleShowPackage}\n                actionType=\"arrow\"\n                value={packageData}\n              />\n            ));\n\n            // Look for a registered component_ActionDashboard component\n\n            let actionComponent;\n\n            try {\n              actionComponent = getComponent(`${packageData.template}_ActionDashboard`);\n            } catch (e) {\n              actionComponent = null;\n            } finally {\n              // If one exists, add it to the list of elements\n              if (actionComponent) {\n                elements.push(<Card expandable={true} key={`action-${index}`}>\n                  <CardBody>\n                    {React.createElement(actionComponent)}\n                  </CardBody>\n                </Card>);\n              }\n            }\n\n            return elements;\n          });\n\n          return (\n            <Card\n              key={groupName}\n              expanded={this.isExpanded(groupName)}\n              onExpand={this.handleCardExpand.bind(this, groupName)}\n            >\n              <CardHeader\n                actAsExpander={true}\n                title={group.title}\n                i18nKeyTitle={group.i18nKeyTitle}\n              />\n              <CardBody expandable={true} padded={false}>\n                {items}\n              </CardBody>\n            </Card>\n          );\n        }\n\n        return null;\n      });\n    }\n\n    return null;\n  }\n\n  render() {\n    return (\n      <CardGroup>\n        {this.renderSections()}\n      </CardGroup>\n    );\n  }\n}\n\nexport default PackageList;\n","import React, { Component } from \"react\";\nimport PropTypes from \"prop-types\";\nimport { Components, registerComponent } from \"@reactioncommerce/reaction-components\";\n\n/**\n * @file ShopSelect - React component wrapper for shop select dropdown menu displayed on toolbar and tagnav\n * @module ShopSelect\n * @extends Component\n */\nclass ShopSelect extends Component {\n  /**\n   * renderDropDownMenu\n   * @summary Handles dropdown menu display\n   * @param {object} menuItems\n   * @return {JSX} React node containing dropdown menu\n   */\n  renderDropDownMenu(menuItems) {\n    if (this.props.isTagNav) {\n      return (\n        <Components.DropDownMenu\n          onChange={this.props.onShopSelectChange}\n          value={this.props.shopId}\n          closeOnClick={true}\n          buttonElement={\n            <Components.Button\n              icon=\"fa fa-caret-down\"\n              iconAfter={true}\n              label={this.props.shopName}\n            />\n          }\n        >\n          {menuItems}\n        </Components.DropDownMenu>\n      );\n    }\n    return (\n      <Components.DropDownMenu\n        onChange={this.props.onShopSelectChange}\n        value={this.props.shopId}\n        closeOnClick={true}\n      >\n        {menuItems}\n      </Components.DropDownMenu>\n    );\n  }\n\n  render() {\n    let menuItems;\n    const { shops } = this.props;\n\n    if (Array.isArray(shops)) {\n      menuItems = shops.map((shop, index) => (\n        <Components.MenuItem\n          label={shop.name}\n          selectLabel={shop.name}\n          value={shop._id}\n          key={index}\n        />\n      ));\n    }\n    return (\n      <div className={this.props.className || \"hidden-xs\"}>\n        {this.renderDropDownMenu(menuItems)}\n      </div>\n    );\n  }\n}\n\nShopSelect.propTypes = {\n  className: PropTypes.string,\n  isTagNav: PropTypes.bool,\n  onShopSelectChange: PropTypes.func,\n  shopId: PropTypes.string,\n  shopName: PropTypes.string,\n  shops: PropTypes.array\n};\n\nregisterComponent(\"ShopSelect\", ShopSelect);\n\nexport default ShopSelect;\n","import React, { Component } from \"react\";\nimport PropTypes from \"prop-types\";\nimport { map, isEqual } from \"lodash\";\nimport { FlatButton, Icon } from \"/imports/plugins/core/ui/client/components\";\n\nclass ShortcutBar extends Component {\n  static propTypes = {\n    currentView: PropTypes.object,\n    groupedPackages: PropTypes.object,\n    handleOpenShortcut: PropTypes.func,\n    handleShowDashboard: PropTypes.func,\n    handleShowPackage: PropTypes.func\n  }\n\n  renderAdminButton() {\n    return (\n      <FlatButton onClick={this.props.handleShowDashboard}>\n        <Icon\n          icon=\"icon icon-reaction-logo\"\n        />\n      </FlatButton>\n    );\n  }\n\n  renderSections() {\n    if (this.props.groupedPackages) {\n      // Loop through the groups of packages\n      return map(this.props.groupedPackages, (group, groupName) => {\n        // Loop through the individual cards of packages\n        if (Array.isArray(group.packages)) {\n          const items = group.packages.map((packageData, index) => {\n            const isActive = isEqual(this.props.currentView, packageData);\n\n            // Standard list element\n            return (\n              <FlatButton\n                active={isActive}\n                key={index}\n                i18nKeyTooltip={packageData.i18nKeyLabel}\n                icon={packageData.icon}\n                onClick={this.props.handleOpenShortcut}\n                tooltip={packageData.label}\n                value={packageData}\n                tooltipAttachment=\"middle left\"\n              />\n            );\n          });\n\n          return (\n            <nav\n              key={groupName}\n              className=\"rui toolbar-group admin-controls-quicklinks\"\n              style={{\n                marginBottom: 20\n              }}\n            >\n              {items}\n            </nav>\n          );\n        }\n\n        return null;\n      });\n    }\n\n    return null;\n  }\n\n  render() {\n    return (\n      <div className=\"rui toolbar toolbar-vertical admin-shortcut-bar\">\n        <nav\n          style={{\n            height: 54,\n            alignItems: \"center\",\n            justifyContent: \"center\"\n          }}\n        >\n          {this.renderAdminButton()}\n        </nav>\n        {this.renderSections()}\n      </div>\n\n    );\n  }\n}\n\nexport default ShortcutBar;\n","import React, { Component } from \"react\";\nimport PropTypes from \"prop-types\";\nimport Blaze from \"meteor/gadicc:blaze-react-component\";\nimport { Tracker } from \"meteor/tracker\";\nimport { Components } from \"@reactioncommerce/reaction-components\";\nimport {\n  FlatButton,\n  Switch,\n  Icon,\n  VerticalDivider\n} from \"/imports/plugins/core/ui/client/components\";\nimport { Translatable } from \"/imports/plugins/core/ui/client/providers\";\nimport { Reaction } from \"/client/api\";\nimport ShopSelect from \"../components/shopSelect\";\n\nclass PublishControls extends Component {\n  static propTypes = {\n    dashboardHeaderTemplate: PropTypes.oneOfType([PropTypes.func, PropTypes.node, PropTypes.string]),\n    documentIds: PropTypes.arrayOf(PropTypes.string),\n    documents: PropTypes.arrayOf(PropTypes.object),\n    hasCreateProductAccess: PropTypes.bool,\n    isEnabled: PropTypes.bool,\n    isPreview: PropTypes.bool,\n    onAddProduct: PropTypes.func,\n    onShopSelectChange: PropTypes.func,\n    onViewContextChange: PropTypes.func,\n    onVisibilityChange: PropTypes.func,\n    packageButtons: PropTypes.arrayOf(PropTypes.object),\n    shopId: PropTypes.string,\n    shops: PropTypes.arrayOf(PropTypes.object),\n    showViewAsControls: PropTypes.bool,\n    translation: PropTypes.shape({\n      lang: PropTypes.string\n    })\n  }\n\n  static defaultProps = {\n    showViewAsControls: true\n  }\n\n  componentDidMount() {\n    // Tracker is used to determine if a user has `hasShopSwitcherAccess` permission\n    // If they do not, set the shop one time, and then not again\n    // If the user does have hasShopSwitcherAccess` permission, shop is set by this.renderShopSelect()\n    this.tracker = Tracker.autorun(() => {\n      if (!Reaction.hasShopSwitcherAccess()) {\n        this.onShopSelectChange(null, Reaction.getSellerShopId());\n      }\n    });\n  }\n\n  componentWillUnmount() {\n    // Unmount the tracker that is checking for `hasShopSwitcherAccess` permission\n    this.tracker.stop();\n  }\n\n  onViewContextChange = (event, isChecked) => {\n    if (typeof this.props.onViewContextChange === \"function\") {\n      this.props.onViewContextChange(event, isChecked ? \"administrator\" : \"customer\");\n    }\n  }\n\n  // Passthrough to shopSelectChange handler in container above\n  onShopSelectChange = (event, shopId) => {\n    if (typeof this.props.onShopSelectChange === \"function\") {\n      this.props.onShopSelectChange(event, shopId);\n    }\n  }\n\n  renderViewControls() {\n    if (this.props.showViewAsControls) {\n      return (\n        <FlatButton\n          label=\"Private\"\n          i18nKeyLabel=\"app.private\"\n          i18nKeyToggleOnLabel=\"app.public\"\n          toggleOnLabel=\"Public\"\n          icon=\"fa fa-eye-slash\"\n          onIcon=\"fa fa-eye\"\n          toggle={true}\n          value=\"public\"\n          onValue=\"private\"\n          toggleOn={this.isVisible === \"public\"}\n          onToggle={this.handleVisibilityChange}\n        />\n      );\n    }\n\n    return null;\n  }\n\n  renderShopSelect() {\n    // If a user has owner, admin, or marketplace permissions for more than one (1) shops\n    // show the shop switcher to allow for easy switching between the shops\n    if (Reaction.hasShopSwitcherAccess()) {\n      return (\n        <ShopSelect\n          onShopSelectChange={this.onShopSelectChange}\n          shopId={this.props.shopId}\n          shops={this.props.shops}\n        />\n      );\n    }\n\n    return null;\n  }\n\n  renderVisibilitySwitch() {\n    if (this.props.hasCreateProductAccess) {\n      return (\n        <Switch\n          i18nKeyLabel=\"app.editMode\"\n          i18nKeyOnLabel=\"app.editMode\"\n          label={\"Edit Mode\"}\n          onLabel={\"Edit Mode\"}\n          checked={!this.props.isPreview}\n          onChange={this.onViewContextChange}\n        />\n      );\n    }\n\n    return null;\n  }\n\n  renderAdminButton() {\n    return (\n      <div className=\"hidden-xs\">\n        <Components.ToolbarGroup visibleOnMobile={true}>\n          <VerticalDivider key={\"divder-2\"} />\n          <FlatButton\n            key=\"dashboard-button\"\n            onClick={() => {\n              Reaction.showActionView({\n                i18nKeyTitle: \"dashboard.coreTitle\",\n                title: \"Dashboard\",\n                template: \"dashboardPackages\"\n              });\n            }}\n          >\n            <Icon icon=\"icon icon-reaction-logo\" />\n          </FlatButton>\n        </Components.ToolbarGroup>\n      </div>\n    );\n  }\n\n  renderAddButton() {\n    if (this.props.hasCreateProductAccess) {\n      return (\n        <FlatButton\n          i18nKeyTooltip=\"app.shortcut.addProductLabel\"\n          icon={\"fa fa-plus\"}\n          tooltip={\"Add Product\"}\n          onClick={this.props.onAddProduct}\n        />\n      );\n    }\n\n    return null;\n  }\n\n  renderPackageButons() {\n    if (Array.isArray(this.props.packageButtons)) {\n      return this.props.packageButtons.map((packageButton, index) => (\n        <FlatButton {...packageButton} key={index} />\n      ));\n    }\n\n    return null;\n  }\n\n  renderCustomControls() {\n    if (this.props.dashboardHeaderTemplate && this.props.hasCreateProductAccess) {\n      if (this.props.isEnabled) {\n        return [\n          <div className=\"hidden-xs\" key=\"customControlsVerticaldivider\"><VerticalDivider/></div>,\n          <Blaze key=\"customControls\" template={this.props.dashboardHeaderTemplate} />\n        ];\n      }\n      return [\n        <Blaze key=\"customControls\" template={this.props.dashboardHeaderTemplate} />\n      ];\n    }\n\n    return null;\n  }\n\n  render() {\n    return (\n      <Components.Toolbar>\n        <Components.ToolbarGroup firstChild={true}>\n          {this.renderVisibilitySwitch()}\n          {this.renderShopSelect()}\n        </Components.ToolbarGroup>\n        <Components.ToolbarGroup lastChild={true}>\n          {this.renderAddButton()}\n          {this.renderPackageButons()}\n          {this.renderCustomControls()}\n        </Components.ToolbarGroup>\n        {this.renderAdminButton()}\n      </Components.Toolbar>\n    );\n  }\n}\n\nexport default Translatable()(PublishControls);\n","import React from \"react\";\nimport { StyleRoot } from \"radium\";\nimport _ from \"lodash\";\nimport { composeWithTracker } from \"@reactioncommerce/reaction-components\";\nimport { Reaction } from \"/client/api\";\nimport { AdminContextProvider } from \"/imports/plugins/core/ui/client/providers\";\n\n\nfunction handleActionViewBack() {\n  Reaction.popActionView();\n}\n\nfunction handleActionViewDetailBack() {\n  Reaction.popActionViewDetail();\n}\n\nfunction handleActionViewClose() {\n  Reaction.hideActionView();\n}\n\nfunction handleActionViewDetailClose() {\n  Reaction.hideActionViewDetail();\n}\n\nfunction composer(props, onData) {\n  const shortcuts = Reaction.Apps({ provides: \"shortcut\", enabled: true });\n  const items = [];\n\n  if (_.isArray(shortcuts)) {\n    for (const shortcut of shortcuts) {\n      if (!shortcut.container) {\n        items.push({\n          type: \"link\",\n          href: Reaction.Router.pathFor(shortcut.name),\n          className: Reaction.Router.isActiveClassName(shortcut.name),\n          icon: shortcut.icon,\n          tooltip: shortcut.label || \"\",\n          i18nKeyTooltip: shortcut.i18nKeyLabel,\n          tooltipPosition: \"left middle\"\n        });\n      }\n    }\n  }\n\n  items.push({ type: \"seperator\" });\n\n  items.push({\n    icon: \"plus\",\n    tooltip: \"Create Content\",\n    i18nKeyTooltip: \"app.createContent\",\n    tooltipPosition: \"left middle\"\n  });\n\n  // calculated here and not in component, as environment dependent.\n  const viewportWidth = Math.max(document.documentElement.clientWidth, window.innerWidth || 0);\n\n  onData(null, {\n    isAdminArea: true,\n    actionView: Reaction.getActionView(),\n    detailView: Reaction.getActionViewDetail(),\n    data: props.data,\n    buttons: items,\n    isActionViewAtRootView: Reaction.isActionViewAtRootView(),\n    isDetailViewAtRootView: Reaction.isActionViewDetailAtRootView(),\n    actionViewIsOpen: Reaction.isActionViewOpen(),\n    detailViewIsOpen: Reaction.isActionViewDetailOpen(),\n    viewportWidth,\n\n    // Callbacks\n    handleActionViewBack,\n    handleActionViewDetailBack,\n    handleActionViewClose,\n    handleActionViewDetailClose\n  });\n}\n\nexport default function ActionViewContainer(Comp) {\n  function CompositeComponent(props) {\n    return (\n      <AdminContextProvider>\n        <StyleRoot>\n          <Comp {...props} />\n        </StyleRoot>\n      </AdminContextProvider>\n    );\n  }\n\n  return composeWithTracker(composer)(CompositeComponent);\n}\n","export { default as PackageListContainer } from \"./packageListContainer\";\nexport { default as ActionViewContainer } from \"./actionViewContainer\";\nexport { default as ToolbarContainer } from \"./toolbarContainer\";\n","import React from \"react\";\nimport { composeWithTracker } from \"@reactioncommerce/reaction-components\";\nimport { Meteor } from \"meteor/meteor\";\nimport { Template } from \"meteor/templating\";\nimport { Roles } from \"meteor/alanning:roles\";\nimport { Reaction } from \"/client/api\";\n\n/**\n * handleShowPackage - Push package into action view navigation stack\n * @param  {SyntheticEvent} event Original event\n * @param  {Object} app Package data\n * @return {undefined} No return value\n */\nfunction handleShowPackage(event, app) {\n  Reaction.pushActionView(app);\n}\n\n/**\n * handleShowDashboard - Open full dashbaord menu\n * @return {undefined} No return value\n */\nfunction handleShowDashboard() {\n  Reaction.hideActionViewDetail();\n  Reaction.showActionView({\n    i18nKeyTitle: \"dashboard.coreTitle\",\n    title: \"Dashboard\",\n    template: \"dashboardPackages\"\n  });\n}\n\n/**\n * handleOpenShortcut - Push dashbaord & package into action view navigation stack\n * @param  {SyntheticEvent} event Original event\n * @param  {Object} app Package data\n * @return {undefined} No return value\n */\nfunction handleOpenShortcut(event, app) {\n  Reaction.hideActionViewDetail();\n  Reaction.showActionView(app);\n}\n\nfunction composer(props, onData) {\n  const audience = Roles.getRolesForUser(Meteor.userId(), Reaction.getShopId());\n  const settings = Reaction.Apps({ provides: \"settings\", enabled: true, audience }) || [];\n\n  const dashboard = Reaction.Apps({ provides: \"dashboard\", enabled: true, audience })\n    .filter((d) => typeof Template[d.template] !== \"undefined\") || [];\n\n  onData(null, {\n    currentView: Reaction.getActionView(),\n    groupedPackages: {\n      actions: {\n        title: \"Actions\",\n        i18nKeyTitle: \"admin.dashboard.packageGroupActionsLabel\",\n        packages: dashboard\n      },\n      settings: {\n        title: \"Settings\",\n        i18nKeyTitle: \"admin.dashboard.packageGroupSettingsLabel\",\n        packages: settings\n      }\n    },\n\n    // Callbacks\n    handleShowPackage,\n    handleShowDashboard,\n    handleOpenShortcut\n  });\n}\n\nexport default function PackageListContainer(Comp) {\n  function CompositeComponent(props) {\n    return (\n      <Comp {...props} />\n    );\n  }\n\n  return composeWithTracker(composer)(CompositeComponent);\n}\n","import React from \"react\";\nimport { Meteor } from \"meteor/meteor\";\nimport { Session } from \"meteor/session\";\nimport { composeWithTracker } from \"@reactioncommerce/reaction-components\";\nimport { Reaction, i18next } from \"/client/api\";\nimport { Tags, Shops } from \"/lib/collections\";\nimport { AdminContextProvider } from \"/imports/plugins/core/ui/client/providers\";\nimport { isRevisionControlEnabled } from \"/imports/plugins/core/revisions/lib/api\";\n\nconst handleAddProduct = () => {\n  Reaction.setUserPreferences(\"reaction-dashboard\", \"viewAs\", \"administrator\");\n  Meteor.call(\"products/createProduct\", (error, productId) => {\n    if (Meteor.isClient) {\n      let currentTag;\n      let currentTagId;\n\n      if (error) {\n        throw new Meteor.Error(\"create-product-error\", error);\n      } else if (productId) {\n        currentTagId = Session.get(\"currentTag\");\n        currentTag = Tags.findOne(currentTagId);\n        if (currentTag) {\n          Meteor.call(\"products/updateProductTags\", productId, currentTag.name, currentTagId);\n        }\n        // go to new product\n        Reaction.Router.go(\"product\", {\n          handle: productId\n        });\n      }\n    }\n  });\n};\n\n/**\n* Handler that fires when the shop selector is changed\n* @param {Object} event - the `event` coming from the select change event\n* @param {String} shopId - The `value` coming from the select change event\n* @returns {undefined}\n*/\nconst handleShopSelectChange = (event, shopId) => {\n  if (/^[A-Za-z0-9]{17}$/.test(shopId)) { // Make sure shopId is a valid ID\n    Reaction.setShopId(shopId);\n  }\n};\n\nfunction composer(props, onData) {\n  // Reactive data sources\n  const routeName = Reaction.Router.getRouteName();\n  const shopIds = Reaction.getShopsForUser([\"owner\", \"admin\", \"dashboard\"]);\n  const shops = Shops.find({\n    _id: { $in: shopIds }\n  }).fetch();\n  // Standard variables\n  const packageButtons = [];\n\n  if (routeName !== \"dashboard\" && props.showPackageShortcuts) {\n    const registryItems = Reaction.Apps({ provides: \"settings\", container: \"dashboard\" });\n\n    for (const item of registryItems) {\n      if (Reaction.hasPermission(item.route, Meteor.userId())) {\n        let { icon } = item;\n        if (!item.icon && item.provides && item.provides.includes(\"settings\")) {\n          icon = \"gear\";\n        }\n\n        packageButtons.push({\n          href: item.route,\n          icon,\n          tooltip: i18next.t(item.i18nKeyLabel, item.i18n),\n          tooltipPosition: \"left middle\",\n          onClick() {\n            Reaction.showActionView(item);\n          }\n        });\n      }\n    }\n  }\n\n  onData(null, {\n    packageButtons,\n    dashboardHeaderTemplate: props.data.dashboardHeader,\n    isPreview: Reaction.isPreview(),\n    isEnabled: isRevisionControlEnabled(),\n    isActionViewAtRootView: Reaction.isActionViewAtRootView(),\n    actionViewIsOpen: Reaction.isActionViewOpen(),\n    hasCreateProductAccess: Reaction.hasPermission(\"createProduct\", Meteor.userId(), Reaction.getShopId()),\n    shopId: Reaction.getShopId(),\n    shops,\n\n    // Callbacks\n    onAddProduct: handleAddProduct,\n    onShopSelectChange: handleShopSelectChange,\n    onViewContextChange: props.handleViewContextChange\n  });\n}\n\nexport default function ToolbarContainer(Comp) {\n  function CompositeComponent(props) {\n    return (\n      <AdminContextProvider>\n        <Comp {...props} />\n      </AdminContextProvider>\n    );\n  }\n\n  return composeWithTracker(composer)(CompositeComponent);\n}\n","import \"./templates/import/import.html\";\nimport \"./templates/import/import.js\";\n\nimport \"./templates/packages/grid/grid.html\";\nimport \"./templates/packages/grid/grid.js\";\nimport \"./templates/packages/grid/package.html\";\nimport \"./templates/packages/grid/package.js\";\nimport \"./templates/packages/packages.html\";\nimport \"./templates/packages/packages.js\";\n\nimport \"./templates/settings/settings.html\";\nimport \"./templates/settings/settings.js\";\n\nimport \"./templates/shop/settings/settings.html\";\nimport \"./templates/shop/settings/settings.less\";\nimport \"./templates/shop/settings/settings.js\";\n\nimport \"./templates/dashboard.html\";\nimport \"./templates/dashboard.js\";\n","import { Meteor } from \"meteor/meteor\";\nimport { Template } from \"meteor/templating\";\nimport { $ } from \"meteor/jquery\";\nimport Alerts from \"./inlineAlerts\";\n\n/**\n * inlineAlert helpers\n */\n\nTemplate.inlineAlert.onCreated(function () {\n  this.isFirstRender = true;\n  return this.isFirstRender;\n});\n\nTemplate.inlineAlert.onRendered(function () {\n  const alert = this.data;\n  const $node = $(this.firstNode);\n\n  Meteor.defer(() => {\n    Alerts.collection_.update(alert._id, {\n      $set: {\n        seen: true\n      }\n    });\n  });\n\n  $node.removeClass(\"hide\").hide().fadeIn(alert.options.fadeIn, () => {\n    if (alert.options.autoHide) {\n      Meteor.setTimeout(() => {\n        $node.fadeOut(alert.options.fadeOut, () => Alerts.collection_.remove(alert._id));\n      }, alert.options.autoHide);\n    }\n  });\n});\n\nTemplate.inlineAlerts.helpers({\n  alerts(alertPlacement, alertId) {\n    let id = alertId;\n    let placement = alertPlacement;\n    if (!placement) {\n      placement = \"\";\n    }\n    if (!id) {\n      id = \"\";\n    }\n    return Alerts.collection_.find({\n      \"options.placement\": placement,\n      \"options.id\": id\n    });\n  }\n});\n\nTemplate.inlineAlert.events({\n  \"click button.close\"() {\n    return Alerts.collection_.remove(this._id);\n  }\n});\n","import _ from \"lodash\";\nimport { i18next } from \"/client/api\";\nimport { Mongo } from \"meteor/mongo\";\n\n/*\n * Forked and modifed from https://github.com/asktomsk/bootstrap-alerts/\n */\nconst Alerts = {\n\n  /*\n  Default options. Can be overridden for application\n   */\n  defaultOptions: {\n\n    /*\n    Button with cross icon to hide (close) alert\n     */\n    dismissable: true,\n\n    /*\n    CSS classes to be appended on each alert DIV (use space for separator)\n     */\n    classes: \"\",\n\n    /*\n    Hide alert after delay in ms or false to infinity\n     */\n    autoHide: false,\n\n    /*\n    Time in ms before alert fully appears\n     */\n    fadeIn: 200,\n\n    /*\n    If autoHide enabled then fadeOut is time in ms before alert disappears\n     */\n    fadeOut: 3000,\n\n    /*\n    Amount of alerts to be displayed\n     */\n    alertsLimit: 3,\n\n    /*\n    Allows use HTML in messages\n     */\n    html: false,\n\n    /*\n     * define placement to only show where matches\n     * use: {{inlineAlerts placement=\"cart\"}}\n     * Alerts.add \"message\",\"danger\", placement:\"cart\"\n     */\n    placement: \"\",\n\n    /*\n    Translation key for i18n (translations collection)\n     */\n    i18nKey: \"\",\n\n    /*\n    unique id (for multiple message placements)\n     */\n    id: \"\"\n  },\n\n  /*\n  Add an alert\n\n  @param message (String) Text to display.\n  @param mode (String) One of bootstrap alerts types: success, info, warning, danger\n  @param options (Object) Options if required to override some of default ones.\n  See Alerts.defaultOptions for all values.\n   */\n  add(alertMessage, mode, alertOptions) {\n    let a;\n    let message = alertMessage;\n    let options = alertOptions;\n    // check options to see if we have translation\n    if (options && options.i18nKey && options.i18nKey !== i18next.t(options.i18nKey)) {\n      message = i18next.t(options.i18nKey);\n    }\n    // get default options\n    options = _.defaults(alertOptions || {}, Alerts.defaultOptions);\n\n    if (options.type) {\n      a = Alerts.collection_.findOne({\n        \"options.type\": options.type\n      });\n      if (a) {\n        Alerts.collection_.update(a._id, {\n          $set: {\n            message,\n            mode,\n            options\n          }\n        });\n        return;\n      }\n    }\n\n    const count = Alerts.collection_.find({}).count();\n    if (count >= options.alertsLimit) {\n      Alerts.collection_.find({}, {\n        sort: {\n          created: -1\n        },\n        skip: options.alertsLimit - 1\n      }).forEach((row) => {\n        Alerts.collection_.remove(row._id);\n      });\n    }\n    Alerts.collection_.insert({\n      message,\n      mode,\n      options,\n      seen: false,\n      created: +new Date()\n    });\n  },\n\n  /*\n  Call this function before loading a new page to clear errors from previous page\n  Best way is using Router filtering feature to call this function\n   */\n  removeSeen() {\n    Alerts.collection_.remove({\n      \"seen\": true,\n      \"options.sticky\": {\n        $ne: true\n      }\n    });\n  },\n\n  /*\n  If you provide a `type` option when adding an alert, you can call this function\n  to later remove that alert.\n   */\n  removeType(type) {\n    Alerts.collection_.remove({\n      \"options.type\": type\n    });\n  },\n  collection_: new Mongo.Collection(null)\n};\n\nwindow.Alerts = Alerts;\nexport default Alerts;\n","import React from \"react\";\nimport ReactDOM from \"react-dom\";\nimport _ from \"lodash\";\nimport swal from \"sweetalert2\";\nimport { Meteor } from \"meteor/meteor\";\nimport \"sweetalert2/dist/sweetalert2.css\";\nimport Alerts from \"./inlineAlerts\";\nimport Alert from \"react-s-alert\";\nimport { getRootNode } from \"/imports/plugins/core/router/client/browserRouter.js\";\n\n/**\n * @file ReactionAlerts - Shows a popup alert, extends Bootstrap Alerts and adds more alert types. See Bootstrap Alert documentation: https://getbootstrap.com/docs/3.3/components/#alerts\n *\n *\n * @module ReactionAlerts\n */\n\nconst getAlertWrapper = () => {\n  getRootNode();\n  const rootNode = document.getElementById(\"react-root\");\n\n  rootNode.insertAdjacentHTML(\"beforebegin\", \"<div id='s-alert-wrapper'></div>\");\n  return document.getElementById(\"s-alert-wrapper\");\n};\n\nconst initAlertWrapper = () => {\n  ReactDOM.render(\n    (\n      <Alert\n        effect=\"stackslide\"\n        position=\"bottom-left\"\n        timeout={5000}\n        html={false}\n        onRouteClose={true}\n        stack={true}\n        offset={0} // in px - will be added to first alert (bottom or top - depends of the position in config)\n        beep={false}\n      />\n    ), getAlertWrapper()\n  );\n};\n\nMeteor.startup(() => {\n  initAlertWrapper();\n});\n\nObject.assign(Alerts, {\n\n  inline(alertMessage, type, alertOptions) {\n    // Convert error to danger, for inlineAlerts\n    const mode = type === \"error\" ? \"danger\" : type;\n    return this.add(alertMessage, mode, alertOptions);\n  },\n\n  /**\n   * Show a popup alert\n   * @example\n   * // Simple\n   * Alerts.alert(\"title\", \"message\", {}, callbackFunction);\n   * // - OR, for more control -\n   * Alerts.alert({\n   *   title: \"Title\",\n   *   text: \"Message Text\",\n   *   type: \"success|info|warning|error|\"\n   * }, callbackFunction);\n   *\n   * @param  {string|object} titleOrOptions Pass a string or an object containing options\n   * @param  {string}   messageOrCallback [description]\n   * @param  {string}   options           [description]\n   * @param  {function} callback          [description]\n   * @return {string}                     [description]\n   */\n  alert(titleOrOptions, messageOrCallback, options, callback) {\n    if (_.isObject(titleOrOptions)) {\n      return swal({\n        useRejections: true,\n        type: \"info\",\n        ...titleOrOptions\n      }).then((isConfirm) => {\n        if (isConfirm === true && typeof messageOrCallback === \"function\") {\n          messageOrCallback(isConfirm, false);\n        }\n      }, (dismiss) => {\n        if (dismiss === \"cancel\" || dismiss === \"esc\" || dismiss === \"overlay\") {\n          messageOrCallback(false, dismiss);\n        }\n      }).catch((err) => {\n        if (err === \"cancel\" || err === \"overlay\" || err === \"timer\") {\n          return undefined; // Silence error\n        }\n        throw err;\n      });\n    }\n\n    const title = titleOrOptions;\n    const message = messageOrCallback;\n\n    return swal({\n      useRejections: true,\n      title,\n      text: message,\n      type: \"info\",\n      ...options\n    }).then((isConfirm) => {\n      if (isConfirm === true && typeof callback === \"function\") {\n        callback(isConfirm);\n      }\n    }).catch((err) => {\n      if (err === \"cancel\" || err === \"overlay\" || err === \"timer\") {\n        return undefined; // Silence error\n      }\n      throw err;\n    });\n  },\n\n  toast(message, type, options) {\n    switch (type) {\n      case \"error\":\n      case \"warning\":\n      case \"success\":\n      case \"info\":\n        return Alert[type](message, options);\n      default:\n        return Alert.success(message, options);\n    }\n  }\n});\n","import { Reaction } from \"/client/api\";\nimport { Tags } from \"/lib/collections\";\nimport { Meteor } from \"meteor/meteor\";\nimport { Session } from \"meteor/session\";\nimport { Template } from \"meteor/templating\";\n\nTemplate.createContentMenu.helpers({\n  buttonProps(item) {\n    return {\n      label: item.label,\n      i18nKeyLabel: item.i18nKeyLabel,\n      status: \"default\",\n      onClick() {\n        // TODO: Move this to somewhere better, like, core or product package\n        if (item.route === \"/products/createProduct\") {\n          Meteor.call(\"products/createProduct\", (error, productId) => {\n            if (Meteor.isClient) {\n              let currentTag;\n              let currentTagId;\n\n              if (error) {\n                throw new Meteor.Error(\"create-product-error\", error);\n              } else if (productId) {\n                currentTagId = Session.get(\"currentTag\");\n                currentTag = Tags.findOne(currentTagId);\n                if (currentTag) {\n                  Meteor.call(\"products/updateProductTags\", productId, currentTag.name, currentTagId);\n                }\n                // go to new product\n                Reaction.Router.go(\"product\", {\n                  handle: productId\n                });\n              }\n            }\n          });\n        }\n      }\n    };\n  },\n\n  items() {\n    const apps = Reaction.Apps({ provides: \"shortcut\", container: \"addItem\" }) || [];\n    return apps;\n  }\n});\n","import { Template } from \"meteor/templating\";\n\nTemplate.notFound.onCreated(() => {\n  document.getElementsByTagName(\"head\")[0].insertAdjacentHTML(\"beforeend\", \"<meta name='prerender-status-code' content='404'>\");\n  // todo report not found source\n});\n","import { Template } from \"meteor/templating\";\n\nTemplate.unauthorized.onCreated(() => {\n  document.getElementsByTagName(\"head\")[0].insertAdjacentHTML(\"beforeend\", \"<meta name='prerender-status-code' content='403'>\");\n  // todo report not found source\n});\n","import { Meteor } from \"meteor/meteor\";\nimport { Tracker } from \"meteor/tracker\";\nimport { Session } from \"meteor/session\";\nimport { $ } from \"meteor/jquery\";\nimport { Reaction, Router } from \"/client/api\";\nimport { Shops } from \"/lib/collections\";\n\n\n/**\n * addBodyClasses\n * Adds body classes to help themes distinguish pages and components based on the current route name and layout theme\n * @param  {Object} context - route context\n * @returns {undefined}\n */\nfunction addBodyClasses(context) {\n  let classes;\n\n  if (context.route.name === undefined) {\n    classes = [\n      \"app-not-found\"\n    ];\n  } else {\n    classes = [\n      // push clean route-name\n      `app-${context.route.name.replace(/[/_]/i, \"-\")}`\n    ];\n  }\n\n\n  // add theme class for route layout\n  if (context && context.route && context.route.options && context.route.options.theme) {\n    classes.push(context.route.options.theme);\n  }\n\n  classes = classes.join(\" \");\n\n  $(\"body\").removeClass(Session.get(\"BODY_CLASS\")).addClass(classes);\n\n  // save for removal on next enter\n  Session.set(\"BODY_CLASS\", classes);\n}\n\nRouter.Hooks.onEnter(addBodyClasses);\n\nMeteor.startup(() => {\n  Tracker.autorun(() => {\n    if (Reaction.Subscriptions.PrimaryShop.ready() && Reaction.Subscriptions.MerchantShops.ready()) {\n      let shopId;\n\n      // Choose shop to get theme from\n      if (Reaction.marketplaceEnabled && Reaction.merchantTheme) {\n        shopId = Reaction.getShopId();\n      } else {\n        shopId = Reaction.getPrimaryShopId();\n      }\n\n      const shop = Shops.findOne({\n        _id: shopId\n      });\n\n      if (shop) {\n        if (shop.theme) {\n          $(\"#reactionLayoutStyles\").text(shop.theme.styles || \"\");\n        } else {\n          $(\"#reactionLayoutStyles\").text(\"\");\n        }\n      }\n    }\n  });\n});\n","import React from \"react\";\nimport PropTypes from \"prop-types\";\nimport classnames from \"classnames\";\nimport { getComponent, registerComponent } from \"@reactioncommerce/reaction-components\";\nimport Blaze from \"meteor/gadicc:blaze-react-component\";\nimport { Template } from \"meteor/templating\";\n\nclass CoreLayout extends React.Component {\n  constructor(props) {\n    super(props);\n\n    const { structure } = this.props;\n    const { layoutHeader, layoutFooter } = structure || {};\n\n    const headerComponent = layoutHeader && getComponent(layoutHeader);\n    const footerComponent = layoutFooter && getComponent(layoutFooter);\n\n    if (headerComponent) {\n      this.headerComponent = React.createElement(headerComponent, {});\n    }\n\n    if (footerComponent) {\n      this.footerComponent = React.createElement(footerComponent, {});\n    }\n  }\n\n  render() {\n    const { actionViewIsOpen, structure } = this.props;\n    const { template } = structure || {};\n\n    const pageClassName = classnames({\n      \"page\": true,\n      \"show-settings\": actionViewIsOpen\n    });\n\n    let mainNode = null;\n    try {\n      const mainComponent = getComponent(template);\n      mainNode = React.createElement(mainComponent, {});\n    } catch (error) {\n    //  Probe for Blaze template (legacy)\n      if (Template[template]) {\n        mainNode = <Blaze template={template} />;\n      }\n    }\n\n    return (\n      <div className={pageClassName} id=\"reactionAppContainer\">\n\n        {this.headerComponent}\n\n        <Blaze template=\"cartDrawer\" className=\"reaction-cart-drawer\" />\n\n        <main>\n          {mainNode}\n        </main>\n\n        {this.footerComponent}\n      </div>\n    );\n  }\n}\n\nCoreLayout.propTypes = {\n  actionViewIsOpen: PropTypes.bool,\n  data: PropTypes.object,\n  structure: PropTypes.object\n};\n\nregisterComponent(\"coreLayout\", CoreLayout);\n\nexport default CoreLayout;\n","import React from \"react\";\nimport { registerComponent } from \"/imports/plugins/core/components/lib\";\n\nconst Footer = () => (\n  <div className=\"reaction-navigation-footer footer-default\">\n    <nav className=\"navbar-bottom\">\n      <div className=\"row\">\n        {/* Footer content */}\n      </div>\n    </nav>\n  </div>\n);\n\n\nregisterComponent(\"Footer\", Footer);\n\nexport default Footer;\n","import React, { Component } from \"react\";\nimport PropTypes from \"prop-types\";\nimport Blaze from \"meteor/gadicc:blaze-react-component\";\nimport { registerComponent } from \"@reactioncommerce/reaction-components\";\n\nclass PrintLayout extends Component {\n  static propTypes = {\n    structure: PropTypes.object\n  }\n\n  render() {\n    return (\n      <Blaze template={this.props.structure.template} className=\"reaction-print-layout\" />\n    );\n  }\n}\n\n// lowercased to match the legacy blaze \"printLayout\"\nregisterComponent(\"printLayout\", PrintLayout);\n\nexport default PrintLayout;\n","import \"./templates/layout/alerts/alerts.html\";\nimport \"./templates/layout/alerts/alerts.js\";\nimport \"./templates/layout/alerts/inlineAlerts.js\";\nimport \"./templates/layout/alerts/reactionAlerts.js\";\nimport \"./templates/layout/createContentMenu/createContentMenu.html\";\nimport \"./templates/layout/createContentMenu/createContentMenu.js\";\nimport \"./templates/layout/header/brand.html\";\nimport \"./templates/layout/header/button.html\";\nimport \"./templates/layout/header/tags.html\";\nimport \"./templates/layout/notFound/notFound.html\";\nimport \"./templates/layout/notFound/notFound.js\";\nimport \"./templates/layout/notice/unauthorized.html\";\nimport \"./templates/layout/notice/unauthorized.js\";\n\nimport \"./templates/theme/theme.html\";\nimport \"./templates/theme/theme.js\";\n\nimport \"./components/footer\";\n\nexport CoreLayout from \"./components/coreLayout\";\nexport PrintLayout from \"./components/printLayout\";\n","export { default as ReactionLayout } from \"./reactionLayout\";\n","import React, { Component } from \"react\";\nimport PropTypes from \"prop-types\";\nimport Radium from \"radium\";\nimport { compose } from \"recompose\";\nimport { getComponent, registerComponent, composeWithTracker } from \"@reactioncommerce/reaction-components\";\nimport { Meteor } from \"meteor/meteor\";\nimport { Reaction } from \"/client/api\";\nimport classnames from \"classnames\";\nimport { Templates } from \"/lib/collections\";\n\nclass ReactionLayout extends Component {\n  get layout() {\n    return this.props.layout;\n  }\n\n  checkElementPermissions(block) {\n    let permissions;\n    const hasAdminAccess = Reaction.hasAdminAccess();\n\n    if (hasAdminAccess === false) {\n      permissions = block.audience || this.props.defaultAudience;\n    } else {\n      permissions = block.permissions || this.props.defaultPermissions;\n    }\n\n    return Reaction.hasPermission(permissions || []);\n  }\n\n  renderLayout(children) {\n    if (!Array.isArray(children)) {\n      return null;\n    }\n\n    const elements = children.map((block, index) => {\n      let childElements;\n\n      if (Array.isArray(block.children)) {\n        childElements = block.children.map((child, childIndex) => {\n          if (child.type === \"block\") {\n            return this.renderLayout([child]);\n          }\n\n          if (this.checkElementPermissions(child)) {\n            let { component } = child;\n\n            try {\n              if (typeof child.component === \"string\") {\n                component = getComponent(child.component);\n              }\n\n              return React.createElement(component, {\n                key: childIndex,\n                ...(child.props || {}),\n                ...this.props.layoutProps\n              });\n            } catch (e) {\n              return null;\n            }\n          }\n\n          return null;\n        });\n      }\n\n\n      if (this.checkElementPermissions(block)) {\n        return React.createElement(block.element || \"div\", {\n          key: index,\n          // className: classnames(`rui col-xs-${block.columns || 12}`, block.className),\n          className: classnames({\n            rui: true,\n            item: true,\n            [block.size || \"full\"]: true,\n            align: typeof block.align === \"string\",\n            [block.align || \"start\"]: true,\n            justify: typeof block.align === \"string\",\n            [block.justify || \"start\"]: true,\n            axis: true, // typeof block.axis === \"string\",\n            horizontal: block.axis === \"horizontal\",\n            vertical: block.axis !== \"horizontal\"\n          }, block.className),\n          style: block.style,\n          children: childElements\n        });\n      }\n\n      return null;\n    });\n\n    return elements;\n  }\n\n  render() {\n    return (\n      <div className=\"rui layout-base items flex\">\n        {this.renderLayout(this.layout)}\n      </div>\n    );\n  }\n}\n\nReactionLayout.propTypes = {\n  defaultAudience: PropTypes.oneOfType([\n    PropTypes.string,\n    PropTypes.arrayOf(PropTypes.string)\n  ]),\n  defaultPermissions: PropTypes.oneOfType([\n    PropTypes.string,\n    PropTypes.arrayOf(PropTypes.string)\n  ]),\n  layout: PropTypes.oneOfType([PropTypes.object, PropTypes.array]),\n  layoutProps: PropTypes.object\n};\n\nfunction composer(props, onData) {\n  const sub = Meteor.subscribe(\"Templates\");\n\n  if (sub.ready()) {\n    const templateInfo = Templates.findOne({\n      name: props.layoutName\n    });\n\n    if (templateInfo) {\n      const templateData = templateInfo.template;\n\n      onData(null, {\n        defaultPermissions: [\"admin\"],\n        defaultAudience: [\"guest\", \"anonymous\"],\n        layout: templateData\n      });\n    }\n  }\n}\n\nregisterComponent(\"ReactionLayout\", ReactionLayout, [\n  composeWithTracker(composer),\n  Radium\n]);\n\nexport default compose(\n  composeWithTracker(composer),\n  Radium\n)(ReactionLayout);\n","import _ from \"lodash\";\nimport { Components } from \"@reactioncommerce/reaction-components\";\nimport { Meteor } from \"meteor/meteor\";\nimport { Template } from \"meteor/templating\";\nimport { Roles } from \"meteor/alanning:roles\";\nimport { ServiceConfiguration } from \"meteor/service-configuration\";\nimport { Reaction, i18next } from \"/client/api\";\nimport * as Collections from \"/lib/collections\";\nimport { ServiceConfigHelper } from \"../../helpers/util\";\n\n/**\n * Accounts helpers\n */\nTemplate.accountsDashboard.onCreated(function () {\n  this.autorun(() => {\n    this.subscribe(\"ShopMembers\");\n  });\n});\n\nTemplate.accountsDashboard.helpers({\n  /**\n   * isShopMember\n   * @return {Boolean} True if the memnber is an administrator\n   */\n  isShopMember() {\n    return _.includes([\"dashboard\", \"admin\", \"owner\"], this.role);\n  },\n\n  /**\n   * isShopGuest\n   * @return {Boolean} True if the member is a guest\n   */\n  isShopGuest() {\n    return !_.includes([\"dashboard\", \"admin\", \"owner\"], this.role);\n  },\n  /**\n   * members\n   * @return {Boolean} True array of adminsitrative members\n   */\n  members() {\n    if (Reaction.hasPermission(\"reaction-accounts\")) {\n      const shopId = Reaction.getShopId();\n      const instance = Template.instance();\n      if (instance.subscriptionsReady()) {\n        const shopUsers = Meteor.users.find();\n\n        return shopUsers.map((user) => {\n          const member = {};\n\n          // Querying the Accounts collection to retrieve user's name because\n          // Meteor filters out sensitive info from the Meteor.users schema\n          const userSub = Meteor.subscribe(\"UserAccount\", user._id);\n          if (userSub.ready()) {\n            member.name = Collections.Accounts.findOne(user._id).name;\n          }\n          member.userId = user._id;\n\n          if (user.emails && user.emails.length) {\n            // this is some kind of denormalization. It is helpful to have both\n            // of this string and array. Array goes to avatar, string goes to\n            // template\n            member.emails = user.emails;\n            member.email = user.emails[0].address;\n          }\n          // member.user = user;\n          member.username = user.username;\n          member.isAdmin = Roles.userIsInRole(user._id, \"admin\", shopId);\n          member.roles = user.roles;\n          member.services = user.services;\n\n          if (Roles.userIsInRole(member.userId, \"owner\", shopId)) {\n            member.role = \"owner\";\n          } else if (Roles.userIsInRole(member.userId, \"admin\", shopId)) {\n            member.role = \"admin\";\n          } else if (Roles.userIsInRole(member.userId, \"dashboard\", shopId)) {\n            member.role = \"dashboard\";\n          } else if (Roles.userIsInRole(member.userId, \"guest\", shopId)) {\n            member.role = \"guest\";\n          }\n\n          return member;\n        });\n      }\n    }\n  },\n\n  accountsDashboard() {\n    return Components.AccountsDashboard;\n  }\n});\n\n/**\n * Account Settings Helpers\n */\nTemplate.accountsSettings.onCreated(function () {\n  this.subscribe(\"ServiceConfiguration\", Meteor.userId());\n});\n\n/**\n * Account Settings Helpers\n */\nTemplate.accountsSettings.helpers({\n\n  /**\n   * services\n   * @return {Array} available services\n   */\n  services() {\n    const serviceHelper = new ServiceConfigHelper();\n    const configurations = ServiceConfiguration.configurations.find().fetch();\n\n    const services = serviceHelper.services((item) => {\n      const matchingConfigurations = _.filter(configurations, {\n        service: item.name\n      });\n      if (matchingConfigurations.length) {\n        return matchingConfigurations[0];\n      }\n    });\n\n    return services;\n  },\n\n  /**\n   * Template helper to add a hidden class if the condition is false\n   * @param  {Boolean} enabled Service enabled\n   * @return {String}          \"hidden\" or \"\"\n   */\n  shown(enabled) {\n    return enabled !== true ? \"hidden\" : \"\";\n  },\n\n  /**\n   * Return checked classname if true\n   * @param  {Boolean} enabled Boolean value true/false\n   * @return {String}          \"checked\" or \"\"\n   */\n  checked(enabled) {\n    return enabled === true ? \"checked\" : \"\";\n  },\n\n  /**\n   * Returns a value from the supplied service object with a field name\n   * @param  {String} fieldName name of field to retrive the value for.\n   * @param  {Object} service   Service object to find the value in.\n   * @return {String}           A value or blank string if nothing is found.\n   */\n  valueForField(fieldName, service) {\n    return service[fieldName] || \"\";\n  }\n});\n\nTemplate.accountsSettings.events({\n\n  /**\n   * Account settings form submit\n   * @param  {event} event    jQuery event\n   * @return {void}\n   */\n  \"submit form\": (event) => {\n    event.preventDefault();\n\n    const service = event.target.service.value;\n    const serviceHelper = new ServiceConfigHelper();\n    const fields = serviceHelper.configFieldsForService(service);\n    // todo remove this after i18next 2 will be installed\n    // let niceName = serviceHelper.capitalizedServiceName(service);\n\n    for (const field of fields) {\n      field.value = event.target[field.property].value;\n    }\n\n    Meteor.call(\"accounts/updateServiceConfiguration\", service, fields, (error) => {\n      if (!error) {\n        Alerts.toast(i18next.t(\n          \"accountsUI.updatedServiceConfiguration\",\n          { service: i18next.t(`social.${service}`) }\n        ));\n      }\n    });\n  },\n\n  /**\n   * Account settings update enabled status for login service on change\n   * @param  {event} event    jQuery Event\n   * @return {void}\n   */\n  \"change input[name=enabled]\": (event) => {\n    const service = event.target.value;\n    const fields = [{\n      property: \"enabled\",\n      value: event.target.checked\n    }];\n\n    Meteor.call(\"accounts/updateServiceConfiguration\", service, fields);\n  },\n\n  /**\n   * Account settings show/hide secret key for a service\n   * @param  {event} event    jQuery Event\n   * @return {void}\n   */\n  \"click [data-event-action=showSecret]\": (event) => {\n    const button = Template.instance().$(event.currentTarget);\n    const input = button.closest(\".form-group\").find(\"input[name=secret]\");\n\n    if (input.attr(\"type\") === \"password\") {\n      input.attr(\"type\", \"text\");\n      button.html(\"Hide\");\n    } else {\n      input.attr(\"type\", \"password\");\n      button.html(\"Show\");\n    }\n  }\n});\n","import { Template } from \"meteor/templating\";\nimport { Components } from \"@reactioncommerce/reaction-components\";\n\n/**\n * Inline login form for instance where guest login is needed.\n */\n\nTemplate.loginInline.helpers({\n  loginInlineComponent() {\n    return {\n      component: Components.LoginInline\n    };\n  }\n});\n","import { Components } from \"@reactioncommerce/reaction-components\";\nimport { Template } from \"meteor/templating\";\n\nTemplate.loginForm.helpers({\n  component() {\n    const currentData = Template.currentData() || {};\n\n    return {\n      ...currentData,\n      component: Components.Login\n    };\n  }\n});\n\nTemplate.loginFormMessages.helpers({\n  component() {\n    const currentData = Template.currentData() || {};\n    return {\n      ...currentData,\n      component: Components.LoginFormMessages\n    };\n  }\n});\n","import _ from \"lodash\";\nimport { Reaction } from \"/client/api\";\nimport { Packages, Shops } from \"/lib/collections\";\nimport { Meteor } from \"meteor/meteor\";\nimport { Template } from \"meteor/templating\";\nimport { $ } from \"meteor/jquery\";\nimport { Roles } from \"meteor/alanning:roles\";\nimport AccountsDashboard from \"/imports/plugins/core/accounts/client/containers/accountsDashboardContainer\";\nimport { Components } from \"@reactioncommerce/reaction-components\";\n\nconst getPermissionMap = (permissions) => {\n  const permissionMap = {};\n  _.each(permissions, (existing) => {\n    permissionMap[existing.permission] = existing.label;\n  });\n  return permissionMap;\n};\n\n/**\n * shopMember helpers\n * permissions / roles controls\n * we use userInRole instead of Reaction intentionally\n * to check each users permissions\n */\nTemplate.member.events({\n  \"click [data-event-action=showMemberSettings]\"() {\n    $(\".customerUsageType input\").val(\"\"); // form reset\n    $(\".customerUsageType\").addClass(\"hide\"); // form reset\n    Reaction.setActionViewDetail({\n      label: \"Permissions\",\n      i18nKeyLabel: \"admin.settings.permissionsSettingsLabel\",\n      data: this,\n      template: \"memberSettings\"\n    });\n  }\n});\n\nTemplate.memberSettings.helpers({\n  isOwnerDisabled() {\n    if (Meteor.userId() === this.userId) {\n      if (Roles.userIsInRole(this.userId, \"owner\", this.shopId)) {\n        return true;\n      }\n    }\n  },\n  userId() {\n    return Meteor.userId();\n  },\n  hasPermissionChecked(permission, userId) {\n    if (userId && Roles.userIsInRole(userId, permission, this.shopId || Roles.userIsInRole(\n      userId, permission,\n      Roles.GLOBAL_GROUP\n    ))) {\n      return \"checked\";\n    }\n  },\n  groupsForUser(groupUserId) {\n    const userId = groupUserId || this.userId || Template.parentData(1).userId;\n    return Roles.getGroupsForUser(userId);\n  },\n  shopLabel(thisShopId) {\n    const shopId = thisShopId || Template.currentData();\n    const shop = Shops.findOne({\n      _id: shopId\n    });\n    if (shop && shop.name) {\n      return shop.name || \"Default Shop\";\n    }\n  },\n  permissionGroups(thisShopId) {\n    const permissionGroups = [];\n    const shopId = thisShopId || Template.currentData();\n    const packages = Packages.find({\n      shopId\n    });\n\n    packages.forEach((pkg) => {\n      const permissions = [];\n      if (pkg.registry && pkg.enabled) {\n        for (const registryItem of pkg.registry) {\n          // Skip entires with missing routes\n          if (!registryItem.route) {\n            continue;\n          }\n\n          // Get all permissions, add them to an array\n          if (registryItem.permissions) {\n            for (const permission of registryItem.permissions) {\n              // check needed because of non-object perms in the permissions array (e.g \"admin\", \"owner\")\n              if (typeof permission === \"object\") {\n                permission.shopId = shopId;\n                permissions.push(permission);\n              }\n            }\n          }\n\n          // Also create an object map of those same permissions as above\n          const permissionMap = getPermissionMap(permissions);\n          if (!permissionMap[registryItem.route]) {\n            permissions.push({\n              shopId: pkg.shopId,\n              permission: registryItem.name || `${pkg.name}/${registryItem.template}`, // launchdock-connect/connectDashboard\n              icon: registryItem.icon,\n              label: registryItem.label || registryItem.provides || registryItem.route\n            });\n          }\n        }\n        // TODO review this, hardcoded WIP\n        const label = pkg.name.replace(\"reaction\", \"\").replace(/(-.)/g, (x) => ` ${x[1].toUpperCase()}`);\n\n        return permissionGroups.push({\n          shopId: pkg.shopId,\n          icon: pkg.icon,\n          name: pkg.name,\n          label,\n          permissions: _.uniq(permissions)\n        });\n      }\n    });\n\n    return permissionGroups;\n  },\n\n  hasManyPermissions(permissions) {\n    return Boolean(permissions.length);\n  },\n  /**\n   * showAvalaraTaxSettings\n   * @return {Boolean} True if avalara is enabled. Defaults to false if not found\n   */\n  showAvalaraTaxSettings() {\n    const avalara = Packages.findOne({\n      name: \"taxes-avalara\",\n      shopId: Reaction.getShopId()\n    });\n\n    return _.get(avalara, \"settings.avalara.enabled\", false);\n  },\n\n  accountsDetail() {\n    return {\n      component: AccountsDashboard\n    };\n  },\n\n  ReactionAvatar() {\n    return {\n      component: Components.ReactionAvatar\n    };\n  }\n});\n\n/**\n * shopMember events\n *\n */\nTemplate.memberSettings.events({\n  \"change [data-event-action=toggleMemberPermission]\"(event, template) {\n    const self = this;\n    const permissions = [];\n    const member = template.data;\n    if (!this.shopId) {\n      throw new Meteor.Error(\"invalid-parameter\", \"Shop is required\");\n    }\n    if (self.name) {\n      permissions.push(self.name);\n      for (const pkgPermissions of self.permissions) {\n        permissions.push(pkgPermissions.permission);\n      }\n    } else {\n      permissions.push(self.permission);\n    }\n    if (Template.instance().$(event.currentTarget).is(\":checked\")) {\n      Meteor.call(\"accounts/addUserPermissions\", member.userId, permissions, this.shopId);\n    } else {\n      Meteor.call(\"accounts/removeUserPermissions\", member.userId, permissions, this.shopId);\n    }\n  },\n  \"click [data-event-action=resetMemberPermission]\"(event, template) {\n    const $icon = Template.instance().$(event.currentTarget);\n    if (confirm($icon.data(\"confirm\"))) { // eslint-disable-line no-alert\n      const results = [];\n      for (const role of template.data.roles) {\n        results.push(Meteor.call(\"accounts/setUserPermissions\", this.userId, [\"guest\", \"account/profile\"], role));\n      }\n      return results;\n    }\n  }\n});\n","import { Meteor } from \"meteor/meteor\";\nimport { Template } from \"meteor/templating\";\nimport { ReactiveVar } from \"meteor/reactive-var\";\nimport { i18next, Reaction } from \"/client/api\";\nimport * as Collections from \"/lib/collections\";\nimport { Components } from \"@reactioncommerce/reaction-components\";\n\n/**\n * @method isOwnerOfProfile\n * @summary checks whether or not the user viewing this profile is also\n * its owner.\n * @since 1.5.0\n * @return {Boolean} - whether or not the current user is also this\n * profile's owner.\n */\nfunction isOwnerOfProfile() {\n  const targetUserId = Reaction.Router.getQueryParam(\"userId\");\n  const loggedInUserId = Meteor.userId();\n  return targetUserId === undefined || targetUserId === loggedInUserId;\n}\n\n/**\n * @method getTargetAccount\n * @summary gets the account of the userId in the route, or the current user.\n * @since 1.5.0\n * @return {Object} - the account of the identified user.\n */\nfunction getTargetAccount() {\n  const targetUserId = Reaction.Router.getQueryParam(\"userId\") || Meteor.userId();\n  const account = Collections.Accounts.findOne(targetUserId);\n\n  return account;\n}\n\n/**\n * onCreated: Account Profile View\n */\nTemplate.accountProfile.onCreated(() => {\n  const template = Template.instance();\n\n  template.userHasPassword = ReactiveVar(false);\n\n  Meteor.call(\"accounts/currentUserHasPassword\", (error, result) => {\n    template.userHasPassword.set(result);\n  });\n  // hide actionView if open, doesn't relate to profile page\n  Reaction.hideActionView();\n});\n\n/**\n * Helpers: Account Profile View\n */\nTemplate.accountProfile.helpers({\n  /**\n   * @method doesUserExist\n   * @summary confirms that a given userId belongs to an existing user.\n   * @since 1.5.0\n   * @return {Boolean} - whether or not a user with a given ID exists.\n   */\n  doesUserExist() {\n    const targetUserId = Reaction.Router.getQueryParam(\"userId\");\n    if (!targetUserId) {\n      // If userId isn't in this route's query parameters, then a user\n      // is viewing his/her own profile.\n      return true;\n    }\n    const targetUser = Collections.Accounts.findOne(targetUserId);\n    return targetUser !== undefined;\n  },\n\n  /**\n   * @method isOwnerOfProfile\n   * @summary checks whether or not the user viewing this profile is also\n   * its owner.\n   * @since 1.5.0\n   * @return {Boolean} - whether or not the current user is also this\n   * profile's owner.\n   */\n  isOwnerOfProfile() {\n    return isOwnerOfProfile();\n  },\n\n  /**\n   * @method UpdateEmail\n   * @summary returns a component for updating a user's email.\n   * @since 1.5.0\n   * @return {Object} - contains the component for updating a user's email.\n   */\n  UpdateEmail() {\n    return {\n      component: Components.UpdateEmail\n    };\n  },\n\n  /**\n   * @method ReactionAvatar\n   * @summary returns a component that displays a user's avatar.\n   * @since 1.5.0\n   * @return {Object} - contains the component that displays a user's avatar.\n   */\n  ReactionAvatar() {\n    const account = Collections.Accounts.findOne({ _id: Meteor.userId() });\n    if (account && account.profile && account.profile.picture) {\n      const { picture } = account.profile;\n      return {\n        component: Components.ReactionAvatar,\n        currentUser: true,\n        src: picture\n      };\n    }\n    return {\n      component: Components.ReactionAvatar,\n      currentUser: true\n    };\n  },\n\n  /**\n   * @method AddressBook\n   * @summary returns a component for updating a user's address.\n   * @since 2.0.0\n   * @return {Object} - contains the component for updating a user's address.\n   */\n  AddressBook() {\n    return {\n      component: Components.AddressBook\n    };\n  },\n\n  /**\n   * @method userHasPassword\n   * @summary checks whether a user has set a password for his/her account.\n   * @since 1.5.0\n   * @return {Boolean} - returns true if the current user has a password\n   * and false if otherwise.\n   */\n  userHasPassword() {\n    return Template.instance().userHasPassword.get();\n  },\n\n  /**\n   * @method userOrders\n   * @summary returns a user's order history, up to the 25 most recent ones.\n   * @since 1.5.0\n   * @return {Array|null} - an array of a user's orders.\n   */\n  userOrders() {\n    const targetUserId = Reaction.Router.getQueryParam(\"userId\") || Meteor.userId();\n    const orderSub = Meteor.subscribe(\"AccountOrders\", targetUserId);\n    if (orderSub.ready()) {\n      return Collections.Orders.find({\n        userId: targetUserId\n      }, {\n        sort: {\n          createdAt: -1\n        },\n        limit: 25\n      });\n    }\n  },\n\n  /**\n   * @method displayName\n   * @summary returns the name of a user.\n   * @since 1.5.0\n   * @return {String} - the name of a given user.\n   */\n  displayName() {\n    if (Reaction.Subscriptions && Reaction.Subscriptions.Account && Reaction.Subscriptions.Account.ready()) {\n      const account = getTargetAccount();\n\n      if (account) {\n        if (account.name) {\n          return account.name;\n        } else if (account.username) {\n          return account.username;\n        } else if (account.profile && account.profile.name) {\n          return account.profile.name;\n        }\n      }\n    }\n\n    if (Reaction.hasPermission(\"account/profile\")) {\n      return i18next.t(\"accountsUI.guest\", { defaultValue: \"Guest\" });\n    }\n  },\n\n  /**\n   * @method displayEmail\n   * @summary returns a user's email.\n   * @since 1.5.0\n   * @return {String} - the email of a given user.\n   */\n  displayEmail() {\n    if (Reaction.Subscriptions && Reaction.Subscriptions.Account && Reaction.Subscriptions.Account.ready()) {\n      const account = getTargetAccount();\n\n      if (account && Array.isArray(account.emails)) {\n        const defaultEmail = account.emails.find((email) => email.provides === \"default\");\n        return (defaultEmail && defaultEmail.address) || account.emails[0].address;\n      }\n    }\n  },\n\n  /**\n   * @method showMerchantSignup\n   * @summary determines whether or not to show the button for signing up\n   * as a merchant/seller.\n   * @since 1.5.0\n   * @return {Boolean} - true if the merchant signup button is to be shown,\n   * and false if otherwise.\n   */\n  showMerchantSignup() {\n    if (Reaction.Subscriptions && Reaction.Subscriptions.Account && Reaction.Subscriptions.Account.ready()) {\n      const account = Collections.Accounts.findOne({ _id: Meteor.userId() });\n      const marketplaceEnabled = Reaction.marketplace && Reaction.marketplace.enabled === true;\n      const allowMerchantSignup = Reaction.marketplace && Reaction.marketplace.allowMerchantSignup === true;\n      // A user has the primaryShopId until a shop is created for them.\n      const userHasShop = account.shopId !== Reaction.getPrimaryShopId();\n      return marketplaceEnabled && allowMerchantSignup && !userHasShop;\n    }\n    return false;\n  }\n});\n","import { Template } from \"meteor/templating\";\nimport { Components } from \"@reactioncommerce/reaction-components\";\n\n/**\n * userOrdersList helpers\n *\n */\nTemplate.userOrdersList.helpers({\n  // Returns React Component\n  completedOrders() {\n    let orders;\n\n    if (Template.currentData() && Template.currentData().data) {\n      orders = Template.currentData().data.fetch();\n    } else {\n      orders = [];\n    }\n\n    return {\n      component: Components.OrdersList,\n      orders\n    };\n  }\n});\n","import { Accounts } from \"meteor/accounts-base\";\nimport { Template } from \"meteor/templating\";\nimport { $ } from \"meteor/jquery\";\nimport { Random } from \"meteor/random\";\nimport { Blaze } from \"meteor/blaze\";\nimport { ReactiveVar } from \"meteor/reactive-var\";\nimport { i18next } from \"/client/api\";\nimport { LoginFormSharedHelpers } from \"../../helpers\";\nimport { getComponent } from \"/imports/plugins/core/components/lib\";\nimport { LoginFormValidation } from \"/lib/api\";\n\n/**\n * Accounts Event: onResetPasswordLink When a user uses a password reset link\n */\nAccounts.onResetPasswordLink((token, done) => {\n  Blaze.renderWithData(Template.loginFormUpdatePasswordOverlay, {\n    token,\n    callback: done,\n    isOpen: true,\n    type: \"updatePassword\"\n  }, $(\"body\").get(0));\n});\n\n/**\n * Accounts Event: onEnrollmentLink When a user uses an enrollment link\n */\nAccounts.onEnrollmentLink((token, done) => {\n  Blaze.renderWithData(Template.loginFormUpdatePasswordOverlay, {\n    token,\n    callback: done,\n    isOpen: true,\n    type: \"setPassword\"\n  }, $(\"body\").get(0));\n});\n\n\n// ----------------------------------------------------------------------------\n// /**\n//  * Helpers: Login Form Update Password Overlay\n//  */\nTemplate.loginFormUpdatePasswordOverlay.helpers({\n  component() {\n    const currentData = Template.currentData() || {};\n    return {\n      ...currentData,\n      component: getComponent(\"UpdatePasswordOverlay\")\n    };\n  }\n});\n\n// ----------------------------------------------------------------------------\n\n/**\n * onCreated: Login Form Change Password\n */\nTemplate.loginFormChangePassword.onCreated(() => {\n  const template = Template.instance();\n\n  template.uniqueId = Random.id();\n  template.formMessages = new ReactiveVar({});\n});\n\n/**\n * Helpers: Login Form Change Password\n */\nTemplate.loginFormChangePassword.helpers(LoginFormSharedHelpers);\n\n/**\n * Events: Login Form Change Password\n */\nTemplate.loginFormChangePassword.events({\n\n  /**\n   * Submit form for password update\n   * @param  {Event} event - jQuery Event\n   * @param  {Template} template - Blaze Template\n   * @return {void}\n   */\n  \"submit form\"(event, template) {\n    event.preventDefault();\n    event.stopPropagation();\n\n    const oldPasswordInput = template.$(\".login-input--oldPassword\");\n    const passwordInput = template.$(\".login-input--password\");\n\n    const oldPassword = oldPasswordInput.val().trim();\n    const password = passwordInput.val().trim();\n\n    // We only check if it exists, just incase we\"ve change the password strength and want the\n    // user to have an oppurtinity to update to a stronger password\n    const validatedOldPassword = LoginFormValidation.password(password, { validationLevel: \"exists\" });\n    const validatedPassword = LoginFormValidation.password(password);\n\n    const templateInstance = Template.instance();\n    const errors = {};\n\n    templateInstance.formMessages.set({});\n\n\n    if (validatedOldPassword !== true) {\n      errors.oldPassword = validatedOldPassword;\n    }\n\n    if (validatedPassword !== true) {\n      errors.password = validatedPassword;\n    }\n\n    if ($.isEmptyObject(errors) === false) {\n      templateInstance.formMessages.set({\n        errors\n      });\n      // prevent password update\n      return;\n    }\n\n    Accounts.changePassword(oldPassword, password, (error) => {\n      if (error) {\n        // Show some error message\n        templateInstance.formMessages.set({\n          alerts: [error]\n        });\n      } else {\n        // // Close dropdown or navigate to page\n        templateInstance.formMessages.set({\n          info: [{\n            reason: i18next.t(\"accountsUI.info.passwordChanged\")\n          }]\n        });\n      }\n    });\n  }\n});\n","import { Template } from \"meteor/templating\";\n\nexport const LoginFormSharedHelpers = {\n  messages() {\n    return Template.instance().formMessages.get();\n  },\n\n  hasError(error) {\n    // True here means the field is valid\n    // We're checking if theres some other message to display\n    if (error !== true && typeof error !== \"undefined\") {\n      return \"has-error has-feedback\";\n    }\n  },\n  capitalize(str) {\n    const finalString = str === null ? \"\" : String(str);\n    return finalString.charAt(0).toUpperCase() + finalString.slice(1);\n  }\n};\n","export { LoginFormSharedHelpers } from \"./helpers\";\nexport { ServiceConfigHelper } from \"./util\";\n","import _ from \"lodash\";\nimport { Accounts } from \"meteor/accounts-base\";\nimport { ServiceConfiguration } from \"meteor/service-configuration\";\n\nfunction capitalize(str) {\n  const finalString = str === null ? \"\" : String(str);\n  return finalString.charAt(0).toUpperCase() + str.slice(1);\n}\n\nconst providers = {\n  Facebook: {},\n  Google: {},\n  Twitter: {}\n};\n\nproviders.Facebook.fields = function () {\n  return [\n    { property: \"appId\", label: \"App ID\" },\n    { property: \"secret\", label: \"App Secret\" }\n  ];\n};\n\nproviders.Google.fields = function () {\n  return [\n    { property: \"clientId\", label: \"Client ID\" },\n    { property: \"secret\", label: \"Client secret\" }\n  ];\n};\n\nproviders.Twitter.fields = function () {\n  return [\n    { property: \"consumerKey\", label: \"API key\" },\n    { property: \"secret\", label: \"API secret\" }\n  ];\n};\n\nexport class ServiceConfigHelper {\n  availableServices() {\n    const services = Package[\"accounts-oauth\"] ? Accounts.oauth.serviceNames() : [];\n    services.sort();\n\n    return services;\n  }\n\n  capitalizedServiceName(name) {\n    if (name === \"meteor-developer\") {\n      return \"MeteorDeveloperAccount\";\n    }\n\n    return capitalize(name);\n  }\n\n  configFieldsForService(name) {\n    const capitalizedName = this.capitalizedServiceName(name);\n    const template = providers[capitalizedName];\n\n    if (template) {\n      const fields = template.fields();\n\n      return _.map(fields, (field) => {\n        if (!field.type) {\n          field.type = field.property === \"secret\" ? \"password\" : \"text\";\n        }\n\n        return _.extend(field, {\n          type: field.type\n        });\n      });\n    }\n\n    return [];\n  }\n\n  services(extendEach) {\n    const availableServices = this.availableServices();\n    const configurations = ServiceConfiguration.configurations.find().fetch();\n\n    return _.map(availableServices, (name) => {\n      const matchingConfigurations = _.filter(configurations, { service: name });\n      let service = {\n        name,\n        label: this.capitalizedServiceName(name),\n        fields: this.configFieldsForService(name)\n      };\n\n      if (matchingConfigurations.length) {\n        service = _.extend(service, matchingConfigurations[0]);\n      }\n\n      if (_.isFunction(extendEach)) {\n        service = _.extend(service, extendEach(service) || {});\n      }\n\n      return service;\n    });\n  }\n}\n","import React, { Component } from \"react\";\nimport PropTypes from \"prop-types\";\nimport { Components } from \"@reactioncommerce/reaction-components\";\nimport sortUsersIntoGroups, { sortGroups } from \"../helpers/accountsHelper\";\n\nclass AccountsDashboard extends Component {\n  static propTypes = {\n    accounts: PropTypes.array,\n    adminGroups: PropTypes.array, // only admin groups\n    groups: PropTypes.array // all groups including non-admin default groups\n  };\n\n  constructor(props) {\n    super(props);\n    const { accounts, adminGroups, groups } = this.props;\n    const sortedGroups = sortUsersIntoGroups({ groups: sortGroups(adminGroups), accounts }) || [];\n    const defaultSelectedGroup = sortedGroups[0];\n\n    this.state = {\n      accounts,\n      groups: sortGroups(groups),\n      adminGroups: sortedGroups,\n      selectedGroup: defaultSelectedGroup\n    };\n  }\n\n  componentWillReceiveProps(nextProps) {\n    const { adminGroups, accounts, groups } = nextProps;\n    const sortedGroups = sortUsersIntoGroups({ groups: sortGroups(adminGroups), accounts });\n    const selectedGroup = adminGroups.find((grp) => grp._id === (this.state.selectedGroup || {})._id);\n    this.setState({\n      adminGroups: sortedGroups,\n      groups: sortGroups(groups),\n      accounts,\n      selectedGroup\n    });\n  }\n\n  handleGroupSelect = (group) => {\n    this.setState({ selectedGroup: group });\n  };\n\n  handleMethodLoad = () => {\n    this.setState({ loading: true });\n  };\n\n  handleMethodDone = () => {\n    this.setState({ loading: false });\n  };\n\n  renderGroupDetail = () => {\n    const { groups, adminGroups, accounts } = this.state;\n    return (\n      <Components.ManageGroups\n        {...this.props}\n        group={this.state.selectedGroup}\n        groups={groups}\n        adminGroups={adminGroups}\n        accounts={accounts}\n        onChangeGroup={this.handleGroupSelect}\n      />\n    );\n  };\n\n  renderGroupsTable(groups) {\n    if (Array.isArray(groups)) {\n      return (\n        <div className=\"group-container\">\n          {this.state.loading && <Components.Loading />}\n          {groups.map((group, index) => (\n            <Components.GroupsTable\n              {...this.props}\n              key={index}\n              group={group}\n              onMethodLoad={this.handleMethodLoad}\n              onMethodDone={this.handleMethodDone}\n              onGroupSelect={this.handleGroupSelect}\n            />\n          ))}\n        </div>\n      );\n    }\n\n    return null;\n  }\n\n  render() {\n    return (\n      <div className=\"row list-group accounts-table\">\n        <div className=\"col-md-9\">\n          {this.renderGroupsTable(this.state.adminGroups)}\n        </div>\n        <div className=\"col-md-3\">\n          {this.renderGroupDetail()}\n        </div>\n      </div>\n    );\n  }\n}\n\nexport default AccountsDashboard;\n","import React, { Component } from \"react\";\nimport PropTypes from \"prop-types\";\nimport { Components, registerComponent } from \"@reactioncommerce/reaction-components\";\n\nclass AddressBook extends Component {\n  static propTypes = {\n    // Add address reducer calls meteor method\n    addAddress: PropTypes.func,\n    // array of address objects\n    addressBook: PropTypes.arrayOf(PropTypes.shape({\n      _id: PropTypes.string,\n      fullName: PropTypes.string,\n      address1: PropTypes.string,\n      address2: PropTypes.string,\n      postal: PropTypes.string,\n      city: PropTypes.string,\n      region: PropTypes.string,\n      country: PropTypes.string,\n      phone: PropTypes.string,\n      isBillingDefault: PropTypes.bool,\n      isShippingDefault: PropTypes.bool,\n      isCommercal: PropTypes.bool\n    })),\n    // country options for select\n    countries: PropTypes.arrayOf(PropTypes.shape({\n      label: PropTypes.string,\n      value: PropTypes.string\n    })),\n    //  Heading content for address book\n    heading: PropTypes.shape({\n      // Heading title\n      defaultValue: PropTypes.string,\n      // i18nKey for heading title\n      i18nKey: PropTypes.string,\n      // If in checkout view, addressbook checkout step position and icon className\n      checkout: PropTypes.shape({\n        icon: PropTypes.string,\n        position: PropTypes.Number\n      })\n    }),\n    // the initial mode of the AddressBook(used only in constructor)\n    initMode: PropTypes.oneOf([\"grid\", \"entry\", \"review\"]),\n    // function to mark tax calculation on cart.\n    markCart: PropTypes.func,\n    // handles error by calling Alerts.toast with the error meesage\n    onError: PropTypes.func,\n    // regions by county\n    regionsByCountry: PropTypes.object,\n    // Remove address reducer calls meteor method\n    removeAddress: PropTypes.func,\n    // Update address reducer calls meteor method\n    updateAddress: PropTypes.func\n  }\n\n  static defaultProps = {\n    addAddress() {},\n    removeAddress() {},\n    updateAddress() {},\n    onError() {}\n  }\n\n  constructor(props) {\n    super(props);\n\n    let mode = (!props.addressBook || props.addressBook.length === 0) ? \"entry\" : \"grid\";\n    // initMode overrired everything\n    if (props.initMode) {\n      mode = props.initMode;\n    }\n\n    this.state = {\n      // No address, enable the form\n      mode,\n      // Address to be edited\n      editAddress: {},\n      // Address returned after validation check\n      validationResults: null\n    };\n  }\n\n\n  componentWillReceiveProps(nextProps) {\n    let { addressBook } = nextProps;\n    let { mode } = this.state;\n    if (!Array.isArray(addressBook)) addressBook = [];\n\n    if (mode === \"review\") {\n      return;\n    }\n\n    // if the new addressBook array is empty and\n    // the address book form is not active\n    if (addressBook.length === 0 && mode !== \"entry\") {\n      mode = \"entry\";\n    }\n\n    // if the new addressBook array is not empty but\n    // the address book form is active\n    if (addressBook.length !== 0 && mode !== \"grid\") {\n      mode = \"grid\";\n    }\n\n    if (!this.props.initMode && nextProps.initMode) {\n      mode = nextProps.initMode;\n    }\n\n    this.mode = mode;\n  }\n\n  // State change helpers\n\n  /**\n   * @method mode\n   * @summary setter for mode in state\n   * @since 2.0.0\n   * @param {String} mode - the mode to be set.\n   */\n  set mode(mode) {\n    this.setState({\n      mode\n    });\n  }\n\n  /**\n   * @method setEntryMode\n   * @summary changes the mode to \"entry\"\n   * @since 2.0.0\n   */\n  setEntryMode = () => {\n    this.mode = \"entry\";\n  }\n\n  /**\n   * @method switchMode\n   * @summary changes the address to newMode and editAddress to the value passed.\n   * @since 2.0.0\n   * @param {String} newMode - new mode to be set\n   * @param {String} editAddress - the address to be set for the form.\n   * @return {Object} - address object.\n   */\n  switchMode = (newMode, editAddress) => {\n    this.setState({\n      mode: newMode,\n      editAddress\n    });\n  }\n\n  // Address Book helpers\n\n  /**\n   * @method findAddress\n   * @summary using the provided _id finds an address object from the addressBook array.\n   * @since 2.0.0\n   * @param {String} _id - address object _id.\n   * @return {Object} - address object.\n   */\n  findAddress(_id) {\n    const { addressBook } = this;\n    return addressBook.find((addy) => addy._id === _id);\n  }\n\n  /**\n   * @method clearForm\n   * @summary removes the editAddress from state this will clear the address book form.\n   * @since 2.0.0\n   */\n  clearForm() {\n    if (this.hasEditAddress) this.setState({ editAddress: {} });\n  }\n\n  /**\n   * @method addressBook\n   * @summary getter that returns the addressBook array if avalible on the props or an empty array.\n   * @since 2.0.0\n   * @return {Array} addressBook - array of address object or an empty array.\n   */\n  get addressBook() {\n    let { addressBook } = this.props;\n    if (!Array.isArray(addressBook)) addressBook = [];\n    return addressBook;\n  }\n\n  /**\n   * @method hasEditaddress\n   * @summary getter that returns true if there is an editAddress in state.\n   * @since 2.0.0\n   * @return {Boolean}\n   */\n  get hasEditAddress() {\n    const { editAddress } = this.state;\n    return (Object.keys(editAddress).length !== 0);\n  }\n\n  /**\n   * @method hasAddress\n   * @summary getter that returns true if there is at least 1 address in the addressBook array.\n   * @since 2.0.0\n   * @return {Boolean}\n   */\n  get hasAddress() {\n    const { addressBook } = this;\n    return (addressBook && addressBook.length !== 0);\n  }\n\n  // Address Actions\n\n  /**\n   * @method onSelect\n   * @summary updating an address if it's been selected as the default shipping or billing address.\n   * @since 2.0.0\n   * @param {String} _id - address object _id.\n   * @param {String} usage - the address usage \"shipping\" or \"billing\".\n   */\n  onSelect = (_id, usage) => {\n    const { onError, updateAddress } = this.props;\n    const address = this.findAddress(_id);\n    switch (usage) {\n      case \"shipping\":\n        updateAddress(address, \"isShippingDefault\").catch(onError);\n        break;\n      case \"billing\":\n        updateAddress(address, \"isBillingDefault\").catch(onError);\n        break;\n      default:\n        return;\n    }\n  }\n\n  /**\n   * @method onRemove\n   * @summary using the provided _id to call the removeAddress reducer that removes an address.\n   * @since 2.0.0\n   * @param {String} _id - address object _id.\n   */\n  onRemove = (_id) => {\n    const { onError, removeAddress } = this.props;\n    removeAddress(_id).catch(onError);\n  }\n\n  /**\n   * @method onAdd\n   * @summary adds or updates an address in the addressBook.\n   * @since 2.0.0\n   * @param {Object} address - new or updated address object.\n   */\n  onAdd = (address, validateAddress = true) => {\n    const { addAddress, onError, updateAddress } = this.props;\n    // if edit address is in the address book form\n    if (this.hasEditAddress || address._id) {\n      const { editAddress } = this.state;\n      // new object with editAddress _id and the param addess data\n      this.clearForm();\n      return updateAddress({ _id: editAddress._id, ...address }, null, validateAddress)\n        .then((result) => {\n          if (result && result.validated === false) {\n            this.setState({\n              mode: \"review\",\n              validationResults: result\n            });\n          } else {\n            this.setState({\n              mode: \"grid\"\n            });\n          }\n        })\n        .catch(onError);\n    }\n    return addAddress(address, validateAddress)\n      .then((result) => {\n        if (result && result.validated === false) {\n          this.setState({\n            mode: \"review\",\n            validationResults: result\n          });\n        }\n      })\n      .catch(onError);\n  }\n\n  // Address Book Actions\n\n  /**\n   * @method onCancel\n   * @summary sets mode to \"grid\" and clears the address book form.\n   * this will only be called from the address book form.\n   * @since 2.0.0\n   */\n  onCancel = () => {\n    this.mode = \"grid\";\n    this.clearForm();\n  }\n\n  /**\n   * @method onEdit\n   * @summary sets the address to be edited and makes the mode as \"entry\".\n   * this will only be called form the address book grid.\n   * @since 2.0.0\n   */\n  onEdit = (_id) => {\n    const editAddress = this.findAddress(_id);\n    this.setState({ editAddress });\n    this.mode = \"entry\";\n  }\n\n  // Address Book JSX\n\n  /**\n   * @method renderCheckoutIcon\n   * @summary renders address book heading checkout step icon when\n   * the address book is being called from checkout\n   * @since 2.0.0\n   * @return {Object} - JSX\n   */\n  renderCheckoutIcon() {\n    const { checkout: { icon, position } } = this.props.heading;\n    return <i className={`checkout-step-badge ${icon}`} >{position}</i>;\n  }\n\n  /**\n   * @method renderHeading\n   * @summary renders address book heading content, this content will change\n   * based on where in the app this component is being used\n   * @since 2.0.0\n   * @return {Object} - JSX\n   */\n  renderHeading() {\n    const { heading } = this.props;\n    return (\n      <div className=\"panel-heading\">\n        {heading.checkout ? this.renderCheckoutIcon() : \"\"}\n        <h2 className=\"panel-title\">\n          <Components.Translation {...heading} />\n        </h2>\n      </div>\n    );\n  }\n\n  /**\n   * @method renderControlBar\n   * @summary renders adding or editing address message if the form is showing\n   * renders an add address button if the grid is showiing.\n   * @since 2.0.0\n   * @return {Object} - JSX\n   */\n  renderControlBar() {\n    const { mode } = this.state;\n\n    let controlBarContent;\n    if (mode === \"entry\" && !this.hasEditAddress) {\n      // active form with no edit address\n      let translationContent;\n      if (this.hasAddress) {\n        // has address in addressBook array, adding a new entry\n        translationContent = { defaultValue: \"Add a new address entry\", i18nKey: \"addressBookAdd.addAddress\" };\n      } else {\n        // first address to be created is default address\n        translationContent = { defaultValue: \"Create your default address\", i18nKey: \"addressBookAdd.createAddress\" };\n      }\n\n      controlBarContent = (\n        <Components.Translation {...translationContent} />\n      );\n    } else if (mode === \"entry\" && this.hasEditAddress) {\n      // active form with an edit address\n      // show editing address message\n      controlBarContent = (\n        <Components.Translation defaultValue=\"Editing this address entry\" i18nKey=\"addressBookEdit.editAddress\" />\n      );\n    } else if (mode === \"grid\") {\n      controlBarContent = (\n        <button className=\"btn btn-default\" onClick={this.setEntryMode}>\n          <i className=\"fa fa-plus fa-lg address-icons\" />\n          <Components.Translation defaultValue=\"Add Address\" i18nKey=\"addressBookGrid.addAddress\"/>\n        </button>\n      );\n    } else if (mode === \"review\") {\n      controlBarContent = (\n        <Components.Translation defaultValue=\"Review address\" i18nKey=\"addressBookEdit.reviewAddress\" />\n      );\n    }\n\n    return (\n      <div className=\"panel-control-bar\">\n        {controlBarContent}\n      </div>\n    );\n  }\n\n  /**\n   * @method renderContent\n   * @summary renders the AddressBookForm, AddressBookGrid, AddressBookReview components\n   * based on mode.\n   * @since 2.0.0\n   * @return {Object} - JSX and child component.\n   */\n  renderContent() {\n    const { addressBook } = this;\n    const { countries, regionsByCountry, markCart } = this.props;\n    const { editAddress, mode } = this.state;\n\n    let content;\n    if (mode === \"entry\") {\n      content = (\n        <Components.AddressBookForm\n          add={this.onAdd}\n          cancel={this.onCancel}\n          countries={countries}\n          editAddress={editAddress}\n          hasAddress={this.hasAddress}\n          regionsByCountry={regionsByCountry}\n        />\n      );\n    } else if (mode === \"grid\") {\n      content = (\n        <Components.AddressBookGrid\n          addressBook={addressBook}\n          edit={this.onEdit}\n          remove={this.onRemove}\n          select={this.onSelect}\n        />\n      );\n    } else {\n      content = (\n        <Components.AddressBookReview\n          addressBook={addressBook}\n          add={this.onAdd}\n          validationResults={this.state.validationResults}\n          switchMode={this.switchMode}\n          markCart={markCart}\n        />\n      );\n    }\n\n    return (\n      <div className=\"panel-body panel-content\">\n        {content}\n      </div>\n    );\n  }\n\n  render() {\n    return (\n      <div className=\"panel panel-default panel-address-book\">\n        {this.renderHeading()}\n        <div className=\"address-book\">\n          {this.renderControlBar()}\n          {this.renderContent()}\n        </div>\n      </div>\n    );\n  }\n}\n\nregisterComponent(\"AddressBook\", AddressBook);\n\nexport default AddressBook;\n","import React, { Component } from \"react\";\nimport PropTypes from \"prop-types\";\nimport { HTTP } from \"meteor/http\";\nimport { Components, registerComponent } from \"@reactioncommerce/reaction-components\";\n\nclass AddressBookForm extends Component {\n  static propTypes = {\n    /**\n     * add addess callback\n     */\n    add: PropTypes.func,\n    /**\n     * cancel address entry and render AddressBookGrid\n     */\n    cancel: PropTypes.func,\n    /**\n     * country options for select\n     */\n    countries: PropTypes.arrayOf(PropTypes.shape({\n      label: PropTypes.string,\n      value: PropTypes.string\n    })),\n    /**\n     * address object\n     */\n    editAddress: PropTypes.object,\n    /**\n     * has address in addressBook\n     */\n    hasAddress: PropTypes.bool,\n    /**\n     * regions by county\n     */\n    regionsByCountry: PropTypes.object\n  }\n\n  constructor(props) {\n    super(props);\n\n    this.state = {\n      regions: [],\n      fields: {\n        _id: this.props.editAddress._id,\n        country: this.props.editAddress.country || \"US\", // defaults to United States\n        fullName: this.props.editAddress.fullName || \"\",\n        address1: this.props.editAddress.address1 || \"\",\n        address2: this.props.editAddress.address2 || \"\",\n        postal: this.props.editAddress.postal || \"\",\n        city: this.props.editAddress.city || \"\",\n        region: this.props.editAddress.region || \"\",\n        phone: this.props.editAddress.phone || \"\",\n        isShippingDefault: this.props.editAddress.isShippingDefault || (!this.props.hasAddress), // no address, default to true\n        isBillingDefault: this.props.editAddress.isBillingDefault || (!this.props.hasAddress), // no addres, default to true\n        isCommercial: this.props.editAddress.isCommercial || false\n      }\n    };\n    // Getting the user's countrt and setting it as default\n    HTTP.get(\"https://geo.getreaction.io/json/\", (err, res) => {\n      if (!err) {\n        const countryCode = res.data.country_code;\n        if (countryCode && !this.props.editAddress.country) {\n          this.setState((prevState) => ({\n            fields: {\n              ...prevState.fields,\n              country: countryCode\n            }\n          }), () => {\n            this.setRegionOptions(countryCode);\n          });\n        }\n      }\n    });\n  }\n\n  componentWillMount() {\n    const { fields: { country } } = this.state;\n\n    // if selected country has region options set those too\n    this.setRegionOptions(country);\n  }\n  // Address Book Form helpers\n\n  fieldLabelMap = {\n    region: {\n      label: \"Region\",\n      i18nKeyLabel: \"address.region\"\n    },\n    country: {\n      label: \"Country\",\n      i18nKeyLabel: \"address.country\"\n    },\n    fullName: {\n      label: \"Full Name\",\n      i18nKeyLabel: \"address.fullName\"\n    },\n    address1: {\n      label: \"Address\",\n      i18nKeyLabel: \"address.address1\"\n    },\n    address2: {\n      label: \"Address\",\n      i18nKeyLabel: \"address.address2\"\n    },\n    postal: {\n      label: \"Postal\",\n      i18nKeyLabel: \"address.postal\"\n    },\n    city: {\n      label: \"City\",\n      i18nKeyLabel: \"address.city\"\n    },\n    phone: {\n      label: \"Phone\",\n      i18nKeyLabel: \"address.phone\"\n    }\n  }\n\n\n  /**\n   * @method setRegionOptions\n   * @summary creates an array of region options for the regions select field.\n   * @since 2.0.0\n   * @param {String} country - country code \"US\" \"CA\" \"JP\"\n   */\n  setRegionOptions(country) {\n    const { regionsByCountry, editAddress } = this.props;\n    const { fields } = this.state;\n    const regions = regionsByCountry[country];\n\n    // if the region field is empty\n    if (Object.keys(editAddress).length) {\n      this.setState({ regions });\n    } else {\n      // setting the fields region to be the\n      // first region in options array\n      const [firstRegion] = regions;\n      if (firstRegion !== null && typeof firstRegion === \"object\") {\n        fields.region = firstRegion.value;\n      } else {\n        fields.region = firstRegion;\n      }\n      this.setState({ regions, fields });\n    }\n  }\n\n  clientValidation = (enteredAddress) => {\n    const requiredFields = [\"country\", \"fullName\", \"address1\", \"postal\", \"city\", \"region\", \"phone\"];\n    const validation = { messages: {} };\n    let isValid = true;\n    Object.keys(enteredAddress).forEach((key) => {\n      if (enteredAddress[key] && typeof enteredAddress[key] === \"string\" && requiredFields.indexOf(key) > -1) {\n        enteredAddress[key] = enteredAddress[key].trim();\n      }\n      if (requiredFields.indexOf(key) > -1 && !enteredAddress[key]) {\n        validation.messages[key] = {\n          message: `${this.fieldLabelMap[key].label} is required`\n        };\n        isValid = false;\n      }\n    });\n    if (!isValid) {\n      this.setState({\n        validation\n      });\n    } else {\n      this.setState({\n        validation: undefined\n      });\n    }\n    return isValid;\n  }\n\n  // Address Book Form Actions\n\n  /**\n   * @method onSubmit\n   * @summary takes the entered address and adds or updates it to the addressBook.\n   * @since 2.0.0\n   */\n  onSubmit = (event) => {\n    event.preventDefault();\n    const { add } = this.props;\n    const { fields: enteredAddress } = this.state; // fields object as enteredAddress\n    // TODO: field validatiion\n    if (this.clientValidation(enteredAddress)) {\n      add(enteredAddress);\n    }\n  }\n\n  /**\n   * @method onFieldChange\n   * @summary when field values change update the value in state\n   * @since 2.0.0\n   */\n  onFieldChange = (event, value, name) => {\n    const { fields } = this.state;\n    fields[name] = value;\n    this.setState({ fields });\n    // if country changed set new region options\n    if (name === \"country\") this.setRegionOptions(value);\n  }\n\n  /**\n   * @method onSelectChange\n   * @summary normalizes the select components onChange.\n   * @since 2.0.0\n   */\n  onSelectChange = (value, name) => {\n    // the reaction select component doesn't return\n    // the same values as the other field components\n    // this updates that return and calls the\n    // typical on field change handler\n    this.onFieldChange(new Event(\"onSelect\"), value, name);\n  }\n\n  // Address Book Form JSX\n\n  /**\n   * @method renderAddressOptiions\n   * @summary renders address options at the bottom of the address book form\n   * if no address in addressBook array only show the isCommercial option\n   * since a first address will always be the default shipping/billing address.\n   * @since 2.0.0\n   * @return {Object} - JSX and Checkbox components.\n   */\n  renderAddressOptions() {\n    const { hasAddress } = this.props;\n    const { fields } = this.state;\n    let defaultOptions;\n    if (hasAddress) {\n      defaultOptions = (\n        <div>\n          <div className=\"form-group\">\n            <div className=\"checkbox\">\n              <Components.Checkbox\n                i18nKeyLabel=\"address.isShippingDefault\"\n                label=\"Make this your default shipping address.\"\n                name=\"isShippingDefault\"\n                onChange={this.onFieldChange}\n                checked={fields.isShippingDefault}\n              />\n            </div>\n          </div>\n          <div className=\"form-group\">\n            <div className=\"checkbox\">\n              <Components.Checkbox\n                i18nKeyLabel=\"address.isBillingDefault\"\n                label=\"Make this your default billing address.\"\n                name=\"isBillingDefault\"\n                onChange={this.onFieldChange}\n                checked={fields.isBillingDefault}\n              />\n            </div>\n          </div>\n        </div>\n      );\n    }\n\n    return (\n      <div className=\"row address-options\" style={{ paddingLeft: \"5px\" }}>\n        <div className=\"col-md-12\">\n          {defaultOptions}\n          <div className=\"form-group\">\n            <div className=\"checkbox\">\n              <Components.Checkbox\n                i18nKeyLabel=\"address.isCommercial\"\n                label=\"This is a commercal address.\"\n                name=\"isCommercial\"\n                onChange={this.onFieldChange}\n                checked={fields.isCommercial}\n              />\n            </div>\n          </div>\n        </div>\n      </div>\n    );\n  }\n\n  /**\n   * @method renderButtons\n   * @summary renders submit and cancel buttons for address book form\n   * if no address in addressBook array don't show the cancel button\n   * since the user needs to add a default address.\n   * @since 2.0.0\n   * @return {Object} - JSX\n   */\n  renderButtons() {\n    const { cancel, hasAddress } = this.props;\n    const cancelBtn = (\n      <Components.Button\n        buttonType=\"reset\"\n        className=\"btn btn-default\"\n        bezelStyle=\"solid\"\n        onClick={cancel}\n        i18nKeyLabel=\"app.cancel\"\n        label=\"Cancel\"\n      />\n    );\n    return (\n      <div className=\"row text-right\">\n        <Components.Button\n          buttonType=\"submit\"\n          className=\"btn btn-primary\"\n          bezelStyle=\"solid\"\n          i18nKeyLabel=\"app.saveAndContinue\"\n          label=\"Save and continue\"\n        />\n        {(hasAddress) ? cancelBtn : \"\"}\n      </div>\n    );\n  }\n\n  render() {\n    const { countries } = this.props;\n    const { regions, fields, validation } = this.state;\n    let regionField;\n    if (regions.length === 0) {\n      // if no region optioins\n      // render a TextField\n      regionField = (\n        <Components.TextField\n          i18nKeyLabel={this.fieldLabelMap.region.i18nKeyLabel}\n          label={this.fieldLabelMap.region.label}\n          name=\"region\"\n          onChange={this.onFieldChange}\n          value={fields.region}\n          validation={validation}\n        />\n      );\n    } else {\n      // if region optioins\n      // render a Select\n      regionField = (\n        <Components.Select\n          i18nKeyLabel={this.fieldLabelMap.region.i18nKeyLabel}\n          label={this.fieldLabelMap.region.label}\n          name=\"region\"\n          options={regions}\n          onChange={this.onSelectChange}\n          value={fields.region}\n          validation={validation}\n        />\n      );\n    }\n    return (\n      <form onSubmit={this.onSubmit}>\n        <div className=\"row\">\n          <div className=\"col-md-6\">\n            <Components.Select\n              i18nKeyLabel={this.fieldLabelMap.country.i18nKeyLabel}\n              label={this.fieldLabelMap.country.label}\n              name=\"country\"\n              options={countries}\n              onChange={this.onSelectChange}\n              placeholder=\"Country\"\n              value={fields.country}\n              validation={validation}\n            />\n          </div>\n        </div>\n\n        <div className=\"row\">\n          <div className=\"col-md-6\">\n            <Components.TextField\n              i18nKeyLabel={this.fieldLabelMap.fullName.i18nKeyLabel}\n              label={this.fieldLabelMap.fullName.label}\n              name=\"fullName\"\n              onChange={this.onFieldChange}\n              value={fields.fullName}\n              validation={validation}\n            />\n          </div>\n        </div>\n\n        <div className=\"row\">\n          <div className=\"col-md-6\">\n            <Components.TextField\n              i18nKeyLabel={this.fieldLabelMap.address1.i18nKeyLabel}\n              label={this.fieldLabelMap.address1.label}\n              name=\"address1\"\n              onChange={this.onFieldChange}\n              value={fields.address1}\n              validation={validation}\n            />\n          </div>\n          <div className=\"col-md-6\">\n            <Components.TextField\n              i18nKeyLabel={this.fieldLabelMap.address2.i18nKeyLabel}\n              label={this.fieldLabelMap.address2.label}\n              name=\"address2\"\n              onChange={this.onFieldChange}\n              value={fields.address2}\n              validation={validation}\n            />\n          </div>\n        </div>\n\n        <div className=\"row\">\n          <div className=\"col-md-4\">\n            <Components.TextField\n              i18nKeyLabel={this.fieldLabelMap.postal.i18nKeyLabel}\n              label={this.fieldLabelMap.postal.label}\n              name=\"postal\"\n              onChange={this.onFieldChange}\n              value={fields.postal}\n              validation={validation}\n            />\n          </div>\n          <div className=\"col-md-4\">\n            <Components.TextField\n              i18nKeyLabel={this.fieldLabelMap.city.i18nKeyLabel}\n              label={this.fieldLabelMap.city.label}\n              name=\"city\"\n              onChange={this.onFieldChange}\n              value={fields.city}\n              validation={validation}\n            />\n          </div>\n          <div className=\"col-md-4\">\n            {regionField}\n          </div>\n        </div>\n\n        <div className=\"row\">\n          <div className=\"col-md-4\">\n            <Components.TextField\n              i18nKeyLabel={this.fieldLabelMap.phone.i18nKeyLabel}\n              label={this.fieldLabelMap.phone.label}\n              name=\"phone\"\n              onChange={this.onFieldChange}\n              value={fields.phone}\n              validation={validation}\n            />\n          </div>\n        </div>\n\n        {this.renderAddressOptions()}\n        {this.renderButtons()}\n      </form>\n    );\n  }\n}\n\nregisterComponent(\"AddressBookForm\", AddressBookForm);\n\nexport default AddressBookForm;\n","import React, { Component } from \"react\";\nimport PropTypes from \"prop-types\";\nimport { Components, registerComponent } from \"@reactioncommerce/reaction-components\";\n\nclass AddressBookGrid extends Component {\n  static propTypes = {\n    // array of address objects\n    addressBook: PropTypes.arrayOf(PropTypes.shape({\n      _id: PropTypes.string,\n      fullName: PropTypes.string,\n      address1: PropTypes.string,\n      address2: PropTypes.string,\n      postal: PropTypes.string,\n      city: PropTypes.string,\n      region: PropTypes.string,\n      country: PropTypes.string,\n      phone: PropTypes.string,\n      isBillingDefault: PropTypes.bool,\n      isShippingDefault: PropTypes.bool,\n      isCommercal: PropTypes.bool\n    })),\n    // selects an address to be edited and renders the AddressBookForm\n    edit: PropTypes.func,\n    // removes the selected address\n    remove: PropTypes.func,\n    // selects a default shipping or billing address\n    select: PropTypes.func\n  }\n\n  static defaultProps = {\n    edit() {},\n    remove() {},\n    select() {}\n  }\n\n  state = {\n    defaultShippingAddressId: this.defaultShippingAddressId,\n    defaultBillingAddressId: this.defaultBillingAddressId\n  }\n\n  componentWillReceiveProps(nextProps) {\n    let { addressBook } = nextProps;\n    if (!Array.isArray(addressBook)) addressBook = [];\n    // if a new address has been added to the addressBook\n    // check to see if the new address is now the default shipping or billing address\n    addressBook.forEach((addy) => {\n      if (addy.isShippingDefault && addy._id !== this.defaultShippingAddressId) {\n        this.setDefaultAddress(addy._id, \"shipping\");\n      }\n\n      if (addy.isBillingDefault && addy._id !== this.defaultBillingAddressId) {\n        this.setDefaultAddress(addy._id, \"billing\");\n      }\n    });\n  }\n\n  // Address Book Grid helpers\n\n  /**\n   * @method setDefaultaddress\n   * @summary updating the compoenet state with the new default shipping or billing address.\n   * @since 2.0.0\n   * @param {String} _id - address object _id.\n   * @param {String} usage - the address usage \"shipping\" or \"billing\".\n   */\n  setDefaultAddress(_id, usage) {\n    if (usage === \"shipping\") {\n      this.setState({\n        defaultShippingAddressId: _id\n      });\n    }\n    if (usage === \"billing\") {\n      this.setState({\n        defaultBillingAddressId: _id\n      });\n    }\n  }\n\n  /**\n   * @method addressBook\n   * @summary getter that returns the addressBook array if avalible on the props or an empty array.\n   * @since 2.0.0\n   * @return {Array} addressBook - array of address object or an empty array.\n   */\n  get addressBook() {\n    let { addressBook } = this.props;\n    if (!Array.isArray(addressBook)) addressBook = [];\n    return addressBook;\n  }\n\n  /**\n   * @method defaultShippingAddressId\n   * @summary getter that returns ether the default shipping address _id or and empty string.\n   * @since 2.0.0\n   * @return {String} - default shipping address _id or empty string.\n   */\n  get defaultShippingAddressId() {\n    const { addressBook } = this;\n    const defaultShippingAddress = addressBook.find((addy) => addy.isShippingDefault);\n    return (defaultShippingAddress) ? defaultShippingAddress._id : \"\";\n  }\n\n  /**\n   * @method defaultBillingAddressId\n   * @summary getter that returns ether the default billing address _id or and empty string.\n   * @since 2.0.0\n   * @return {String} - default billing address _id or empty string.\n   */\n  get defaultBillingAddressId() {\n    const { addressBook } = this;\n    const defaultBillingAddress = addressBook.find((addy) => addy.isBillingDefault);\n    return (defaultBillingAddress) ? defaultBillingAddress._id : \"\";\n  }\n\n  // Address Book Actions\n\n  /**\n   * @method onSelect\n   * @summary handler when an address in the grid is selected as\n   * a default shipping or billing address. This handler sets the default address\n   * in component state as well as calling the parent reducer to set the default address in db.\n   * @since 2.0.0\n   * @param {String} _id - address object _id.\n   * @param {String} usage - the address usage \"shipping\" or \"billing\".\n   */\n  onSelect = (_id, usage) => {\n    const { select } = this.props;\n    this.setDefaultAddress(_id, usage);\n    select(_id, usage);\n  }\n\n  /**\n   * @method renderHeading\n   * @summary renders address book grid heading content\n   * @since 2.0.0\n   * @return {Object} - JSX\n   */\n  renderHeading() {\n    return (\n      <div className=\"address-list-header\">\n        <div className=\"address-list-heading\">\n          <h4>\n            <Components.Translation defaultValue=\"Select a shipping address\" i18nKey=\"addressBookGrid.selectShippingAddress\" />\n          </h4>\n        </div>\n        <div className=\"address-list-heading\">\n          <h4>\n            <Components.Translation defaultValue=\"Select a billing address\" i18nKey=\"addressBookGrid.selectBillingAddress\"/>\n          </h4>\n        </div>\n        <div className=\"address-list-heading-blank\" />\n      </div>\n    );\n  }\n\n  /**\n   * @method renderAddress\n   * @summary renders an address\n   * @since 2.0.0\n   * @param {Object} address - address object that we destructor to get the needed property\n   * @return {Object} - JSX\n   */\n  renderAddress({ address1, address2, city, region, postal, country, phone }) {\n    return (\n      <address>\n        {`${address1 || \"\"} ${address2 || \"\"}`.trim()}<br/>\n        {city}, {region} {postal} {country}<br/>\n        {phone || \"\"}\n      </address>\n    );\n  }\n\n  /**\n   * @method renderAddressGrid\n   * @summary renders address grid by mapping over the addressBook array\n   * @since 2.0.0\n   * @return {Object} - JSX\n   */\n  renderAddressGrid() {\n    const { addressBook } = this;\n    const { edit, remove } = this.props;\n    return addressBook.map((address) => {\n      const { defaultBillingAddressId, defaultShippingAddressId } = this.state;\n      const { _id, fullName } = address;\n      const activeShipping = (defaultShippingAddressId === _id) ? \"active\" : \"\";\n      const activeBilling = (defaultBillingAddressId === _id) ? \"active\" : \"\";\n      return (\n        <div className=\"address-list-item\" key={_id}>\n          <div\n            className={`address ${activeShipping}`}\n            role=\"button\"\n            tabIndex=\"0\"\n            onKeyUp={(e) => { if (e.keyCode === 13) this.onSelect(_id, \"shipping\"); }}\n            onClick={() => { this.onSelect(_id, \"shipping\"); }}\n          >\n            <strong>{fullName}</strong>\n            {this.renderAddress(address)}\n          </div>\n          <div\n            className={`address ${activeBilling}`}\n            role=\"button\"\n            tabIndex=\"0\"\n            onKeyUp={(e) => { if (e.keyCode === 13) this.onSelect(_id, \"billing\"); }}\n            onClick={() => { this.onSelect(_id, \"billing\"); }}\n          >\n            <strong>{fullName}</strong>\n            {this.renderAddress(address)}\n          </div>\n          {/* <span className=\"sr-only\"> */}\n          <div className=\"controls\">\n            <Components.Button\n              className=\"btn btn-default\"\n              onClick={() => { edit(_id); }}\n              icon=\"fa fa-pencil\"\n              tooltip=\"Edit Address\"\n              i18nKeyTooltip=\"addressBookGrid.edit\"\n            />\n            <Components.Button\n              className=\"btn btn-default danger-action\"\n              onClick={() => { remove(_id); }}\n              icon=\"fa fa-trash-o\"\n              tooltip=\"Remove Address\"\n              i18nKeyTooltip=\"addressBookGrid.removeAddress\"\n            />\n          </div>\n        </div>\n      );\n    });\n  }\n\n  render() {\n    return (\n      <div className=\"address-list\">\n        {this.renderHeading()}\n        {this.renderAddressGrid()}\n      </div>\n    );\n  }\n}\n\nregisterComponent(\"AddressBookGrid\", AddressBookGrid);\n\nexport default AddressBookGrid;\n","import React, { Component } from \"react\";\nimport PropTypes from \"prop-types\";\nimport { Components, registerComponent } from \"@reactioncommerce/reaction-components\";\n\nclass AddressBookReview extends Component {\n  static propTypes = {\n    // Add the address to database\n    add: PropTypes.func,\n    // Marks the address as bypassed.\n    markCart: PropTypes.func,\n    // Add address reducer calls meteor method\n    switchMode: PropTypes.func,\n    // array of address objects\n    validationResults: PropTypes.shape({\n      enteredAddress: PropTypes.shape({\n        _id: PropTypes.string,\n        fullName: PropTypes.string,\n        address1: PropTypes.string,\n        address2: PropTypes.string,\n        postal: PropTypes.string,\n        city: PropTypes.string,\n        region: PropTypes.string,\n        country: PropTypes.string,\n        phone: PropTypes.string,\n        isBillingDefault: PropTypes.bool,\n        isShippingDefault: PropTypes.bool,\n        isCommercal: PropTypes.bool\n      }),\n      suggestedAddress: PropTypes.shape({\n        _id: PropTypes.string,\n        fullName: PropTypes.string,\n        address1: PropTypes.string,\n        address2: PropTypes.string,\n        postal: PropTypes.string,\n        city: PropTypes.string,\n        region: PropTypes.string,\n        country: PropTypes.string,\n        phone: PropTypes.string,\n        isBillingDefault: PropTypes.bool,\n        isShippingDefault: PropTypes.bool,\n        isCommercal: PropTypes.bool\n      }),\n      /**\n       * map of all fields and\n       * errors in them.\n       */\n      fieldErrors: PropTypes.object\n    })\n  }\n\n  // Select the entered address by default.\n  state = {\n    isEnteredSelected: false\n  }\n\n  /**\n   * @method handleSelection\n   * @summary either saves the suggested or entered address\n   * @since 2.0.0\n   */\n  handleSelection = (event) => {\n    event.preventDefault();\n    let address = this.props.validationResults.enteredAddress;\n    if (!this.state.isEnteredSelected) {\n      address = this.props.validationResults.suggestedAddress;\n    }\n    if (typeof this.props.markCart === \"function\") {\n      this.props.markCart(address, this.state.isEnteredSelected);\n    }\n    if (typeof this.props.add === \"function\") {\n      this.props.add(address, false);\n    }\n  };\n\n  /**\n   * @method handleEdit\n   * @summary takes user back to the edit address screen\n   * @since 2.0.0\n   */\n  handleEdit = (event) => {\n    event.preventDefault();\n    if (this.props.switchMode) {\n      this.props.switchMode(\"entry\", this.props.validationResults.enteredAddress);\n    }\n  }\n\n  /**\n   * @method selectEntered\n   * @summary select the entered address\n   * @since 2.0.0\n   */\n  selectEntered = () => {\n    this.setState({\n      isEnteredSelected: true\n    });\n  }\n\n  /**\n   * @method selectSuggested\n   * @summary select the suggested address\n   * @since 2.0.0\n   */\n  selectSuggested = () => {\n    this.setState({\n      isEnteredSelected: false\n    });\n  }\n\n  /**\n   * @method renderField\n   * @summary renders a field in the address\n   * with error if present\n   * @since 2.0.0\n   * @return {Object} - JSX and child component.\n   */\n  renderField(field, value, showError) {\n    const { fieldErrors } = this.props.validationResults;\n    if (showError && fieldErrors && fieldErrors[field] && fieldErrors[field].length > 0) {\n      return (\n        <div >\n          <div className=\"error\">\n            {value}\n          </div>\n        </div>\n      );\n    }\n    return (\n      <div>\n        {value}\n      </div>\n    );\n  }\n\n  render() {\n    const { enteredAddress, suggestedAddress } = this.props.validationResults;\n    const { isEnteredSelected } = this.state;\n    return (\n      <div className=\"address-review\">\n        <div className=\"alert alert-warning\">\n          <Components.Translation\n            defaultValue={`The address you entered may be incorrect or incomplete.\n              Please review our suggestions below, and choose which version you'd like to use. Errors are shown in red.`}\n            i18nKey=\"addressBookReview.warning\"\n          />\n        </div>\n        <form>\n          <div className=\"entered-address\">\n            <div className=\"radio-heading\">\n              <input\n                type=\"radio\"\n                value=\"entered\"\n                name=\"chooseAddress\"\n                checked={isEnteredSelected}\n                onChange={this.selectEntered}\n              />\n              <Components.Translation defaultValue=\"Entered Address\" i18nKey=\"addressBookReview.enteredAddress\"/>\n            </div>\n            {this.renderField(\"address1\", enteredAddress.address1, true)}\n            {this.renderField(\"address2\", enteredAddress.address2, true)}\n            {this.renderField(\"city\", enteredAddress.city, true)}\n            {this.renderField(\"country\", enteredAddress.country, true)}\n            {this.renderField(\"postal\", enteredAddress.postal, true)}\n            {this.renderField(\"region\", enteredAddress.region, true)}\n          </div>\n          <div className=\"suggested-address\">\n            <div className=\"radio-heading\">\n              <input\n                type=\"radio\"\n                value=\"suggested\"\n                name=\"chooseAddress\"\n                checked={!isEnteredSelected}\n                onChange={this.selectSuggested}\n              />\n              <Components.Translation defaultValue=\"Suggested Address\" i18nKey=\"addressBookReview.suggestedAddress\"/>\n            </div>\n            {this.renderField(\"address1\", suggestedAddress.address1, false)}\n            {this.renderField(\"address2\", suggestedAddress.address2, false)}\n            {this.renderField(\"city\", suggestedAddress.city, false)}\n            {this.renderField(\"country\", suggestedAddress.country, false)}\n            {this.renderField(\"postal\", suggestedAddress.postal, false)}\n            {this.renderField(\"region\", suggestedAddress.region, false)}\n          </div>\n          <div className=\"panel-buttons\">\n            <Components.Button\n              status=\"primary\"\n              buttonType=\"submit\"\n              onClick={this.handleSelection}\n              bezelStyle=\"solid\"\n              i18nKeyLabel=\"addressBookReview.useSelectedAddress\"\n              label=\"Use selected address\"\n              id=\"reviewAddressSelectButton\"\n            />\n            <div\n              id=\"reviewAddressEditButton\"\n              role=\"button\"\n              onClick={this.handleEdit}\n              onKeyDown={this.handleEdit}\n              tabIndex={0}\n            >\n              <Components.Translation defaultValue=\"Edit entered address\" i18nKey=\"addressBookReview.editAddress\"/>\n            </div>\n          </div>\n        </form>\n      </div>\n    );\n  }\n}\n\n\nregisterComponent(\"AddressBookReview\", AddressBookReview);\n\nexport default AddressBookReview;\n\n","import { Meteor } from \"meteor/meteor\";\nimport React, { Component } from \"react\";\nimport PropTypes from \"prop-types\";\nimport _ from \"lodash\";\nimport { Components, registerComponent } from \"@reactioncommerce/reaction-components\";\nimport ReactionAlerts from \"/imports/plugins/core/layout/client/templates/layout/alerts/inlineAlerts\";\nimport { Reaction, i18next } from \"/client/api\";\nimport { getDefaultUserInviteGroup } from \"../helpers/accountsHelper\";\n\n/**\n * @summary React component to display admin invite form\n * @memberof Accounts\n * @extends {Component}\n * @property {Function} canInviteToGroup\n * @property {Array} groups\n */\nclass AdminInviteForm extends Component {\n  static propTypes = {\n    canInviteToGroup: PropTypes.func,\n    groups: PropTypes.array\n  };\n\n  constructor(props) {\n    super(props);\n    const { groups } = props;\n\n    this.state = {\n      alertId: \"admin-invite-form\",\n      groups,\n      name: \"\",\n      email: \"\",\n      group: getDefaultUserInviteGroup(groups)\n    };\n\n    this.onChange = this.onChange.bind(this);\n    this.handleSubmit = this.handleSubmit.bind(this);\n  }\n\n  componentWillReceiveProps(nextProps) {\n    const { groups } = nextProps;\n    this.setState({ groups, group: getDefaultUserInviteGroup(groups) });\n  }\n\n  onChange(event) {\n    this.setState({ [event.target.name]: event.target.value });\n  }\n\n  handleGroupSelect = (event, group) => {\n    this.setState({ group });\n  };\n\n  removeAlert = (oldAlert) => this.setState({\n    alertArray: this.state.alertArray.filter((alert) => !_.isEqual(alert, oldAlert))\n  });\n\n  handleSubmit(event) {\n    event.preventDefault();\n    const { name, email, group, alertId } = this.state;\n    const alertOptions = { placement: alertId, id: alertId, autoHide: 4000 };\n\n    // if no group is selected, show alert that group is required to send invitation\n    if (!group._id) {\n      return ReactionAlerts.add(\n        \"A group is required to invite an admin\",\n        \"danger\",\n        Object.assign({}, alertOptions, { i18nKey: \"admin.groupsInvite.groupRequired\" })\n      );\n    }\n\n    const options = { email, name, shopId: Reaction.getShopId(), groupId: group._id };\n    return Meteor.call(\"accounts/inviteShopMember\", options, (error, result) => {\n      if (error) {\n        let messageKey;\n        // switching to use of package i18n keys (groupsInvite. namespace)\n        if (error.reason === \"Unable to send invitation email.\") {\n          messageKey = \"admin.groupsInvite.unableToSendInvitationEmail\";\n        } else if (error.reason === \"cannot directly invite owner\") {\n          messageKey = \"admin.groupsInvite.inviteOwnerError\";\n        } else if (error.reason === \"cannot invite to group\") {\n          messageKey = \"admin.groupsInvite.cannotInvite\";\n        } else if (error.reason === \"Need to set a username or email\") {\n          messageKey = \"admin.groupsInvite.NeedToSetUsernameOrEmail\";\n        } else {\n          messageKey = \"admin.groupsInvite.errorSendingInvite\";\n        }\n        ReactionAlerts.add(error.reason, \"danger\", Object.assign({}, alertOptions, { i18nKey: messageKey }));\n      }\n\n      if (result) {\n        this.setState({ name: \"\", email: \"\" });\n        Alerts.toast(i18next.t(\"accountsUI.info.invitationSent\"), \"success\");\n      }\n    });\n  }\n\n  renderDropDownButton() {\n    const { group } = this.state;\n\n    if (!group._id) {\n      return null;\n    }\n    const buttonElement = (opt) => (\n      <Components.Button bezelStyle=\"solid\" label={group.name && _.startCase(group.name)} >\n        &nbsp;\n        {opt && opt.length && // add icon only if there's a list of options\n          <i className=\"fa fa-chevron-down\" />\n        }\n      </Components.Button>\n    );\n\n    // current selected option and \"owner\" should not show in list options\n    const dropOptions = this.state.groups.filter((grp) => grp._id !== group._id);\n    if (!dropOptions.length) { return buttonElement(); } // do not use dropdown if only one option\n\n    return (\n      <Components.DropDownMenu\n        buttonElement={buttonElement(dropOptions)}\n        onChange={this.handleGroupSelect}\n        attachment=\"top right\"\n        targetAttachment=\"bottom right\"\n      >\n        {dropOptions\n          .map((grp, index) => (\n            <Components.MenuItem\n              key={index}\n              label={_.startCase(grp.name)}\n              selectLabel={_.startCase(grp.name)}\n              value={grp}\n            />\n          ))}\n      </Components.DropDownMenu>\n    );\n  }\n\n  renderForm() {\n    return (\n      <div className=\"admin-invite-form\">\n        <Components.Alerts placement={this.state.alertId} id={this.state.alertId} onAlertRemove={this.removeAlert} />\n        <div className=\"panel-body\">\n          <form className=\"\">\n            <div className=\"form-group\">\n              <Components.TextField\n                i18nKeyLabel=\"accountsUI.name\"\n                label=\"Name\"\n                name=\"name\"\n                id=\"member-form-name\"\n                type=\"text\"\n                i18nKeyPlaceholder=\"admin.groupsInvite.name\"\n                value={this.state.name}\n                onChange={this.onChange}\n              />\n            </div>\n            <div className=\"form-group\">\n              <Components.TextField\n                i18nKeyLabel=\"accountsUI.email\"\n                label=\"Email\"\n                name=\"email\"\n                id=\"member-form-email\"\n                type=\"text\"\n                i18nKeyPlaceholder=\"admin.groupsInvite.email\"\n                value={this.state.email}\n                onChange={this.onChange}\n              />\n            </div>\n            <div className=\"form-group action-select\">\n              {this.renderDropDownButton()}\n              <div className=\"form-btns add-admin justify\">\n                <Components.Button\n                  status=\"primary\"\n                  buttonType=\"submit\"\n                  onClick={this.handleSubmit}\n                  bezelStyle=\"solid\"\n                  i18nKeyLabel=\"accountsUI.info.sendInvitation\"\n                  label=\"Send Invitation\"\n                />\n              </div>\n            </div>\n          </form>\n        </div>\n      </div>\n    );\n  }\n\n  render() {\n    return (\n      <Components.Card>\n        <Components.CardHeader\n          actAsExpander={true}\n          data-i18n=\"accountsUI.info.addAdminUser\"\n          title=\"Add Admin User\"\n          id=\"accounts\"\n        />\n        <Components.CardBody expandable={true}>\n          {this.renderForm()}\n        </Components.CardBody>\n      </Components.Card>\n    );\n  }\n}\n\nregisterComponent(\"AdminInviteForm\", AdminInviteForm);\n\nexport default AdminInviteForm;\n","import { Meteor } from \"meteor/meteor\";\nimport _ from \"lodash\";\nimport React, { Component } from \"react\";\nimport classnames from \"classnames\";\nimport PropTypes from \"prop-types\";\nimport { Components } from \"@reactioncommerce/reaction-components\";\nimport ReactionAlerts from \"/imports/plugins/core/layout/client/templates/layout/alerts/inlineAlerts\";\nimport { Reaction } from \"/client/api\";\nimport { groupPermissions } from \"../helpers/accountsHelper\";\n\n/**\n * @summary React component to display edit group panel\n * @memberof Accounts\n * @extends {Component}\n * @property {Array} accounts\n * @property {Array} groups\n * @property {Function} onChangeGroup\n * @property {Array} packages\n * @property {Object} selectedGroup\n */\nclass EditGroup extends Component {\n  static propTypes = {\n    accounts: PropTypes.array,\n    groups: PropTypes.array,\n    onChangeGroup: PropTypes.func,\n    packages: PropTypes.array,\n    selectedGroup: PropTypes.object\n  };\n\n  constructor(props) {\n    super(props);\n    const { accounts, selectedGroup, groups } = props;\n    const alertId = \"edit-group-comp\";\n\n    this.state = {\n      alertOptions: { placement: alertId, id: alertId, autoHide: 4000 },\n      selectedGroup: selectedGroup || {},\n      isEditing: false,\n      groups,\n      accounts\n    };\n  }\n\n  componentWillReceiveProps(nextProps) {\n    const { groups, selectedGroup } = nextProps;\n    this.setState({ groups, selectedGroup });\n  }\n\n  selectGroup = (grp) => (event) => {\n    event.preventDefault();\n    if (this.props.onChangeGroup) {\n      this.props.onChangeGroup(grp);\n    }\n    this.setState({ isEditing: false });\n  };\n\n  groupListClass = (grp) => classnames({\n    \"groups-item-selected\": grp._id === this.state.selectedGroup._id,\n    \"groups-list\": true\n  });\n\n  removeAlert = (oldAlert) => this.setState({\n    alertArray: this.state.alertArray.filter((alert) => !_.isEqual(alert, oldAlert))\n  });\n\n  createGroup = (groupData) => {\n    Meteor.call(\"group/createGroup\", groupData, Reaction.getShopId(), (err, res) => {\n      if (err) {\n        return ReactionAlerts.add(\n          err.reason,\n          \"danger\",\n          Object.assign({}, this.state.alertOptions, { i18nKey: \"admin.settings.createGroupError\" })\n        );\n      }\n\n      if (this.props.onChangeGroup) {\n        this.props.onChangeGroup(res.group);\n      }\n\n      ReactionAlerts.add(\n        \"Created successfully\",\n        \"success\",\n        Object.assign({}, this.state.alertOptions, { i18nKey: \"admin.settings.createGroupSuccess\" })\n      );\n\n      this.setState({ isEditing: false });\n    });\n  };\n\n  updateGroup = (groupId, groupData) => {\n    Meteor.call(\"group/updateGroup\", groupId, groupData, Reaction.getShopId(), (err, res) => {\n      if (err) {\n        return ReactionAlerts.add(\n          err.reason,\n          \"danger\",\n          Object.assign({}, this.state.alertOptions, { i18nKey: \"admin.settings.updateGroupError\" })\n        );\n      }\n\n      if (this.props.onChangeGroup) {\n        this.props.onChangeGroup(res.group);\n      }\n\n      ReactionAlerts.add(\n        \"Created successfully\",\n        \"success\",\n        Object.assign({}, this.state.alertOptions, { i18nKey: \"admin.settings.updateGroupSuccess\" })\n      );\n\n      this.setState({ isEditing: false });\n    });\n  };\n\n  showForm = ((grp) = {}) => (e) => {\n    e.preventDefault();\n    e.stopPropagation();\n    this.setState({ isEditing: true, selectedGroup: grp });\n  };\n\n  renderGroupForm = () => {\n    if (!this.state.isEditing) {\n      return null;\n    }\n    if (_.isEmpty(this.state.selectedGroup)) {\n      return (\n        <Components.GroupForm\n          submitLabel=\"Create Group\"\n          i18nKeyLabel=\"admin.groups.create\"\n          group={this.state.selectedGroup}\n          createGroup={this.createGroup}\n        />\n      );\n    }\n    return (\n      <Components.GroupForm\n        className=\"update-form\"\n        submitLabel=\"Update Group\"\n        i18nKeyLabel=\"admin.groups.update\"\n        group={this.state.selectedGroup}\n        updateGroup={this.updateGroup}\n      />\n    );\n  };\n\n  renderGroups() {\n    return (\n      <Components.List>\n        {this.state.groups.map((grp, index) => (\n          <div key={index} className={this.groupListClass(grp)}>\n            <Components.ListItem label={grp.name} onClick={this.selectGroup(grp)} listItemClassName=\"flex flex-justify-spaceBetween\">\n              <Components.IconButton\n                icon=\"fa fa-pencil\"\n                onClick={this.showForm(grp)}\n              />\n            </Components.ListItem>\n          </div>\n        ))}\n        <Components.ListItem label=\"New Group\" i18nKeyLabel=\"admin.groups.newGroup\" onClick={this.showForm()}>\n          <i className=\"fa fa-plus\" />\n        </Components.ListItem>\n      </Components.List>\n    );\n  }\n\n  renderPermissionsList = () => {\n    if (this.state.isEditing) {\n      return null;\n    }\n    return (\n      <Components.PermissionsList\n        permissions={groupPermissions(this.props.packages)}\n        group={this.state.selectedGroup}\n        updateGroup={this.updateGroup}\n      />\n    );\n  };\n\n  render() {\n    const alertId = this.state.alertOptions.id;\n    return (\n      <div className=\"edit-group-container\">\n        <Components.Card>\n          <Components.CardHeader actAsExpander={true} i18nKeyTitle=\"admin.groups.editGroups\" title=\"Edit Groups\" />\n          <Components.CardBody expandable={true}>\n            <div className=\"settings\">\n              <Components.Alerts placement={alertId} id={alertId} onAlertRemove={this.removeAlert} />\n              {this.renderGroups()}\n              {this.renderGroupForm()}\n              {this.renderPermissionsList()}\n            </div>\n          </Components.CardBody>\n        </Components.Card>\n      </div>\n    );\n  }\n}\n\nexport default EditGroup;\n","import React, { Component } from \"react\";\nimport PropTypes from \"prop-types\";\nimport classnames from \"classnames\";\nimport { Components } from \"@reactioncommerce/reaction-components\";\nimport { Button, TextField, Translation } from \"/imports/plugins/core/ui/client/components\";\n\nclass Forgot extends Component {\n  static propTypes = {\n    credentials: PropTypes.object,\n    isDisabled: PropTypes.bool,\n    isLoading: PropTypes.bool,\n    loginFormMessages: PropTypes.func,\n    messages: PropTypes.object,\n    onError: PropTypes.func,\n    onFormSubmit: PropTypes.func,\n    onSignInClick: PropTypes.func,\n    uniqueId: PropTypes.string\n  }\n\n  constructor(props) {\n    super(props);\n\n    this.state = {\n      email: props.credentials.email\n    };\n\n    this.handleFieldChange = this.handleFieldChange.bind(this);\n    this.handleSubmit = this.handleSubmit.bind(this);\n  }\n\n  handleFieldChange = (event, value, field) => {\n    this.setState({\n      [field]: value\n    });\n  }\n\n  handleSubmit = (event) => {\n    if (this.props.onFormSubmit) {\n      this.props.onFormSubmit(event, this.state.email);\n    }\n  }\n\n  renderFormMessages() {\n    if (this.props.loginFormMessages) {\n      return (\n        <div>\n          {this.props.loginFormMessages()}\n        </div>\n      );\n    }\n  }\n\n  renderEmailErrors() {\n    if (this.props.onError(this.props.messages.errors && this.props.messages.errors.email)) {\n      return (\n        <span className=\"help-block\">\n          <Translation\n            defaultValue={this.props.messages.errors.email.reason}\n            i18nKey={this.props.messages.errors.email.i18nKeyReason}\n          />\n        </span>\n      );\n    }\n  }\n\n  renderSpinnerOnWait() {\n    if (this.props.isLoading === true) {\n      return (\n        <div style={{ textAlign: \"center\" }}>\n          <i className=\"fa fa-spinner fa-spin\" />\n        </div>\n      );\n    }\n    return (\n      <Button\n        className=\"btn-block\"\n        primary={true}\n        bezelStyle=\"solid\"\n        i18nKeyLabel=\"accountsUI.resetYourPassword\"\n        label=\"Reset Your Password\"\n        type=\"submit\"\n        eventAction=\"reset-password\"\n        disabled={this.props.isDisabled}\n      />\n    );\n  }\n\n  render() {\n    const emailClasses = classnames({\n      \"form-group\": true,\n      \"form-group-email\": true,\n      \"has-error has-feedback\": this.props.onError(this.props.messages.errors && this.props.messages.errors.email)\n    });\n\n    return (\n      <div>\n        <div className=\"loginForm-title\">\n          <h2>\n            <Translation defaultValue=\"Reset your password\" i18nKey=\"accountsUI.resetYourPassword\" />\n          </h2>\n        </div>\n\n        <form name=\"loginForm\" onSubmit={this.handleSubmit} noValidate>\n\n          {this.renderFormMessages()}\n\n          <div className={emailClasses}>\n            <TextField\n              i18nKeyLabel=\"accountsUI.emailAddress\"\n              label=\"Email\"\n              name=\"email\"\n              type=\"email\"\n              id={`email-${this.props.uniqueId}`}\n              value={this.state.email}\n              onChange={this.handleFieldChange}\n            />\n            {this.renderEmailErrors()}\n          </div>\n\n          <div className=\"form-group\">\n            {this.renderSpinnerOnWait()}\n          </div>\n\n          <div className=\"form-group\">\n            <Components.Button\n              tagName=\"span\"\n              className={{\n                \"btn\": false,\n                \"btn-default\": false\n              }}\n              label=\"Sign In\"\n              i18nKeyLabel=\"accountsUI.signIn\"\n              data-event-category=\"accounts\"\n              onClick={this.props.onSignInClick}\n            />\n          </div>\n\n        </form>\n      </div>\n    );\n  }\n}\n\nexport default Forgot;\n","import React, { Component } from \"react\";\nimport PropTypes from \"prop-types\";\nimport { Components, registerComponent } from \"@reactioncommerce/reaction-components\";\n\nclass GroupForm extends Component {\n  static propTypes = {\n    createGroup: PropTypes.func,\n    group: PropTypes.object,\n    i18nKeyLabel: PropTypes.string,\n    submitLabel: PropTypes.string,\n    updateGroup: PropTypes.func\n  };\n\n  constructor(props) {\n    super(props);\n    const { name, description } = props.group;\n\n    this.state = {\n      name: name || \"\",\n      description: description || \"\"\n    };\n  }\n\n  componentWillReceiveProps(nextProps) {\n    const { name, description } = nextProps.group;\n    this.setState({ name, description });\n  }\n\n  onChange = (event) => {\n    this.setState({ [event.target.name]: event.target.value });\n  };\n\n  handleSubmit = (event) => {\n    event.preventDefault();\n    if (this.props.createGroup) {\n      return this.props.createGroup(this.state);\n    }\n    if (this.props.updateGroup) {\n      return this.props.updateGroup(this.props.group._id, this.state);\n    }\n  };\n\n  render() {\n    return (\n      <div className=\"panel panel-default\">\n        <div className=\"panel-body\">\n          <form className=\"add-group\">\n            <div className=\"form-group\">\n              <Components.TextField\n                i18nKeyLabel=\"admin.groups.name\"\n                label=\"Name\"\n                name=\"name\"\n                id=\"add-group-name\"\n                type=\"text\"\n                value={this.state.name}\n                onChange={this.onChange}\n              />\n            </div>\n            <div className=\"form-group\">\n              <Components.TextField\n                i18nKeyLabel=\"admin.groups.description\"\n                label=\"Description\"\n                name=\"description\"\n                id=\"add-group-description\"\n                type=\"text\"\n                value={this.state.description}\n                onChange={this.onChange}\n              />\n            </div>\n            <div className=\"justify\">\n              <Components.Button\n                status=\"primary\"\n                buttonType=\"submit\"\n                onClick={this.handleSubmit}\n                bezelStyle=\"solid\"\n                i18nKeyLabel={this.props.i18nKeyLabel}\n                label={this.props.submitLabel}\n              />\n            </div>\n          </form>\n        </div>\n      </div>\n    );\n  }\n}\n\nregisterComponent(\"GroupForm\", GroupForm);\n\nexport default GroupForm;\n","import React from \"react\";\nimport PropTypes from \"prop-types\";\nimport { Components, registerComponent } from \"@reactioncommerce/reaction-components\";\n\nconst GroupHeader = ({ columnName }) => {\n  const showSortItems = false; // to be used to show sort icons. When filters fields are available, we'll show icons\n\n  if (columnName === \"name\") {\n    return (\n      <div className=\"group-header-name\">\n        {showSortItems && <span className=\"name-cell\"><Components.Checkbox /></span>}\n        <Components.Translation className=\"name-cell\" defaultValue=\"Name\" i18nKey=\"admin.groups.name\" />\n        {showSortItems && <Components.Icon icon=\"chevron-down\" />}\n      </div>\n    );\n  }\n  if (columnName === \"email\") {\n    return (\n      <div className=\"group-header-email\">\n        <Components.Translation className=\"content-cell\" defaultValue=\"Email\" i18nKey=\"admin.groups.email\" />\n        {showSortItems && <Components.Icon icon=\"chevron-down\" />}\n      </div>\n    );\n  }\n  if (columnName === \"createdAt\") {\n    return (\n      <div className=\"group-header created-at\">\n        <Components.Translation className=\"content-cell\" defaultValue=\"Last Active\" i18nKey=\"admin.groups.lastActive\" />\n        {showSortItems && <Components.Icon icon=\"chevron-down\" />}\n      </div>\n    );\n  }\n  return null;\n};\n\nGroupHeader.propTypes = {\n  columnName: PropTypes.string,\n  numberOfRows: PropTypes.number\n};\n\nregisterComponent(\"GroupHeader\", GroupHeader);\n\nexport default GroupHeader;\n","import React from \"react\";\nimport PropTypes from \"prop-types\";\nimport classnames from \"classnames\";\nimport { Components, registerComponent } from \"@reactioncommerce/reaction-components\";\nimport { SortableTable } from \"/imports/plugins/core/ui/client/components\";\n\nconst GroupsTable = (props) => {\n  const { group } = props;\n  const fields = [\"name\", \"email\", \"createdAt\", \"dropdown\", \"button\"];\n\n  const tableClass = (length) => classnames({\n    \"accounts-group-table\": true,\n    \"empty-table\": !length\n  });\n\n  const columnMetadata = fields.map((columnName) => ({\n    Header: <Components.GroupHeader columnName={columnName} numberOfRows={group.users && group.users.length} />,\n    accessor: \"\",\n    // TODO: Review this line - copied disable line from shippo carriers.js\n    Cell: (data) => { // eslint-disable-line\n      return <Components.GroupsTableCell account={data.value} columnName={columnName} {...props} />;\n    }\n  }));\n\n  return (\n    <Components.List>\n      <Components.ListItem label={group.name} />\n      <div className={tableClass(group.users.length)}>\n        <SortableTable\n          data={group.users}\n          columnMetadata={columnMetadata}\n          filteredFields={fields}\n          filterType=\"none\"\n          showFilter={true}\n          isSortable={false}\n        />\n      </div>\n    </Components.List>\n  );\n};\n\nGroupsTable.propTypes = {\n  accounts: PropTypes.array,\n  group: PropTypes.object,\n  groups: PropTypes.array,\n  onGroupSelect: PropTypes.func\n};\n\nregisterComponent(\"GroupsTable\", GroupsTable);\n\nexport default GroupsTable;\n","import React from \"react\";\nimport PropTypes from \"prop-types\";\nimport { Components, registerComponent, withPermissions } from \"@reactioncommerce/reaction-components\";\n\n/**\n * @summary React stateless component for \"remove from group\" button for groupTable\n * @memberof Accounts\n * @example <Components.GroupsTableButton {...{ account, group, handleRemoveUserFromGroup }} />\n * @param {Object} props - React PropTypes\n * @property {Object} account - User account object\n * @property {Object} group - Group data\n * @property {Function} handleRemoveUserFromGroup - function to call on button click\n * @property {Boolean} hasPermissions - true or false depending on if user is granted access\n * @return {Node} React node containing wrapped button\n */\nconst GroupsTableButton = ({ account, group, handleRemoveUserFromGroup, hasPermissions }) => {\n  if (group.slug === \"owner\") {\n    return null;\n  }\n\n  if (!hasPermissions) {\n    return null;\n  }\n\n  return (\n    <div className=\"group-table-button\">\n      <Components.Button\n        status=\"danger\"\n        onClick={handleRemoveUserFromGroup(account, group._id)}\n        bezelStyle=\"solid\"\n        i18nKeyLabel=\"admin.groups.remove\"\n        label=\"Remove\"\n      />\n    </div>\n  );\n};\n\nGroupsTableButton.propTypes = {\n  account: PropTypes.object,\n  group: PropTypes.object, // current group in interation\n  handleRemoveUserFromGroup: PropTypes.func,\n  hasPermissions: PropTypes.bool\n};\n\nregisterComponent(\"GroupsTableButton\", GroupsTableButton, withPermissions({ roles: [\"accounts\"] }));\n\nexport default GroupsTableButton;\n","import { Meteor } from \"meteor/meteor\";\nimport React from \"react\";\nimport _ from \"lodash\";\nimport PropTypes from \"prop-types\";\nimport { Components, registerComponent, withMoment } from \"@reactioncommerce/reaction-components\";\nimport { Reaction } from \"/client/api\";\nimport { getUserAvatar } from \"/imports/plugins/core/accounts/client/helpers/helpers\";\n\nconst GroupsTableCell = (props) => {\n  const {\n    account,\n    columnName,\n    group,\n    adminGroups,\n    handleRemoveUserFromGroup,\n    handleUserGroupChange,\n    moment\n  } = props;\n\n  const email = _.get(account, \"emails[0].address\");\n  const groups = adminGroups;\n  const userAvatar = getUserAvatar(account);\n  const createdAt = (moment && moment(account.createdAt).format(\"MMM Do\")) || account.createdAt.toLocaleString();\n\n  if (columnName === \"name\") {\n    // use first part of email, if account has no name\n    const name = account.name || email.split(\"@\")[0];\n    return (\n      <div className=\"table-cell body-first\">\n        {userAvatar}\n        <span><b>{name}</b></span>\n      </div>\n    );\n  }\n\n  if (columnName === \"email\") {\n    return (\n      <div className=\"table-cell body\">\n        <span>{email}</span>\n      </div>\n    );\n  }\n\n  if (columnName === \"createdAt\") {\n    return (\n      <div className=\"table-cell body created-at\">\n        <span>\n          {createdAt}\n        </span>\n      </div>\n    );\n  }\n\n  if (columnName === \"dropdown\") {\n    const groupName = <span className=\"group-dropdown\">{_.startCase(groups[0].name)}</span>;\n    const ownerGroup = groups.find((grp) => grp.slug === \"owner\") || {};\n    const hasOwnerAccess = Reaction.hasPermission(\"owner\", Meteor.userId(), Reaction.getShopId());\n\n    if (groups.length === 1) {\n      return groupName;\n    }\n\n    if (group.slug === \"owner\") {\n      return groupName;\n    }\n\n    const { onMethodDone, onMethodLoad } = props;\n    const dropDownButton = (opt) => ( // eslint-disable-line\n      <div className=\"group-dropdown\">\n        <Components.Button bezelStyle=\"solid\" label={group.name && _.startCase(group.name)}>\n          &nbsp;\n          {opt && opt.length > 1 && // add icon only if there's more than the current group\n            <i className=\"fa fa-chevron-down\" />\n          }\n        </Components.Button>\n      </div>\n    );\n\n    // Permission check. Remove owner option, if user is not current owner.\n    // Also remove groups user does not have roles to manage. This is also checked on the server\n    const dropOptions = groups\n      .filter((grp) => !((grp.slug === \"owner\" && !hasOwnerAccess)))\n      .filter((grp) => Reaction.canInviteToGroup({ group: grp })) || [];\n\n    if (dropOptions.length < 2) { return dropDownButton(); } // do not use dropdown if only one option\n\n    return (\n      <div className=\"group-dropdown\">\n        <Components.DropDownMenu\n          buttonElement={dropDownButton(groups)}\n          attachment=\"bottom right\"\n          targetAttachment=\"top right\"\n          onChange={handleUserGroupChange({ account, ownerGrpId: ownerGroup._id, onMethodDone, onMethodLoad })}\n        >\n          {dropOptions\n            .filter((grp) => grp._id !== group._id)\n            .map((grp, index) => (\n              <Components.MenuItem\n                key={index}\n                label={_.startCase(grp.name)}\n                selectLabel={_.startCase(grp.name)}\n                value={grp._id}\n              />\n            ))}\n        </Components.DropDownMenu>\n      </div>\n    );\n  }\n\n  if (columnName === \"button\") {\n    return <Components.GroupsTableButton {...{ account, group, handleRemoveUserFromGroup }} />;\n  }\n\n  return null;\n};\n\nGroupsTableCell.propTypes = {\n  account: PropTypes.object,\n  adminGroups: PropTypes.array, // all admin groups\n  columnName: PropTypes.string,\n  group: PropTypes.object, // current group in interation\n  handleRemoveUserFromGroup: PropTypes.func,\n  handleUserGroupChange: PropTypes.func,\n  moment: PropTypes.func,\n  onMethodDone: PropTypes.func,\n  onMethodLoad: PropTypes.func\n};\n\nregisterComponent(\"GroupsTableCell\", GroupsTableCell, withMoment);\n\nexport default withMoment(GroupsTableCell);\n","import React, { Component } from \"react\";\nimport { Random } from \"meteor/random\";\nimport PropTypes from \"prop-types\";\nimport { Components, registerComponent } from \"@reactioncommerce/reaction-components\";\n\nclass Login extends Component {\n  static propTypes = {\n    credentials: PropTypes.object,\n    loginFormCurrentView: PropTypes.string,\n    uniqueId: PropTypes.string\n  }\n\n  static defaultProps = {\n    credentials: {},\n    loginFormCurrentView: \"loginFormSignInView\",\n    get uniqueId() { return Random.id(); }\n  }\n\n  constructor(props) {\n    super(props);\n\n    this.state = {\n      currentView: props.loginFormCurrentView\n    };\n\n    this.showForgotPasswordView = this.showForgotPasswordView.bind(this);\n    this.showSignUpView = this.showSignUpView.bind(this);\n    this.showSignInView = this.showSignInView.bind(this);\n  }\n\n  showForgotPasswordView(event) {\n    event.preventDefault();\n\n    this.setState({\n      currentView: \"loginFormResetPasswordView\"\n    });\n  }\n\n  showSignUpView(event) {\n    event.preventDefault();\n\n    this.setState({\n      currentView: \"loginFormSignUpView\"\n    });\n  }\n\n  showSignInView(event) {\n    event.preventDefault();\n\n    this.setState({\n      currentView: \"loginFormSignInView\"\n    });\n  }\n\n  render() {\n    if (this.state.currentView === \"loginFormSignInView\" || this.state.currentView === \"loginFormSignUpView\") {\n      return (\n        <Components.AuthContainer\n          credentials={this.props.credentials}\n          uniqueId={this.props.uniqueId}\n          currentView={this.state.currentView}\n          onForgotPasswordClick={this.showForgotPasswordView}\n          onSignUpClick={this.showSignUpView}\n          onSignInClick={this.showSignInView}\n        />\n      );\n    } else if (this.state.currentView === \"loginFormResetPasswordView\") {\n      return (\n        <Components.ForgotPassword\n          credentials={this.props.credentials}\n          uniqueId={this.props.uniqueId}\n          currentView={this.state.currentView}\n          onSignInClick={this.showSignInView}\n        />\n      );\n    }\n  }\n}\n\nregisterComponent(\"Login\", Login);\n\nexport default Login;\n","import React, { Component } from \"react\";\nimport PropTypes from \"prop-types\";\nimport { Components, registerComponent } from \"@reactioncommerce/reaction-components\";\n\nclass LoginButtons extends Component {\n  static propTypes = {\n    capitalizeName: PropTypes.func,\n    currentView: PropTypes.string,\n    loginServices: PropTypes.func,\n    onSeparator: PropTypes.func,\n    onSocialClick: PropTypes.func\n  }\n\n  renderLoginButtons() {\n    const enabledServices = this.props.loginServices().filter((service) => service.enabled);\n\n    return (\n      <div>\n        {this.props.loginServices &&\n          enabledServices.map((service) => (\n            <Components.Button\n              key={service._id}\n              className={`btn-block provider-${service.name}`}\n              primary={true}\n              bezelStyle=\"solid\"\n              type=\"button\"\n              data-provider={`${service.name}`}\n              onClick={() => this.props.onSocialClick(service.name)}\n            >\n              <i className={`fa fa-${service.name}`} />\n\n              {this.props.currentView === \"loginFormSignInView\" &&\n                <span>\n                  &nbsp;\n                  <Components.Translation defaultValue=\"Sign in with\" i18nKey=\"accountsUI.signInWith\" />\n                </span>\n              }\n              {this.props.currentView === \"loginFormSignUpView\" &&\n                <span>\n                  <Components.Translation defaultValue=\"Sign up with\" i18nKey=\"accountsUI.signUpWith\" />\n                </span>\n              }\n\n              <span>\n                &nbsp;\n                <Components.Translation defaultValue={this.props.capitalizeName(service.name)} i18nKey={`social.${service.name}`} />\n              </span>\n            </Components.Button>\n          ))\n        }\n      </div>\n    );\n  }\n\n  renderSeparator() {\n    if (this.props.onSeparator()) {\n      return (\n        <div className=\"loginForm-seperator\">\n          <Components.Divider id=\"auth-divider\" label=\"or\" i18nKeyLabel=\"accountsUI.or\" />\n        </div>\n      );\n    }\n  }\n\n  render() {\n    return (\n      <div>\n        {this.renderLoginButtons()}\n        {this.renderSeparator()}\n      </div>\n    );\n  }\n}\n\nregisterComponent(\"LoginButtons\", LoginButtons);\n\nexport default LoginButtons;\n","import React from \"react\";\nimport PropTypes from \"prop-types\";\n\nconst LoginFormMessages = (props) => {\n  if (props.loginFormMessages) {\n    if (props.formMessages.info) {\n      return (\n        <div className=\"alert alert-info\">\n          <p>\n            {props.loginFormMessages()}\n          </p>\n        </div>\n      );\n    } else if (props.formMessages.alerts) {\n      return (\n        <div className=\"alert alert-danger\">\n          <p>\n            {props.loginFormMessages()}\n          </p>\n        </div>\n      );\n    }\n  }\n  return null;\n};\n\nLoginFormMessages.propTypes = {\n  formMessages: PropTypes.object,\n  loginFormMessages: PropTypes.func\n};\n\nexport default LoginFormMessages;\n","import React, { Component } from \"react\";\nimport PropTypes from \"prop-types\";\nimport { Reaction } from \"/client/api\";\nimport { Components } from \"@reactioncommerce/reaction-components\";\nimport { ValidEmail } from \"/lib/api\";\n\n/**\n * @summary React component to log in form in line\n * @memberof Accounts\n * @extends {Component}\n * @example <LoginInline\n         continueAsGuest={this.continueAsGuest}\n         renderEmailForm={this.state.renderEmailForm}\n         handleEmailSubmit={this.handleEmailSubmit}\n       />\n * @property {Function} continueAsGuest - On-click handler function\n * @property {Function} handleEmailSubmit - Required: E-mail submit function\n * @property {Boolean} renderEmailForm - Render e-mail form or not\n */\nclass LoginInline extends Component {\n  static propTypes = {\n    continueAsGuest: PropTypes.func,\n    handleEmailSubmit: PropTypes.func.isRequired,\n    renderEmailForm: PropTypes.bool\n  };\n\n  constructor(props) {\n    super(props);\n\n    this.state = {\n      email: \"\",\n      isValid: true\n    };\n  }\n\n  /**\n   * @method handleFieldChange\n   * @summary Handle setting state whenever the field on the form change\n   * @param {Event} event - the event that fired\n   * @param {String} value - the new value for the field\n   * @param {String} field - which field to modify it's value\n   * @return {undefined} undefined\n   */\n  handleFieldChange = (event, value, field) => {\n    this.setState({\n      [field]: value,\n      isValid: true\n    });\n  };\n\n  handleSubmit = (event) => {\n    event.preventDefault();\n\n    if (!ValidEmail(this.state.email)) {\n      this.setState({\n        isValid: false\n      });\n    } else {\n      this.setState({\n        isValid: true\n      });\n      this.props.handleEmailSubmit(event, this.state.email);\n    }\n  }\n\n  render() {\n    if (this.props.renderEmailForm) {\n      const validation = {\n        messages: {\n          email: {\n            message: \"Email is not valid\",\n            i18nKeyMessage: \"checkoutLogin.invalidEmail\"\n          }\n        }\n      };\n      return (\n        <div className=\"accounts-dialog accounts-inline\">\n          <form onSubmit={this.handleSubmit} className=\"add-email-input\">\n            <Components.Translation\n              defaultValue=\"Add your email address to receive order updates\"\n              i18nKey=\"{cartCompleted.registerGuest}\"\n            />\n            <div>\n              <Components.TextField\n                name=\"email\"\n                type=\"email\"\n                value={this.state.email}\n                onChange={this.handleFieldChange}\n                isValid={this.state.isValid}\n                validation={validation}\n              />\n              <Components.Button\n                type=\"submit\"\n                label=\"Add email\"\n                i18nKeyLabel=\"checkoutLogin.addEmail\"\n                bezelStyle={\"solid\"}\n              />\n            </div>\n          </form>\n        </div>\n      );\n    }\n    return (\n      <div className=\"accounts-dialog accounts-inline\">\n        {Reaction.allowGuestCheckout() &&\n          <div className=\"checkout-guest\">\n            <div className=\"guest-checkout\">\n              <p className=\"text-justify\">\n                <Components.Translation\n                  defaultValue=\"Continue as a guest, and you can create an account later.\"\n                  i18nKey=\"checkoutLogin.guestMessage\"\n                />\n              </p>\n              <Components.Button\n                status=\"primary\"\n                buttonType=\"submit\"\n                bezelStyle=\"solid\"\n                className=\"btn-block login-button single-login-button continue-guest\"\n                i18nKeyLabel=\"checkoutLogin.continueAsGuest\"\n                label=\"Continue as guest\"\n                onClick={this.props.continueAsGuest}\n              />\n            </div>\n          </div>\n        }\n        <div className=\"checkout-login\">\n          <Components.Login\n            loginFormCurrentView=\"loginFormSignUpView\"\n          />\n        </div>\n      </div>\n    );\n  }\n}\n\nexport default LoginInline;\n","import React, { Component } from \"react\";\nimport PropTypes from \"prop-types\";\nimport { Components } from \"@reactioncommerce/reaction-components\";\nimport { Reaction } from \"/client/api\";\nimport Login from \"./login\";\n\nconst iconStyle = {\n  margin: \"10px 10px 10px 6px\",\n  width: \"20px\",\n  fontSize: \"inherit\",\n  textAlign: \"center\"\n};\n\nconst menuStyle = {\n  padding: \"0px 10px 10px 10px\",\n  minWidth: 220,\n  minHeight: 50\n};\n\nclass MainDropdown extends Component {\n  static propTypes = {\n    adminShortcuts: PropTypes.object,\n    currentAccount: PropTypes.oneOfType([PropTypes.bool, PropTypes.object]),\n    handleChange: PropTypes.func,\n    userImage: PropTypes.object,\n    userName: PropTypes.string,\n    userShortcuts: PropTypes.object\n  }\n\n  buttonElement() {\n    const { userImage, userName } = this.props;\n    return (\n      <Components.Button containerStyle={{ color: \"#000\", fontWeight: \"normal\", letterSpacing: 0.8 }}>\n        <span className=\"main-dropdown-userImage\">{userImage}</span>\n        <span className=\"main-dropdown-userName\">{userName}</span>&nbsp;\n        <Components.Icon\n          icon={\"fa fa-caret-down\"}\n        />\n      </Components.Button>\n    );\n  }\n\n  renderAdminIcons() {\n    return (\n      Reaction.Apps(this.props.adminShortcuts).map((shortcut) => (\n        <Components.MenuItem\n          key={shortcut.packageId}\n          className=\"accounts-a-tag\"\n          label={shortcut.label}\n          i18nKeyLabel={shortcut.i18nKeyLabel}\n          icon={shortcut.icon}\n          iconStyle={iconStyle}\n          value={shortcut}\n        />\n      ))\n    );\n  }\n\n  renderUserIcons() {\n    return (\n      Reaction.Apps(this.props.userShortcuts).map((option) => (\n        <Components.MenuItem\n          key={option.packageId}\n          className=\"accounts-a-tag\"\n          label={option.label}\n          i18nKeyLabel={option.i18nKeyLabel}\n          icon={option.icon && option.icon}\n          iconStyle={iconStyle}\n          value={option}\n        />\n      ))\n    );\n  }\n\n  renderSignOutButton() {\n    return (\n      <Components.MenuItem\n        className=\"btn btn-primary btn-block accounts-btn-tag\"\n        label=\"Sign out\"\n        value=\"logout\"\n      />\n    );\n  }\n\n  renderSignInComponent() {\n    return (\n      <div className=\"accounts-dropdown\">\n        <div className=\"dropdown-toggle\" data-toggle=\"dropdown\" data-hover=\"dropdown\" data-delay=\"1000\">\n          <span>\n            <Components.Icon icon=\"fa fa-user\" />\n          </span>\n          <b className=\"caret\" />\n        </div>\n        <div\n          className=\"accounts-dialog accounts-layout dropdown-menu pull-right\"\n          style={{ padding: \"10px 20px\" }}\n        >\n          <Login />\n        </div>\n      </div>\n    );\n  }\n\n  render() {\n    return (\n      <div className=\"accounts\">\n        {this.props.currentAccount ?\n          <div style={{ paddingRight: 5 }}>\n            <Components.DropDownMenu\n              buttonElement={this.buttonElement()}\n              attachment=\"bottom right\"\n              targetAttachment=\"top right\"\n              menuStyle={menuStyle}\n              className=\"accounts-li-tag\"\n              onChange={this.props.handleChange}\n              constraints={[{\n                to: \"window\",\n                attachment: \"together\"\n              }]}\n            >\n              {this.renderUserIcons()}\n              {this.renderAdminIcons()}\n              {this.renderSignOutButton()}\n            </Components.DropDownMenu>\n          </div>\n          :\n          <div className=\"accounts dropdown\" role=\"menu\">\n            {this.renderSignInComponent()}\n          </div>\n        }\n      </div>\n    );\n  }\n}\n\nexport default MainDropdown;\n","import React, { Component } from \"react\";\nimport PropTypes from \"prop-types\";\nimport { Components, registerComponent } from \"@reactioncommerce/reaction-components\";\nimport { getInvitableGroups } from \"../helpers/accountsHelper\";\n\nclass ManageGroups extends Component {\n  static propTypes = {\n    accounts: PropTypes.array,\n    adminGroups: PropTypes.array,\n    group: PropTypes.object,\n    groups: PropTypes.array,\n    isAdmin: PropTypes.bool,\n    onChangeGroup: PropTypes.func\n  };\n\n  constructor(props) {\n    super(props);\n\n    this.state = {\n      accounts: props.accounts,\n      adminGroups: props.adminGroups,\n      group: props.group,\n      groups: props.groups\n    };\n  }\n\n  componentWillReceiveProps(nextProps) {\n    const { group, groups, adminGroups, accounts } = nextProps;\n    this.setState({ group, groups, accounts, adminGroups });\n  }\n\n  render() {\n    // this gets a list of groups the user can invite to, we show only those in the dropdown\n    // see doc for getInvitableGroups in helpers/accountsHelper.js\n    const groupsInvitable = getInvitableGroups(this.state.adminGroups);\n    return (\n      <div className=\"groups-form\">\n        { groupsInvitable && groupsInvitable.length &&\n          <Components.AdminInviteForm\n            {...this.props}\n            groups={groupsInvitable}\n          />\n        }\n        {this.props.isAdmin &&\n          <Components.EditGroup\n            // filter out owner group from editable groups.\n            // The edit group meteor method also prevents editing owner group\n            groups={this.state.groups.filter((grp) => grp.slug !== \"owner\")}\n            selectedGroup={this.state.group}\n            onChangeGroup={this.props.onChangeGroup}\n          />\n        }\n      </div>\n    );\n  }\n}\n\nregisterComponent(\"ManageGroups\", ManageGroups);\n\nexport default ManageGroups;\n","import React, { Component } from \"react\";\nimport PropTypes from \"prop-types\";\nimport CompletedOrder from \"../../../checkout/client/components/completedOrder\";\n\n/**\n * @summary React component to display an array of completed orders\n * @memberof Accounts\n * @extends {Component}\n * @property {Array} allOrdersInfo - array of orders\n * @property {Function} handeleDisplayMedia - function to display order image\n * @property {Boolean} isProfilePage - Profile or non-profile page\n */\nclass OrdersList extends Component {\n  static propTypes = {\n    allOrdersInfo: PropTypes.array,\n    isProfilePage: PropTypes.bool\n  }\n\n  render() {\n    const { allOrdersInfo } = this.props;\n\n    if (allOrdersInfo) {\n      return (\n        <div>\n          {allOrdersInfo.map((order) => {\n            const orderKey = order.orderId;\n            return (\n              <CompletedOrder\n                key={orderKey}\n                shops={order.shops}\n                order={order.order}\n                orderSummary={order.orderSummary}\n                paymentMethods={order.paymentMethods}\n                isProfilePage={this.props.isProfilePage}\n              />\n            );\n          })}\n        </div>\n      );\n    }\n    return (\n      <div className=\"alert alert-info\">\n        <span data-i18n=\"cartCompleted.noOrdersFound\">No orders found.</span>\n      </div>\n    );\n  }\n}\n\nexport default OrdersList;\n","import React, { Component } from \"react\";\nimport PropTypes from \"prop-types\";\nimport _ from \"lodash\";\nimport { Components, registerComponent } from \"@reactioncommerce/reaction-components\";\n\n// resolvePermissions - helper to resolve toggled permission(s).\n// It returns a list of all parent and child permissions when a parent permission is toggled.\nfunction resolvePermissions(permission) {\n  const result = [];\n\n  if (permission.name) {\n    result.push(permission.name);\n    for (const pkgPermissions of permission.permissions) {\n      result.push(pkgPermissions.permission);\n    }\n  } else {\n    result.push(permission.permission);\n  }\n\n  return result;\n}\n// helper to remove all array items in \"old\" from \"current\"\nfunction removePermissions(current, old) {\n  const currentArray = [...current];\n\n  old.forEach((val) => {\n    _.remove(currentArray, (item) => item === val);\n  });\n  return currentArray;\n}\n\nclass PermissionsList extends Component {\n  static propTypes = {\n    createGroup: PropTypes.func,\n    group: PropTypes.object,\n    permissions: PropTypes.array,\n    updateGroup: PropTypes.func\n  };\n\n  constructor(props) {\n    super(props);\n\n    this.state = {\n      group: props.group\n    };\n  }\n\n  componentWillReceiveProps(nextProps) {\n    this.setState({ group: nextProps.group });\n  }\n\n  togglePermission = (toggledPermission) => (event, checked) => {\n    const groupData = Object.assign({}, this.state.group);\n    const permissions = resolvePermissions(toggledPermission);\n    if (!groupData.permissions) {\n      groupData.permissions = [];\n    }\n    if (checked) {\n      groupData.permissions = _.uniq([...groupData.permissions, ...permissions]);\n    } else {\n      groupData.permissions = removePermissions(groupData.permissions, permissions);\n    }\n\n    if (this.props.updateGroup) {\n      return this.props.updateGroup(this.state.group._id, groupData);\n    }\n  };\n\n  checked = (permission) => {\n    if (_.includes(this.state.group.permissions, permission)) {\n      return true;\n    }\n    return false;\n  };\n\n  renderSubPermissions(permission) {\n    if (permission.permissions.length) {\n      return (\n        <div className=\"child-item\">\n          {permission.permissions.map((childPermission, index) => (\n            <Components.ListItem\n              key={`${childPermission.name}-${index}`}\n              actionType=\"switch\"\n              label={childPermission.label}\n              switchOn={this.checked(childPermission.permission)}\n              switchName={childPermission.permission}\n              onSwitchChange={this.togglePermission(childPermission)}\n            />\n          ))}\n        </div>\n      );\n    }\n    return null;\n  }\n\n  renderPermissions(permissions) {\n    const jsx = [];\n    permissions.forEach((permission, key) => {\n      jsx.push(<div className=\"permission-item\" key={`${permission.name}-${key}`}>\n        <Components.ListItem\n          label={permission.label}\n          actionType=\"switch\"\n          switchOn={this.checked(permission.name)}\n          switchName={permission.name}\n          onSwitchChange={this.togglePermission(permission)}\n        />\n        {this.renderSubPermissions(permission)}\n      </div>);\n    });\n    return jsx;\n  }\n\n  render() {\n    return (\n      <div className=\"permissions-list\">\n        {this.renderPermissions(_.compact(this.props.permissions))}\n      </div>\n    );\n  }\n}\n\nregisterComponent(\"PermissionsList\", PermissionsList);\n\nexport default PermissionsList;\n","import React, { Component } from \"react\";\nimport PropTypes from \"prop-types\";\nimport classnames from \"classnames\";\nimport { Components, registerComponent } from \"@reactioncommerce/reaction-components\";\n\n/**\n * @summary React component to display sign in form\n * @memberof Accounts\n * @extends {Component}\n * @property {Object} credentials\n * @property {Boolean} isLoading\n * @property {Function} loginFormMessages\n * @property {Object} messages\n * @property {Function} onError\n * @property {Function} onForgotPasswordClick\n * @property {Function} onFormSubmit\n * @property {Function} onSignUpClick\n * @property {String} uniqueId\n */\nclass SignIn extends Component {\n  static propTypes = {\n    credentials: PropTypes.object,\n    isLoading: PropTypes.bool,\n    loginFormMessages: PropTypes.func,\n    messages: PropTypes.object,\n    onError: PropTypes.func,\n    onForgotPasswordClick: PropTypes.func,\n    onFormSubmit: PropTypes.func,\n    onSignUpClick: PropTypes.func,\n    uniqueId: PropTypes.string\n  }\n\n  constructor(props) {\n    super(props);\n\n    this.state = {\n      email: props.credentials.email,\n      password: props.credentials.password\n    };\n\n    this.handleFieldChange = this.handleFieldChange.bind(this);\n    this.handleSubmit = this.handleSubmit.bind(this);\n  }\n\n  handleFieldChange = (event, value, field) => {\n    this.setState({\n      [field]: value\n    });\n  }\n\n  handleSubmit = (event) => {\n    if (this.props.onFormSubmit) {\n      this.props.onFormSubmit(event, this.state.email, this.state.password);\n    }\n  }\n\n  renderEmailErrors() {\n    if (this.props.onError(this.props.messages.errors && this.props.messages.errors.email)) {\n      return (\n        <span className=\"help-block\">\n          <Components.Translation\n            defaultValue={this.props.messages.errors.email.reason}\n            i18nKey={this.props.messages.errors.email.i18nKeyReason}\n          />\n        </span>\n      );\n    }\n  }\n  handleClick = (e) => {\n    e.preventDefault();\n    window.location.href = 'https://account.play.knowledge.io/sign-up/basic-information';\n  }\n  renderPasswordErrors() {\n    return (\n      <span className=\"help-block\">\n        {this.props.onError(this.props.messages.errors && this.props.messages.errors.password) &&\n          this.props.messages.errors.password.map((error, i) => (\n            <Components.Translation\n              key={i}\n              defaultValue={error.reason}\n              i18nKey={error.i18nKeyReason}\n            />\n          ))\n        }\n      </span>\n    );\n  }\n\n  renderFormMessages() {\n    if (this.props.loginFormMessages) {\n      return (\n        <div>\n          {this.props.loginFormMessages()}\n        </div>\n      );\n    }\n  }\n\n  renderSpinnerOnWait() {\n    if (this.props.isLoading === true) {\n      return (\n        <div style={{ textAlign: \"center\" }}>\n          <i className=\"fa fa-spinner fa-spin\" />\n        </div>\n      );\n    }\n    return (\n      <Components.Button\n        className=\"btn-block not-show\"\n        primary={true}\n        bezelStyle=\"solid\"\n        i18nKeyLabel=\"accountsUI.signIn\"\n        label=\"Sign In\"\n        type=\"submit\"\n        eventAction=\"submitSignInForm\"\n      />\n    );\n  }\n\n  render() {\n    const emailClasses = classnames({\n      \"form-group\": true,\n      \"form-group-email\": true,\n      \"has-error has-feedback\": this.props.onError(this.props.messages.errors && this.props.messages.errors.email)\n    });\n\n    const passwordClasses = classnames({\n      \"form-group\": true,\n      \"form-group-password\": true,\n      \"has-error has-feedback\": this.props.onError(this.props.messages.errors && this.props.messages.errors.password)\n    });\n    return (\n      <div>\n        <div className=\"loginForm-title\">\n          <h2>\n            <Components.Translation defaultValue=\"Sign In\" i18nKey=\"accountsUI.signIn\" />\n          </h2>\n        </div>\n\n        <form className=\"login-form\" onSubmit={this.handleSubmit} noValidate>\n\n          {this.renderFormMessages()}\n\n          <div className={emailClasses}>\n            <Components.TextField\n              i18nKeyLabel=\"accountsUI.emailAddress\"\n              label=\"Email\"\n              name=\"email\"\n              type=\"email\"\n              id={`email-${this.props.uniqueId}`}\n              value={this.state.email}\n              onChange={this.handleFieldChange}\n            />\n            {this.renderEmailErrors()}\n          </div>\n\n          <div className={passwordClasses}>\n            <Components.TextField\n              i18nKeyLabel=\"accountsUI.password\"\n              label=\"Password\"\n              name=\"password\"\n              type=\"password\"\n              id={`password-${this.props.uniqueId}`}\n              value={this.state.password}\n              onChange={this.handleFieldChange}\n            />\n            {this.renderPasswordErrors()}\n          </div>\n\n          <div className=\"form-group\">\n            {this.renderSpinnerOnWait()}\n          </div>\n\n          <div className=\"form-group flex flex-justify-spaceBetween\">\n            <Components.Button\n              tagName=\"span\"\n              className={{\n                \"btn\": false,\n                \"btn-default\": false,\n                \"forgot-pass\": true\n              }}\n              label=\"Reset Password\"\n              i18nKeyLabel=\"accountsUI.forgotPassword\"\n              data-event-category=\"accounts\"\n              onClick={this.props.onForgotPasswordClick}\n            />\n            <Components.Button\n              tagName=\"span\"\n              className={{\n                \"btn\": false,\n                \"btn-default\": false\n              }}\n              label=\"Register\"\n              i18nKeyLabel=\"accountsUI.signUp\"\n              data-event-category=\"accounts\"\n              onClick={this.handleClick}\n            />\n          </div>\n\n        </form>\n      </div>\n    );\n  }\n}\n\nregisterComponent(\"SignIn\", SignIn);\n\nexport default SignIn;\n","import React, { Component } from \"react\";\nimport PropTypes from \"prop-types\";\nimport classnames from \"classnames\";\nimport { Components, registerComponent } from \"@reactioncommerce/reaction-components\";\n\nclass SignUp extends Component {\n  static propTypes = {\n    credentials: PropTypes.object,\n    hasPasswordService: PropTypes.func,\n    isLoading: PropTypes.bool,\n    loginFormMessages: PropTypes.func,\n    messages: PropTypes.object,\n    onError: PropTypes.func,\n    onFormSubmit: PropTypes.func,\n    onSignInClick: PropTypes.func,\n    uniqueId: PropTypes.string\n  }\n\n  constructor(props) {\n    super(props);\n\n    this.state = {\n      email: props.credentials.email,\n      password: props.credentials.password\n    };\n\n    this.handleFieldChange = this.handleFieldChange.bind(this);\n    this.handleSubmit = this.handleSubmit.bind(this);\n  }\n\n  handleFieldChange = (event, value, field) => {\n    this.setState({\n      [field]: value\n    });\n  }\n\n  handleSubmit = (event) => {\n    if (this.props.onFormSubmit) {\n      this.props.onFormSubmit(event, this.state.email, this.state.password);\n    }\n  }\n  handleClick = (e) => {\n    e.preventDefault();\n    window.location.href = 'https://account.play.knowledge.io/sign-up/basic-information';\n  }\n  renderEmailErrors() {\n    if (this.props.onError(this.props.messages.errors && this.props.messages.errors.email)) {\n      return (\n        <span className=\"help-block\">\n          <Components.Translation\n            defaultValue={this.props.messages.errors.email.reason}\n            i18nKey={this.props.messages.errors.email.i18nKeyReason}\n          />\n        </span>\n      );\n    }\n  }\n\n  renderPasswordErrors() {\n    return (\n      <span className=\"help-block\">\n        {this.props.onError(this.props.messages.errors && this.props.messages.errors.password) &&\n          this.props.messages.errors.password.map((error, i) => (\n            <Components.Translation\n              key={i}\n              defaultValue={error.reason}\n              i18nKey={error.i18nKeyReason}\n            />\n          ))\n        }\n      </span>\n    );\n  }\n\n  renderFormMessages() {\n    if (this.props.loginFormMessages) {\n      return (\n        <div>\n          {this.props.loginFormMessages()}\n        </div>\n      );\n    }\n  }\n\n  renderSpinnerOnWait() {\n    if (this.props.isLoading === true) {\n      return (\n        <div style={{ textAlign: \"center\" }}>\n          <i className=\"fa fa-spinner fa-spin\" />\n        </div>\n      );\n    }\n    return (\n      <Components.Button\n        className=\"btn-block\"\n        primary={true}\n        bezelStyle=\"solid\"\n        i18nKeyLabel=\"accountsUI.signUpButton\"\n        label=\"Register\"\n        type=\"submit\"\n        onClick={this.handleClick}\n      />\n    );\n  }\n\n  renderForm(emailClasses, passwordClasses) {\n    if (this.props.hasPasswordService()) {\n      return (\n        <form className=\"login-form\" onSubmit={this.handleSubmit} noValidate>\n\n          {this.renderFormMessages()}\n\n          <div className={emailClasses}>\n            <Components.TextField\n              i18nKeyLabel=\"accountsUI.emailAddress\"\n              label=\"Email\"\n              name=\"email\"\n              type=\"email\"\n              id={`email-${this.props.uniqueId}`}\n              value={this.state.email}\n              onChange={this.handleFieldChange}\n            />\n            {this.renderEmailErrors()}\n          </div>\n\n          <div className={passwordClasses}>\n            <Components.TextField\n              i18nKeyLabel=\"accountsUI.password\"\n              label=\"Password\"\n              name=\"password\"\n              type=\"password\"\n              id={`password-${this.props.uniqueId}`}\n              value={this.state.password}\n              onChange={this.handleFieldChange}\n            />\n            {this.renderPasswordErrors()}\n          </div>\n\n          <div className=\"form-group\">\n            {this.renderSpinnerOnWait()}\n          </div>\n\n          <div className=\"form-group\">\n            <Components.Button\n              tagName=\"span\"\n              className={{\n                \"btn\": false,\n                \"btn-default\": false,\n                \"not-show\" : true\n              }}\n              label=\"Sign In\"\n              i18nKeyLabel=\"accountsUI.signIn\"\n              data-event-category=\"accounts\"\n              onClick={this.props.onSignInClick}\n            />\n          </div>\n        </form>\n      );\n    }\n  }\n\n  render() {\n    const emailClasses = classnames({\n      \"form-group\": true,\n      \"form-group-email\": true,\n      \"has-error has-feedback\": this.props.onError(this.props.messages.errors && this.props.messages.errors.email)\n    });\n\n    const passwordClasses = classnames({\n      \"form-group\": true,\n      \"form-group-password\": true,\n      \"has-error has-feedback\": this.props.onError(this.props.messages.errors && this.props.messages.errors.password)\n    });\n    return (\n      <div>\n        <div className=\"loginForm-title\">\n          <h2>\n            <Components.Translation defaultValue=\"Create an Account\" i18nKey=\"accountsUI.createAccount\" />\n          </h2>\n        </div>\n\n        {this.renderForm(emailClasses, passwordClasses)}\n\n      </div>\n    );\n  }\n}\n\nregisterComponent(\"SignUp\", SignUp);\n\nexport default SignUp;\n","import React, { Component } from \"react\";\nimport PropTypes from \"prop-types\";\nimport { Components } from \"@reactioncommerce/reaction-components\";\n\nclass UpdateEmail extends Component {\n  static propTypes = {\n    email: PropTypes.string,\n    handleUpdateEmail: PropTypes.func.isRequired,\n    uniqueId: PropTypes.string\n  }\n\n  constructor(props) {\n    super(props);\n\n    this.state = {\n      email: props.email,\n      showSpinner: false\n    };\n  }\n\n  handleFieldChange = (event, value, field) => {\n    this.setState({\n      [field]: value\n    });\n  }\n\n  handleSubmit = (event) => {\n    event.preventDefault;\n    this.setState({ showSpinner: true });\n    const options = {\n      newEmail: this.state.email,\n      oldEmail: this.props.email\n    };\n    this.props.handleUpdateEmail(options, () => this.setState({ showSpinner: false }));\n  }\n\n  render() {\n    const { showSpinner } = this.state;\n\n    return (\n      <div>\n        <Components.TextField\n          i18nKeyLabel=\"accountsUI.emailAddress\"\n          label=\"Email Address\"\n          name=\"email\"\n          type=\"email\"\n          id={`email-${this.props.uniqueId}`}\n          value={this.state.email}\n          onChange={this.handleFieldChange}\n        />\n        <Components.Button\n          bezelStyle={\"solid\"}\n          icon={showSpinner ? \"fa fa-spin fa-circle-o-notch\" : \"\"}\n          i18nKeyLabel={showSpinner ? \"accountsUI.updatingEmailAddress\" : \"accountsUI.updateEmailAddress\"}\n          label={showSpinner ? \"Updating Email Address\" : \"Update Email Address\"}\n          status={\"primary\"}\n          onClick={this.handleSubmit}\n          disabled={this.state.email === this.props.email}\n        />\n      </div>\n    );\n  }\n}\n\nexport default UpdateEmail;\n","import React, { Component } from \"react\";\nimport PropTypes from \"prop-types\";\nimport classnames from \"classnames\";\nimport { Components } from \"@reactioncommerce/reaction-components\";\n\nclass UpdatePasswordOverlay extends Component {\n  static propTypes = {\n    isDisabled: PropTypes.bool,\n    isOpen: PropTypes.bool,\n    loginFormMessages: PropTypes.func,\n    messages: PropTypes.object,\n    onCancel: PropTypes.func,\n    onError: PropTypes.func,\n    onFormSubmit: PropTypes.func,\n    type: PropTypes.string,\n    uniqueId: PropTypes.string\n  }\n\n  constructor() {\n    super();\n\n    this.state = {\n      password: \"\",\n      showSpinner: true\n    };\n\n    this.handleFieldChange = this.handleFieldChange.bind(this);\n    this.handleSubmit = this.handleSubmit.bind(this);\n    this.handleCancel = this.handleCancel.bind(this);\n  }\n\n  async componentWillMount() {\n    await this.setState({ showSpinner: false });\n  }\n\n  componentWillReceiveProps() {\n    this.setState({ showSpinner: false });\n  }\n\n  handleFieldChange = (event, value, field) => {\n    this.setState({\n      [field]: value\n    });\n  }\n\n  handleSubmit = (event) => {\n    if (this.props.onFormSubmit) {\n      this.props.onFormSubmit(event, this.state.password);\n    }\n  }\n\n  handleCancel = (event) => {\n    if (this.props.onCancel) {\n      this.props.onCancel(event);\n    }\n  }\n\n  renderFormMessages() {\n    if (this.props.loginFormMessages) {\n      return (\n        <div>\n          {this.props.loginFormMessages()}\n        </div>\n      );\n    }\n  }\n\n  renderPasswordErrors() {\n    return (\n      <span className=\"help-block\">\n        {this.props.onError(this.props.messages.errors && this.props.messages.errors.password) &&\n        this.props.messages.errors.password.map((error, i) => (\n          <Components.Translation\n            key={i}\n            defaultValue={error.reason}\n            i18nKey={error.i18nKeyReason}\n          />\n        ))\n        }\n      </span>\n    );\n  }\n\n  renderSpinnerOnWait() {\n    const { type } = this.props;\n    if (this.props.isDisabled === true) {\n      return (\n        <div className=\"col-sm-6\" style={{ textAlign: \"center\" }}>\n          <i className=\"fa fa-spinner fa-spin\"/>\n        </div>\n      );\n    }\n\n    if (type === \"setPassword\") {\n      return (\n        <div className=\"col-sm-6\">\n          <Components.Button\n            className=\"btn-block\"\n            primary={true}\n            bezelStyle=\"solid\"\n            i18nKeyLabel=\"accountsUI.setPassword\"\n            label=\"Set your password\"\n            type=\"submit\"\n          />\n        </div>\n      );\n    }\n\n    return (\n      <div className=\"col-sm-6\">\n        <Components.Button\n          className=\"btn-block\"\n          primary={true}\n          bezelStyle=\"solid\"\n          i18nKeyLabel=\"accountsUI.updatePasswordAndContinue\"\n          label=\"Update and continue\"\n          type=\"submit\"\n        />\n      </div>\n    );\n  }\n\n  renderSpinnerOnLoad() {\n    return (\n      <div className=\"spinner-container\">\n        <div className=\"spinner\"/>\n      </div>\n    );\n  }\n\n  renderPasswordResetText() {\n    const { type } = this.props;\n\n    if (type === \"setPassword\") {\n      return (\n        <Components.Translation defaultValue=\"Set Your Password\" i18nKey=\"accountsUI.setPassword\"/>\n      );\n    }\n\n    return (\n      <Components.Translation defaultValue=\"Update Your Password\" i18nKey=\"accountsUI.updateYourPassword\"/>\n    );\n  }\n\n  render() {\n    const passwordClasses = classnames({\n      \"form-group\": true,\n      \"has-error has-feedback\": this.props.onError(this.props.messages.errors && this.props.messages.errors.password)\n    });\n    const { showSpinner } = this.state;\n\n    return (\n      <div>\n        {this.props.isOpen === true &&\n        <div>\n          <div className=\"modal-backdrop fade in\" id={`modal-backdrop-${this.props.uniqueId}`}/>\n          <div className=\"modal fade in\" id={`modal-${this.props.uniqueId}`} style={{ display: \"block\" }}>\n            <div className=\"modal-dialog\">\n              {showSpinner ? this.renderSpinnerOnLoad() :\n                <form className=\"modal-content\" onSubmit={this.handleSubmit}>\n                  <div className=\"modal-header\">\n                    <h4 className=\"modal-title\">\n                      {this.renderPasswordResetText()}\n                    </h4>\n                  </div>\n\n                  <div className=\"modal-body\">\n                    <div className=\"login-form\">\n\n                      {this.renderFormMessages()}\n\n                      <div className={passwordClasses}>\n                        <Components.TextField\n                          i18nKeyLabel=\"accountsUI.password\"\n                          label=\"Password\"\n                          name=\"password\"\n                          type=\"password\"\n                          id={`password-${this.props.uniqueId}`}\n                          value={this.state.password}\n                          onChange={this.handleFieldChange}\n                        />\n                        {this.renderPasswordErrors()}\n                      </div>\n\n                    </div>\n                  </div>\n\n                  <div className=\"modal-footer\">\n                    {this.renderSpinnerOnWait()}\n\n                    <div className=\"col-sm-6\">\n                      <Components.Button\n                        className=\"btn-block\"\n                        status=\"danger\"\n                        bezelStyle=\"solid\"\n                        i18nKeyLabel=\"app.cancel\"\n                        label=\"Cancel\"\n                        type=\"button\"\n                        onClick={this.handleCancel}\n                        disabled={this.props.isDisabled}\n                      />\n                    </div>\n                  </div>\n\n                </form>\n              }\n            </div>\n          </div>\n        </div>}\n      </div>\n    );\n  }\n}\n\nexport default UpdatePasswordOverlay;\n","import React from \"react\";\nimport PropType from \"prop-types\";\nimport { Components } from \"@reactioncommerce/reaction-components\";\nimport classnames from \"classnames\";\n\nconst VerifyAccount = ({ error }) => {\n  const classNames = classnames({\n    \"fa\": true,\n    \"fa-times-circle-o\": !!error,\n    \"fa-check-circle-o\": !error\n  });\n\n  const style = {\n    color: error ? \"#f33\" : \"#49da49\",\n    fontSize: \"8rem\"\n  };\n\n  return (\n    <div className=\"container-fluid-sm\">\n      <div className=\"rui empty-view-message\">\n        <i className={classNames} style={style}/>\n        <p className=\"message\">\n          <Components.Translation\n            defaultValue={error ? error.reason : \"Email verified\"}\n            i18nKey={error ? error.i18nKey : \"accountsUI.info.emailVerified\"}\n          />\n        </p>\n      </div>\n    </div>\n  );\n};\n\nVerifyAccount.propTypes = {\n  error: PropType.object\n};\n\nexport default VerifyAccount;\n","import { compose, withProps } from \"recompose\";\nimport Alert from \"sweetalert2\";\nimport { registerComponent, composeWithTracker, withIsAdmin } from \"@reactioncommerce/reaction-components\";\nimport { Meteor } from \"meteor/meteor\";\nimport { Accounts, Groups } from \"/lib/collections\";\nimport { Reaction, i18next } from \"/client/api\";\nimport AccountsDashboard from \"../components/accountsDashboard\";\n\nconst handlers = {\n  handleUserGroupChange({ account, ownerGrpId, onMethodLoad, onMethodDone }) {\n    return (event, groupId) => {\n      if (onMethodLoad) { onMethodLoad(); }\n\n      if (groupId === ownerGrpId) {\n        return alertConfirm()\n          .then(({ value }) => {\n            if (value) {\n              return updateMethodCall(groupId);\n            }\n          })\n          .finally(() => {\n            if (onMethodDone) { onMethodDone(); }\n          });\n      }\n\n      return updateMethodCall(groupId);\n    };\n\n    function updateMethodCall(groupId) {\n      Meteor.call(\"group/addUser\", account._id, groupId, (err) => {\n        if (err) {\n          Alerts.toast(i18next.t(\"admin.groups.addUserError\", { err: err.message }), \"error\");\n        }\n        if (!err) {\n          Alerts.toast(i18next.t(\"admin.groups.addUserSuccess\"), \"success\");\n        }\n        if (onMethodDone) { onMethodDone(); }\n      });\n    }\n\n    function alertConfirm() {\n      let changeOwnerWarn = \"changeShopOwnerWarn\";\n      if (Reaction.getShopId() === Reaction.getPrimaryShopId()) {\n        changeOwnerWarn = \"changeMktOwnerWarn\";\n      }\n      return Alert({\n        title: i18next.t(\"admin.settings.changeOwner\"),\n        text: i18next.t(`admin.settings.${changeOwnerWarn}`),\n        type: \"warning\",\n        showCancelButton: true,\n        cancelButtonText: i18next.t(\"admin.settings.cancel\"),\n        confirmButtonText: i18next.t(\"admin.settings.continue\")\n      });\n    }\n  },\n\n  handleRemoveUserFromGroup(account, groupId) {\n    return () => {\n      alertConfirm()\n        .then(({ value }) => {\n          if (value) {\n            return removeMethodCall();\n          }\n          return false;\n        })\n        .catch(() => false);\n\n      function removeMethodCall() {\n        Meteor.call(\"group/removeUser\", account._id, groupId, (err) => {\n          if (err) {\n            return Alerts.toast(i18next.t(\"admin.groups.removeUserError\", { err: err.message }), \"error\");\n          }\n          return Alerts.toast(i18next.t(\"admin.groups.removeUserSuccess\"), \"success\");\n        });\n      }\n    };\n\n    function alertConfirm() {\n      return Alert({\n        title: i18next.t(\"admin.settings.removeUser\"),\n        text: i18next.t(\"admin.settings.removeUserWarn\"),\n        type: \"warning\",\n        showCancelButton: true,\n        cancelButtonText: i18next.t(\"admin.settings.cancel\"),\n        confirmButtonText: i18next.t(\"admin.settings.continue\")\n      });\n    }\n  }\n};\n\nconst composer = (props, onData) => {\n  const shopId = Reaction.getShopId();\n  const adminUserSub = Meteor.subscribe(\"Accounts\", null);\n  const grpSub = Meteor.subscribe(\"Groups\", { shopId });\n\n  if (adminUserSub.ready() && grpSub.ready()) {\n    const groups = Groups.find({\n      shopId: Reaction.getShopId()\n    }).fetch();\n\n    const adminQuery = {\n      [`roles.${shopId}`]: {\n        $in: [\"dashboard\"]\n      }\n    };\n\n    const adminUsers = Meteor.users.find(adminQuery, { fields: { _id: 1 } }).fetch();\n    const ids = adminUsers.map((user) => user._id);\n    const accounts = Accounts.find({ _id: { $in: ids } }).fetch();\n    const adminGroups = groups.reduce((admGrps, group) => {\n      if (group.slug !== \"customer\" && group.slug !== \"guest\") {\n        admGrps.push(group);\n      }\n      return admGrps;\n    }, []);\n\n    onData(null, { accounts, groups, adminGroups });\n  }\n};\n\nregisterComponent(\"AccountsDashboard\", AccountsDashboard, [\n  withIsAdmin,\n  composeWithTracker(composer),\n  withProps(handlers)\n]);\n\nexport default compose(\n  withIsAdmin,\n  composeWithTracker(composer),\n  withProps(handlers)\n)(AccountsDashboard);\n","import { compose, withProps } from \"recompose\";\nimport { Meteor } from \"meteor/meteor\";\nimport { Template } from \"meteor/templating\";\nimport { i18next, Logger } from \"/client/api\";\nimport { Countries } from \"/client/collections\";\nimport * as Collections from \"/lib/collections\";\nimport { registerComponent, composeWithTracker } from \"@reactioncommerce/reaction-components\";\nimport AddressBook from \"../components/addressBook\";\n\n\nconst handlers = {\n/**\n * @method updateAddress\n * @summary helper function that validates and updates an address in the account's addressBook via a meteor method.\n * @since 2.0.0\n * @param {Object} address - address to be updated.\n * @param{String} property - property to be updated.\n * @return {Promise}\n */\n  updateAddress(address, property, validateAddress = true) {\n    return new Promise((resolve, reject) => {\n      if (validateAddress) {\n        Meteor.call(\"accounts/validateAddress\", address, (error, result) => {\n          if (error || !result) {\n            let errorMessage = (error && error.message) || \"Validation Failed\";\n            if (error && error.error === \"validation-error\" && Array.isArray(error.details) && error.details.length) {\n              // Add details of first invalid field from SimpleSchema\n              errorMessage = error.details[0].message;\n            }\n            reject(i18next.t(\"addressBookAdd.failedToUpdateAddress\", { err: errorMessage }));\n            return;\n          } else if (result.validated === false && !result.suggestedAddress) {\n            reject(i18next.t(\"addressBookAdd.failedToUpdateAddress\", { err: \"Unable to fetch corrected address\" }));\n            return;\n          } else if (result.validated === false && result.suggestedAddress && result.formErrors && result.formErrors.length > 0) {\n            reject(i18next.t(\"addressBookAdd.failedToUpdateAddress\", { err: result.formErrors[0].summary }));\n            return;\n          } else if (result.validated === false && result.suggestedAddress) {\n            resolve(result);\n            return;\n          }\n          Meteor.call(\"accounts/addressBookUpdate\", address, null, property, (err, res) => {\n            if (err || !res) {\n              reject(i18next.t(\"addressBookGrid.somethingWentWrong\", { err: err.message }));\n            } else {\n              resolve(res);\n            }\n          });\n          return;\n        });\n      }\n      Meteor.call(\"accounts/addressBookUpdate\", address, null, property, (err, res) => {\n        if (err || !res) {\n          reject(i18next.t(\"addressBookGrid.somethingWentWrong\", { err: err.message }));\n        } else {\n          resolve(res);\n        }\n      });\n    });\n  },\n\n  /**\n * @method removeAddress\n * @summary helper function that updates an address in the account's addressBook via a meteor method.\n * @since 2.0.0\n * @param {String} _id - _id of address to be removed.\n * @return {Promise}\n */\n  removeAddress(_id) {\n    return new Promise((resolve, reject) => {\n      Meteor.call(\"accounts/addressBookRemove\", _id, (error, result) => {\n        if (error || !result) {\n          reject(i18next.t(\"addressBookGrid.cantRemoveThisAddress\", { err: error.message }));\n        } else {\n          resolve(result);\n        }\n      });\n    });\n  },\n\n  /**\n * @method addAddress\n * @summary helper function that validates and adds an address in the account's addressBook via a meteor method.\n * @since 2.0.0\n * @param {Object} address - address to be added.\n * @return {Promise}\n */\n  addAddress(address, validateAddress = true) {\n    return new Promise((resolve, reject) => {\n    // This address was tried for validation\n      if (validateAddress) {\n        Meteor.call(\"accounts/validateAddress\", address, (error, result) => {\n          if (error || !result) {\n            let errorMessage = (error && error.message) || \"Validation Failed\";\n            if (error && error.error === \"validation-error\" && Array.isArray(error.details) && error.details.length) {\n              // Add details of first invalid field from SimpleSchema\n              errorMessage = error.details[0].message;\n            }\n            reject(i18next.t(\"addressBookAdd.failedToAddAddress\", { err: errorMessage }));\n            return;\n          } else if (result.validated === false && !result.suggestedAddress) {\n            reject(i18next.t(\"addressBookAdd.failedToAddAddress\", { err: \"Unable to fetch corrected address\" }));\n            return;\n          } else if (result.validated === false && result.suggestedAddress && result.formErrors && result.formErrors.length > 0) {\n            reject(i18next.t(\"addressBookAdd.failedToAddAddress\", { err: result.formErrors[0].summary }));\n            return;\n          } else if (result.validated === false && result.suggestedAddress) {\n            resolve(result);\n            return;\n          }\n          Meteor.call(\"accounts/addressBookAdd\", address, (err, res) => {\n            if (err || !res) {\n              reject(i18next.t(\"addressBookAdd.failedToAddAddress\", { err: err.message }));\n            } else {\n              resolve(res);\n            }\n          });\n        });\n      } else {\n        Meteor.call(\"accounts/addressBookAdd\", address, (err, res) => {\n          if (err || !res) reject(i18next.t(\"addressBookAdd.failedToAddAddress\", { err: err.message }));\n          if (res) resolve(res);\n        });\n      }\n    });\n  },\n\n  markCart(address, isEnteredSelected) {\n    if (!isEnteredSelected) {\n      Meteor.call(\"accounts/markAddressValidationBypassed\", false, (error) => {\n        if (error) {\n          return Logger.error(error, \"Unable to mark the cart\");\n        }\n        Meteor.call(\"accounts/markTaxCalculationFailed\", false, (err) => {\n          if (err) {\n            return Logger.error(err, \"Unable to mark the cart\");\n          }\n        });\n      });\n    } else {\n      Meteor.call(\"accounts/markAddressValidationBypassed\", true, (error) => {\n        if (error) {\n          return Logger.error(error, \"Unable to mark the cart\");\n        }\n      });\n    }\n  },\n\n  /**\n * @method onError\n * @summary helper function that shows an error message in an alert toast.\n * @since 2.0.0\n * @param {Object} errorMessage - error message object.\n */\n  onError(errorMessage) {\n    Alerts.toast(errorMessage, \"error\");\n  }\n};\n\nfunction composer(props, onData) {\n  const handle = Meteor.subscribe(\"Accounts\", Meteor.userId());\n  if (!handle.ready()) {\n    return;\n  }\n  const account = Collections.Accounts.findOne({ _id: Meteor.userId() });\n  const { addressBook } = account.profile;\n  const countries = Countries.find().fetch();\n  const shop = Collections.Shops.findOne();\n  const shopCountries = shop.locales.countries;\n\n  const regionsByCountry = {};\n  Object.keys(shopCountries).forEach((key) => {\n    const { states } = shopCountries[key] || {};\n    const regions = [];\n    if (states) {\n      // states is an object that needs to be convered\n      // to an array of region labels and values\n      Object.keys(states).forEach((i) => {\n        regions.push({\n          label: states[i].name,\n          value: i\n        });\n      });\n    }\n    regionsByCountry[key] = regions;\n  });\n  // The initial mode for addressBook\n  let initMode;\n  const cart = Collections.Cart.findOne();\n  // If we have passed the address step, show the grid\n  if (cart.workflow.status !== \"checkoutAddressBook\") {\n    initMode = \"grid\";\n  }\n  // AddressBook heading will be different in different views\n  // If the view template that's using the AddressBook has a\n  // heading object, set it as the AddressBook heading\n  if (!this.heading) {\n    const template = Template.instance();\n    const { data } = template || { data: undefined };\n    const { heading: templateHeading } = data || { heading: undefined };\n    if (templateHeading) {\n      this.heading = templateHeading;\n    } else {\n      this.heading = {\n        defaultValue: \"Address Book\",\n        i18nKey: \"accountsUI.addressBook\"\n      };\n    }\n  }\n\n  onData(null, {\n    addressBook,\n    countries,\n    heading: this.heading,\n    initMode,\n    regionsByCountry\n  });\n}\n\nregisterComponent(\"AddressBook\", AddressBook, [\n  composeWithTracker(composer),\n  withProps(handlers)\n]);\n\nexport default compose(\n  composeWithTracker(composer),\n  withProps(handlers)\n)(AddressBook);\n","import _ from \"lodash\";\nimport React, { Component } from \"react\";\nimport PropTypes from \"prop-types\";\nimport { Components, registerComponent, composeWithTracker } from \"@reactioncommerce/reaction-components\";\nimport { Meteor } from \"meteor/meteor\";\nimport { Accounts } from \"meteor/accounts-base\";\nimport { Router } from \"/client/api\";\nimport { ServiceConfigHelper, LoginFormSharedHelpers } from \"../helpers\";\nimport { LoginFormValidation } from \"/lib/api\";\n\nclass AuthContainer extends Component {\n  static propTypes = {\n    currentRoute: PropTypes.object,\n    currentView: PropTypes.string,\n    formMessages: PropTypes.object\n  }\n\n  constructor(props) {\n    super(props);\n\n    this.state = {\n      formMessages: props.formMessages || {},\n      isLoading: false\n    };\n\n    this.handleFormSubmit = this.handleFormSubmit.bind(this);\n    this.hasError = this.hasError.bind(this);\n    this.formMessages = this.formMessages.bind(this);\n    this.services = this.services.bind(this);\n    this.shouldShowSeperator = this.shouldShowSeperator.bind(this);\n    this.handleSocialLogin = this.handleSocialLogin.bind(this);\n    this.capitalizeName = this.capitalizeName.bind(this);\n    this.hasPasswordService = this.hasPasswordService.bind(this);\n  }\n\n  handleFormSubmit = (event, email, password) => {\n    event.preventDefault();\n\n    this.setState({\n      isLoading: true\n    });\n    const errors = {};\n    const username = email ? email.trim() : null;\n    const pword = password ? password.trim() : null;\n\n    const validatedEmail = LoginFormValidation.email(username);\n    const validatedPassword = LoginFormValidation.password(pword, { validationLevel: \"exists\" });\n\n    if (validatedEmail !== true) {\n      errors.email = validatedEmail;\n    }\n\n    if (validatedPassword !== true) {\n      errors.password = validatedPassword;\n    }\n\n    if (_.isEmpty(errors) === false) {\n      this.setState({\n        isLoading: false,\n        formMessages: {\n          errors\n        }\n      });\n      return;\n    }\n\n    if (this.props.currentView === \"loginFormSignInView\") {\n      Meteor.loginWithPassword(username, pword, (error) => {\n        if (error) {\n          this.setState({\n            isLoading: false,\n            formMessages: {\n              alerts: [error]\n            }\n          });\n        } else {\n          Router.go(this.props.currentRoute.route.path);\n        }\n      });\n    } else if (this.props.currentView === \"loginFormSignUpView\") {\n      const newUserData = {\n        email: username,\n        password: pword\n      };\n\n      Accounts.createUser(newUserData, (error) => {\n        if (error) {\n          this.setState({\n            isLoading: false,\n            formMessages: {\n              alerts: [error]\n            }\n          });\n        } else {\n          Router.go(this.props.currentRoute.route.path);\n        }\n      });\n    }\n  }\n\n  hasError = (error) => {\n    // True here means the field is valid\n    // We're checking if theres some other message to display\n    if (error !== true && typeof error !== \"undefined\") {\n      return true;\n    }\n\n    return false;\n  }\n\n  formMessages = () => (\n    <Components.LoginFormMessages\n      messages={this.state.formMessages}\n    />\n  )\n\n  services = () => {\n    const serviceHelper = new ServiceConfigHelper();\n    return serviceHelper.services();\n  }\n\n  shouldShowSeperator = () => {\n    const serviceHelper = new ServiceConfigHelper();\n    const services = serviceHelper.services();\n    const enabledServices = _.filter(services, {\n      enabled: true\n    });\n\n    return !!Package[\"accounts-password\"] && enabledServices.length > 0;\n  }\n\n  capitalizeName = (str) => LoginFormSharedHelpers.capitalize(str)\n\n  handleSocialLogin = (value) => {\n    let serviceName = value;\n\n    // Get proper service name\n    if (serviceName === \"meteor-developer\") {\n      serviceName = \"MeteorDeveloperAccount\";\n    } else {\n      serviceName = this.capitalizeName(serviceName);\n    }\n\n    const loginWithService = Meteor[`loginWith${serviceName}`];\n    const options = {}; // use default scope unless specified\n\n    loginWithService(options, (error) => {\n      if (error) {\n        this.setState({\n          formMessages: {\n            alerts: [error]\n          }\n        });\n      }\n    });\n  }\n\n  hasPasswordService = () => !!Package[\"accounts-password\"]\n\n  renderAuthView() {\n    if (this.props.currentView === \"loginFormSignInView\") {\n      return (\n        <Components.SignIn\n          {...this.props}\n          onFormSubmit={this.handleFormSubmit}\n          messages={this.state.formMessages}\n          onError={this.hasError}\n          loginFormMessages={this.formMessages}\n          isLoading={this.state.isLoading}\n        />\n      );\n    } else if (this.props.currentView === \"loginFormSignUpView\") {\n      return (\n        <Components.SignUp\n          {...this.props}\n          onFormSubmit={this.handleFormSubmit}\n          messages={this.state.formMessages}\n          onError={this.hasError}\n          loginFormMessages={this.formMessages}\n          hasPasswordService={this.hasPasswordService}\n          isLoading={this.state.isLoading}\n        />\n      );\n    }\n  }\n\n  render() {\n    return (\n      <div>\n        <Components.LoginButtons\n          loginServices={this.services}\n          currentView={this.props.currentView}\n          onSeparator={this.shouldShowSeperator}\n          onSocialClick={this.handleSocialLogin}\n          capitalizeName={this.capitalizeName}\n        />\n        {this.renderAuthView()}\n      </div>\n    );\n  }\n}\n\nfunction composer(props, onData) {\n  onData(null, { currentRoute: Router.current() });\n}\n\nregisterComponent(\"AuthContainer\", AuthContainer, composeWithTracker(composer));\n\nexport default composeWithTracker(composer)(AuthContainer);\n","import { composeWithTracker, registerComponent } from \"@reactioncommerce/reaction-components\";\nimport { Meteor } from \"meteor/meteor\";\nimport { Packages } from \"/lib/collections\";\nimport { Reaction } from \"/client/api\";\nimport EditGroup from \"../components/editGroup\";\n\nconst composer = (props, onData) => {\n  const shopId = Reaction.getShopId();\n  const pkg = Meteor.subscribe(\"Packages\", shopId);\n  if (pkg.ready()) {\n    const packages = Packages.find({ shopId }).fetch();\n    onData(null, { packages, ...props });\n  }\n};\n\nregisterComponent(\"EditGroup\", EditGroup, composeWithTracker(composer));\n\nexport default composeWithTracker(composer)(EditGroup);\n","import _ from \"lodash\";\nimport React, { Component } from \"react\";\nimport PropTypes from \"prop-types\";\nimport { Components, registerComponent } from \"@reactioncommerce/reaction-components\";\nimport { Meteor } from \"meteor/meteor\";\nimport { i18next } from \"/client/api\";\nimport ForgotPassword from \"../components/forgotPassword\";\nimport { LoginFormValidation } from \"/lib/api\";\n\n\nclass ForgotPasswordContainer extends Component {\n  static propTypes = {\n    formMessages: PropTypes.object\n  }\n\n  constructor(props) {\n    super(props);\n\n    this.state = {\n      formMessages: props.formMessages || {},\n      isLoading: false,\n      isDisabled: false\n    };\n\n    this.handleFormSubmit = this.handleFormSubmit.bind(this);\n    this.formMessages = this.formMessages.bind(this);\n    this.hasError = this.hasError.bind(this);\n  }\n\n  handleFormSubmit = (event, email) => {\n    event.preventDefault();\n\n    this.setState({\n      isLoading: true\n    });\n\n    let newEmail;\n    email === undefined ? newEmail = \"\" : newEmail = email;\n\n    const emailAddress = newEmail.trim();\n    const validatedEmail = LoginFormValidation.email(emailAddress);\n    const errors = {};\n\n    if (validatedEmail !== true) {\n      errors.email = validatedEmail;\n    }\n\n    if (_.isEmpty(errors) === false) {\n      this.setState({\n        isLoading: false,\n        formMessages: {\n          errors\n        }\n      });\n      return;\n    }\n\n    Meteor.call(\"accounts/sendResetPasswordEmail\", { email: emailAddress }, (error) => {\n      // Show some message confirming result\n      if (error) {\n        this.setState({\n          isLoading: false,\n          formMessages: {\n            alerts: [error]\n          }\n        });\n      } else {\n        this.setState({\n          isLoading: false,\n          isDisabled: true,\n          formMessages: {\n            info: [{\n              reason: i18next.t(\"accountsUI.info.passwordResetSend\") || \"Password reset mail sent.\"\n            }]\n          }\n        });\n      }\n    });\n  }\n\n  formMessages = () => (\n    <Components.LoginFormMessages\n      messages={this.state.formMessages}\n    />\n  )\n\n  hasError = (error) => {\n    // True here means the field is valid\n    // We're checking if theres some other message to display\n    if (error !== true && typeof error !== \"undefined\") {\n      return true;\n    }\n\n    return false;\n  }\n\n  render() {\n    return (\n      <ForgotPassword\n        {...this.props}\n        onFormSubmit={this.handleFormSubmit}\n        loginFormMessages={this.formMessages}\n        messages={this.state.formMessages}\n        onError={this.hasError}\n        isLoading={this.state.isLoading}\n        isDisabled={this.state.isDisabled}\n      />\n    );\n  }\n}\n\nregisterComponent(\"ForgotPassword\", ForgotPasswordContainer);\n\nexport default ForgotPasswordContainer;\n","import React, { Component } from \"react\";\nimport PropTypes from \"prop-types\";\nimport { Meteor } from \"meteor/meteor\";\nimport { Reaction, i18next } from \"/client/api\";\nimport { registerComponent, composeWithTracker } from \"@reactioncommerce/reaction-components\";\nimport LoginInline from \"../components/loginInline\";\nimport { Cart } from \"/lib/collections\";\n\nclass LoginInlineContainer extends Component {\n  static propTypes = {\n    isStripeEnabled: PropTypes.bool\n  }\n\n  constructor(props) {\n    super(props);\n\n    this.state = {\n      isStripeEnabled: props.isStripeEnabled,\n      renderEmailForm: false\n    };\n  }\n\n  componentWillReceiveProps(nextProps) {\n    this.setState({\n      isStripeEnabled: nextProps.isStripeEnabled\n    });\n  }\n\n  pushCartWorkflow = () => {\n    Meteor.call(\"workflow/pushCartWorkflow\", \"coreCartWorkflow\", \"checkoutLogin\", (error) => {\n      if (error) {\n        // Do not bother to try to advance workflow if we can't go beyond login.\n        return;\n      }\n      const cart = Cart.findOne({\n        userId: Meteor.userId()\n      });\n      // If there's already a billing and shipping address selected, push beyond address book\n      if (cart && cart.billing[0] && cart.billing[0].address\n        && cart.shipping[0] && cart.shipping[0].address) {\n        Meteor.call(\"workflow/pushCartWorkflow\", \"coreCartWorkflow\", \"checkoutAddressBook\");\n      }\n    });\n  }\n\n  continueAsGuest = (event) => {\n    event.preventDefault();\n    if (this.state.isStripeEnabled) {\n      this.setState({\n        renderEmailForm: true\n      });\n    } else {\n      this.pushCartWorkflow();\n    }\n  }\n\n  /**\n   * @method handleEmailSubmit\n   * @summary Handle submitting the email form\n   * @param {Event} event - the event that fired\n   * @param {String} email - anonymous user's email\n   * @return {undefined} undefined\n   */\n  handleEmailSubmit = (event, email) => {\n    event.preventDefault();\n    const userId = Meteor.userId();\n    Meteor.call(\"cart/setAnonymousUserEmail\", userId, email, (error) => {\n      if (error) {\n        Alerts.toast(i18next.t(\"mail.alerts.addCartEmailFailed\"), \"error\");\n      } else {\n        this.pushCartWorkflow();\n      }\n    });\n  }\n\n  render() {\n    return (\n      <LoginInline\n        continueAsGuest={this.continueAsGuest}\n        renderEmailForm={this.state.renderEmailForm}\n        handleEmailSubmit={this.handleEmailSubmit}\n      />\n    );\n  }\n}\n\nfunction composer(props, onData) {\n  let isStripeEnabled = false;\n  const subscription = Reaction.Subscriptions.Packages;\n  const primaryShopId = Reaction.getPrimaryShopId();\n\n  const stripePkg = Reaction.getPackageSettingsWithOptions({\n    shopId: primaryShopId,\n    name: \"reaction-stripe\",\n    enabled: true\n  });\n\n  if (subscription.ready()) {\n    if (stripePkg) {\n      isStripeEnabled = true;\n    }\n\n    onData(null, {\n      isStripeEnabled\n    });\n  }\n}\n\nregisterComponent(\"LoginInline\", LoginInlineContainer, composeWithTracker(composer));\n\nexport default composeWithTracker(composer)(LoginInlineContainer);\n","import { compose, withProps } from \"recompose\";\nimport { Meteor } from \"meteor/meteor\";\nimport { Accounts } from \"meteor/accounts-base\";\nimport { Roles } from \"meteor/alanning:roles\";\nimport { Session } from \"meteor/session\";\nimport { registerComponent, composeWithTracker, withCurrentAccount } from \"@reactioncommerce/reaction-components\";\nimport { i18nextDep, i18next, Reaction, Logger } from \"/client/api\";\nimport { Tags } from \"/lib/collections\";\nimport { getUserAvatar } from \"/imports/plugins/core/accounts/client/helpers/helpers\";\nimport MainDropdown from \"../components/mainDropdown\";\n\nfunction displayName(displayUser) {\n  i18nextDep.depend();\n\n  const user = displayUser || Accounts.user();\n\n  if (user) {\n    if (user.name) {\n      return user.name;\n    } else if (user.username) {\n      return user.username;\n    } else if (user.profile && user.profile.name) {\n      return user.profile.name;\n    }\n\n    // todo: previous check was user.services !== \"anonymous\", \"resume\". Is this\n    // new check covers previous check?\n    if (Roles.userIsInRole(\n      user._id || user.userId, \"account/profile\",\n      Reaction.getShopId()\n    )) {\n      return i18next.t(\"accountsUI.guest\", { defaultValue: \"Guest\" });\n    }\n  }\n}\n\nfunction getAdminShortcutIcons() {\n  // get shortcuts with audience permissions based on user roles\n  const roles = Roles.getRolesForUser(Meteor.userId(), Reaction.getShopId());\n\n  return {\n    provides: \"shortcut\",\n    enabled: true,\n    audience: roles\n  };\n}\n\nfunction handleChange(event, value) {\n  event.preventDefault();\n\n  if (value === \"logout\") {\n    return Meteor.logout((error) => {\n      if (error) {\n        Logger.error(error, \"Failed to logout.\");\n      }\n\n      // Resets the app to show the primary shop as the active shop when a user logs out.\n      // When an admin user is switching back and forth between shops, the app will keep the\n      // activeShopId as the last shop visited. If an admin user logs out, the app will stay on that shop\n      // for any new user who uses the same browser, temporarily, until the app is refreshed. This fixes that issue.\n      Reaction.setShopId(Reaction.getPrimaryShopId());\n    });\n  }\n\n  if (value.name === \"createProduct\") {\n    Reaction.setUserPreferences(\"reaction-dashboard\", \"viewAs\", \"administrator\");\n    Meteor.call(\"products/createProduct\", (error, productId) => {\n      let currentTag;\n      let currentTagId;\n\n      if (error) {\n        throw new Meteor.Error(\"create-product-error\", error);\n      } else if (productId) {\n        currentTagId = Session.get(\"currentTag\");\n        currentTag = Tags.findOne(currentTagId);\n        if (currentTag) {\n          Meteor.call(\"products/updateProductTags\", productId, currentTag.name, currentTagId);\n        }\n        // go to new product\n        Reaction.Router.go(\"product\", {\n          handle: productId\n        });\n      }\n    });\n  } else if (value.name !== \"account/profile\") {\n    return Reaction.showActionView(value);\n  } else if (value.route || value.name) {\n    const route = value.name || value.route;\n    return Reaction.Router.go(route);\n  }\n}\n\nconst composer = ({ currentAccount }, onData) => {\n  const userImage = getUserAvatar(currentAccount);\n  const userName = displayName(currentAccount);\n  const adminShortcuts = getAdminShortcutIcons();\n\n  onData(null, {\n    adminShortcuts,\n    userImage,\n    userName\n  });\n};\n\nconst handlers = {\n  handleChange,\n  userShortcuts: {\n    provides: \"userAccountDropdown\",\n    enabled: true\n  }\n};\n\nregisterComponent(\"MainDropdown\", MainDropdown, [\n  withCurrentAccount,\n  withProps(handlers),\n  composeWithTracker(composer, false)\n]);\n\nexport default compose(\n  withCurrentAccount,\n  withProps(handlers),\n  composeWithTracker(composer, false)\n)(MainDropdown);\n","import React, { Component } from \"react\";\nimport PropTypes from \"prop-types\";\nimport { registerComponent } from \"@reactioncommerce/reaction-components\";\nimport LoginFormMessages from \"../components/loginFormMessages\";\n\nconst wrapComponent = (Comp) => (\n  class LoginFormMessagesContainer extends Component {\n    static propTypes = {\n      messages: PropTypes.object\n    }\n\n    constructor() {\n      super();\n\n      this.loginFormMessages = this.loginFormMessages.bind(this);\n    }\n\n    loginFormMessages = () => {\n      let reasons = \"\";\n      if (this.props.messages.info) {\n        this.props.messages.info.forEach((info) => {\n          reasons = info.reason;\n        });\n      } else if (this.props.messages.alerts) {\n        this.props.messages.alerts.forEach((alert) => {\n          reasons = alert.reason;\n        });\n      }\n      return reasons;\n    }\n\n    render() {\n      return (\n        <Comp\n          loginFormMessages={this.loginFormMessages}\n          formMessages={this.props.messages}\n        />\n      );\n    }\n  }\n);\n\nregisterComponent(\"LoginFormMessages\", LoginFormMessages, wrapComponent);\n\nexport default wrapComponent(LoginFormMessages);\n","import _ from \"lodash\";\nimport React, { Component } from \"react\";\nimport PropTypes from \"prop-types\";\nimport { Accounts } from \"meteor/accounts-base\";\nimport { Meteor } from \"meteor/meteor\";\nimport { Random } from \"meteor/random\";\nimport { Components, registerComponent } from \"@reactioncommerce/reaction-components\";\nimport { Reaction } from \"/client/api\";\nimport { LoginFormValidation } from \"/lib/api\";\nimport UpdatePasswordOverlay from \"../components/updatePasswordOverlay\";\n\nconst wrapComponent = (Comp) => (\n  class UpdatePasswordOverlayContainer extends Component {\n    static propTypes = {\n      callback: PropTypes.func,\n      formMessages: PropTypes.object,\n      isOpen: PropTypes.bool,\n      token: PropTypes.string,\n      type: PropTypes.string,\n      uniqueId: PropTypes.string\n    }\n\n    static defaultProps = {\n      formMessages: {},\n      uniqueId: Random.id()\n    }\n\n    constructor(props) {\n      super(props);\n\n      this.state = {\n        formMessages: props.formMessages,\n        isOpen: props.isOpen,\n        isDisabled: false\n      };\n\n      this.handleFormSubmit = this.handleFormSubmit.bind(this);\n      this.handleFormCancel = this.handleFormCancel.bind(this);\n      this.formMessages = this.formMessages.bind(this);\n      this.hasError = this.hasError.bind(this);\n    }\n\n    handleFormSubmit = (event, passwordValue) => {\n      event.preventDefault();\n\n      this.setState({\n        isDisabled: true\n      });\n\n      const password = passwordValue.trim();\n      const validatedPassword = LoginFormValidation.password(password);\n      const errors = {};\n\n      if (validatedPassword !== true) {\n        errors.password = validatedPassword;\n      }\n\n      if (_.isEmpty(errors) === false) {\n        this.setState({\n          isDisabled: false,\n          formMessages: {\n            errors\n          }\n        });\n        return;\n      }\n\n      Accounts.resetPassword(this.props.token, password, (error) => {\n        if (error) {\n          this.setState({\n            isDisabled: false,\n            formMessages: {\n              alerts: [error]\n            }\n          });\n        } else {\n          // Now that Meteor.users is verified, we should do the same with the Accounts collection\n          Meteor.call(\"accounts/verifyAccount\");\n\n          this.props.callback();\n\n          this.setState({\n            isOpen: !this.state.isOpen\n          });\n\n          const shopId = Reaction.getUserPreferences(\"reaction\", \"activeShopId\");\n          Reaction.setShopId(shopId);\n        }\n      });\n    }\n\n    handleFormCancel = (event) => {\n      event.preventDefault();\n      this.setState({\n        isOpen: !this.state.isOpen\n      });\n    }\n\n    formMessages = () => (\n      <Components.LoginFormMessages messages={this.state.formMessages} />\n    )\n\n    hasError = (error) => {\n      // True here means the field is valid\n      // We're checking if theres some other message to display\n      if (error !== true && typeof error !== \"undefined\") {\n        return true;\n      }\n\n      return false;\n    }\n\n    render() {\n      return (\n        <Comp\n          uniqueId={this.props.uniqueId}\n          loginFormMessages={this.formMessages}\n          onError={this.hasError}\n          messages={this.state.formMessages}\n          onFormSubmit={this.handleFormSubmit}\n          onCancel={this.handleFormCancel}\n          isOpen={this.state.isOpen}\n          isDisabled={this.state.isDisabled}\n          type={this.props.type}\n        />\n      );\n    }\n  }\n);\n\nregisterComponent(\"UpdatePasswordOverlay\", UpdatePasswordOverlay, wrapComponent);\n\nexport default wrapComponent(UpdatePasswordOverlay);\n","import { compose, withProps } from \"recompose\";\nimport { registerComponent, composeWithTracker } from \"@reactioncommerce/reaction-components\";\nimport { Meteor } from \"meteor/meteor\";\nimport { i18next } from \"/client/api\";\nimport { Accounts } from \"/lib/collections\";\nimport UpdateEmail from \"../components/updateEmail\";\n\nconst handlers = {\n  handleUpdateEmail({ newEmail, oldEmail }, callback) {\n    Meteor.call(\"accounts/validation/email\", newEmail, false, (result, error) => {\n      if (error.error) {\n        Alerts.toast(i18next.t(\"accountsUI.error.invalidEmail\", { err: error.reason }), \"error\");\n        return callback();\n      }\n\n      Meteor.call(\"accounts/updateEmailAddress\", newEmail, (err) => {\n        if (err) {\n          Alerts.toast(i18next.t(\"accountsUI.error.emailAlreadyExists\", { err: err.message }), \"error\");\n          return callback();\n        }\n\n        // Email changed, remove original email\n        Meteor.call(\"accounts/removeEmailAddress\", oldEmail, () => {\n          Alerts.toast(i18next.t(\"accountsUI.info.emailUpdated\"), \"success\");\n          return callback();\n        });\n      });\n    });\n  }\n};\n\nconst composer = (props, onData) => {\n  const user = Accounts.findOne(Meteor.userId());\n  const email = user.emails.length > 0 ? user.emails[0].address : \"\";\n  onData(null, { email });\n};\n\nregisterComponent(\"UpdateEmail\", UpdateEmail, [\n  composeWithTracker(composer),\n  withProps(handlers)\n]);\n\nexport default compose(\n  composeWithTracker(composer),\n  withProps(handlers)\n)(UpdateEmail);\n","import { compose } from \"recompose\";\nimport { Meteor } from \"meteor/meteor\";\nimport { Router } from \"/client/modules/router/\";\nimport { registerComponent, composeWithTracker } from \"@reactioncommerce/reaction-components\";\nimport OrdersList from \"../components/ordersList\";\n\nfunction composer(props, onData) {\n  // Get user order from props\n  const { orders } = props;\n  const allOrdersInfo = [];\n  let isProfilePage = false;\n\n  if (Router.getRouteName() === \"account/profile\") {\n    isProfilePage = true;\n  }\n\n  if (orders.length > 0) {\n    orders.map((order) => {\n      const imageSub = Meteor.subscribe(\"OrderImages\", order._id);\n      const orderSummary = {\n        quantityTotal: order.getCount(),\n        subtotal: order.getSubTotal(),\n        shippingTotal: order.getShippingTotal(),\n        tax: order.getTaxTotal(),\n        discounts: order.getDiscounts(),\n        total: order.getTotal(),\n        shipping: order.shipping\n      };\n      if (imageSub.ready()) {\n        const orderId = order._id;\n        const orderInfo = {\n          shops: order.getShopSummary(),\n          order,\n          orderId,\n          orderSummary,\n          paymentMethods: order.getUniquePaymentMethods()\n        };\n        allOrdersInfo.push(orderInfo);\n      }\n      return allOrdersInfo;\n    });\n    onData(null, {\n      allOrdersInfo,\n      isProfilePage\n    });\n  } else {\n    onData(null, {\n      orders,\n      isProfilePage\n    });\n  }\n}\n\n\nregisterComponent(\"OrdersList\", OrdersList, [\n  composeWithTracker(composer)\n]);\n\nexport default compose(composeWithTracker(composer))(OrdersList);\n","import { Accounts } from \"meteor/accounts-base\";\nimport { ReactiveVar } from \"meteor/reactive-var\";\nimport { Meteor } from \"meteor/meteor\";\nimport { registerComponent, composeWithTracker } from \"@reactioncommerce/reaction-components\";\nimport VerifyAccount from \"../components/verifyAccount\";\nimport { Reaction } from \"/client/api\";\n\n\nconst verified = new ReactiveVar(null);\n\nAccounts.onEmailVerificationLink((token, done) => {\n  Accounts.verifyEmail(token, (error) => {\n    if (error) {\n      verified.set({\n        error: {\n          reason: error.reason\n          // no i18nKey for framework errors for now\n        }\n      });\n    } else {\n      verified.set(true);\n    }\n    Reaction.Router.go(\"account/verify\");\n    done();\n  });\n});\n\nfunction wrapper(props, onData) {\n  Meteor.setTimeout(() => {\n    if (!verified.get()) {\n      onData(null, {\n        error: {\n          defaultValue: \"Verification timed out. Probably you've already been verified successfully.\",\n          i18nKey: \"accountsUI.error.verifyTimeout\"\n        }\n      });\n      Meteor.setTimeout(() => {\n        Reaction.Router.go(\"/\");\n      }, 2000);\n    }\n  }, 5000);\n\n  const user = Meteor.user();\n  if (user && verified.get() === true) {\n    for (const email of user.emails) {\n      if (email.verified === true) {\n        Meteor.call(\"accounts/verifyAccount\", (error, affectedDocs) => {\n          if (error) {\n            onData(null, {\n              error: {\n                reason: error.reason\n                // no i18nKey for framework errors for now\n              }\n            });\n            return;\n          }\n          if (affectedDocs === 0) {\n            onData(null, {\n              error: {\n                reason: \"Couldn't verify email address.\",\n                i18nKey: \"accountsUI.error.verifyEmailAddressNotFound\"\n              }\n            });\n            return;\n          }\n          // Success\n          onData(null, {});\n        });\n      }\n    }\n  }\n  onData(null, verified.get());\n}\n\nregisterComponent(\"VerifyAccount\", VerifyAccount, composeWithTracker(wrapper));\n","import { Meteor } from \"meteor/meteor\";\nimport _ from \"lodash\";\nimport { Reaction } from \"/client/api\";\nimport * as Collections from \"/lib/collections\";\n\n/**\n * @method sortUsersIntoGroups\n * @memberof Accounts\n * @summary helper - client puts each full user object into an array on the group they belong\n * @param {Array} accounts - list of user account objects\n * @param {Array} groups - list of permission groups\n * @return {Array} - array of groups, each having a `users` field\n */\nexport default function sortUsersIntoGroups({ accounts, groups }) {\n  const newGroups = groups.map((group) => {\n    const matchingAccounts = accounts.filter((acc) => acc.groups && acc.groups.indexOf(group._id) > -1);\n    group.users = _.compact(matchingAccounts);\n    return group;\n  });\n  return newGroups;\n}\n\n/**\n * @method sortGroups\n * @memberof Accounts\n * @summary Sort to display higher permission groups and \"owner\" at the top\n * @param  {Array} groups [description]\n * @return {Array}        [description]\n */\nexport function sortGroups(groups) {\n  return groups.sort((prev, next) => {\n    if (next.slug === \"owner\") { return 1; } // owner tops\n    return next.permissions.length - prev.permissions.length;\n  });\n}\n\n/**\n * @method getInvitableGroups\n * @memberof Accounts\n * @summary helper - client This generates a list of groups the user can invite to.\n * It filters out the owner group (because you cannot invite directly to an existing shop as owner)\n * It also filters out groups that the user does not have needed permissions to invite to.\n * All these are also checked by the Meteor method, so this is done to prevent trying to invite and getting error\n * @param {Array} groups - list of user account objects\n * @return {Array} - array of groups or empty object\n */\nexport function getInvitableGroups(groups) {\n  return groups\n    .filter((grp) => grp.slug !== \"owner\")\n    .filter((grp) => Reaction.canInviteToGroup({ group: grp }));\n}\n\n/**\n * @method getDefaultUserInviteGroup\n * @memberof Accounts\n * @summary user's default invite groups is the group they belong\n * if the user belongs to owner group, it defaults to shop manager (because you cannot invite directly\n * to an existing shop as owner). If no match still, use the first of the groups passed\n * (e.g in case of Marketplace owner accessing a merchant shop)\n * @param  {Array} groups [description]\n * @return {Object}        [description]\n */\nexport function getDefaultUserInviteGroup(groups) {\n  let result;\n  const user = Collections.Accounts.findOne({ userId: Meteor.userId() });\n  result = groups.find((grp) => user && user.groups.indexOf(grp._id) > -1);\n\n  if (result && result.slug === \"owner\") {\n    result = groups.find((grp) => grp.slug === \"shop manager\");\n  }\n\n  if (!result) {\n    result = groups.find((firstGroup) => firstGroup);\n  }\n\n  return result;\n}\n\n/**\n * @method groupPermissions\n * @memberof Accounts\n * @summary Return all permissions for packages\n * @todo Review hardcoded `reaction` in package names\n * @param  {Array} packages [description]\n * @return {Object}          [description]\n */\nexport function groupPermissions(packages) {\n  return packages.reduce((registeredPackages, pkg) => {\n    const permissions = [];\n    if (pkg.registry && pkg.enabled) {\n      for (const registryItem of pkg.registry) {\n        if (!registryItem.route) {\n          continue;\n        }\n\n        // Get all permissions, add them to an array\n        if (registryItem.permissions) {\n          for (const permission of registryItem.permissions) {\n            // check needed because of non-object perms in the permissions array (e.g \"admin\", \"owner\")\n            if (typeof permission === \"object\") {\n              permission.shopId = Reaction.getShopId();\n              permissions.push(permission);\n            }\n          }\n        }\n\n        // Also create an object map of those same permissions as above\n        const permissionMap = getPermissionMap(permissions);\n        if (!permissionMap[registryItem.route]) {\n          permissions.push({\n            shopId: pkg.shopId,\n            permission: registryItem.name || `${pkg.name}/${registryItem.template}`,\n            icon: registryItem.icon,\n            // TODO: Rethink naming convention for permissions list\n            label: registryItem.label || registryItem.route\n          });\n        }\n      }\n      // TODO review this, hardcoded WIP \"reaction\"\n      const label = pkg.name.replace(\"reaction\", \"\").replace(/(-.)/g, (x) => ` ${x[1].toUpperCase()}`);\n\n      const newObj = {\n        shopId: pkg.shopId,\n        icon: pkg.icon,\n        name: pkg.name,\n        label,\n        permissions: _.uniq(permissions)\n      };\n\n      registeredPackages.push(newObj);\n    }\n\n    return registeredPackages;\n  }, []);\n}\n\nfunction getPermissionMap(permissions) {\n  const permissionMap = {};\n  permissions.forEach(({ label, permission }) => {\n    permissionMap[permission] = label;\n  });\n  return permissionMap;\n}\n","import React from \"react\";\nimport { Template } from \"meteor/templating\";\nimport { Accounts } from \"meteor/accounts-base\";\nimport * as Collections from \"/lib/collections\";\nimport { Components } from \"@reactioncommerce/reaction-components\";\n\nexport const LoginFormSharedHelpers = {\n  /**\n   * @method messages\n   * @memberof Accounts\n   * @return {Object} Message object\n   */\n  messages() {\n    return Template.instance().formMessages.get();\n  },\n\n  /**\n   * @method hasError\n   * @memberof Accounts\n   * @summary Check to see if there are error or other messages to display\n   * @param  {Object}  error Error\n   * @return {String}       \"has-error has-feedback\" string\n   */\n  hasError(error) {\n    // True here means the field is valid\n    if (error !== true && typeof error !== \"undefined\") {\n      return \"has-error has-feedback\";\n    }\n  },\n\n  /**\n   * @method capitalize\n   * @memberof Accounts\n   * @summary Client-side helper to capitalize word\n   * @param  {String} str String to capitalize\n   * @return {String}     First letter of first word capitalized\n   */\n  capitalize(str) {\n    const finalString = str === null ? \"\" : String(str);\n    return finalString.charAt(0).toUpperCase() + finalString.slice(1);\n  }\n\n};\n\n/**\n * @method getUserAvatar\n * @memberof Accounts\n * @summary ReactionAvatar Component helper to get a user's Avatar\n * @example const userAvatar = getUserAvatar(account);\n * @param  {Object} currentUser User\n * @return {Component}          ReactionAvatar component\n */\nexport function getUserAvatar(currentUser) {\n  const user = currentUser || Accounts.user();\n\n  const account = Collections.Accounts.findOne(user._id);\n  // first we check picture exists. Picture has higher priority to display\n  if (account && account.profile && account.profile.picture) {\n    const { picture } = account.profile;\n\n    return (\n      <Components.ReactionAvatar\n        className={\"accounts-avatar\"}\n        size={30}\n        src={picture}\n      />\n    );\n  }\n  if (user.emails && user.emails.length === 1) {\n    const email = user.emails[0].address;\n\n    return (\n      <Components.ReactionAvatar\n        className={\"accounts-avatar\"}\n        email={email}\n        size={30}\n      />\n    );\n  }\n\n  return (\n    <Components.ReactionAvatar\n      className={\"accounts-avatar\"}\n      size={30}\n    />\n  );\n}\n","export { LoginFormSharedHelpers } from \"./helpers\";\nexport { ServiceConfigHelper } from \"./util\";\n","import _ from \"lodash\";\nimport { Accounts } from \"meteor/accounts-base\";\nimport { ServiceConfiguration } from \"meteor/service-configuration\";\n\nfunction capitalize(str) {\n  const finalString = str === null ? \"\" : String(str);\n  return finalString.charAt(0).toUpperCase() + str.slice(1);\n}\n\nconst providers = {\n  Facebook: {},\n  Google: {},\n  Twitter: {},\n  Instagram: {}\n};\n\nproviders.Facebook.fields = function () {\n  return [\n    { property: \"appId\", label: \"App ID\" },\n    { property: \"secret\", label: \"App Secret\" }\n  ];\n};\n\nproviders.Google.fields = function () {\n  return [\n    { property: \"clientId\", label: \"Client ID\" },\n    { property: \"secret\", label: \"Client secret\" }\n  ];\n};\n\nproviders.Twitter.fields = function () {\n  return [\n    { property: \"consumerKey\", label: \"API key\" },\n    { property: \"secret\", label: \"API secret\" }\n  ];\n};\n\nproviders.Instagram.fields = function () {\n  return [\n    { property: \"clientId\", label: \"Client ID\" },\n    { property: \"secret\", label: \"Client secret\" }\n  ];\n};\n\n\nexport class ServiceConfigHelper {\n  availableServices() {\n    const services = Package[\"accounts-oauth\"] ? Accounts.oauth.serviceNames() : [];\n    services.sort();\n\n    return services;\n  }\n\n  capitalizedServiceName(name) {\n    if (name === \"meteor-developer\") {\n      return \"MeteorDeveloperAccount\";\n    }\n\n    return capitalize(name);\n  }\n\n  configFieldsForService(name) {\n    const capitalizedName = this.capitalizedServiceName(name);\n    const template = providers[capitalizedName];\n\n    if (template) {\n      const fields = template.fields();\n\n      return _.map(fields, (field) => {\n        if (!field.type) {\n          field.type = field.property === \"secret\" ? \"password\" : \"text\";\n        }\n\n        return _.extend(field, {\n          type: field.type\n        });\n      });\n    }\n\n    return [];\n  }\n\n  services(extendEach) {\n    const availableServices = this.availableServices();\n    const configurations = ServiceConfiguration.configurations.find().fetch();\n\n    return _.map(availableServices, (name) => {\n      const matchingConfigurations = _.filter(configurations, { service: name });\n      let service = {\n        name,\n        label: this.capitalizedServiceName(name),\n        fields: this.configFieldsForService(name)\n      };\n\n      if (matchingConfigurations.length) {\n        service = _.extend(service, matchingConfigurations[0]);\n      }\n\n      if (_.isFunction(extendEach)) {\n        service = _.extend(service, extendEach(service) || {});\n      }\n\n      return service;\n    });\n  }\n\n  /**\n   * @method addProvider\n   * @memberof Accounts\n   * @summary Add an OAuth provider, with field definitions required to render the form\n   * which collects and stores configuation settings for the provider.\n   * @example ServiceConfigHelper.addProvider(\"Untappd\", [{ property: \"clientId\", label: \"Client ID\" }]), { property:\n   *  \"secret\", label: \"Client Secret\" }]);\n   * @see https://github.com/reactioncommerce/reaction/pull/3231\n   * @param {string} provider Display Name of the provider\n   * @param {object[]} fields Array of plain old JavaScript objects with the keys `property`\n   * (\"apiKey\", for example. `apiKey` should correspond to your OAuth provider's\n   * implementation) and `label` (\"API Key\", for example)\n   */\n  static addProvider(provider, fields) {\n    providers[provider] = {\n      fields: () => fields\n    };\n  }\n}\n","export { default as AccountsDashboard } from \"./components/accountsDashboard\";\nexport { default as AddressBookForm } from \"./components/addressBookForm\";\nexport { default as AddressBookReview } from \"./components/addressBookReview\";\nexport { default as AddressBookGrid } from \"./components/addressBookGrid\";\nexport { default as AddressBook } from \"./components/addressBook.js\";\nexport { default as AdminInviteForm } from \"./components/adminInviteForm\";\nexport { default as EditGroup } from \"./components/editGroup\";\nexport { default as ForgotPassword } from \"./components/forgotPassword\";\nexport { default as GroupForm } from \"./components/groupForm\";\nexport { default as GroupHeader } from \"./components/groupHeader\";\nexport { default as GroupsTable } from \"./components/groupsTable\";\nexport { default as GroupsTableButton } from \"./components/groupsTableButton\";\nexport { default as GroupsTableCell } from \"./components/groupsTableCell\";\nexport { default as Login } from \"./components/login\";\nexport { default as LoginButtons } from \"./components/loginButtons\";\nexport { default as LoginFormMessages } from \"./components/loginFormMessages\";\nexport { default as MainDropdown } from \"./components/mainDropdown\";\nexport { default as ManageGroups } from \"./components/manageGroups\";\nexport { default as PermissionsList } from \"./components/permissionsList\";\nexport { default as SignIn } from \"./components/signIn\";\nexport { default as SignUp } from \"./components/signUp\";\nexport { default as UpdateEmail } from \"./containers/updateEmail\";\nexport { default as UpdatePasswordOverlay } from \"./components/updatePasswordOverlay\";\nexport { default as LoginInline } from \"./components/loginInline\";\n\nexport { default as AccountsDashboardContainer } from \"./containers/accountsDashboardContainer\";\nexport { default as AddressBookContainer } from \"./containers/addressBookContainer\";\nexport { default as UserOrdersListContainer } from \"./containers/userOrdersListContainer\";\nexport { default as AuthContainer } from \"./containers/auth\";\nexport { default as EditGroupContainer } from \"./containers/editGroupContainer\";\nexport { default as ForgotPasswordContainer } from \"./containers/forgotPassword\";\nexport { default as MainDropdownContainer } from \"./containers/mainDropdown\";\nexport { default as MessagesContainer } from \"./containers/messages\";\nexport { default as UpdatePasswordOverlayContainer } from \"./containers/passwordOverlay\";\nexport { default as LoginInlineContainer } from \"./containers/loginInline\";\nexport { default as VerifyAccount } from \"./containers/verifyAccount\";\n\nimport \"./templates/accounts.html\";\n\nimport \"./templates/dashboard/dashboard.html\";\nimport \"./templates/dashboard/dashboard.js\";\nimport \"./templates/dropdown/helpers\";\nimport \"./templates/inline/inline.html\";\nimport \"./templates/inline/inline.js\";\nimport \"./templates/login/loginForm.html\";\nimport \"./templates/login/loginForm.js\";\nimport \"./templates/members/member.html\";\nimport \"./templates/members/member.js\";\nimport \"./templates/profile/profile.html\";\nimport \"./templates/profile/profile.js\";\nimport \"./templates/profile/userOrdersList.html\";\nimport \"./templates/profile/userOrdersList.js\";\nimport \"./templates/updatePassword/updatePassword.html\";\nimport \"./templates/updatePassword/updatePassword.js\";\n","import { Template } from \"meteor/templating\";\nimport { Meteor } from \"meteor/meteor\";\n\nTemplate.connectorSettings.helpers({\n  checked(enabled) {\n    if (enabled === true) {\n      return \"checked\";\n    }\n    return \"\";\n  },\n  shown(enabled) {\n    if (enabled !== true) {\n      return \"hidden\";\n    }\n    return \"\";\n  }\n});\n\n// toggle connector methods visibility\n// also toggles connector method settings\nTemplate.connectorSettings.events({\n  /**\n   * connectorSettings settings update enabled status for connector service on change\n   * @param  {event} event    jQuery Event\n   * @return {void}\n   */\n  \"change input.checkbox-switch.connector-settings[name=enabled]\": (event) => {\n    event.preventDefault();\n    const settingsKey = event.target.getAttribute(\"data-key\");\n    const packageId = event.target.getAttribute(\"data-id\");\n    const fields = [{\n      property: \"enabled\",\n      value: event.target.checked\n    }];\n    // save connector registry updates\n    if (packageId) {\n      // update package registry\n      Meteor.call(\"registry/update\", packageId, settingsKey, fields);\n      // also update connector provider status\n      Meteor.call(\"connectors/connection/toggle\", packageId, settingsKey);\n    }\n  }\n});\n","import \"./settings/connectors.html\";\nimport \"./settings/connectors.js\";\n","import \"./templates\";\n","import { Template } from \"meteor/templating\";\nimport { Reaction, Router } from \"/client/api\";\nimport { Orders } from \"/lib/collections\";\nimport { ReactiveDict } from \"meteor/reactive-dict\";\nimport { ReactiveVar } from \"meteor/reactive-var\";\n\n/**\n* completedPDFLayout\n* inheritsHelpersFrom dashboardOrdersList\n* Uses the browser print function.\n*/\nTemplate.completedPDFLayout.onCreated(async function () {\n  this.state = new ReactiveDict();\n  this.state.setDefault({\n    order: {},\n    ready: false\n  });\n\n  this.readyVar = new ReactiveVar(false);\n  this.moment = await import(\"moment\");\n  this.readyVar.set(true);\n\n  const currentRoute = Router.current();\n\n  this.autorun(() => {\n    this.subscribe(\"Orders\");\n\n    const order = Orders.findOne({\n      _id: currentRoute.params.id\n    });\n    this.state.set({\n      order\n    });\n  });\n});\n\n\nTemplate.completedPDFLayout.helpers({\n  order() {\n    return Template.instance().state.get(\"order\");\n  },\n  billing() {\n    const order = Template.instance().state.get(\"order\");\n    if (order && order.billing && order.billing.length) {\n      return order.billing[0];\n    }\n\n    return null;\n  },\n  dateFormat(context, block) {\n    const { moment } = Template.instance();\n    moment.locale(Reaction.Locale.get().language);\n    const f = block.hash.format || \"MMM DD, YYYY hh:mm:ss A\";\n    return moment(context).format(f);\n  },\n  ready() {\n    return Template.instance().readyVar.get();\n  }\n});\n","import { Template } from \"meteor/templating\";\n\n/**\n * ordersListSummary helpers\n *\n * @returns paymentInvoice\n */\nTemplate.ordersListSummary.helpers({\n  invoice() {\n    return this.invoice;\n  }\n});\n","import accounting from \"accounting-js\";\nimport _ from \"lodash\";\nimport { Meteor } from \"meteor/meteor\";\nimport { $ } from \"meteor/jquery\";\nimport { Template } from \"meteor/templating\";\nimport { ReactiveVar } from \"meteor/reactive-var\";\nimport { ReactiveDict } from \"meteor/reactive-dict\";\nimport { i18next, Logger, Reaction } from \"/client/api\";\nimport { Orders, Shops, Packages } from \"/lib/collections\";\nimport InvoiceContainer from \"../../containers/invoiceContainer.js\";\nimport { getBillingInfo } from \"../../helpers\";\n\n// helper to return the order payment object\n// the first credit paymentMethod on the order\n// returns entire payment method\nfunction orderCreditMethod(order) {\n  const creditMethods = order.billing && order.billing.filter((value) => value && value.paymentMethod && value.paymentMethod.method === \"credit\");\n  const creditMethod = creditMethods && creditMethods.find((billing) => billing && billing.shopId === Reaction.getShopId());\n  return creditMethod || {};\n}\n\n//\n// core order shipping invoice templates\n//\nTemplate.coreOrderShippingInvoice.onCreated(function () {\n  this.state = new ReactiveDict();\n  this.refunds = new ReactiveVar([]);\n  this.refundAmount = new ReactiveVar(0.00);\n  this.state.setDefault({\n    isCapturing: false,\n    isRefunding: false,\n    isFetching: false\n  });\n\n  this.autorun(() => {\n    const currentData = Template.currentData();\n    const order = Orders.findOne(currentData.orderId);\n    const shop = Shops.findOne({});\n\n    this.state.set(\"order\", order);\n    this.state.set(\"currency\", shop.currencies[shop.currency]);\n    this.state.set(\"isFetching\", true);\n\n    if (order) {\n      Meteor.call(\"orders/refunds/list\", order, (error, result) => {\n        if (error) Logger.warn(error);\n        this.refunds.set(result);\n        this.state.set(\"isFetching\", false);\n      });\n    }\n  });\n});\n\nTemplate.coreOrderShippingInvoice.helpers({\n  currentData() {\n    const currentData = Template.currentData();\n    return currentData;\n  },\n  order() {\n    const instance = Template.instance();\n    const order = instance.state.get(\"order\");\n    return order;\n  },\n  currency() {\n    const instance = Template.instance();\n    const currency = instance.state.get(\"currency\");\n    return currency;\n  },\n  refunds() {\n    const refunds = Template.instance().refunds.get();\n    if (Array.isArray(refunds)) {\n      return refunds.reverse();\n    }\n\n    return refunds;\n  },\n  isCapturing() {\n    const instance = Template.instance();\n    if (instance.state.get(\"isCapturing\")) {\n      instance.$(\":input\").attr(\"disabled\", true);\n      instance.$(\"#btn-capture-payment\").text(\"Capturing\");\n      return true;\n    }\n    return false;\n  },\n  isRefunding() {\n    const instance = Template.instance();\n    if (instance.state.get(\"isRefunding\")) {\n      instance.$(\"#btn-refund-payment\").text(i18next.t(\"order.refunding\"));\n      return true;\n    }\n    return false;\n  },\n  isFetching() {\n    const instance = Template.instance();\n    if (instance.state.get(\"isFetching\")) {\n      return true;\n    }\n    return false;\n  },\n\n  InvoiceContainer() {\n    return InvoiceContainer;\n  }\n});\n\n/**\n * coreOrderAdjustments events\n */\nTemplate.coreOrderShippingInvoice.events({\n  /**\n   * Click Start Cancel Order\n   * @param {Event} event - Event Object\n   * @param {Template} instance - Blaze Template\n   * @return {void}\n   */\n  \"click [data-event-action=cancelOrder]\": (event, instance) => {\n    event.preventDefault();\n    const order = instance.state.get(\"order\");\n    const invoiceTotal = getBillingInfo(order).invoice && getBillingInfo(order).invoice.total;\n    const currencySymbol = instance.state.get(\"currency\").symbol;\n    const { paymentMethod } = getBillingInfo(order);\n\n    Meteor.subscribe(\"Packages\", Reaction.getShopId());\n    const packageId = paymentMethod && paymentMethod.paymentPackageId;\n    const settingsKey = paymentMethod && paymentMethod.paymentSettingsKey;\n    // check if payment provider supports de-authorize\n    const checkSupportedMethods = Packages.findOne({\n      _id: packageId\n    }).settings[settingsKey].support;\n\n    const orderStatus = paymentMethod && paymentMethod.status;\n    const orderMode = paymentMethod && paymentMethod.mode;\n\n    let alertText;\n    if (_.includes(checkSupportedMethods, \"de-authorize\") ||\n      (orderStatus === \"completed\" && orderMode === \"capture\")) {\n      alertText = i18next.t(\"order.applyRefundDuringCancelOrder\", { currencySymbol, invoiceTotal });\n    }\n\n    Alerts.alert({\n      title: i18next.t(\"order.cancelOrder\"),\n      text: alertText,\n      type: \"warning\",\n      showCancelButton: true,\n      showCloseButton: true,\n      confirmButtonColor: \"#98afbc\",\n      cancelButtonColor: \"#98afbc\",\n      confirmButtonText: i18next.t(\"order.cancelOrderNoRestock\"),\n      cancelButtonText: i18next.t(\"order.cancelOrderThenRestock\")\n    }, (isConfirm, cancel) => {\n      let returnToStock;\n      if (isConfirm) {\n        returnToStock = false;\n        return Meteor.call(\"orders/cancelOrder\", order, returnToStock, (err) => {\n          if (err) {\n            $(\".alert\").removeClass(\"hidden\").text(err.message);\n          }\n        });\n      }\n      if (cancel === \"cancel\") {\n        returnToStock = true;\n        return Meteor.call(\"orders/cancelOrder\", order, returnToStock, (err) => {\n          if (err) {\n            $(\".alert\").removeClass(\"hidden\").text(err.message);\n          }\n        });\n      }\n    });\n  },\n\n  \"click [data-event-action=makeAdjustments]\": (event, instance) => {\n    event.preventDefault();\n    Meteor.call(\"orders/makeAdjustmentsToInvoice\", instance.state.get(\"order\"));\n  },\n\n  \"change input[name=refund_amount], keyup input[name=refund_amount]\": (event, instance) => {\n    instance.refundAmount.set(accounting.unformat(event.target.value));\n  }\n});\n\n\n/**\n * coreOrderShippingInvoice helpers\n */\nTemplate.coreOrderShippingInvoice.helpers({\n  refundAmount() {\n    return Template.instance().refundAmount;\n  },\n\n  disabled() {\n    const instance = Template.instance();\n    const order = instance.state.get(\"order\");\n    const status = orderCreditMethod(order).paymentMethod && orderCreditMethod(order).paymentMethod.status;\n\n    if (status === \"approved\" || status === \"completed\") {\n      return \"disabled\";\n    }\n\n    return \"\";\n  },\n\n  capturedDisabled() {\n    const isLoading = Template.instance().state.get(\"isCapturing\");\n    if (isLoading) {\n      return \"disabled\";\n    }\n    return null;\n  }\n});\n","import { Template } from \"meteor/templating\";\nimport OrderSummaryContainer from \"../../containers/orderSummaryContainer\";\n\nTemplate.coreOrderShippingSummary.helpers({\n  orderSummary() {\n    return {\n      component: OrderSummaryContainer,\n      ...Template.currentData()\n    };\n  }\n});\n","import { Meteor } from \"meteor/meteor\";\nimport { Tracker } from \"meteor/tracker\";\nimport { ReactiveVar } from \"meteor/reactive-var\";\nimport { Template } from \"meteor/templating\";\nimport { i18next, Reaction } from \"/client/api\";\nimport { Orders } from \"/lib/collections\";\nimport { getShippingInfo } from \"../../helpers\";\n\nTemplate.coreOrderShippingTracking.onCreated(() => {\n  const template = Template.instance();\n  const currentData = Template.currentData();\n\n  template.orderDep = new Tracker.Dependency();\n  template.showTrackingEditForm = ReactiveVar(false);\n\n  function getOrder(orderId, shipmentId) {\n    template.orderDep.depend();\n    return Orders.findOne({\n      \"_id\": orderId,\n      \"shipping._id\": shipmentId\n    });\n  }\n\n  Tracker.autorun(() => {\n    template.order = getOrder(currentData.orderId, currentData.fulfillment && currentData.fulfillment._id);\n  });\n});\n\n/**\n * coreShipmentShipped events\n *\n */\nTemplate.coreOrderShippingTracking.events({\n  \"click [data-event-action=refresh-shipping]\"() {\n    const instance = Template.instance();\n    instance.$(\"#btn-processing\").removeClass(\"hidden\");\n    const orderId = Template.instance().order._id;\n    Meteor.call(\"shipping/status/refresh\", orderId, (result) => {\n      if (result && result.error) {\n        instance.$(\"#btn-processing\").addClass(\"hidden\");\n        Alerts.toast(i18next.t(\"orderShipping.labelError\", { error: result.error }), \"error\", { timeout: 7000 });\n      }\n    });\n  },\n  \"click [data-event-action=shipmentShipped]\"() {\n    const template = Template.instance();\n    const shipment = getShippingInfo(template.order);\n    Meteor.call(\"orders/shipmentShipped\", template.order, shipment, (error) => {\n      if (error) {\n        Alerts.toast(i18next.t(\"mail.alerts.cantSendEmail\"), \"error\");\n      } else {\n        Alerts.toast(i18next.t(\"mail.alerts.emailSent\"), \"success\");\n      }\n    });\n\n    // send notification to order owner\n    const { userId } = template.order;\n    const type = \"orderShipped\";\n    const prefix = Reaction.getShopPrefix();\n    const url = `${prefix}/notifications`;\n    const sms = true;\n    Meteor.call(\"notification/send\", userId, type, url, sms);\n\n    // Meteor.call(\"workflow/pushOrderShipmentWorkflow\", \"coreOrderShipmentWorkflow\", \"orderShipped\", this._id);\n  },\n\n  \"click [data-event-action=resendNotification]\"() {\n    const template = Template.instance();\n    Meteor.call(\"orders/sendNotification\", template.order, \"shipped\", (error) => {\n      if (error) {\n        Alerts.toast(i18next.t(\"mail.alerts.cantSendEmail\"), \"error\");\n      } else {\n        Alerts.toast(i18next.t(\"mail.alerts.emailSent\"), \"success\");\n      }\n    });\n  },\n\n  \"click [data-event-action=shipmentPacked]\": () => {\n    const template = Template.instance();\n    const shipment = getShippingInfo(template.order);\n\n    Meteor.call(\"orders/shipmentPacked\", template.order, shipment);\n  },\n\n  \"submit form[name=addTrackingForm]\": (event, template) => {\n    event.preventDefault();\n    event.stopPropagation();\n\n    const currentData = Template.currentData();\n    const { order } = template;\n    const shipment = currentData.fulfillment;\n    const tracking = event.target.trackingNumber.value;\n\n    Meteor.call(\"orders/updateShipmentTracking\", order, shipment, tracking, (error) => {\n      if (!error) {\n        template.orderDep.changed();\n        template.showTrackingEditForm.set(false);\n      }\n    });\n  },\n  \"click [data-event-action=editTracking]\": (event, template) => {\n    template.showTrackingEditForm.set(true);\n  }\n});\n\nTemplate.coreOrderShippingTracking.helpers({\n  printableLabels() {\n    const { order } = Template.instance();\n    const shipment = getShippingInfo(order);\n\n    if (shipment) {\n      const { shippingLabelUrl, customsLabelUrl } = shipment;\n      if (shippingLabelUrl || customsLabelUrl) {\n        return { shippingLabelUrl, customsLabelUrl };\n      }\n    }\n\n    return false;\n  },\n  isShipped() {\n    const currentData = Template.currentData();\n    const { order } = Template.instance();\n\n    const shippedItems = currentData.fulfillment && currentData.fulfillment.items.every((shipmentItem) => {\n      const fullItem = order.items.find((orderItem) => {\n        if (orderItem._id === shipmentItem._id) {\n          return true;\n        }\n        return false;\n      });\n\n      return !fullItem.workflow.workflow.includes(\"coreOrderItemWorkflow/shipped\");\n    });\n\n    return shippedItems;\n  },\n\n  isNotCanceled() {\n    const currentData = Template.currentData();\n    const { order } = Template.instance();\n\n    const canceledItems = currentData.fulfillment && currentData.fulfillment.items.every((shipmentItem) => {\n      const fullItem = order.items.find((orderItem) => {\n        if (orderItem._id === shipmentItem._id) {\n          return true;\n        }\n        return false;\n      });\n\n      return fullItem.workflow.status !== \"coreOrderItemWorkflow/canceled\";\n    });\n\n    return canceledItems;\n  },\n\n  isCompleted() {\n    const currentData = Template.currentData();\n    const { order } = Template.instance();\n\n    const completedItems = currentData.fulfillment && currentData.fulfillment.items.every((shipmentItem) => {\n      const fullItem = order.items.find((orderItem) => {\n        if (orderItem._id === shipmentItem._id) {\n          return true;\n        }\n        return false;\n      });\n\n      if (Array.isArray(fullItem.workflow.workflow)) {\n        return fullItem.workflow.workflow.includes(\"coreOrderItemWorkflow/completed\");\n      }\n\n      return false;\n    });\n\n    return completedItems;\n  },\n\n  editTracking() {\n    // TODO move to a method where we loop package settings\n    // to determine if this feature is enabled.\n    // somewhere in here is where I wish this was converted to React!\n    const { settings } = Reaction.getPackageSettings(\"reaction-shipping-rates\");\n    // TODO: future proof by not using flatRates, but rather look for editable:true\n    if (settings && settings.flatRates.enabled === true) {\n      const template = Template.instance();\n      const { order } = template;\n      const shipment = getShippingInfo(order);\n      const editing = template.showTrackingEditForm.get();\n      let view = false;\n      if (editing === true || (!shipment.tracking && editing === false)) {\n        view = true;\n      }\n      // TODO modularize tracking more, editable to settings\n      if (view && shipment.shipmentMethod.carrier === \"Flat Rate\") {\n        return true;\n      }\n    }\n    return false;\n  },\n  order() {\n    return Template.instance().order;\n  },\n  shipment() {\n    const { order } = Template.instance();\n    return getShippingInfo(order);\n  },\n  shipmentReady() {\n    const { order } = Template.instance();\n    const shipment = getShippingInfo(order);\n    const shipmentWorkflow = shipment.workflow;\n\n    return (shipmentWorkflow && Array.isArray(shipmentWorkflow.workflow) && shipmentWorkflow.workflow.includes(\"coreOrderWorkflow/packed\") && shipment.tracking)\n      || (shipmentWorkflow && Array.isArray(shipmentWorkflow.workflow) && shipmentWorkflow.workflow.includes(\"coreOrderWorkflow/packed\"));\n  }\n});\n","import { Template } from \"meteor/templating\";\nimport { Reaction } from \"/client/api\";\nimport { Orders } from \"/lib/collections\";\n\n/**\n * coreOrderWorkflowHelpers\n */\nTemplate.coreOrderWorkflow.helpers({\n  /**\n   * orderFulfillmentData\n   * @summary Creates an Object with order id and a fulfillment object\n   * @param  {String} orderId - An order id\n   * @param  {Object} fulfillment - An order fulfillment. e.g. a shipment\n   * @return {Object} An object witht the order id and fulfillment\n   */\n  orderFulfillmentData(orderId, fulfillment) {\n    return {\n      orderId,\n      fulfillment\n    };\n  },\n\n  /**\n   * baseOrder\n   * @todo may be unnecessary\n   * @return {Object} contents of Template.currentData(), non-reactive\n   */\n  baseOrder() {\n    return Template.currentData();\n  },\n\n  /**\n   * order\n   * @return {Object|Boolean} An order or false\n   */\n  order() {\n    const id = this.order ? this.order._id : Reaction.Router.getQueryParam(\"_id\");\n    if (id) {\n      return Orders.findOne(id);\n    }\n    return false;\n  },\n\n  /**\n   * fulfillmentNumber\n   * @param  {Number} index - A number\n   * @return {Number} index + 1\n   */\n  fulfillmentNumber(index) {\n    return index + 1;\n  },\n\n  /**\n   * isCompleted\n   * @todo may need to be refactored\n   * @return {String|Boolean} order completion status or false\n   */\n  isCompleted() {\n    const order = Template.parentData(1);\n    if (this.status === true) {\n      return order.workflow.status;\n    }\n    return false;\n  },\n\n  /**\n   * isPending\n   * @todo may need to be refactored\n   * @return {String|Boolean} status or false\n   */\n  isPending() {\n    if (this.status === this.template) {\n      return this.status;\n    }\n    return false;\n  }\n});\n","import { Template } from \"meteor/templating\";\nimport OrderDashboardContainer from \"../containers/orderDashboardContainer\";\n\nTemplate.orders.helpers({\n  ordersComponent() {\n    return {\n      component: OrderDashboardContainer\n    };\n  }\n});\n","import React, { Component } from \"react\";\nimport PropTypes from \"prop-types\";\nimport { formatPriceString } from \"/client/api\";\nimport { Components, registerComponent, withMoment } from \"@reactioncommerce/reaction-components\";\nimport LineItems from \"./lineItems\";\nimport InvoiceActions from \"./invoiceActions\";\n\n/**\n * @file Invoice is a React Component for displaying the `invoice` section on the orders sideview\n * @module Invoice\n * @extends Components\n */\n\nclass Invoice extends Component {\n  /**\n    * @name Invoice propTypes\n    * @type {propTypes}\n    * @param {Object} props - React PropTypes\n    * @property {Object} invoice - An object representing an invoice\n    * @property {Object} order - An object representing an order\n    * @property {Bool} discounts - A boolean indicating whether discounts are enabled\n    * @property {Array} refunds - An array/list of refunds\n    * @property {Bool} paymentCaptured - A boolean indicating whether payment has been captured\n    * @property {Bool} canMakeAdjustments - A boolean indicating whether adjustments could be made on total payment\n    * @property {Bool} hasRefundingEnabled - A boolean indicating whether payment supports refunds\n    * @property {Bool} isFetching - A boolean indicating whether refund list is being loaded\n    * @return {Node} React node containing component for displaying the `invoice` section on the orders sideview\n    */\n  static propTypes = {\n    canMakeAdjustments: PropTypes.bool,\n    discounts: PropTypes.bool,\n    displayMedia: PropTypes.func,\n    hasRefundingEnabled: PropTypes.bool,\n    invoice: PropTypes.object,\n    isFetching: PropTypes.bool,\n    moment: PropTypes.func,\n    order: PropTypes.object,\n    paymentCaptured: PropTypes.bool,\n    refunds: PropTypes.array\n  }\n\n  state = {\n    isOpen: false\n  }\n\n  /**\n    * @name formatDate()\n    * @method\n    * @summary Formats dates\n    * @param {Number} context - the date to be formatted\n    * @param {String} block - the preferred format\n    * @returns {String} formatted date\n    */\n  formatDate(context, block) {\n    const { moment } = this.props;\n    const dateFormat = block || \"MMM DD, YYYY hh:mm:ss A\";\n    return (moment && moment(context).format(dateFormat)) || context.toLocaleString();\n  }\n\n  /**\n    * @name handleClick()\n    * @method\n    * @summary Handle clicking the add discount link\n    * @param {Event} event - the event that fired\n    * @returns {null} null\n    */\n  handleClick = (event) => {\n    event.preventDefault();\n    this.setState({\n      isOpen: true\n    });\n  }\n\n  /**\n    * @name renderDiscountForm()\n    * @method\n    * @summary Displays the discount form\n    * @returns {null} null\n    */\n  renderDiscountForm() {\n    return (\n      <div>\n        {this.state.isOpen &&\n          <div>\n            <hr/>\n            <Components.DiscountList\n              id={this.props.order._id}\n              collection=\"Orders\"\n              validatedInput={true}\n            />\n            <hr/>\n          </div>\n        }\n      </div>\n    );\n  }\n\n  /**\n    * @name renderRefundsInfo()\n    * @method\n    * @summary Displays the refund information after the order payment breakdown on the invoice\n    * @returns {null} null\n    */\n  renderRefundsInfo() {\n    const { hasRefundingEnabled, isFetching, refunds } = this.props;\n    return (\n      <div>\n        {(hasRefundingEnabled && isFetching) &&\n          <div className=\"form-group order-summary-form-group\">\n            <strong>Loading Refunds</strong>\n            <div className=\"invoice-details\">\n              <i className=\"fa fa-spinner fa-spin\" />\n            </div>\n          </div>\n        }\n\n        {Array.isArray(refunds) && refunds.map((refund) => (\n          <div className=\"order-summary-form-group text-danger\" key={refund.created} style={{ marginBottom: 15 }}>\n            <strong>Refunded on: {this.formatDate(refund.created, \"MM/D/YYYY\")}</strong>\n            <div className=\"invoice-details\"><strong>{formatPriceString(refund.amount)}</strong></div>\n          </div>\n        ))}\n      </div>\n    );\n  }\n\n  /**\n    * @name renderTotal()\n    * @method\n    * @summary Displays the total payment form\n    * @returns {null} null\n    */\n  renderTotal() {\n    return (\n      <div className=\"order-summary-form-group\">\n        <hr/>\n        <strong>TOTAL</strong>\n        <div className=\"invoice-details\">\n          <strong>{formatPriceString(this.props.invoice.total)}</strong>\n        </div>\n      </div>\n    );\n  }\n\n  /**\n    * @name renderConditionalDisplay()\n    * @method\n    * @summary Displays either refunds info or the total payment form\n    * @returns {null} null\n    */\n  renderConditionalDisplay() {\n    const { canMakeAdjustments, paymentCaptured } = this.props;\n    return (\n      <div>\n        {canMakeAdjustments ?\n          <div> {this.renderTotal()} </div> :\n          <span>\n            {paymentCaptured ?\n              <div>\n                {this.renderRefundsInfo()}\n              </div>\n              :\n              <div> {this.renderTotal()} </div>\n            }\n          </span>\n        }\n      </div>\n    );\n  }\n\n  /**\n    * @name renderInvoice()\n    * @method\n    * @summary Displays the invoice form with broken down payment info\n    * @returns {null} null\n    */\n  renderInvoice() {\n    const { invoice, discounts } = this.props;\n\n    return (\n      <div>\n        <div className=\"order-summary-form-group\">\n          <strong><Components.Translation defaultValue=\"Items in order\" i18nKey=\"cartSubTotals.orderItems\" /></strong>\n          <div className=\"invoice-details\">\n            {invoice.totalItems}\n          </div>\n        </div>\n\n        <div className=\"order-summary-form-group\">\n          <strong><Components.Translation defaultValue=\"Subtotal\" i18nKey=\"cartSubTotals.subtotal\"/></strong>\n          <div className=\"invoice-details\">\n            {formatPriceString(invoice.subtotal)}\n          </div>\n        </div>\n\n        <div className=\"order-summary-form-group\">\n          <strong><Components.Translation defaultValue=\"Shipping\" i18nKey=\"cartSubTotals.shipping\"/></strong>\n          <div className=\"invoice-details\">\n            {formatPriceString(invoice.shipping)}\n          </div>\n        </div>\n\n        <div className=\"order-summary-form-group\">\n          <strong><Components.Translation defaultValue=\"Tax\" i18nKey=\"cartSubTotals.tax\"/></strong>\n          <div className=\"invoice-details\">\n            {formatPriceString(invoice.taxes)}\n          </div>\n        </div>\n\n        {discounts &&\n          <div>\n            <div className=\"order-summary-form-group\">\n              <strong><Components.Translation defaultValue=\"Discount\" i18nKey=\"cartSubTotals.discount\"/></strong>\n              <div className=\"invoice-details\">\n                {formatPriceString(invoice.discounts)}\n              </div>\n            </div>\n            {this.renderDiscountForm()}\n          </div>\n        }\n        {this.renderConditionalDisplay()}\n      </div>\n    );\n  }\n\n  render() {\n    return (\n      <Components.CardGroup>\n        <Components.Card>\n          <Components.CardHeader\n            actAsExpander={false}\n            i18nKeyTitle=\"admin.orderWorkflow.invoice.cardTitle\"\n            title=\"Invoice\"\n          />\n          <Components.CardBody expandable={false}>\n            <LineItems {...this.props} />\n\n            <div className=\"invoice-container\">\n              {this.renderInvoice()}\n            </div>\n\n            <InvoiceActions {...this.props}/>\n          </Components.CardBody>\n        </Components.Card>\n      </Components.CardGroup>\n    );\n  }\n}\n\nregisterComponent(\"Invoice\", Invoice, withMoment);\n\nexport default withMoment(Invoice);\n","import React, { Component } from \"react\";\nimport PropTypes from \"prop-types\";\nimport { formatPriceString } from \"/client/api\";\nimport { Components, registerComponent } from \"@reactioncommerce/reaction-components\";\n\n/**\n * @file InvoiceActions React Component for displaying the actionable data on the invoice section on the orders sideview\n *\n * @module InvoiceActions\n * @extends Component\n */\n\nclass InvoiceActions extends Component {\n  /**\n   * @name InvoiceActions propTypes\n   * @summary React component for displaying the actionable data on the invoice section on the orders sideview\n   * @param {Object} props - React PropTypes\n   * @property {Object} invoice - An object representing an invoice\n   * @property {Array} refunds - An array/list of refunds\n   * @property {Function} handleApprove - A function for approving payments\n   * @property {Function} handleCapturePayment - A function for capturing payments\n   * @property {Function} handleRefund - A function for refunding payments\n   * @property {Object} currency - A object represting current shop currency details\n   * @property {String} printOrder - A string representing the route/path for printed order\n   * @property {Number} adjustedTotal - The calculated adjusted total after refunds/discounts\n   * @property {Bool} paymentCaptured - A boolean indicating whether payment has been captured\n   * @property {Bool} hasRefundingEnabled - A boolean indicating whether payment supports refunds\n   * @property {Bool} paymentApproved - A boolean indicating whether payment has been approved\n   * @property {Bool} paymentPendingApproval - A boolean indicating whether payment is yet to be approved\n   * @property {Bool} showAfterPaymentCaptured - A boolean indicating that status of the order is completed\n   * @property {Bool} isCapturing - A boolean indicating whether payment is being captured\n   * @property {Bool} isRefunding - A boolean indicating whether payment is being refunded\n   * @return {Node} React node containing component for displaying the `invoice` section on the orders sideview\n   */\n  static propTypes = {\n    adjustedTotal: PropTypes.number,\n    currency: PropTypes.object,\n    handleApprove: PropTypes.func,\n    handleCapturePayment: PropTypes.func,\n    handleRefund: PropTypes.func,\n    hasRefundingEnabled: PropTypes.bool,\n    invoice: PropTypes.object,\n    isCapturing: PropTypes.bool,\n    isRefunding: PropTypes.bool,\n    paymentApproved: PropTypes.bool,\n    paymentCaptured: PropTypes.bool,\n    paymentPendingApproval: PropTypes.bool,\n    printOrder: PropTypes.string,\n    showAfterPaymentCaptured: PropTypes.bool\n  }\n\n  state = {\n    value: 0\n  }\n\n  renderCapturedTotal() {\n    const { invoice } = this.props;\n\n    return (\n      <div className=\"invoice-summary\">\n        <span className=\"invoice-label captured-total\">\n          <strong><Components.Translation defaultValue=\"Captured Total\" i18nKey=\"admin.invoice.capturedTotal\"/></strong>\n        </span>\n\n        <div className=\"invoice-details\">\n          <strong>{formatPriceString(invoice.total)}</strong>\n        </div>\n      </div>\n    );\n  }\n\n  renderAdjustedTotal() {\n    const { adjustedTotal } = this.props;\n\n    return (\n      <div className=\"invoice-summary\">\n        <span className=\"invoice-label adjusted-total\">\n          <strong><Components.Translation defaultValue=\"Adjusted Total\" i18nKey=\"admin.invoice.adjustedTotal\"/></strong>\n        </span>\n\n        <div className=\"invoice-details\">\n          <strong>{formatPriceString(adjustedTotal)}</strong>\n        </div>\n      </div>\n    );\n  }\n\n  renderRefundForm() {\n    const { adjustedTotal } = this.props;\n\n    return (\n      <div>\n        {this.props.hasRefundingEnabled &&\n          <div className=\"flex refund-container\">\n            <div className=\"refund-input\">\n              <Components.NumericInput\n                numericType=\"currency\"\n                value={this.state.value}\n                maxValue={adjustedTotal}\n                format={this.props.currency}\n                classNames={{\n                  input: {\n                    amount: true\n                  }\n                }}\n                onChange={(event, value) => {\n                  this.setState({\n                    value\n                  });\n                }}\n              />\n            </div>\n\n            <Components.Button\n              className=\"flex-item-fill refund-button\"\n              type=\"button\"\n              status=\"primary\"\n              bezelStyle=\"solid\"\n              disabled={this.props.isRefunding || this.state.value === 0}\n              onClick={(event) => {\n                this.props.handleRefund(event, this.state.value);\n                this.setState({\n                  value: 0\n                });\n              }}\n            >\n              {this.props.isRefunding ?\n                <span id=\"btn-refund-payment\" data-i18n=\"order.applyRefund\">Refunding <i className=\"fa fa-spinner fa-spin\" /></span> :\n                <span id=\"btn-refund-payment\" data-i18n=\"order.applyRefund\">Apply Refund</span>\n              }\n            </Components.Button>\n          </div>\n        }\n\n        {this.props.showAfterPaymentCaptured &&\n          <div className=\"cancel-order-btn\">\n            <Components.Button\n              className=\"btn btn-danger\"\n              bezelStyle=\"solid\"\n              label=\"Cancel Order\"\n              i18nKeyLabel=\"order.cancelOrderLabel\"\n              type=\"button\"\n              data-event-action=\"cancelOrder\"\n              style={{ marginBottom: 10 }}\n              data-i18n=\"order.cancelOrderLabel\"\n            />\n          </div>\n        }\n\n        <a\n          className=\"btn btn-default btn-block\"\n          href={this.props.printOrder}\n          target=\"_blank\"\n          data-i18n=\"app.printInvoice\"\n        >\n          Print Invoice\n        </a>\n      </div>\n    );\n  }\n\n  renderApproval() {\n    if (this.props.paymentPendingApproval) {\n      return (\n        <div className=\"btn-block\">\n          <div>\n            <Components.ButtonSelect\n              buttons= {[\n                {\n                  name: \"Approve\",\n                  i18nKeyLabel: \"order.approveInvoice\",\n                  active: true,\n                  status: \"success\",\n                  eventAction: \"approveInvoice\",\n                  bgColor: \"bg-success\",\n                  buttonType: \"submit\"\n                }, {\n                  name: \"Cancel\",\n                  i18nKeyLabel: \"order.cancelInvoice\",\n                  active: false,\n                  status: \"danger\",\n                  eventAction: \"cancelOrder\",\n                  bgColor: \"bg-danger\",\n                  buttonType: \"button\"\n                }\n              ]}\n            />\n          </div>\n        </div>\n      );\n    }\n\n    if (this.props.paymentApproved) {\n      return (\n        <div className=\"flex\">\n          <a\n            className=\"btn btn-link\"\n            href={this.props.printOrder}\n            target=\"_blank\"\n            data-i18n=\"app.print\"\n          >\n            Print\n          </a>\n\n          <button\n            className=\"btn btn-success flex-item-fill\"\n            type=\"button\"\n            data-event-action=\"capturePayment\"\n            disabled={this.props.isCapturing}\n            onClick = {this.props.handleCapturePayment}\n          >\n\n            {this.props.isCapturing ?\n              <span id=\"btn-capture-payment\">\n                Capturing <i className=\"fa fa-spinner fa-spin\" id=\"btn-processing\" />\n              </span> :\n              <span id=\"btn-capture-payment\" data-i18n=\"order.capturePayment\">Capture Payment</span>\n            }\n          </button>\n        </div>\n      );\n    }\n  }\n\n  render() {\n    return (\n      <form onSubmit={this.props.handleApprove}>\n\n        <div style={{ marginBottom: 15, marginTop: 15 }}>\n          {this.renderApproval()}\n          {this.props.paymentCaptured &&\n            <div className=\"total-container\">\n              {this.renderCapturedTotal()}\n              {this.props.invoice.total !== this.props.adjustedTotal && this.renderAdjustedTotal()}\n              {this.renderRefundForm()}\n            </div>\n          }\n        </div>\n      </form>\n\n    );\n  }\n}\n\nregisterComponent(\"InvoiceActions\", InvoiceActions);\n\nexport default InvoiceActions;\n","import React, { Component } from \"react\";\nimport PropTypes from \"prop-types\";\nimport { isEmpty } from \"lodash\";\nimport classnames from \"classnames\";\nimport { Meteor } from \"meteor/meteor\";\nimport { Roles } from \"meteor/alanning:roles\";\nimport { formatPriceString, Reaction } from \"/client/api\";\nimport { Components, registerComponent } from \"@reactioncommerce/reaction-components\";\n\n/**\n * @file LineItems React Component for displaying the actionable data on the invoice section on the orders sideview\n *\n * @module LineItems\n * @extends Component\n */\n\nclass LineItems extends Component {\n  /**\n   * @name LineItems propTypes\n   * @summary React component for displaying the actionable data on the invoice section on the orders sideview\n   * @param {Object} props - React PropTypes\n   * @property {Object} order - An object represnting an order\n   * @property {Object} uniqueItems - An object representing a line item\n   * @property {Array} editedItems - An array/list of line items that have been edited/modified\n   * @property {Array} selectedItems - An array of all the line items  that have been selected\n   * @property {Function} displayMedia - A function to display line items images\n   * @property {Function} clearRefunds - A function to clear edited/selected items\n   * @property {Function} getRefundedItemsInfo - A function that returns an object containing refunded items info\n   * @property {Function} getSelectedItemsInfo - A function that returns an object containing selected items info\n   * @property {Function} handleInputChange - A function to handle numeric input change\n   * @property {Function} handleItemSelect - A function to handle selecting an item via chekbox\n   * @property {Function} handlePopOverOpen - A function to handle the popover open and close\n   * @property {Function} handleRefundItems - A function to handle items return\n   * @property {Function} handleSelectAllItems - A function to handle selecting of all items\n   * @property {Bool} selectAllItems - A boolean indicating whether all items have been selected\n   * @property {Bool} isRefunding - A boolean indicating whether payment is being refunded\n   * @property {Bool} popOverIsOpen - A boolean indicating whether popover is open\n   * @return {Node} React node containing component for displaying the `invoice` section on the orders sideview\n   */\n  static propTypes = {\n    clearRefunds: PropTypes.func,\n    displayMedia: PropTypes.func,\n    editedItems: PropTypes.array,\n    getRefundedItemsInfo: PropTypes.func,\n    getSelectedItemsInfo: PropTypes.func,\n    handleInputChange: PropTypes.func,\n    handleItemSelect: PropTypes.func,\n    handlePopOverOpen: PropTypes.func,\n    handleRefundItems: PropTypes.func,\n    handleSelectAllItems: PropTypes.func,\n    isRefunding: PropTypes.bool,\n    order: PropTypes.object,\n    popOverIsOpen: PropTypes.bool,\n    selectAllItems: PropTypes.bool,\n    selectedItems: PropTypes.array,\n    uniqueItems: PropTypes.array\n  }\n\n  displayMedia(uniqueItem) {\n    const { displayMedia } = this.props;\n\n    return (\n      <Components.ProductImage\n        item={uniqueItem}\n        displayMedia={displayMedia}\n        size=\"thumbnail\"\n        badge={false}\n      />\n    );\n  }\n\n  renderLineItem(uniqueItem) {\n    return (\n      <div className=\"order-items invoice-item\">\n        <div\n          className=\"order-item form-group order-summary-form-group\"\n        >\n          <div className=\"order-item-media\">\n            <div>\n              {this.displayMedia(uniqueItem)}\n            </div>\n          </div>\n\n          <div className=\"order-item-details\">\n            <div className=\"order-detail-title\">\n              {uniqueItem.title} <br/><small>{uniqueItem.variants.title}</small>\n            </div>\n          </div>\n\n          <div className=\"order-detail-quantity\">\n            <div>{uniqueItem.quantity}</div>\n          </div>\n\n          <div className=\"order-detail-price\">\n            <div className=\"invoice-details\" style={{ marginRight: 15 }}>\n              <strong>{formatPriceString(uniqueItem.variants.price)}</strong>\n            </div>\n          </div>\n\n        </div>\n      </div>\n    );\n  }\n\n  renderPopOverLineItem(uniqueItem) {\n    const className = classnames({\n      \"order-items\": true,\n      \"invoice-item\": true,\n      \"selected\": this.props.selectedItems.includes(uniqueItem._id)\n    });\n\n    return (\n      <div className={className}>\n        <div\n          className=\"order-item form-group order-summary-form-group\"\n        >\n          <div className=\"order-item-media popover-mode\">\n            <Components.RolloverCheckbox\n              className=\"order-invoice-rollover\"\n              checkboxClassName=\"checkbox-avatar checkbox-large\"\n              onChange={() => this.props.handleItemSelect(uniqueItem)}\n              checked={this.props.selectedItems.includes(uniqueItem._id)}\n            >\n              {this.displayMedia(uniqueItem)}\n            </Components.RolloverCheckbox>\n          </div>\n\n          <div className=\"order-item-details\">\n            <div className=\"order-detail-title\">\n              {uniqueItem.title} <br/><small>{uniqueItem.variants.title}</small>\n            </div>\n          </div>\n\n          <div className=\"order-detail-quantity\">\n            {!this.props.selectedItems.includes(uniqueItem._id) && uniqueItem.quantity > 0 ?\n              <Components.NumberTypeInput\n                minValue={0}\n                defaultValue={uniqueItem.quantity}\n                onChange={(event, value) => this.props.handleInputChange(event, value, uniqueItem)}\n                maxValue={uniqueItem.quantity}\n              /> :\n              <div>0</div>\n            }\n          </div>\n\n          <div className=\"order-detail-price\">\n            <div className=\"invoice-details\" style={{ marginRight: 15 }}>\n              <strong>{formatPriceString(uniqueItem.variants.price)}</strong>\n            </div>\n          </div>\n\n        </div>\n      </div>\n    );\n  }\n\n  renderLineItemInvoice(uniqueItem) {\n    return (\n      <div className=\"invoice-order-items\">\n        {this.props.order.taxes &&\n          <div className=\"invoice-order-item-tax\">\n            <b>\n              <Components.Translation\n                defaultValue=\"Tax\"\n                i18nKey=\"cartSubTotals.tax\"\n              />\n            </b>\n            <div className=\"tax-code\">\n              <span>\n                {uniqueItem.taxDetail ? uniqueItem.taxDetail.taxCode : uniqueItem.variants.taxCode}\n              </span>\n            </div>\n            <div className=\"tax-cost\">\n              <span>\n                {uniqueItem.taxDetail ?\n                  formatPriceString(uniqueItem.taxDetail.tax) :\n                  formatPriceString(uniqueItem.tax)\n                }\n              </span>\n            </div>\n          </div>\n        }\n        <div className=\"invoice-order-item-subtotal\">\n          <b>\n            <Components.Translation\n              defaultValue=\"Subtotal\"\n              i18nKey=\"cartSubTotals.subtotal\"\n            />\n          </b>\n          <span><b>{formatPriceString(uniqueItem.variants.price * uniqueItem.quantity)}</b></span>\n        </div>\n      </div>\n    );\n  }\n\n  renderLineItemRefund() {\n    const { editedItems } = this.props;\n    return (\n      <div>\n        <div className=\"invoice-refund-edited\">\n          <div className=\"refund-header\">\n            <div>\n              <Components.Translation defaultValue=\"For Refund\" i18nKey=\"admin.invoice.refundLabel\"/>\n            </div>\n            <div>\n              <Components.Translation defaultValue=\"Items\" i18nKey=\"admin.invoice.refundItems\"/>\n            </div>\n            <div>\n              <Components.Translation defaultValue=\"Total\" i18nKey=\"admin.invoice.refundItemAmount\"/>\n            </div>\n          </div>\n          <div className=\"refund-body\">\n            {editedItems.map((item, index) => (\n              <div className=\"refund-item\" key={index}>\n                <div>\n                  <span>{item.title}</span>\n                </div>\n                <div>\n                  <span>{item.refundedQuantity}</span>\n                </div>\n                <div>\n                  <span>{formatPriceString(item.refundedTotal)}</span>\n                </div>\n              </div>\n            ))}\n            <div className=\"refund-item return\">\n              <div>\n                <b><Components.Translation defaultValue=\"RETURN TOTAL\" i18nKey=\"admin.invoice.refundTotal\"/></b>\n              </div>\n              <div>\n                <span>\n                  {this.props.getRefundedItemsInfo().quantity}\n                </span>\n              </div>\n              <div>\n                <span>\n                  {formatPriceString(this.props.getRefundedItemsInfo().total)}\n                </span>\n              </div>\n            </div>\n          </div>\n        </div>\n      </div>\n    );\n  }\n\n  renderPopOver() {\n    return (\n      <Components.Popover\n        isOpen={this.props.popOverIsOpen}\n        attachment=\"middle center\"\n        targetAttachment=\"middle center\"\n        constraints={[\n          {\n            to: \"scrollParent\",\n            pin: true\n          },\n          {\n            to: \"window\",\n            attachment: \"together\"\n          }\n        ]}\n        showDropdownButton={false}\n      >\n        {this.popOverContent()}\n      </Components.Popover>\n    );\n  }\n\n  popOverContent() {\n    return (\n      <div className=\"invoice-popover\">\n        <div className=\"invoice-popover-controls\">\n          <Components.Checkbox\n            className=\"checkbox-large\"\n            checked={this.props.selectAllItems || this.props.selectedItems.length === this.props.uniqueItems.length}\n            onChange={() => this.props.handleSelectAllItems(this.props.uniqueItems)}\n          />\n          <div className=\"invoice-popover-close\">\n            <Components.Button\n              className=\"rui btn btn-default flat icon-only pull-right\"\n              icon=\"fa-2x fa fa-times\"\n              bezelStyle=\"flat\"\n              onClick={this.props.clearRefunds}\n            />\n          </div>\n        </div>\n        <div>\n          {this.props.uniqueItems.map((uniqueItem, index) => (\n            <div key={index}>\n              {this.renderPopOverLineItem(uniqueItem)}\n              {this.renderLineItemInvoice(uniqueItem)}\n            </div>\n          ))}\n        </div>\n        <div>\n          {!isEmpty(this.props.editedItems) && this.renderLineItemRefund()}\n        </div>\n        <div className=\"invoice-actions\">\n          <div className=\"invoice-action-cancel\">\n            <Components.Button\n              className=\"pull-right\"\n              bezelStyle=\"solid\"\n              status=\"default\"\n              label=\"Cancel\"\n              onClick={this.props.clearRefunds}\n            />\n          </div>\n          <div className=\"invoice-action-refund\">\n            <Components.Button\n              className=\"pull-right\"\n              bezelStyle=\"solid\"\n              status=\"primary\"\n              disabled={this.props.isRefunding || this.props.editedItems.length === 0}\n              onClick={this.props.handleRefundItems}\n            >\n              {this.props.isRefunding ? <span>Refunding <i className=\"fa fa-spinner fa-spin\" /></span> :\n                <span>Refund Items</span>\n              }\n            </Components.Button>\n          </div>\n        </div>\n      </div>\n    );\n  }\n\n  render() {\n    const { uniqueItems } = this.props;\n    return (\n      <Components.Button\n        tagName=\"div\"\n        className={{\n          \"btn\": false,\n          \"btn-default\": false,\n          \"flat\": false,\n          \"invoice\": true,\n          \"invoice-line-items\": true\n        }}\n        onClick={this.props.handlePopOverOpen}\n      >\n        {uniqueItems.map((uniqueItem) => (\n          <div key={uniqueItem._id}> {this.renderLineItem(uniqueItem)} </div>\n        ))}\n\n        {\n          Roles.userIsInRole(Meteor.userId(), [\"orders\", \"dashboard/orders\"], Reaction.getShopId()) &&\n          this.renderPopOver()\n        }\n      </Components.Button>\n    );\n  }\n}\n\nregisterComponent(\"LineItems\", LineItems);\n\nexport default LineItems;\n","import React, { Component } from \"react\";\nimport PropTypes from \"prop-types\";\nimport { Translation, Checkbox, Button, Icon, List, ListItem } from \"@reactioncommerce/reaction-ui\";\n\nclass OrderBulkActionsBar extends Component {\n  static propTypes = {\n    handleBulkPaymentCapture: PropTypes.func,\n    isLoading: PropTypes.object,\n    multipleSelect: PropTypes.bool,\n    orders: PropTypes.array,\n    renderFlowList: PropTypes.bool,\n    selectAllOrders: PropTypes.func,\n    selectedItems: PropTypes.array,\n    setShippingStatus: PropTypes.func,\n    shipping: PropTypes.object,\n    toggleShippingFlowList: PropTypes.func\n  };\n\n  constructor() {\n    super();\n    this.state = {\n      printed: false\n    };\n  }\n\n  renderLoadingSpinner(status) {\n    return this.props.isLoading[status] ?\n      <Icon className=\"bulk-actions-icons-select\" icon=\"fa fa-spinner fa-pulse\" />\n      :\n      <Icon className=\"bulk-actions-icons-select\" icon=\"fa fa-circle-o\"/>;\n  }\n\n  onClick = (event, value) => {\n    this.setState({\n      [value]: true\n    });\n  }\n\n  renderShippingFLowList() {\n    if (this.props.renderFlowList) {\n      return (\n        <List className=\"shipping-flow-list\">\n          <ListItem\n            label=\"Print Invoice and Pick Sheet\"\n            i18nKeyLabel=\"order.printInvoiceAndPickSheet\"\n            value=\"printed\"\n            onClick={this.onClick}\n            listItemClassName={this.state.printed ? \"selected\" : \"\"}\n          >\n            {this.state.printed ?\n              <div>\n                <Icon className=\"bulk-actions-icons\" icon=\"fa fa-print\"/>\n                <Icon className=\"bulk-actions-icons-select\" icon=\"fa fa-check\"/>\n              </div>\n              :\n              <Icon className=\"bulk-actions-icons-select\" icon=\"fa fa-print\"/>\n            }\n          </ListItem>\n          <ListItem\n            label=\"Picked\"\n            i18nKeyLabel=\"order.picked\"\n            value=\"picked\"\n            onClick={this.handleListItemClick}\n            listItemClassName={this.props.shipping.picked ? \"selected\" : \"\"}\n          >\n            {this.props.shipping.picked && !this.props.isLoading.picked ?\n              <div>\n                <Icon className=\"bulk-actions-icons\" icon=\"fa fa-print\"/>\n                <Icon className=\"bulk-actions-icons-select\" icon=\"fa fa-check\"/>\n              </div>\n              :\n              this.renderLoadingSpinner(\"picked\")\n            }\n          </ListItem>\n          <ListItem\n            label=\"Packed\"\n            i18nKeyLabel=\"order.packed\"\n            value=\"packed\"\n            onClick={this.handleListItemClick}\n            listItemClassName={this.props.shipping.packed ? \"selected\" : \"\"}\n          >\n            {this.props.shipping.packed && !this.props.isLoading.packed ?\n              <Icon className=\"bulk-actions-icons-select\" icon=\"fa fa-check\"/>\n              :\n              this.renderLoadingSpinner(\"packed\")\n            }\n          </ListItem>\n          <ListItem\n            label={this.props.shipping.labeled ? \"Generate Label\" : \"Labeled\"}\n            i18nKeyLabel={this.props.shipping.labeled ? \"order.generateLabel\" : \"order.labeled\"}\n            value=\"labeled\"\n            onClick={this.handleListItemClick}\n            listItemClassName={this.props.shipping.labeled ? \"selected\" : \"\"}\n          >\n            {this.props.shipping.labeled && !this.props.isLoading.labeled ?\n              <div>\n                <Icon className=\"bulk-actions-icons\" icon=\"fa fa-print\"/>\n                <Icon className=\"bulk-actions-icons-select\" icon=\"fa fa-check\"/>\n              </div>\n              :\n              this.renderLoadingSpinner(\"labeled\")\n            }\n          </ListItem>\n          <ListItem\n            label=\"Shipped\"\n            i18nKeyLabel=\"order.shipped\"\n            value=\"shipped\"\n            onClick={this.handleListItemClick}\n            listItemClassName={this.props.shipping.shipped ? \"selected\" : \"\"}\n          >\n            {this.props.shipping.shipped && !this.props.isLoading.shipped ?\n              <div>\n                <Icon className=\"bulk-actions-icons\" icon=\"fa fa-paper-plane-o\" />\n                <Icon className=\"bulk-actions-icons-select\" icon=\"fa fa-check\"/>\n              </div>\n              :\n              this.renderLoadingSpinner(\"shipped\")\n            }\n          </ListItem>\n        </List>\n      );\n    }\n  }\n\n  handleListItemClick = (event, value) => {\n    if (this.props.setShippingStatus) {\n      this.props.setShippingStatus(value, this.props.selectedItems, this.props.orders);\n    }\n  }\n\n  handlePaymentClick = () => {\n    if (this.props.handleBulkPaymentCapture) {\n      this.props.handleBulkPaymentCapture(this.props.selectedItems, this.props.orders);\n    }\n  }\n\n  render() {\n    const { orders, multipleSelect, selectedItems, selectAllOrders } = this.props;\n\n    if (selectedItems.length > 0) {\n      return (\n        <div className=\"bulk-order-actions-bar\">\n          <Checkbox\n            className=\"checkbox-large orders-checkbox\"\n            checked={selectedItems.length === orders.length || multipleSelect}\n            name=\"orders-checkbox\"\n            onChange={() => selectAllOrders(orders, (selectedItems.length === orders.length || multipleSelect))}\n          />\n          <Translation\n            className=\"selected-orders\"\n            defaultValue={`${selectedItems.length} Selected`}\n            i18nKey={`${selectedItems.length} order.selected`}\n          />\n          <Button\n            status=\"success\"\n            bezelStyle=\"solid\"\n            className=\"capture-orders-button\"\n            label={this.props.isLoading.capturePayment ? \"Capturing\" : \"Capture\"}\n            i18nKeyLabel={this.props.isLoading.capturePayment ? \"order.capturing\" : \"order.capture\"}\n            icon={this.props.isLoading.capturePayment ? \"fa fa-spinner fa-pulse\" : \"\"}\n            iconAfter={true}\n            onClick={this.handlePaymentClick}\n          />\n          <Button\n            status=\"default\"\n            bezelStyle=\"solid\"\n            className=\"bulk-actions-button\"\n            label=\"Bulk Actions\"\n            i18nKeyLabel=\"order.bulkActions\"\n            icon=\"fa fa-chevron-down\"\n            iconAfter={true}\n            onClick={this.props.toggleShippingFlowList}\n          />\n          {this.renderShippingFLowList()}\n        </div>\n      );\n    }\n    return null;\n  }\n}\n\nexport default OrderBulkActionsBar;\n","import React, { Component } from \"react\";\nimport PropTypes from \"prop-types\";\nimport { Components } from \"@reactioncommerce/reaction-components\";\nimport OrderTable from \"../containers/orderTableContainer\";\nimport OrderFilter from \"./orderFilter\";\nimport OrderSearch from \"./orderSearch\";\n\nclass OrderDashboard extends Component {\n  static propTypes = {\n    clearFilter: PropTypes.func,\n    currentPage: PropTypes.number,\n    filterDates: PropTypes.func,\n    filterShippingStatus: PropTypes.func,\n    filterWorkflowStatus: PropTypes.func,\n    handleBulkPaymentCapture: PropTypes.func,\n    handleChange: PropTypes.func,\n    handleClick: PropTypes.func,\n    handleSelect: PropTypes.func,\n    isLoading: PropTypes.object,\n    multipleSelect: PropTypes.bool,\n    onPageChange: PropTypes.func,\n    onPageSizeChange: PropTypes.func,\n    orders: PropTypes.array,\n    pages: PropTypes.number,\n    query: PropTypes.object,\n    renderFlowList: PropTypes.bool,\n    searchQuery: PropTypes.string,\n    selectAllOrders: PropTypes.func,\n    selectedItems: PropTypes.array,\n    setShippingStatus: PropTypes.func,\n    shipping: PropTypes.object,\n    toggleShippingFlowList: PropTypes.func\n  }\n\n  state = {\n    detailClassName: \"\",\n    listClassName: \"order-icon-toggle\",\n    openList: true,\n    orders: this.props.orders\n  }\n\n  handleListToggle = () => {\n    this.setState({\n      detailClassName: \"\",\n      listClassName: \"order-icon-toggle\",\n      openList: true\n    });\n  }\n\n  handleDetailToggle = () => {\n    this.setState({\n      detailClassName: \"order-icon-toggle\",\n      listClassName: \"\",\n      openList: false\n    });\n  }\n\n  render() {\n    return (\n      <div className=\"order-dashboard-container\">\n        <OrderSearch\n          handleChange={this.props.handleChange}\n        />\n        <OrderFilter\n          clearFilter={this.props.clearFilter}\n          filterDates={this.props.filterDates}\n          filterShippingStatus={this.props.filterShippingStatus}\n          filterWorkflowStatus={this.props.filterWorkflowStatus}\n        />\n        {this.props.orders.length ?\n          <div className=\"container-fluid-sm order-details-list-container\">\n            <div className=\"order-toggle-buttons-container\">\n              <div className=\"order-toggle-buttons\">\n                <button\n                  className={`order-toggle-btn ${this.state.detailClassName}`}\n                  onClick={this.handleDetailToggle}\n                >\n                  <i className=\"fa fa-th-list\" />\n                </button>\n\n                <button\n                  className={`order-toggle-btn ${this.state.listClassName}`}\n                  onClick={this.handleListToggle}\n                >\n                  <i className=\"fa fa-list\" />\n                </button>\n              </div>\n            </div>\n\n            <OrderTable\n              orders={this.props.orders}\n              isOpen={this.state.openList}\n              onPageChange={this.props.onPageChange}\n              onPageSizeChange={this.props.onPageSizeChange}\n              pages={this.props.pages}\n              page={this.props.currentPage}\n            />\n          </div> :\n          <div className=\"container-fluid-sm order-details-list-container\">\n            <div className=\"empty-view-message\">\n              <Components.Icon icon=\"fa fa-sun-o\" />\n              <Components.Translation defaultValue={\"No orders found\"} i18nKey={\"order.ordersNotFound\"} />\n            </div>\n          </div>\n        }\n      </div>\n    );\n  }\n}\n\nexport default OrderDashboard;\n","import React, { Component } from \"react\";\nimport PropTypes from \"prop-types\";\nimport { i18next } from \"/client/api\";\nimport { Components, registerComponent } from \"@reactioncommerce/reaction-components\";\nimport * as Constants from \"../../lib/constants\";\n\nclass OrderFilter extends Component {\n  static propTypes = {\n    clearFilter: PropTypes.func,\n    filterDates: PropTypes.func,\n    filterShippingStatus: PropTypes.func,\n    filterWorkflowStatus: PropTypes.func\n  }\n\n  constructor(props) {\n    super(props);\n    this.state = {\n      startDate: null,\n      endDate: null,\n      workflowLabel: \"status\",\n      shippingLabel: \"shippingStatus\",\n      classNames: {\n        date: \"\",\n        shipping: \"\",\n        workflow: \"\"\n      }\n    };\n  }\n\n  buttonElement() {\n    return (\n      <Components.Button\n        className=\"order-filter-dropdown-button\"\n      >\n        <i className=\"fa fa-angle-down\" />\n      </Components.Button>\n    );\n  }\n\n  dateLabel() {\n    if (this.state.startDate && this.state.endDate) {\n      return (\n        <span>{this.state.startDate.format(\"MM/DD\")} - {this.state.endDate.format(\"MM/DD\")}</span>\n      );\n    }\n    return (\n      <Components.Translation defaultValue=\"Date Range\" i18nKey=\"admin.table.filter.dateRange\" />\n    );\n  }\n\n  shippingLabel() {\n    if (this.state.classNames.shipping === \"active\") {\n      return (\n        <Components.Translation\n          defaultValue={this.state.shippingLabel}\n          i18nKey={`order.${this.state.shippingLabel}`}\n        />\n      );\n    }\n    return (\n      <Components.Translation\n        defaultValue=\"Shipping Status\"\n        i18nKey={`admin.table.filter.${this.state.shippingLabel}`}\n      />\n    );\n  }\n\n  handleDatesChange = (startDate, endDate) => {\n    this.setState({\n      startDate,\n      endDate,\n      classNames: { ...this.state.classNames, date: \"active\" }\n    });\n    this.props.filterDates(startDate, endDate);\n  }\n\n  handleWorkflowChange = (event, value) => {\n    this.setState({\n      workflowLabel: value,\n      classNames: { ...this.state.classNames, workflow: \"active\" }\n    });\n\n    this.props.filterWorkflowStatus(event, value);\n  }\n\n  handleShippingChange = (event, value) => {\n    this.setState({\n      shippingLabel: value,\n      classNames: { ...this.state.classNames, shipping: \"active\" }\n    });\n\n    this.props.filterShippingStatus(event, value);\n  }\n\n  render() {\n    const attachmentDirection = i18next.dir() === \"rtl\" ? \"left\" : \"right\";\n\n    return (\n      <div className=\"order-filter-bar\">\n        <div className=\"order-filter-item\">\n          <div className=\"order-filter-label\">\n            <span className={`order-filter-name capitalize ${this.state.classNames.workflow}`}>\n              <Components.Translation\n                defaultValue={this.state.workflowLabel}\n                i18nKey={`admin.table.filter.${this.state.workflowLabel}`}\n              />\n            </span>\n            <div className=\"order-filter-icons\">\n              <Components.Button\n                className={`order-filter-button ${this.state.classNames.workflow}`}\n                onClick={() => {\n                  this.setState({\n                    workflowLabel: \"status\",\n                    classNames: { ...this.state.classNames, workflow: \"\" }\n                  });\n                  this.props.clearFilter(\"workflow\");\n                }}\n              >\n                <i className=\"fa fa-filter\" />\n              </Components.Button>\n              <Components.DropDownMenu\n                buttonElement={this.buttonElement()}\n                menuClassName=\"status-dropdown\"\n                className=\"order-menu-item-dropdown\"\n                onChange={this.handleWorkflowChange}\n                attachment={`bottom ${attachmentDirection}`}\n                targetAttachment={`top ${attachmentDirection}`}\n              >\n                {Constants.workflowStatus.map((status, index) => (\n                  <Components.MenuItem\n                    key={index}\n                    label={status.label}\n                    i18nKeyLabel={`admin.table.filter.${status.value}`}\n                    value={status.value}\n                  />\n                ))}\n              </Components.DropDownMenu>\n            </div>\n          </div>\n        </div>\n\n        <div className=\"order-filter-item\">\n          <div className=\"order-filter-label\">\n            <span className={`order-filter-name ${this.state.classNames.date}`}>\n              {this.dateLabel()}\n            </span>\n            <div className=\"order-filter-icons\">\n              <Components.Button\n                className={`order-filter-button ${this.state.classNames.date}`}\n                onClick={() => {\n                  this.setState({\n                    startDate: null,\n                    endDate: null,\n                    classNames: { ...this.state.classNames, date: \"\" }\n                  });\n                  this.props.clearFilter(\"date\");\n                }}\n              >\n                <i className=\"fa fa-filter\" />\n              </Components.Button>\n              <Components.DropDownMenu\n                buttonElement={this.buttonElement()}\n                menuClassName=\"calender-dropdown\"\n                className=\"order-menu-item-dropdown\"\n                attachment={`bottom ${attachmentDirection}`}\n                targetAttachment={`top ${attachmentDirection}`}\n                isClickable={false}\n              >\n                <Components.CalendarPicker\n                  initialStartDate={this.state.startDate}\n                  initialEndDate={this.state.endDate}\n                  onDatesChange={this.handleDatesChange}\n                />\n              </Components.DropDownMenu>\n            </div>\n          </div>\n        </div>\n\n        <div className=\"order-filter-item hidden-xs\">\n          <div className=\"order-filter-label\">\n            <span className={`order-filter-name capitalize ${this.state.classNames.shipping}`}>\n              {this.shippingLabel()}\n            </span>\n            <div className=\"order-filter-icons\">\n              <Components.Button\n                className={`order-filter-button ${this.state.classNames.shipping}`}\n                onClick={() => {\n                  this.setState({\n                    shippingLabel: \"shippingStatus\",\n                    classNames: { ...this.state.classNames, shipping: \"\" }\n                  });\n                  this.props.clearFilter(\"shipping\");\n                }}\n              >\n                <i className=\"fa fa-filter\" />\n              </Components.Button>\n              <Components.DropDownMenu\n                buttonElement={this.buttonElement()}\n                menuClassName=\"status-dropdown\"\n                className=\"order-menu-item-dropdown\"\n                onChange={this.handleShippingChange}\n                attachment={`bottom ${attachmentDirection}`}\n                targetAttachment={`top ${attachmentDirection}`}\n              >\n                {Constants.shippingStatus.map((status, index) => (\n                  <Components.MenuItem\n                    key={index}\n                    label={status.label}\n                    i18nKeyLabel={`order.${status.value}`}\n                    value={status.value}\n                  />\n                ))}\n              </Components.DropDownMenu>\n            </div>\n          </div>\n        </div>\n      </div>\n    );\n  }\n}\n\nregisterComponent(\"OrderFilter\", OrderFilter);\n\nexport default OrderFilter;\n","import React, { Component } from \"react\";\nimport { compose } from \"recompose\";\nimport PropTypes from \"prop-types\";\nimport { Components, registerComponent, withPermissions } from \"@reactioncommerce/reaction-components\";\n\n/**\n * @file React class for Search bar on Order Dashboard\n *\n * @module OrderSearch\n * @extends Component\n */\n\nclass OrderSearch extends Component {\n  /**\n   * @name OrderSearch propTypes\n   * @type {propTypes}\n   * @summary horizontal search bar on the order dashboard. can be replaced with registerComponent as \"OrderSearch\"\n   * @property {Function} handleChange - function called to update state field on parent after search input text changes\n   */\n  static propTypes = {\n    handleChange: PropTypes.func\n  };\n\n  state = {\n    value: \"\"\n  }\n\n  /**\n   * @name handleChange()\n   * @method\n   * @summary handleChange - handler to call onchange of search input\n   * @param {string} event - event object\n   * @return {null} -\n   */\n  handleChange = (event) => {\n    const { value } = event.target;\n\n    this.setState({\n      value\n    });\n    this.props.handleChange(value);\n  }\n\n  /**\n   * @name handleClear()\n   * @method\n   * @summary handleClear - handler called onclick of search clear text\n   * @return {null} -\n   */\n  handleClear = () => {\n    this.setState({\n      value: \"\"\n    });\n    this.props.handleChange(\"\");\n  }\n\n  render() {\n    return (\n      <div className=\"order-search\">\n        <Components.TextField\n          className=\"search-input\"\n          onChange={this.handleChange}\n          value={this.state.value}\n          i18nKeyPlaceholder=\"admin.table.search.placeholder\"\n        />\n        <i className=\"fa fa-search fa-fw\"/>\n        <Components.Button\n          className=\"search-clear\"\n          i18nKeyLabel=\"admin.table.search.clearSearch\"\n          label=\"Clear\"\n          onClick={this.handleClear}\n        />\n      </div>\n    );\n  }\n}\n\nregisterComponent(\"OrderSearch\", OrderSearch, withPermissions({ roles: [\"orders\"] }));\n\nexport default compose(withPermissions({ roles: [\"orders\"] }))(OrderSearch);\n","import React, { Component } from \"react\";\nimport PropTypes from \"prop-types\";\nimport { withMoment, Components } from \"@reactioncommerce/reaction-components\";\nimport { Badge, ClickToCopy } from \"@reactioncommerce/reaction-ui\";\nimport { getOrderRiskBadge, getOrderRiskStatus, getBillingInfo, getShippingInfo, getTaxRiskStatus } from \"../helpers\";\n\nclass OrderSummary extends Component {\n  static propTypes = {\n    dateFormat: PropTypes.func,\n    moment: PropTypes.func,\n    order: PropTypes.object,\n    printableLabels: PropTypes.func,\n    profileShippingAddress: PropTypes.object,\n    shipmentStatus: PropTypes.func,\n    tracking: PropTypes.func\n  }\n\n  badgeStatus() {\n    const { order } = this.props;\n    const orderStatus = order && order.workflow && order.workflow.status;\n\n    if (orderStatus === \"new\") {\n      return \"info\";\n    } else if (orderStatus === \"coreOrderWorkflow/processing\") {\n      return \"success\";\n    } else if (orderStatus === \"coreOrderWorkflow/canceled\") {\n      return \"danger\";\n    } else if (orderStatus === \"coreOrderWorkflow/completed\") {\n      return \"primary\";\n    }\n\n    return \"default\";\n  }\n\n  orderLink() {\n    const orderId = this.props.order._id;\n    return orderId;\n  }\n\n  truncateId() {\n    const orderId = this.props.order._id;\n    const shortId = orderId.slice(-5);\n\n    return shortId;\n  }\n\n  render() {\n    const { dateFormat, moment, order, profileShippingAddress, printableLabels, tracking } = this.props;\n    const paymentMethod = getBillingInfo(order).paymentMethod || {};\n    const invoice = getBillingInfo(order).invoice || {};\n    const shipmentMethod = getShippingInfo(order).shipmentMethod || {};\n    const orderPaymentRisk = getOrderRiskStatus(order);\n    const orderTaxRisk = getTaxRiskStatus(order);\n\n    return (\n      <div>\n        <div\n          className=\"order-summary-form-group bg-info\"\n          style={{ lineHeight: 3, marginTop: -15, marginRight: -15, marginLeft: -15 }}\n        >\n          <strong style={{ marginLeft: 15 }}>{profileShippingAddress && profileShippingAddress.fullName}</strong>\n          <div className=\"invoice-details\" style={{ marginRight: 15, position: \"relative\" }}>\n            {order.email}\n          </div>\n        </div>\n\n        <div className=\"roll-up-invoice-list\">\n          <div className=\"roll-up-content\">\n            <div style={{ marginBottom: 4 }}>\n              <Badge\n                badgeSize=\"large\"\n                i18nKeyLabel={`cartDrawer.${order && order.workflow && order.workflow.status}`}\n                label={order && order.workflow && order.workflow.status}\n                status={this.badgeStatus()}\n              />\n              {orderPaymentRisk &&\n                <Badge\n                  badgeSize=\"large\"\n                  className={`risk-info risk-info-detail ${orderPaymentRisk}`}\n                  i18nKeyLabel={`admin.orderRisk.${orderPaymentRisk}`}\n                  label={orderPaymentRisk}\n                  status={getOrderRiskBadge(orderPaymentRisk)}\n                />\n              }\n              {orderTaxRisk &&\n                <div className=\"risk-info risk-tax\">\n                  <Components.Translation\n                    i18nKey=\"admin.orderRisk.orderTaxRisk\"\n                    defaultValue=\"Tax not calulated\"\n                  />\n                </div>\n              }\n            </div>\n\n            <div className=\"order-summary-form-group\">\n              <strong data-i18n=\"order.orderId\">Order ID</strong>\n              <div className=\"invoice-details\" style={{ cursor: \"pointer\" }}>\n                <ClickToCopy\n                  copyToClipboard={this.orderLink()}\n                  displayText={order._id}\n                  i18nKeyTooltip=\"admin.orderWorkflow.summary.copyOrderLink\"\n                  tooltip=\"Copy Order Link\"\n                />\n              </div>\n            </div>\n\n            <div className=\"order-summary-form-group\">\n              <strong data-i18n=\"order.created\">Created</strong>\n              <div className=\"invoice-details\">\n                {moment && moment(order.createdAt).fromNow()} | {dateFormat(order.createdAt, \"MM/D/YYYY\")}\n              </div>\n            </div>\n\n            <div className=\"order-summary-form-group\">\n              <strong data-i18n=\"order.processor\">Processor</strong>\n              <div className=\"invoice-details\">\n                {paymentMethod && paymentMethod.processor}\n              </div>\n            </div>\n\n            <div className=\"order-summary-form-group\">\n              <strong data-i18n=\"order.payment\">Payment</strong>\n              <div className=\"invoice-details\">\n                {paymentMethod.storedCard} ({invoice.total})\n              </div>\n            </div>\n\n            <div className=\"order-summary-form-group\">\n              <strong data-i18n=\"order.transaction\">Transaction</strong>\n              <div className=\"invoice-details\">\n                {paymentMethod.transactionId}\n              </div>\n            </div>\n\n            <div className=\"order-summary-form-group\">\n              <strong data-i18n=\"orderShipping.carrier\">Carrier</strong>\n              <div className=\"invoice-details\">\n                {shipmentMethod.carrier} - {shipmentMethod.label}\n              </div>\n            </div>\n\n            <div className=\"order-summary-form-group\">\n              <strong data-i18n=\"orderShipping.tracking\">Tracking</strong>\n              <div className=\"invoice-details\">\n                {tracking()}\n              </div>\n            </div>\n\n            {printableLabels() &&\n              <div className=\"order-summary-form-group\">\n                <strong data-i18n=\"orderShipping.printLabels\">Labels</strong>\n                {printableLabels().shippingLabelUrl ?\n                  <a className=\"invoice-details\" href={printableLabels().shippingLabelUrl} target=\"_blank\">\n                    <span data-i18n=\"orderShipping.printShippingLabel\">Print Shipping</span>\n                  </a> :\n                  <a className=\"invoice-details\" href={printableLabels().customsLabelUrl} target=\"_blank\">\n                    <span data-i18n=\"orderShipping.printCustomsLabel\">Print Customs</span>\n                  </a>\n                }\n              </div>\n            }\n          </div>\n        </div>\n\n        <br/>\n        <div className=\"order-summary-form-group\">\n          <strong data-i18n=\"orderShipping.shipTo\">Ship to</strong>\n          <div className=\"invoice-details\">\n            <strong>Phone: </strong>{profileShippingAddress.phone}\n          </div>\n        </div>\n\n        <div style={{ marginTop: 4 }}>\n          <span>{profileShippingAddress.fullName}</span>\n          <br/>\n          <span>{profileShippingAddress.address1}</span>\n          {profileShippingAddress.address2 && <span><br/>{profileShippingAddress.address2}</span>}\n          <br/>\n          <span>\n            {profileShippingAddress.city}, {profileShippingAddress.region}, {profileShippingAddress.country} {profileShippingAddress.postal}\n          </span>\n        </div>\n      </div>\n    );\n  }\n}\n\nexport default withMoment(OrderSummary);\n","import React, { Component } from \"react\";\nimport PropTypes from \"prop-types\";\nimport Avatar from \"react-avatar\";\nimport classnames from \"classnames/dedupe\";\nimport { formatPriceString, i18next } from \"/client/api\";\nimport { Orders } from \"/lib/collections\";\nimport { Components, withMoment } from \"@reactioncommerce/reaction-components\";\nimport { Badge, ClickToCopy, Icon, Translation, Checkbox, Loading, SortableTable } from \"@reactioncommerce/reaction-ui\";\nimport { getOrderRiskBadge, getOrderRiskStatus, getBillingInfo, getShippingInfo } from \"../helpers\";\nimport OrderTableColumn from \"./orderTableColumn\";\nimport OrderBulkActionsBar from \"./orderBulkActionsBar\";\n\n\nconst classNames = {\n  colClassNames: {\n    name: \"order-table-column-name\",\n    email: \"order-table-column-email\",\n    date: \"order-table-column-date hidden-xs hidden-sm\",\n    id: \"order-table-column-id hidden-xs hidden-sm\",\n    total: \"order-table-column-total\",\n    shipping: \"order-table-column-shipping hidden-xs hidden-sm\",\n    status: \"order-table-column-status\",\n    control: \"order-table-column-control\"\n  },\n  headerClassNames: {\n    name: \"order-table-header-name\",\n    email: \"order-table-header-email\",\n    date: \"order-table-header-date hidden-xs hidden-sm\",\n    id: \"order-table-header-id hidden-xs hidden-sm\",\n    total: \"order-table-header-total\",\n    shipping: \"order-table-header-shipping hidden-xs hidden-sm\",\n    status: \"order-table-header-status\",\n    control: \"order-table-header-control\"\n  }\n};\n\nclass OrderTable extends Component {\n  static propTypes = {\n    displayMedia: PropTypes.func,\n    handleBulkPaymentCapture: PropTypes.func,\n    handleClick: PropTypes.func,\n    handleSelect: PropTypes.func,\n    isLoading: PropTypes.object,\n    isOpen: PropTypes.bool,\n    moment: PropTypes.func,\n    multipleSelect: PropTypes.bool,\n    onPageChange: PropTypes.func,\n    onPageSizeChange: PropTypes.func,\n    orders: PropTypes.array,\n    page: PropTypes.number,\n    pages: PropTypes.number,\n    query: PropTypes.object,\n    renderFlowList: PropTypes.bool,\n    selectAllOrders: PropTypes.func,\n    selectedItems: PropTypes.array,\n    setShippingStatus: PropTypes.func,\n    shipping: PropTypes.object,\n    toggleShippingFlowList: PropTypes.func\n  }\n\n  /**\n   * Fullfilment Badge\n   * @param  {Object} order object containing info for order and coreOrderWorkflow\n   * @return {string} A string containing the type of Badge\n   */\n  fulfillmentBadgeStatus(order) {\n    const orderStatus = order.workflow.status;\n\n    if (orderStatus === \"new\") {\n      return \"info\";\n    } else if (orderStatus === \"coreOrderWorkflow/processing\") {\n      return \"success\";\n    } else if (orderStatus === \"coreOrderWorkflow/canceled\") {\n      return \"danger\";\n    } else if (orderStatus === \"coreOrderWorkflow/completed\") {\n      return \"primary\";\n    }\n\n    return \"default\";\n  }\n\n  renderOrderButton(order) {\n    const startWorkflow = order.workflow.status === \"new\";\n    const classes = classnames({\n      \"rui\": true,\n      \"btn\": true,\n      \"btn-success\": startWorkflow\n    });\n    const chevronDirection = i18next.dir() === \"rtl\" ? \"left\" : \"right\";\n\n    return (\n      <button className={classes} onClick={() => this.props.handleClick(order, startWorkflow)}>\n        <Icon icon={`fa fa-chevron-${chevronDirection}`} />\n      </button>\n    );\n  }\n\n  renderOrderInfo(order) {\n    const { displayMedia, moment } = this.props;\n    const invoice = getBillingInfo(order).invoice || {};\n\n    return (\n      <div className=\"order-info\">\n        <div className=\"order-totals\">\n          <span className=\"order-data order-data-date\">\n            <strong>Date: </strong>\n            {(moment && moment(order.createdAt).fromNow()) || order.createdAt.toLocaleString()}\n            &nbsp;|&nbsp;\n            {(moment && moment(order.createdAt).format(\"MM/D/YYYY\")) || order.createdAt.toLocaleString()}\n          </span>\n\n          <span className=\"order-data order-data-id\">\n            <strong>Order ID: </strong>\n            <ClickToCopy\n              copyToClipboard={order._id}\n              displayText={order._id}\n              i18nKeyTooltip=\"admin.orderWorkflow.summary.copyOrderLink\"\n              tooltip=\"Copy Order Link\"\n            />\n          </span>\n\n          <span className=\"order-data order-data-total\">\n            <strong>Total: {formatPriceString(invoice.total)}</strong>\n          </span>\n        </div>\n\n        <div className=\"order-items\">\n          {order.items.map((item, i) => (\n            <div className=\"order-item\" key={i}>\n              <div className=\"order-item-media\">\n                <Components.ProductImage\n                  item={item}\n                  displayMedia={displayMedia}\n                  size=\"thumbnail\"\n                  badge={true}\n                />\n              </div>\n            </div>\n          ))}\n        </div>\n      </div>\n    );\n  }\n\n  renderShipmentInfo(order) {\n    const emailAddress = order.email ||\n    <Translation defaultValue={\"Email not available\"} i18nKey={\"admin.orderWorkflow.ordersList.emailNotFound\"} />;\n    const shipping = getShippingInfo(order);\n    const orderRisk = getOrderRiskStatus(order);\n\n    return (\n      <div className=\"shipment-info\">\n        <div className=\"customer-info\">\n          <Avatar\n            email={order.email}\n            round={true}\n            name={shipping.address && shipping.address.fullName}\n            size={30}\n            className=\"rui-order-avatar\"\n          />\n          <strong>{shipping.address && shipping.address.fullName}</strong> | {emailAddress}\n          {orderRisk &&\n            <Badge\n              className=\"risk-info\"\n              i18nKeyLabel={`admin.orderRisk.${orderRisk}`}\n              status={getOrderRiskBadge(orderRisk)}\n            />\n          }\n        </div>\n        <div className=\"workflow-info\">\n          <Badge\n            badgeSize=\"large\"\n            i18nKeyLabel={`cartDrawer.${shipping.workflow && shipping.workflow.status}`}\n            label={shipping.workflow && shipping.workflow.status}\n            status=\"basic\"\n          />\n          <Badge\n            badgeSize=\"large\"\n            i18nKeyLabel={`cartDrawer.${order.workflow.status}`}\n            label={order.workflow.status}\n            status={this.fulfillmentBadgeStatus(order)}\n          />\n        </div>\n      </div>\n    );\n  }\n\n  /**\n   * Render Sortable Table for the list view for orders\n   * @param {Object} orders object containing info for order\n   * @return {Component} SortableTable list of orders\n   */\n\n  renderOrderCard(order) {\n    return (\n      <div className=\"rui card order\">\n        <div className=\"content\" onClick={() => this.props.handleClick(order, false)} role=\"presentation\">\n          {this.renderShipmentInfo(order)}\n          {this.renderOrderInfo(order)}\n        </div>\n        <div className=\"controls\" onClick={() => this.props.handleClick(order)} role=\"presentation\">\n          {this.renderOrderButton(order)}\n        </div>\n      </div>\n    );\n  }\n\n  onPageChange = (index) => {\n    this.props.onPageChange(index);\n  }\n\n  onPageSizeChange = (pageSize, pageIndex) => {\n    this.props.onPageSizeChange(pageSize, pageIndex);\n  }\n\n  render() {\n    let getTrProps;\n    let getTheadProps;\n    let getTrGroupProps;\n    let getTableProps;\n\n    const customColumnMetadata = [];\n\n    if (this.props.isOpen) {\n      // Render order list column/row data\n      const filteredFields = {\n        name: {\n          accessor: (row) => getShippingInfo(row).address && getShippingInfo(row).address.fullName,\n          id: \"shippingFullName\"\n        },\n        email: {\n          accessor: \"email\",\n          id: \"email\"\n        },\n        date: {\n          accessor: \"createdAt\",\n          id: \"createdAt\"\n        },\n        id: {\n          accessor: \"_id\",\n          id: \"_id\"\n        },\n        total: {\n          accessor: (row) => getBillingInfo(row).invoice && getBillingInfo(row).invoice.total,\n          id: \"billingTotal\"\n        },\n        shipping: {\n          accessor: (row) => getShippingInfo(row).workflow && getShippingInfo(row).workflow.status,\n          id: \"shippingStatus\"\n        },\n        status: {\n          accessor: \"workflow.status\",\n          id: \"workflow.status\"\n        },\n        control: {\n          accessor: \"\",\n          id: \"\"\n        }\n      };\n\n      const columnNames = Object.keys(filteredFields);\n\n      getTheadProps = () => ({\n        className: \"order-table-thead\"\n      });\n\n      getTrGroupProps = () => ({\n        className: \"order-table-tr-group\"\n      });\n\n      getTableProps = () => ({\n        className: \"order-table-list\"\n      });\n\n      // https://react-table.js.org/#/story/cell-renderers-custom-components\n      columnNames.forEach((columnName) => {\n        let colHeader;\n        let resizable = true;\n        let sortable = true;\n        let columnNameLabel;\n\n        // Add custom styles for the column name `name`\n        if (columnName === \"name\") {\n          colHeader = () => (\n            <div className=\"order-table-name-cell\">\n              <Checkbox\n                className=\"order-header-checkbox checkbox-large\"\n                checked={this.props.multipleSelect}\n                name=\"orders-checkbox\"\n                onChange={() => this.props.selectAllOrders(this.props.orders, this.props.multipleSelect)}\n              />\n              <span style={{ marginTop: 10 }}>\n                <Translation\n                  defaultValue=\"Name\"\n                  i18nKey=\"admin.table.headers.name\"\n                />\n              </span>\n            </div>\n          );\n        } else if (columnName === \"control\") {\n          colHeader = \" \";\n          resizable = false;\n          sortable = false;\n        } else {\n          columnNameLabel = i18next.t(`admin.table.headers.${columnName}`);\n        }\n\n\n        const columnMeta = {\n          accessor: filteredFields[columnName].accessor,\n          id: filteredFields[columnName].id,\n          Header: colHeader || columnNameLabel,\n          headerClassName: classNames.headerClassNames[columnName],\n          className: classNames.colClassNames[columnName],\n          resizable,\n          sortable,\n          Cell: (row) => (\n            <OrderTableColumn\n              row={row}\n              handleClick={this.props.handleClick}\n              handleSelect={this.props.handleSelect}\n              selectedItems={this.props.selectedItems}\n              fulfillmentBadgeStatus={this.fulfillmentBadgeStatus}\n            />\n          )\n        };\n        customColumnMetadata.push(columnMeta);\n      });\n    } else {\n      // Render order detail column/row data\n\n      const columnMeta = {\n        Cell: (row) => (<div>{this.renderOrderCard(row.original)}</div>)\n      };\n\n      customColumnMetadata.push(columnMeta);\n\n      getTheadProps = () => ({\n        className: \"hidden\"\n      });\n\n      getTrGroupProps = () => ({\n        className: \"order-table-details-tr-group\"\n      });\n\n      getTableProps = () => ({\n        className: \"order-table-detail\"\n      });\n\n      getTrProps = () => ({\n        className: \"order-table-detail-tr\"\n      });\n    }\n\n    return (\n      <div className=\"order-details-table\">\n        {this.props.isOpen &&\n          <OrderBulkActionsBar\n            shipping={this.props.shipping}\n            multipleSelect={this.props.multipleSelect}\n            orders={this.props.orders}\n            selectAllOrders={this.props.selectAllOrders}\n            selectedItems={this.props.selectedItems}\n            setShippingStatus={this.props.setShippingStatus}\n            isLoading={this.props.isLoading}\n            renderFlowList={this.props.renderFlowList}\n            toggleShippingFlowList={this.props.toggleShippingFlowList}\n            handleBulkPaymentCapture={this.props.handleBulkPaymentCapture}\n          />\n        }\n        <SortableTable\n          tableClassName={`rui order table -highlight ${this.props.selectedItems.length > 0 ?\n            \"table-header-hidden\" :\n            \"table-header-visible\"}`\n          }\n          collection={Orders}\n          data={this.props.orders}\n          query={this.props.query}\n          columnMetadata={customColumnMetadata}\n          externalLoadingComponent={Loading}\n          filterType=\"none\"\n          selectedRows={this.props.selectedItems}\n          getTheadProps={getTheadProps}\n          getTrProps={getTrProps}\n          getTrGroupProps={getTrGroupProps}\n          getPaginationProps={() => ({\n            className: \"order-table-pagination-visible\"\n          })}\n          getTableProps={getTableProps}\n          showPaginationTop={!this.props.selectedItems.length}\n          onPageChange={this.onPageChange}\n          onPageSizeChange={this.onPageSizeChange}\n          pages={this.props.pages}\n          page={this.props.page}\n          manual={true}\n        />\n      </div>\n    );\n  }\n}\n\nexport default withMoment(OrderTable);\n","import React, { Component } from \"react\";\nimport PropTypes from \"prop-types\";\nimport classnames from \"classnames/dedupe\";\nimport { formatPriceString, i18next } from \"/client/api\";\nimport Avatar from \"react-avatar\";\nimport { withMoment } from \"@reactioncommerce/reaction-components\";\nimport { Badge, ClickToCopy, Icon, RolloverCheckbox, Checkbox } from \"@reactioncommerce/reaction-ui\";\nimport { getOrderRiskBadge, getOrderRiskStatus, getBillingInfo, getTaxRiskStatus } from \"../helpers\";\n\nclass OrderTableColumn extends Component {\n  static propTypes = {\n    fulfillmentBadgeStatus: PropTypes.func,\n    handleClick: PropTypes.func,\n    handleSelect: PropTypes.func,\n    moment: PropTypes.func,\n    row: PropTypes.object,\n    selectedItems: PropTypes.array\n  }\n\n  renderCheckboxOnSelect(row) {\n    if (this.props.selectedItems.length) {\n      return (\n        <div className=\"all-checkboxes\">\n          <Checkbox\n            className=\"checkbox-large checkbox-avatar\"\n            name={row.original._id}\n            onChange={this.props.handleSelect}\n            checked={this.props.selectedItems.includes(row.original._id)}\n          />\n        </div>\n      );\n    }\n    return (\n      <RolloverCheckbox\n        checkboxClassName=\"checkbox-avatar checkbox-large\"\n        name={row.original._id}\n        onChange={this.props.handleSelect}\n        checked={this.props.selectedItems.includes(row.original._id)}\n      >\n        <Avatar\n          email={row.original.email}\n          round={true}\n          name={row.value}\n          size={30}\n          className=\"rui-order-avatar\"\n        />\n      </RolloverCheckbox>\n    );\n  }\n\n  render() {\n    const columnAccessor = this.props.row.column.id;\n    const invoice = getBillingInfo(this.props.row.original).invoice || {};\n    const { moment } = this.props;\n    const orderPaymentRisk = getOrderRiskStatus(this.props.row.original);\n    const orderTaxRisk = getTaxRiskStatus(this.props.row.original);\n    const orderRisk = orderPaymentRisk || orderTaxRisk;\n\n    if (columnAccessor === \"shippingFullName\") {\n      return (\n        <div style={{ display: \"inline-flex\" }}>\n          {this.renderCheckboxOnSelect(this.props.row)}\n          <strong className=\"orders-full-name\">\n            {this.props.row.value}\n            {orderRisk &&\n              <Badge\n                className=\"risk-info\"\n                i18nKeyLabel={`admin.orderRisk.${orderRisk}`}\n                status={getOrderRiskBadge(orderRisk)}\n              />\n            }\n          </strong>\n        </div>\n      );\n    }\n    if (columnAccessor === \"email\") {\n      return (\n        <div style={{ marginTop: 7 }}>{this.props.row.value}</div>\n      );\n    }\n    if (columnAccessor === \"createdAt\") {\n      const createdDate = (moment && moment(this.props.row.value).format(\"MM/D/YYYY\")) || this.props.row.value.toLocaleString();\n      return (\n        <div style={{ marginTop: 7 }}>{createdDate}</div>\n      );\n    }\n    if (columnAccessor === \"_id\") {\n      const id = this.props.row.original._id;\n      const truncatedId = id.substring(0, 4);\n      return (\n        <div style={{ marginTop: 7 }}>\n          <ClickToCopy\n            copyToClipboard={id}\n            displayText={truncatedId}\n            i18nKeyTooltip=\"admin.orderWorkflow.summary.copyOrderLink\"\n            tooltip=\"Copy Order Link\"\n          />\n        </div>\n      );\n    }\n    if (columnAccessor === \"billingTotal\") {\n      return (\n        <div style={{ marginTop: 7 }}>\n          <strong>{formatPriceString(invoice.total)}</strong>\n        </div>\n      );\n    }\n    if (columnAccessor === \"shippingStatus\") {\n      return (\n        <Badge\n          className=\"orders-badge\"\n          badgeSize=\"large\"\n          i18nKeyLabel={`admin.table.data.status.${this.props.row.value}`}\n          label={this.props.row.value}\n          status=\"basic\"\n        />\n      );\n    }\n    if (columnAccessor === \"workflow.status\") {\n      return (\n        <div className=\"status-info\">\n          <Badge\n            badgeSize=\"large\"\n            i18nKeyLabel={`admin.table.data.status.${this.props.row.value}`}\n            label={this.props.row.value}\n            status={this.props.fulfillmentBadgeStatus(this.props.row.original)}\n          />\n        </div>\n      );\n    }\n    if (columnAccessor === \"\") {\n      const startWorkflow = this.props.row.original.workflow.status === \"new\";\n      const classes = classnames({\n        \"rui\": true,\n        \"btn\": true,\n        \"btn-success\": startWorkflow\n      });\n      const chevronDirection = i18next.dir() === \"rtl\" ? \"left\" : \"right\";\n\n      return (\n        <button className={classes} onClick={() => this.props.handleClick(this.props.row.original, startWorkflow)}>\n          <Icon icon={`fa fa-chevron-${chevronDirection}`} />\n        </button>\n      );\n    }\n    return (\n      <span>{this.props.row.value}</span>\n    );\n  }\n}\n\nexport default withMoment(OrderTableColumn);\n","import React, { Component } from \"react\";\nimport PropTypes from \"prop-types\";\nimport { registerComponent } from \"@reactioncommerce/reaction-components\";\nimport { Badge } from \"@reactioncommerce/reaction-ui\";\n\nconst MEDIA_PLACEHOLDER = \"/resources/placeholder.gif\";\n\nclass ProductImage extends Component {\n  static propTypes = {\n    badge: PropTypes.bool,\n    displayMedia: PropTypes.func.isRequired,\n    item: PropTypes.shape({\n      quantity: PropTypes.number,\n      title: PropTypes.string.isRequired\n    }).isRequired,\n    mode: PropTypes.oneOf([\"span\", \"img\"]),\n    size: PropTypes.string\n  }\n\n  static defaultProps = {\n    badge: false,\n    mode: \"img\",\n    size: \"large\"\n  };\n\n  renderBadge() {\n    const { badge, item } = this.props;\n\n    if (!badge) return false;\n\n    return (\n      <Badge\n        badgeSize=\"small\"\n        label={item.quantity}\n        status=\"success\"\n      />\n    );\n  }\n\n  render() {\n    const { displayMedia, item, mode, size } = this.props;\n\n    const fileRecord = displayMedia(item);\n\n    let mediaUrl;\n    if (fileRecord) {\n      mediaUrl = fileRecord.url({ store: size });\n    } else {\n      mediaUrl = MEDIA_PLACEHOLDER;\n    }\n\n    if (mode === \"span\") {\n      return (\n        <span className=\"product-image\" style={{ backgroundImage: `url('${mediaUrl}')` }}/>\n      );\n    }\n\n    return (\n      <div>\n        <img\n          alt={item.title}\n          className={`product-image product-image-${size}`}\n          src={mediaUrl}\n        />\n        {this.renderBadge()}\n      </div>\n    );\n  }\n}\n\nregisterComponent(\"ProductImage\", ProductImage);\n\nexport default ProductImage;\n","import React, { Component } from \"react\";\nimport PropTypes from \"prop-types\";\nimport accounting from \"accounting-js\";\nimport _ from \"lodash\";\nimport { Meteor } from \"meteor/meteor\";\nimport { i18next, Logger, Reaction, formatPriceString } from \"/client/api\";\nimport { Packages } from \"/lib/collections\";\nimport { getPrimaryMediaForOrderItem } from \"/lib/api\";\nimport { composeWithTracker, registerComponent } from \"@reactioncommerce/reaction-components\";\nimport Invoice from \"../components/invoice.js\";\nimport { getOrderRiskStatus, getOrderRiskBadge, getBillingInfo } from \"../helpers\";\n\nclass InvoiceContainer extends Component {\n  static propTypes = {\n    currency: PropTypes.object,\n    isFetching: PropTypes.bool,\n    order: PropTypes.object,\n    refunds: PropTypes.array,\n    uniqueItems: PropTypes.array\n  }\n\n  constructor(props) {\n    super(props);\n    this.state = {\n      currency: props.currency,\n      refunds: props.refunds,\n      order: props.order,\n      isUpdating: false,\n      isCapturing: false,\n      isRefunding: false,\n      popOverIsOpen: false,\n      selectAllItems: false,\n      selectedItems: [],\n      editedItems: [],\n      value: undefined\n    };\n  }\n\n  componentWillReceiveProps(nextProps) {\n    if (nextProps !== this.props) {\n      this.setState({\n        order: nextProps.order,\n        currency: nextProps.currency,\n        refunds: nextProps.refunds\n      });\n    }\n  }\n\n  handlePopOverOpen = (event) => {\n    event.preventDefault();\n    this.setState({\n      popOverIsOpen: true\n    });\n  }\n\n  handleClearRefunds = () => {\n    this.setState({\n      editedItems: [],\n      selectedItems: [],\n      selectAllItems: false,\n      popOverIsOpen: false\n    });\n  };\n\n  handleItemSelect = (lineItem) => {\n    let { selectedItems, editedItems } = this.state;\n\n    // if item is not in the selectedItems array\n    if (!selectedItems.includes(lineItem._id)) {\n      // include it in the array\n      selectedItems.push(lineItem._id);\n\n      // Add every quantity in the row to be refunded\n      const isEdited = editedItems.find((item) => item.id === lineItem._id);\n\n      const adjustedQuantity = lineItem.quantity - this.state.value;\n\n      if (isEdited) {\n        editedItems = editedItems.filter((item) => item.id !== lineItem._id);\n        isEdited.refundedTotal = lineItem.variants.price * adjustedQuantity;\n        isEdited.refundedQuantity = adjustedQuantity;\n        editedItems.push(isEdited);\n      } else {\n        editedItems.push({\n          id: lineItem._id,\n          title: lineItem.title,\n          refundedTotal: lineItem.variants.price * lineItem.quantity,\n          refundedQuantity: lineItem.quantity\n        });\n      }\n\n      this.setState({\n        editedItems,\n        selectedItems,\n        isUpdating: true,\n        selectAllItems: false\n      });\n    } else {\n      // remove item from selected items\n      selectedItems = selectedItems.filter((id) => id !== lineItem._id);\n\n      // remove item from edited quantities\n      editedItems = editedItems.filter((item) => item.id !== lineItem._id);\n\n      this.setState({\n        editedItems,\n        selectedItems,\n        isUpdating: true,\n        selectAllItems: false\n      });\n    }\n  }\n\n  handleSelectAllItems = (uniqueItems) => {\n    if (this.state.selectAllItems) {\n      // if all items are selected, clear the selectedItems array\n      // and set selectAllItems to false\n      this.setState({\n        selectedItems: [],\n        editedItems: [],\n        selectAllItems: false\n      });\n    } else {\n      // if there are no selected items, or if there are some items that have been\n      // selected but not all of them, loop through the items array and return a\n      // new array with item ids only, then set the selectedItems array with the itemIds\n      const updateEditedItems = [];\n\n      const itemIds = uniqueItems.map((item) => {\n        // on select all refunded quantity should be all existing items\n        updateEditedItems.push({\n          id: item._id,\n          title: item.title,\n          refundedTotal: item.variants.price * item.quantity,\n          refundedQuantity: item.quantity\n        });\n        return item._id;\n      });\n      this.setState({\n        editedItems: updateEditedItems,\n        selectedItems: itemIds,\n        selectAllItems: true,\n        isUpdating: true\n      });\n    }\n  }\n\n  handleInputChange = (event, value, lineItem) => {\n    let { editedItems } = this.state;\n\n    const isEdited = editedItems.find((item) => item.id === lineItem._id);\n\n    const refundedQuantity = lineItem.quantity - value;\n\n    if (isEdited) {\n      editedItems = editedItems.filter((item) => item.id !== lineItem._id);\n      isEdited.refundedTotal = lineItem.variants.price * refundedQuantity;\n      isEdited.refundedQuantity = refundedQuantity;\n      if (refundedQuantity !== 0) {\n        editedItems.push(isEdited);\n      }\n    } else if (refundedQuantity !== 0) {\n      editedItems.push({\n        id: lineItem._id,\n        title: lineItem.title,\n        refundedTotal: lineItem.variants.price * refundedQuantity,\n        refundedQuantity\n      });\n    }\n    this.setState({\n      editedItems,\n      value\n    });\n  }\n\n  getRefundedItemsInfo = () => {\n    const { editedItems } = this.state;\n    return {\n      quantity: editedItems.reduce((acc, item) => acc + item.refundedQuantity, 0),\n      total: editedItems.reduce((acc, item) => acc + item.refundedTotal, 0),\n      items: editedItems\n    };\n  }\n\n  hasRefundingEnabled() {\n    const { order } = this.state;\n    const orderBillingInfo = getBillingInfo(order);\n    const paymentMethodId = orderBillingInfo.paymentMethod && orderBillingInfo.paymentMethod.paymentPackageId;\n    const paymentMethodName = orderBillingInfo.paymentMethod && orderBillingInfo.paymentMethod.paymentSettingsKey;\n    const paymentMethod = Packages.findOne({ _id: paymentMethodId });\n    const isRefundable = paymentMethod && paymentMethod.settings && paymentMethod.settings[paymentMethodName]\n      && paymentMethod.settings[paymentMethodName].support.includes(\"Refund\");\n\n    return isRefundable;\n  }\n\n  handleApprove = (event) => {\n    event.preventDefault();\n\n    const { order } = this.state;\n    approvePayment(order);\n  }\n\n  handleCapturePayment = (event) => {\n    event.preventDefault();\n\n    this.setState({\n      isCapturing: true\n    });\n\n    const { order } = this.state;\n    capturePayments(order, () => {\n      this.setState({\n        isCapturing: false\n      });\n    });\n  }\n\n  handleCancelPayment = (event) => {\n    event.preventDefault();\n    const { order } = this.state;\n    const invoiceTotal = getBillingInfo(order).invoice && getBillingInfo(order).invoice.total;\n    const currencySymbol = this.state.currency.symbol;\n\n    Meteor.subscribe(\"Packages\", Reaction.getShopId());\n    const packageId = getBillingInfo(order).paymentMethod && getBillingInfo(order).paymentMethod.paymentPackageId;\n    const settingsKey = getBillingInfo(order).paymentMethod && getBillingInfo(order).paymentMethod.paymentSettingsKey;\n    // check if payment provider supports de-authorize\n    const checkSupportedMethods = Packages.findOne({\n      _id: packageId,\n      shopId: Reaction.getShopId()\n    }).settings[settingsKey].support;\n\n    const orderStatus = getBillingInfo(order).paymentMethod && getBillingInfo(order).paymentMethod.status;\n    const orderMode = getBillingInfo(order).paymentMethod && getBillingInfo(order).paymentMethod.mode;\n\n    let alertText;\n    if (_.includes(checkSupportedMethods, \"de-authorize\") ||\n      (orderStatus === \"completed\" && orderMode === \"capture\")) {\n      alertText = i18next.t(\"order.applyRefundDuringCancelOrder\", { currencySymbol, invoiceTotal });\n    }\n\n    // TODO: Redesign the cancel order workflow to be more intuitive\n    Alerts.alert({\n      title: i18next.t(\"order.cancelOrder\"),\n      text: alertText,\n      type: \"warning\",\n      showCancelButton: true,\n      showCloseButton: true,\n      confirmButtonColor: \"#98afbc\",\n      cancelButtonColor: \"#98afbc\",\n      confirmButtonText: i18next.t(\"order.cancelOrderNoRestock\"),\n      cancelButtonText: i18next.t(\"order.cancelOrderThenRestock\")\n    }, (isConfirm, cancel) => {\n      let returnToStock;\n      if (isConfirm) {\n        returnToStock = false;\n        return Meteor.call(\"orders/cancelOrder\", order, returnToStock);\n      }\n      if (cancel === \"cancel\") {\n        returnToStock = true;\n        return Meteor.call(\"orders/cancelOrder\", order, returnToStock);\n      }\n    });\n  }\n\n  handleRefund = (event, value) => {\n    event.preventDefault();\n\n    const currencySymbol = this.state.currency.symbol;\n    const { order } = this.state;\n    const paymentMethod = orderCreditMethod(order) && orderCreditMethod(order).paymentMethod;\n    const orderTotal = paymentMethod && paymentMethod.amount;\n    const discounts = paymentMethod && paymentMethod.discounts;\n    const refund = value;\n    const { refunds } = this.state;\n    const refundTotal = refunds && Array.isArray(refunds) && refunds.reduce((acc, item) => acc + parseFloat(item.amount), 0);\n\n    let adjustedTotal;\n\n    // TODO extract Stripe specific fullfilment payment handling out of core.\n    // Stripe counts discounts as refunds, so we need to re-add the discount to not \"double discount\" in the adjustedTotal\n    if (paymentMethod && paymentMethod.processor === \"Stripe\") {\n      adjustedTotal = accounting.toFixed(orderTotal + discounts - refundTotal, 2);\n    } else {\n      adjustedTotal = accounting.toFixed(orderTotal - refundTotal, 2);\n    }\n\n    if (refund > adjustedTotal) {\n      Alerts.inline(\"Refund(s) total cannot be greater than adjusted total\", \"error\", {\n        placement: \"coreOrderRefund\",\n        i18nKey: \"order.invalidRefund\",\n        autoHide: 10000\n      });\n    } else {\n      Alerts.alert({\n        title: i18next.t(\"order.applyRefundToThisOrder\", { refund, currencySymbol }),\n        showCancelButton: true,\n        confirmButtonText: i18next.t(\"order.applyRefund\")\n      }, (isConfirm) => {\n        if (isConfirm) {\n          this.setState({\n            isRefunding: true\n          });\n          Meteor.call(\"orders/refunds/create\", order._id, paymentMethod, refund, (error, result) => {\n            if (error) {\n              Alerts.alert(error.reason);\n            }\n            if (result) {\n              Alerts.toast(i18next.t(\"mail.alerts.emailSent\"), \"success\");\n            }\n            this.setState({\n              isRefunding: false\n            });\n          });\n        }\n      });\n    }\n  }\n\n  handleRefundItems = () => {\n    const paymentMethod = orderCreditMethod(this.state.order) && orderCreditMethod(this.state.order).paymentMethod;\n    const orderMode = paymentMethod && paymentMethod.mode;\n    const { order } = this.state;\n\n    // Check if payment is yet to be captured approve and capture first before return\n    if (orderMode === \"authorize\") {\n      Alerts.alert({\n        title: i18next.t(\"order.refundItemsTitle\"),\n        type: \"warning\",\n        text: i18next.t(\"order.refundItemsApproveAlert\", {\n          refundItemsQuantity: this.getRefundedItemsInfo().quantity,\n          totalAmount: formatPriceString(getBillingInfo(order).invoice && getBillingInfo(order).invoice.total)\n        }),\n        showCancelButton: true,\n        confirmButtonText: i18next.t(\"order.approveInvoice\")\n      }, (isConfirm) => {\n        if (isConfirm) {\n          approvePayment(order);\n          this.alertToCapture(order);\n        }\n      });\n    } else {\n      this.alertToRefund(order);\n    }\n  }\n\n  alertToCapture = (order) => {\n    Alerts.alert({\n      title: i18next.t(\"order.refundItemsTitle\"),\n      text: i18next.t(\"order.refundItemsCaptureAlert\", {\n        refundItemsQuantity: this.getRefundedItemsInfo().quantity,\n        totalAmount: formatPriceString(getBillingInfo(order).invoice && getBillingInfo(order).invoice.total)\n      }),\n      type: \"warning\",\n      showCancelButton: true,\n      confirmButtonText: i18next.t(\"order.capturePayment\")\n    }, (isConfirm) => {\n      if (isConfirm) {\n        capturePayments(order);\n        this.alertToRefund(order);\n      }\n    });\n  }\n\n  alertToRefund = (order) => {\n    const paymentMethod = orderCreditMethod(order) && orderCreditMethod(order).paymentMethod;\n    const orderMode = paymentMethod && paymentMethod.mode;\n    const refundInfo = this.getRefundedItemsInfo();\n\n    Alerts.alert({\n      title: i18next.t(\"order.refundItemsTitle\"),\n      text: i18next.t(\"order.refundItemsAlert\", {\n        refundItemsQuantity: refundInfo.quantity,\n        refundItemsTotal: formatPriceString(refundInfo.total)\n      }),\n      showCancelButton: true,\n      confirmButtonText: i18next.t(\"order.refundAmount\")\n    }, (isConfirm) => {\n      if (isConfirm) {\n        this.setState({\n          isRefunding: true\n        });\n\n        // Set warning if order is not yet captured\n        if (orderMode !== \"capture\") {\n          Alerts.alert({\n            text: i18next.t(\"order.refundItemsWait\"),\n            type: \"warning\"\n          });\n          this.setState({\n            isRefunding: false\n          });\n          return;\n        }\n\n        Meteor.call(\"orders/refunds/refundItems\", this.state.order._id, paymentMethod, refundInfo, (error, result) => {\n          if (result.refund === false) {\n            Alerts.alert(result.error.reason || result.error.error);\n          }\n          if (result.refund === true) {\n            Alerts.toast(i18next.t(\"mail.alerts.emailSent\"), \"success\");\n\n            Alerts.alert({\n              text: i18next.t(\"order.refundItemsSuccess\"),\n              type: \"success\",\n              allowOutsideClick: false\n            });\n          }\n\n          this.setState({\n            isRefunding: false,\n            popOverIsOpen: false,\n            editedItems: [],\n            selectedItems: []\n          });\n        });\n      }\n    });\n  }\n\n  render() {\n    return (\n      <Invoice\n        {...this.props}\n\n        clearRefunds={this.handleClearRefunds}\n        handlePopOverOpen={this.handlePopOverOpen}\n        handleSelectAllItems={this.handleSelectAllItems}\n        onClose={this.handleClose}\n        togglePopOver={this.togglePopOver}\n        handleInputChange={this.handleInputChange}\n        handleItemSelect={this.handleItemSelect}\n        displayMedia={getPrimaryMediaForOrderItem}\n        toggleUpdating={this.toggleUpdating}\n        handleRefundItems={this.handleRefundItems}\n        getRefundedItemsInfo={this.getRefundedItemsInfo}\n        handleApprove={this.handleApprove}\n        isAdjusted={this.isAdjusted}\n        handleCapturePayment={this.handleCapturePayment}\n        handleRefund={this.handleRefund}\n        hasRefundingEnabled={this.hasRefundingEnabled()}\n\n        value={this.state.value}\n        refunds={this.state.refunds}\n        isCapturing={this.state.isCapturing}\n        selectAllItems={this.state.selectAllItems}\n        selectedItems={this.state.selectedItems}\n        currency={this.state.currency}\n        isRefunding={this.state.isRefunding}\n        popOverIsOpen={this.state.popOverIsOpen}\n        editedItems={this.state.editedItems}\n        isUpdating={this.state.isUpdating}\n      />\n    );\n  }\n}\n\n/**\n * @method orderCreditMethod\n * @summary helper method to return the order payment object\n * @param {Object} order - object representing an order\n * @return {Object} object representing entire payment method\n */\nfunction orderCreditMethod(order) {\n  const billingInfo = getBillingInfo(order);\n\n  if (billingInfo.paymentMethod && billingInfo.paymentMethod.method === \"credit\") {\n    return billingInfo;\n  }\n}\n\n/**\n * @method approvePayment\n * @summary helper method to approve payment\n * @param {Object} order - object representing an order\n * @return {null} null\n */\nfunction approvePayment(order) {\n  const paymentMethod = orderCreditMethod(order);\n  const orderTotal = accounting.toFixed(\n    paymentMethod.invoice.subtotal\n    + paymentMethod.invoice.shipping\n    + paymentMethod.invoice.taxes\n    , 2\n  );\n\n  const { discount } = order;\n  // TODO: review Discount cannot be greater than original total price\n  // logic is probably not valid any more. Discounts aren't valid below 0 order.\n  if (discount > orderTotal) {\n    Alerts.inline(\"Discount cannot be greater than original total price\", \"error\", {\n      placement: \"coreOrderShippingInvoice\",\n      i18nKey: \"order.invalidDiscount\",\n      autoHide: 10000\n    });\n  } else if (orderTotal === accounting.toFixed(discount, 2)) {\n    Alerts.alert({\n      title: i18next.t(\"order.fullDiscountWarning\"),\n      showCancelButton: true,\n      confirmButtonText: i18next.t(\"order.applyDiscount\")\n    }, (isConfirm) => {\n      if (isConfirm) {\n        Meteor.call(\"orders/approvePayment\", order, (error) => {\n          if (error) {\n            Logger.warn(error);\n          }\n        });\n      }\n    });\n  } else {\n    Meteor.call(\"orders/approvePayment\", order, (error) => {\n      if (error) {\n        Logger.warn(error);\n        if (error.error === \"orders/approvePayment.discount-amount\") {\n          Alerts.inline(\"Discount cannot be greater than original total price\", \"error\", {\n            placement: \"coreOrderShippingInvoice\",\n            i18nKey: \"order.invalidDiscount\",\n            autoHide: 10000\n          });\n        }\n      }\n    });\n  }\n}\n\n/**\n * @method capturePayments\n * @summary helper method to capture payments\n * @param {object} order - object representing an order\n * @param {function} onCancel - called on clicking cancel in alert dialog\n * @return {null} null\n */\nfunction capturePayments(order, onCancel) {\n  const capture = () => {\n    Meteor.call(\"orders/capturePayments\", order._id);\n    if (order.workflow.status === \"new\") {\n      Meteor.call(\"workflow/pushOrderWorkflow\", \"coreOrderWorkflow\", \"processing\", order);\n\n      Reaction.Router.setQueryParams({\n        filter: \"processing\",\n        _id: order._id\n      });\n    }\n  };\n\n  // before capturing, check if there's a payment risk on order; alert admin before capture\n  if (getOrderRiskStatus(order)) {\n    alertDialog()\n      .then(capture)\n      .catch(onCancel);\n  } else {\n    capture();\n  }\n\n  function alertDialog() {\n    let alertType = \"warning\";\n    const riskBadge = getOrderRiskBadge(getOrderRiskStatus(order));\n    // use red alert color for high risk level\n    if (riskBadge === \"danger\") {\n      alertType = \"error\";\n    }\n\n    return Alerts.alert({\n      title: i18next.t(\"admin.orderRisk.riskCapture\"),\n      text: i18next.t(\"admin.orderRisk.riskCaptureWarn\"),\n      type: alertType,\n      showCancelButton: true,\n      cancelButtonText: i18next.t(\"admin.settings.cancel\"),\n      confirmButtonText: i18next.t(\"admin.settings.continue\")\n    });\n  }\n}\n\nconst composer = (props, onData) => {\n  const { order, refunds } = props;\n\n  const shopBilling = getBillingInfo(order);\n  const creditMethod = orderCreditMethod(order);\n\n  const paymentMethod = creditMethod && creditMethod.paymentMethod;\n  const orderStatus = creditMethod && creditMethod.paymentMethod && creditMethod.paymentMethod.status;\n  const orderDiscounts = creditMethod && creditMethod.invoice.discounts;\n\n  const paymentApproved = orderStatus === \"approved\";\n  const showAfterPaymentCaptured = orderStatus === \"completed\";\n  const paymentCaptured = _.includes([\"completed\", \"refunded\", \"partialRefund\"], orderStatus);\n  const paymentPendingApproval = _.includes([\"created\", \"adjustments\", \"error\"], orderStatus);\n\n  // get whether adjustments can be made\n  const canMakeAdjustments = !_.includes([\"approved\", \"completed\", \"refunded\", \"partialRefund\"], orderStatus);\n\n  // get adjusted Total\n  let adjustedTotal;\n  const refundTotal = refunds && Array.isArray(refunds) && refunds.reduce((acc, item) => acc + parseFloat(item.amount), 0);\n\n  if (paymentMethod && paymentMethod.processor === \"Stripe\") {\n    adjustedTotal = Math.abs(paymentMethod.amount + orderDiscounts - refundTotal);\n  }\n  adjustedTotal = Math.abs(paymentMethod && paymentMethod.amount - refundTotal);\n\n  // get invoice\n  const invoice = Object.assign({}, shopBilling.invoice, {\n    totalItems: _.sumBy(order.items, (o) => o.quantity)\n  });\n\n  // get discounts\n  const enabledPaymentsArr = [];\n  const apps = Reaction.Apps({\n    provides: \"paymentMethod\",\n    enabled: true\n  });\n  for (const app of apps) {\n    if (app.enabled === true) enabledPaymentsArr.push(app);\n  }\n  let discounts = false;\n\n  for (const enabled of enabledPaymentsArr) {\n    if (enabled.packageName === \"discount-codes\") {\n      discounts = true;\n      break;\n    }\n  }\n\n  // get unique lineItems\n  const shipment = props.currentData.fulfillment;\n\n  const uniqueItems = order.items.map((item) => {\n    const shipping = shipment && shipment.shipmentMethod;\n    item.shipping = shipping;\n    if (order.taxes !== undefined) {\n      const taxes = order.taxes.slice(0, -1);\n\n      if (taxes.length !== 0) {\n        const taxDetail = taxes.find((tax) => tax.lineNumber === item._id);\n        item.taxDetail = taxDetail;\n      }\n    }\n    return item;\n  });\n\n  // print order\n  const printOrder = Reaction.Router.pathFor(\"dashboard/pdf/orders\", {\n    hash: {\n      id: props.order._id,\n      shipment: props.currentData.fulfillment && props.currentData.fulfillment._id\n    }\n  });\n\n  onData(null, {\n    uniqueItems,\n    invoice,\n    discounts,\n    adjustedTotal,\n    paymentCaptured,\n    paymentPendingApproval,\n    paymentApproved,\n    canMakeAdjustments,\n    showAfterPaymentCaptured,\n    printOrder,\n\n    currentData: props.currentData,\n    currency: props.currency,\n    isFetching: props.isFetching,\n    order: props.order,\n    refunds: props.refunds\n  });\n};\n\nregisterComponent(\"InvoiceContainer\", InvoiceContainer, composeWithTracker(composer));\n\nexport default composeWithTracker(composer)(InvoiceContainer);\n","import React, { Component } from \"react\";\nimport { compose } from \"recompose\";\nimport { registerComponent } from \"@reactioncommerce/reaction-components\";\nimport { filterShippingStatus, filterWorkflowStatus } from \"../helpers\";\nimport OrderSubscription from \"./orderSubscriptionContainer\";\n\nconst wrapComponent = (Comp) => (\n  class OrderDashboardContainer extends Component {\n    constructor(props) {\n      super(props);\n      this.state = {\n        query: {},\n        searchQuery: \"\",\n        shippingFilter: \"\",\n        workflowFilter: \"\",\n        skip: 0,\n        pageSize: 10,\n        page: 0\n      };\n    }\n\n    filterDates = (startDate, endDate) => {\n      const { query } = this.state;\n\n      if (startDate && endDate) {\n        // generate time for start and end of day\n        const formattedEndDate = endDate.endOf(\"day\");\n        const formattedStartDate = startDate.startOf(\"day\");\n\n        query.createdAt = {\n          $gte: new Date(formattedStartDate.toISOString()),\n          $lte: new Date(formattedEndDate.toISOString())\n        };\n        this.setState({ query });\n      }\n    }\n\n    /**\n     * handleSearchChange - handler called on search query change\n     * @param  {String} value - search field current value\n     * @return {null} -\n     */\n    handleSearchChange = (value) => {\n      this.setState({ searchQuery: value });\n    }\n\n    filterWorkflowStatus = (event, value) => {\n      const query = filterWorkflowStatus(value);\n      const { shippingFilter } = this.state;\n      if (this.state.query.createdAt) {\n        query.createdAt = this.state.query.createdAt;\n      }\n\n      if (this.state.query._id) {\n        query._id = this.state.query._id;\n      }\n\n      this.setState({\n        query: { ...filterShippingStatus(shippingFilter.toLowerCase()), ...query },\n        workflowFilter: value\n      });\n    }\n\n    filterShippingStatus = (event, value) => {\n      const query = filterShippingStatus(value);\n      const { workflowFilter } = this.state;\n\n      if (this.state.query.createdAt) {\n        query.createdAt = this.state.query.createdAt;\n      }\n\n      if (this.state.query._id) {\n        query._id = this.state.query._id;\n      }\n\n      this.setState({\n        query: { ...filterWorkflowStatus(workflowFilter.toLowerCase()), ...query },\n        shippingFilter: value\n      });\n    }\n\n    clearFilter = (filterString) => {\n      let query;\n      let { shippingFilter, workflowFilter } = this.state;\n\n      if (filterString === \"workflow\") {\n        workflowFilter = \"\";\n        query = { ...filterWorkflowStatus(workflowFilter), ...filterShippingStatus(shippingFilter.toLowerCase()) };\n\n        if (this.state.query.createdAt) {\n          query.createdAt = this.state.query.createdAt;\n        }\n      } else if (filterString === \"date\") {\n        query = {\n          ...filterWorkflowStatus(workflowFilter.toLowerCase()),\n          ...filterShippingStatus(shippingFilter.toLowerCase())\n        };\n      } else if (filterString === \"shipping\") {\n        shippingFilter = \"\";\n        query = { ...filterWorkflowStatus(workflowFilter.toLowerCase()), ...filterShippingStatus(shippingFilter) };\n\n        if (this.state.query.createdAt) {\n          query.createdAt = this.state.query.createdAt;\n        }\n      }\n\n      // If there is an id on the current search appeng it to query\n      if (this.state.query._id) {\n        query._id = this.state.query._id;\n      }\n\n      this.setState({\n        query,\n        shippingFilter,\n        workflowFilter\n      });\n    }\n\n    updatePage = (page) => {\n      const offset = page * this.state.pageSize;\n      this.setState({ skip: offset, page });\n    }\n\n    updatePageSize = (pageSize, pageIndex) => {\n      const offset = pageIndex * pageSize;\n      this.setState({ pageSize, skip: offset });\n    }\n\n    render() {\n      return (\n        <Comp\n          searchQuery={this.state.searchQuery}\n          query={this.state.query}\n          clearFilter={this.clearFilter}\n          filterDates={this.filterDates}\n          filterShippingStatus={this.filterShippingStatus}\n          filterWorkflowStatus={this.filterWorkflowStatus}\n          handleChange={this.handleSearchChange}\n          skip={this.state.skip}\n          pageSize={this.state.pageSize}\n          onPageChange={this.updatePage}\n          onPageSizeChange={this.updatePageSize}\n          currentPage={this.state.page}\n        />\n      );\n    }\n  }\n);\n\nregisterComponent(\"OrderSubscription\", OrderSubscription, [wrapComponent]);\n\nexport default compose(wrapComponent)(OrderSubscription);\n","import React, { Component } from \"react\";\nimport { Meteor } from \"meteor/meteor\";\nimport { Counts } from \"meteor/tmeasday:publish-counts\";\nimport { Orders, OrderSearch } from \"/lib/collections\";\nimport { Components, composeWithTracker } from \"@reactioncommerce/reaction-components\";\nimport OrderDashboard from \"../components/orderDashboard\";\n\nclass OrderSubscription extends Component {\n  render() {\n    return (\n      <OrderDashboard {...this.props}/>\n    );\n  }\n}\n\nfunction composer(props, onData) {\n  const subscription = Meteor.subscribe(\"SearchResults\", \"orders\", props.searchQuery);\n  let orderSearchResultsIds;\n  const { query, currentPage } = props;\n\n  if (subscription.ready()) {\n    const orderSearchResults = OrderSearch.find().fetch();\n    orderSearchResultsIds = orderSearchResults.map((orderSearch) => orderSearch._id);\n    // checking to ensure search was made and search results are returned\n    if (props.searchQuery && Array.isArray(orderSearchResultsIds)) {\n      // add matching results from search to query passed to Sortable\n      query._id = { $in: orderSearchResultsIds };\n    } else {\n      // being here means no search text is inputed or search was cleared, so reset any previous match\n      delete query._id;\n    }\n    const options = { limit: props.pageSize, skip: props.skip };\n    const ordersSubscription = Meteor.subscribe(\"PaginatedOrders\", query, options);\n    let totalOrderCount = Counts.get(\"orders-count\");\n    if (props.searchQuery !== \"\") {\n      totalOrderCount = orderSearchResults.length;\n    }\n    const pages = Math.ceil(totalOrderCount / props.pageSize);\n\n    if (ordersSubscription.ready()) {\n      const results = Orders.find(query).fetch();\n      return onData(null, {\n        orders: results,\n        totalOrderCount,\n        pages,\n        currentPage\n      });\n    }\n  }\n}\n\nexport default composeWithTracker(composer, Components.Loading)(OrderSubscription);\n","import React, { Component } from \"react\";\nimport PropTypes from \"prop-types\";\nimport _ from \"lodash\";\nimport { Meteor } from \"meteor/meteor\";\nimport { composeWithTracker, withMoment } from \"@reactioncommerce/reaction-components\";\nimport { Orders } from \"/lib/collections\";\nimport { Card, CardHeader, CardBody, CardGroup } from \"/imports/plugins/core/ui/client/components\";\nimport { i18next } from \"/client/api\";\nimport OrderSummary from \"../components/orderSummary\";\nimport { getShippingInfo } from \"../helpers\";\n\nclass OrderSummaryContainer extends Component {\n  static propTypes = {\n    moment: PropTypes.func,\n    order: PropTypes.object\n  }\n\n  constructor(props) {\n    super(props);\n    this.dateFormat = this.dateFormat.bind(this);\n    this.tracking = this.tracking.bind(this);\n    this.shipmentStatus = this.shipmentStatus.bind(this);\n  }\n\n  dateFormat = (context, block) => {\n    const { moment } = this.props;\n    const f = block || \"MMM DD, YYYY hh:mm:ss A\";\n    return (moment && moment(context).format(f)) || context.toLocaleString();\n  }\n\n  tracking = () => {\n    const shipping = getShippingInfo(this.props.order);\n    if (shipping.tracking) {\n      return shipping.tracking;\n    }\n    return i18next.t(\"orderShipping.noTracking\");\n  }\n\n  shipmentStatus = () => {\n    const { order } = this.props;\n    const shipment = getShippingInfo(this.props.order);\n\n    if (shipment.delivered) {\n      return {\n        delivered: true,\n        shipped: true,\n        status: \"success\",\n        label: i18next.t(\"orderShipping.delivered\")\n      };\n    }\n\n    const shipped = _.every(shipment.items, (shipmentItem) => {\n      for (const fullItem of order.items) {\n        if (fullItem._id === shipmentItem._id) {\n          if (fullItem.workflow) {\n            if (_.isArray(fullItem.workflow.workflow)) {\n              return _.includes(fullItem.workflow.workflow, \"coreOrderItemWorkflow/completed\");\n            }\n          }\n        }\n      }\n    });\n\n    const canceled = _.every(shipment.items, (shipmentItem) => {\n      for (const fullItem of order.items) {\n        if (fullItem._id === shipmentItem._id) {\n          if (fullItem.workflow) {\n            return fullItem.workflow.status === \"coreOrderItemWorkflow/canceled\";\n          }\n        }\n      }\n    });\n\n    if (shipped) {\n      return {\n        delivered: false,\n        shipped: true,\n        status: \"success\",\n        label: i18next.t(\"orderShipping.shipped\")\n      };\n    }\n\n    if (canceled) {\n      return {\n        delivered: false,\n        shipped: false,\n        status: \"danger\",\n        label: i18next.t(\"order.canceledLabel\")\n      };\n    }\n\n    return {\n      delivered: false,\n      shipped: false,\n      status: \"info\",\n      label: i18next.t(\"orderShipping.notShipped\")\n    };\n  }\n\n  printableLabels = () => {\n    const { shippingLabelUrl, customsLabelUrl } = getShippingInfo(this.props.order);\n    if (shippingLabelUrl || customsLabelUrl) {\n      return { shippingLabelUrl, customsLabelUrl };\n    }\n\n    return false;\n  }\n\n  render() {\n    return (\n      <CardGroup>\n        <Card>\n          <CardHeader\n            actAsExpander={false}\n            i18nKeyTitle=\"admin.orderWorkflow.summary.cardTitle\"\n            title=\"Summary\"\n          />\n          <CardBody expandable={false}>\n            <OrderSummary\n              {...this.props}\n              dateFormat={this.dateFormat}\n              tracking={this.tracking}\n              shipmentStatus={this.shipmentStatus}\n              printableLabels={this.printableLabels}\n            />\n          </CardBody>\n        </Card>\n      </CardGroup>\n    );\n  }\n}\n\nconst composer = (props, onData) => {\n  const query = { _id: props.orderId };\n  const options = { limit: 1, skip: 0 };\n  const orderSub = Meteor.subscribe(\"PaginatedOrders\", query, options);\n\n  if (orderSub.ready()) {\n    // Find current order\n    const order = Orders.findOne({\n      \"_id\": props.orderId,\n      \"shipping._id\": props.fulfillment && props.fulfillment._id\n    });\n\n    if (order) {\n      const profileShippingAddress = getShippingInfo(order).address || {};\n\n      if (order.workflow) {\n        if (order.workflow.status === \"coreOrderCreated\") {\n          order.workflow.status = \"coreOrderCreated\";\n          Meteor.call(\"workflow/pushOrderWorkflow\", \"coreOrderWorkflow\", \"coreOrderCreated\", order);\n        }\n      }\n\n      onData(null, {\n        order,\n        profileShippingAddress\n      });\n    } else {\n      onData(null, {\n        order: {},\n        profileShippingAddress: {}\n      });\n    }\n  }\n};\n\nexport default composeWithTracker(composer)(withMoment(OrderSummaryContainer));\n","import React, { Component } from \"react\";\nimport { compose } from \"recompose\";\nimport { Meteor } from \"meteor/meteor\";\nimport { Reaction, i18next } from \"/client/api\";\nimport { getPrimaryMediaForOrderItem } from \"/lib/api\";\nimport { registerComponent } from \"@reactioncommerce/reaction-components\";\nimport { getShippingInfo } from \"../helpers\";\nimport {\n  PACKAGE_NAME,\n  ORDER_LIST_FILTERS_PREFERENCE_NAME,\n  ORDER_LIST_SELECTED_ORDER_PREFERENCE_NAME,\n  shippingStates\n} from \"../../lib/constants\";\nimport OrderTable from \"../components/orderTable\";\n\nconst shippingStrings = [\"picked\", \"packed\", \"labeled\", \"shipped\"];\n\nconst wrapComponent = (Comp) => (\n  class OrderTableContainer extends Component {\n    constructor(props) {\n      super(props);\n      this.state = {\n        selectedItems: [],\n        multipleSelect: false,\n        // TODO: model this with the assumption that there may be different stages to workflows\n        shipping: {\n          picked: false,\n          packed: false,\n          labeled: false,\n          shipped: false\n        },\n        renderFlowList: false,\n        // TODO: model this with the assumption that there may be different stages to workflows\n        isLoading: {\n          picked: false,\n          packed: false,\n          labeled: false,\n          shipped: false,\n          capturePayment: false\n        },\n        ready: false\n      };\n    }\n    toggleShippingFlowList = () => {\n      this.setState({\n        renderFlowList: !this.state.renderFlowList\n      });\n      this.setListItemsToDefault();\n    }\n\n    setListItemsToDefault() {\n      if (this.state.renderFlowList === false) {\n        shippingStrings.forEach((value) => {\n          this.setState({\n            shipping: {\n              [value]: false\n            }\n          });\n        });\n      }\n    }\n\n    handleSelect = (event, isInputChecked, name) => {\n      this.setState({\n        multipleSelect: false,\n        renderFlowList: false\n      });\n      shippingStrings.forEach((value) => {\n        this.setState({\n          shipping: {\n            [value]: false\n          }\n        });\n      });\n      const selectedItemsArray = this.state.selectedItems;\n\n      if (!selectedItemsArray.includes(name)) {\n        selectedItemsArray.push(name);\n        this.setState({\n          selectedItems: selectedItemsArray\n        });\n      } else {\n        const updatedSelectedArray = selectedItemsArray.filter((id) => id !== name);\n        this.setState({\n          selectedItems: updatedSelectedArray\n        });\n      }\n    }\n\n    selectAllOrders = (orders, areAllSelected) => {\n      this.setState({\n        renderFlowList: false\n      });\n      shippingStrings.forEach((string) => {\n        this.setState({\n          shipping: {\n            [string]: false\n          }\n        });\n      });\n      if (areAllSelected) {\n        // if all orders are selected, clear the selectedItems array\n        // and set multipleSelect to false\n        this.setState({\n          selectedItems: [],\n          multipleSelect: false\n        });\n      } else {\n        // if there are no selected orders, or if there are some orders that have been\n        // selected but not all of them, loop through the orders array and return a\n        // new array with order ids only, then set the selectedItems array with the orderIds\n        const orderIds = orders.map((order) => order._id);\n        this.setState({\n          selectedItems: orderIds,\n          multipleSelect: true\n        });\n      }\n    }\n\n    handleClick = (order, startWorkflow = false) => {\n      Reaction.setActionViewDetail({\n        label: \"Order Details\",\n        i18nKeyLabel: \"orderWorkflow.orderDetails\",\n        data: {\n          order\n        },\n        props: {\n          size: \"large\"\n        },\n        template: \"coreOrderWorkflow\"\n      });\n\n      if (startWorkflow === true) {\n        Meteor.call(\"workflow/pushOrderWorkflow\", \"coreOrderWorkflow\", \"processing\", order);\n        Reaction.setUserPreferences(PACKAGE_NAME, ORDER_LIST_FILTERS_PREFERENCE_NAME, \"processing\");\n      }\n\n      /* TODO:\n      a) What other routes have a query parameter of _id=XXXXXXX ?\n      b) What exactly are we using the order dashboard for? If it's search,\n       well, clicking a search result doesn't CURRENTLY do anything. What's\n       more, there's some debate as to whether that SHOULD link to anywhere.\n       And if it should, why not the existing, modal orders panel?\n      */\n      Reaction.setUserPreferences(PACKAGE_NAME, ORDER_LIST_SELECTED_ORDER_PREFERENCE_NAME, order._id);\n    }\n\n    /**\n     * updateBulkStatusHelper\n     *\n     * @summary return formatted shipping object to update state\n     * @param {String} status - the shipping status to be set\n     * @return {Object} the formatted shipping object\n     */\n    updateBulkStatusHelper = (status) => {\n      const statusIndex = shippingStrings.indexOf(status);\n      return shippingStrings.reduce((shipping, state) => ({\n        ...shipping,\n        [state]: shippingStrings.indexOf(state) <= statusIndex\n      }), {});\n    }\n\n    /**\n     * updateBulkLoadingHelper\n     *\n     * @summary return formatted isLoading object to update state\n     * @param {String} status - the shipping status to be set\n     * @return {Object} the formatted isLoading object\n     */\n    updateBulkLoadingHelper = (status) => {\n      const statusIndex = shippingStrings.indexOf(status);\n      const prevStatusIndex = Object.keys(this.state.shipping).reduce((maxIndex, state) => {\n        if (this.state.shipping[state]) {\n          return Math.max(shippingStrings.indexOf(state), maxIndex);\n        }\n        return maxIndex;\n      }, -1);\n      return shippingStrings.reduce((shipping, state) => {\n        if (prevStatusIndex < statusIndex) {\n          return {\n            ...shipping,\n            [state]: shippingStrings.indexOf(state) <= statusIndex && shippingStrings.indexOf(state) > prevStatusIndex\n          };\n        }\n        return {\n          ...shipping,\n          [state]: shippingStrings.indexOf(state) >= statusIndex && shippingStrings.indexOf(state) <= prevStatusIndex\n        };\n      }, {});\n    }\n\n    /**\n     * shippingStatusUpdateCall\n     *\n     * @summary set selected order(s) to the provided shipping state\n     * @param {Array} selectedOrders - array of selected orders\n     * @param {String} status - the shipping status to be set\n     * @return {null} no return value\n     */\n    shippingStatusUpdateCall = (selectedOrders, status) => {\n      const filteredSelectedOrders = selectedOrders.filter((order) => order.shipping && Object.keys(getShippingInfo(order)).length);\n      this.setState({\n        isLoading: this.updateBulkLoadingHelper(status)\n      });\n      let orderText = \"order\";\n\n      if (filteredSelectedOrders.length > 1) {\n        orderText = \"orders\";\n      }\n\n      // capitalize the first letter of the shipping status passed in\n      // e.g. 'shipped' becomes 'Shipped'.\n      // status[0].toUpperCase() capitalizes the first letter of the string\n      // status.substr(1).toLowerCase() converts every other letter to lower case\n      const capitalizeStatus = status[0].toUpperCase() + status.substr(1).toLowerCase();\n      let orderCount = 0;\n\n      // TODO: send these orders in batch as an array. This would entail re-writing the Meteor calls to update the\n      // different shipping statuses to receive an array of objects(orders) as a param\n\n      // TODO: rethink this type of flow for updating shipping statuses\n      filteredSelectedOrders.forEach((order) => {\n        const shippingRecord = getShippingInfo(order);\n\n        Meteor.call(`orders/shipment${capitalizeStatus}`, order, shippingRecord, (error) => {\n          if (error) {\n            Alerts.toast(`An error occured while setting the status: ${error}`, \"error\");\n          } else {\n            Meteor.call(\"orders/updateHistory\", order._id, \"Shipping state set by bulk operation\", status);\n          }\n          orderCount += 1;\n          if (orderCount === filteredSelectedOrders.length) {\n            this.setState({\n              shipping: this.updateBulkStatusHelper(status),\n              isLoading: {\n                [status]: false\n              }\n            });\n            Alerts.alert({\n              text: i18next.t(\"order.orderSetToState\", {\n                orderNumber: filteredSelectedOrders.length,\n                orderText,\n                status\n              }),\n              type: \"success\",\n              allowOutsideClick: false\n            });\n          }\n        });\n      });\n    }\n\n    displayAlert = (selectedOrders, status, options) => {\n      // capitalize the first letter of the shipping status passed in\n      // e.g. 'shipped' becomes 'Shipped'.\n      // status[0].toUpperCase() capitalizes the first letter of the string\n      // status.substr(1).toLowerCase() converts every other letter to lower case\n      const capitalizeStatus = status[0].toUpperCase() + status.substr(1).toLowerCase();\n      const alertOptions = options || {};\n      let orderText = \"order\";\n      let skippedOrdersText = \"is\";\n      let orderAlreadyInStateText = \"Order has\";\n\n      if (selectedOrders.length > 1) {\n        orderText = \"orders\";\n        orderAlreadyInStateText = \"Orders have\";\n      }\n\n      if (alertOptions.falsePreviousStatuses > 1) {\n        skippedOrdersText = \"are\";\n      }\n\n      // if the order(s) want to skip the previous states, display alert\n      if (alertOptions.falsePreviousStatuses) {\n        Alerts.alert({\n          text: i18next.t(\"order.skippedBulkOrdersAlert\", {\n            selectedOrders: selectedOrders.length,\n            orderText,\n            status: capitalizeStatus,\n            numberOfSkippedOrders: alertOptions.falsePreviousStatuses,\n            skippedOrdersText,\n            skippedState: alertOptions.whichFalseState\n          }),\n          type: \"warning\",\n          showCancelButton: true,\n          showCloseButton: true,\n          allowOutsideClick: false,\n          confirmButtonText: i18next.t(\"order.approveBulkOrderAction\"),\n          cancelButtonText: i18next.t(\"order.cancelBulkOrderAction\")\n        }, (setSelected) => {\n          if (setSelected) {\n            // set status of order(s) if this action is confirmed\n            this.shippingStatusUpdateCall(selectedOrders, status);\n          }\n        });\n\n        // if the order(s) are following proper flow, set the status\n      } else if (!alertOptions.falsePreviousStatuses && alertOptions.falseCurrentState) {\n        this.shippingStatusUpdateCall(selectedOrders, status);\n        // display alert if order(s) are already in this state\n      } else if (!alertOptions.falsePreviousStatuses && !alertOptions.falseCurrentState &&\n        alertOptions.trueCurrentState) {\n        Alerts.alert({\n          text: i18next.t(\"order.orderAlreadyInState\", {\n            orderText: orderAlreadyInStateText,\n            status\n          })\n        });\n      }\n    }\n\n    displayRegressionAlert = (selectedOrders, ordersToRegress, status, options) => {\n      // capitalize the first letter of the shipping status passed in\n      // e.g. 'shipped' becomes 'Shipped'.\n      // status[0].toUpperCase() capitalizes the first letter of the string\n      // status.substr(1).toLowerCase() converts every other letter to lower case\n      const capitalizeStatus = status[0].toUpperCase() + status.substr(1).toLowerCase();\n      const alertOptions = options || {};\n      let orderText = \"order\";\n\n      if (ordersToRegress > 1) {\n        orderText = \"orders\";\n      }\n\n      Alerts.alert({\n        text: i18next.t(\"order.bulkOrdersRegressionAlert\", {\n          ordersToRegress, orderText, status: capitalizeStatus\n        }),\n        type: \"warning\",\n        showCancelButton: true,\n        showCloseButton: true,\n        allowOutsideClick: false,\n        confirmButtonText: i18next.t(\"order.approveBulkOrderActionRegression\"),\n        cancelButtonText: i18next.t(\"order.cancelBulkOrderAction\")\n      }, (regress) => {\n        if (regress) {\n          // if some of the order(s) want to skip the previous state, display warning alert for skipping states\n          if (alertOptions.falsePreviousStatuses) {\n            this.displayAlert(\n              selectedOrders, status,\n              {\n                whichFalseState: alertOptions.whichFalseState,\n                falsePreviousStatuses: alertOptions.falsePreviousStatuses,\n                falseCurrentState: alertOptions.falseCurrentState,\n                trueCurrentState: alertOptions.trueCurrentState\n              }\n            );\n          } else {\n            // set status of order(s) if this action is confirmed\n            this.shippingStatusUpdateCall(selectedOrders, status);\n          }\n        }\n      });\n    }\n\n    pickedShippingStatus = (selectedOrders, status) => {\n      // counters to keep track of how many orders are not picked,\n      // are already picked, and how many are being regressed\n      let isNotPicked = 0;\n      let isPicked = 0;\n      let ordersToRegress = 0;\n\n      // loop through selected orders array to determine the current shipping workflow\n      // status of each order in regard to the other statuses\n      // TODO: optimise this process to avoid having this similar repetitive block of code across 4 methods\n      selectedOrders.forEach((order) => {\n        const orderWorkflow = getShippingInfo(order).workflow;\n        // check if the order(s) are in this state already or in the previous state\n\n        // TODO: model this with the assumption that there may be different workflows\n        // depending on the type of shop or product that a shop is selling.\n        if (orderWorkflow) {\n          if (orderWorkflow.status === \"new\") {\n            isNotPicked += 1;\n          } else if (orderWorkflow.status === \"coreOrderWorkflow/picked\") {\n            isPicked += 1;\n          } else if (orderWorkflow.workflow.includes(\"coreOrderWorkflow/picked\")) {\n            ordersToRegress += 1;\n          } else if (!orderWorkflow.workflow.includes(\"coreOrderWorkflow/picked\") &&\n                     (orderWorkflow.status === \"coreOrderWorkflow/packed\" ||\n                      orderWorkflow.status === \"coreOrderWorkflow/labeled\" ||\n                      orderWorkflow.status === \"coreOrderWorkflow/shipped\")) {\n            ordersToRegress += 1;\n          }\n        }\n      });\n\n      // display regression alert if order(s) are being regressed\n      if (ordersToRegress) {\n        this.displayRegressionAlert(selectedOrders, ordersToRegress, status);\n\n        // set status to 'picked' if order(s) are in the previous state OR\n        // display alert if order(s) are already in this state\n      } else {\n        this.displayAlert(\n          selectedOrders, status,\n          {\n            falseCurrentState: isNotPicked,\n            trueCurrentState: isPicked\n          }\n        );\n      }\n    }\n\n    packedShippingStatus = (selectedOrders, status) => {\n      // if an order state wants to skip to packed, this is the state being skipped\n      const whichFalseState = shippingStates.picked;\n      // counters to keep track of how many orders are not picked/packed,\n      // are already packed, and how many are being regressed\n      let isNotPicked = 0;\n      let isNotPacked = 0;\n      let isPacked = 0;\n      let ordersToRegress = 0;\n\n      // loop through selected orders array to determine the current shipping workflow\n      // status of each order in regard to the other statuses\n      // TODO: optimise this process to avoid having this similar repetitive block of code across 4 methods\n      selectedOrders.forEach((order) => {\n        const orderWorkflow = getShippingInfo(order).workflow;\n\n        // check if the order(s) are in this state already or in one of the previous states\n\n        // TODO: model this with the assumption that there may be different workflows\n        // depending on the type of shop or product that a shop is selling.\n        if (orderWorkflow) {\n          if (orderWorkflow.status === \"new\") {\n            isNotPicked += 1;\n          } else if (orderWorkflow.status === \"coreOrderWorkflow/picked\") {\n            isNotPacked += 1;\n          } else if (orderWorkflow.status === \"coreOrderWorkflow/packed\") {\n            isPacked += 1;\n          } else if (orderWorkflow.workflow.includes(\"coreOrderWorkflow/packed\")) { // check if the selected order(s) are being regressed back to this state\n            ordersToRegress += 1;\n          } else if (!orderWorkflow.workflow.includes(\"coreOrderWorkflow/packed\") &&\n                     (orderWorkflow.status === \"coreOrderWorkflow/labeled\" ||\n                      orderWorkflow.status === \"coreOrderWorkflow/shipped\")) {\n            ordersToRegress += 1;\n          }\n        }\n      });\n\n      // display regression alert if order(s) are being regressed\n      if (ordersToRegress) {\n        this.displayRegressionAlert(\n          selectedOrders, ordersToRegress, status,\n          {\n            whichFalseState,\n            falsePreviousStatuses: isNotPicked,\n            falseCurrentState: isNotPacked,\n            trueCurrentState: isPacked\n          }\n        );\n\n        // display proper alert if the order(s) are in this state already or want to skip the previous states\n      } else {\n        this.displayAlert(\n          selectedOrders, status,\n          {\n            whichFalseState,\n            falsePreviousStatuses: isNotPicked,\n            falseCurrentState: isNotPacked,\n            trueCurrentState: isPacked\n          }\n        );\n      }\n    }\n\n    labeledShippingStatus = (selectedOrders, status) => {\n      // string that will hold the state being skipped\n      let whichFalseState = \"\";\n      // counters to keep track of how many orders are not picked/packed/labeled,\n      // are already labeled, and how many are being regressed\n      let isNotPacked = 0;\n      let isNotLabeled = 0;\n      let isLabeled = 0;\n      let ordersToRegress = 0;\n\n      // loop through selected orders array to determine the current shipping workflow\n      // status of each order in regard to the other statuses\n      // TODO: optimise this process to avoid having this similar repetitive block of code across 4 methods\n      selectedOrders.forEach((order) => {\n        const orderWorkflow = getShippingInfo(order).workflow;\n        // check if the order(s) are in this state already or in one of the previous states\n\n        // TODO: model this with the assumption that there may be different workflows\n        // depending on the type of shop or product that a shop is selling.\n        if (orderWorkflow) {\n          if (orderWorkflow.status === \"new\") {\n            isNotPacked += 1;\n            whichFalseState = shippingStates.picked;\n          } else if (orderWorkflow.status === \"coreOrderWorkflow/picked\") {\n            isNotPacked += 1;\n            whichFalseState = shippingStates.packed;\n          } else if (orderWorkflow.status === \"coreOrderWorkflow/packed\") {\n            isNotLabeled += 1;\n          } else if (orderWorkflow.status === \"coreOrderWorkflow/labeled\") {\n            isLabeled += 1;\n          } else if (orderWorkflow.workflow.includes(\"coreOrderWorkflow/labeled\") ||\n                     orderWorkflow.status === \"coreOrderWorkflow/shipped\") { // check if the selected order(s) are being regressed back to this state\n            ordersToRegress += 1;\n          }\n        }\n      });\n\n      // display regression alert if order(s) are being regressed\n      if (ordersToRegress) {\n        this.displayRegressionAlert(\n          selectedOrders, ordersToRegress, status,\n          {\n            whichFalseState,\n            falsePreviousStatuses: isNotPacked,\n            falseCurrentState: isNotLabeled,\n            trueCurrentState: isLabeled\n          }\n        );\n\n        // display proper alert if the order(s) are in this state already or want to skip the previous states\n      } else {\n        this.displayAlert(\n          selectedOrders, status,\n          {\n            whichFalseState,\n            falsePreviousStatuses: isNotPacked,\n            falseCurrentState: isNotLabeled,\n            trueCurrentState: isLabeled\n          }\n        );\n      }\n    }\n\n\n    shippedShippingStatus = (selectedOrders, status) => {\n      // string that will hold the state being skipped\n      let whichFalseState = \"\";\n      // counters to keep track of how many orders are not picked/packed/labeled/shipped,\n      // are already shipped, and how many are being regressed\n      let isNotLabeled = 0;\n      let isNotShipped = 0;\n      let isShipped = 0;\n\n      // loop through selected orders array to determine the current shipping workflow\n      // status of each order in regard to the other statuses\n      // TODO: optimise this process to avoid having this similar repetitive block of code across 4 methods\n      selectedOrders.forEach((order) => {\n        const orderWorkflow = getShippingInfo(order).workflow;\n        // check if the order(s) are in this state already or in one of the previous states\n\n        // TODO: model this with the assumption that there may be different workflows\n        // depending on the type of shop or product that a shop is selling.\n        if (orderWorkflow) {\n          const orderWorkflowStatus = orderWorkflow.status;\n          if (orderWorkflowStatus === \"new\") {\n            isNotLabeled += 1;\n            whichFalseState = shippingStates.picked;\n          } else if (orderWorkflowStatus === \"coreOrderWorkflow/picked\") {\n            isNotLabeled += 1;\n            whichFalseState = shippingStates.packed;\n          } else if (orderWorkflowStatus === \"coreOrderWorkflow/packed\") {\n            isNotLabeled += 1;\n            whichFalseState = shippingStates.labeled;\n          } else if (orderWorkflowStatus === \"coreOrderWorkflow/labeled\") {\n            isNotShipped += 1;\n          } else if (orderWorkflowStatus === \"coreOrderWorkflow/shipped\") {\n            isShipped += 1;\n          }\n        }\n      });\n\n      // display proper alert if the order(s) are in this state already or want to skip the previous states\n      this.displayAlert(\n        selectedOrders, status,\n        {\n          whichFalseState,\n          falsePreviousStatuses: isNotLabeled,\n          falseCurrentState: isNotShipped,\n          trueCurrentState: isShipped\n        }\n      );\n    }\n\n    /**\n     * setShippingStatus\n     *\n     * @summary call the relevant method based on the provided shipping status\n     * @param {String} status - the selected shipping status to be set\n     * @param {Array} selectedOrdersIds - array of ids of the selected orders\n     * @param {Array} orders - array of orders\n     * @return {null} no return value\n     */\n    setShippingStatus = (status, selectedOrdersIds, orders) => {\n      this.setState({\n        renderFlowList: true\n      });\n      const selectedOrders = orders.filter((order) => selectedOrdersIds.includes(order._id));\n\n      if (status === \"picked\") {\n        this.pickedShippingStatus(selectedOrders, status);\n      }\n\n      if (status === \"packed\") {\n        this.packedShippingStatus(selectedOrders, status);\n      }\n\n      if (status === \"labeled\") {\n        this.labeledShippingStatus(selectedOrders, status);\n      }\n\n      if (status === \"shipped\") {\n        this.shippedShippingStatus(selectedOrders, status);\n      }\n    }\n\n    /**\n     * orderCreditMethod: Finds the credit record in order.billing for the active shop\n     * @param order: The order where to find the billing record in.\n     * @return: The billing record with paymentMethod.method === credit of currently active shop\n     */\n    orderCreditMethod(order) {\n      const creditBillingRecords = order.billing.filter((value) => value.paymentMethod.method === \"credit\");\n      const billingRecord = creditBillingRecords.find((billing) => billing.shopId === Reaction.getShopId());\n      return billingRecord;\n    }\n\n    handleBulkPaymentCapture = (selectedOrdersIds, orders) => {\n      this.setState({\n        isLoading: {\n          capturePayment: true\n        }\n      });\n      const selectedOrders = orders.filter((order) => selectedOrdersIds.includes(order._id));\n\n      let orderCount = 0;\n      const done = () => {\n        orderCount += 1;\n        if (orderCount === selectedOrders.length) {\n          this.setState({\n            isLoading: {\n              capturePayment: false\n            }\n          });\n          Alerts.alert({\n            text: i18next.t(\"order.paymentCaptureSuccess\"),\n            type: \"success\",\n            allowOutsideClick: false\n          });\n        }\n      };\n\n      // TODO: send these orders in batch as an array. This would entail re-writing the\n      // \"orders/approvePayment\" method to receive an array of orders as a param.\n      selectedOrders.forEach((order) => {\n        // Only capture orders which are not captured yet (but possibly are already approved)\n        const billingRecord = this.orderCreditMethod(order);\n        if (billingRecord.paymentMethod.mode === \"capture\" && billingRecord.paymentMethod.status === \"completed\") {\n          done();\n          return;\n        }\n        Meteor.call(\"orders/approvePayment\", order, (approvePaymentError) => {\n          if (approvePaymentError) {\n            this.setState({\n              isLoading: {\n                capturePayment: false\n              }\n            });\n            Alerts.toast(`An error occured while approving the payment: ${approvePaymentError}`, \"error\");\n          } else {\n            // TODO: send these orders in batch as an array. This would entail re-writing the\n            // \"orders/capturePayments\" method to receive an array of orders as a param.\n            Meteor.call(\"orders/capturePayments\", order._id, (capturePaymentError) => {\n              if (capturePaymentError) {\n                this.setState({\n                  isLoading: {\n                    capturePayment: false\n                  }\n                });\n                Alerts.toast(`An error occured while capturing the payment: ${capturePaymentError}`, \"error\");\n              }\n              done();\n            });\n          }\n        });\n      });\n    }\n\n    render() {\n      return (\n        <Comp\n          {...this.props}\n          handleSelect={this.handleSelect}\n          handleClick={this.handleClick}\n          displayMedia={getPrimaryMediaForOrderItem}\n          selectedItems={this.state.selectedItems}\n          selectAllOrders={this.selectAllOrders}\n          multipleSelect={this.state.multipleSelect}\n          setShippingStatus={this.setShippingStatus}\n          shipping={this.state.shipping}\n          isLoading={this.state.isLoading}\n          renderFlowList={this.state.renderFlowList}\n          toggleShippingFlowList={this.toggleShippingFlowList}\n          handleBulkPaymentCapture={this.handleBulkPaymentCapture}\n        />\n      );\n    }\n  }\n);\n\nregisterComponent(\"OrderTable\", OrderTable, [wrapComponent]);\n\nexport default compose(wrapComponent)(OrderTable);\n","import { Reaction } from \"/client/api\";\n\n/*\n * @method getOrderRiskBadge\n * @private\n * @summary Selects appropriate color badge (e.g  danger, warning) value based on risklevel\n * @param {string} riskLevel - risk level value on the paymentMethod\n * @return {string} label - style color class based on risk level\n */\nexport function getOrderRiskBadge(riskLevel) {\n  let label;\n  switch (riskLevel) {\n    case \"high\":\n      label = \"danger\";\n      break;\n    case \"elevated\":\n      label = \"warning\";\n      break;\n    default:\n      label = \"\";\n  }\n  return label;\n}\n\n/*\n * @method getOrderRiskStatus\n * @private\n * @summary Gets the risk label on the paymentMethod object for a shop on an order.\n * An empty string is returned if the value is \"normal\" becuase we don't flag a normal charge\n * @param {object} order - order object\n * @return {string} label - risklevel value (if risklevel is not normal)\n */\nexport function getOrderRiskStatus(order) {\n  const billingForShop = order.billing.find((billing) => billing.shopId === Reaction.getShopId());\n  const paymentMethod = (billingForShop && billingForShop.paymentMethod) || {};\n  const { riskLevel } = paymentMethod;\n\n  // normal transactions do not need to be flagged\n  if (riskLevel === \"normal\") {\n    return \"\";\n  }\n\n  if (!riskLevel) {\n    return \"\";\n  }\n\n  return riskLevel;\n}\n\n/*\n * @method getTaxRiskStatus\n * @private\n * @summary Gets the tax status of the order.\n * @param {object} order - order object\n * @return {boolean} label - true if the tax was not submitted by user.\n */\nexport function getTaxRiskStatus(order) {\n  return order.taxCalculationFailed || order.bypassAddressValidation;\n}\n\n/**\n * filterWorkflowStatus\n *\n * @summary get query for a given filter\n * @param {String} filter - filter string to check against\n * @return {Object} query for the workflow status\n */\nexport function filterWorkflowStatus(filter) {\n  let query = {};\n\n  switch (filter) {\n    // New orders\n    case \"new\":\n      query = {\n        \"workflow.status\": \"new\"\n      };\n      break;\n\n    // Orders that have been approved\n    case \"approved\":\n      query = {\n        \"workflow.status\": \"coreOrderWorkflow/processing\",\n        \"billing.paymentMethod.status\": \"approved\"\n      };\n      break;\n\n    // Orders that have been captured\n    case \"captured\":\n      query = {\n        \"billing.paymentMethod.status\": \"completed\",\n        \"shipping.shipped\": false\n      };\n      break;\n\n    // Orders that are being processed\n    case \"processing\":\n      query = {\n        \"workflow.status\": \"coreOrderWorkflow/processing\"\n      };\n      break;\n\n    // Orders that are complete, including all items with complete status\n    case \"completed\":\n      query = {\n        \"workflow.status\": \"coreOrderWorkflow/completed\"\n      };\n      break;\n\n    case \"canceled\":\n      query = {\n        \"workflow.status\": \"coreOrderWorkflow/canceled\"\n      };\n      break;\n\n    default:\n  }\n\n  return query;\n}\n\n/**\n * filterShippingStatus\n *\n * @summary get query for a given filter\n * @param {String} filter - filter string to check against\n * @return {Object} query for the shipping status\n */\nexport function filterShippingStatus(filter) {\n  let query = {};\n\n  switch (filter) {\n    case \"picked\":\n      query = {\n        \"shipping.workflow.status\": \"coreOrderWorkflow/picked\"\n      };\n      break;\n\n    case \"packed\":\n      query = {\n        \"shipping.workflow.status\": \"coreOrderWorkflow/packed\"\n      };\n      break;\n\n    case \"labeled\":\n      query = {\n        \"shipping.workflow.status\": \"coreOrderWorkflow/labeled\"\n      };\n      break;\n\n    case \"shipped\":\n      query = {\n        \"shipping.workflow.status\": \"coreOrderWorkflow/shipped\"\n      };\n      break;\n\n    default:\n  }\n\n  return query;\n}\n\n/**\n * getBillingInfo\n *\n * @summary get proper billing object as per current active shop\n * @param {Object} order - order object to check against\n * @return {Object} proper billing object to use\n */\nexport function getBillingInfo(order) {\n  const billingInfo = order && order.billing && order.billing.find((billing) => billing && (billing.shopId === Reaction.getShopId()));\n  return billingInfo || {};\n}\n\n/**\n * getShippingInfo\n *\n * @summary get proper shipping object as per current active shop\n * @param {Object} order - order object to check against\n * @return {Object} proper shipping object to use\n */\nexport function getShippingInfo(order) {\n  const shippingInfo = order && order.shipping && order.shipping.find((shipping) => shipping && shipping.shopId === Reaction.getShopId());\n  return shippingInfo || {};\n}\n","import \"./helpers\";\n\nimport \"./templates/list/pdf.html\";\nimport \"./templates/list/pdf.js\";\nimport \"./templates/list/summary.html\";\nimport \"./templates/list/summary.js\";\n\n\nimport \"./templates/workflow/shippingInvoice.html\";\nimport \"./templates/workflow/shippingInvoice.js\";\nimport \"./templates/workflow/shippingSummary.html\";\nimport \"./templates/workflow/shippingSummary.js\";\nimport \"./templates/workflow/shippingTracking.html\";\nimport \"./templates/workflow/shippingTracking.js\";\nimport \"./templates/workflow/workflow.html\";\nimport \"./templates/workflow/workflow.js\";\n\nimport \"./templates/orders.html\";\nimport \"./templates/orders.js\";\n\nexport { ProductImage } from \"./components/productImage\";\n","/**\n * @summary Package name\n * @name PACKAGE_NAME\n * @type {String}\n * @memberof Constants\n * @default\n * @constant\n */\nexport const PACKAGE_NAME = \"reaction-orders\";\n\n/**\n * @name ORDER_LIST_FILTERS_PREFERENCE_NAME\n * @summary Preference name for orderList filters when using using Reaction.[get|set]UserPreferences()\n * @type {String}\n * @memberof Constants\n * @default\n * @constant\n */\nexport const ORDER_LIST_FILTERS_PREFERENCE_NAME = \"orderListFilters\";\n\n/**\n * @name ORDER_LIST_SELECTED_ORDER_PREFERENCE_NAME\n * @summary Preference name for selected order _id when using Reaction.[get|set]UserPreferences()\n * @type {String}\n * @memberof Constants\n * @default\n * @constant\n */\nexport const ORDER_LIST_SELECTED_ORDER_PREFERENCE_NAME = \"orderListSelectedOrder\";\n\n/**\n * @summary Default filter name\n * @name DEFAULT_FILTER_NAME\n * @type {String}\n * @memberof Constants\n * @default\n * @constant\n */\nexport const DEFAULT_FILTER_NAME = \"new\";\n\n/**\n * @name workflowStatus\n * @summary Order workflow states\n * @type {String}\n * @memberof Constants\n * @default\n * @constant\n */\nexport const workflowStatus = [{\n  label: \"New\",\n  value: \"new\"\n}, {\n  label: \"Approved\",\n  value: \"approved\"\n}, {\n  label: \"Captured\",\n  value: \"captured\"\n}, {\n  label: \"Processing\",\n  value: \"processing\"\n}, {\n  label: \"Completed\",\n  value: \"completed\"\n}, {\n  label: \"Canceled\",\n  value: \"canceled\"\n}];\n\n/**\n * @name shippingStatus\n * @summary Order workflow states\n * @type {String}\n * @memberof Constants\n * @default\n * @constant\n */\nexport const shippingStatus = [{\n  label: \"Picked\",\n  value: \"picked\"\n}, {\n  label: \"Packed\",\n  value: \"packed\"\n}, {\n  label: \"Labeled\",\n  value: \"labeled\"\n}, {\n  label: \"Shipped\",\n  value: \"shipped\"\n}];\n\n/**\n * @name shippingStates\n * @summary Order shipping states\n * @type {String}\n * @memberof Constants\n * @default\n * @constant\n */\nexport const shippingStates = {\n  picked: \"Picked\",\n  packed: \"Packed\",\n  labeled: \"Labeled\",\n  shipped: \"Shipped\",\n  delivered: \"Delivered\"\n};\n","import \"./methods.js\";\nimport \"./payment.html\";\n","import { Template } from \"meteor/templating\";\nimport { Reaction } from \"/client/api\";\nimport \"./methods.html\";\n\nTemplate.corePaymentMethods.helpers({\n  enabledPayments,\n  isAdmin() {\n    return Reaction.hasAdminAccess();\n  }\n});\n\nTemplate.corePaymentMethods.onCreated(() => {\n  const payments = enabledPayments();\n  const paymentsEnabled = payments.length;\n  // If no payments enabled, show payments settings dashboard\n  if (!paymentsEnabled) {\n    openActionView();\n  }\n});\n\nTemplate.corePaymentMethods.events({\n  \"click [data-event-action=configure-payment-methods]\"(event) {\n    event.preventDefault();\n    openActionView();\n  }\n});\n\nfunction enabledPayments() {\n  const enabledPaymentsArr = [];\n  const apps = Reaction.Apps({\n    provides: \"paymentMethod\",\n    enabled: true\n  });\n  for (const app of apps) {\n    if (app.enabled === true) enabledPaymentsArr.push(app);\n  }\n  return enabledPaymentsArr;\n}\n\nfunction openActionView() {\n  const dashboardRegistryEntry = Reaction.Apps({ name: \"reaction-dashboard\", provides: \"shortcut\" });\n  const paymentRegistryEntry = Reaction.Apps({ name: \"reaction-payments\", provides: \"settings\" });\n\n  Reaction.showActionView([\n    dashboardRegistryEntry[0],\n    paymentRegistryEntry[0]\n  ]);\n}\n","import \"./payment\";\n","import \"./settings.html\";\nimport \"./settings.js\";\n","import _ from \"lodash\";\nimport { Meteor } from \"meteor/meteor\";\nimport { Template } from \"meteor/templating\";\nimport { AutoForm } from \"meteor/aldeed:autoform\";\nimport { Reaction, i18next } from \"/client/api\";\nimport { Shops } from \"/lib/collections\";\n\nTemplate.paymentSettings.helpers({\n  checked(enabled) {\n    if (enabled === true) {\n      return \"checked\";\n    }\n    return \"\";\n  },\n  shown(enabled) {\n    if (enabled !== true) {\n      return \"hidden\";\n    }\n    return \"\";\n  },\n  paymentMethodOptions() {\n    const paymentMethods = Reaction.Apps({ provides: \"paymentMethod\" });\n    const options = [{\n      label: i18next.t(\"app.auto\"),\n      value: \"none\"\n    }];\n\n    if (paymentMethods && _.isArray(paymentMethods)) {\n      for (const method of paymentMethods) {\n        if (method.enabled === true) {\n          options.push({\n            label: i18next.t(method.i18nKeyLabel),\n            value: method.settingsKey\n          });\n        }\n      }\n    }\n    return options;\n  },\n  shop() {\n    return Shops.findOne(Reaction.getShopId());\n  }\n});\n\n// toggle payment methods visibility\nTemplate.paymentSettings.events({\n  \"change input[name=enabled]\": (event) => {\n    event.preventDefault();\n    const settingsKey = event.target.getAttribute(\"data-key\");\n    const packageId = event.target.getAttribute(\"data-id\");\n    const fields = [{\n      property: \"enabled\",\n      value: event.target.checked\n    }];\n    // update package registry\n    if (packageId) {\n      Meteor.call(\"registry/update\", packageId, settingsKey, fields);\n      Meteor.call(\"shop/togglePackage\", packageId, !event.target.checked);\n    }\n  }\n});\n\nAutoForm.hooks({\n  shopEditPaymentMethodsForm: {\n    onSuccess() {\n      return Alerts.toast(i18next.t(\"shopSettings.shopPaymentMethodsSaved\"), \"success\");\n    },\n    onError(operation, error) {\n      return Alerts.toast(`${i18next.t(\"shopSettings.shopPaymentMethodsFailed\")} ${error}`, \"error\");\n    }\n  }\n});\n","import \"./checkout\";\nimport \"./settings\";\n","import _ from \"lodash\";\nimport { Meteor } from \"meteor/meteor\";\nimport { EJSON } from \"meteor/ejson\";\nimport { Template } from \"meteor/templating\";\nimport { ReactiveDict } from \"meteor/reactive-dict\";\nimport { Reaction } from \"/client/api\";\nimport { Cart } from \"/lib/collections\";\n\n// Because we are duplicating shipment quotes across shipping records\n// we will get duplicate shipping quotes but we only want to diplay one\n// So this function eliminates duplicates\n/**\n * Return a unique list of objects\n * @param {Array} objs - An array of objects\n * @returns {Array} An array of object only containing unique members\n * @private\n */\nfunction uniqObjects(objs) {\n  const jsonBlobs = objs.map((obj) => JSON.stringify(obj));\n  const uniqueBlobs = _.uniq(jsonBlobs);\n  return uniqueBlobs.map((blob) => EJSON.parse(blob));\n}\n\n// cartShippingQuotes\n// returns multiple methods\n/**\n * cartShippingQuotes - returns a list of all the shipping costs/quotations\n * of each available shipping carrier like UPS, Fedex etc.\n * @param {Object} currentCart - The current cart that's about\n * to be checked out.\n * @returns {Array} - an array of the quotations of multiple shipping\n * carriers.\n */\nfunction cartShippingQuotes(currentCart) {\n  const cart = currentCart || Cart.findOne();\n  const shipmentQuotes = [];\n  if (cart) {\n    if (cart.shipping) {\n      for (const shipping of cart.shipping) {\n        if (shipping.shipmentQuotes) {\n          for (const quote of shipping.shipmentQuotes) {\n            shipmentQuotes.push(quote);\n          }\n        }\n      }\n    }\n  }\n  return uniqObjects(shipmentQuotes);\n}\n\nfunction shippingMethodsQueryStatus(currentCart) {\n  const cart = currentCart || Cart.findOne();\n  let queryStatus;\n  let failingShippingProvider;\n\n  if (cart) {\n    if (cart.shipping) {\n      for (const shipping of cart.shipping) {\n        const quotesQueryStatus = shipping.shipmentQuotesQueryStatus;\n        if (quotesQueryStatus) {\n          queryStatus = quotesQueryStatus.requestStatus;\n        }\n        if (queryStatus === \"error\") {\n          failingShippingProvider = quotesQueryStatus.shippingProvider;\n        }\n      }\n    }\n  }\n\n  return [queryStatus, failingShippingProvider];\n}\n\n/**\n * cartShipmentMethods - gets current shipment methods.\n * @return {Array} - Returns multiple methods if more than one\n * carrier has been chosen.\n */\nfunction cartShipmentMethods() {\n  const cart = Cart.findOne();\n  const shipmentMethods = [];\n  if (cart) {\n    if (cart.shipping) {\n      for (const shipping of cart.shipping) {\n        shipmentMethods.push(shipping.shipmentMethod);\n      }\n    }\n  }\n  return shipmentMethods;\n}\n\nfunction enabledShipping() {\n  const enabledShippingArr = [];\n  const apps = Reaction.Apps({\n    provides: \"shippingSettings\",\n    enabled: true,\n    shopId: Reaction.getPrimaryShopId()\n  });\n  for (const app of apps) {\n    if (app.enabled === true) enabledShippingArr.push(app);\n  }\n  return enabledShippingArr;\n}\n\nTemplate.coreCheckoutShipping.onCreated(function () {\n  this.autorun(() => {\n    this.subscribe(\"Shipping\");\n  });\n\n  this.state = new ReactiveDict();\n  this.state.setDefault({\n    isLoadingShippingMethods: true\n  });\n\n  const enabled = enabledShipping();\n  const isEnabled = enabled.length;\n  const shippingOpts = {\n    provides: \"settings\",\n    name: \"settings/shipping\",\n    template: \"shippingSettings\"\n  };\n\n  // If shipping not set, show shipping settings dashboard\n  if (!isEnabled) {\n    Reaction.showActionView(shippingOpts);\n  }\n});\n\nTemplate.coreCheckoutShipping.helpers({\n  // retrieves current rates and updates shipping rates\n  // in the users cart collection (historical, and prevents repeated rate lookup)\n  shipmentQuotes() {\n    const instance = Template.instance();\n    if (instance.subscriptionsReady()) {\n      const cart = Cart.findOne();\n\n      // isLoadingShippingMethods is updated here because, when this template\n      // reacts to a change in data, this method is called before hasShippingMethods().\n      const isLoadingShippingMethods = shippingMethodsQueryStatus()[0] === \"pending\";\n      instance.state.set(\"isLoadingShippingMethods\", isLoadingShippingMethods);\n\n      const shippingQuotes = cartShippingQuotes(cart);\n      return shippingQuotes;\n    }\n  },\n\n  hasShippingMethods() {\n    const instance = Template.instance();\n    const isLoadingShippingMethods = instance.state.get(\"isLoadingShippingMethods\");\n    if (isLoadingShippingMethods) {\n      return true;\n    }\n\n    // Useful for when shipping methods are enabled, but querying them fails\n    // due to internet connection issues.\n    const quotesQueryStatus = shippingMethodsQueryStatus();\n    const didAllQueriesFail =\n      quotesQueryStatus[0] === \"error\" && quotesQueryStatus[1] === \"all\";\n    if (didAllQueriesFail) {\n      return false;\n    }\n\n    const hasEnabledShippingProviders = enabledShipping().length > 0;\n    if (hasEnabledShippingProviders) {\n      return true;\n    }\n\n    return false;\n  },\n\n  // helper to display currently selected shipmentMethod\n  isSelected() {\n    const self = this;\n    const shipmentMethods = cartShipmentMethods();\n\n    for (const method of shipmentMethods) {\n      // if there is already a selected method, set active\n      if (_.isEqual(self.method, method)) {\n        return \"active\";\n      }\n    }\n    return null;\n  },\n\n  isReady() {\n    const instance = Template.instance();\n    const isReady = instance.subscriptionsReady();\n\n    if (Reaction.Subscriptions.Cart.ready()) {\n      if (isReady) {\n        return true;\n      }\n    }\n\n    return false;\n  },\n\n  /**\n   * Template helper that checks to see if the user has permissions for the shop\n   * responsible for shipping rates. This is the primary shop unless\n   * `merchantShippingRates` is enabled in marketplace\n   * @method isAdmin\n   * @return {Boolean} true if the user has admin access, otherwise false\n   */\n  isAdmin() {\n    const marketplaceSettings = Reaction.marketplace;\n    if (marketplaceSettings && marketplaceSettings.merchantShippingRates) {\n      Reaction.hasAdminAccess();\n    }\n    return Reaction.hasAdminAccess(Reaction.getPrimaryShopId());\n  }\n});\n\n//\n// Set and store cart shipmentMethod\n// this copies from shipmentMethods (retrieved rates)\n// to shipmentMethod (selected rate)\n//\nTemplate.coreCheckoutShipping.events({\n  \"click .list-group-item\"(event) {\n    event.preventDefault();\n    event.stopPropagation();\n    const cart = Cart.findOne();\n\n    Meteor.call(\"cart/setShipmentMethod\", cart._id, this.method, (error) => {\n      if (error) throw new Meteor.Error(\"set-shipment-method-error\", error.message);\n    });\n  },\n  \"click [data-event-action=configure-shipping]\"(event) {\n    event.preventDefault();\n\n    const dashboardRegistryEntry = Reaction.Apps({ name: \"reaction-dashboard\", provides: \"shortcut\" });\n    const shippingRegistryEntry = Reaction.Apps({ name: \"reaction-shipping\", provides: \"settings\" });\n\n    Reaction.showActionView([\n      dashboardRegistryEntry[0],\n      shippingRegistryEntry[0]\n    ]);\n  }\n});\n","import { Template } from \"meteor/templating\";\nimport { Meteor } from \"meteor/meteor\";\n/*\n * Template shippinges Helpers\n */\nTemplate.shippingSettings.onCreated(function () {\n  this.autorun(() => {\n    this.subscribe(\"Shipping\");\n  });\n});\n\nTemplate.shippingSettings.helpers({\n  checked(enabled) {\n    if (enabled === true) {\n      return \"checked\";\n    }\n    return \"\";\n  },\n  shown(enabled) {\n    if (enabled !== true) {\n      return \"hidden\";\n    }\n    return \"\";\n  }\n});\n\n// toggle shipping methods visibility\n// also toggles shipping method settings\nTemplate.shippingSettings.events({\n  /**\n   * shippingSettings settings update enabled status for shipping service on change\n   * @param  {event} event    jQuery Event\n   * @return {void}\n   */\n  \"change input.checkbox-switch.shipping-settings[name=enabled]\": (event) => {\n    event.preventDefault();\n    const settingsKey = event.target.getAttribute(\"data-key\");\n    const packageId = event.target.getAttribute(\"data-id\");\n    const fields = [{\n      property: \"enabled\",\n      value: event.target.checked\n    }];\n    // save shipping registry updates\n    if (packageId) {\n      // update package registry\n      Meteor.call(\"registry/update\", packageId, settingsKey, fields);\n      // also update shipping provider status\n      Meteor.call(\"shipping/provider/toggle\", packageId, settingsKey);\n    }\n  }\n});\n","import \"./checkout/shipping.html\";\nimport \"./checkout/shipping.js\";\n\nimport \"./settings/shipping.html\";\nimport \"./settings/shipping.js\";\n","import \"./templates\";\n","import _ from \"lodash\";\nimport Tooltip from \"tether-tooltip\";\nimport { Template } from \"meteor/templating\";\nimport { i18next, i18nextDep } from \"/client/api\";\nimport { Icon } from \"/imports/plugins/core/ui/client/components\";\n\nTemplate.button.onRendered(function () {\n  const buttonElement = this.$(\"button, a\")[0];\n\n  this.createTooltip = () => {\n    if (this.data.tooltip) {\n      if (this.tooltip) {\n        this.tooltip.destroy();\n      }\n      this.tooltip = new Tooltip({\n        target: buttonElement,\n        position: this.data.tooltipPosition || \"top left\",\n        content: i18next.t(this.data.i18nKeyTooltip, this.data.tooltip) || this.data.tooltip\n      });\n    }\n  };\n\n  this.autorun(() => {\n    i18nextDep.depend();\n    this.createTooltip();\n  });\n});\n\n/* eslint no-unused-vars: 1 */\n//\n// TODO review Template.button helpers for unused elementProps\n//\nTemplate.button.helpers({\n  iconComponent() {\n    return Icon;\n  },\n\n  elementProps() {\n    const data = Template.currentData();\n    const {\n      // Remove unneeded attributes\n      className, status, type, href,\n\n      // Pull out invalid HTML attributes / unuesed attributes\n      /* eslint-disable */\n      title, label, i18nKeyTitle, i18nKeyLabel, i18nKeyTooltip,\n      tooltip,  icon, toggle, onIcon, toggleOn, onClick,\n      /* eslint-enable */\n\n      // Get the rest of the properties and put them in attrs\n      // these will most likely be HTML attributes\n      ...attrs\n    } = data;\n\n    return {\n      buttonAttributes: {\n        ...attrs, // Spread the attrs into this object\n        // Then override any props from attrs with some better defaults\n        class: `rui button btn btn-${status} ${className}`,\n        href,\n        type: () => {\n          if (!href) {\n            return type || \"button\";\n          }\n        }\n      }\n    };\n  },\n  element() {\n    const data = Template.currentData();\n    if (data.type === \"link\") {\n      return \"uiLinkElement\";\n    }\n    return \"uiButtonElement\";\n  },\n  i18nKeyTitle() {\n    const { data } = Template.instance();\n    return data.itemKeyTitle || data.i18nKeyLabel;\n  },\n  title() {\n    const { data } = Template.instance();\n    return data.title || data.label;\n  },\n  toggleOn() {\n    const instance = Template.instance();\n    const { toggleOn } = instance.data;\n\n    if (toggleOn) {\n      if (_.isFunction(toggleOn)) {\n        return toggleOn(instance.data);\n      }\n\n      return toggleOn;\n    }\n  }\n});\n\nTemplate.button.events({\n  \"click .rui.button\"(event, instance) {\n    if (instance.data.onClick) {\n      instance.data.onClick(event);\n    }\n  }\n});\n","import React, { Component } from \"react\";\nimport PropTypes from \"prop-types\";\nimport createFragment from \"react-addons-create-fragment\";\nimport classnames from \"classnames/dedupe\";\nimport { Components, registerComponent } from \"@reactioncommerce/reaction-components\";\n\nclass Button extends Component {\n  constructor(props) {\n    super(props);\n\n    this.state = {\n      tooltipOpen: false\n    };\n\n    this.handleButtonMouseOver = this.handleButtonMouseOver.bind(this);\n    this.handleButtonMouseOut = this.handleButtonMouseOut.bind(this);\n  }\n\n  get isTooltipOpen() {\n    return this.state.tooltipOpen;\n  }\n\n  handleButtonMouseOver() {\n    this.setState({\n      tooltipOpen: this.props.tooltip ? true : false\n    });\n  }\n\n  handleButtonMouseOut() {\n    this.setState({\n      tooltipOpen: false\n    });\n  }\n\n  handleClick = (event) => {\n    if (this.props.tagName === \"a\") {\n      event.preventDefault();\n    }\n\n    // If this is a toogle button, and has a onToggle callback function\n    if (this.props.toggle && this.props.onToggle) {\n      if (this.props.toggleOn) {\n        // If toggleOn is true, return the toggleOn value, or true\n        this.props.onToggle(event, this.props.onValue || true);\n      } else {\n        // Otherwise return the value prop, or false\n        this.props.onToggle(event, this.props.value || false);\n      }\n    } else if (this.props.onClick) {\n      this.props.onClick(event, this.props.value);\n    }\n  }\n\n  handleKeyUp = (event) => {\n    // keyCode 32 (spacebar)\n    // keyCode 13 (enter/return)\n    if (event.keyCode === 32 || event.keyCode === 13) {\n      this.handleClick(event);\n    }\n  }\n\n  renderOnStateIcon() {\n    if (this.props.onIcon) {\n      return (\n        <Components.Icon icon={this.props.onIcon} />\n      );\n    }\n    return null;\n  }\n\n  renderNormalStateIcon() {\n    if (this.props.icon) {\n      return (\n        <Components.Icon icon={this.props.icon} />\n      );\n    }\n    return null;\n  }\n\n  renderIcon() {\n    if (this.props.toggle) {\n      if (this.props.toggleOn) {\n        return this.renderOnStateIcon();\n      }\n    }\n\n    return this.renderNormalStateIcon();\n  }\n\n  renderTooltipContent() {\n    if (this.isTooltipOpen && this.props.disabled === false) {\n      if (typeof this.props.tooltip === \"string\") {\n        return (\n          <Components.Translation defaultValue={this.props.tooltip} i18nKey={this.props.i18nKeyTooltip} />\n        );\n      }\n\n      return (\n        <div>\n          {this.props.tooltip}\n        </div>\n      );\n    }\n\n    return null;\n  }\n\n  renderLabel() {\n    if (this.props.label) {\n      if (this.props.toggle) {\n        if (this.props.toggleOn && this.props.toggleOnLabel) {\n          return (\n            <Components.Translation\n              defaultValue={this.props.toggleOnLabel}\n              i18nKey={this.props.i18nKeyToggleOnLabel}\n            />\n          );\n        }\n      }\n\n      return (\n        <Components.Translation\n          defaultValue={this.props.label}\n          i18nKey={this.props.i18nKeyLabel}\n        />\n      );\n    }\n\n    return null;\n  }\n\n  render() {\n    const {\n      active, status, toggleOn, primary, bezelStyle, className, containerStyle,\n\n      // Destructure these vars as they aren't valid as attributes on the HTML element button\n      iconAfter, label, i18nKeyTitle, i18nKeyLabel, i18nKeyTooltip, tabIndex, // eslint-disable-line no-unused-vars\n      tooltip, icon, toggle, onIcon, eventAction, buttonType, // eslint-disable-line no-unused-vars\n      toggleOnLabel, i18nKeyToggleOnLabel, tagName, onClick, onToggle, onValue, tooltipAttachment, // eslint-disable-line no-unused-vars\n\n      // Get the rest of the properties and put them in attrs\n      // these will most likely be HTML attributes\n      ...attrs\n    } = this.props;\n\n    const classes = classnames({\n      \"rui\": true,\n      \"btn\": true,\n      \"btn-default\": !primary &&  (status === null || status === undefined || status === \"default\"),\n      \"active\": active || toggleOn,\n      \"btn-success\": status === \"success\",\n      \"btn-danger\": status === \"danger\",\n      \"btn-info\": status === \"info\",\n      \"btn-warning\": status === \"warning\",\n      \"btn-link\": status === \"link\",\n      \"btn-cta\": status === \"cta\",\n      \"btn-primary\": primary === true || status === \"primary\",\n      [bezelStyle || \"flat\"]: true\n    }, className);\n\n    const extraProps = {};\n\n    if (tagName === \"a\") {\n      extraProps.href = \"#\";\n    }\n\n    // If this button is not an anchor, or an actual button, then add\n    // some extra props related to ARIA compliance for interactive components.\n    //\n    // - onKeyUp event handler for keyboard navigation\n    // - role=button, as it's a simulated button\n    // - tabIndex=0 so it obeys the natural tab flow\n    if (tagName !== \"button\" && tagName !== \"a\") {\n      extraProps.onKeyUp = this.handleKeyUp;\n      extraProps.role = \"button\";\n      extraProps.tabIndex = 0;\n    }\n\n    const buttonProps = Object.assign({\n      \"className\": classes,\n      \"data-event-action\": eventAction,\n      \"onFocus\": this.handleButtonMouseOver,\n      \"onBlur\": this.handleButtonMouseOut,\n      \"onMouseOut\": this.handleButtonMouseOut,\n      \"onMouseOver\": this.handleButtonMouseOver,\n      \"onClick\": this.handleClick,\n      \"type\": buttonType || \"button\"\n    }, attrs, extraProps);\n\n\n    // Create a react fragment for all the button children\n    let buttonChildren;\n\n    if (iconAfter) {\n      buttonChildren = createFragment({\n        label: this.renderLabel(),\n        icon: this.renderIcon(),\n        children: this.props.children\n      });\n    } else {\n      buttonChildren = createFragment({\n        icon: this.renderIcon(),\n        label: this.renderLabel(),\n        children: this.props.children\n      });\n    }\n\n    // Button with tooltip gets some special treatment\n    if (tooltip) {\n      return React.createElement(tagName, buttonProps,\n        <span className=\"rui btn-tooltip\" style={{ display: \"inline-flex\", ...containerStyle }}>\n          <Components.Tooltip attachment={tooltipAttachment} tooltipContent={this.renderTooltipContent()}>\n            {buttonChildren}\n          </Components.Tooltip>\n        </span>\n      );\n    }\n\n    // Add a wrapped container with styles for standard button\n    if (containerStyle) {\n      buttonChildren = (\n        <div style={containerStyle}>\n          {buttonChildren}\n        </div>\n      );\n    }\n\n    // Normal button, without tooltip\n    return React.createElement(tagName, buttonProps, buttonChildren);\n  }\n}\n\nButton.propTypes = {\n  active: PropTypes.bool,\n  bezelStyle: PropTypes.oneOf([\"flat\", \"solid\", \"outline\"]),\n  buttonType: PropTypes.string,\n  children: PropTypes.node,\n  className: PropTypes.oneOfType([PropTypes.string, PropTypes.object]),\n  containerStyle: PropTypes.object,\n  disabled: PropTypes.bool,\n  eventAction: PropTypes.string,\n  i18nKeyLabel: PropTypes.string,\n  i18nKeyTitle: PropTypes.string,\n  i18nKeyToggleOnLabel: PropTypes.string,\n  i18nKeyTooltip: PropTypes.string,\n  icon: PropTypes.string,\n  iconAfter: PropTypes.bool,\n  label: PropTypes.string,\n  onClick: PropTypes.func,\n  onIcon: PropTypes.string,\n  onToggle: PropTypes.func,\n  onValue: PropTypes.any,\n  primary: PropTypes.bool,\n  status: PropTypes.string,\n  tabIndex: PropTypes.string,\n  tagName: PropTypes.string,\n  title: PropTypes.string,\n  toggle: PropTypes.bool,\n  toggleOn: PropTypes.bool,\n  toggleOnLabel: PropTypes.string,\n  tooltip: PropTypes.oneOfType([PropTypes.string, PropTypes.object, PropTypes.node]),\n  tooltipAttachment: PropTypes.string,\n  value: PropTypes.any\n};\n\nButton.defaultProps = {\n  active: false,\n  disabled: false,\n  iconAfter: false,\n  tagName: \"button\",\n  toggle: false,\n  bezelStyle: \"flat\",\n  tooltipAttachment: \"bottom center\"\n};\n\nregisterComponent(\"Button\", Button);\n\nexport default Button;\n","import React, { Component } from \"react\";\nimport PropTypes from \"prop-types\";\nimport classnames from \"classnames\";\nimport { Components, registerComponent } from \"@reactioncommerce/reaction-components\";\nimport Button from \"./button.jsx\";\n\nclass ButtonSelect extends Component {\n  static propTypes = {\n    buttons: PropTypes.array,\n    currentButton: PropTypes.node,\n    defaultButton: PropTypes.object,\n    defaultNonActiveButtons: PropTypes.array,\n    nonActiveButtons: PropTypes.array\n  }\n\n  state = {\n    toggle: \"hidden\",\n    currentButton: {},\n    buttons: [],\n    activeButton: \"\",\n    nonActiveButtons: [],\n    defaultBgClassNames: \"\",\n    toggleIcon: classnames({ \"fa\": true, \"fa-chevron-down\": true, \"text-center\": true, \"fa-icon\": true }),\n    toggleClassNames: classnames({ \"button-dropdown\": true, \"hidden\": true })\n  }\n\n  componentWillMount() {\n    this.handleDefaultState();\n  }\n\n  handleDefaultState = () => {\n    const { props } = this;\n    const defaultButton = props.buttons.find((button) => button.active);\n    const defaultBgClassNames = classnames({ \"button-select\": true, [defaultButton.bgColor]: true });\n\n    const defaultNonActiveButtons = props.buttons.filter((button) => (button.active === false || button.active === undefined));\n    const currentButton = (\n      <Button\n        eventAction={defaultButton.eventAction}\n        status={defaultButton.status}\n        bezelStyle=\"solid\"\n        label={defaultButton.name}\n        i18nKeyLabel={defaultButton.i18nKeyLabel}\n        type={defaultButton.buttonType}\n      />\n    );\n\n    return this.setState({\n      currentButton,\n      defaultBgClassNames,\n      buttons: props.buttons,\n      nonActiveButtons: defaultNonActiveButtons\n    });\n  }\n\n  filterButtons = () => {\n    const { activeButton, buttons } = this.state;\n\n    const nonActiveButtons = buttons.filter((button) => button.name !== activeButton);\n    return this.setState({ nonActiveButtons });\n  }\n\n  handleToggle = () => {\n    const { toggle } = this.state;\n    let className;\n\n    if (toggle === \"hidden\") {\n      className = classnames({ \"button-dropdown\": true, \"hidden\": false });\n      return this.setState({\n        toggle: \"show\",\n        toggleClassNames: className,\n        toggleIcon: classnames({ \"fa\": true, \"fa-chevron-up\": true, \"text-center\": true, \"fa-icon\": true })\n      });\n    }\n\n    className = classnames({ \"button-dropdown\": true, \"hidden\": true });\n    return this.setState({\n      toggle: \"hidden\",\n      toggleClassNames: className,\n      toggleIcon: classnames({ \"fa\": true, \"fa-chevron-down\": true, \"text-center\": true, \"fa-icon\": true })\n    });\n  }\n\n  handleButtonChange = (button) => {\n    const currentButton = (\n      <Button\n        eventAction={button.eventAction}\n        status={button.status}\n        bezelStyle=\"solid\"\n        label={button.name}\n        i18nKeyLabel={button.i18nKeyLabel}\n        type={button.buttonType}\n      />\n    );\n\n    this.handleToggle();\n\n    return this.setState({\n      currentButton,\n      defaultBgClassNames: classnames({ \"button-select\": true, [button.bgColor]: true }),\n      activeButton: button.name\n    }, () => {\n      this.filterButtons();\n    });\n  }\n\n  render() {\n    const { toggleClassNames, nonActiveButtons, defaultBgClassNames, toggleIcon, currentButton } = this.state;\n    return (\n      <div className={defaultBgClassNames}>\n        <div className=\"button-group\">\n          {currentButton}\n          <Components.Button\n            tagName=\"div\"\n            className={{\n              \"btn\": false,\n              \"button-toggle\": true\n            }}\n            onClick={this.handleToggle}\n          >\n            <i className={toggleIcon} aria-hidden=\"true\" />\n          </Components.Button>\n        </div>\n        <div className={toggleClassNames}>\n          {nonActiveButtons.map((button, key) => (\n            <button\n              className=\"btn button-item\" key={key}\n              type=\"button\"\n              onClick={() => this.handleButtonChange(button)}\n            >\n              <Components.Translation defaultValue={button.name} i18nKey={button.i18nKeyLabel} />\n            </button>))}\n        </div>\n      </div>\n    );\n  }\n}\n\nregisterComponent(\"ButtonSelect\", ButtonSelect);\n\nexport default ButtonSelect;\n","import React from \"react\";\nimport { registerComponent } from \"@reactioncommerce/reaction-components\";\nimport IconButton from \"./iconButton\";\n\n/**\n * Edit button is a special type of Icon Button that is toggable by default\n * and presents a pencil ( or edit icon ) in its of state, and a check ( or success icon)\n * when it is on.\n *\n * Use this button in places where you need a pre-styled button for toggling editing\n * states of components.\n *\n * @param {Object} props Props passed into component\n * @returns {IconButton} Retruns an IconButton component with pre-configured icons for editing\n */\nconst EditButton = (props) => (\n  <IconButton\n    icon=\"fa fa-pencil\"\n    onIcon=\"fa fa-check\"\n    toggle={true}\n    primary={true}\n    bezelStyle=\"solid\"\n    kind=\"round\"\n    {...props}\n  />\n);\n\nregisterComponent(\"EditButton\", EditButton);\n\nexport default EditButton;\n","import React from \"react\";\nimport classnames from \"classnames\";\nimport { registerComponent } from \"@reactioncommerce/reaction-components\";\nimport Button from \"./button.jsx\";\n\nconst FlatButton = (props) => {\n  const buttonClassName = classnames({\n    rui: true,\n    button: true\n  });\n\n  return (\n    <Button\n      className={buttonClassName}\n      {...props}\n    />\n  );\n};\n\nFlatButton.propTypes = { ...Button.propTypes };\nFlatButton.defaultProps = {\n  bezelStyle: \"flat\"\n};\n\nregisterComponent(\"FlatButton\", FlatButton);\n\nexport default FlatButton;\n","import React from \"react\";\nimport PropTypes from \"prop-types\";\nimport { Components, registerComponent } from \"@reactioncommerce/reaction-components\";\n\n/**\n * Handle is a special type of button used for drag handles.\n * It uses the fa-bars icon by default, and does not have click or hover states\n *\n * Use this button in places where you need a pre-styled button for drag handles\n *\n * @param {Object} props Props passed into component\n * @returns {node} component with pre-configured icon for dragging\n */\nconst Handle = (props) => {\n  const handle = (\n    <div className=\"rui drag-handle btn btn-drag-handle\">\n      <Components.Icon\n        icon=\"fa fa-bars\"\n        {...props}\n      />\n    </div>\n  );\n\n  if (props.connectDragSource) {\n    return props.connectDragSource(handle);\n  }\n\n  return handle;\n};\n\nHandle.propTypes = {\n  connectDragSource: PropTypes.func\n};\n\nregisterComponent(\"Handle\", Handle);\n\nexport default Handle;\n","import React from \"react\";\nimport classnames from \"classnames\";\nimport { registerComponent } from \"@reactioncommerce/reaction-components\";\nimport Button from \"./button.jsx\";\n\nconst IconButton = ({ icon, onIcon, ...otherProps }) => {\n  // otherProps.buttonKind === 'flat'\n  // default should be default, flat is new css that makes the background transparent.\n  let buttonClassName;\n\n  if (otherProps.kind === \"flat\") {\n    buttonClassName = classnames({\n      \"icon\": true,\n      \"icon-only\": true\n    });\n  } else if (otherProps.kind === \"mediaGalleryStatus\") {\n    buttonClassName = classnames({\n      \"icon\": true,\n      \"icon-only\": true,\n      \"status-badge\": true\n    });\n  } else if (otherProps.kind === \"removeItem\") {\n    buttonClassName = classnames({\n      \"icon-only\": true,\n      \"variant-edit\": true,\n      \"remove-item-aria-container\": true\n    });\n  } else {\n    buttonClassName = classnames({\n      \"icon-only\": true,\n      \"variant-edit\": true\n    });\n  }\n\n  const iconClassName = classnames({\n    \"fa-lg\": true,\n    [icon]: true\n  });\n\n  let onIconClassName;\n\n  if (onIcon) {\n    onIconClassName = classnames({\n      \"fa-lg\": true,\n      [onIcon]: true\n    });\n  }\n\n  return (\n    <Button\n      className={buttonClassName}\n      icon={iconClassName}\n      onIcon={onIconClassName}\n      containerStyle={{ display: \"flex\", width: \"100%\", justifyContent: \"center\" }}\n      {...otherProps}\n    />\n  );\n};\n\nIconButton.propTypes = { ...Button.propTypes };\n\nIconButton.defaultProps = {\n  bezelStyle: \"solid\"\n};\n\nregisterComponent(\"IconButton\", IconButton);\n\nexport default IconButton;\n","export { default as Button } from \"./button.jsx\";\nexport { default as IconButton } from \"./iconButton\";\nexport { default as EditButton } from \"./editButton\";\nexport { default as VisibilityButton } from \"./visibilityButton\";\nexport { default as Handle } from \"./handle\";\nexport { default as ButtonSelect } from \"./buttonSelect\";\n","import React from \"react\";\nimport { registerComponent } from \"@reactioncommerce/reaction-components\";\nimport IconButton from \"./iconButton\";\n\n/**\n * Visibility button is a special type of Icon Button that is toggable by default\n * and presents a eye icon in its on state, and a eye-slash icon when it is off.\n *\n * Use this button in places where you need a pre-styled button for toggling visibility\n * states of components.\n *\n * @param {Object} props Props passed into component\n * @returns {IconButton} Retruns an IconButton component with pre-configured icons for visibility\n */\nconst VisibilityButton = (props) => (\n  <IconButton\n    icon=\"fa fa-eye-slash\"\n    onIcon=\"fa fa-eye\"\n    bezelStyle=\"solid\"\n    primary={true}\n    toggle={true}\n    {...props}\n  />\n);\n\nregisterComponent(\"VisibilityButton\", VisibilityButton);\n\nexport default VisibilityButton;\n","import React, { Children, Component } from \"react\";\nimport PropTypes from \"prop-types\";\nimport classnames from \"classnames\";\nimport { registerComponent } from \"@reactioncommerce/reaction-components\";\n\nclass Card extends Component {\n  constructor(props) {\n    super(props);\n\n    this.state = {\n      expanded: true\n    };\n  }\n\n  get isControlled() {\n    return typeof this.props.expanded === \"boolean\";\n  }\n\n  get isExpanded() {\n    if (this.isControlled) {\n      return this.props.expanded;\n    }\n\n    return this.state.expanded;\n  }\n\n  handleExpanderClick = (event) => {\n    if (this.isControlled) {\n      if (typeof this.props.onExpand === \"function\") {\n        this.props.onExpand(event, this, this.props.name, !this.isExpanded);\n      }\n    } else {\n      this.setState({\n        expanded: !this.state.expanded\n      }, () => {\n        if (typeof this.props.onExpand === \"function\") {\n          this.props.onExpand(event, this, this.props.name, this.isExpanded);\n        }\n      });\n    }\n  }\n\n  render() {\n    const { className } = this.props;\n    const elements = Children.map(this.props.children, (child) => {\n      const newProps = {};\n\n      if (child.props.actAsExpander) {\n        newProps.actAsExpander = true;\n        newProps.onClick = this.handleExpanderClick;\n      }\n\n      if (child.props.expandable || child.props.actAsExpander) {\n        newProps.expanded = this.isExpanded;\n      }\n\n      return React.cloneElement(child, newProps);\n    });\n\n    const baseClassName = classnames({\n      \"panel\": true,\n      \"panel-default\": true,\n      \"panel-active\": this.isExpanded,\n      \"closed\": this.isExpanded === false\n    }, className);\n\n    return (\n      <div className={baseClassName} style={this.props.style}>\n        {elements}\n      </div>\n    );\n  }\n}\n\nCard.defaultProps = {\n  expandable: false\n};\n\nCard.propTypes = {\n  children: PropTypes.node,\n  className: PropTypes.string,\n  expandable: PropTypes.bool,\n  expanded: PropTypes.bool,\n  name: PropTypes.string,\n  onExpand: PropTypes.func,\n  style: PropTypes.object\n};\n\nregisterComponent(\"Card\", Card);\n\nexport default Card;\n","import React, { Component } from \"react\";\nimport PropTypes from \"prop-types\";\nimport { VelocityTransitionGroup } from \"velocity-react\";\nimport Radium from \"radium\";\nimport classnames from \"classnames\";\nimport { registerComponent } from \"@reactioncommerce/reaction-components\";\n\nconst styles = {\n  noPadding: {\n    padding: 0\n  }\n};\n\nclass CardBody extends Component {\n  static defaultProps = {\n    expandable: false,\n    expanded: true\n  };\n\n  static propTypes = {\n    children: PropTypes.node,\n    expanded: PropTypes.bool,\n    padded: PropTypes.bool\n  };\n\n  renderCard() {\n    if (this.props.expanded) {\n      const baseClassName = classnames({\n        \"rui\": true,\n        \"panel-body\": true,\n        \"no-padding\": this.props.padded === false\n      });\n\n      return (\n        <div\n          className={baseClassName}\n          style={[\n            this.props.padded === false ? styles.noPadding : undefined\n          ]}\n        >\n          {this.props.children}\n        </div>\n      );\n    }\n\n    return null;\n  }\n\n  render() {\n    return (\n      <VelocityTransitionGroup\n        enter={{ animation: \"slideDown\" }}\n        leave={{ animation: \"slideUp\" }}\n      >\n        {this.renderCard()}\n      </VelocityTransitionGroup>\n    );\n  }\n}\n\nregisterComponent(\"CardBody\", CardBody, Radium);\n\nexport default Radium(CardBody);\n","import React from \"react\";\nimport PropTypes from \"prop-types\";\nimport { registerComponent } from \"@reactioncommerce/reaction-components\";\n\nconst CardGroup = ({ children }) => (\n  <div className=\"panel-group\">\n    {children}\n  </div>\n);\n\nCardGroup.propTypes = {\n  children: PropTypes.node\n};\n\nregisterComponent(\"CardGroup\", CardGroup);\n\nexport default CardGroup;\n","import React, { Component } from \"react\";\nimport PropTypes from \"prop-types\";\nimport classnames from \"classnames\";\nimport { Components, registerComponent } from \"@reactioncommerce/reaction-components\";\n\nclass CardHeader extends Component {\n  static defaultProps = {\n    actAsExpander: false,\n    expandable: false\n  };\n\n  static propTypes = {\n    actAsExpander: PropTypes.bool,\n    children: PropTypes.node,\n    expandOnSwitchOn: PropTypes.bool,\n    expanded: PropTypes.bool,\n    i18nKeyTitle: PropTypes.string,\n    icon: PropTypes.string,\n    imageView: PropTypes.node,\n    isValid: PropTypes.bool,\n    onClick: PropTypes.func,\n    onSwitchChange: PropTypes.func,\n    showSwitch: PropTypes.bool,\n    switchName: PropTypes.string,\n    switchOn: PropTypes.bool,\n    title: PropTypes.string\n  };\n\n  handleClick = (event) => {\n    event.preventDefault();\n\n    if (typeof this.props.onClick === \"function\") {\n      this.props.onClick(event);\n    }\n  }\n\n  handleSwitchChange = (event, isChecked, name) => {\n    if (this.props.expandOnSwitchOn && this.props.actAsExpander && this.props.expanded === false && isChecked === true) {\n      this.handleClick(event);\n    }\n\n    if (typeof this.props.onSwitchChange === \"function\") {\n      this.props.onSwitchChange(event, isChecked, name);\n    }\n  }\n\n  renderTitle() {\n    if (this.props.title) {\n      return (\n        <Components.CardTitle\n          i18nKeyTitle={this.props.i18nKeyTitle}\n          title={this.props.title}\n        />\n      );\n    }\n    return null;\n  }\n\n  renderImage() {\n    if (this.props.icon) {\n      return (\n        <div className=\"image\">\n          <Components.Icon icon={this.props.icon} />\n        </div>\n      );\n    }\n\n    if (this.props.imageView) {\n      return (\n        <div className=\"image\">\n          {this.props.imageView}\n        </div>\n      );\n    }\n\n    return null;\n  }\n\n  renderDisclsoureArrow() {\n    const expanderClassName = classnames({\n      rui: true,\n      expander: true,\n      open: this.props.expanded\n    });\n\n    return (\n      <div className={expanderClassName}>\n        <Components.IconButton\n          icon=\"fa fa-angle-down\"\n          bezelStyle=\"outline\"\n          style={{ borderColor: \"#dddddd\" }}\n          onClick={this.handleClick}\n        />\n      </div>\n    );\n  }\n\n  renderChildren() {\n    if (this.props.showSwitch) {\n      return (\n        <Components.Switch\n          checked={this.props.switchOn}\n          name={this.props.switchName}\n          onChange={this.handleSwitchChange}\n        />\n      );\n    }\n\n    return this.props.children;\n  }\n\n  render() {\n    let validation = false;\n\n    if (this.props.isValid === false) {\n      validation = true;\n    }\n\n    const baseClassName = classnames({\n      \"rui\": true,\n      \"panel-heading\": true,\n      \"card-header\": true,\n      \"expandable\": this.props.actAsExpander,\n      validation\n    });\n\n    if (this.props.actAsExpander) {\n      return (\n        <div className={baseClassName}>\n          <Components.Button\n            tagName=\"div\"\n            className={{\n              \"btn\": false,\n              \"content-view\": true\n            }}\n            onClick={this.handleClick}\n          >\n            {this.renderImage()}\n            {this.renderTitle()}\n          </Components.Button>\n          <div className=\"action-view\">\n            {this.renderChildren()}\n          </div>\n          {this.renderDisclsoureArrow()}\n        </div>\n      );\n    }\n\n    return (\n      <div className={baseClassName}>\n        <div className=\"content-view\">\n          {this.renderTitle()}\n        </div>\n        <div className=\"action-view\">\n          {this.props.children}\n        </div>\n      </div>\n    );\n  }\n}\n\nregisterComponent(\"CardHeader\", CardHeader);\n\nexport default CardHeader;\n","import React from \"react\";\nimport PropTypes from \"prop-types\";\nimport { Components, registerComponent } from \"@reactioncommerce/reaction-components\";\n\nconst CardTitle = (props) => {\n  const { element, ...rest } = props;\n\n  if (element) {\n    return React.cloneElement(element, rest);\n  }\n\n  return (\n    <h3 className=\"panel-title\">\n      <Components.Translation defaultValue={props.title} i18nKey={props.i18nKeyTitle} />\n      {props.children}\n    </h3>\n  );\n};\n\nCardTitle.propTypes = {\n  children: PropTypes.node,\n  element: PropTypes.node,\n  i18nKeyTitle: PropTypes.string,\n  title: PropTypes.string\n};\n\nregisterComponent(\"CardTitle\", CardTitle);\n\nexport default CardTitle;\n","import React from \"react\";\nimport PropTypes from \"prop-types\";\nimport { registerComponent } from \"@reactioncommerce/reaction-components\";\n\nconst CardToolbar = ({ children }) => (\n  <div className=\"rui card-toolbar\">\n    {children}\n  </div>\n);\n\n\nCardToolbar.propTypes = {\n  children: PropTypes.node\n};\n\nregisterComponent(\"CardToolbar\", CardToolbar);\n\nexport default CardToolbar;\n","import { Template } from \"meteor/templating\";\n/**\n* @typedef CardProps\n* @type Object\n* @property {Object} controls Reaction UI Button or other control props\n* @property {function} onContentClick y The Y\n*/\n\nTemplate.card.events({\n  \"click .content\"(event, instance) {\n    if (instance.data.onContentClick) {\n      instance.data.onContentClick(event);\n    }\n  }\n});\n","export { default as Card } from \"./card\";\nexport { default as CardHeader } from \"./cardHeader\";\nexport { default as CardTitle } from \"./cardTitle\";\nexport { default as CardBody } from \"./cardBody\";\nexport { default as CardGroup } from \"./cardGroup\";\nexport { default as CardToolbar } from \"./cardToolbar\";\nexport { default as SettingsCard } from \"./settingsCard\";\n","/**\n * Settings Card is a composite component to standardize the\n * creation settings cards (panels) in the dashboard.\n */\n\nimport React, { Component } from \"react\";\nimport PropTypes from \"prop-types\";\nimport Blaze from \"meteor/gadicc:blaze-react-component\";\nimport { Reaction } from \"/client/api\";\nimport { Components, registerComponent, composeWithTracker } from \"@reactioncommerce/reaction-components\";\n\nclass SettingsCard extends Component {\n  static defaultProps = {\n    showSwitch: true\n  }\n\n  static propTypes = {\n    children: PropTypes.node,\n    enabled: PropTypes.bool,\n    expanded: PropTypes.bool,\n    i18nKeyTitle: PropTypes.string,\n    icon: PropTypes.string,\n    name: PropTypes.string,\n    onExpand: PropTypes.func,\n    onSwitchChange: PropTypes.func,\n    packageName: PropTypes.string,\n    padded: PropTypes.bool,\n    preferences: PropTypes.object,\n    saveOpenStateToPreferences: PropTypes.bool,\n    showSwitch: PropTypes.bool,\n    template: PropTypes.any,\n    title: PropTypes.string\n  }\n\n  handleSwitchChange = (event, isChecked) => {\n    if (typeof this.props.onSwitchChange === \"function\") {\n      this.props.onSwitchChange(event, isChecked, this.props.name, this);\n    }\n  }\n\n  handleExpand = (event, card, name, isExpanded) => {\n    if (this.props.onExpand) {\n      this.props.onExpand(event, card, name, isExpanded);\n    }\n\n    if (this.props.packageName && this.props.saveOpenStateToPreferences) {\n      Reaction.updateUserPreferences(this.props.packageName, \"settingsCards\", {\n        [this.props.name]: isExpanded\n      });\n    }\n  }\n\n  get isExpanded() {\n    if (this.props.packageName && this.props.saveOpenStateToPreferences) {\n      return this.props.preferences[this.props.name];\n    }\n\n    return this.props.expanded;\n  }\n\n  renderCardBody() {\n    if (this.props.template) {\n      return (\n        <Blaze template={this.props.template} />\n      );\n    }\n\n    return this.props.children;\n  }\n\n  render() {\n    return (\n      <Components.Card\n        expandable={true}\n        onExpand={this.handleExpand}\n        expanded={this.isExpanded}\n        name={this.props.name}\n      >\n        <Components.CardHeader\n          i18nKeyTitle={this.props.i18nKeyTitle}\n          icon={this.props.icon}\n          title={this.props.title}\n          showSwitch={this.props.showSwitch}\n          actAsExpander={true}\n          switchOn={this.props.enabled}\n          switchName={this.props.name}\n          expandOnSwitchOn={true}\n          onSwitchChange={this.handleSwitchChange}\n        />\n        <Components.CardBody expandable={true} padded={this.props.padded}>\n          {this.renderCardBody()}\n        </Components.CardBody>\n      </Components.Card>\n    );\n  }\n}\n\nfunction composer(props, onData) {\n  if (props.packageName && props.saveOpenStateToPreferences) {\n    const preferences = Reaction.getUserPreferences(props.packageName, \"settingsCards\", {});\n    onData(null, { preferences });\n  } else {\n    onData(null, {});\n  }\n}\n\nconst decoratedComponent = composeWithTracker(composer)(SettingsCard);\n\nregisterComponent(\"SettingsCard\", SettingsCard, composeWithTracker(composer));\n\nexport default decoratedComponent;\n","import React, { Component } from \"react\";\nimport PropTypes from \"prop-types\";\nimport classnames from \"classnames\";\nimport TextareaAutosize from \"react-textarea-autosize\";\nimport { Components, registerComponent } from \"@reactioncommerce/reaction-components\";\nimport { i18next } from \"/client/api\";\n\n\nclass TextField extends Component {\n  /**\n   * Getter: value\n   * @return {String} value for text input\n   */\n  get value() {\n    // if the props.value is not a number\n    // return either the value or and empty string\n    if (isNaN(this.props.value)) {\n      return this.props.value || \"\";\n    }\n    return this.props.value;\n  }\n\n  /**\n   * Getter: isValid\n   * @return {Boolean} true/false if field is valid from props.isValid or props.valitation[this.props.name].isValid\n   */\n  get isValid() {\n    const { isValid } = this.props;\n\n    if (typeof isValid === \"boolean\") {\n      return isValid;\n    } else if (this.validationMessage) {\n      return false;\n    }\n\n    return undefined;\n  }\n\n  get isHelpMode() {\n    // TODO: add functionality to toggle helpMode on / off.\n    // When on, helpText will always show.\n    // When off, only validation messages will show.\n    // For now, all helpText will show, meaning this doesn't affect how the app currently works.\n    // This is here just to lay the foundation for when we add the toggle.\n\n    return true;\n  }\n\n  get validationMessage() {\n    const { name, validation } = this.props;\n\n    if (typeof validation === \"object\" && validation.messages && validation.messages[name]) {\n      return validation.messages[name];\n    }\n\n    return undefined;\n  }\n\n  getEventValue(event) {\n    if (this.props.type === \"number\") {\n      try {\n        return Number(event.target.value);\n      } catch (err) {\n        return event.target.value;\n      }\n    }\n    return event.target.value;\n  }\n\n  /**\n   * onValueChange\n   * @summary set the state when the value of the input is changed\n   * @param  {Event} event Event object\n   * @return {void}\n   */\n  onChange = (event) => {\n    if (this.props.onChange) {\n      this.props.onChange(event, this.getEventValue(event), this.props.name);\n    }\n  }\n\n  /**\n   * onBlur\n   * @summary set the state when the value of the input is changed\n   * @param  {Event} event Event object\n   * @return {void}\n   */\n  onBlur = (event) => {\n    if (this.props.onBlur) {\n      this.props.onBlur(event, this.getEventValue(event), this.props.name);\n    }\n  }\n\n  /**\n   * onFocus\n   * @summary set the state when the input is focused\n   * @param  {Event} event Event object\n   * @return {void}\n   */\n  onFocus = (event) => {\n    if (this.props.onFocus) {\n      this.props.onFocus(event, this.getEventValue(event), this.props.name);\n    }\n  }\n\n  /**\n   * onKeyDown\n   * @summary set the state when the value of the input is changed\n   * @param  {Event} event Event object\n   * @return {void}\n   */\n  onKeyDown = (event) => {\n    if (this.props.onKeyDown) {\n      this.props.onKeyDown(event, this.props.name);\n    }\n\n    if (this.props.onReturnKeyDown && event.keyCode === 13) {\n      this.props.onReturnKeyDown(event, event.target.value, this.props.name);\n    }\n  }\n\n  /**\n   * Render a multiline input (textarea)\n   * @return {JSX} jsx\n   */\n  renderMultilineInput() {\n    const placeholder = i18next.t(this.props.i18nKeyPlaceholder, {\n      defaultValue: this.props.placeholder\n    });\n\n    return (\n      <TextareaAutosize\n        className={`${this.props.name}-edit-input`}\n        onBlur={this.onBlur}\n        onChange={this.onChange}\n        onFocus={this.onFocus}\n        placeholder={placeholder}\n        ref=\"input\"\n        value={this.value}\n        style={this.props.style}\n        disabled={this.props.disabled}\n        maxRows={this.props.maxRows}\n        id={this.props.id}\n      />\n    );\n  }\n\n  /**\n   * Render a singleline input\n   * @return {JSX} jsx\n   */\n  renderSingleLineInput() {\n    const inputClassName = classnames({\n      [`${this.props.name || \"text\"}-edit-input`]: true\n    }, this.props.className);\n\n    const placeholder = i18next.t(this.props.i18nKeyPlaceholder, {\n      defaultValue: this.props.placeholder\n    });\n\n    return (\n      <input\n        className={inputClassName}\n        name={this.props.name}\n        onBlur={this.onBlur}\n        onChange={this.onChange}\n        onFocus={this.onFocus}\n        onKeyDown={this.onKeyDown}\n        placeholder={placeholder}\n        ref=\"input\"\n        type={this.props.type || \"text\"}\n        min={this.props.minValue}\n        max={this.props.maxValue}\n        value={this.value}\n        style={this.props.style}\n        disabled={this.props.disabled}\n        id={this.props.id}\n      />\n    );\n  }\n\n  /**\n   * Render either a multiline (textarea) or singleline (input)\n   * @return {JSX} jsx template\n   */\n  renderField() {\n    if (this.props.multiline === true) {\n      return this.renderMultilineInput();\n    }\n\n    return this.renderSingleLineInput();\n  }\n\n  /**\n   * Render the label for the text field if one is provided in props\n   * @return {ReactNode|null} react node or null\n   */\n  renderLabel() {\n    if (this.props.label) {\n      return (\n        <label htmlFor={this.props.id}>\n          <Components.Translation defaultValue={this.props.label} i18nKey={this.props.i18nKeyLabel} />\n        </label>\n      );\n    }\n\n    return null;\n  }\n\n  /**\n   * Render help text or validation message\n   * @return {ReactNode|null} react node or null\n   */\n  renderHelpText() {\n    const helpMode = this.isHelpMode;\n    const message = this.validationMessage;\n    let { helpText } = this.props;\n    let i18nKey = this.props.i18nKeyHelpText;\n\n    if (this.isValid === false && message) {\n      helpText = message.message;\n      i18nKey = message.i18nKeyMessage;\n    }\n\n    // If this is a validation message, show even if helpMode is false\n    if (this.isValid === false && message) {\n      return (\n        <span className=\"help-block\">\n          <Components.Translation defaultValue={helpText} i18nKey={i18nKey} />\n        </span>\n      );\n    }\n\n    // If this is a non-validation message, only show if helpMode is true\n    if (helpText && helpMode) {\n      return (\n        <span className=\"help-block\">\n          <Components.Translation defaultValue={helpText} i18nKey={i18nKey} />\n        </span>\n      );\n    }\n\n    return null;\n  }\n\n  /**\n   * Render Component\n   * @return {JSX} component\n   */\n  render() {\n    const classes = classnames({\n      // Base\n      \"rui\": true,\n      \"textfield\": true,\n      \"form-group\": true,\n      \"has-error\": this.isValid === false,\n      \"has-success\": this.isValid === true,\n\n      // Alignment\n      \"center\": this.props.align === \"center\",\n      \"left\": this.props.align === \"left\",\n      \"right\": this.props.align === \"right\"\n    });\n\n    return (\n      <div className={classes} style={this.props.textFieldStyle}>\n        {this.renderLabel()}\n        {this.renderField()}\n        {this.renderHelpText()}\n        <span className=\"product-detail-message\" id=\"{{field}}-message\" />\n      </div>\n    );\n  }\n}\n\nTextField.propTypes = {\n  align: PropTypes.oneOf([\"left\", \"center\", \"right\", \"justify\"]),\n  className: PropTypes.string,\n  disabled: PropTypes.bool,\n  helpText: PropTypes.string,\n  i18nKeyHelpText: PropTypes.string,\n  i18nKeyLabel: PropTypes.string,\n  i18nKeyPlaceholder: PropTypes.string,\n  id: PropTypes.string,\n  isValid: PropTypes.bool,\n  label: PropTypes.string,\n  maxRows: PropTypes.number,\n  maxValue: PropTypes.any,\n  minValue: PropTypes.number,\n  multiline: PropTypes.bool,\n  name: PropTypes.string,\n  onBlur: PropTypes.func,\n  onChange: PropTypes.func,\n  onFocus: PropTypes.func,\n  onKeyDown: PropTypes.func,\n  onReturnKeyDown: PropTypes.func,\n  placeholder: PropTypes.string,\n  style: PropTypes.object,\n  textFieldStyle: PropTypes.object,\n  type: PropTypes.string,\n  validation: PropTypes.object,\n  value: PropTypes.any\n};\n\nregisterComponent(\"TextField\", TextField);\n\nexport default TextField;\n","import React, { Component } from \"react\";\nimport PropTypes from \"prop-types\";\nimport { TextField } from \"@reactioncommerce/reaction-ui\";\n\n\nclass SortableTableFilter extends Component {\n  render() {\n    return (\n      <TextField\n        i18nKeyPlaceholder=\"reactionUI.components.sortableTable.filterPlaceholder\"\n        id=\"react-table-filter-input\"\n        name={this.props.name}\n        onChange={this.props.onChange}\n        placeholder=\"Filter Data\"\n        tabIndex={0}\n        type=\"text\"\n        value={this.props.value}\n      />\n    );\n  }\n}\n\n\nSortableTableFilter.propTypes = {\n  name: PropTypes.string,\n  onChange: PropTypes.func,\n  value: PropTypes.string\n};\n\nexport default SortableTableFilter;\n","export { default as PaginationButtons } from \"./paginationButtons\";\nexport { default as SortableTablePagination } from \"./pagination\";\n\nexport { default as SortableTableFilter } from \"./filter\";\n","import React, { Component } from \"react\";\nimport PropTypes from \"prop-types\";\nimport classnames from \"classnames\";\nimport { PaginationButtons } from \"../sortableTableComponents\";\n\n\nclass SortableTablePagination extends Component {\n  constructor(props) {\n    super(props);\n\n    this.getSafePage = this.getSafePage.bind(this);\n    this.changePage = this.changePage.bind(this);\n    this.applyPage = this.applyPage.bind(this);\n\n    this.state = {\n      page: props.page\n    };\n  }\n\n  componentWillReceiveProps(nextProps) {\n    this.setState({ page: nextProps.page });\n  }\n\n  getSafePage(safePage) {\n    let page = safePage;\n    if (isNaN(page)) {\n      ({ page } = this.props);\n    }\n    return Math.min(Math.max(page, 0), this.props.pages - 1);\n  }\n\n  changePage(page) {\n    let safePage = page;\n    safePage = this.getSafePage(page);\n    this.setState({ page: safePage });\n    if (this.props.page !== safePage) {\n      this.props.onPageChange(safePage);\n    }\n  }\n\n  handlePageSizeChange = (event) => {\n    const { onPageSizeChange } = this.props;\n    onPageSizeChange && onPageSizeChange(Number(event.target.value));\n  }\n\n  applyPage(e) {\n    e && e.preventDefault();\n    const { page } = this.state;\n    this.changePage(page === \"\" ? this.props.page : page);\n  }\n\n  render() {\n    const {\n      // Computed\n      pages,\n      // Props\n      page,\n      showPageSizeOptions,\n      pageSizeOptions,\n      pageSize,\n      showPageJump,\n      canPrevious,\n      canNext,\n      className,\n      PreviousComponent = PaginationButtons,\n      NextComponent = PaginationButtons\n    } = this.props;\n\n    return (\n      <div\n        className={classnames(className, \"-pagination\")}\n        style={this.props.paginationStyle}\n      >\n        <div className=\"-center\">\n          <span className=\"-pageInfo\">\n            {this.props.pageText}{\" \"}\n            {showPageJump\n              ? <div className=\"-pageJump\">\n                <input\n                  type={this.state.page === \"\" ? \"text\" : \"number\"}\n                  onChange={(e) => {\n                    const val = e.target.value;\n                    const currentPage = val - 1;\n                    if (val === \"\") {\n                      return this.setState({ page: val });\n                    }\n                    this.setState({ page: this.getSafePage(currentPage) });\n                  }}\n                  value={this.state.page === \"\" ? \"\" : this.state.page + 1}\n                  onBlur={this.applyPage}\n                  onKeyPress={(e) => {\n                    if (e.which === 13 || e.keyCode === 13) {\n                      this.applyPage();\n                    }\n                  }}\n                />\n              </div>\n              : <span className=\"-currentPage\">{page + 1}</span>}{\" \"}\n            {this.props.ofText}{\" \"}\n            <span className=\"-totalPages\">{pages || 1}</span>\n          </span>\n          {showPageSizeOptions &&\n            <span className=\"select-wrap -pageSizeOptions\">\n              <select\n                onBlur={this.handlePageSizeChange}\n                onChange={this.handlePageSizeChange}\n                value={pageSize}\n              >\n                {pageSizeOptions.map((option, i) => (\n                  <option key={i} value={option}>\n                    {option} {this.props.rowsText}\n                  </option>\n                ))}\n              </select>\n            </span>}\n        </div>\n        <div className=\"-previous\">\n          <PreviousComponent\n            onClick={(e) => { // eslint-disable-line no-unused-vars\n              if (canPrevious) {\n                return this.changePage(page - 1);\n              }\n            }}\n            disabled={!canPrevious}\n          >\n            {this.props.previousText}\n          </PreviousComponent>\n        </div>\n        <span className=\"-divider\">|</span>\n        <div className=\"-next\">\n          <NextComponent\n            onClick={(e) => { // eslint-disable-line no-unused-vars\n              if (canNext) {\n                return this.changePage(page + 1);\n              }\n            }}\n            disabled={!canNext}\n          >\n            {this.props.nextText}\n          </NextComponent>\n        </div>\n      </div>\n    );\n  }\n}\n\nSortableTablePagination.propTypes = {\n  NextComponent: PropTypes.func,\n  PreviousComponent: PropTypes.func,\n  canNext: PropTypes.bool,\n  canPrevious: PropTypes.bool,\n  className: PropTypes.string,\n  nextText: PropTypes.string,\n  ofText: PropTypes.string,\n  onPageChange: PropTypes.func,\n  onPageSizeChange: PropTypes.func,\n  page: PropTypes.number,\n  pageSize: PropTypes.number,\n  pageSizeOptions: PropTypes.array,\n  pageText: PropTypes.string,\n  pages: PropTypes.number,\n  paginationStyle: PropTypes.object,\n  previousText: PropTypes.string,\n  rowsText: PropTypes.string,\n  showPageJump: PropTypes.bool,\n  showPageSizeOptions: PropTypes.bool\n};\n\nexport default SortableTablePagination;\n","import React, { Component } from \"react\";\nimport PropTypes from \"prop-types\";\nimport { Button } from \"/imports/plugins/core/ui/client/components\";\nimport { i18next } from \"/client/api\";\n\n\nclass PaginationButtons extends Component {\n  renderIcon() {\n    const { children } = this.props;\n\n    if (children === \"Previous\") {\n      const angleDirection = i18next.dir() === \"rtl\" ? \"right\" : \"left\";\n      return `fa fa-angle-${angleDirection}`;\n    }\n\n    if (children === \"Next\") {\n      const angleDirection = i18next.dir() === \"rtl\" ? \"left\" : \"right\";\n      return `fa fa-angle-${angleDirection}`;\n    }\n\n    return null;\n  }\n\n\n  renderIconPosition() {\n    const { children } = this.props;\n\n    if (children === \"Previous\") {\n      return false;\n    }\n\n    if (children === \"Next\") {\n      return true;\n    }\n\n    return false;\n  }\n\n  renderText() {\n    const { children } = this.props;\n\n    if (children === \"Previous\") {\n      return \" Previous\";\n    }\n\n    if (children === \"Next\") {\n      return \"Next \";\n    }\n\n    return null;\n  }\n\n  render() {\n    const { disabled, onClick } = this.props;\n\n    return (\n      <Button\n        bezelStyle=\"flat\"\n        icon={this.renderIcon()}\n        iconAfter={this.renderIconPosition()}\n        label={this.renderText()}\n        status=\"default\"\n        tagName=\"button\"\n        onClick={onClick}\n        disabled={disabled}\n        className=\"sortableTable-pagination\"\n      />\n    );\n  }\n}\n\nPaginationButtons.propTypes = {\n  children: PropTypes.string,\n  disabled: PropTypes.bool,\n  onClick: PropTypes.func\n};\n\nexport default PaginationButtons;\n","export { default as SortableTable } from \"./sortableTable\";\nexport { default as SortableTableLegacy } from \"./sortableTableLegacy\";\n","import React, { Component } from \"react\";\nimport PropTypes from \"prop-types\";\nimport matchSorter from \"match-sorter\";\nimport ReactTable from \"react-table\";\nimport { Meteor } from \"meteor/meteor\";\nimport { Counts } from \"meteor/tmeasday:publish-counts\";\nimport { registerComponent } from \"@reactioncommerce/reaction-components\";\nimport { SortableTableFilter, SortableTablePagination } from \"./sortableTableComponents\";\n\n/**\n * @file SortableTable is a React Component wrapper around {@link https://react-table.js.org} ReactTable.\n * Any functionality from ReactTable should be available in SortableTable out of the box, but may require styling.\n * For more, see {@link https://react-table.js.org/#/story/readme ReactTable docs}\n *\n * @module SortableTable\n * @extends Component\n */\n\nclass SortableTable extends Component {\n  constructor(props) {\n    super(props);\n\n    this.state = {\n      currentPage: 0,\n      filterInput: \"\",\n      maxPages: 0,\n      query: props.query || {}\n    };\n\n    this.handleFilterInput = this.handleFilterInput.bind(this);\n  }\n\n  componentWillReceiveProps(nextProps) {\n    if (nextProps.query !== this.props.query) {\n      this.setState({\n        query: nextProps.query\n      });\n    }\n  }\n\n  /**\n   * @name getMeteorData()\n   * @method\n   * @summary Absorb publication / collection information from props, output data from subscription.\n   * Use props to get collection, use that information to call Meteor to get subscription and output data for table.\n   * @prop {String} matchingResultsCount - Send to Counts collection to get results count of sub\n   * @prop {String} publication - publication to subscribe to\n   * @prop {Object} collection - collection to get data from\n   * @returns {Object} loading status (bool), results (object), and matchingResults (number)\n   */\n  getMeteorData() {\n    const { collection, matchingResultsCount, publication } = this.props;\n\n    // Get a count of the number of items matching the current filter.\n    // If no filter is set it will return the total number of items in the collection.\n    const matchingResults = Counts.get(matchingResultsCount);\n\n    const options = {};\n\n    const pubHandle = Meteor.subscribe(publication, this.state.query, Object.assign({}, options));\n\n    // optional transform of collection for grid results\n    let results = collection.find(this.state.query, options).fetch();\n    if (this.props.transform) {\n      results = this.props.transform(results);\n    }\n\n    return {\n      loading: !pubHandle.ready(),\n      results,\n      matchingResults\n    };\n  }\n\n\n  /**\n   * @name customFilter()\n   * @method\n   * @summary Replace default filter with customized filter, custom filter is case insensitive\n   * custom filter searches entire string, not just from string start\n   * @param {Object} filter user-typed data\n   * @param {Object} row row info for associated filter\n   * @returns {String|Boolean} replacement filter\n   */\n  customFilter = (filter, row) => {\n    const id = filter.pivotId || filter.id;\n    if (row[id] !== null && typeof row[id] === \"string\") {\n      return (row[id] !== undefined\n        ? String(row[id].toLowerCase()).includes(filter.value.toLowerCase())\n        : true);\n    }\n  }\n\n\n  /**\n   * @name handleFilterInput()\n   * @summary Update state when filter is changed\n   * @param {script} event onChange event when typing in filter field\n   * @param {string} value text field input\n   * @param {string} field input field name to watch\n   * @return {function} state for field value\n   */\n  handleFilterInput = (event, value, field) => {\n    this.setState({\n      [field]: value\n    });\n  }\n\n\n  /**\n   * @name handleClick()\n   * @summary Handle click on table row\n   * @param {object} rowInfo row data passed in from ReactTable\n   * @return {function} return onRowClick function prop, or undefined if not supplied\n   */\n  handleClick(rowInfo) {\n    const { onRowClick } = this.props;\n\n    if (typeof onRowClick === \"function\") {\n      return (\n        onRowClick({\n          className: \"sortable-table-row\",\n          props: {\n            data: {\n              _id: rowInfo.original._id,\n              type: rowInfo.original.type\n            }\n          }\n        })\n      );\n    }\n  }\n\n\n  /**\n   * @name renderColumns()\n   * @method\n   * @summary Absorb columnMetadata information from props, output columns to display\n   * @prop {String} columnMetadata - Object of data field, column header\n   * @returns {Object} data filed (string), translated header (string), and minWidth (number / undefined)\n   */\n  renderColumns() {\n    const { columnMetadata } = this.props;\n\n    // Add minWidth = undefined to override 100px default set by ReactTable\n    const displayColumns = columnMetadata.map((element) => Object.assign({}, element, {\n      minWidth: undefined\n    }));\n\n    return displayColumns;\n  }\n\n\n  /**\n   * @name renderData()\n   * @method\n   * @summary Take data from getMeteorData() and filter if needed, or spit out raw if no filter\n   * @returns {Object} data filed (string), translated header (string), and minWidth (number / undefined)\n   */\n  renderData() {\n    const { filteredFields, filterType } = this.props;\n    const { filterInput } = this.state;\n\n    let originalData = [];\n\n    if (this.getMeteorData().results) {\n      originalData = this.getMeteorData().results;\n    }\n\n    if (filterType === \"both\" || filterType === \"table\") {\n      const filteredData = matchSorter(originalData, filterInput, { keys: filteredFields });\n      return filteredData;\n    }\n\n    return originalData;\n  }\n\n\n  /**\n   * @name renderColumnFilter()\n   * @summary Uses props to determine if Column Filters should be shown\n   * @returns {Bool} returns true or false for column filters\n   */\n  renderColumnFilter() {\n    const { filterType } = this.props;\n\n    if (filterType === \"both\" || filterType === \"column\") {\n      return true;\n    }\n\n    return false;\n  }\n\n\n  /**\n   * @name getTableData()\n   * @method\n   * @summary Checks if JSON data is passed vs publication data\n   * @returns {Number} returns number of available data\n   */\n  getTableData() {\n    if (this.props.data) {\n      return this.props.data.length;\n    }\n\n    return this.getMeteorData().matchingResults;\n  }\n\n  /**\n   * @name renderTableFilter()\n   * @method\n   * @summary Uses props to determine if a Table Filter should be shown\n   * @returns {node} returns JSX node or null\n   */\n  renderTableFilter() {\n    const { filterType } = this.props;\n\n    if (this.getTableData() !== 0) {\n      if (filterType === \"both\" || filterType === \"table\") {\n        return (\n          <SortableTableFilter\n            onChange={this.handleFilterInput}\n            value={this.state.filterInput}\n            name=\"filterInput\"\n          />\n        );\n      }\n    }\n\n    return null;\n  }\n\n  /**\n   * @name selectedRowsClassName()\n   * @method\n   * @summary If any rows are selected, give them a className of \"selected-row\"\n   * @param {object} rowInfo row data passed in from ReactTable\n   * @returns {String} className to apply to row that is selected, or empty string if no row is selected\n   */\n  selectedRowsClassName(rowInfo) {\n    const { selectedRows } = this.props;\n    let className = \"\";\n\n    if (selectedRows && selectedRows.length) {\n      if (rowInfo !== undefined && selectedRows.includes(rowInfo.row._id)) {\n        className = \"selected-row\";\n      }\n    }\n\n    return className;\n  }\n\n  /**\n   * @name displayNoResultsFound()\n   * @method\n   * @summary This function displays a 'No Results Found' when there is no data to populate the table\n   * @return {node} returns a JSX node or empty string\n   */\n  displayNoResultsFound() {\n    let displayText = \"\";\n    if (this.getTableData() === 0) {\n      displayText = <span className=\"sortableTable-noDataText\">{this.props.noDataMessage}</span>;\n    }\n    return displayText;\n  }\n\n  renderPaginationBottom = () => {\n    if (this.getTableData() === 0) {\n      return false;\n    }\n\n    return true;\n  }\n\n  setMinRows = () => {\n    if (this.getTableData() === 0) {\n      return 3;\n    }\n\n    return 0;\n  }\n\n  render() {\n    const { ...otherProps } = this.props;\n    const defaultClassName = \"-striped -highlight\";\n\n    // All available props: https://github.com/tannerlinsley/react-table#props\n    return (\n      <div>\n        {this.renderTableFilter()}\n        <ReactTable\n          className={otherProps.tableClassName || defaultClassName}\n          columns={this.renderColumns()}\n          data={otherProps.data || this.renderData()}\n          defaultFilterMethod={this.customFilter}\n          defaultPageSize={otherProps.defaultPageSize}\n          filterable={this.renderColumnFilter()}\n          minRows={this.setMinRows()}\n          previousText={otherProps.previousText}\n          nextText={otherProps.nextText}\n          loadingText={otherProps.loadingText}\n          noDataText={this.displayNoResultsFound()}\n          pageText={otherProps.pageText}\n          ofText={otherProps.ofText}\n          rowsText={otherProps.rowsText}\n          showPaginationTop={otherProps.showPaginationTop}\n          sortable={otherProps.isSortable}\n          PaginationComponent={SortableTablePagination}\n          showPaginationBottom={this.renderPaginationBottom()}\n          getTrProps={(state, rowInfo, column, instance) => { // eslint-disable-line no-unused-vars\n            if (otherProps.getTrProps) {\n              return otherProps.getTrProps();\n            }\n\n            return {\n              onClick: (e) => { // eslint-disable-line no-unused-vars\n                this.handleClick(rowInfo);\n              },\n              className: this.selectedRowsClassName(rowInfo)\n            };\n          }}\n          getTableProps={otherProps.getTableProps}\n          getTrGroupProps={otherProps.getTrGroupProps}\n          getTheadProps={otherProps.getTheadProps}\n          getPaginationProps={otherProps.getPaginationProps}\n          pages={otherProps.pages}\n          onPageChange={otherProps.onPageChange}\n          onPageSizeChange={otherProps.onPageSizeChange}\n          page={otherProps.page}\n          manual={otherProps.manual}\n        />\n      </div>\n    );\n  }\n}\n\n/**\n  * @name SortableTable propTypes\n  * @type {propTypes}\n  * @param {Object} props - React PropTypes\n  * @property {Object} collection collection to get data from\n  * @property {Array} columnMetadata provides filtered columns with i18n headers\n  * @property {Array} data provides array of objects to be used in place of publication data\n  * @property {Number} defaultPageSize how many results per page\n  * @property {Boolean} filterType filter by table, column, or both\n  * @property {Array} filteredFields provides filtered columns, use columnMetadata instead\n  * @property {Boolean} isFilterable show / hide column filter\n  * @property {Boolean} isResizeable allow resizing of table columns\n  * @property {Boolean} isSortable allow column sorting\n  * @property {String} matchingResultsCount provides Count publication to get count from\n  * @property {Number} minRows minimum amount of rows to display in table\n  * @property {String} noDataMessage text to display when no data is available\n  * @property {Function} onRowClick provides function / action when clicking on row\n  * @property {String} publication provides publication to get Meteor data from\n  * @property {object} query provides query for publication filtering\n  * @property {Array} selectedRows provides selected rows in the table\n  * @property {Function} transform transform of collection for grid results\n  * @return {Array} React propTypes\n  */\nSortableTable.propTypes = {\n  collection: PropTypes.object,\n  columnMetadata: PropTypes.array,\n  data: PropTypes.array,\n  defaultPageSize: PropTypes.number,\n  filterType: PropTypes.string,\n  filteredFields: PropTypes.array,\n  isFilterable: PropTypes.bool,\n  isResizeable: PropTypes.bool,\n  isSortable: PropTypes.bool,\n  matchingResultsCount: PropTypes.string,\n  minRows: PropTypes.number,\n  noDataMessage: PropTypes.string,\n  onRowClick: PropTypes.func,\n  publication: PropTypes.string,\n  query: PropTypes.object,\n  selectedRows: PropTypes.array,\n  transform: PropTypes.func\n};\n\nSortableTable.defaultProps = {\n  defaultPageSize: 10,\n  filterType: \"table\",\n  isFilterable: false,\n  isResizeable: true,\n  isSortable: true,\n  minRows: 0,\n  noDataMessage: \"No results found\",\n  previousText: \"Previous\",\n  nextText: \"Next\",\n  loadingText: \"Loading...\",\n  noDataText: \"No results found\",\n  pageText: \"Page\",\n  ofText: \"of\",\n  rowsText: \"rows\"\n  // noDataMessage: <Translation defaultValue=\"No results found\" i18nKey={\"reactionUI.components.sortableTable.tableText.noDataMessage\"} />,\n  // previousText: <Translation defaultValue=\"Previous\" i18nKey={\"reactionUI.components.sortableTable.tableText.previousText\"} />,\n  // nextText: <Translation defaultValue=\"Next\" i18nKey={\"reactionUI.components.sortableTable.tableText.nextText\"} />,\n  // loadingText: <Translation defaultValue=\"Loading...\" i18nKey={\"reactionUI.components.sortableTable.tableText.loadingText\"} />,\n  // noDataText: <Translation defaultValue=\"No results found\" i18nKey={\"reactionUI.components.sortableTable.tableText.noDataText\"} />,\n  // pageText: <Translation defaultValue=\"Page\" i18nKey={\"reactionUI.components.sortableTable.tableText.pageText\"} />,\n  // ofText: <Translation defaultValue=\"of\" i18nKey={\"reactionUI.components.sortableTable.tableText.ofText\"} />,\n  // rowsText: <Translation defaultValue=\"rows\" i18nKey={\"reactionUI.components.sortableTable.tableText.rowsText\"} />\n};\n\nregisterComponent(\"SortableTable\", SortableTable);\n\nexport default SortableTable;\n","import React, { Component } from \"react\";\nimport PropTypes from \"prop-types\";\nimport { TacoTable } from \"react-taco-table\";\n\nclass SortableTableLegacy extends Component {\n  render() {\n    const { data, columns, onRowClick } = this.props;\n\n    return (\n      <TacoTable\n        className=\"table sortable-table\"\n        columns={columns}\n        data={data}\n        onRowClick={onRowClick}\n      />\n    );\n  }\n}\n\nSortableTableLegacy.propTypes = {\n  columns: PropTypes.array,\n  data: PropTypes.array,\n  onRowClick: PropTypes.func\n};\n\nexport default SortableTableLegacy;\n","import React, { Component } from \"react\";\nimport PropTypes from \"prop-types\";\nimport classnames from \"classnames\";\nimport { Components, registerComponent } from \"@reactioncommerce/reaction-components\";\n\nclass Alert extends Component {\n  componentDidMount() {\n    if (this.props.alert) {\n      const { options } = this.props.alert;\n\n      if (this.props.onAlertSeen) {\n        this.props.onAlertSeen(this.props.alert);\n      }\n\n      if (this.props.alert && this.props.alert.options && this.props.alert.options.autoHide) {\n        setTimeout(() => {\n          if (this.props.onAlertRemove) {\n            this.props.onAlertRemove(this.props.alert);\n          }\n        }, options.autoHide);\n      }\n    }\n  }\n\n  render() {\n    // If we have an alert object, most likely from the global alert system,\n    // then display a standard alert\n    if (this.props.alert) {\n      const {\n        message,\n        mode,\n        options\n      } = this.props.alert;\n\n      const alertClassName = classnames({\n        alert: true,\n        [`alert-${mode || \"info\"}`]: true\n      });\n\n      return (\n        <div className={alertClassName}>\n          <Components.Translation defaultValue={message} i18nKey={options.i18nKey} />\n          {this.props.children}\n        </div>\n      );\n    }\n\n    // Otherwise, it's up to the user to provide the content via props\n\n    const alertClassName = classnames({\n      alert: true,\n      [`alert-${this.props.mode || \"info\"}`]: true\n    });\n\n    return (\n      <div className={alertClassName}>\n        {this.props.children}\n      </div>\n    );\n  }\n}\n\nAlert.propTypes = {\n  alert: PropTypes.object,\n  children: PropTypes.node,\n  mode: PropTypes.oneOf([\"info\", \"warning\", \"danger\", \"success\"]),\n  onAlertRemove: PropTypes.func,\n  onAlertSeen: PropTypes.func\n};\n\nregisterComponent(\"Alert\", Alert);\n\nexport default Alert;\n","import React from \"react\";\nimport PropTypes from \"prop-types\";\nimport { Components } from \"@reactioncommerce/reaction-components\";\n\nconst Alerts = ({ alerts, handleAlertRemove, handleAlertSeen }) => (\n  Array.isArray(alerts) &&\n  <div className=\"alert-container\">\n    {alerts.map((alert) => (\n      <Components.Alert\n        alert={alert}\n        key={alert._id}\n        onAlertRemove={handleAlertRemove}\n        onAlertSeen={handleAlertSeen}\n      />\n    ))}\n  </div>\n);\n\n\nAlerts.propTypes = {\n  alerts: PropTypes.arrayOf(PropTypes.object),\n  handleAlertRemove: PropTypes.func,\n  handleAlertSeen: PropTypes.func\n};\n\nexport default Alerts;\n","export { default as Alerts } from \"./alerts\";\nexport { default as Alert } from \"./alert\";\n","import { Switch } from \"react-router-dom\";\nimport React, { Component } from \"react\";\nimport PropTypes from \"prop-types\";\nimport classnames from \"classnames\";\nimport ToolbarContainer from \"/imports/plugins/core/dashboard/client/containers/toolbarContainer\";\nimport Toolbar from \"/imports/plugins/core/dashboard/client/components/toolbar\";\nimport { ActionViewContainer, PackageListContainer } from \"/imports/plugins/core/dashboard/client/containers\";\nimport { ActionView, ShortcutBar } from \"/imports/plugins/core/dashboard/client/components\";\nimport { Reaction } from \"/client/api\";\n\nconst ConnectedToolbarComponent = ToolbarContainer(Toolbar);\nconst ConnectedAdminViewComponent = ActionViewContainer(ActionView);\nconst ConnectedShortcutBarContainer = PackageListContainer(ShortcutBar);\n\nconst styles = {\n  customerApp: {\n    width: \"100%\"\n  },\n  adminApp: {\n    width: \"100%\",\n    height: \"100vh\",\n    display: \"flex\",\n    overflow: \"hidden\"\n  },\n  adminContentContainer: {\n    flex: \"1 1 auto\",\n    height: \"100vh\"\n  },\n  adminContainer: {\n    display: \"flex\",\n    flex: \"1 1 auto\"\n  },\n  scrollableContainer: {\n    overflow: \"auto\"\n  }\n};\n\nclass App extends Component {\n  static propTypes = {\n    children: PropTypes.node,\n    currentRoute: PropTypes.object.isRequired,\n    hasDashboardAccess: PropTypes.bool,\n    isActionViewOpen: PropTypes.bool\n  }\n\n  get isAdminApp() {\n    return this.props.hasDashboardAccess;\n  }\n\n  handleViewContextChange = (event, value) => {\n    Reaction.setUserPreferences(\"reaction-dashboard\", \"viewAs\", value);\n\n    if (Reaction.isPreview() === true) {\n      // Save last action view state\n      const saveActionViewState = Reaction.getActionView();\n      Reaction.setUserPreferences(\"reaction-dashboard\", \"savedActionViewState\", saveActionViewState);\n\n      // hideActionView during isPreview === true\n      Reaction.hideActionView();\n    }\n  }\n\n  handleKeyDown = (event) => {\n    if (event.altKey && event.keyCode === 69) { // Switch edit mode\n      const userWas = Reaction.getUserPreferences(\"reaction-dashboard\", \"viewAs\", \"customer\");\n      const userIs = userWas === \"customer\" ? \"administrator\" : \"customer\";\n      this.handleViewContextChange(event, userIs);\n    }\n  }\n\n  renderAdminApp() {\n    const pageClassName = classnames({\n      \"admin\": true,\n      \"page\": true,\n      \"show-settings\": this.props.isActionViewOpen\n    });\n\n    const { currentRoute } = this.props;\n    const routeOptions = (currentRoute.route && currentRoute.route.options) || {};\n    const routeData = (routeOptions && routeOptions.structure) || {};\n\n    return (\n      <div\n        style={styles.adminApp}\n        onKeyDown={this.handleKeyDown}\n        role=\"presentation\"\n      >\n        <div className={pageClassName} id=\"reactionAppContainer\" style={styles.adminContentContainer}>\n          <div className=\"reaction-toolbar\">\n            <ConnectedToolbarComponent handleViewContextChange={this.handleViewContextChange} data={routeData} />\n          </div>\n          <div style={styles.scrollableContainer}>\n            <Switch>\n              {this.props.children}\n            </Switch>\n          </div>\n        </div>\n        {this.props.hasDashboardAccess && <ConnectedAdminViewComponent />}\n        {this.props.hasDashboardAccess && <ConnectedShortcutBarContainer />}\n      </div>\n    );\n  }\n\n  render() {\n    const pageClassName = classnames({\n      \"admin\": true,\n      \"show-settings\": this.props.isActionViewOpen\n    });\n\n    const { currentRoute } = this.props;\n    const layout = currentRoute && currentRoute.route && currentRoute.route.options && currentRoute.route.options.layout;\n\n    if (this.isAdminApp && layout !== \"printLayout\") {\n      return this.renderAdminApp();\n    }\n\n    return (\n      <div\n        className={pageClassName}\n        style={styles.customerApp}\n      >\n        <Switch>\n          {this.props.children}\n        </Switch>\n      </div>\n    );\n  }\n}\n\nexport default App;\n","export { default as App } from \"./app\";\n","import React from \"react\";\nimport PropTypes from \"prop-types\";\nimport Avatar from \"react-avatar\";\nimport classnames from \"classnames/dedupe\";\n\nconst ReactionAvatar = (props) => {\n  const { className, email, name, size, src, style } = props;\n\n  const classes = classnames({\n    \"rui\": true,\n    \"rui-avatar\": true\n  }, className);\n\n  return (\n    <Avatar\n      className={classes}\n      email={email}\n      name={name}\n      size={size}\n      src={src}\n      style={style}\n      // Below props usually aren't passed, and will use defaults\n      color={props.color}\n      currentUser={props.currentUser}\n      facebookId={props.facebookId}\n      fgColor={props.fgColor}\n      googleId={props.googleId}\n      md5Email={props.md5Email}\n      round={props.round}\n      skypeId={props.skypeId}\n      textSizeRatio={props.textSizeRatio}\n      twitterHandle={props.twitterHandle}\n      value={props.value}\n      vkontakteId={props.vkontakteId}\n    />\n  );\n};\n\nReactionAvatar.propTypes = {\n  className: PropTypes.string,\n  color: PropTypes.string,\n  colors: PropTypes.array,\n  currentUser: PropTypes.bool,\n  email: PropTypes.string,\n  facebookId: PropTypes.string,\n  fgColor: PropTypes.string,\n  googleId: PropTypes.string,\n  md5Email: PropTypes.string,\n  name: PropTypes.string,\n  round: PropTypes.bool,\n  size: PropTypes.number,\n  skypeId: PropTypes.string,\n  src: PropTypes.string,\n  style: PropTypes.object,\n  textSizeRatio: PropTypes.number,\n  twitterHandle: PropTypes.string,\n  value: PropTypes.string,\n  vkontakteId: PropTypes.string\n};\n\nReactionAvatar.defaultProps = {\n  className: null,\n  color: null,\n  currentUser: true,\n  email: null,\n  facebookId: null,\n  fgColor: \"#FFFFFF\",\n  googleId: null,\n  md5Email: null,\n  name: null,\n  round: true,\n  size: 100,\n  skypeId: null,\n  style: null,\n  textSizeRatio: 3,\n  twitterHandle: null,\n  value: null,\n  vkontakteId: null\n};\n\nexport default ReactionAvatar;\n","export { default as ReactionAvatar } from \"./avatar\";\n","import React, { Component } from \"react\";\nimport PropTypes from \"prop-types\";\nimport classnames from \"classnames/dedupe\";\nimport { Components, registerComponent } from \"@reactioncommerce/reaction-components\";\n\nclass Badge extends Component {\n  state = {\n    tooltipOpen: false\n  };\n\n  get isTooltipOpen() {\n    return this.state.tooltipOpen;\n  }\n\n  handleMouseOver = () => {\n    this.setState({\n      tooltipOpen: !!this.props.tooltip\n    });\n  }\n\n  handleMouseOut = () => {\n    this.setState({\n      tooltipOpen: false\n    });\n  }\n\n  renderTooltipContent() {\n    if (this.isTooltipOpen) {\n      if (typeof this.props.tooltip === \"string\") {\n        return (\n          <Components.Translation defaultValue={this.props.tooltip} i18nKey={this.props.i18nKeyTooltip} />\n        );\n      }\n\n      return (\n        <div>\n          {this.props.tooltip}\n        </div>\n      );\n    }\n\n    return null;\n  }\n\n  renderLabel() {\n    if (this.props.label) {\n      if (typeof this.props.label === \"string\") {\n        return (\n          <Components.Translation\n            defaultValue={this.props.label}\n            i18nKey={this.props.i18nKeyLabel}\n          />\n        );\n      }\n      return (\n        <span>\n          {this.props.label}\n        </span>\n      );\n    }\n\n    return null;\n  }\n\n  render() {\n    const { badgeSize, className, indicator, status, tooltip, tooltipAttachment } = this.props;\n\n    const classes = classnames({\n      \"rui\": true,\n      \"badge\": true,\n      \"badge-small\": (badgeSize === null || badgeSize === undefined || badgeSize === \"small\"),\n      \"badge-large\": badgeSize === \"large\",\n      \"badge-basic\": status === \"basic\",\n      \"badge-cta\": status === \"cta\",\n      \"badge-danger\": status === \"danger\",\n      \"badge-default\": (status === null || status === undefined || status === \"default\"),\n      \"badge-info\": status === \"info\",\n      \"badge-primary\": status === \"primary\",\n      \"badge-success\": status === \"success\",\n      \"badge-warning\": status === \"warning\",\n      \"badge-indicator\": indicator\n    }, className);\n\n    if (tooltip) {\n      return (\n        <span\n          onFocus={this.handleMouseOver}\n          onBlur={this.handleMouseOut}\n          onMouseOut={this.handleMouseOut}\n          onMouseOver={this.handleMouseOver}\n        >\n          <Components.Tooltip\n            attachment={tooltipAttachment} tooltipContent={this.renderTooltipContent()}\n          >\n            <span className={classes} style={{ display: \"inline-flex\" }}>\n              {this.renderLabel()}\n            </span>\n          </Components.Tooltip>\n        </span>\n      );\n    }\n\n    return (\n      <span className={classes} style={{ display: \"inline-flex\" }}>\n        {this.renderLabel()}\n      </span>\n    );\n  }\n}\n\nBadge.propTypes = {\n  badgeSize: PropTypes.string,\n  className: PropTypes.oneOfType([PropTypes.string, PropTypes.object]),\n  i18nKeyLabel: PropTypes.string,\n  i18nKeyTooltip: PropTypes.string,\n  indicator: PropTypes.bool,\n  label: PropTypes.oneOfType([PropTypes.number, PropTypes.string]),\n  status: PropTypes.string,\n  tooltip: PropTypes.oneOfType([PropTypes.string, PropTypes.object, PropTypes.node]),\n  tooltipAttachment: PropTypes.string\n};\n\nBadge.defaultProps = {\n  badgeSize: \"small\",\n  indicator: false,\n  status: \"default\",\n  tooltipAttachment: \"bottom center\"\n};\n\nregisterComponent(\"Badge\", Badge);\n\nexport default Badge;\n","export { default as Badge } from \"./badge\";\nexport { default as InventoryBadge } from \"./inventoryBadge\";\n","import React, { Component } from \"react\";\nimport PropTypes from \"prop-types\";\nimport { Components, registerComponent } from \"@reactioncommerce/reaction-components\";\n\nclass InventoryBadge extends Component {\n  render() {\n    if (this.props.label) {\n      return (\n        <Components.Badge {...this.props} />\n      );\n    }\n    return null;\n  }\n}\n\nInventoryBadge.propTypes = {\n  label: PropTypes.oneOfType([PropTypes.number, PropTypes.string])\n};\n\nregisterComponent(\"InventoryBadge\", InventoryBadge);\n\nexport default InventoryBadge;\n","import React from \"react\";\nimport PropTypes from \"prop-types\";\nimport classnames from \"classnames\";\nimport { registerComponent } from \"@reactioncommerce/reaction-components\";\n\nconst ButtonGroup = () => {\n  const baseClassName = classnames({\n    \"rui\": true,\n    \"btn-group\": true\n  });\n\n  return (\n    <div className={baseClassName}>\n      {this.props.children}\n    </div>\n  );\n};\n\nButtonGroup.propTypes = {\n  children: PropTypes.node\n};\n\nregisterComponent(\"ButtonGroup\", ButtonGroup);\n\nexport default ButtonGroup;\n","import React from \"react\";\nimport PropTypes from \"prop-types\";\nimport classnames from \"classnames\";\nimport { registerComponent } from \"@reactioncommerce/reaction-components\";\n\nconst ButtonToolbar = () => {\n  const baseClassName = classnames({\n    \"rui\": true,\n    \"btn-toolbar\": true\n  });\n\n  return (\n    <div className={baseClassName}>\n      {this.props.children}\n    </div>\n  );\n};\n\nButtonToolbar.propTypes = {\n  children: PropTypes.node\n};\n\nregisterComponent(\"ButtonToolbar\", ButtonToolbar);\n\nexport default ButtonToolbar;\n","export { default as ButtonGroup } from \"./buttonGroup\";\nexport { default as ButtonToolbar } from \"./buttonToolbar\";\n","import React, { Component } from \"react\";\nimport PropTypes from \"prop-types\";\nimport omit from \"lodash/omit\";\nimport { registerComponent } from \"@reactioncommerce/reaction-components\";\nimport DayPickerRangeController from \"./dayPickerRangeController\";\n\n// CalendarPicker is a wrapper around react-dates DayPickerRangeController. Anything that works in react-dates should\n// work in CalendarPicker react-dates docs are available at: https://github.com/airbnb/react-dates\nclass CalendarPicker extends Component {\n  constructor(props) {\n    super(props);\n    this.state = {\n      startDate: props.initialStartDate,\n      endDate: props.initialEndDate,\n      focusedInput: props.autoFocusEndDate\n        ? \"endDate\"\n        : \"startDate\"\n    };\n  }\n\n  /**\n   * Getter returning a value of `true` if the current drection is set to RTL\n   * @return {Boolean} true if RTL false if LTR\n   */\n  get isRTL() {\n    if (typeof this.props.isRTL === \"boolean\") {\n      // If isRTL is set from props, then use\n      return this.props.isRTL;\n    } else if (document) {\n      // Otherwise try to determine RTL status from the html class name \"rtl\"\n      return document.getElementsByTagName(\"html\")[0].className.includes(\"rtl\");\n    }\n\n    // Return false if above matches fail\n    return false;\n  }\n\n  onDatesChange = ({ startDate, endDate }) => {\n    this.setState({ startDate, endDate });\n\n    if (this.props.onDatesChange) {\n      this.props.onDatesChange(startDate, endDate);\n    }\n  }\n\n  onFocusChange = (focusedInput) => {\n    this.setState({\n      // Force the focusedInput to always be truthy so that dates are always selectable\n      focusedInput: !focusedInput\n        ? \"startDate\"\n        : focusedInput\n    });\n  }\n\n  renderDayContents(day) {\n    return (\n      <span className=\"CalendarDay__contents\">{day.format(\"D\")}</span>\n    );\n  }\n\n  render() {\n    const { focusedInput, startDate, endDate, renderDayContents } = this.state;\n\n    const props = omit(this.props, [\"autoFocus\", \"autoFocusEndDate\", \"initialStartDate\", \"initialEndDate\"]);\n\n    return (\n      <DayPickerRangeController\n        {...props}\n        renderDayContents={renderDayContents || this.renderDayContents}\n        onDatesChange={this.onDatesChange}\n        onFocusChange={this.onFocusChange}\n        focusedInput={focusedInput}\n        isRTL={this.isRTL}\n        startDate={startDate}\n        endDate={endDate}\n        navPrev={< i className = \"fa fa-arrow-left\" />}\n        navNext={< i className = \"fa fa-arrow-right\" />}\n        hideKeyboardShortcutsPanel={true}\n      />\n    );\n  }\n}\n\nCalendarPicker.defaultProps = {\n  autoFocusEndDate: false,\n  initialStartDate: null,\n  initialEndDate: null,\n\n  // day presentation and interaction related props\n  renderDayContents: null,\n  minimumNights: 1,\n  isDayBlocked: () => false,\n  isDayHighlighted: () => false,\n  enableOutsideDays: false,\n\n  // calendar presentation and interaction related props\n  withPortal: false,\n  initialVisibleMonth: null,\n  numberOfMonths: 1,\n  onOutsideClick() {},\n  keepOpenOnDateSelect: false,\n  renderCalendarInfo: null,\n  isRTL: undefined,\n\n  // navigation related props\n  navPrev: null,\n  navNext: null,\n  onPrevMonthClick() {},\n  onNextMonthClick() {},\n\n  // internationalization\n  monthFormat: \"MMMM YYYY\"\n};\n\nCalendarPicker.propTypes = {\n  autoFocusEndDate: PropTypes.bool,\n  enableOutsideDays: PropTypes.bool,\n  initialEndDate: PropTypes.object,\n  initialStartDate: PropTypes.object,\n  initialVisibleMonth: PropTypes.func,\n  isDayBlocked: PropTypes.func,\n  isDayHighlighted: PropTypes.func,\n  isOutsideRange: PropTypes.func,\n  isRTL: PropTypes.bool,\n  keepOpenOnDateSelect: PropTypes.bool,\n  minimumNights: PropTypes.number,\n  monthFormat: PropTypes.string,\n  navNext: PropTypes.node,\n  navPrev: PropTypes.node,\n  numberOfMonths: PropTypes.number,\n  onDatesChange: PropTypes.func,\n  onNextMonthClick: PropTypes.func,\n  onOutsideClick: PropTypes.func,\n  onPrevMonthClick: PropTypes.func,\n  renderCalendarInfo: PropTypes.func,\n  renderDayContents: PropTypes.func,\n  withPortal: PropTypes.bool\n};\n\nregisterComponent(\"CalendarPicker\", CalendarPicker);\n\nexport default CalendarPicker;\n","// eslint-disable react/no-multi-comp to allow Loadable to dynamically load DayPickerRangeController\n/* eslint-disable react/no-multi-comp */\nimport React from \"react\";\nimport \"react-dates/initialize\";\nimport Loadable from \"react-loadable\";\nimport { Components } from \"@reactioncommerce/reaction-components\";\n\nconst DayPickerRangeController = Loadable({\n  loader: () => import(\"react-dates\"),\n  loading() {\n    return (\n      <Components.Loading />\n    );\n  },\n  render(loaded, props) {\n    const DayPicker = loaded.DayPickerRangeController;\n    return <DayPicker {...props}/>;\n  }\n});\n\nexport default DayPickerRangeController;\n","import React, { Component } from \"react\";\nimport PropTypes from \"prop-types\";\nimport { Components, registerComponent } from \"@reactioncommerce/reaction-components\";\n\nclass Checkbox extends Component {\n  // Create a semi-random ID\n  //\n  // ID's are required for form controls and their labels for ARIA compliance.\n  // This will be the default ID for this component unless once is passed in through props.\n  _id = `checkbox-${Math.floor(Math.random() * 100000)}`\n\n  get id() {\n    return this.props.id || this._id;\n  }\n\n  handleChange = (event) => {\n    if (this.props.onChange) {\n      const isInputChecked = !this.props.checked;\n      this.props.onChange(event, isInputChecked, this.props.name);\n    }\n  }\n\n  renderLabel() {\n    const { label, i18nKeyLabel } = this.props;\n    if (label || i18nKeyLabel) {\n      return (<Components.Translation defaultValue={this.props.label} i18nKey={this.props.i18nKeyLabel} />);\n    }\n    return null;\n  }\n\n  render() {\n    return (\n      <label htmlFor={this.id}>\n        <input\n          id={this.id}\n          checked={this.props.checked}\n          onChange={this.handleChange}\n          className={this.props.className}\n          ref=\"checkbox\"\n          type=\"checkbox\"\n          onBlur={this.props.onMouseOut}\n          onMouseOut={this.props.onMouseOut}\n        />\n        <Components.Translation defaultValue={this.props.label} i18nKey={this.props.i18nKeyLabel} />\n      </label>\n    );\n  }\n}\n\nCheckbox.defaultProps = {\n  checked: false\n};\n\nCheckbox.propTypes = {\n  checked: PropTypes.bool,\n  className: PropTypes.string,\n  i18nKeyLabel: PropTypes.string,\n  id: PropTypes.string,\n  label: PropTypes.string,\n  name: PropTypes.string,\n  onChange: PropTypes.func,\n  onMouseOut: PropTypes.func\n};\n\nregisterComponent(\"Checkbox\", Checkbox);\n\nexport default Checkbox;\n","export { default as Checkbox } from \"./checkbox\";\nexport { default as RolloverCheckbox } from \"./rolloverCheckbox\";\n","import React from \"react\";\nimport PropTypes from \"prop-types\";\nimport classnames from \"classnames\";\nimport { Components, registerComponent } from \"@reactioncommerce/reaction-components\";\n\nconst RolloverCheckbox = ({ children, checked, checkboxClassName, onChange, name, className }) => {\n  const extendedClassName = classnames({\n    \"rollover-checkbox\": true\n  }, className);\n\n  if (checked) {\n    return (\n      <div className={extendedClassName}>\n        <div className=\"selected-checkbox\">\n          <Components.Checkbox\n            checked={checked}\n            onChange={onChange}\n            className={checkboxClassName}\n            name={name}\n          />\n        </div>\n      </div>\n    );\n  }\n  return (\n    <div className={extendedClassName}>\n      <div className=\"first-child\">\n        { children }\n      </div>\n      <div className=\"second-child\">\n        <Components.Checkbox\n          checked={checked}\n          onChange={onChange}\n          className={checkboxClassName}\n          name={name}\n        />\n      </div>\n    </div>\n  );\n};\n\nRolloverCheckbox.propTypes = {\n  checkboxClassName: PropTypes.string,\n  checked: PropTypes.bool,\n  children: PropTypes.node,\n  className: PropTypes.string,\n  name: PropTypes.string,\n  onChange: PropTypes.func\n};\n\nregisterComponent(\"RolloverCheckbox\", RolloverCheckbox);\n\nexport default RolloverCheckbox;\n","import React, { Component } from \"react\";\nimport PropTypes from \"prop-types\";\nimport CopyToClipboard from \"react-copy-to-clipboard\";\nimport { Components, registerComponent } from \"@reactioncommerce/reaction-components\";\n\nclass ClickToCopy extends Component {\n  constructor(props) {\n    super(props);\n\n    this.state = {\n      tooltipOpen: false\n    };\n\n    this.handleCtcMouseOver = this.handleCtcMouseOver.bind(this);\n    this.handleCtcMouseOut = this.handleCtcMouseOut.bind(this);\n  }\n\n  get isTooltipOpen() {\n    return this.state.tooltipOpen;\n  }\n\n  handleCtcMouseOver() {\n    this.setState({\n      tooltipOpen: !!this.props.tooltip\n    });\n  }\n\n  handleCtcMouseOut() {\n    this.setState({\n      tooltipOpen: false\n    });\n  }\n\n  renderTooltipContent() {\n    if (this.isTooltipOpen) {\n      if (typeof this.props.tooltip === \"string\") {\n        return (\n          <Components.Translation defaultValue={this.props.tooltip} i18nKey={this.props.i18nKeyTooltip} />\n        );\n      }\n\n      return (\n        <div>\n          {this.props.tooltip}\n        </div>\n      );\n    }\n\n    return null;\n  }\n\n  render() {\n    return (\n      <CopyToClipboard\n        text={this.props.copyToClipboard}\n        onCopy={() => this.setState({ copied: true })}\n      >\n        <Components.Button\n          tagName=\"span\"\n          className={{ btn: false }}\n          onClick={this.handleClick}\n          style={{ display: \"inline-flex\" }}\n          tooltip={this.props.tooltip}\n          i18nKeyTooltip={this.props.i18nKeyTooltip}\n          tooltipAttachment={this.tooltipAttachment}\n        >\n          {this.props.displayText}\n        </Components.Button>\n      </CopyToClipboard>\n    );\n  }\n}\n\nClickToCopy.propTypes = {\n  copyToClipboard: PropTypes.string,\n  displayText: PropTypes.string,\n  i18nKeyTooltip: PropTypes.string,\n  tooltip: PropTypes.oneOfType([PropTypes.string, PropTypes.object, PropTypes.node]),\n  tooltipPosition: PropTypes.string\n};\n\nClickToCopy.defaultProps = {\n  tooltip: \"Copy to Clipboard\",\n  tooltipPosition: \"middle left\"\n};\n\nregisterComponent(\"ClickToCopy\", ClickToCopy);\n\nexport default ClickToCopy;\n","import React from \"react\";\nimport PropTypes from \"prop-types\";\nimport classnames from \"classnames\";\nimport { Components, registerComponent } from \"@reactioncommerce/reaction-components\";\n\nconst Divider = (props) => {\n  const { label, i18nKeyLabel } = props;\n\n  const dividerStyle = {\n    height: \"auto\",\n    background: \"none\"\n  };\n\n  const classes = classnames({\n    rui: true,\n    separator: true,\n    divider: true,\n    labeled: label || i18nKeyLabel\n  });\n\n  if (label) {\n    return (\n      <div className={classes} id={props.id} style={dividerStyle}>\n        <hr />\n        <span className=\"label\">\n          <Components.Translation defaultValue={label} i18nKey={i18nKeyLabel} />\n        </span>\n        <hr />\n      </div>\n    );\n  }\n\n  return (\n    <div className={classes}>\n      <hr />\n    </div>\n  );\n};\n\nDivider.propTypes = {\n  i18nKeyLabel: PropTypes.string,\n  id: PropTypes.string,\n  label: PropTypes.string\n};\n\nregisterComponent(\"Divider\", Divider);\n\nexport default Divider;\n","import React from \"react\";\nimport { registerComponent } from \"@reactioncommerce/reaction-components\";\n\nconst VerticalDivider = () => (\n  <div\n    style={{\n      height: \"20px\",\n      width: 1,\n      backgroundColor: \"#E6E6E6\",\n      margin: \"0 10px\"\n    }}\n  />\n);\n\nregisterComponent(\"VerticalDivider\", VerticalDivider);\n\nexport default VerticalDivider;\n","import React, { Component } from \"react\";\nimport PropTypes from \"prop-types\";\nimport { at, get, isEqual, set, update } from \"lodash\";\nimport classnames from \"classnames\";\nimport { Components, registerComponent } from \"@reactioncommerce/reaction-components\";\n\nclass Form extends Component {\n  static defaultProps = {\n    autoSave: false,\n    renderFromFields: false,\n    fieldsProp: {}\n  }\n\n  /**\n  * @name Form propTypes\n  * @type {propTypes}\n  * @param {Object} props - React PropTypes\n  * @property {Boolean} autoSave - controls autoSave and rendering of Submit button.\n  * @property {Object} doc - the object that will have the form state.\n  * @property {String} docPath - the path in the schema which will be used for validation or to render fields.\n  * @property {Array} fields - fields to render.\n  * @property {Object} fieldsProps - map of field specific properties passed to underlying components.\n  * @property {Array} hideFields - fields to hide.\n  * @property {String} name\n  * @property {Func} onSubmit\n  * @property {Boolean} renderFromFields - this controls whether form is rendered from schema or from fields.\n  * @property {Object} schema - the schema used for validation and rendering.\n  * @return {Array} React propTypes\n  */\n  static propTypes = {\n    autoSave: PropTypes.bool,\n    doc: PropTypes.object,\n    docPath: PropTypes.string,\n    fields: PropTypes.object,\n    fieldsProp: PropTypes.object,\n    hideFields: PropTypes.arrayOf(PropTypes.string),\n    name: PropTypes.string,\n    onSubmit: PropTypes.func,\n    renderFromFields: PropTypes.bool,\n    schema: PropTypes.object\n  }\n\n  constructor(props) {\n    super(props);\n\n    this.state = {\n      doc: props.doc,\n      schema: this.validationSchema(),\n      isValid: undefined\n    };\n  }\n\n  componentWillReceiveProps(nextProps) {\n    if (isEqual(nextProps.doc, this.props.doc) === false) {\n      this.setState({\n        doc: nextProps.doc,\n        schema: this.validationSchema()\n      });\n    }\n  }\n\n\n  validationSchema() {\n    const { docPath } = this.props;\n\n    if (docPath) {\n      const objectKeys = this.objectKeys[`${docPath}.`];\n      if (Array.isArray(objectKeys)) {\n        // Use the objectKeys from parent fieldset to generate\n        // actual form fields\n        const fieldNames = objectKeys.map((fieldName) => `${docPath}.${fieldName}`);\n\n        return this.props.schema.pick(fieldNames).newContext();\n      }\n    }\n\n    return this.props.schema.namedContext();\n  }\n\n  get objectKeys() {\n    return this.props.schema._objectKeys;\n  }\n\n  get schema() {\n    return this.props.schema.mergedSchema();\n  }\n\n  valueForField(fieldName) {\n    const picked = at(this.state.doc, fieldName);\n\n    if (Array.isArray(picked) && picked.length) {\n      return picked[0];\n    }\n\n    return undefined;\n  }\n\n  validate() {\n    const { docPath } = this.props;\n\n    // Create a smaller document in order to validate without extra fields\n    const docToValidate = set(\n      {},\n      docPath,\n      at(this.state.doc, this.props.docPath)[0]\n    );\n\n    // Clean any fields not in schame to avoid needless validation errors\n    const cleanedObject = this.state.schema._simpleSchema.clean(docToValidate);\n    const isValid = this.state.schema.validate(cleanedObject);\n    // Finally validate the document\n    this.setState({ isValid });\n\n    return { isValid };\n  }\n\n  isFieldHidden(fieldName) {\n    if (Array.isArray(this.props.hideFields) && this.props.hideFields.indexOf(fieldName) >= 0) {\n      return true;\n    }\n\n    return false;\n  }\n\n  handleChange = (event, value, name) => {\n    const newdoc = update(this.state.doc, name, () => value);\n    // Calling user defined field specific handleChange function\n    if (this.props.fieldsProp[name] && typeof this.props.fieldsProp[name].handleChange === \"function\") {\n      this.props.fieldsProp[name].handleChange(event, value, name);\n    }\n\n    this.setState({\n      doc: newdoc\n    }, () => {\n      if (this.props.autoSave === true) {\n        this.handleSubmit(event);\n      } else {\n        this.validate();\n      }\n    });\n  }\n\n  handleSelectChange = (value, name) => {\n    this.handleChange(new Event(\"onSelect\"), value, name);\n  }\n\n  handleMultiSelectChange = (value, name) => {\n    this.handleChange(new Event(\"onMultiSelect\"), value.map((v) => v.value), name);\n  }\n\n  handleSubmit = async (event) => {\n    event.preventDefault();\n\n    // Need to wait for this before using this.state.isValid\n    // as validate() changes state.\n    const isValid = this.validate();\n\n    if (this.props.onSubmit) {\n      this.props.onSubmit(event, {\n        doc: this.state.doc,\n        isValid\n      }, this.props.name);\n    }\n  }\n\n  renderFormField(field) {\n    const sharedProps = {\n      i18nKeyLabel: `admin.${field.name}`,\n      key: field.name,\n      label: field.label,\n      name: field.name\n    };\n\n    let fieldElement;\n    let helpText;\n    // Checking for user defined render style else using what is best according to the type.\n    switch (field.renderComponent || field.type) {\n      case \"boolean\":\n        fieldElement = (\n          <Components.Switch\n            {...sharedProps}\n            onChange={this.handleChange}\n            checked={this.valueForField(field.name)}\n          />\n        );\n        break;\n      case \"string\":\n        fieldElement = (\n          <Components.TextField\n            {...sharedProps}\n            onChange={this.handleChange}\n            value={this.valueForField(field.name)}\n            multiline={field.multiline}\n            maxRows={field.maxRows}\n            disabled={field.disabled}\n            type={field.inputType}\n          />\n        );\n        break;\n      case \"select\":\n        fieldElement = (\n          <Components.Select\n            {...sharedProps}\n            onChange={this.handleSelectChange}\n            options={field.options}\n            value={this.valueForField(field.name)}\n          />\n        );\n        break;\n      case \"multiselect\":\n        fieldElement = (\n          <Components.MultiSelect\n            {...sharedProps}\n            multi={true}\n            onChange={this.handleMultiSelectChange}\n            options={field.options}\n            value={this.valueForField(field.name)}\n            simpleValue={false}\n          />\n        );\n        break;\n      default:\n        return null;\n    }\n\n    let fieldHasError = false;\n\n    if (this.state.isValid === false) {\n      this.state.schema.validationErrors()\n        .filter((v) => v.name === field.name)\n        .forEach((validationError) => {\n          const message = this.state.schema.keyErrorMessage(validationError.name);\n          fieldHasError = true;\n\n          helpText = (\n            <div className=\"help-block\">\n              {message}\n            </div>\n          );\n        });\n    }\n\n    const formGroupClassName = classnames({\n      \"rui\": true,\n      \"form-group\": true,\n      \"has-error\": fieldHasError\n    });\n\n    return (\n      <div key={`${sharedProps.key}-group`} className={formGroupClassName}>\n        {fieldElement}\n        {helpText}\n      </div>\n    );\n  }\n\n  renderField(field, additionalFieldProps) {\n    const { schema } = this.props;\n    const { fieldName } = field;\n\n    if (this.isFieldHidden(fieldName) === false) {\n      const fieldSchema = schema.getDefinition(fieldName);\n\n      // Get the type from the schema, as a typeof string\n      const fieldType = fieldSchema.type[0].type;\n      let fieldTypeString;\n      if (fieldType === \"SimpleSchema.Integer\") {\n        fieldTypeString = \"number\";\n      } else {\n        // This assumes that oneOf is not used for any schema types\n        fieldTypeString = typeof fieldType();\n      }\n\n      const fieldProps = {\n        ...fieldSchema,\n        name: fieldName,\n        type: fieldTypeString,\n        ...additionalFieldProps\n      };\n\n      return this.renderFormField(fieldProps);\n    }\n\n    return null;\n  }\n\n  renderWithSchema() {\n    const { docPath, fieldsProp, renderFromFields } = this.props;\n\n    if (!this.props.schema) {\n      return null;\n    }\n    // Render form with a specific docPath\n    if (!renderFromFields && docPath) {\n      return Object.keys(this.schema).map((key) => {\n        if (!key.endsWith(docPath)) {\n          return;\n        }\n        const objectKeys = this.objectKeys[`${docPath}.`];\n        if (Array.isArray(objectKeys)) {\n          // Use the objectKeys from parent fieldset to generate\n          // actual form fields\n          return objectKeys.map((fieldName) => {\n            const fullFieldName = docPath ? `${docPath}.${fieldName}` : fieldName;\n            return this.renderField({ fieldName: fullFieldName });\n          });\n        }\n        return this.renderField({ fieldName: key });\n      });\n    }\n\n    // Render form by only using desired fields from schema\n    if (this.props.fields) {\n      return Object.keys(this.props.fields).map((key) => {\n        const fieldData = this.props.fields[key];\n        const fieldSchema = this.schema[key];\n        const tempObj = Object.assign({}, fieldData);\n        if (!fieldSchema) {\n          return;\n        }\n        // Remove inherited type() as type is supposed to be string.\n        if (typeof tempObj.type === \"function\") {\n          delete tempObj.type;\n        }\n        const fieldProp = get(fieldsProp, key, {});\n        return this.renderField({ fieldName: key }, Object.assign(tempObj, fieldProp));\n      });\n    }\n\n    // Render all fields if none of the options are set above\n    return Object.keys(this.schema).map((key) => // eslint-disable-line consistent-return\n      this.renderField({ fieldName: key }));\n  }\n\n  renderFormActions() {\n    if (this.props.autoSave === false) {\n      return (\n        <Components.FormActions>\n          <Components.Button\n            label={\"Save Changes\"}\n            i18nKeyLabel={\"app.saveChanges\"}\n            bezelStyle={\"solid\"}\n            primary={true}\n            type=\"submit\"\n          />\n        </Components.FormActions>\n      );\n    }\n  }\n\n  render() {\n    return (\n      <form onSubmit={this.handleSubmit}>\n        {this.renderWithSchema()}\n        {this.renderFormActions()}\n      </form>\n    );\n  }\n}\n\nregisterComponent(\"Form\", Form);\n\nexport default Form;\n","import React from \"react\";\nimport PropTypes from \"prop-types\";\nimport { registerComponent } from \"@reactioncommerce/reaction-components\";\n\nconst FormActions = ({ children }) => (\n  <div\n    style={{\n      display: \"flex\",\n      justifyContent: \"flex-end\"\n    }}\n  >\n    {children}\n  </div>\n);\n\nFormActions.propTypes = {\n  children: PropTypes.node\n};\n\nregisterComponent(\"FormActions\", FormActions);\n\nexport default FormActions;\n","export { default as Form } from \"./form\";\nexport { default as FormActions } from \"./formActions\";\n","import React from \"react\";\nimport PropTypes from \"prop-types\";\nimport classnames from \"classnames/dedupe\";\nimport { registerComponent } from \"@reactioncommerce/reaction-components\";\n\nconst Icon = ({ className, icon, style }) => {\n  let classes;\n\n  if (icon) {\n    if (icon.indexOf(\"icon-\") === 0 || icon.indexOf(\"fa\") >= 0) {\n      classes = icon;\n    } else {\n      classes = classnames({\n        fa: true,\n        [`fa-${icon}`]: true\n      });\n    }\n  }\n\n  classes = classnames({\n    \"rui\": true,\n    \"font-icon\": true\n  }, classes, className);\n\n  return (\n    <i style={style} className={classes} />\n  );\n};\n\nIcon.propTypes = {\n  className: PropTypes.oneOfType([PropTypes.string, PropTypes.object]),\n  icon: PropTypes.string.isRequired,\n  style: PropTypes.object\n};\n\nregisterComponent(\"Icon\", Icon);\n\nexport default Icon;\n","export { default as Icon } from \"./icon\";\n","import React from \"react\";\nimport PropTypes from \"prop-types\";\nimport { registerComponent } from \"@reactioncommerce/reaction-components\";\n\nconst Item = ({ children }) => (\n  <div className=\"rui item\">\n    {children}\n  </div>\n);\n\nItem.displayName = \"Item\";\n\nItem.propTypes = {\n  children: PropTypes.node\n};\n\nregisterComponent(\"Item\", Item);\n\nexport default Item;\n","import React from \"react\";\nimport PropTypes from \"prop-types\";\nimport { registerComponent } from \"@reactioncommerce/reaction-components\";\n\nconst Items = ({ children }) => (\n  <div className=\"rui items\">\n    {children}\n  </div>\n);\n\nItems.displayName = \"Items\";\n\nItems.propTypes = {\n  children: PropTypes.node\n};\n\nregisterComponent(\"Items\", Items);\n\nexport default Items;\n","export { default as List } from \"./list\";\nexport { default as ListItem } from \"./listItem\";\n","import React from \"react\";\nimport PropTypes from \"prop-types\";\nimport classnames from \"classnames\";\nimport { registerComponent } from \"@reactioncommerce/reaction-components\";\n\nconst List = ({ children, isAdmin, className }) => {\n  const listClassName = classnames({\n    \"rui\": true,\n    \"admin\": isAdmin,\n    \"list-group\": true\n  }, className);\n\n  return (\n    <div className={listClassName}>\n      {children}\n    </div>\n  );\n};\n\nList.propTypes = {\n  children: PropTypes.node,\n  className: PropTypes.string,\n  isAdmin: PropTypes.bool\n};\n\nregisterComponent(\"List\", List);\n\nexport default List;\n","import React, { Component } from \"react\";\nimport PropTypes from \"prop-types\";\nimport classnames from \"classnames\";\nimport { Components, registerComponent } from \"@reactioncommerce/reaction-components\";\n\nclass ListItem extends Component {\n  static propTypes = {\n    actionType: PropTypes.oneOf([\"arrow\", \"switch\"]),\n    children: PropTypes.node,\n    i18nKeyLabel: PropTypes.string,\n    icon: PropTypes.string,\n    isAdmin: PropTypes.bool,\n    label: PropTypes.string,\n    listItemClassName: PropTypes.string,\n    onClick: PropTypes.func,\n    onSwitchChange: PropTypes.func,\n    switchName: PropTypes.string,\n    switchOn: PropTypes.bool,\n    value: PropTypes.any\n  }\n\n  handleClick = (event) => {\n    if (this.props.actionType === \"switch\") {\n      const isChecked = typeof this.props.switchOn === \"boolean\" ? !this.props.switchOn : true;\n      this.handleSwitchChange(event, isChecked, this.props.switchName);\n    } else if (typeof this.props.onClick === \"function\") {\n      this.props.onClick(event, this.data);\n    }\n  }\n\n  handleOnKeyUp = (event) => {\n    // keyCode 32 (spacebar)\n    // keyCode 13 (enter/return)\n    if (event.keyCode === 32 || event.keyCode === 13) {\n      this.handleClick(event);\n    }\n  }\n\n  handleSwitchChange = (event, isChecked, name) => {\n    event.preventDefault();\n    event.stopPropagation();\n\n    if (typeof this.props.onSwitchChange === \"function\") {\n      this.props.onSwitchChange(event, isChecked, name);\n    }\n  }\n\n  get data() {\n    return this.props.value;\n  }\n\n  renderIcon() {\n    const iconClassName = classnames({\n      \"rui\": true,\n      \"admin\": this.props.isAdmin,\n      \"list-item-icon\": true\n    });\n\n    if (this.props.icon) {\n      return (\n        <div className={iconClassName}>\n          <Components.Icon icon={this.props.icon} />\n        </div>\n      );\n    }\n\n    return null;\n  }\n\n  renderAction() {\n    const actionClassName = classnames({\n      \"rui\": true,\n      \"admin\": this.props.isAdmin,\n      \"list-item-action\": true\n    });\n\n    if (this.props.actionType === \"switch\") {\n      return (\n        <div className={actionClassName}>\n          <Components.Switch\n            checked={this.props.switchOn}\n            name={this.props.switchName}\n            onChange={this.handleSwitchChange}\n          />\n        </div>\n      );\n    }\n\n    if (this.props.actionType) {\n      return (\n        <div className={actionClassName}>\n          <Components.Icon icon=\"fa fa-angle-right\" />\n        </div>\n      );\n    }\n\n    return null;\n  }\n\n  renderContent() {\n    let content;\n    const contentClassName = classnames({\n      \"rui\": true,\n      \"admin\": this.props.isAdmin,\n      \"list-item-content\": true\n    });\n\n    if (this.props.label) {\n      content = (\n        <Components.Translation\n          defaultValue={this.props.label}\n          i18nKey={this.props.i18nKeyLabel}\n        />\n      );\n      if (!this.props.i18nKeyLabel) {\n        content = (<span>{this.props.label}</span>);\n      }\n    } else {\n      content = this.props.children;\n    }\n\n    return (\n      <div className={contentClassName}>\n        {content}\n      </div>\n    );\n  }\n\n  renderSubItems() {\n    if (typeof this.props.label !== \"undefined\" && this.props.children) {\n      const listItemClassName = classnames({\n        \"rui\": true,\n        \"admin\": this.props.isAdmin,\n        \"list-group-item-sub-item\": true\n      });\n\n      return (\n        <div className={listItemClassName}>\n          {this.props.children}\n        </div>\n      );\n    }\n\n    return null;\n  }\n\n  render() {\n    const listItemClassName = classnames({\n      \"rui\": true,\n      \"admin\": this.props.isAdmin,\n      \"list-group-item\": true\n    }, this.props.listItemClassName);\n\n    return (\n      <div\n        className={listItemClassName}\n        onClick={this.handleClick}\n        onKeyUp={this.handleOnKeyUp}\n        role=\"button\"\n        tabIndex={0}\n      >\n        {this.renderIcon()}\n        {this.renderContent()}\n        {this.renderAction()}\n        {this.renderSubItems()}\n      </div>\n    );\n  }\n}\n\nregisterComponent(\"ListItem\", ListItem);\n\nexport default ListItem;\n","import React from \"react\";\nimport { Components, registerComponent } from \"@reactioncommerce/reaction-components\";\n\nconst Loading = () => (\n  <div className=\"spinner-container spinner-container-lg\">\n    <Components.CircularProgress indeterminate={true} />\n  </div>\n);\n\nregisterComponent(\"Loading\", Loading);\n\nexport default Loading;\n","import React from \"react\";\nimport PropTypes from \"prop-types\";\n\n// Modification of https://github.com/ethanselzer/react-image-magnify/blob/master/src/hint/DefaultHint.js\nfunction Hint({ isTouchDetected, hintTextMouse, hintTextTouch }) {\n  return (\n    <div style={{\n      width: \"100%\",\n      display: \"flex\",\n      justifyContent: \"center\",\n      position: \"absolute\",\n      bottom: \"15px\"\n    }}\n    >\n      <div style={{\n        display: \"flex\",\n        alignItems: \"center\",\n        padding: \"5px 10px\",\n        backgroundColor: \"#333\",\n        borderRadius: \"16px\",\n        opacity: \"0.90\"\n      }}\n      >\n        <span style={{\n          padding: \"2px 0 0 2px\",\n          fontSize: \"14px\",\n          color: \"white\"\n        }}\n        >\n          { isTouchDetected ? hintTextTouch : hintTextMouse }\n        </span>\n      </div>\n    </div>\n  );\n}\n\nHint.displayName = \"Hint\";\n\nHint.propTypes = {\n  hintTextMouse: PropTypes.string,\n  hintTextTouch: PropTypes.string,\n  isTouchDetected: PropTypes.bool\n};\n\nexport default Hint;\n","export { default as MediaGallery } from \"./mediaGallery\";\nexport { default as MediaItem } from \"./mediaItem\";\nexport { default as MediaUploader } from \"./mediaUploader\";\n","import React, { Component } from \"react\";\nimport PropTypes from \"prop-types\";\nimport Dropzone from \"react-dropzone\";\nimport Measure from \"react-measure\";\nimport classnames from \"classnames\";\nimport { Components } from \"@reactioncommerce/reaction-components\";\nimport { Reaction } from \"/client/api\";\n\nclass MediaGallery extends Component {\n  static propTypes = {\n    editable: PropTypes.bool,\n    featuredMedia: PropTypes.object,\n    media: PropTypes.arrayOf(PropTypes.object),\n    mediaGalleryHeight: PropTypes.number,\n    mediaGalleryWidth: PropTypes.number,\n    onDrop: PropTypes.func,\n    onMouseEnterMedia: PropTypes.func,\n    onMouseLeaveMedia: PropTypes.func,\n    onMoveMedia: PropTypes.func,\n    onRemoveMedia: PropTypes.func,\n    uploadProgress: PropTypes.shape({\n      bytesUploaded: PropTypes.number.isRequired,\n      bytesTotal: PropTypes.number.isRequired,\n      percentage: PropTypes.number.isRequired\n    })\n  };\n\n  static defaultProps = {\n    onDrop() {},\n    onMouseEnterMedia() {},\n    onMouseLeaveMedia() {},\n    onMoveMedia() {},\n    onRemoveMedia() {}\n  };\n\n  constructor() {\n    super();\n\n    this.state = {\n      dimensions: {\n        width: -1,\n        height: -1\n      }\n    };\n  }\n\n  get hasMedia() {\n    const { media } = this.props;\n\n    return Array.isArray(media) && media.length > 0;\n  }\n\n  get featuredMedia() {\n    return this.props.featuredMedia || this.props.media[0];\n  }\n\n  handleDropClick = () => {\n    this.dropzone && this.dropzone.open();\n  };\n\n  handleDrop = (files) => {\n    if (files.length === 0) return;\n    return this.props.onDrop(files);\n  };\n\n  renderAddItem() {\n    if (this.props.editable) {\n      return (\n        <Components.Button\n          className={{\n            // Disable default button class names\n            \"flat\": false,\n            \"btn\": false,\n            \"btn-default\": false,\n\n            // Media gallery class names\n            \"gallery-image\": true,\n            \"add\": true\n          }}\n          tagName=\"div\"\n          onClick={this.handleDropClick}\n        >\n          <img\n            alt=\"\"\n            className=\"img-responsive\"\n            src={\"/resources/placeholder.gif\"}\n          />\n          <div className=\"rui badge-container\">\n            <i className=\"fa fa-plus fa-2x\" />\n          </div>\n        </Components.Button>\n      );\n    }\n\n    return null;\n  }\n\n  renderProgressItem() {\n    // For now, we are not showing actual progress, but we could\n    return (\n      <div className=\"gallery-image add\">\n        <img\n          alt=\"\"\n          className=\"img-responsive\"\n          src={\"/resources/placeholder.gif\"}\n        />\n        <div className=\"rui badge-container\">\n          <Components.CircularProgress indeterminate={true} />\n        </div>\n      </div>\n    );\n  }\n\n  renderFeaturedMedia() {\n    const { editable, onMouseEnterMedia, onMouseLeaveMedia, onMoveMedia, onRemoveMedia } = this.props;\n    const { width, height } = this.state.dimensions;\n\n    const media = this.featuredMedia;\n    if (!media) return <Components.MediaItem />;\n\n    return (\n      <Measure\n        bounds\n        onResize={(contentRect) => {\n          const dimensions = { ...contentRect.bounds };\n\n          // We get React warnings in console when the bounds height comes in as zero\n          if (dimensions.height === 0) dimensions.height = -1;\n\n          this.setState({ dimensions });\n        }}\n      >\n        {({ measureRef }) =>\n          <div ref={measureRef}>\n            <Components.MediaItem\n              editable={editable}\n              index={0} // index prop is required for SortableItem HOC to work\n              mediaHeight={height}\n              mediaWidth={width}\n              onMouseEnter={onMouseEnterMedia}\n              onMouseLeave={onMouseLeaveMedia}\n              onMove={onMoveMedia}\n              onRemoveMedia={onRemoveMedia}\n              source={this.featuredMedia}\n              zoomable\n            />\n          </div>\n        }\n      </Measure>\n    );\n  }\n\n  renderMediaThumbnails() {\n    const { editable, media: mediaList, onMouseEnterMedia, onMouseLeaveMedia, onMoveMedia, onRemoveMedia } = this.props;\n\n    return (mediaList || []).map((media, index) => (\n      <Components.MediaItem\n        editable={editable}\n        key={media._id}\n        index={index} // index prop is required for SortableItem HOC to work\n        onMouseEnter={onMouseEnterMedia}\n        onMouseLeave={onMouseLeaveMedia}\n        onMove={onMoveMedia}\n        onRemoveMedia={onRemoveMedia}\n        size=\"small\"\n        source={media}\n      />\n    ));\n  }\n\n  renderMediaGalleryUploader() {\n    const { mediaGalleryWidth: containerWidth, uploadProgress } = this.props;\n    const classes = {\n      \"admin-featuredImage\": Reaction.hasAdminAccess(),\n      \"featuredImage\": true\n    };\n\n    return (\n      <div className=\"rui media-gallery\">\n        <Dropzone\n          className=\"rui gallery-drop-pane\"\n          disableClick\n          multiple\n          disablePreview\n          onDrop={this.handleDrop}\n          ref={(inst) => { this.dropzone = inst; }}\n          accept=\"image/jpg, image/png, image/jpeg\"\n        >\n          <div className=\"rui gallery\">\n            <div className={classnames(classes)} style={{ height: containerWidth }}>\n              {this.featuredMedia ? this.renderFeaturedMedia() : this.renderAddItem()}\n            </div>\n            <div className=\"rui gallery-thumbnails\">\n              {!!this.hasMedia && this.renderMediaThumbnails()}\n              {!!uploadProgress && this.renderProgressItem()}\n              {this.renderAddItem()}\n            </div>\n          </div>\n        </Dropzone>\n      </div>\n    );\n  }\n\n  renderMediaGallery() {\n    const containerWidth = this.props.mediaGalleryWidth;\n    const classes = {\n      \"admin-featuredImage\": Reaction.hasAdminAccess(),\n      \"featuredImage\": true\n    };\n\n    return (\n      <div className=\"rui media-gallery\">\n        <div className=\"rui gallery\">\n          <div className={classnames(classes)} style={{ height: containerWidth }}>\n            {this.renderFeaturedMedia()}\n          </div>\n          <div className=\"rui gallery-thumbnails\">\n            {this.renderMediaThumbnails()}\n          </div>\n        </div>\n      </div>\n    );\n  }\n\n  render() {\n    const { editable } = this.props;\n\n    let gallery;\n    if (editable) {\n      gallery = this.renderMediaGalleryUploader();\n    } else {\n      gallery = this.renderMediaGallery();\n    }\n\n    // Note that only editable mode actually uses drag-drop, but since both views render\n    // MediaItems, which are SortableItems, there is an error if it isn't in the ancester tree\n    return (\n      <Components.DragDropProvider>\n        {gallery}\n      </Components.DragDropProvider>\n    );\n  }\n}\n\nexport default MediaGallery;\n","import React, { Component } from \"react\";\nimport classnames from \"classnames\";\nimport PropTypes from \"prop-types\";\nimport ReactImageMagnify from \"react-image-magnify\";\nimport { Components, registerComponent } from \"@reactioncommerce/reaction-components\";\nimport { Reaction } from \"/client/api\";\nimport { SortableItem } from \"/imports/plugins/core/ui/client/containers\";\nimport Hint from \"./hint\";\n\nclass MediaItem extends Component {\n  static propTypes = {\n    connectDragSource: PropTypes.func,\n    connectDropTarget: PropTypes.func,\n    defaultSource: PropTypes.string,\n    editable: PropTypes.bool,\n    mediaHeight: PropTypes.number,\n    mediaWidth: PropTypes.number,\n    onClick: PropTypes.func,\n    onMouseEnter: PropTypes.func,\n    onMouseLeave: PropTypes.func,\n    onRemoveMedia: PropTypes.func,\n    size: PropTypes.string,\n    source: PropTypes.object,\n    zoomable: PropTypes.bool\n  };\n\n  static defaultProps = {\n    defaultSource: \"/resources/placeholder.gif\",\n    editable: false,\n    onClick() {},\n    onMouseEnter() {},\n    onMouseLeave() {},\n    onRemoveMedia() {},\n    size: \"large\",\n    zoomable: false\n  };\n\n  handleClick = (event) => {\n    event.preventDefault();\n    event.stopPropagation();\n\n    this.props.onClick();\n  };\n\n  handleKeyPress = (event) => {\n    if (event.keyCode === 13) this.handleClick(event);\n  };\n\n  handleMouseEnter = (event) => {\n    const { onMouseEnter, source } = this.props;\n    onMouseEnter(event, source);\n  }\n\n  handleMouseLeave = (event) => {\n    const { onMouseLeave, source } = this.props;\n    onMouseLeave(event, source);\n  }\n\n  handleRemoveMedia = (event) => {\n    const { onRemoveMedia, source } = this.props;\n\n    event.stopPropagation();\n    onRemoveMedia(source);\n  }\n\n  renderRevision() {\n    const { source } = this.props;\n    const { revision } = source || {};\n\n    if (!revision) return null;\n\n    if (revision.changeType === \"remove\") {\n      return (\n        <Components.IconButton\n          icon=\"fa\"\n          status=\"danger\"\n          i18nKeyTooltip=\"admin.mediaGallery.removedImage\"\n          tooltip=\"Image has been deleted. Publish to save changes.\"\n          kind=\"mediaGalleryStatus\"\n        />\n      );\n    }\n\n    return (\n      <Components.IconButton\n        icon=\"fa\"\n        status=\"info\"\n        i18nKeyTooltip=\"admin.mediaGallery.addedImage\"\n        tooltip=\"This is a new image. Publish to save changes.\"\n        kind=\"mediaGalleryStatus\"\n      />\n    );\n  }\n\n  renderControls() {\n    const { editable, source } = this.props;\n\n    if (!editable) return null;\n\n    const { revision } = source || {};\n\n    // If we have a pending remove, don't show the remove button\n    let removeButton = null;\n    if (!revision || revision.changeType !== \"remove\") {\n      removeButton = (\n        <Components.IconButton\n          icon=\"fa fa-times\"\n          onClick={this.handleRemoveMedia}\n          i18nKeyTooltip=\"admin.mediaGallery.deleteImage\"\n          tooltip=\"Click to remove image\"\n        />\n      );\n    }\n\n    return (\n      <div className=\"rui badge-container\">\n        {this.renderRevision()}\n        {removeButton}\n      </div>\n    );\n  }\n\n  getSource = (size) => {\n    const { defaultSource, source } = this.props;\n\n    return (source && source.url({ store: size })) || defaultSource;\n  };\n\n  renderImage() {\n    const { editable, mediaHeight, mediaWidth, size, zoomable } = this.props;\n\n    if (zoomable && !editable) {\n      return (\n        <ReactImageMagnify {...{\n          smallImage: {\n            width: mediaWidth,\n            height: mediaHeight,\n            src: this.getSource(size)\n          },\n          imageClassName: \"img-responsive\",\n          fadeDurationInMs: 150,\n          hoverDelayInMs: 200,\n          pressDuration: 300,\n          largeImage: {\n            src: this.getSource(\"image\"),\n            width: mediaWidth * 2,\n            height: mediaHeight * 2\n          },\n          isHintEnabled: true,\n          enlargedImageContainerClassName: \"zoomed-image-container\",\n          hintTextMouse: \"Hover to zoom\",\n          hintTextTouch: \"Long-touch to zoom\",\n          hintComponent: Hint\n        }}\n        />\n      );\n    }\n\n    return (\n      <img\n        alt=\"\"\n        className=\"img-responsive\"\n        src={this.getSource(size)}\n      />\n    );\n  }\n\n  render() {\n    const { connectDragSource, connectDropTarget, editable, zoomable } = this.props;\n\n    const classes = {\n      \"gallery-image\": true,\n      \"no-fade-on-hover\": zoomable && !editable,\n      \"admin-gallery-image\": Reaction.hasAdminAccess()\n    };\n\n    const mediaElement = (\n      <div\n        className={classnames(classes)}\n        onClick={this.handleClick}\n        onKeyPress={this.handleKeyPress}\n        onMouseEnter={this.handleMouseEnter}\n        onMouseLeave={this.handleMouseLeave}\n        role=\"button\"\n        tabIndex={0}\n      >\n        {this.renderImage()}\n        {this.renderControls()}\n      </div>\n    );\n\n    if (editable) {\n      return connectDragSource(connectDropTarget(mediaElement));\n    }\n\n    return mediaElement;\n  }\n}\n\nregisterComponent(\"MediaItem\", MediaItem, SortableItem(\"media\"));\n\nexport default SortableItem(\"media\")(MediaItem);\n","import React, { Component } from \"react\";\nimport PropTypes from \"prop-types\";\nimport Dropzone from \"react-dropzone\";\nimport { FileRecord } from \"@reactioncommerce/file-collections\";\nimport { Components, registerComponent } from \"@reactioncommerce/reaction-components\";\nimport { Logger } from \"/client/api\";\nimport { Media } from \"/imports/plugins/core/files/client\";\n\nclass MediaUploader extends Component {\n  static propTypes = {\n    metadata: PropTypes.object\n  };\n\n  constructor(props) {\n    super(props);\n\n    this.state = {\n      isUploading: false\n    };\n  }\n\n  componentDidMount() {\n    this._isMounted = true;\n  }\n\n  componentWillUnmount() {\n    this._isMounted = false;\n  }\n\n  uploadFiles = (acceptedFiles) => {\n    const { metadata } = this.props;\n    const filesArray = Array.from(acceptedFiles);\n    if (filesArray.length === 0) return;\n\n    this.setState({ isUploading: true });\n\n    const promises = [];\n    filesArray.forEach((browserFile) => {\n      const fileRecord = FileRecord.fromFile(browserFile);\n\n      if (metadata) fileRecord.metadata = metadata;\n\n      const promise = fileRecord.upload({})\n        // We insert only AFTER the server has confirmed that all chunks were uploaded\n        .then(() => Media.insert(fileRecord))\n        .catch((error) => {\n          Logger.error(error);\n        });\n\n      promises.push(promise);\n    });\n\n    Promise.all(promises).then(() => {\n      if (!this._isMounted) return;\n      this.setState({ isUploading: false });\n    });\n  };\n\n  render() {\n    const { isUploading } = this.state;\n\n    return (\n      <Dropzone\n        accept=\"image/jpg, image/png, image/jpeg\"\n        className=\"rui button btn btn-default btn-block\"\n        disabled={!!isUploading}\n        onDrop={this.uploadFiles}\n      >\n        <div className=\"contents\">\n          {!!isUploading && <div style={{ marginLeft: \"auto\", marginRight: \"auto\" }}><Components.CircularProgress indeterminate={true} /></div>}\n          {!isUploading && <span className=\"title\">\n            <Components.Translation defaultValue=\"Click or drop images here to upload media\" i18nKey=\"mediaUploader.dropFiles\" />\n          </span>}\n        </div>\n      </Dropzone>\n    );\n  }\n}\n\nregisterComponent(\"MediaUploader\", MediaUploader);\n\nexport default MediaUploader;\n","import React, { Children, Component } from \"react\";\nimport PropTypes from \"prop-types\";\nimport { Components, registerComponent } from \"@reactioncommerce/reaction-components\";\n\nclass DropDownMenu extends Component {\n  constructor(props) {\n    super(props);\n\n    this.state = {\n      label: undefined,\n      isOpen: false\n    };\n  }\n\n  componentWillReceiveProps(nextProps) {\n    if (this.isControlled) {\n      this.setState({\n        isOpen: nextProps.isOpen\n      });\n    }\n  }\n\n  handleDropdownToggle = () => {\n    this.setState({\n      isOpen: !this.state.isOpen\n    });\n  }\n\n  get isOpen() {\n    return this.props.isOpen || this.state.isOpen;\n  }\n\n  get isControlled() {\n    return typeof this.props.isOpen === \"boolean\";\n  }\n\n  handleMenuItemChange = (event, value, menuItem) => {\n    this.setState({\n      label: menuItem.props.label || value,\n      isOpen: false\n    });\n\n    if (this.props.closeOnClick) {\n      this.handleOpen(false);\n    }\n\n    if (this.props.onChange) {\n      this.props.onChange(event, value);\n    }\n  }\n\n  handleOpen = (isOpen) => {\n    if (this.isControlled) {\n      if (this.props.onRequestOpen) {\n        this.props.onRequestOpen(isOpen);\n      }\n    } else {\n      this.setState({\n        isOpen\n      });\n    }\n  }\n\n  get label() {\n    let { label } = this.state;\n    Children.forEach(this.props.children, (element) => {\n      if (element.props.value === this.props.value) {\n        ({ label } = element.props);\n      }\n    });\n\n    if (!label) {\n      const children = Children.toArray(this.props.children);\n      if (children.length) {\n        return children[0].props.label;\n      }\n    }\n\n    return label;\n  }\n\n  render() {\n    return (\n      <Components.Popover\n        attachment={this.props.attachment}\n        buttonElement={\n          this.props.buttonElement ||\n          <Components.Button\n            icon=\"fa fa-chevron-down\"\n            iconAfter={true}\n            label={this.label}\n          />\n        }\n        constraints={this.props.constraints}\n        isOpen={this.isOpen}\n        onClick={this.handleDropdownToggle}\n        onRequestOpen={this.handleOpen}\n        targetAttachment={this.props.targetAttachment}\n      >\n        <Components.Menu\n          className={this.props.className}\n          menuClassName={this.props.menuClassName}\n          value={this.props.value}\n          onChange={this.handleMenuItemChange}\n          style={this.props.menuStyle}\n          isClickable={this.props.isClickable}\n        >\n          {this.props.children}\n        </Components.Menu>\n      </Components.Popover>\n    );\n  }\n}\n\nDropDownMenu.propTypes = {\n  attachment: PropTypes.string,\n  buttonElement: PropTypes.node,\n  children: PropTypes.node,\n  className: PropTypes.oneOfType([PropTypes.string, PropTypes.object]),\n  closeOnClick: PropTypes.bool,\n  constraints: PropTypes.array,\n  isClickable: PropTypes.bool,\n  isEnabled: PropTypes.bool,\n  isOpen: PropTypes.bool,\n  menuClassName: PropTypes.oneOfType([PropTypes.string, PropTypes.object]),\n  menuStyle: PropTypes.object,\n  onChange: PropTypes.func,\n  onPublishClick: PropTypes.func,\n  onRequestOpen: PropTypes.func,\n  revisions: PropTypes.arrayOf(PropTypes.object),\n  targetAttachment: PropTypes.string,\n  translation: PropTypes.shape({\n    lang: PropTypes.string\n  }),\n  value: PropTypes.oneOfType([PropTypes.string, PropTypes.bool, PropTypes.number])\n};\n\nregisterComponent(\"DropDownMenu\", DropDownMenu);\n\nexport default DropDownMenu;\n","export { default as Menu } from \"./menu\";\nexport { default as MenuItem } from \"./menuItem\";\nexport { default as DropDownMenu } from \"./dropDownMenu\";\n","import React, { Children, Component } from \"react\";\nimport PropTypes from \"prop-types\";\nimport classnames from \"classnames/dedupe\";\nimport { registerComponent } from \"@reactioncommerce/reaction-components\";\n\nclass Menu extends Component {\n  handleChange = (event, value, menuItem) => {\n    if (this.props.onChange) {\n      this.props.onChange(event, value, menuItem);\n    }\n  }\n\n  renderMenuItems() {\n    if (this.props.children) {\n      return Children.map(this.props.children, (element) => {\n        const newChild = React.cloneElement(element, {\n          active: element.props.value === this.props.value,\n          onClick: this.handleChange\n        });\n        const baseClassName = classnames({\n          active: element.props.value === this.props.value\n        }, this.props.className);\n        return (\n          <li className={baseClassName}>{this.props.isClickable ? newChild : element}</li>\n        );\n      });\n    }\n  }\n\n  render() {\n    const className = classnames({\n      \"rui\": true,\n      \"menu\": true,\n      \"dropdown-menu\": true\n    }, this.props.menuClassName);\n\n    return (\n      <ul className={className} style={this.props.style}>\n        {this.renderMenuItems()}\n      </ul>\n    );\n  }\n}\n\nMenu.propTypes = {\n  attachment: PropTypes.string,\n  children: PropTypes.node,\n  className: PropTypes.oneOfType([PropTypes.string, PropTypes.object]),\n  isClickable: PropTypes.bool,\n  menuClassName: PropTypes.string,\n  onChange: PropTypes.func,\n  style: PropTypes.object,\n  value: PropTypes.oneOfType([PropTypes.string, PropTypes.bool, PropTypes.number])\n};\n\nMenu.defaultProps = {\n  attachment: \"top\",\n  isClickable: true\n};\n\nregisterComponent(\"Menu\", Menu);\n\nexport default Menu;\n","import React, { Component } from \"react\";\nimport PropTypes from \"prop-types\";\nimport { Components, registerComponent } from \"@reactioncommerce/reaction-components\";\n\nclass MenuItem extends Component {\n  handleClick = (event) => {\n    event.preventDefault();\n    if (this.props.onClick && this.props.disabled === false) {\n      this.props.onClick(event, this.props.value, this);\n    }\n  }\n\n  renderIcon() {\n    if (this.props.icon) {\n      return (\n        <Components.Icon icon={this.props.icon} style={this.props.iconStyle}/>\n      );\n    }\n    return null;\n  }\n\n  renderLabel() {\n    if (this.props.label) {\n      return (\n        <Components.Translation\n          defaultValue={this.props.label}\n          i18nKey={this.props.i18nKeyLabel}\n        />\n      );\n    }\n\n    return null;\n  }\n\n  render() {\n    return (\n      <Components.Button\n        tagName=\"div\"\n        className={{\n          \"rui\": true,\n          \"menu-item\": true,\n          \"flat\": false,\n          \"btn\": false,\n          \"btn-default\": false,\n          \"active\": this.props.active,\n          [this.props.className || \"\"]: true\n        }}\n        disabled={this.props.disabled}\n        data-event-action={this.props.eventAction}\n        onClick={this.handleClick}\n      >\n        {this.renderIcon()}\n        {this.renderLabel()}\n      </Components.Button>\n    );\n  }\n}\n\nMenuItem.propTypes = {\n  active: PropTypes.bool,\n  children: PropTypes.node,\n  className: PropTypes.oneOfType([PropTypes.string, PropTypes.object]),\n  disabled: PropTypes.bool,\n  eventAction: PropTypes.string,\n  i18nKeyLabel: PropTypes.string,\n  i18nKeySelectedLabel: PropTypes.string,\n  icon: PropTypes.string,\n  iconStyle: PropTypes.object,\n  label: PropTypes.string,\n  onClick: PropTypes.func,\n  selectionLabel: PropTypes.string,\n  value: PropTypes.any\n};\n\nMenuItem.defaultProps = {\n  disabled: false\n};\n\nregisterComponent(\"MenuItem\", MenuItem);\n\nexport default MenuItem;\n","export { default as Metadata } from \"./metadata\";\nexport { default as Metafield } from \"./metafield\";\n","import React, { Component } from \"react\";\nimport PropTypes from \"prop-types\";\nimport { Components, registerComponent } from \"@reactioncommerce/reaction-components\";\n\nclass Metadata extends Component {\n  /**\n   * Handle form submit\n   * @param  {Event} event Event object\n   * @return {void} no return value\n   */\n  handleSubmit = (event) => {\n    event.preventDefault();\n  }\n\n  handleMetaChange = (event, metafield, index) => {\n    if (this.props.onMetaChange) {\n      this.props.onMetaChange(event, metafield, index);\n    }\n  }\n\n  handleMetaSave = (event, metafield, index) => {\n    if (this.props.onMetaSave) {\n      this.props.onMetaSave(event, metafield, index);\n    }\n  }\n\n  handleMetaRemove = (event, metafield, index) => {\n    if (this.props.onMetaRemove) {\n      this.props.onMetaRemove(event, metafield, index);\n    }\n  }\n\n  /**\n   * Render user readable metadata\n   * @return {JSX} metadata\n   */\n  renderMetadata() {\n    if (this.props.metafields) {\n      return this.props.metafields.map((metadata, index) => (\n        <div className=\"rui meta-item\" key={index}>\n          <div className=\"rui meta-key\">{metadata.key}</div>\n          <div className=\"rui meta-value\">{metadata.value}</div>\n        </div>\n      ));\n    }\n\n    return null;\n  }\n\n  /**\n   * Render a metadata form\n   * @return {JSX} metadata forms for each row of metadata\n   */\n  renderMetadataForm() {\n    if (this.props.metafields) {\n      return this.props.metafields.map((metadata, index) => (\n        <Components.Metafield\n          index={index}\n          key={index}\n          metafield={metadata}\n          onBlur={this.handleMetaSave}\n          onChange={this.handleMetaChange}\n          onRemove={this.handleMetaRemove}\n        />\n      ));\n    }\n\n    return null;\n  }\n\n  renderMetadataCreateForm() {\n    return (\n      <Components.Metafield\n        blank={true}\n        metafield={this.props.newMetafield}\n        onBlur={this.handleMetaSave}\n        onChange={this.handleMetaChange}\n        ref=\"newMetadataFields\"\n      />\n    );\n  }\n\n  /**\n   * render\n   * @return {JSX} component\n   */\n  render() {\n    // Admin editable metadata\n    if (this.props.editable) {\n      return (\n        <div className=\"rui list-group product-detail-edit product-attributes\">\n          {this.renderMetadataForm()}\n          {this.renderMetadataCreateForm()}\n        </div>\n      );\n    }\n\n    // User readable metadata\n    return (\n      <div className=\"rui metadata\">\n        {this.renderMetadata()}\n      </div>\n    );\n  }\n}\n\nMetadata.defaultProps = {\n  editable: true\n};\n\n// Prop Types\nMetadata.propTypes = {\n  editable: PropTypes.bool,\n  metafields: PropTypes.arrayOf(PropTypes.object),\n  newMetafield: PropTypes.object,\n  onMetaChange: PropTypes.func,\n  onMetaRemove: PropTypes.func,\n  onMetaSave: PropTypes.func\n};\n\nregisterComponent(\"Metadata\", Metadata);\n\nexport default Metadata;\n","import React, { Component } from \"react\";\nimport PropTypes from \"prop-types\";\nimport Velocity from \"velocity-animate\";\nimport \"velocity-animate/velocity.ui\";\nimport { Components, registerComponent } from \"@reactioncommerce/reaction-components\";\n\nclass Metafield extends Component {\n  componentWillReceiveProps(nextProps) {\n    if (nextProps.metafield.key !== this.props.metafield.key) {\n      const { input } = this.refs.keyInput.refs;\n\n      Velocity.RunSequence([\n        { e: input, p: { backgroundColor: \"#e2f2e2\" }, o: { duration: 200 } },\n        { e: input, p: { backgroundColor: \"#fff\" }, o: { duration: 100 } }\n      ]);\n    }\n\n    if (nextProps.metafield.value !== this.props.metafield.value) {\n      const { input } = this.refs.valueInput.refs;\n\n      Velocity.RunSequence([\n        { e: input, p: { backgroundColor: \"#e2f2e2\" }, o: { duration: 200 } },\n        { e: input, p: { backgroundColor: \"#fff\" }, o: { duration: 100 } }\n      ]);\n    }\n  }\n\n  get detailNamePlaceholder() {\n    return this.props.detailNamePlaceholder || \"Detail Name\";\n  }\n\n  get i18nKeyDetailName() {\n    return this.props.i18nKeyDetailName || \"productDetailEdit.detailName\";\n  }\n\n  get detailInfoPlaceholder() {\n    return this.props.detailInfoPlaceholder || \"Detail Information\";\n  }\n\n  get i18nKeyDetailInformation() {\n    return this.props.i18nKeyDetailInfo || \"productDetail.detailsInfo\";\n  }\n\n  /**\n   * Handle form submit\n   * @param  {Event} event Event object\n   * @return {void} no return value\n   */\n  handleSubmit = (event) => {\n    event.preventDefault();\n  }\n\n  handleChange = (event) => {\n    if (this.props.onChange) {\n      const newMetadata = {\n        key: this.refs.keyInput.refs.input.value,\n        value: this.refs.valueInput.refs.input.value\n      };\n\n      this.props.onChange(event, newMetadata, this.props.index);\n    }\n  }\n\n  handleBlur = (event) => {\n    if (this.props.onBlur) {\n      const newMetadata = {\n        key: this.refs.keyInput.refs.input.value,\n        value: this.refs.valueInput.refs.input.value\n      };\n\n      if (newMetadata.key && newMetadata.value) {\n        this.props.onBlur(event, newMetadata, this.props.index);\n      }\n    }\n  }\n\n  handleRemove = (event) => {\n    if (this.props.onRemove) {\n      this.props.onRemove(event, this.props.metafield, this.props.index);\n    }\n  }\n\n  renderActionButton() {\n    if (this.props.blank === true) {\n      return (\n        <Components.Button icon=\"plus\" onClick={this.handleSubmit} type=\"submit\" />\n      );\n    }\n    return (\n      <Components.Button icon=\"times-circle\" onClick={this.handleRemove} type=\"button\" />\n    );\n  }\n\n  /**\n   * Render a metadata form\n   * @return {JSX} metadata forms for each row of metadata\n   */\n  render() {\n    if (this.props.metafield) {\n      return (\n        <div className=\"rui list-group-item metafield-list-item\">\n          <form className=\"form form-inline\" onSubmit={this.handleSubmit}>\n            <Components.TextField\n              className=\"metafield-key-input\"\n              i18nKeyPlaceholder={this.i18nKeyDetailName}\n              name=\"key\"\n              onBlur={this.handleBlur}\n              onChange={this.handleChange}\n              onReturnKeyDown={this.handleBlur}\n              placeholder={this.detailNamePlaceholder}\n              ref=\"keyInput\"\n              value={this.props.metafield.key}\n            />\n            <Components.TextField\n              className=\"metafield-value-input\"\n              i18nKeyPlaceholder={this.i18nKeyDetailInformation}\n              name=\"value\"\n              onBlur={this.handleBlur}\n              onChange={this.handleChange}\n              onReturnKeyDown={this.handleBlur}\n              placeholder={this.detailInfoPlaceholder}\n              ref=\"valueInput\"\n              value={this.props.metafield.value}\n            />\n            {this.renderActionButton()}\n          </form>\n        </div>\n      );\n    }\n    return null;\n  }\n}\n\nMetafield.defaultProps = {\n  editable: true\n};\n\n// Prop Types\nMetafield.propTypes = {\n  blank: PropTypes.bool,\n  detailInfoPlaceholder: PropTypes.func,\n  detailNamePlaceholder: PropTypes.func,\n  i18nKeyDetailInfo: PropTypes.func,\n  i18nKeyDetailName: PropTypes.func,\n  index: PropTypes.number,\n  metafield: PropTypes.object,\n  onBlur: PropTypes.func,\n  onChange: PropTypes.func,\n  onRemove: PropTypes.func\n};\n\nregisterComponent(\"Metafield\", Metafield);\n\nexport default Metafield;\n","export { default as Overlay } from \"./overlay\";\n","import React, { Component } from \"react\";\nimport PropTypes from \"prop-types\";\nimport { VelocityTransitionGroup } from \"velocity-react\";\nimport Radium from \"radium\";\nimport classnames from \"classnames\";\nimport { registerComponent } from \"@reactioncommerce/reaction-components\";\n\nconst styles = {\n  base: {\n    position: \"fixed\",\n    top: 0,\n    left: 0,\n    width: \"100%\",\n    height: \"100%\",\n    backgroundColor: \"rgba(0, 0, 0, 0.7)\",\n    zIndex: 1040,\n    padding: 0\n  }\n};\n\nclass Overlay extends Component {\n  static defaultProps = {\n    isVisible: true\n  };\n\n  static propTypes = {\n    children: PropTypes.node,\n    isVisible: PropTypes.bool,\n    onClick: PropTypes.func\n  };\n\n  state = {\n    enterAnimation: {\n      animation: { opacity: 1 },\n      duration: 200\n    },\n    leaveAnimation: {\n      animation: { opacity: 0 },\n      duration: 200\n    }\n  }\n\n  renderOverlay() {\n    if (this.props.isVisible) {\n      const baseClassName = classnames({\n        rui: true\n      });\n\n      return (\n        <div\n          aria-hidden={true}\n          className={baseClassName}\n          style={styles.base}\n          onClick={this.props.onClick}\n        />\n      );\n    }\n\n    return null;\n  }\n\n  render() {\n    return (\n      <VelocityTransitionGroup\n        enter={this.state.enterAnimation}\n        leave={this.state.leaveAnimation}\n      >\n        {this.renderOverlay()}\n      </VelocityTransitionGroup>\n    );\n  }\n}\n\nregisterComponent(\"Overlay\", Overlay, Radium);\n\nexport default Radium(Overlay);\n","import React, { Component } from \"react\";\nimport PropTypes from \"prop-types\";\nimport classnames from \"classnames\";\nimport Select from \"react-select\";\nimport { Components, registerComponent } from \"@reactioncommerce/reaction-components\";\nimport { i18next } from \"/client/api\";\n\nclass MultiSelect extends Component {\n  static defaultProps = {\n    multi: true,\n    simpleValue: true\n  }\n\n  static propTypes = {\n    i18nKeyLabel: PropTypes.string,\n    i18nKeyPlaceholder: PropTypes.string,\n    id: PropTypes.string,\n    label: PropTypes.string,\n    name: PropTypes.string,\n    onChange: PropTypes.func,\n    options: PropTypes.array,\n    placeholder: PropTypes.string,\n    value: PropTypes.any\n  }\n\n  renderLabel() {\n    if (this.props.label) {\n      const { id } = this.props;\n\n      return (\n        <label htmlFor={id}>\n          <Components.Translation defaultValue={this.props.label} i18nKey={this.props.i18nKeyLabel} />\n        </label>\n      );\n    }\n\n    return null;\n  }\n\n  handleChange = (value) => {\n    if (typeof this.props.onChange === \"function\") {\n      this.props.onChange(value, this.props.name);\n    }\n  }\n\n  render() {\n    const {\n      label, i18nKeyLabel, // eslint-disable-line no-unused-vars\n      placeholder, i18nKeyPlaceholder,\n      ...selectProps\n    } = this.props;\n\n    const classes = classnames({\n      // Base\n      \"rui\": true,\n      \"multiselect\": true,\n      \"form-group\": true\n    });\n\n    const translatedPlaceholder = i18next.t(i18nKeyPlaceholder, { defaultValue: placeholder });\n\n    return (\n      <div className={classes}>\n        {this.renderLabel()}\n        <Select\n          {...selectProps}\n          placeholder={translatedPlaceholder}\n          onChange={this.handleChange}\n        />\n      </div>\n    );\n  }\n}\n\nregisterComponent(\"MultiSelect\", MultiSelect);\n\nexport default MultiSelect;\n","export { default as NotFound } from \"./notFound\";\n","import React from \"react\";\nimport PropTypes from \"prop-types\";\nimport classnames from \"classnames\";\nimport { Components, registerComponent } from \"@reactioncommerce/reaction-components\";\nimport { Icon } from \"../icon\";\n\n/**\n * @summary React component for displaying a not-found view\n * @param {Object} props - React PropTypes\n * @property {String|Object} className - String className or `classnames` compatible object for the base wrapper\n * @property {String|Object} contentClassName - String className or `classnames` compatible object for the content wrapper\n * @property {String} i18nKeyMessage - i18n key for message\n * @property {String} i18nKeyTitle - i18n key for title\n * @property {String} icon - icon font class names\n * @property {String} message - extra message text\n * @property {String} title - title of page\n * @return {Node} React node containing not-found view\n */\nconst NotFound = (props) => {\n  // ClassName for base wrapper,\n  // If one is provided in props, the default is not used\n  const baseClassName = classnames({\n    \"container-fluid-sm\": typeof props.className === \"undefined\"\n  }, props.className);\n\n  // ClassName for content wrapper\n  // If one is provided in props, the default is not used\n  const contentClassName = classnames({\n    \"empty-view-message\": typeof props.contentClassName === \"undefined\"\n  }, props.contentClassName);\n\n  return (\n    <div className={baseClassName}>\n      <div className={contentClassName}>\n        { props.icon &&\n          <Icon icon={props.icon} />\n        }\n\n        { props.title &&\n          <Components.Translation defaultValue={props.title} i18nKey={props.i18nKeyTitle} />\n        }\n\n        { props.message &&\n          <Components.Translation defaultValue={props.message} i18nKey={props.i18nKeyMessage} />\n        }\n\n        {props.children}\n      </div>\n    </div>\n  );\n};\n\nNotFound.propTypes = {\n  children: PropTypes.node,\n  className: PropTypes.oneOfType([PropTypes.string, PropTypes.object]),\n  contentClassName: PropTypes.oneOfType([PropTypes.string, PropTypes.object]),\n  i18nKeyMessage: PropTypes.string,\n  i18nKeyTitle: PropTypes.string,\n  icon: PropTypes.string,\n  message: PropTypes.string,\n  title: PropTypes.string\n};\n\nregisterComponent(\"NotFound\", NotFound);\n\nexport default NotFound;\n","import React, { Component } from \"react\";\nimport PropTypes from \"prop-types\";\nimport classnames from \"classnames\";\nimport { Components, registerComponent } from \"@reactioncommerce/reaction-components\";\n\nclass NumberTypeInput extends Component {\n  static propTypes = {\n    defaultValue: PropTypes.number,\n    maxValue: PropTypes.number,\n    minValue: PropTypes.number,\n    onChange: PropTypes.func,\n    value: PropTypes.number\n  }\n\n  constructor(props) {\n    super(props);\n\n    this.state = {\n      value: props.defaultValue,\n      minValue: props.minValue || 0,\n      maxValue: props.maxValue || undefined,\n      className: {}\n    };\n  }\n\n  handleIncrementButton = (event) => {\n    const value = this.state.value + 1;\n\n    if (this.state.maxValue && value <= this.state.maxValue) {\n      this.handleChange(event, value);\n    }\n  }\n\n  handleDecrementButton = (event) => {\n    const value = this.state.value - 1;\n\n    if (value >= this.state.minValue) {\n      this.handleChange(event, value);\n    }\n  }\n\n  handleChange = (event, value) => {\n    let newValue = parseInt(value, 10);\n    const { maxValue, minValue } = this.state;\n\n    // prevent the new value from being\n    // greater or less than the min and max values\n    if (newValue > maxValue) {\n      newValue = maxValue;\n    }\n    if (newValue < minValue) {\n      newValue = minValue;\n    }\n\n    // setting the value state\n    // if a new value set edited css class\n    this.setState({\n      value: newValue,\n      className: { edited: (newValue !== maxValue) }\n    });\n\n    // if props.onChange and the new value is a number\n    if (this.props.onChange && !isNaN(newValue)) {\n      this.props.onChange(event, newValue);\n    }\n  }\n\n  handleBlur = (event) => {\n    const { maxValue } = this.state;\n    // if input is left empty reset\n    // it's value to be the max value\n    if (isNaN(this.state.value)) {\n      this.setState({\n        value: maxValue\n      });\n      this.props.onChange(event, maxValue);\n    }\n  }\n\n  render() {\n    const fieldClassName = classnames({\n      \"number-input-field\": true,\n      ...(this.state.className)\n    });\n\n    return (\n      <div className=\"rui number-input\">\n        <Components.TextField\n          className={fieldClassName}\n          type=\"number\"\n          onBlur={this.handleBlur}\n          onChange={this.handleChange}\n          maxValue={this.state.maxValue}\n          minValue={this.state.minValue}\n          value={this.state.value}\n        />\n        <div className=\"stacked-buttons\">\n          <Components.Button\n            className=\"button\"\n            icon=\"fa fa-chevron-up\"\n            disabled={this.state.maxValue === this.state.value}\n            onClick={this.handleIncrementButton}\n          />\n          <br/>\n          <Components.Button\n            className=\"button\"\n            icon=\"fa fa-chevron-down\"\n            disabled={this.state.minValue === this.state.value}\n            onClick={this.handleDecrementButton}\n          />\n        </div>\n      </div>\n    );\n  }\n}\n\nregisterComponent(\"NumberTypeInput\", NumberTypeInput);\n\nexport default NumberTypeInput;\n","import React, { Component } from \"react\";\nimport PropTypes from \"prop-types\";\nimport classnames from \"classnames\";\nimport accounting from \"accounting-js\";\nimport { Components, registerComponent } from \"@reactioncommerce/reaction-components\";\n\nclass NumericInput extends Component {\n  constructor(props) {\n    super(props);\n    this.state = {\n      value: this.props.value,\n      isEditing: false\n    };\n  }\n\n  /**\n   * update state when component receives props\n   * @param  {Object} nextProps new props\n   * @return {undefined}\n   */\n  componentWillReceiveProps(nextProps) {\n    if (nextProps.value !== undefined && !this.state.isEditing) {\n      const value = this.format(nextProps.value);\n      this.setState({\n        value\n      });\n    }\n  }\n\n  /**\n   * Gets the displayed value. If in edit mode,\n   * the field's value is not formatted. If not in\n   * edit mode, the field gets formatted according to chosen locale.\n   * @returns {*}\n   */\n  get displayValue() {\n    const { value } = this.state;\n    if (this.state.isEditing) {\n      return value;\n    }\n    return this.format(value);\n  }\n\n  /**\n   * Format this inputs value to a numeric string\n   * @return {String} Formatted numeric string\n   */\n  format(value) {\n    const moneyFormat = Object.assign({}, this.props.format);\n    if (this.state.isEditing) {\n      moneyFormat.symbol = \"\"; // No currency sign in edit mode\n    }\n    const unformattedValue = this.unformat(value);\n    const formatted = accounting.formatMoney(unformattedValue, moneyFormat).trim();\n    return formatted;\n  }\n\n  /**\n   * Get the field's value as rational number\n   * @param { Number } the field's value\n   */\n  unformat(value) {\n    const unformattedValue = accounting.unformat(value, this.props.format.decimal);\n    return unformattedValue;\n  }\n\n  /**\n   * onBlur\n   * @summary set the state when the value of the input is changed\n   * @param  {Event} event Event object\n   * @return {void}\n   */\n  onBlur = () => {\n    let { value } = this.state;\n    if (value > this.props.maxValue) {\n      value = this.props.maxValue;\n    }\n    this.setState({\n      isEditing: false,\n      value\n    });\n    if (this.props.onBlur) {\n      const numberValue = this.unformat(value);\n      this.props.onBlur(event, numberValue, this.props.name);\n    }\n  }\n\n  /**\n   * onKeyDown\n   * @summary set the state when the value of the input is changed\n   * @param  {Event} event Event object\n   * @return {void}\n   */\n  onKeyDown(event) {\n    if (this.props.onKeyDown) {\n      this.props.onKeyDown(event, this.props.name);\n    }\n\n    if (this.props.onReturnKeyDown && event.keyCode === 13) {\n      const numberValue = this.unformat(event.target.value);\n      this.props.onReturnKeyDown(event, numberValue, this.props.name);\n    }\n  }\n\n  /**\n   * Selects the text of the passed input field\n   * @param ctrl\n   */\n  selectAll(ctrl) {\n    if (ctrl.setSelectionRange) {\n      ctrl.setSelectionRange(0, ctrl.value.length);\n    }\n  }\n\n  /**\n   * onFocus\n   * @summary set the state when the input is focused\n   * @param  {Event} event Event object\n   * @return {void}\n   */\n  onFocus = (event) => {\n    const { currentTarget } = event;\n    this.setState({\n      isEditing: true\n    }, () => {\n      this.setState({\n        value: this.format(this.state.value)\n      }, () => {\n        this.selectAll(currentTarget);\n      });\n    });\n  }\n\n  /**\n   * Handle change event from text input\n   * @param  {SyntheticEvent} event Change event\n   * @return {undefined}\n   */\n  handleChange = (event) => {\n    const { value } = event.currentTarget;\n    this.setState({\n      value\n    });\n\n    if (this.props.onChange) {\n      const numberValue = this.unformat(value);\n      this.props.onChange(event, numberValue, this.props.name);\n    }\n  }\n\n  /**\n   * renderLabel\n   * @summary Render the label for the field if one is provided in props\n   * @return {ReactNode|null} react node or null\n   */\n  renderLabel() {\n    if (this.props.label) {\n      return (\n        <label htmlFor={this.props.id}>\n          <Components.Translation defaultValue={this.props.label} i18nKey={this.props.i18nKeyLabel} />\n        </label>\n      );\n    }\n\n    return null;\n  }\n\n  /**\n   * renderField\n   * @summary Render input box or field\n   * @return {JSX} jsx template\n   */\n  renderField() {\n    const { classNames } = this.props;\n\n    if (this.props.isEditing === false) {\n      const textValueClassName = classnames({\n        rui: true,\n        text: true,\n        ...(classNames.text || {})\n      });\n\n      return (\n        <span className={textValueClassName}>\n          {this.displayValue}\n        </span>\n      );\n    }\n    const fieldClassName = classnames({\n      \"form-control\": true, // eslint-disable-line: quote-props\n      ...(classNames.input || {})\n    });\n    return (\n      <div className=\"rui control numeric-input-field\">\n        <input\n          className={fieldClassName}\n          disabled={this.props.disabled}\n          onFocus={this.onFocus}\n          onBlur={this.onBlur}\n          ref=\"input\"\n          onChange={this.handleChange}\n          value={this.displayValue}\n        />\n      </div>\n    );\n  }\n\n  /**\n   * render\n   * @return {ReactElement} markup\n   */\n  render() {\n    return (\n      <div className=\"numeric-input\">\n        {this.renderLabel()}\n        {this.renderField()}\n      </div>\n    );\n  }\n}\n\nNumericInput.defaultProps = {\n  disabled: false,\n  isEditing: true,\n  classNames: {}\n};\n\nNumericInput.propTypes = {\n  classNames: PropTypes.shape({}),\n  disabled: PropTypes.bool,\n  format: PropTypes.shape({\n    decimal: PropTypes.string\n  }),\n  i18nKeyLabel: PropTypes.string,\n  id: PropTypes.string,\n  isEditing: PropTypes.bool,\n  label: PropTypes.string,\n  maxValue: PropTypes.number,\n  name: PropTypes.string,\n  onBlur: PropTypes.func,\n  onChange: PropTypes.func,\n  onKeyDown: PropTypes.func,\n  onReturnKeyDown: PropTypes.func,\n  value: PropTypes.number\n};\n\nregisterComponent(\"NumericInput\", NumericInput);\n\nexport default NumericInput;\n","export { default as Popover } from \"./popover\";\nexport { default as PopoverContent } from \"./popoverContent\";\n","import React, { Component } from \"react\";\nimport PropTypes from \"prop-types\";\nimport classnames from \"classnames\";\nimport TetherComponent from \"react-tether\";\nimport { Components, registerComponent } from \"@reactioncommerce/reaction-components\";\n\nclass Popover extends Component {\n  state = {\n    isOpen: false\n  }\n\n  componentWillReceiveProps(nextProps) {\n    if (this.isControlled) {\n      this.setState({\n        isOpen: nextProps.isOpen\n      });\n    }\n  }\n\n  get isOpen() {\n    return this.props.isOpen || this.state.isOpen;\n  }\n\n  get isControlled() {\n    return typeof this.props.isOpen === \"boolean\";\n  }\n\n  /**\n   * attachment\n   * @description Return the attachment for the tooltip or the default\n   * @return {String} attachment\n   */\n  get attachment() {\n    return this.props.attachment || Components.Tooltip.defaultProps.attachment;\n  }\n\n  handleDisplayButtonClick = (event, value) => {\n    if (this.props.onDisplayButtonClick) {\n      this.props.onDisplayButtonClick(event, value);\n    }\n  }\n\n  handleOpen = () => {\n    if (this.isControlled) {\n      if (this.props.onRequestOpen) {\n        this.props.onRequestOpen(true);\n      }\n    } else {\n      this.setState({\n        isOpen: true\n      });\n    }\n  }\n\n  handleClickOutside = () => {\n    if (this.isControlled) {\n      if (this.props.onRequestOpen) {\n        this.props.onRequestOpen(false);\n      }\n    } else {\n      this.setState({\n        isOpen: false\n      });\n    }\n  }\n\n  renderPopoverChildren() {\n    if (this.isOpen) {\n      return (\n        <Components.PopoverContent\n          children={this.props.children}\n          onClickOutside={this.props.onClick}\n        />\n      );\n    }\n    return null;\n  }\n\n  renderButtons() {\n    if (this.props.showDropdownButton) {\n      return (\n        <Components.ButtonGroup>\n          {this.props.buttonElement}\n          <Components.Button\n            key=\"dropdown-button\"\n            icon=\"fa fa-chevron-down\"\n            onClick={this.props.onClick}\n            status={this.props.buttonElement.props.status}\n          />\n        </Components.ButtonGroup>\n      );\n    } else if (this.props.buttonElement) {\n      return React.cloneElement(this.props.buttonElement, {\n        onClick: this.props.onClick\n      });\n    }\n\n    return <div />;\n  }\n\n  render() {\n    return (\n      <TetherComponent\n        style={{\n          maxHeight: \"100vh\",\n          overflowY: \"auto\"\n        }}\n        attachment={this.attachment}\n        classPrefix=\"popover\"\n        className={classnames({\n          \"rui\": true,\n          \"popover-element\": true,\n          \"popover-open\": true,\n          \"popover-theme-arrows\": this.props.showArrow || false\n        })}\n        constraints={this.props.constraints || [{\n          to: \"scrollParent\",\n          attachment: \"together\",\n          pin: true\n        }]}\n        targetAttachment={this.props.targetAttachment}\n      >\n        {this.renderButtons()}\n        {this.renderPopoverChildren()}\n      </TetherComponent>\n    );\n  }\n}\n\nPopover.propTypes = {\n  attachment: PropTypes.string,\n  buttonElement: PropTypes.node,\n  children: PropTypes.node,\n  constraints: PropTypes.array,\n  isOpen: PropTypes.bool,\n  onClick: PropTypes.func,\n  onDisplayButtonClick: PropTypes.func,\n  onRequestOpen: PropTypes.func,\n  showArrow: PropTypes.bool,\n  showDropdownButton: PropTypes.bool,\n  targetAttachment: PropTypes.string,\n  tooltipContent: PropTypes.node\n};\n\nPopover.defaultProps = {\n  attachment: \"bottom left\",\n  showArrow: false,\n  targetAttachment: \"top left\"\n};\n\nregisterComponent(\"Popover\", Popover);\n\nexport default Popover;\n","import React, { Component } from \"react\";\nimport PropTypes from \"prop-types\";\nimport onclickOutside from \"react-onclickoutside\";\nimport { registerComponent } from \"@reactioncommerce/reaction-components\";\n\nclass PopoverContent extends Component {\n  handleClickOutside(event) {\n    if (this.props.onClickOutside) {\n      this.props.onClickOutside(event);\n    }\n  }\n\n  render() {\n    return (\n      <div className=\"rui popover-content\">\n        {this.props.children}\n      </div>\n    );\n  }\n}\n\nPopoverContent.propTypes = {\n  children: PropTypes.node,\n  onClickOutside: PropTypes.func\n};\n\nregisterComponent(\"PopoverContent\", onclickOutside(PopoverContent));\n\nexport default onclickOutside(PopoverContent);\n","import React from \"react\";\nimport PropTypes from \"prop-types\";\nimport { registerComponent } from \"@reactioncommerce/reaction-components\";\n\nconst CircularProgress = ({ indeterminate }) => (\n  !!indeterminate && <div className=\"spinner\" />\n);\n\nCircularProgress.propTypes = {\n  indeterminate: PropTypes.bool\n};\n\nCircularProgress.defaultProps = {\n  indeterminate: true\n};\n\nregisterComponent(\"CircularProgress\", CircularProgress);\n\nexport default CircularProgress;\n","import React, { Component } from \"react\";\nimport { Components, registerComponent } from \"@reactioncommerce/reaction-components\";\n\nclass Select extends Component {\n  render() {\n    return (\n      <Components.MultiSelect\n        multi={false}\n        clearable={false}\n        {...this.props}\n      />\n    );\n  }\n}\n\nregisterComponent(\"Select\", Select);\n\nexport default Select;\n","/**\n * Implementing No UI Slider\n * https://www.npmjs.com/package/react-nouislider\n */\nimport React, { Component } from \"react\";\nimport PropTypes from \"prop-types\";\nimport Nouislider from \"react-nouislider\";\nimport { registerComponent } from \"@reactioncommerce/reaction-components\";\n\nclass Slider extends Component {\n  render() {\n    return (\n      <Nouislider\n        range={this.props.range}\n        start={this.props.start}\n        tooltips={this.props.tooltips}\n        connect={this.props.connect}\n        step={this.props.step}\n        orientation={this.props.orientation}\n        margin={this.props.margin}\n        padding={this.props.padding}\n        onChange={this.props.onChange}\n        onSlide={this.props.onSlide}\n      />\n    );\n  }\n}\n\nSlider.propTypes = {\n  connect: PropTypes.oneOfType([PropTypes.array, PropTypes.bool]),\n  margin: PropTypes.number,\n  onChange: PropTypes.func,\n  onSlide: PropTypes.func,\n  orientation: PropTypes.string,\n  padding: PropTypes.number,\n  range: PropTypes.object,\n  start: PropTypes.arrayOf(PropTypes.number),\n  step: PropTypes.number,\n  tooltips: PropTypes.oneOfType([PropTypes.array, PropTypes.bool])\n};\n\nSlider.defaultProps = {\n  range: {\n    min: 0,\n    max: 100\n  },\n  start: [0, 100],\n  step: 5,\n  orientation: \"horizontal\",\n  tooltips: true,\n  margin: 0,\n  padding: 0\n};\n\nregisterComponent(\"Slider\", Slider);\n\nexport default Slider;\n","export { default as Switch } from \"./switch\";\n","import React, { Component } from \"react\";\nimport PropTypes from \"prop-types\";\nimport classnames from \"classnames\";\nimport { Components, registerComponent } from \"@reactioncommerce/reaction-components\";\n\nclass Switch extends Component {\n  static defaultProps = {\n    checked: false\n  }\n\n  static propTypes = {\n    checked: PropTypes.bool,\n    disabled: PropTypes.bool,\n    helpText: PropTypes.string,\n    i18nKeyHelpText: PropTypes.string,\n    i18nKeyLabel: PropTypes.string,\n    i18nKeyOnLabel: PropTypes.string,\n    id: PropTypes.string,\n    label: PropTypes.string,\n    name: PropTypes.string,\n    onChange: PropTypes.func,\n    onLabel: PropTypes.string\n  }\n\n  constructor(props) {\n    super(props);\n\n    this.state = {\n      checked: false\n    };\n  }\n\n  get isHelpMode() {\n    // TODO: add functionality to toggle helpMode on / off.\n    // When on, helpText will always show.\n    // When off, only validation messages will show.\n    // For now, all helpText will show, meaning this doesn't affect how the app currently works.\n    // This is here just to lay the foundation for when we add the toggle.\n\n    return true;\n  }\n\n  handleChange = (event) => {\n    if (this.props.onChange) {\n      const isInputChecked = !this.props.checked;\n      this.props.onChange(event, isInputChecked, this.props.name);\n    }\n  }\n\n  renderLabel() {\n    let labelElement;\n\n    if (this.props.checked === false && this.props.label) {\n      labelElement = (\n        <Components.Translation defaultValue={this.props.label} i18nKey={this.props.i18nKeyLabel} />\n      );\n    } else if (this.props.checked === true && this.props.onLabel) {\n      labelElement = (\n        <Components.Translation defaultValue={this.props.onLabel} i18nKey={this.props.i18nKeyOnLabel} />\n      );\n    } else if (this.props.label) {\n      labelElement = (\n        <Components.Translation defaultValue={this.props.label} i18nKey={this.props.i18nKeyLabel} />\n      );\n    }\n\n    if (labelElement) {\n      return (\n        <div className=\"control-label\">\n          {labelElement}\n        </div>\n      );\n    }\n\n    return null;\n  }\n\n  /**\n   * Render help text or validation message\n   * @return {ReactNode|null} react node or null\n   */\n  renderHelpText() {\n    const helpMode = this.isHelpMode;\n    const { helpText } = this.props;\n    const i18nKey = this.props.i18nKeyHelpText;\n\n    // Show if helpMode is true\n    if (helpText && helpMode) {\n      return (\n        <span className=\"help-block\">\n          <Components.Translation defaultValue={helpText} i18nKey={i18nKey} />\n        </span>\n      );\n    }\n\n    return null;\n  }\n\n  checkboxRef = (ref) => {\n    this._checkbox = ref;\n  }\n\n  render() {\n    const { id } = this.props;\n\n    const baseClassName = classnames({\n      rui: true,\n      switch: true,\n      disabled: this.props.disabled\n    });\n\n    const switchControlClassName = classnames({\n      \"switch-control\": true,\n      \"active\": this.props.checked\n    });\n\n    return (\n      <span>\n        <label className={baseClassName} htmlFor={id}>\n          <input\n            id={id}\n            checked={this.props.checked}\n            onChange={this.handleChange}\n            ref={this.checkboxRef}\n            type=\"checkbox\"\n          />\n          <div className={switchControlClassName} />\n          {this.renderLabel()}\n        </label>\n        {this.renderHelpText()}\n      </span>\n    );\n  }\n}\n\nregisterComponent(\"Switch\", Switch);\n\nexport default Switch;\n","export { default as TabList } from \"./tabList\";\nexport { default as TabItem } from \"./tabItem\";\n","import React, { Component } from \"react\";\nimport PropTypes from \"prop-types\";\nimport classnames from \"classnames/dedupe\";\nimport { registerComponent } from \"@reactioncommerce/reaction-components\";\n\nclass TabItem extends Component {\n  static propTypes = {\n    active: PropTypes.bool,\n    children: PropTypes.node,\n    className: PropTypes.oneOfType([PropTypes.string, PropTypes.object]),\n    href: PropTypes.string,\n    index: PropTypes.number,\n    onClick: PropTypes.func,\n    value: PropTypes.any\n  }\n\n  handleClick = (event) => {\n    if (typeof this.props.onClick === \"function\") {\n      event.preventDefault();\n      this.props.onClick(event, this.props.value, this.props.index);\n    }\n  }\n\n  render() {\n    const {\n      active,\n      className,\n      // Remove props that cannot be added to DOM elements\n      onClick, value, href, index, // eslint-disable-line no-unused-vars\n\n      // All other props pass on through\n      ...otherProps\n    } = this.props;\n\n    const baseClassName = classnames({\n      rui: true,\n      tab: true,\n      active\n    }, className);\n\n    return (\n      <li {...otherProps} className={baseClassName} role=\"presentation\">\n        <a onClick={this.handleClick} href={href} style={{ width: \"100%\", height: \"100%\" }}>\n          {this.props.children}\n        </a>\n      </li>\n    );\n  }\n}\n\nregisterComponent(\"TabItem\", TabItem);\n\nexport default TabItem;\n","import React, { Children, Component } from \"react\";\nimport PropTypes from \"prop-types\";\nimport classnames from \"classnames/dedupe\";\nimport { registerComponent } from \"@reactioncommerce/reaction-components\";\n\nclass TabList extends Component {\n  static propTypes = {\n    children: PropTypes.node,\n    className: PropTypes.oneOfType([PropTypes.string, PropTypes.object]),\n    selectedTab: PropTypes.oneOfType([PropTypes.any])\n  }\n\n  render() {\n    const { className, selectedTab, ...otherProps } = this.props;\n\n    const baseClassName = classnames({\n      \"rui\": true,\n      \"tab-list\": true,\n      \"nav\": true,\n      \"nav-pills\": true\n    }, className);\n\n    const elements = Children.map(this.props.children, (child, index) => {\n      const newProps = {\n        index,\n        active: false\n      };\n\n      if (selectedTab === child.props.value || selectedTab === index) {\n        newProps.active = true;\n      }\n\n      return React.cloneElement(child, newProps);\n    });\n\n    return (\n      <ul {...otherProps} className={baseClassName} role=\"tablist\">\n        {elements}\n      </ul>\n    );\n  }\n}\n\nregisterComponent(\"TabList\", TabList);\n\nexport default TabList;\n","export { default as TagItem } from \"./tagItem\";\nexport { default as TagList } from \"./tagList\";\n","import React, { Component } from \"react\";\nimport PropTypes from \"prop-types\";\nimport classnames from \"classnames\";\nimport Autosuggest from \"react-autosuggest\";\nimport Velocity from \"velocity-animate\";\nimport \"velocity-animate/velocity.ui\";\nimport { registerComponent } from \"@reactioncommerce/reaction-components\";\nimport { i18next } from \"/client/api\";\nimport { Button, Handle } from \"/imports/plugins/core/ui/client/components\";\nimport { SortableItem } from \"/imports/plugins/core/ui/client/containers\";\nimport { Router } from \"@reactioncommerce/reaction-router\";\n\nclass TagItem extends Component {\n  componentWillReceiveProps(nextProps) {\n    if (this._updated && this._saved && this.refs.autoSuggestInput) {\n      const { input } = this.refs.autoSuggestInput;\n\n      Velocity.RunSequence([\n        { e: input, p: { backgroundColor: \"#e2f2e2\" }, o: { duration: 200 } },\n        { e: input, p: { backgroundColor: \"#fff\" }, o: { duration: 100 } }\n      ]);\n\n      this._updated = false;\n    }\n\n    if ((nextProps.tag.name !== this.props.tag.name)) {\n      this._updated = true;\n    }\n  }\n\n  get tag() {\n    return this.props.tag || {\n      name: \"\"\n    };\n  }\n\n  get inputPlaceholder() {\n    return i18next.t(this.props.i18nKeyInputPlaceholder || \"tags.tagName\", {\n      defaultValue: this.props.inputPlaceholder || \"Tag Name\"\n    });\n  }\n\n  getSuggestionValue(suggestion) {\n    return suggestion.label;\n  }\n\n  saveTag(event) {\n    if (this.props.onTagSave) {\n      this.props.onTagSave(event, this.props.tag);\n    }\n  }\n\n  /**\n   * Handle tag form submit events and pass them up the component chain\n   * @param  {Event} event Event object\n   * @return {void} no return value\n   */\n  handleTagFormSubmit = (event) => {\n    event.preventDefault();\n    this._saved = true;\n    this.saveTag(event);\n  }\n\n  /**\n   * Handle tag remove events and pass them up the component chain\n   * @param  {Event} event Event object\n   * @return {void} no return value\n   */\n  handleTagRemove = () => {\n    if (this.props.onTagRemove) {\n      this.props.onTagRemove(this.props.tag, this.props.parentTag);\n    }\n  }\n\n  /**\n   * Handle tag update events and pass them up the component chain\n   * @param  {Event} event Event object\n   * @return {void} no return value\n   */\n  handleTagUpdate = (event) => {\n    if (this.props.onTagUpdate && event.keyCode === 13) {\n      this._saved = true;\n      this.props.onTagUpdate(this.props.tag._id, event.target.value);\n    }\n  }\n\n  handleTagKeyDown = (event) => {\n    if (event.keyCode === 13) {\n      this._saved = true;\n      this.saveTag(event);\n    }\n  }\n\n  /**\n   * Handle tag mouse out events and pass them up the component chain\n   * @param  {Event} event Event object\n   * @return {void} no return value\n   */\n  handleTagMouseOut = (event) => {\n    // event.preventDefault();\n    if (this.props.onTagMouseOut) {\n      this.props.onTagMouseOut(event, this.props.tag);\n    }\n  }\n\n  /**\n   * Handle click event on drop button and pass up the component chain\n   * @return {void} no return value\n   */\n  handleTagSelect = () => {\n    if (this.props.onTagSelect) { // Pass the tag back up to the parent component\n      this.props.onTagSelect(this.props.tag);\n    }\n  }\n\n  /**\n   * Handle tag mouse over events and pass them up the component chain\n   * @param  {Event} event Event object\n   * @return {void} no return value\n   */\n  handleTagMouseOver = (event) => {\n    if (this.props.onTagMouseOver) {\n      this.props.onTagMouseOver(event, this.props.tag);\n    }\n  }\n\n  /**\n   * Handle tag inout blur events and pass them up the component chain\n   * @param  {Event} event Event object\n   * @return {void} no return value\n   */\n  handleTagInputBlur = (event) => {\n    if (this.props.onTagInputBlur) {\n      this._saved = true;\n      this.props.onTagInputBlur(event, this.props.tag);\n    }\n  }\n\n  handleInputChange = (event, { newValue }) => {\n    if (this.props.onTagUpdate) {\n      const updatedTag = Object.assign({}, { ...this.props.tag }, {\n        name: newValue\n      });\n      this.props.onTagUpdate(event, updatedTag);\n    }\n  }\n\n  handleSuggestionsUpdateRequested = (suggestion) => {\n    if (this.props.onGetSuggestions) {\n      this.props.onGetSuggestions(suggestion);\n    }\n  }\n\n  handleSuggestionsClearRequested = () => {\n    if (this.props.onClearSuggestions) {\n      this.props.onClearSuggestions();\n    }\n  }\n\n  handleClick = (event) => {\n    if (this.props.onTagClick) {\n      event.preventDefault();\n      this.props.onTagClick(event, this.props.tag);\n    }\n  }\n\n  /**\n   * Render a simple tag for display purposes only\n   * @return {JSX} simple tag\n   */\n  renderTag() {\n    const baseClassName = classnames({\n      \"rui\": true,\n      \"tag\": true,\n      \"link\": true,\n      \"full-width\": this.props.fullWidth\n    });\n\n    const url = Router.pathFor(\"tag\", {\n      hash: {\n        slug: this.props.tag.slug\n      }\n    });\n\n    return (\n      <a\n        className={baseClassName}\n        href={url}\n        onFocus={this.handleTagMouseOver}\n        onBlur={this.handleTagMouseOut}\n        onMouseOut={this.handleTagMouseOut}\n        onMouseOver={this.handleTagMouseOver}\n        onClick={this.handleClick}\n      >\n        {this.props.tag.name}\n      </a>\n    );\n  }\n\n  /**\n   * Render an admin editable tag\n   * @return {JSX} editable tag\n   */\n  renderEditableTag() {\n    const baseClassName = classnames({\n      \"rui\": true,\n      \"tag\": true,\n      \"edit\": true,\n      \"draggable\": this.props.draggable,\n      \"full-width\": this.props.fullWidth\n    });\n\n    return (\n      this.props.connectDropTarget(<div className=\"rui item edit draggable\">\n        <div\n          className={baseClassName}\n          data-id={this.props.tag._id}\n        >\n          <form onSubmit={this.handleTagFormSubmit}>\n            <Handle connectDragSource={this.props.connectDragSource} />\n            {this.renderAutosuggestInput()}\n            <Button icon=\"times-circle\" onClick={this.handleTagRemove} status=\"danger\" />\n            {this.props.isTagNav &&\n              <Button icon=\"chevron-down\" onClick={this.handleTagSelect} status=\"default\" />\n            }\n          </form>\n        </div>\n      </div>)\n    );\n  }\n\n  /**\n   * Render a tag creation form\n   * @return {JSX} blank tag for creating new tags\n   */\n  renderBlankEditableTag() {\n    const baseClassName = classnames({\n      \"rui\": true,\n      \"tag\": true,\n      \"edit\": true,\n      \"create\": true,\n      \"full-width\": this.props.fullWidth\n    });\n\n    return (\n      <div className=\"rui item edit draggable\">\n        <div className={baseClassName}>\n          <form onSubmit={this.handleTagFormSubmit}>\n            <Button icon=\"tag\" />\n            {this.renderAutosuggestInput()}\n            <Button icon=\"plus\" />\n          </form>\n        </div>\n      </div>\n    );\n  }\n\n  renderSuggestion(suggestion) {\n    return (\n      <span>{suggestion.label}</span>\n    );\n  }\n\n  renderAutosuggestInput() {\n    return (\n      <Autosuggest\n        getSuggestionValue={this.getSuggestionValue}\n        inputProps={{\n          placeholder: this.inputPlaceholder,\n          value: this.props.tag.name,\n          onKeyDown(event) {\n            // 9 == Tab key\n            // 13 == Enter Key\n            if (event.keyCode === 9 || event.keyCode === 13) {\n              // this.handleUpdate\n              // options.onUpdateCallback && options.onUpdateCallback();\n            }\n          },\n          onBlur: this.handleTagInputBlur,\n          onChange: this.handleInputChange\n        }}\n        onSuggestionsClearRequested={this.handleSuggestionsClearRequested}\n        onSuggestionsFetchRequested={this.handleSuggestionsUpdateRequested}\n        ref=\"autoSuggestInput\"\n        renderSuggestion={this.renderSuggestion}\n        suggestions={this.props.suggestions}\n      />\n    );\n  }\n\n  /**\n   * Render component\n   * @return {JSX} tag component\n   */\n  render() {\n    if (this.props.blank) {\n      return this.renderBlankEditableTag();\n    } else if (this.props.editable) {\n      return this.renderEditableTag();\n    }\n\n    return this.renderTag();\n  }\n}\n\nTagItem.propTypes = {\n  blank: PropTypes.bool,\n  connectDragSource: PropTypes.func,\n  connectDropTarget: PropTypes.func,\n  draggable: PropTypes.bool,\n  editable: PropTypes.bool,\n  fullWidth: PropTypes.bool,\n  i18nKeyInputPlaceholder: PropTypes.string,\n  index: PropTypes.number,\n  inputPlaceholder: PropTypes.string,\n  isTagNav: PropTypes.bool,\n  onClearSuggestions: PropTypes.func,\n  onGetSuggestions: PropTypes.func,\n  onTagClick: PropTypes.func,\n  onTagInputBlur: PropTypes.func,\n  onTagMouseOut: PropTypes.func,\n  onTagMouseOver: PropTypes.func,\n  onTagRemove: PropTypes.func,\n  onTagSave: PropTypes.func,\n  onTagSelect: PropTypes.func,\n  onTagUpdate: PropTypes.func,\n  parentTag: PropTypes.object,\n  suggestions: PropTypes.arrayOf(PropTypes.object),\n  tag: PropTypes.object\n};\n\nregisterComponent(\"TagItem\", TagItem, SortableItem(\"tag\"));\n\nexport default SortableItem(\"tag\")(TagItem);\n","import React, { Component } from \"react\";\nimport PropTypes from \"prop-types\";\nimport _ from \"lodash\";\nimport classnames from \"classnames\";\nimport { Components } from \"@reactioncommerce/reaction-components\";\nimport { PropTypes as ReactionPropTypes } from \"/lib/api\";\n\nclass TagList extends Component {\n  displayName = \"Tag List (TagList)\";\n\n  handleNewTagSave = (event, tag) => {\n    event.preventDefault();\n    if (this.props.onNewTagSave) {\n      this.props.onNewTagSave(tag, this.props.parentTag);\n    }\n  }\n\n  handleNewTagUpdate = (event, tag) => {\n    if (this.props.onNewTagUpdate) {\n      this.props.onNewTagUpdate(tag, this.props.parentTag);\n    }\n  }\n\n  handleTagSave = (event, tag) => {\n    if (this.props.onTagSave) {\n      this.props.onTagSave(tag, this.props.parentTag);\n    }\n  }\n\n  handleTagRemove = (tag) => {\n    if (this.props.onTagRemove) {\n      this.props.onTagRemove(tag, this.props.parentTag);\n    }\n  }\n\n  /**\n   * Handle tag mouse out events and pass them up the component chain\n   * @param  {Event} event Event object\n   * @param  {Tag} tag Reaction.Schemas.Tag - a tag object\n   * @return {void} no return value\n   */\n  handleTagMouseOut = (event, tag) => {\n    if (this.props.onTagMouseOut) {\n      this.props.onTagMouseOut(event, tag, this.props.parentTag);\n    }\n  }\n\n  /**\n   * Handle tag mouse over events and pass them up the component chain\n   * @param  {Event} event Event object\n   * @param  {Tag} tag Reaction.Schemas.Tag - a tag object\n   * @return {void} no return value\n   */\n  handleTagMouseOver = (event, tag) => {\n    if (this.props.onTagMouseOver) {\n      this.props.onTagMouseOver(event, tag, this.props.parentTag);\n    }\n  }\n\n  handleTagUpdate = (event, tag) => {\n    if (this.props.onTagUpdate) {\n      this.props.onTagUpdate(tag, this.props.parentTag);\n    }\n  }\n\n  handleTagClick = (event, tag) => {\n    if (this.props.onTagClick) {\n      this.props.onTagClick(event, tag);\n    }\n  }\n\n  hasDropdownClassName = (tag) => {\n    if (this.props.hasDropdownClassName) {\n      return this.props.hasDropdownClassName(tag);\n    }\n    return \"\";\n  }\n\n  navbarSelectedClassName = (tag) => {\n    if (this.props.navbarSelectedClassName) {\n      return this.props.navbarSelectedClassName(tag);\n    }\n    return \"\";\n  }\n\n  renderTags() {\n    const classes = (tag = {}) => classnames({\n      \"navbar-item\": this.props.isTagNav,\n      [this.navbarSelectedClassName(tag)]: this.props.isTagNav,\n      [this.hasDropdownClassName(tag)]: this.props.isTagNav\n    });\n\n    if (Array.isArray(this.props.tags)) {\n      const arrayProps = _.compact(this.props.tags);\n      const tags = arrayProps.map((tag, index) => (\n        <div className={classes(tag)} key={index}>\n          <Components.TagItem\n            {...this.props}\n            data-id={tag._id}\n            index={index}\n            key={index}\n            tag={tag}\n            onMove={this.props.onMoveTag}\n            draggable={this.props.draggable}\n            onTagInputBlur={this.handleTagSave}\n            onTagMouseOut={this.handleTagMouseOut}\n            onTagMouseOver={this.handleTagMouseOver}\n            onTagRemove={this.handleTagRemove}\n            onTagSave={this.handleTagSave}\n            onTagUpdate={this.handleTagUpdate}\n            onTagClick={this.handleTagClick}\n          />\n          {this.props.children}\n        </div>\n      ));\n\n      // Render an blank tag for creating new tags\n      if (this.props.editable && this.props.enableNewTagForm) {\n        tags.push(<div className={classes()} key=\"newTagForm\">\n          <Components.TagItem\n            {...this.props}\n            blank={true}\n            key=\"newTagForm\"\n            tag={this.props.newTag}\n            inputPlaceholder=\"Add Tag\"\n            i18nKeyInputPlaceholder=\"tags.addTag\"\n            onTagInputBlur={this.handleNewTagSave}\n            onTagSave={this.handleNewTagSave}\n            onTagUpdate={this.handleNewTagUpdate}\n          />\n        </div>);\n      }\n\n      return tags;\n    }\n\n    return null;\n  }\n\n  render() {\n    if (this.props.isTagNav) {\n      return (\n        <div className=\"tag-group\">\n          {this.renderTags()}\n        </div>\n      );\n    }\n\n    const classes = classnames({\n      rui: true,\n      tags: true,\n      edit: this.props.editable\n    });\n\n    return (\n      <div\n        className={classes}\n        data-id={this.props.parentTag._id}\n        ref=\"tags\"\n      >\n        {this.renderTags()}\n      </div>\n    );\n  }\n}\n\nTagList.defaultProps = {\n  parentTag: {}\n};\n\nTagList.propTypes = {\n  children: PropTypes.node,\n  draggable: PropTypes.bool,\n  editable: PropTypes.bool,\n  enableNewTagForm: PropTypes.bool,\n  hasDropdownClassName: PropTypes.func,\n  isTagNav: PropTypes.bool,\n  navbarSelectedClassName: PropTypes.func,\n  newTag: PropTypes.object,\n  onClearSuggestions: PropTypes.func,\n  onGetSuggestions: PropTypes.func,\n  onMoveTag: PropTypes.func,\n  onNewTagSave: PropTypes.func,\n  onNewTagUpdate: PropTypes.func,\n  onTagClick: PropTypes.func,\n  onTagMouseOut: PropTypes.func,\n  onTagMouseOver: PropTypes.func,\n  onTagRemove: PropTypes.func,\n  onTagSave: PropTypes.func,\n  onTagSort: PropTypes.func,\n  onTagUpdate: PropTypes.func,\n  parentTag: ReactionPropTypes.Tag,\n  showBookmark: PropTypes.bool,\n  suggestions: PropTypes.arrayOf(PropTypes.object),\n  tags: ReactionPropTypes.arrayOfTags\n};\n\nexport default TagList;\n","export { default as Toolbar } from \"./toolbar\";\nexport { default as ToolbarGroup } from \"./toolbarGroup\";\nexport { default as ToolbarText } from \"./toolbarText\";\n","import React from \"react\";\nimport PropTypes from \"prop-types\";\nimport { registerComponent } from \"@reactioncommerce/reaction-components\";\n\nconst Toolbar = ({ children }) => (\n  <nav className=\"rui toolbar navbar-inverse\">\n    {children}\n  </nav>\n);\n\nToolbar.propTypes = {\n  attachment: PropTypes.string,\n  children: PropTypes.node\n};\n\nToolbar.defaultProps = {\n  attachment: \"top\"\n};\n\nregisterComponent(\"Toolbar\", Toolbar);\n\nexport default Toolbar;\n","import React from \"react\";\nimport PropTypes from \"prop-types\";\nimport classnames from \"classnames\";\nimport { registerComponent } from \"@reactioncommerce/reaction-components\";\n\n/**\n * Toobar Text\n * @param {Object} props component props\n * @return {node} react element node\n */\nconst ToolbarGroup = (props) => {\n  const baseClassName = classnames({\n    \"rui\": true,\n    \"toolbar-group\": true,\n    \"left\": props.firstChild,\n    \"right\": props.lastChild,\n    \"visible-mobile\": props.visibleOnMobile\n  }, props.className);\n\n  return (\n    <div className={baseClassName}>{props.children}</div>\n  );\n};\n\nToolbarGroup.propTypes = {\n  children: PropTypes.node,\n  className: PropTypes.oneOfType([PropTypes.object, PropTypes.string]),\n  firstChild: PropTypes.bool,\n  lastChild: PropTypes.bool,\n  visibleOnMobile: PropTypes.bool\n};\n\nregisterComponent(\"ToolbarGroup\", ToolbarGroup);\n\nexport default ToolbarGroup;\n","import React from \"react\";\nimport PropTypes from \"prop-types\";\nimport classnames from \"classnames\";\nimport { registerComponent } from \"@reactioncommerce/reaction-components\";\n\n/**\n * Toobar Text\n * @param {Object} props component props\n * @return {node} react element node\n */\nconst ToolbarText = (props) => {\n  const baseClassName = classnames({\n    \"navbar-text\": true\n  }, props.className);\n\n  return (\n    <div className={baseClassName}>{props.children}</div>\n  );\n};\n\nToolbarText.propTypes = {\n  children: PropTypes.node,\n  className: PropTypes.oneOfType([PropTypes.object, PropTypes.string])\n};\n\nregisterComponent(\"ToolbarText\", ToolbarText);\n\nexport default ToolbarText;\n","import React, { Component } from \"react\";\nimport PropTypes from \"prop-types\";\nimport TetherComponent from \"react-tether\";\nimport classnames from \"classnames\";\nimport { registerComponent } from \"@reactioncommerce/reaction-components\";\n\nclass Tooltip extends Component {\n  /**\n   * attachment\n   * @description Return the attachment for the tooltip or the default\n   * @return {String} attachment\n   */\n  get attachment() {\n    return this.props.attachment || Tooltip.defaultProps.attachment;\n  }\n\n  renderTooltip() {\n    if (this.props.tooltipContent) {\n      return (\n        <div className=\"tooltip-content\">\n          {this.props.tooltipContent}\n        </div>\n      );\n    }\n\n    return null;\n  }\n\n  render() {\n    return (\n      <TetherComponent\n        attachment={this.attachment}\n        classPrefix=\"tooltip\"\n        className={classnames({\n          \"tooltip-element\": true,\n          \"tooltip-open\": true,\n          \"tooltip-theme-arrows\": true\n        })}\n        constraints={[{\n          to: \"window\",\n          attachment: \"together\"\n        }]}\n      >\n        <div>\n          {this.props.children}\n        </div>\n        {this.renderTooltip()}\n      </TetherComponent>\n    );\n  }\n}\n\nTooltip.propTypes = {\n  attachment: PropTypes.string,\n  children: PropTypes.node,\n  tooltipContent: PropTypes.node\n};\n\nTooltip.defaultProps = {\n  attachment: \"bottom center\"\n};\n\nregisterComponent(\"Tooltip\", Tooltip);\n\nexport default Tooltip;\n","import React from \"react\";\nimport PropTypes from \"prop-types\";\nimport { registerComponent } from \"@reactioncommerce/reaction-components\";\nimport { formatPriceString } from \"/client/api\";\n\nconst Currency = ({ amount, priceRange, editable }) => (\n  <span itemProp=\"price\">{formatPriceString(amount || priceRange, editable)}</span>\n);\n\nCurrency.propTypes = {\n  amount: PropTypes.oneOfType([PropTypes.number, PropTypes.string]),\n  editable: PropTypes.bool,\n  priceRange: PropTypes.oneOfType([PropTypes.number, PropTypes.string])\n};\n\nregisterComponent(\"Currency\", Currency);\n\nexport default Currency;\n","export { default as Translation } from \"./translation\";\nexport { default as Currency } from \"./currency\";\n","import { camelCase } from \"lodash\";\nimport React from \"react\";\nimport PropTypes from \"prop-types\";\nimport { registerComponent } from \"@reactioncommerce/reaction-components\";\nimport { i18next } from \"/client/api\";\n\nconst Translation = ({ i18nKey, defaultValue, ...rest }) => {\n  const key = i18nKey || camelCase(defaultValue);\n  const translation = i18next.t(key, { defaultValue });\n\n  // i18next returns 'undefined' if the default value happens to be the key for a set of definitions\n  // ```\n  // \"components\": {\n  //    \"componentDef\": \"Translated Component Def\"\n  // }\n  // ```\n  // In this case, a request for i18next.t(\"components\", \"defaultValue\") will return undefined\n  // but i18next.t(\"components.componentDef\", \"defaultValue\") will return correctly\n  //\n  // This checks to see if translation is undefined and returns the default value instead\n  if (typeof translation === \"undefined\") {\n    return (\n      <span {...rest}>{defaultValue}</span>\n    );\n  }\n\n  return (\n    <span {...rest}>{translation}</span>\n  );\n};\n\nTranslation.propTypes = {\n  defaultValue: PropTypes.string,\n  i18nKey: PropTypes.string\n};\n\nregisterComponent(\"Translation\", Translation);\n\nexport default Translation;\n","export { Alerts, Alert } from \"./alerts\";\nexport { App } from \"./app\";\nexport { default as Icon } from \"./icon/icon\";\nexport { default as CircularProgress } from \"./progress/circularProgress\";\nexport { default as Divider } from \"./divider/divider\";\nexport { default as VerticalDivider } from \"./divider/verticalDivider\";\nexport { default as Items } from \"./items/items\";\nexport { default as Item } from \"./items/item\";\nexport { default as TextField } from \"./textfield/textfield\";\nexport { default as NumericInput } from \"./numericInput/numericInput\";\nexport { default as NumberTypeInput } from \"./numericInput/numberTypeInput\";\nexport { Button, IconButton, EditButton, VisibilityButton, Handle, ButtonSelect } from \"./button\";\nexport { Badge } from \"./badge\";\nexport { Translation, Currency } from \"./translation\";\nexport { default as Tooltip } from \"./tooltip/tooltip\";\nexport { Metadata, Metafield } from \"./metadata\";\nexport { TagList, TagItem } from \"./tags\";\nexport * from \"./cards\";\nexport { MediaGallery, MediaItem, MediaUploader } from \"./media\";\nexport { default as FlatButton } from \"./button/flatButton\";\nexport { SortableTable, SortableTableLegacy } from \"./table\";\nexport { Checkbox, RolloverCheckbox } from \"./checkbox\";\nexport { default as Loading } from \"./loading/loading\";\nexport * from \"./forms\";\nexport * from \"./toolbar\";\nexport * from \"./popover\";\nexport * from \"./menu\";\nexport * from \"./buttonGroup\";\nexport { Switch } from \"./switch\";\nexport { List, ListItem } from \"./list\";\nexport { default as Slider } from \"./slider/slider\";\nexport { default as MultiSelect } from \"./multiselect/multiselect\";\nexport { Overlay } from \"./modal\";\nexport * from \"./tabs\";\nexport { default as Select } from \"./select/select.react\";\nexport { default as ClickToCopy } from \"./clickToCopy/clickToCopy\";\nexport { ReactionAvatar } from \"./avatar\";\nexport * from \"./notFound\";\nexport { CalendarPicker } from \"./calendarPicker/calendarPicker\";\n","import { compose, withProps } from \"recompose\";\nimport { registerComponent, composeWithTracker } from \"@reactioncommerce/reaction-components\";\nimport { Alerts } from \"../components\";\nimport ReactionAlerts from \"/imports/plugins/core/layout/client/templates/layout/alerts/inlineAlerts\";\n\nconst handlers = {\n  handleAlertRemove(alert) {\n    ReactionAlerts.collection_.remove(alert._id);\n  },\n\n  handleAlertSeen(alert) {\n    ReactionAlerts.collection_.update(alert._id, {\n      $set: {\n        seen: true\n      }\n    });\n  }\n};\n\nfunction composer(props, onData) {\n  const alerts = ReactionAlerts.collection_.find({\n    \"options.placement\": props.placement || \"\",\n    \"options.id\": props.id || \"\"\n  }).fetch();\n\n  onData(null, { alerts });\n}\n\nregisterComponent(\"Alerts\", Alerts, [\n  composeWithTracker(composer),\n  withProps(handlers)\n]);\n\nexport default compose(\n  composeWithTracker(composer),\n  withProps(handlers)\n)(Alerts);\n","import { compose } from \"recompose\";\nimport { registerComponent, composeWithTracker } from \"@reactioncommerce/reaction-components\";\nimport { Reaction, Router } from \"/client/api\";\nimport { App } from \"../components\";\n\nfunction composer(props, onData) {\n  onData(null, {\n    isActionViewOpen: Reaction.isActionViewOpen(),\n    hasDashboardAccess: Reaction.hasDashboardAccessForAnyShop(),\n    currentRoute: Router.current()\n  });\n}\n\nregisterComponent(\"App\", App, [\n  composeWithTracker(composer)\n]);\n\nexport default compose(composeWithTracker(composer))(App);\n","import { registerComponent, composeWithTracker } from \"@reactioncommerce/reaction-components\";\nimport { Meteor } from \"meteor/meteor\";\nimport { Accounts } from \"/lib/collections\";\nimport { Reaction } from \"/client/api\";\nimport { ReactionAvatar } from \"../components/avatar\";\n\nconst composer = (props, onData) => {\n  const targetUserId = Reaction.Router.getQueryParam(\"userId\");\n  let account = Accounts.findOne(targetUserId);\n  let email;\n\n  // If an email is provided via props, use that email\n  if (props.email) {\n    ({ email } = props);\n  }\n\n  // If there is no email provided, no query param provide, and the avatar is for the current user, find their account\n  if (!email && !account && props.currentUser) {\n    account = Accounts.findOne(Meteor.userId());\n  }\n\n  // If we now have an account, and that account has an email address, return it\n  if (account && Array.isArray(account.emails)) {\n    const defaultEmail = account.emails.find((emailObj) => emailObj.provides === \"default\");\n    email = (defaultEmail && defaultEmail.address) || account.emails[0].address;\n  }\n  onData(null, { email });\n};\n\nregisterComponent(\"ReactionAvatar\", ReactionAvatar, composeWithTracker(composer));\n\nexport default composeWithTracker(composer)(ReactionAvatar);\n","import React, { Children, Component } from \"react\";\nimport PropTypes from \"prop-types\";\nimport { Components, registerComponent, composeWithTracker } from \"@reactioncommerce/reaction-components\";\nimport { Reaction } from \"/client/api\";\n\n\nclass EditContainer extends Component {\n  handleEditButtonClick = (event) => {\n    const { props } = this;\n\n    if (this.props.onEditButtonClick) {\n      const returnValue = this.props.onEditButtonClick(event, props);\n\n      if (returnValue === false) {\n        return returnValue;\n      }\n    }\n\n    Reaction.showActionView({\n      label: props.label,\n      i18nKeyLabel: props.i18nKeyLabel,\n      template: props.editView,\n      data: {\n        data: props.data,\n        viewProps: {\n          field: props.field\n        }\n      }\n    });\n\n    Reaction.state.set(\"edit/focus\", props.field);\n\n    return true;\n  }\n\n  handleVisibilityButtonClick = (event) => {\n    const { props } = this;\n\n    if (this.props.onVisibilityButtonClick) {\n      const returnValue = this.props.onVisibilityButtonClick(event, props);\n\n      if (returnValue === false) {\n        return returnValue;\n      }\n    }\n\n    return true;\n  }\n\n  renderVisibilityButton() {\n    if (this.props.showsVisibilityButton) {\n      return (\n        <span className=\"edit-container-item edit-container-item\">\n          <Components.VisibilityButton\n            onClick={this.handleVisibilityButtonClick}\n            toggleOn={this.props.data.isVisible}\n          />\n        </span>\n      );\n    }\n\n    return null;\n  }\n\n  renderEditButton() {\n    let status;\n    let tooltip;\n    let hasChange = false;\n\n    if (this.props.data.__draft && this.props.field) {\n      const draft = this.props.data.__draft;\n\n      if (Array.isArray(draft.diff)) {\n        for (const diff of draft.diff) {\n          let hasChangedField = false;\n\n          if (Array.isArray(this.props.field)) {\n            if (this.props.field.indexOf(diff.path[0]) >= 0) {\n              hasChangedField = true;\n            }\n          } else if (typeof this.props.field === \"string\" && this.props.field === diff.path[0]) {\n            hasChangedField = true;\n          }\n\n          if (hasChangedField) {\n            status = \"warning\";\n\n            tooltip = (\n              <span>\n                <Components.Translation defaultValue=\"Unpublished Changes\" i18nKey=\"revisions.unpublishedChanges\" />\n              </span>\n            );\n\n            hasChange = true;\n          }\n        }\n      }\n    } else if (this.props.data.__draft) {\n      status = \"warning\";\n\n      tooltip = (\n        <span>\n          <Components.Translation defaultValue=\"Unpublished Changes\" i18nKey=\"revisions.unpublishedChanges\" />\n        </span>\n      );\n    }\n\n    if (this.props.autoHideEditButton && hasChange === false) {\n      return null;\n    }\n\n    return (\n      <span className=\"edit-container-item edit-container-item\">\n        <Components.EditButton\n          onClick={this.handleEditButtonClick}\n          status={status}\n          tooltip={tooltip}\n        />\n      </span>\n    );\n  }\n\n  render() {\n    // Display edit button if the permissions allow it.\n    if (this.props.hasPermission) {\n      // If children were passed as props to this component,\n      // copy the children and inject the edit buttons\n      if (this.props.children) {\n        return React.cloneElement(this.props.children, {\n          visibilityButton: this.renderVisibilityButton(),\n          editButton: this.renderEditButton()\n        });\n      }\n\n      // Otherwise, render a container for the edit buttons\n      return (\n        <span className=\"rui edit-container\">\n          {this.renderVisibilityButton()}\n          {this.renderEditButton()}\n        </span>\n      );\n    }\n\n    // If permissions don't allow the edit buttons to be shown and there are\n    // no child elements, then cancel rendering.\n    if (!this.props.children) {\n      return null;\n    }\n\n    // If permissions don't allow the edit buttons to be shown and there are\n    // child elements, render them normally\n    return (\n      Children.only(this.props.children)\n    );\n  }\n}\n\nEditContainer.propTypes = {\n  autoHideEditButton: PropTypes.bool,\n  children: PropTypes.node,\n  data: PropTypes.object,\n  field: PropTypes.oneOfType([PropTypes.string, PropTypes.array]),\n  hasPermission: PropTypes.bool,\n  onEditButtonClick: PropTypes.func,\n  onVisibilityButtonClick: PropTypes.func,\n  showsVisibilityButton: PropTypes.bool\n};\n\nfunction composer(props, onData) {\n  let hasPermission;\n  const viewAs = Reaction.getUserPreferences(\"reaction-dashboard\", \"viewAs\", \"administrator\");\n\n  if (props.disabled === true || viewAs === \"customer\") {\n    hasPermission = false;\n  } else {\n    hasPermission = Reaction.hasPermission(props.permissions);\n  }\n\n  onData(null, {\n    hasPermission\n  });\n}\n\nregisterComponent(\"EditContainer\", EditContainer, composeWithTracker(composer));\n\nexport default composeWithTracker(composer)(EditContainer);\n","export { default as EditContainer } from \"./edit\";\nexport { default as AlertContainer } from \"./alerts\";\nexport { default as AppContainer } from \"./appContainer\";\nexport { default as ReactionAvatarContainer } from \"./avatar\";\nexport { default as InventoryBadgeContainer } from \"./inventoryBadge\";\nexport { default as SortableItem } from \"./sortableItem\";\nexport { default as MediaGalleryContainer } from \"./mediaGallery\";\nexport { default as TagListContainer } from \"./tagListContainer\";\n","import { registerComponent, composeWithTracker } from \"@reactioncommerce/reaction-components\";\nimport { InventoryBadge } from \"../components/badge\";\nimport { ReactionProduct } from \"/lib/api\";\n\nconst composer = (props, onData) => {\n  const { variant, soldOut } = props;\n  const { inventoryManagement, inventoryPolicy, lowInventoryWarningThreshold } = variant;\n  const inventoryQuantity = ReactionProduct.getVariantQuantity(variant);\n  let label = null;\n  let i18nKeyLabel = null;\n  let status = null;\n  // TODO: update this to use Catalog API.\n  if (inventoryManagement && !inventoryPolicy && inventoryQuantity === 0) {\n    status = \"info\";\n    label = \"Backorder\";\n    i18nKeyLabel = \"productDetail.backOrder\";\n  } else if (soldOut) {\n    status = \"danger\";\n    label = \"Sold Out!\";\n    i18nKeyLabel = \"productDetail.soldOut\";\n  } else if (inventoryManagement) {\n    if (lowInventoryWarningThreshold >= inventoryQuantity) {\n      status = \"warning\";\n      label = \"Limited Supply\";\n      i18nKeyLabel = \"productDetail.limitedSupply\";\n    }\n  }\n\n  onData(null, { ...props, label, i18nKeyLabel, status });\n};\n\nregisterComponent(\"InventoryBadge\", InventoryBadge, composeWithTracker(composer));\n\nexport default composeWithTracker(composer)(InventoryBadge);\n","import React, { Component } from \"react\";\nimport PropTypes from \"prop-types\";\nimport Measure from \"react-measure\";\nimport update from \"immutability-helper\";\nimport { compose } from \"recompose\";\nimport { registerComponent, composeWithTracker } from \"@reactioncommerce/reaction-components\";\nimport _ from \"lodash\";\nimport { FileRecord } from \"@reactioncommerce/file-collections\";\nimport { Meteor } from \"meteor/meteor\";\nimport MediaGallery from \"../components/media/mediaGallery\";\nimport { Logger, Reaction } from \"/client/api\";\nimport { ReactionProduct } from \"/lib/api\";\nimport { Revisions } from \"/lib/collections\";\nimport { isRevisionControlEnabled } from \"/imports/plugins/core/revisions/lib/api\";\nimport { Media } from \"/imports/plugins/core/files/client\";\n\nconst wrapComponent = (Comp) => (\n  class MediaGalleryContainer extends Component {\n    static propTypes = {\n      editable: PropTypes.bool,\n      id: PropTypes.string,\n      media: PropTypes.arrayOf(PropTypes.object),\n      placement: PropTypes.string\n    }\n\n    // Load first image as featuredImage\n    constructor(props) {\n      super(props);\n\n      this.state = {\n        dimensions: {\n          width: -1,\n          height: -1\n        },\n        featuredMedia: null,\n        media: null,\n        uploadProgress: null\n      };\n    }\n\n    componentWillReceiveProps(nextProps) {\n      // We need to do this logic only if we've temporarily set media in state for latency compensation\n      if (!this.state.media) return;\n\n      const previousMediaIds = (this.props.media || []).map(({ _id }) => _id);\n      const nextMediaIds = (nextProps.media || []).map(({ _id }) => _id);\n\n      // If added, moved, or reordered media items since last render, then we can assume\n      // we got updated data in subscription, clear state, and go back to using the prop\n      if (JSON.stringify(previousMediaIds) !== JSON.stringify(nextMediaIds)) {\n        this.setState({ media: null });\n      }\n    }\n\n    handleRemoveMedia = (media) => {\n      const imageUrl = media.url({ store: \"medium\" });\n      const mediaId = media._id;\n\n      Alerts.alert({\n        title: \"Remove Media?\",\n        type: \"warning\",\n        showCancelButton: true,\n        imageUrl,\n        imageHeight: 150\n      }, (isConfirm) => {\n        if (isConfirm) {\n          Meteor.call(\"media/remove\", mediaId, (error) => {\n            if (error) {\n              Alerts.toast(error.reason, \"warning\", {\n                autoHide: 10000\n              });\n            }\n          });\n        }\n        // show media as removed (since it will not disappear until changes are published\n      });\n    };\n\n    get media() {\n      return this.state.media || this.props.media;\n    }\n\n    handleMouseEnterMedia = (event, media) => {\n      const { editable } = this.props;\n\n      // It is confusing for an admin to know what the actual featured media is if it\n      // changes on hover of the other media.\n      if (!editable) {\n        this.setState({ featuredMedia: media });\n      }\n    };\n\n    handleMouseLeaveMedia = () => {\n      const { editable } = this.props;\n\n      // It is confusing for an admin to know what the actual featured media is if it\n      // changes on hover of the other media.\n      if (!editable) {\n        this.setState({ featuredMedia: null });\n      }\n    };\n\n    handleMoveMedia = (dragIndex, hoverIndex) => {\n      const mediaList = this.media;\n      const media = mediaList[dragIndex];\n\n      // Apply new sort order to variant list\n      const newMediaOrder = update(mediaList, {\n        $splice: [\n          [dragIndex, 1],\n          [hoverIndex, 0, media]\n        ]\n      });\n\n      // Set local state so the component does't have to wait for a round-trip\n      // to the server to get the updated list of variants\n      this.setState({ media: newMediaOrder });\n\n      // Save the updated positions\n      const sortedMediaIDs = newMediaOrder.map(({ _id }) => _id);\n      Meteor.call(\"media/updatePriorities\", sortedMediaIDs, (error) => {\n        if (error) {\n          // Go back to using media prop instead of media state so that it doesn't appear successful\n          this.setState({ media: null });\n\n          Alerts.toast(error.reason, \"warning\", {\n            autoHide: 10000\n          });\n        }\n      });\n    };\n\n    handleUpload = (files) => {\n      const productId = ReactionProduct.selectedProductId();\n      const variant = ReactionProduct.selectedVariant();\n      if (typeof variant !== \"object\") {\n        return Alerts.add(\"Select a variant\", \"danger\", { autoHide: true });\n      }\n      const variantId = variant._id;\n      const shopId = ReactionProduct.selectedProduct().shopId || Reaction.getShopId();\n      const userId = Meteor.userId();\n      let count = Media.findLocal({\n        \"metadata.variantId\": variantId\n      }).length;\n\n      for (const file of files) {\n        // Convert it to a FileRecord\n        const fileRecord = FileRecord.fromFile(file);\n\n        // Set metadata\n        fileRecord.metadata = {\n          ownerId: userId,\n          productId,\n          variantId,\n          shopId,\n          priority: count,\n          toGrid: 1 // we need number\n        };\n\n        count += 1;\n\n        // Listen for upload progress events\n        fileRecord.on(\"uploadProgress\", (uploadProgress) => {\n          this.setState({ uploadProgress });\n        });\n\n        // Do the upload. chunkSize is optional and defaults to 5MB\n        fileRecord.upload({})\n          // We insert only AFTER the server has confirmed that all chunks were uploaded\n          .then(() => {\n            Meteor.call(\"media/insert\", fileRecord.document, (error) => {\n              if (error) Alerts.toast(error.reason, \"error\");\n              this.setState({ uploadProgress: null });\n            });\n          })\n          .catch((error) => {\n            this.setState({ uploadProgress: null });\n            Logger.error(error);\n          });\n      }\n    };\n\n    render() {\n      const { width, height } = this.state.dimensions;\n\n      return (\n        <Measure\n          bounds\n          onResize={(contentRect) => {\n            this.setState({ dimensions: contentRect.bounds });\n          }}\n        >\n          {({ measureRef }) =>\n            <div ref={measureRef}>\n              <Comp\n                featuredMedia={this.state.featuredMedia}\n                onDrop={this.handleUpload}\n                onMouseEnterMedia={this.handleMouseEnterMedia}\n                onMouseLeaveMedia={this.handleMouseLeaveMedia}\n                onMoveMedia={this.handleMoveMedia}\n                onRemoveMedia={this.handleRemoveMedia}\n                {...this.props}\n                media={this.media}\n                mediaGalleryHeight={height}\n                mediaGalleryWidth={width}\n                uploadProgress={this.state.uploadProgress}\n              />\n            </div>\n          }\n        </Measure>\n      );\n    }\n  }\n);\n\nfunction fetchMediaRevisions() {\n  const productId = ReactionProduct.selectedProductId();\n  const mediaRevisions = Revisions.find({\n    \"parentDocument\": productId,\n    \"documentType\": \"image\",\n    \"workflow.status\": {\n      $nin: [\"revision/published\"]\n    }\n  }).fetch();\n  return mediaRevisions;\n}\n\n// resort the media in\nfunction sortMedia(media) {\n  const sortedMedia = _.sortBy(media, (m) => {\n    const { priority } = (m && m.metadata) || {};\n    if (!priority && priority !== 0) {\n      return 1000;\n    }\n    return priority;\n  });\n  return sortedMedia;\n}\n\n// Search through revisions and if we find one for the image, stick it on the object\nfunction appendRevisionsToMedia(props, media) {\n  if (!isRevisionControlEnabled() || !Reaction.hasPermission(props.permission || [\"createProduct\"])) {\n    return media;\n  }\n  const mediaRevisions = fetchMediaRevisions();\n  const newMedia = [];\n  for (const image of media) {\n    image.revision = undefined;\n    for (const revision of mediaRevisions) {\n      if (revision.documentId === image._id) {\n        image.revision = revision;\n        image.metadata.priority = revision.documentData.priority;\n      }\n    }\n    newMedia.push(image);\n  }\n  return sortMedia(newMedia);\n}\n\nfunction composer(props, onData) {\n  let media;\n  let editable;\n  const viewAs = Reaction.getUserPreferences(\"reaction-dashboard\", \"viewAs\", \"administrator\");\n\n  if (props.media) {\n    media = appendRevisionsToMedia(props, props.media);\n  }\n\n  if (viewAs === \"customer\") {\n    editable = false;\n  } else {\n    editable = Reaction.hasPermission(props.permission || [\"createProduct\"]);\n  }\n\n  onData(null, {\n    editable,\n    media\n  });\n}\n\nregisterComponent(\"MediaGallery\", MediaGallery, [\n  composeWithTracker(composer),\n  wrapComponent\n]);\n\nexport default compose(\n  composeWithTracker(composer),\n  wrapComponent\n)(MediaGallery);\n","import React from \"react\";\nimport PropTypes from \"prop-types\";\nimport { DragSource, DropTarget } from \"react-dnd\";\n\n/**\n * Specifies the props to inject into your component.\n * @param {DragSourceConnector} connect An onject containing functions to assign roles to a component's DOM nodes\n * @param {DragSourceMonitor} monitor An object containing functions that return information about drag state\n * @return {Object} Props for drag source\n */\nfunction collectDropSource(connect, monitor) {\n  return {\n    connectDragSource: connect.dragSource(),\n    isDragging: monitor.isDragging()\n  };\n}\n\nfunction collectDropTarget(connect) {\n  return {\n    connectDropTarget: connect.dropTarget()\n  };\n}\n\nconst cardSource = {\n  beginDrag(props) {\n    const { index } = props;\n    return {\n      index\n    };\n  }\n};\n\nconst cardTarget = {\n  hover(props, monitor) {\n    const dragIndex = monitor.getItem().index;\n    const hoverIndex = props.index;\n\n    // Don't replace items with themselves\n    if (dragIndex === hoverIndex) {\n      return;\n    }\n\n    // Time to actually perform the action\n    props.onMove(dragIndex, hoverIndex);\n\n    // Note: we're mutating the monitor item here!\n    // Generally it's better to avoid mutations,\n    // but it's good here for the sake of performance\n    // to avoid expensive index searches.\n    monitor.getItem().index = hoverIndex;\n  },\n  drop(props) {\n    if (typeof props.onDrop === \"function\") props.onDrop();\n  }\n};\n\nexport default function ComposeSortableItem(itemType) {\n  return function (SortableItemComponent) {\n    const SortableItem = (props) => <SortableItemComponent {...props} />;\n\n    SortableItem.contextTypes = {\n      dragDropManager: PropTypes.object.isRequired\n    };\n\n    SortableItem.propTypes = {\n      // Injected by React DnD:\n      connectDragSource: PropTypes.func.isRequired,\n      connectDropTarget: PropTypes.func.isRequired,\n      isDragging: PropTypes.bool.isRequired\n    };\n\n    let decoratedComponent = SortableItem;\n    decoratedComponent = DragSource(itemType, cardSource, collectDropSource)(decoratedComponent);\n    decoratedComponent = DropTarget(itemType, cardTarget, collectDropTarget)(decoratedComponent);\n\n    return decoratedComponent;\n  };\n}\n","import React, { Component } from \"react\";\nimport PropTypes from \"prop-types\";\nimport _ from \"lodash\";\nimport update from \"immutability-helper\";\nimport { compose } from \"recompose\";\nimport { registerComponent, composeWithTracker, Components } from \"@reactioncommerce/reaction-components\";\nimport { Meteor } from \"meteor/meteor\";\nimport { Reaction, i18next } from \"/client/api\";\nimport TagList from \"../components/tags/tagList\";\nimport { Tags } from \"/lib/collections\";\nimport { getTagIds } from \"/lib/selectors/tags\";\n\nfunction updateSuggestions(term, { excludeTags }) {\n  const slug = Reaction.getSlug(term);\n\n  const selector = {\n    slug: new RegExp(slug, \"i\")\n  };\n\n  if (Array.isArray(excludeTags)) {\n    selector._id = {\n      $nin: excludeTags\n    };\n  }\n\n  const tags = Tags.find(selector).map((tag) => ({\n    label: tag.name\n  }));\n\n  return tags;\n}\n\nconst wrapComponent = (Comp) => (\n  class TagListContainer extends Component {\n    static propTypes = {\n      children: PropTypes.node,\n      editable: PropTypes.bool,\n      hasPermission: PropTypes.bool,\n      product: PropTypes.object,\n      tagIds: PropTypes.arrayOf(PropTypes.string),\n      tagsAsArray: PropTypes.arrayOf(PropTypes.object),\n      tagsByKey: PropTypes.object\n    }\n\n    constructor(props) {\n      super(props);\n\n      this.state = {\n        tagIds: props.tagIds || [],\n        tagsByKey: props.tagsByKey || {},\n        newTag: {\n          name: \"\"\n        },\n        suggestions: []\n      };\n\n      this.debounceUpdateTagOrder = _.debounce(() => {\n        Meteor.call(\n          \"products/updateProductField\",\n          this.props.product._id,\n          \"hashtags\",\n          this.state.tagIds\n        );\n      }, 500);\n    }\n\n    componentWillReceiveProps(nextProps) {\n      this.setState({\n        tagIds: nextProps.tagIds || [],\n        tagsByKey: nextProps.tagsByKey || {}\n      });\n    }\n\n    get productId() {\n      if (this.props.product) {\n        return this.props.product._id;\n      }\n      return null;\n    }\n\n    canSaveTag(tag) {\n      // Blank tags cannot be saved\n      if (typeof tag.name === \"string\" && tag.name.trim().length === 0) {\n        return false;\n      }\n\n      // If the tag does not have an id, then allow the save\n      if (!tag._id) {\n        return true;\n      }\n\n      // Get the original tag from the props\n      // Tags from props are not mutated, and come from an outside source\n      const originalTag = this.props.tagsByKey[tag._id];\n\n      if (originalTag && originalTag.name !== tag.name) {\n        return true;\n      }\n\n      return false;\n    }\n\n    handleNewTagSave = (tag) => {\n      if (this.productId && this.canSaveTag(tag)) {\n        Meteor.call(\"products/updateProductTags\", this.productId, tag.name, null, (error) => {\n          if (error) {\n            return Alerts.toast(i18next.t(\"productDetail.tagExists\"), \"error\");\n          }\n\n          this.setState({\n            newTag: {\n              name: \"\"\n            },\n            suggestions: []\n          });\n\n          return true;\n        });\n      }\n    }\n\n    handleNewTagUpdate = (tag) => {\n      this.setState({\n        newTag: tag\n      });\n    }\n\n    handleTagSave = (tag) => {\n      if (this.productId && this.canSaveTag(tag)) {\n        Meteor.call(\"products/updateProductTags\", this.productId, tag.name, tag._id, (error) => {\n          if (error) {\n            return Alerts.toast(i18next.t(\"productDetail.tagExists\"), \"error\");\n          }\n\n          this.setState({\n            suggestions: []\n          });\n\n          return true;\n        });\n      }\n    }\n\n    handleTagRemove = (tag) => {\n      if (this.productId) {\n        Meteor.call(\"products/removeProductTag\", this.productId, tag._id, (error) => {\n          if (error) {\n            Alerts.toast(i18next.t(\"productDetail.tagInUse\"), \"error\");\n          }\n        });\n      }\n    }\n\n    handleTagUpdate = (tag) => {\n      const newState = update(this.state, {\n        tagsByKey: {\n          [tag._id]: {\n            $set: tag\n          }\n        }\n      });\n\n      this.setState(newState);\n    }\n\n    handleMoveTag = (dragIndex, hoverIndex) => {\n      const tag = this.state.tagIds[dragIndex];\n\n      // Apply new sort order to variant list\n      const newState = update(this.state, {\n        tagIds: {\n          $splice: [\n            [dragIndex, 1],\n            [hoverIndex, 0, tag]\n          ]\n        }\n      });\n\n      // Set local state so the component does't have to wait for a round-trip\n      // to the server to get the updated list of variants\n      this.setState(newState, () => {\n        // Save the updated positions\n        if (this.props.product) {\n          this.debounceUpdateTagOrder();\n        }\n      });\n    }\n\n    handleGetSuggestions = (suggestionUpdateRequest) => {\n      const suggestions = updateSuggestions(\n        suggestionUpdateRequest.value,\n        { excludeTags: this.state.tagIds }\n      );\n\n      this.setState({\n        suggestions\n      });\n    }\n\n    handleClearSuggestions = () => {\n      this.setState({\n        suggestions: []\n      });\n    }\n\n    get tags() {\n      if (this.props.editable) {\n        return this.state.tagIds.map((tagId) => this.state.tagsByKey[tagId]);\n      }\n\n      return this.props.tagsAsArray;\n    }\n\n    render() {\n      return (\n        <Components.DragDropProvider>\n          <Comp\n            newTag={this.state.newTag}\n            onClick={this.handleEditButtonClick}\n            onClearSuggestions={this.handleClearSuggestions}\n            onGetSuggestions={this.handleGetSuggestions}\n            onMoveTag={this.handleMoveTag}\n            onNewTagSave={this.handleNewTagSave}\n            onNewTagUpdate={this.handleNewTagUpdate}\n            onTagRemove={this.handleTagRemove}\n            onTagSave={this.handleTagSave}\n            onTagUpdate={this.handleTagUpdate}\n            suggestions={this.state.suggestions}\n            tags={this.tags}\n            tooltip=\"Unpublished changes\"\n            {...this.props}\n          />\n        </Components.DragDropProvider>\n      );\n    }\n  }\n);\n\nfunction composer(props, onData) {\n  let { tags } = props;\n\n  if (props.product) {\n    if (_.isArray(props.product.hashtags)) {\n      tags = _.map(props.product.hashtags, (id) => Tags.findOne(id));\n    }\n  }\n\n  let isEditable = props.editable;\n\n  if (typeof isEditable !== \"boolean\") {\n    isEditable = Reaction.hasPermission(props.permissions);\n  }\n\n  const tagsByKey = {};\n\n  if (Array.isArray(tags)) {\n    for (const tag of tags) {\n      if (tag) {\n        tagsByKey[tag._id] = tag;\n      }\n    }\n  }\n\n  onData(null, {\n    isProductTags: props.product !== undefined,\n    tagIds: getTagIds({ tags }),\n    tagsByKey,\n    tagsAsArray: tags,\n    editable: isEditable\n  });\n}\n\nregisterComponent(\"TagList\", TagList, [\n  composeWithTracker(composer),\n  wrapComponent\n]);\n\nexport default compose(\n  composeWithTracker(composer),\n  wrapComponent\n)(TagList);\n","import _ from \"lodash\";\nimport classnames from \"classnames\";\n\nexport const templateClassName = (templateInstance, defaults, key) => {\n  const classNameData = templateInstance.data.classNames || {};\n  const classNameOverrides = classNameData[key];\n\n  if (_.isString(classNameOverrides)) {\n    return classnames(defaults, classNameOverrides);\n  }\n\n  return classnames({\n    ...defaults || {},\n    ...classNameOverrides\n  });\n};\n","// https://guide.meteor.com/react.html#using-with-blaze\nimport React from \"react\";\nimport ReactDOM from \"react-dom\";\nimport _ from \"lodash\";\nimport { Template } from \"meteor/templating\";\nimport { Blaze } from \"meteor/blaze\";\n\n// Empty template; logic in `onRendered` below\nTemplate.React = new Template(\"Template.React\", () => []);\n\n\nTemplate.React.onRendered(function () {\n  const parentTemplate = parentTemplateName();\n  const container = this.firstNode.parentNode;\n  this.container = container;\n\n  this.autorun(() => {\n    const data = Blaze.getData();\n\n    const comp = data && data.component;\n    if (!comp) {\n      throw new Error(`In template ${parentTemplate}, call to \\`{{> React ... }}\\` missing \\`component\\` argument.`);\n    }\n\n    const props = _.omit(data, \"component\");\n    ReactDOM.render(React.createElement(comp, props), container);\n  });\n});\n\nTemplate.React.onDestroyed(function () {\n  if (this.container) {\n    ReactDOM.unmountComponentAtNode(this.container);\n  }\n});\n\n// Gets the name of the template inside of which this instance of `{{> React ...}}`\n// is being used. Used to print more explicit error messages\nfunction parentTemplateName() {\n  let view = Blaze.getView();\n  if (!view || view.name !== \"Template.React\") {\n    throw new Error(\"Unexpected: called outside of Template.React\");\n  }\n  // find the first parent view which is a template or body\n  view = view.parentView;\n  while (view) {\n    const m = view.name.match(/^Template\\.(.*)/);\n    // check `view.name.match(/^Template\\./)` because iron-router (and\n    // maybe other packages) create a view named \"yield\" that has the\n    // `template` property set\n    if (view.template && view.name && m) {\n      return m[1];\n    } else if (view.name === \"body\") {\n      return \"<body>\";\n    }\n\n    view = view.parentView;\n  }\n\n  // not sure when this could happen\n  return \"<unknown>\";\n}\n","import React from \"react\";\nimport PropTypes from \"prop-types\";\n\nexport default function Admin() {\n  return (Component) => {\n    const AdminComponent = (props, context) => {\n      const { adminContext } = context;\n\n      return <Component adminContext={adminContext} {...props} />;\n    };\n\n    AdminComponent.contextTypes = {\n      adminContext: PropTypes.object.isRequired\n    };\n\n    return AdminComponent;\n  };\n}\n","import React, { Component, Children } from \"react\"; // eslint-disable-line\nimport PropTypes from \"prop-types\";\nimport { composeWithTracker } from \"@reactioncommerce/reaction-components\";\n\nclass AdminContextProvider extends Component {\n  static childContextTypes = {\n    adminContext: PropTypes.object.isRequired\n  };\n\n  static propTypes = {\n    adminContext: PropTypes.object.isRequired,\n    children: PropTypes.node\n  };\n\n  getChildContext() {\n    const { adminContext } = this.props;\n    return { adminContext };\n  }\n\n  render() {\n    // `Children.only` enables us not to add a <div /> for nothing\n    return Children.only(this.props.children);\n  }\n}\n\nfunction composer(props, onData) {\n  onData(null, {\n    adminContext: {\n      isAdminArea: true,\n      adminClassName: {\n        admin: true\n      }\n    }\n  });\n}\n\n\nexport default composeWithTracker(composer)(AdminContextProvider);\n","import { Component, Children } from \"react\";\nimport PropTypes from \"prop-types\";\nimport { DragDropManager } from \"dnd-core\";\nimport HTML5Backend from \"react-dnd-html5-backend\";\nimport { registerComponent } from \"@reactioncommerce/reaction-components\";\n\nconst defaultManager = new DragDropManager(HTML5Backend);\n\nclass DragDropProvider extends Component {\n  getChildContext() {\n    return {\n      dragDropManager: defaultManager\n    };\n  }\n\n  render() {\n    // `Children.only` enables us not to add a <div /> for nothing\n    return Children.only(this.props.children);\n  }\n}\n\nDragDropProvider.childContextTypes = {\n  dragDropManager: PropTypes.object.isRequired\n};\n\nDragDropProvider.propTypes = {\n  children: PropTypes.node\n};\n\nregisterComponent(\"DragDropProvider\", DragDropProvider);\n\nexport default DragDropProvider;\n","export { default as Admin } from \"./admin\";\nexport { default as AdminContextProvider } from \"./adminContextProvider\";\nexport { default as Translatable } from \"./translatable\";\nexport { default as TranslationProvider } from \"./translationProvider\";\nexport { default as DragDropProvider } from \"./dragDropProvider\";\n","import React from \"react\";\nimport PropTypes from \"prop-types\";\n\nexport default function Translatable() {\n  return (Component) => {\n    const TranslatableComponent = (props, context) => {\n      const { translations } = context;\n\n      return <Component translations={translations} {...props} />;\n    };\n\n    TranslatableComponent.contextTypes = {\n      translations: PropTypes.object.isRequired\n    };\n\n    return TranslatableComponent;\n  };\n}\n","import { Session } from \"meteor/session\";\nimport React, { Component, Children } from \"react\"; // eslint-disable-line\nimport PropTypes from \"prop-types\";\nimport { composeWithTracker } from \"@reactioncommerce/reaction-components\";\nimport { i18nextDep } from \"/client/api\";\n\nclass TranslationProvider extends Component {\n  getChildContext() {\n    const { translations } = this.props;\n    return { translations };\n  }\n  render() {\n    // `Children.only` enables us not to add a <div /> for nothing\n    return Children.only(this.props.children);\n  }\n}\n\nTranslationProvider.childContextTypes = {\n  translations: PropTypes.object.isRequired\n};\n\nTranslationProvider.propTypes = {\n  children: PropTypes.node,\n  translations: PropTypes.object.isRequired\n};\n\nfunction composer(props, onData) {\n  i18nextDep.depend();\n\n  onData(null, {\n    translations: {\n      language: Session.get(\"language\")\n    }\n  });\n}\n\n\nexport default composeWithTracker(composer)(TranslationProvider);\n","export * from \"./helpers/helpers\";\nexport * from \"./components\";\nexport * from \"./containers\";\nexport * from \"./providers\";\n\nimport \"./helpers/react-template-helper\";\n\n// Import blaze components\nimport \"./components/button/button.html\";\nimport \"./components/button/button.js\";\n\nimport \"./components/cards/cardGroup.html\";\nimport \"./components/cards/cards.html\";\nimport \"./components/cards/cards.js\";\n\nimport \"./components/numericInput/numericInput.js\";\n\nimport \"./components/textfield/textfield.html\";\n\n// Safe css import for npm package\nimport \"nouislider-algolia-fork/src/nouislider.css\";\nimport \"nouislider-algolia-fork/src/nouislider.pips.css\";\nimport \"nouislider-algolia-fork/src/nouislider.tooltips.css\";\n","import { Template } from \"meteor/templating\";\nimport { Meteor } from \"meteor/meteor\";\n\nTemplate.catalogSettings.helpers({\n  checked(enabled) {\n    if (enabled === true) {\n      return \"checked\";\n    }\n    return \"\";\n  },\n  shown(enabled) {\n    if (enabled !== true) {\n      return \"hidden\";\n    }\n    return \"\";\n  }\n});\n\nTemplate.catalogSettings.events({\n  /**\n   * settings update enabled status for services on change\n   * @param  {event} event    jQuery Event\n   * @return {void}\n   */\n  \"change input[name=enabled]\": (event) => {\n    const settingsKey = event.target.getAttribute(\"data-key\");\n    const packageId = event.target.getAttribute(\"data-id\");\n    const fields = [{\n      property: \"enabled\",\n      value: event.target.checked\n    }];\n\n    Meteor.call(\"registry/update\", packageId, settingsKey, fields);\n    Meteor.call(\"shop/togglePackage\", packageId, !event.target.checked);\n  }\n});\n","import \"./templates/settings.html\";\nimport \"./templates/settings.js\";\n","import { Template } from \"meteor/templating\";\nimport EmailLogs from \"../containers/emailLogs\";\nimport EmailConfig from \"../containers/emailConfig\";\n\n\nTemplate.emailSettings.helpers({\n  EmailConfig() {\n    return {\n      component: EmailConfig\n    };\n  },\n  EmailLogs() {\n    return {\n      component: EmailLogs\n    };\n  }\n});\n","export { default as settings } from \"./settings\";\n","import _ from \"lodash\";\nimport { Meteor } from \"meteor/meteor\";\nimport Alert from \"sweetalert2\";\nimport { i18next } from \"/client/api\";\n\nexport default {\n  /**\n   * Save email settings\n   * @param {Object} settings - object of mail provider settings\n   * @param {Function} callback - optional callback\n   * @return {Boolean} returns true if all fields provided and update method called\n   */\n  saveSettings(settings, callback) {\n    const { service, host, port, user, password } = settings;\n\n    if (!service) {\n      Alert(i18next.t(\"app.error\"), i18next.t(\"mail.alerts.missingService\"), \"error\");\n      return callback();\n    }\n\n    if (service !== \"custom\" && service !== \"Maildev\" && (!user || !password)) {\n      Alert(i18next.t(\"app.error\"), i18next.t(\"mail.alerts.userPassRequired\", { service }), \"error\");\n      return callback();\n    }\n\n    if (service === \"custom\" && (!host || !port)) {\n      Alert(i18next.t(\"app.error\"), i18next.t(\"mail.alerts.allFieldsRequired\"), \"error\");\n      return callback();\n    }\n\n    // make sure port is a Number\n    settings.port = Number(settings.port);\n\n    if (isNaN(settings.port)) {\n      Alert(i18next.t(\"app.error\"), i18next.t(\"mail.alerts.portNaN\"), \"error\");\n      return callback();\n    }\n\n    const save = () => {\n      Meteor.call(\"email/saveSettings\", _.pick(settings, [\"service\", \"host\", \"port\", \"user\", \"password\"]), (err) => {\n        if (err) {\n          return Alert(\n            i18next.t(\"app.error\"),\n            i18next.t(\"mail.alerts.saveFailed\", { error: err.reason }),\n            \"error\"\n          );\n        }\n        return Alert({\n          title: i18next.t(\"app.success\"),\n          text: i18next.t(\"mail.alerts.saveSuccess\"),\n          type: \"success\",\n          timer: 1700\n        }).catch(() => null);\n      });\n    };\n\n    // check if the settings work first\n    Meteor.call(\"email/verifySettings\", settings, (error) => {\n      callback();\n      // if the connection fails\n      if (error) {\n        Alert({\n          title: i18next.t(\"mail.alerts.connectionFailed\"),\n          text: i18next.t(\"mail.alerts.saveAnyway\"),\n          type: \"warning\",\n          showCancelButton: true,\n          cancelButtonText: i18next.t(\"app.cancel\"),\n          confirmButtonColor: \"#DD6B55\",\n          confirmButtonText: i18next.t(\"app.save\")\n        }).then(() => save()).catch(() => true);\n      } else {\n        save();\n      }\n    });\n\n    return true;\n  }\n};\n","import React, { Component } from \"react\";\nimport PropTypes from \"prop-types\";\nimport { Components } from \"@reactioncommerce/reaction-components\";\nimport { Translation } from \"/imports/plugins/core/ui/client/components\";\n\nclass EmailConfig extends Component {\n  constructor(props) {\n    super(props);\n\n    this.state = {\n      showPassword: false,\n      showSettings: false\n    };\n\n    this.togglePassword = this.togglePassword.bind(this);\n    this.toggleSettings = this.toggleSettings.bind(this);\n  }\n\n\n  togglePassword() {\n    this.setState({\n      showPassword: !this.state.showPassword\n    });\n  }\n\n  toggleSettings() {\n    this.setState({\n      showSettings: !this.state.showSettings\n    });\n  }\n\n  renderSettingsDisplay() {\n    const { settings, status } = this.props;\n    const { service, host, port, user, password } = settings;\n    const { showPassword } = this.state;\n\n    const NotSet = () => <span data-i18n=\"admin.settings.fieldNotSet\">Not set</span>;\n\n    return (\n      <div>\n        <div className=\"pull-right\">\n          <Components.IconButton\n            icon=\"fa fa-gear\"\n            onClick={this.toggleSettings}\n          />\n        </div>\n        <div className=\"email-config-status\">\n          <strong><Translation defaultValue={\"Status\"} i18nKey={\"admin.settings.status\"} /></strong>: {status ?\n            <i className={`fa fa-circle ${status}`} />\n            : <i className={\"fa fa-refresh fa-spin\"} />}\n        </div>\n        <div>\n          <strong><Translation defaultValue={\"Service\"} i18nKey={\"admin.settings.service\"} /></strong>: {service || <NotSet/>}\n        </div>\n        <div className=\"truncate\">\n          <strong><Translation defaultValue={\"Host\"} i18nKey={\"admin.settings.host\"} /></strong>: {host || <NotSet/>}\n        </div>\n        <div>\n          <strong><Translation defaultValue={\"Port\"} i18nKey={\"admin.settings.port\"} /></strong>: {port || <NotSet/>}\n        </div>\n        <div className=\"truncate\">\n          <strong><Translation defaultValue={\"User\"} i18nKey={\"admin.settings.user\"} /></strong>: {user || <NotSet/>}\n        </div>\n        <div>\n          <strong><Translation defaultValue={\"Password\"} i18nKey={\"admin.settings.password\"} /></strong>:&nbsp;&nbsp;\n          {password ?\n            <span>\n              {showPassword ? password : \"********\"}\n              <Components.Button\n                className={{\n                  \"btn\": false,\n                  \"btn-default\": false\n                }}\n                tagName=\"span\"\n                onClick={this.togglePassword}\n              >\n                <span style={{ marginLeft: \"1rem\" }}>\n                  <em>{showPassword ?\n                    <span data-i18n=\"admin.settings.passwordHide\">Hide</span>\n                    : <span data-i18n=\"admin.settings.passwordShow\">Show</span>}\n                  </em>\n                </span>\n              </Components.Button>\n            </span>\n            : <NotSet/>}\n        </div>\n      </div>\n    );\n  }\n\n  renderSettingsUpdate() {\n    const { showSettings } = this.state;\n\n    if (showSettings === true) {\n      return (\n        <div>\n          <hr />\n          <h4>\n            <Translation\n              defaultValue={\"Edit Settings\"}\n              i18nKey={\"admin.settings.editSettings\"}\n            />\n          </h4>\n          <Components.EmailSettings showSettings={showSettings} />\n        </div>\n      );\n    }\n\n    return null;\n  }\n\n  render() {\n    return (\n      <Components.CardGroup>\n        <Components.Card>\n          <Components.CardHeader\n            actAsExpander={true}\n            i18nKeyTitle=\"admin.settings.mailProvider\"\n            title=\"Mail Provider\"\n          />\n          <Components.CardBody expandable={true}>\n            {this.renderSettingsDisplay()}\n            {this.renderSettingsUpdate()}\n          </Components.CardBody>\n        </Components.Card>\n      </Components.CardGroup>\n    );\n  }\n}\n\nEmailConfig.propTypes = {\n  settings: PropTypes.shape({\n    host: PropTypes.string,\n    password: PropTypes.string,\n    port: PropTypes.oneOfType([\n      PropTypes.number,\n      PropTypes.string\n    ]),\n    service: PropTypes.string,\n    user: PropTypes.string\n  }),\n  status: PropTypes.string\n};\n\nexport default EmailConfig;\n","import React, { Component } from \"react\";\nimport PropTypes from \"prop-types\";\nimport { Components } from \"@reactioncommerce/reaction-components\";\nimport { SortableTable } from \"/imports/plugins/core/ui/client/components\";\nimport { Jobs } from \"/lib/collections\";\nimport { i18next } from \"/client/api\";\n\n\nclass EmailLogs extends Component {\n  renderEmailsTable() {\n    const filteredFields = [\"data.to\", \"updated\", \"data.subject\", \"status\"];\n    const noDataMessage = i18next.t(\"admin.logs.noEmails\");\n\n    // helper adds a class to every grid row\n    const customRowMetaData = {\n      bodyCssClassName: () => \"email-grid-row\"\n    };\n\n    // add i18n handling to headers\n    const customColumnMetadata = [];\n    filteredFields.forEach((field) => {\n      let colWidth;\n      let colStyle;\n      let colClassName;\n\n      if (field === \"status\") {\n        colWidth = 70;\n        colStyle = { textAlign: \"center\" };\n        colClassName = \"email-log-status\";\n      }\n\n      // https://react-table.js.org/#/story/cell-renderers-custom-components\n      const columnMeta = {\n        accessor: field,\n        Header: i18next.t(`admin.logs.headers.${field}`),\n        Cell: (row) => (\n          <Components.EmailTableColumn row={row} />\n        ),\n        className: colClassName,\n        width: colWidth,\n        style: colStyle\n      };\n      customColumnMetadata.push(columnMeta);\n    });\n\n\n    return (\n      <SortableTable\n        publication=\"Emails\"\n        collection={Jobs}\n        matchingResultsCount=\"emails-count\"\n        showFilter={true}\n        rowMetadata={customRowMetaData}\n        filteredFields={filteredFields}\n        noDataMessage={noDataMessage}\n        columnMetadata={customColumnMetadata}\n        externalLoadingComponent={Components.Loading}\n      />\n    );\n  }\n\n  render() {\n    return (\n      <Components.CardGroup>\n        <Components.Card>\n          <Components.CardHeader\n            actAsExpander={true}\n            i18nKeyTitle=\"admin.logs.headers.emailLogs\"\n            title=\"Email Logs\"\n          />\n          <Components.CardBody expandable={true}>\n            {this.renderEmailsTable()}\n          </Components.CardBody>\n        </Components.Card>\n      </Components.CardGroup>\n    );\n  }\n}\n\nEmailLogs.propTypes = {\n  emails: PropTypes.arrayOf(PropTypes.shape({\n    _id: PropTypes.string.isRequired,\n    created: PropTypes.instanceOf(Date).isRequired,\n    data: PropTypes.shape({\n      to: PropTypes.string.isRequired,\n      subject: PropTypes.string.isRequired\n    }),\n    status: PropTypes.string.isRequired\n  })),\n  limit: PropTypes.string\n};\n\nexport default EmailLogs;\n","import React, { Component } from \"react\";\nimport PropTypes from \"prop-types\";\nimport { Components } from \"@reactioncommerce/reaction-components\";\n\nclass EmailSettings extends Component {\n  constructor(props) {\n    super(props);\n\n    this.state = {\n      settings: props.settings,\n      hasAuth: !(props.settings.service === \"Maildev\"),\n      isSaving: false\n    };\n\n    this.handleStateChange = this.handleStateChange.bind(this);\n    this.handleSubmit = this.handleSubmit.bind(this);\n    this.handleSelect = this.handleSelect.bind(this);\n  }\n\n  handleStateChange(e) {\n    const { settings } = this.state;\n    settings[e.target.name] = e.target.value;\n    this.setState({ settings });\n  }\n\n  handleSubmit(e) {\n    e.preventDefault();\n    const { saveSettings, providers } = this.props;\n    const { settings } = this.state;\n    let newSettings = settings;\n    if (settings.service !== \"custom\") {\n      newSettings = Object.assign({}, settings, providers[settings.service]);\n    }\n    this.setState({ isSaving: true });\n    saveSettings(newSettings, () => this.setState({ isSaving: false }));\n  }\n\n  handleSelect(service) {\n    this.setState({ settings: { service }, hasAuth: !(service === \"Maildev\") });\n  }\n\n  render() {\n    const { providers } = this.props;\n    const { settings, hasAuth, isSaving } = this.state;\n\n    const providerNames = Object.keys(providers);\n\n    const emailProviders = providerNames.map((name) => (\n      { label: name, value: name }\n    ));\n\n    emailProviders.unshift({ label: \"Custom\", value: \"custom\" });\n\n    return (\n      <form onSubmit={this.handleSubmit}>\n        <Components.Select\n          clearable={false}\n          label=\"Service\"\n          i18nKeyLabel=\"admin.settings.providerName\"\n          placeholder=\"Select a Service\"\n          i18nKeyPlaceholder=\"admin.settings.selectService\"\n          name=\"service\"\n          onChange={this.handleSelect}\n          options={emailProviders}\n          value={settings.service || \"\"}\n        />\n        {settings.service === \"custom\" &&\n          <div>\n            <Components.TextField\n              label=\"Host\"\n              i18nKeyLabel=\"admin.settings.host\"\n              type=\"text\"\n              name=\"host\"\n              value={settings.host}\n              onChange={this.handleStateChange}\n            />\n            <Components.TextField\n              label=\"Port\"\n              i18nKeyLabel=\"admin.settings.port\"\n              type=\"text\"\n              name=\"port\"\n              value={settings.port}\n              onChange={this.handleStateChange}\n            />\n          </div>\n        }\n        {hasAuth &&\n          <div>\n            <Components.TextField\n              label=\"User\"\n              i18nKeyLabel=\"admin.settings.user\"\n              type=\"text\"\n              name=\"user\"\n              value={settings.user}\n              onChange={this.handleStateChange}\n            />\n            <Components.TextField\n              label=\"Password\"\n              i18nKeyLabel=\"admin.settings.password\"\n              type=\"password\"\n              name=\"password\"\n              value={settings.password}\n              onChange={this.handleStateChange}\n            />\n          </div>\n        }\n        <Components.Button\n          primary={true}\n          bezelStyle=\"solid\"\n          className=\"pull-right\"\n          type=\"submit\"\n          disabled={isSaving}\n        >\n          {isSaving ?\n            <i className=\"fa fa-refresh fa-spin\"/>\n            : <span data-i18n=\"app.save\">Save</span>}\n        </Components.Button>\n      </form>\n    );\n  }\n}\n\nEmailSettings.propTypes = {\n  providers: PropTypes.object.isRequired,\n  saveSettings: PropTypes.func.isRequired,\n  settings: PropTypes.shape({\n    service: PropTypes.string,\n    host: PropTypes.string,\n    port: PropTypes.oneOfType([PropTypes.string, PropTypes.number]),\n    user: PropTypes.string,\n    password: PropTypes.string\n  })\n};\n\nexport default EmailSettings;\n","import React, { Component } from \"react\";\nimport PropTypes from \"prop-types\";\nimport { Meteor } from \"meteor/meteor\";\nimport { Components, registerComponent, withMoment } from \"@reactioncommerce/reaction-components\";\nimport { i18next } from \"/client/api\";\n\nclass EmailTableColumn extends Component {\n  static propTypes = {\n    data: PropTypes.object,\n    moment: PropTypes.func,\n    row: PropTypes.object\n  }\n\n  handleAction = () => {\n    const { row } = this.props;\n\n    const emailId = row.original._id;\n    const emailAddress = row.original.data.to;\n\n    Meteor.call(\"emails/retryFailed\", emailId, (err) => {\n      if (err) {\n        return Alerts.toast(i18next.t(\"app.error\", { error: err.reason }), \"error\");\n      }\n      return Alerts.toast(i18next.t(\"mail.alerts.resendSuccess\", { email: emailAddress }), \"success\");\n    });\n  }\n\n  render() {\n    const { row } = this.props;\n\n    const renderColumn = row.column.id;\n\n    if (renderColumn === \"status\") {\n      if (row.value === \"completed\") {\n        return (\n          <span>\n            <Components.Icon icon=\"fa fa-circle\" className=\"valid\" />\n            <Components.Button\n              className={{\n                \"btn\": false,\n                \"btn-default\": false\n              }}\n              tagName=\"span\"\n              onClick={this.handleAction}\n              title={this.props.data}\n            >\n              <Components.Icon icon=\"fa fa-retweet\" className=\"resend-mail\" />\n            </Components.Button>\n          </span>\n        );\n      }\n      return (\n        <span>\n          <Components.Icon icon=\"fa fa-circle\" className=\"error\" />\n          <Components.Button\n            className={{\n              \"btn\": false,\n              \"btn-default\": false\n            }}\n            tagName=\"span\"\n            onClick={this.handleAction}\n            title={this.props.data}\n          >\n            <Components.Icon icon=\"fa fa-retweet\" className=\"resend-mail\" />\n          </Components.Button>\n        </span>\n      );\n    }\n    if (renderColumn === \"updated\") {\n      const { moment } = this.props;\n      const createdDate = (moment && moment(row.value).format(\"LLL\")) || row.value.toLocaleString();\n      return (\n        <span>{createdDate}</span>\n      );\n    }\n    return (\n      <span>{row.value}</span>\n    );\n  }\n}\n\nregisterComponent(\"EmailTableColumn\", EmailTableColumn, withMoment);\n\nexport default withMoment(EmailTableColumn);\n","import React, { Component } from \"react\";\nimport PropTypes from \"prop-types\";\nimport { compose, withProps } from \"recompose\";\nimport getServiceConfig from \"nodemailer-wellknown\";\nimport { registerComponent, composeWithTracker } from \"@reactioncommerce/reaction-components\";\nimport { Meteor } from \"meteor/meteor\";\nimport { Reaction } from \"/client/api\";\nimport actions from \"../actions\";\nimport EmailConfig from \"../components/emailConfig\";\n\nconst wrapComponent = (Comp) => (\n  class EmailConfigContainer extends Component {\n    static propTypes = {\n      settings: PropTypes.shape({\n        host: PropTypes.string,\n        password: PropTypes.string,\n        port: PropTypes.oneOfType([\n          PropTypes.number,\n          PropTypes.string\n        ]),\n        service: PropTypes.string,\n        user: PropTypes.string\n      })\n    }\n\n    constructor(props) {\n      super(props);\n      this.state = {\n        status: null,\n        error: null\n      };\n    }\n\n    componentDidMount() {\n      this._isMounted = true;\n      this.checkEmailStatus();\n    }\n\n    componentWillReceiveProps(nextProps) {\n      const { settings } = this.props;\n      const { settings: nextSettings } = nextProps;\n      // if the email settings do not match check the email status\n      if (JSON.stringify(settings) !== JSON.stringify(nextSettings)) {\n        this.checkEmailStatus();\n      } else {\n        return;\n      }\n    }\n\n    componentWillUnmount() {\n      this._isMounted = false;\n    }\n\n    // checking email settings\n    // and updating status\n    checkEmailStatus() {\n      const { settings } = this.props;\n      const { service, host, port, user, password } = settings;\n\n      if (service && host && port && user && password) {\n        Meteor.call(\"email/verifySettings\", (error) => {\n          if (!this._isMounted) return;\n          if (error) {\n            this.setState({ status: \"error\" });\n          } else {\n            this.setState({ status: \"valid\" });\n          }\n        });\n      } else {\n        this.setState({ status: \"error\" });\n      }\n    }\n\n    render() {\n      const { status } = this.state;\n      return (\n        <Comp {...this.props} status={status} />\n      );\n    }\n  }\n);\n\nconst composer = (props, onData) => {\n  if (Meteor.subscribe(\"Packages\").ready()) {\n    const shopSettings = Reaction.getShopSettings();\n    const settings = shopSettings.mail || {};\n\n    if (settings.service && settings.service !== \"custom\") {\n      const config = getServiceConfig(settings.service);\n\n      // show localhost for test providers like Maildev that have no host\n      settings.host = config.host || \"localhost\";\n      settings.port = config.port;\n    }\n    return onData(null, { settings });\n  }\n};\n\nconst handlers = { saveSettings: actions.settings.saveSettings };\n\nregisterComponent(\"EmailConfig\", EmailConfig, [\n  composeWithTracker(composer),\n  withProps(handlers),\n  wrapComponent\n]);\n\nexport default compose(\n  composeWithTracker(composer),\n  withProps(handlers),\n  wrapComponent\n)(EmailConfig);\n","import { compose, withProps } from \"recompose\";\nimport { registerComponent, composeWithTracker } from \"@reactioncommerce/reaction-components\";\nimport { Meteor } from \"meteor/meteor\";\nimport { i18next } from \"/client/api\";\nimport EmailLogs from \"../components/emailLogs\";\nimport { Jobs } from \"/lib/collections\";\n\nconst composer = (props, onData) => {\n  if (Meteor.subscribe(\"Emails\").ready()) {\n    const emails = Jobs.find().fetch();\n    onData(null, { emails });\n  }\n};\n\nconst handlers = {\n  /**\n   * Restart a failed or cancelled email job\n   * @param {Object} email - the email job object\n   * @return {null} triggers an alert\n   */\n  resend(email) {\n    Meteor.call(\"emails/retryFailed\", email._id, (err) => {\n      if (err) {\n        return Alerts.toast(i18next.t(\"app.error\", { error: err.reason }), \"error\");\n      }\n      return Alerts.toast(i18next.t(\"mail.alerts.resendSuccess\", { email: email.data.to }), \"success\");\n    });\n  }\n};\n\nregisterComponent(\"EmailLogs\", EmailLogs, [\n  composeWithTracker(composer),\n  withProps(handlers)\n]);\n\nexport default compose(\n  composeWithTracker(composer),\n  withProps(handlers)\n)(EmailLogs);\n","import { compose, withProps } from \"recompose\";\nimport { registerComponent, composeWithTracker } from \"@reactioncommerce/reaction-components\";\nimport { Meteor } from \"meteor/meteor\";\nimport { Reaction } from \"/client/api\";\nimport actions from \"../actions\";\nimport EmailSettings from \"../components/emailSettings\";\n\nconst providers = require(\"nodemailer-wellknown/services.json\");\n\nconst composer = (props, onData) => {\n  if (Meteor.subscribe(\"Packages\", Reaction.getShopId()).ready()) {\n    const settings = Reaction.getShopSettings().mail || {};\n\n    const { service, host, port, user, password } = settings;\n\n    if (host && port && user && password && !service) {\n      settings.service = \"custom\";\n    }\n\n    onData(null, { providers, settings });\n  }\n};\n\nconst handlers = { saveSettings: actions.settings.saveSettings };\n\nregisterComponent(\"EmailSettings\", EmailSettings, [\n  composeWithTracker(composer),\n  withProps(handlers)\n]);\n\nexport default compose(\n  composeWithTracker(composer),\n  withProps(handlers)\n)(EmailSettings);\n","import \"./templates/email.html\";\nimport \"./templates/email.js\";\n\nexport { default as EmailTableColumn } from \"./components/emailTableColumn\";\n\nexport { default as EmailConfig } from \"./containers/emailConfig\";\nexport { default as EmailLogs } from \"./containers/emailLogs\";\nexport { default as EmailSettings } from \"./containers/emailSettings\";\n","import { Template } from \"meteor/templating\";\nimport SearchContainer from \"../containers/settingsContainer.js\";\n\nTemplate.revisionControlSettings.helpers({\n  SearchContainerComponent() {\n    return {\n      component: SearchContainer\n    };\n  }\n});\n","import React, { Component } from \"react\";\nimport PropTypes from \"prop-types\";\nimport { Components } from \"@reactioncommerce/reaction-components\";\nimport {\n  Button,\n  FlatButton,\n  IconButton,\n  Divider,\n  DropDownMenu,\n  MenuItem,\n  Switch,\n  Icon\n} from \"/imports/plugins/core/ui/client/components\";\nimport SimpleDiff from \"./simpleDiff\";\nimport { Translatable } from \"/imports/plugins/core/ui/client/providers\";\n\n/** TMP **/\nimport { Reaction } from \"/client/api\";\n\nclass PublishControls extends Component {\n  static propTypes = {\n    documentIds: PropTypes.arrayOf(PropTypes.string),\n    documents: PropTypes.arrayOf(PropTypes.object),\n    isEnabled: PropTypes.bool,\n    isPreview: PropTypes.bool,\n    onAction: PropTypes.func,\n    onAddProduct: PropTypes.func,\n    onPublishClick: PropTypes.func,\n    onViewContextChange: PropTypes.func,\n    onVisibilityChange: PropTypes.func,\n    revisions: PropTypes.arrayOf(PropTypes.object),\n    showViewAsControls: PropTypes.bool,\n    translation: PropTypes.shape({\n      lang: PropTypes.string\n    })\n  }\n\n  static defaultProps = {\n    showViewAsControls: true\n  }\n\n  constructor(props) {\n    super(props);\n\n    this.state = {\n      showDiffs: false\n    };\n\n    this.handleToggleShowChanges = this.handleToggleShowChanges.bind(this);\n    this.handlePublishClick = this.handlePublishClick.bind(this);\n  }\n\n  handleToggleShowChanges() {\n    this.setState({\n      showDiffs: !this.state.showDiffs\n    });\n  }\n\n  handlePublishClick() {\n    if (this.props.onPublishClick) {\n      this.props.onPublishClick(this.props.revisions);\n    }\n  }\n\n  handleVisibilityChange = (event, value) => {\n    if (this.props.onVisibilityChange) {\n      let isDocumentVisible = false;\n\n      if (value === \"public\") {\n        isDocumentVisible = true;\n      }\n\n      this.props.onVisibilityChange(event, isDocumentVisible, this.props.documentIds);\n    }\n  }\n\n  handleAction = (event, value) => {\n    if (this.props.onAction) {\n      this.props.onAction(event, value, this.props.documentIds);\n    }\n  }\n\n  onViewContextChange = (event, isChecked) => {\n    if (typeof this.props.onViewContextChange === \"function\") {\n      this.props.onViewContextChange(event, isChecked ? \"customer\" : \"administrator\");\n    }\n  }\n\n  get showChangesButtonLabel() {\n    if (!this.showDiffs) {\n      return \"Show Changes\";\n    }\n\n    return \"Hide Changes\";\n  }\n\n  get showChangesButtoni18nKeyLabel() {\n    if (!this.showDiffs) {\n      return \"app.showChanges\";\n    }\n\n    return \"app.hideChanges\";\n  }\n\n  get primaryRevision() {\n    const { revisions } = this.props;\n    if (Array.isArray(revisions) && revisions.length) {\n      const primaryDocumentId = this.props.documentIds[0];\n      return revisions.find((revision) => revision.documentId === primaryDocumentId);\n    }\n    return false;\n  }\n\n  get revisionIds() {\n    if (this.hasRevisions) {\n      return this.props.revisions.map((revision) => revision._id);\n    }\n    return false;\n  }\n\n  get hasRevisions() {\n    return Array.isArray(this.props.revisions) && this.props.revisions.length;\n  }\n\n  get diffs() {\n    return this.props.revisions;\n  }\n\n  get showDiffs() {\n    return this.diffs && this.state.showDiffs;\n  }\n\n  get isVisible() {\n    if (Array.isArray(this.props.revisions) && this.props.revisions.length && this.primaryRevision) {\n      const primaryRevisionObj = this.primaryRevision;\n\n      if (primaryRevisionObj.documentData.isVisible) {\n        return \"public\";\n      }\n    } else if (Array.isArray(this.props.documents) && this.props.documents.length) {\n      const primaryDocument = this.props.documents[0];\n\n      if (primaryDocument.isVisible) {\n        return \"public\";\n      }\n    }\n\n    return \"private\";\n  }\n\n  /**\n   * Getter hasChanges\n   * @return {Boolean} one or more revision has changes\n   */\n  get hasChanges() {\n    // Verify we even have any revision at all\n    if (this.hasRevisions) {\n      // Loop through all revisions to determine if they have changes\n      const diffHasActualChanges = this.props.revisions.map((revision) => {\n        // We probably do have chnages to publish\n        // Note: Sometimes \"updatedAt\" will cause false positives, but just incase, lets\n        // enable the publish button anyway.\n        if ((Array.isArray(revision.diff) && revision.diff.length) || revision.documentType !== \"product\") {\n          return true;\n        }\n\n        // If all else fails, we will disable the button\n        return false;\n      });\n\n      // If even one revision has changes we should enable the publish button\n      return diffHasActualChanges.some((element) => element === true);\n    }\n\n    // No revisions, no publishing\n    return false;\n  }\n\n  renderChanges() {\n    if (this.showDiffs) {\n      const diffs = this.props.revisions.map((revision) => <SimpleDiff diff={revision.diff} key={revision._id} />);\n\n      return (\n        <div>\n          {diffs}\n        </div>\n      );\n    }\n    return null;\n  }\n\n  renderDeletionStatus() {\n    if (this.hasChanges) {\n      if (this.primaryRevision && this.primaryRevision.documentData.isDeleted) {\n        return (\n          <Button\n            label=\"Archived\"\n            onClick={this.handleRestore}\n            status=\"danger\"\n            i18nKeyLabel=\"app.archived\"\n          />\n        );\n      }\n    }\n\n    return null;\n  }\n\n  renderPublishButton() {\n    const buttonProps = {};\n\n    if (Array.isArray(this.props.documentIds) && this.props.documentIds.length > 1) {\n      buttonProps.label = \"Publish All\";\n      buttonProps.i18nKeyLabel = \"toolbar.publishAll\";\n    }\n\n    const isDisabled = Array.isArray(this.props.documentIds) && this.props.documentIds.length === 0;\n\n    return (\n      <div className=\"hidden-xs\">\n        <Button\n          bezelStyle=\"outline\"\n          disabled={isDisabled}\n          label=\"Publish\"\n          onClick={this.handlePublishClick}\n          status=\"success\"\n          tooltip={\"This product has changes that need to be published before they are visible to your customers.\"}\n          i18nKeyLabel=\"productDetailEdit.publish\"\n          {...buttonProps}\n        />\n      </div>\n    );\n  }\n\n  renderMoreOptionsButton() {\n    return (\n      <DropDownMenu\n        buttonElement={<IconButton icon={\"fa fa-ellipsis-v\"}/>}\n        handleMenuItemChange={this.handleAction}\n      >\n        <MenuItem label=\"Administrator\" value=\"administrator\" />\n        <MenuItem label=\"Customer\" value=\"customer\" />\n        <Divider />\n        <MenuItem\n          i18nKeyLabel=\"app.public\"\n          icon=\"fa fa-unlock\"\n          label=\"Public\"\n          selectLabel=\"Public\"\n          value=\"public\"\n        />\n        <MenuItem\n          i18nKeyLabel=\"app.private\"\n          label=\"Private\"\n          icon=\"fa fa-lock\"\n          selectLabel=\"Public\"\n          value=\"private\"\n        />\n        <Divider />\n        <MenuItem\n          disabled={this.hasChanges === false}\n          i18nKeyLabel=\"revisions.discardChanges\"\n          icon=\"fa fa-undo\"\n          label=\"Discard Changes\"\n          value=\"discard\"\n        />\n        <Divider />\n        <MenuItem\n          i18nKeyLabel=\"app.archive\"\n          icon=\"fa fa-trash-o\"\n          label=\"Archive\"\n          value=\"archive\"\n        />\n      </DropDownMenu>\n    );\n  }\n\n  renderViewControls() {\n    if (this.props.showViewAsControls) {\n      let tooltip = \"Private\";\n      let i18nKeyTooltip = \"app.private\";\n\n      if (this.isVisible === \"public\") {\n        tooltip = \"Public\";\n        i18nKeyTooltip = \"app.public\";\n      }\n\n      return (\n        <div className=\"hidden-xs\">\n          <FlatButton\n            i18nKeyTooltip={i18nKeyTooltip}\n            icon=\"fa fa-eye-slash\"\n            onIcon=\"fa fa-eye\"\n            toggle={true}\n            tooltip={tooltip}\n            value=\"public\"\n            onValue=\"private\"\n            toggleOn={this.isVisible === \"public\"}\n            onToggle={this.handleVisibilityChange}\n          />\n        </div>\n      );\n    }\n\n    return null;\n  }\n\n  renderUndoButton() {\n    return (\n      <FlatButton\n        disabled={this.hasChanges === false}\n        tooltip=\"Discard Changes\"\n        i18nKeyTooltip=\"revisions.discardChanges\"\n        icon={\"fa fa-undo\"}\n        value=\"discard\"\n        onClick={this.handleAction}\n      />\n    );\n  }\n\n  renderArchiveButton() {\n    return (\n      <FlatButton\n        tooltip=\"Archive\"\n        i18nKeyTooltip=\"app.archive\"\n        icon={\"fa fa-archive\"}\n        value=\"archive\"\n        onClick={this.handleAction}\n      />\n    );\n  }\n\n  renderSettingsButton() {\n    return (\n      <FlatButton\n        icon={\"fa fa-cog\"}\n        value=\"settings\"\n        onClick={this.handleAction}\n      />\n    );\n  }\n\n  renderVisibilitySwitch() {\n    return (\n      <Switch\n        i18nKeyLabel={\"admin.dashboard.preview\"}\n        label={\"Preview\"}\n        checked={this.props.isPreview}\n        onChange={this.onViewContextChange}\n      />\n    );\n  }\n\n  renderAdminButton() {\n    return (\n      <FlatButton\n        onClick={() => {\n          Reaction.showActionView({\n            i18nKeyTitle: \"dashboard.coreTitle\",\n            title: \"Dashboard\",\n            template: \"dashboardPackages\"\n          });\n        }}\n      >\n        <Icon style={{ fontSize: 24 }} icon=\"icon icon-reaction-logo\" />\n      </FlatButton>\n    );\n  }\n\n  renderAddButton() {\n    return (\n      <FlatButton\n        i18nKeyTooltip={\"app.shortcut.addProduct\"}\n        icon={\"fa fa-plus\"}\n        tooltip={\"Add Product\"}\n        onClick={this.props.onAddProduct}\n      />\n    );\n  }\n\n  render() {\n    if (this.props.isEnabled) {\n      return (\n        <Components.ToolbarGroup lastChild={true}>\n          {this.renderDeletionStatus()}\n          {this.renderUndoButton()}\n          {this.renderArchiveButton()}\n          {this.renderViewControls()}\n          {this.renderPublishButton()}\n          {/* this.renderMoreOptionsButton() */}\n        </Components.ToolbarGroup>\n      );\n    }\n\n    return null;\n  }\n}\n\nexport default Translatable()(PublishControls);\n","import React, { Component } from \"react\";\nimport PropTypes from \"prop-types\";\nimport { Translation } from \"/imports/plugins/core/ui/client/components\";\n\n\nclass RevisionControlSettings extends Component {\n  get settings() {\n    return this.props.settings;\n  }\n\n  render() {\n    let message;\n\n    if (this.settings.general.enabled) {\n      message = (\n        <Translation\n          defaultValue=\"Revision controls is enabled\"\n          i18nKey=\"revisions.isEnabled\"\n        />\n      );\n    } else {\n      message = (\n        <Translation\n          defaultValue=\"Revision controls is disabled\"\n          i18nKey=\"revisions.isDisabled\"\n        />\n      );\n    }\n\n    return (\n      <div className=\"rui publish-controls\">\n        <p className=\"help-text\">{message}</p>\n      </div>\n    );\n  }\n}\n\nRevisionControlSettings.propTypes = {\n  checked: PropTypes.bool,\n  label: PropTypes.string,\n  onUpdateSettings: PropTypes.func,\n  settings: PropTypes.object\n};\n\nexport default RevisionControlSettings;\n","import React, { Component } from \"react\";\nimport PropTypes from \"prop-types\";\n\nclass SimpleDiff extends Component {\n  renderDiff() {\n    const { diff } = this.props;\n\n    return diff.map((change, index) => {\n      const rightHandSide = change.rhs && change.rhs.toString();\n      const leftHandSide = change.lhs && change.lhs.toString();\n\n      switch (change.kind) {\n        // Array change\n        case \"A\":\n          return (\n            <tr className=\"success\" key={index}>\n              <td><i className=\"fa fa-plus\" /></td>\n              <td style={{ whiteSpace: \"normal\" }}>{leftHandSide}</td>\n              <td style={{ whiteSpace: \"normal\" }}>{rightHandSide}</td>\n            </tr>\n          );\n\n        // Added property / element\n        case \"N\":\n          return (\n            <tr className=\"success\" key={index}>\n              <td><i className=\"fa fa-plus\" /></td>\n              <td style={{ whiteSpace: \"normal\" }}>{leftHandSide}</td>\n              <td style={{ whiteSpace: \"normal\" }}>{rightHandSide}</td>\n            </tr>\n          );\n\n        // Edited property or element\n        case \"E\":\n          return (\n            <tr className=\"warning\" key={index}>\n              <td><i className=\"fa fa-pencil\" /></td>\n              <td style={{ whiteSpace: \"normal\" }}>{leftHandSide}</td>\n              <td style={{ whiteSpace: \"normal\" }}>{rightHandSide}</td>\n            </tr>\n          );\n\n        // Removed property / element\n        case \"D\":\n          return (\n            <tr className=\"danger\" key={index}>\n              <td><i className=\"fa fa-times\" /></td>\n              <td style={{ whiteSpace: \"normal\" }}>{leftHandSide}</td>\n              <td style={{ whiteSpace: \"normal\" }}>{rightHandSide}</td>\n            </tr>\n          );\n        default:\n          return null;\n      }\n    });\n  }\n\n  render() {\n    return (\n      <div>\n        <table className=\"table table-bordered\">\n          <thead>\n            <tr>\n              <th />\n              <th>{\"Current\"}</th>\n              <th>{\"Change\"}</th>\n            </tr>\n          </thead>\n          <tbody>\n            {this.renderDiff()}\n          </tbody>\n        </table>\n      </div>\n    );\n  }\n}\n\nSimpleDiff.defaultProps = {\n  diff: []\n};\n\nSimpleDiff.propTypes = {\n  diff: PropTypes.arrayOf(PropTypes.object)\n};\n\nexport default SimpleDiff;\n","import React, { Component } from \"react\";\nimport PropTypes from \"prop-types\";\nimport { composeWithTracker } from \"@reactioncommerce/reaction-components\";\nimport PublishControls from \"../components/publishControls\";\nimport { Revisions } from \"/lib/collections\";\nimport { Meteor } from \"meteor/meteor\";\nimport TranslationProvider from \"/imports/plugins/core/ui/client/providers/translationProvider\";\nimport { isRevisionControlEnabled } from \"../../lib/api\";\nimport { Reaction, i18next } from \"/client/api\";\n\n/*\n * PublishContainer is a container component connected to Meteor data source.\n */\nclass PublishContainer extends Component {\n  publishToCatalog(collection, documentIds) {\n    Meteor.call(`catalog/publish/${collection}`, documentIds, (error, result) => {\n      if (result) {\n        Alerts.toast(i18next.t(\"admin.catalogProductPublishSuccess\", { defaultValue: \"Product published to catalog\" }), \"success\");\n      } else if (error) {\n        Alerts.toast(error.message, \"error\");\n      }\n    });\n  }\n\n  handlePublishClick = (revisions) => {\n    const productIds = this.props.documents\n      .filter((doc) => doc.type === \"simple\")\n      .map((doc) => doc._id);\n\n    if (Array.isArray(revisions) && revisions.length) {\n      let documentIds = revisions.map((revision) => {\n        if (revision.parentDocument && revision.documentType !== \"product\") {\n          return revision.parentDocument;\n        }\n        return revision.documentId;\n      });\n\n      const documentIdsSet = new Set(documentIds); // ensures they are unique\n      documentIds = Array.from(documentIdsSet);\n      Meteor.call(\"revisions/publish\", documentIds, (error, result) => {\n        if (result && result.status === \"success\") {\n          const message = i18next.t(\"revisions.changedPublished\", {\n            defaultValue: \"Changes published successfully\"\n          });\n          Alerts.toast(message, \"success\");\n\n          if (this.props.onPublishSuccess) {\n            this.props.onPublishSuccess(result);\n          }\n\n          // Publish to catalog after revisions have been published\n          this.publishToCatalog(\"products\", productIds);\n        } else {\n          Alerts.toast((error && error.message) || (result && result.status) || i18next.t(\"app.error\"), \"error\");\n        }\n      });\n    } else {\n      // Publish to catalog immediately if there are no revisions to publish beforehand\n      this.publishToCatalog(\"products\", productIds);\n    }\n  }\n\n  handlePublishActions = (event, action, documentIds) => {\n    switch (action) {\n      case \"archive\":\n        if (this.props.onAction) {\n          this.props.onAction(event, action, this.props.documentIds);\n        }\n        break;\n      case \"discard\":\n        Meteor.call(\"revisions/discard\", documentIds, (error, result) => {\n          if (result === true) {\n            const message = i18next.t(\"revisions.changesDiscarded\", {\n              defaultValue: \"Changes discarded successfully\"\n            });\n\n            Alerts.toast(message, \"success\");\n          } else {\n            const message = i18next.t(\"revisions.noChangesDiscarded\", {\n              defaultValue: \"There are no changes to discard\"\n            });\n\n            Alerts.toast(message, \"warning\");\n          }\n        });\n        break;\n      default:\n    }\n  }\n\n  render() {\n    return (\n      <TranslationProvider>\n        <PublishControls\n          documentIds={this.props.documentIds}\n          documents={this.props.documents}\n          isEnabled={this.props.isEnabled}\n          onPublishClick={this.handlePublishClick}\n          onAction={this.handlePublishActions}\n          onVisibilityChange={this.props.onVisibilityChange}\n          revisions={this.props.revisions}\n          isPreview={this.props.isPreview}\n        />\n      </TranslationProvider>\n    );\n  }\n}\n\nPublishContainer.propTypes = {\n  documentIds: PropTypes.arrayOf(PropTypes.string),\n  documents: PropTypes.arrayOf(PropTypes.object),\n  isEnabled: PropTypes.bool,\n  isPreview: PropTypes.bool,\n  onAction: PropTypes.func,\n  onPublishSuccess: PropTypes.func,\n  onVisibilityChange: PropTypes.func,\n  product: PropTypes.object,\n  revisions: PropTypes.arrayOf(PropTypes.object)\n};\n\nfunction composer(props, onData) {\n  const viewAs = Reaction.getUserPreferences(\"reaction-dashboard\", \"viewAs\", \"administrator\");\n\n  if (Array.isArray(props.documentIds) && props.documentIds.length) {\n    const subscription = Meteor.subscribe(\"ProductRevisions\", props.documentIds);\n\n    if (subscription.ready()) {\n      const revisions = Revisions.find({\n        \"$or\": [\n          {\n            documentId: {\n              $in: props.documentIds\n            }\n          },\n          {\n            \"documentData.ancestors\": {\n              $in: props.documentIds\n            }\n          },\n          {\n            parentDocument: {\n              $in: props.documentIds\n            }\n          }\n        ],\n        \"workflow.status\": {\n          $nin: [\n            \"revision/published\"\n          ]\n        }\n      }).fetch();\n\n      onData(null, {\n        isEnabled: isRevisionControlEnabled(),\n        documentIds: props.documentIds,\n        documents: props.documents,\n        revisions,\n        isPreview: viewAs === \"customer\"\n      });\n\n      return;\n    }\n  }\n\n  onData(null, {\n    isEnabled: isRevisionControlEnabled(),\n    isPreview: viewAs === \"customer\"\n  });\n}\n\nexport default composeWithTracker(composer)(PublishContainer);\n","import React, { Component } from \"react\";\nimport PropTypes from \"prop-types\";\nimport { composeWithTracker } from \"@reactioncommerce/reaction-components\";\nimport { Meteor } from \"meteor/meteor\";\nimport SettingsComponent from \"../components/settings\";\nimport { Packages } from \"/lib/collections\";\n\nclass RevisionSettingsContainer extends Component {\n  constructor(props) {\n    super(props);\n\n    this.state = {\n      settings: this.props.packageInfo.settings\n    };\n  }\n\n  componentWillReceiveProps(nextProps) {\n    this.setState({\n      settings: nextProps.packageInfo.settings\n    });\n  }\n\n  get settings() {\n    return this.state.settings;\n  }\n\n  handleUpdateSettings = (settings) => {\n    this.setState({ settings }, () => {\n      Meteor.call(\"revisions/settings/update\", settings);\n    });\n  }\n\n  /**\n   * Publish container is a stateless container component connected to Meteor data source.\n   * @return {PropTypes.node} react node\n   */\n  render() {\n    return (\n      <div>\n        <SettingsComponent\n          onUpdateSettings={this.handleUpdateSettings}\n          settings={this.settings}\n        />\n      </div>\n    );\n  }\n}\n\nRevisionSettingsContainer.propTypes = {\n  packageInfo: PropTypes.object\n};\n\nexport function handlePublishClick(revisions) {\n  if (Array.isArray(revisions)) {\n    const documentIds = revisions.map((revision) => revision.documentId);\n    Meteor.call(\"revisions/publish\", documentIds);\n  }\n}\n\nfunction composer(props, onData) {\n  const packageInfo = Packages.findOne({\n    name: \"reaction-revisions\"\n  });\n\n  onData(null, {\n    packageInfo\n  });\n}\n\nexport default composeWithTracker(composer)(RevisionSettingsContainer);\n","import \"./templates/settings.html\";\nimport \"./templates/settings.js\";\n","export * from \"./revisions\";\n","import { Packages } from \"/lib/collections\";\nimport { Reaction } from \"/lib/api\";\n\nexport function getPackageSettings() {\n  const shopId = Reaction.getPrimaryShopId();\n\n  const packageInfo = Packages.findOne({\n    name: \"reaction-revisions\",\n    shopId\n  });\n\n  if (packageInfo && packageInfo.enabled && packageInfo.settings) {\n    return packageInfo.settings;\n  }\n\n  return null;\n}\n\nexport function isRevisionControlEnabled() {\n  const settings = getPackageSettings();\n\n  if (settings && settings.general && typeof settings.general.enabled === \"boolean\") {\n    return settings.general.enabled;\n  }\n\n  return false;\n}\n\nexport const RevisionApi = {\n  isRevisionControlEnabled,\n  getPackageSettings\n};\n","import { Meteor } from \"meteor/meteor\";\nimport { $ } from \"meteor/jquery\";\nimport { Template } from \"meteor/templating\";\nimport { ReactiveDict } from \"meteor/reactive-dict\";\nimport { AutoForm } from \"meteor/aldeed:autoform\";\nimport { Shops } from \"/lib/collections\";\nimport { Countries } from \"/client/collections\";\nimport { Taxes, TaxCodes } from \"../../lib/collections\";\nimport { i18next } from \"/client/api\";\nimport { Taxes as TaxSchema } from \"../../lib/collections/schemas\";\nimport { IconButton, Loading, SortableTable } from \"/imports/plugins/core/ui/client/components\";\n\n/* eslint no-shadow: [\"error\", { \"allow\": [\"options\"] }] */\n/* eslint no-unused-vars: [\"error\", { \"argsIgnorePattern\": \"[oO]ptions\" }] */\n\nTemplate.customTaxRates.onCreated(function () {\n  this.autorun(() => {\n    this.subscribe(\"Taxes\");\n  });\n\n  this.state = new ReactiveDict();\n  this.state.setDefault({\n    isEditing: false,\n    editingId: null\n  });\n});\n\nTemplate.customTaxRates.helpers({\n  editButton() {\n    const instance = Template.instance();\n    const { state } = instance;\n    const isEditing = state.equals(\"isEditing\", true);\n    let editingId = state.get(\"editingId\");\n    // toggle edit state\n    if (!isEditing) {\n      editingId = null;\n    }\n    // return icon\n    return {\n      component: IconButton,\n      icon: \"fa fa-plus\",\n      onIcon: \"fa fa-pencil\",\n      toggle: true,\n      toggleOn: isEditing,\n      style: {\n        position: \"relative\",\n        top: \"-25px\",\n        right: \"8px\"\n      },\n      onClick() {\n        // remove active rows from grid\n        $(\".tax-grid-row\").removeClass(\"active\");\n        return state.set({\n          isEditing: !isEditing,\n          editingId\n        });\n      }\n    };\n  },\n  taxGrid() {\n    const filteredFields = [\"taxCode\", \"rate\", \"country\", \"region\", \"postal\"];\n    const noDataMessage = i18next.t(\"admin.taxSettings.noCustomTaxRatesFound\");\n    const instance = Template.instance();\n\n    //\n    // helper to get and select row from griddle\n    // into blaze for to select tax row for editing\n    //\n    function editRow(options) {\n      const currentId = instance.state.get(\"editingId\");\n      // isEditing is tax rate object\n      instance.state.set(\"isEditing\", options.props.data);\n      instance.state.set(\"editingId\", options.props.data._id);\n      // toggle edit mode clicking on same row\n      if (currentId === options.props.data._id) {\n        instance.state.set(\"isEditing\", null);\n        instance.state.set(\"editingId\", null);\n      }\n    }\n\n    //\n    // helper adds a class to every grid row\n    //\n    const customRowMetaData = {\n      bodyCssClassName: () => \"tax-grid-row\"\n    };\n\n    // add i18n handling to headers\n    const customColumnMetadata = [];\n    filteredFields.forEach((field) => {\n      const columnMeta = {\n        accessor: field,\n        Header: i18next.t(`admin.taxGrid.${field}`)\n      };\n      customColumnMetadata.push(columnMeta);\n    });\n\n    // return tax Grid\n    return {\n      component: SortableTable,\n      publication: \"Taxes\",\n      collection: Taxes,\n      matchingResultsCount: \"taxes-count\",\n      showFilter: true,\n      rowMetadata: customRowMetaData,\n      filteredFields,\n      columns: filteredFields,\n      noDataMessage,\n      onRowClick: editRow,\n      columnMetadata: customColumnMetadata,\n      externalLoadingComponent: Loading\n    };\n  },\n\n  instance() {\n    const instance = Template.instance();\n    return instance;\n  },\n  // schema for forms\n  taxSchema() {\n    return TaxSchema;\n  },\n  // list of countries for tax input\n  countryOptions() {\n    return Countries.find().fetch();\n  },\n  statesForCountry() {\n    const shop = Shops.findOne();\n    const selectedCountry = AutoForm.getFieldValue(\"country\");\n    if (!selectedCountry) {\n      return false;\n    }\n    if ((shop !== null ? shop.locales.countries[selectedCountry].states : undefined) === null) {\n      return false;\n    }\n    const options = [];\n    if (shop && typeof shop.locales.countries[selectedCountry].states === \"object\") {\n      for (const state in shop.locales.countries[selectedCountry].states) {\n        if ({}.hasOwnProperty.call(shop.locales.countries[selectedCountry].states, state)) {\n          const locale = shop.locales.countries[selectedCountry].states[state];\n          options.push({\n            label: locale.name,\n            value: state\n          });\n        }\n      }\n    }\n    return options;\n  },\n  taxRate() {\n    const shop = Shops.findOne();\n    const instance = Template.instance();\n    const id = instance.state.get(\"editingId\");\n    const tax = Taxes.findOne(id) || {};\n    // enforce a default country that makes sense.\n    if (!tax.country) {\n      if (shop && typeof shop.addressBook === \"object\") {\n        tax.country = shop.addressBook[0].country;\n      }\n    }\n    return tax;\n  },\n  taxCodes() {\n    const instance = Template.instance();\n    if (instance.subscriptionsReady()) {\n      const taxCodes = TaxCodes.find().fetch();\n      const options = [{\n        label: i18next.t(\"admin.taxSettings.taxable\"),\n        value: \"RC_TAX\"\n      }, {\n        label: i18next.t(\"admin.taxSettings.nottaxable\"),\n        value: \"RC_NOTAX\"\n      }];\n\n      for (const taxCode of taxCodes) {\n        options.push({\n          label: i18next.t(taxCode.label),\n          value: taxCode.id\n        });\n      }\n      return options;\n    }\n    return [];\n  }\n});\n\n//\n// on submit lets clear the form state\n//\nTemplate.customTaxRates.events({\n  \"submit #customTaxRates-update-form\"() {\n    const instance = Template.instance();\n    instance.state.set({\n      isEditing: false,\n      editingId: null\n    });\n  },\n  \"submit #customTaxRates-insert-form\"() {\n    const instance = Template.instance();\n    instance.state.set({\n      isEditing: true,\n      editingId: null\n    });\n  },\n  \"click .cancel, .tax-grid-row .active\"() {\n    const instance = Template.instance();\n    // remove active rows from grid\n    instance.state.set({\n      isEditing: false,\n      editingId: null\n    });\n    // ugly hack\n    $(\".tax-grid-row\").removeClass(\"active\");\n  },\n  \"click .delete\"() {\n    const confirmTitle = i18next.t(\"admin.taxSettings.confirmRateDelete\");\n    const confirmButtonText = i18next.t(\"app.delete\");\n    const instance = Template.instance();\n    const id = instance.state.get(\"editingId\");\n    // confirm delete\n    Alerts.alert({\n      title: confirmTitle,\n      type: \"warning\",\n      showCancelButton: true,\n      confirmButtonText\n    }, (isConfirm) => {\n      if (isConfirm) {\n        if (id) {\n          Meteor.call(\"taxes/deleteRate\", id);\n          instance.state.set({\n            isEditing: false,\n            editingId: null\n          });\n        }\n      }\n    });\n  },\n  \"click .tax-grid-row\"(event) {\n    // toggle all rows off, then add our active row\n    $(\".tax-grid-row\").removeClass(\"active\");\n    Template.instance().$(event.currentTarget).addClass(\"active\");\n  }\n});\n\n//\n// Hooks for update and insert forms\n//\nAutoForm.hooks({\n  \"customTaxRates-update-form\": {\n    onSuccess() {\n      return Alerts.toast(i18next.t(\"admin.taxSettings.shopCustomTaxRatesSaved\"), \"success\");\n    },\n    onError(operation, error) {\n      return Alerts.toast(`${i18next.t(\"admin.taxSettings.shopCustomTaxRatesFailed\")} ${error}`, \"error\");\n    }\n  },\n  \"customTaxRates-insert-form\": {\n    onSuccess() {\n      return Alerts.toast(i18next.t(\"admin.taxSettings.shopCustomTaxRatesSaved\"), \"success\");\n    },\n    onError(operation, error) {\n      return Alerts.toast(`${i18next.t(\"admin.taxSettings.shopCustomTaxRatesFailed\")} ${error}`, \"error\");\n    }\n  }\n});\n","import { Meteor } from \"meteor/meteor\";\nimport { Template } from \"meteor/templating\";\nimport { TaxCodes } from \"../../lib/collections\";\nimport { i18next } from \"/client/api\";\n\n/*\n * Template taxes Helpers\n */\nTemplate.taxSettings.onCreated(function () {\n  this.autorun(() => {\n    this.subscribe(\"TaxCodes\");\n  });\n});\n\nTemplate.taxSettings.helpers({\n  checked(enabled) {\n    if (enabled === true) {\n      return \"checked\";\n    }\n    return \"\";\n  },\n  shown(enabled) {\n    if (enabled !== true) {\n      return \"hidden\";\n    }\n    return \"\";\n  },\n  // prepare and return taxCodes\n  // for default shop value\n  //\n  taxCodes() {\n    const instance = Template.instance();\n    if (instance.subscriptionsReady()) {\n      const taxCodes = TaxCodes.find().fetch();\n      const options = [{\n        label: i18next.t(\"app.auto\"),\n        value: \"none\"\n      }];\n\n      for (const taxCode of taxCodes) {\n        options.push({\n          label: i18next.t(taxCode.label),\n          value: taxCode.id\n        });\n      }\n      return options;\n    }\n    return undefined;\n  }\n});\n\nTemplate.taxSettings.events({\n  /**\n   * taxSettings settings update enabled status for tax service on change\n   * @param  {event} event    jQuery Event\n   * @return {void}\n   */\n  \"change input[name=enabled]\": (event) => {\n    const settingsKey = event.target.getAttribute(\"data-key\");\n    const packageId = event.target.getAttribute(\"data-id\");\n    const fields = [{\n      property: \"enabled\",\n      value: event.target.checked\n    }];\n    // save tax registry updates\n    Meteor.call(\"registry/update\", packageId, settingsKey, fields);\n  },\n\n  /**\n   * taxSettings settings show/hide secret key for a tax service\n   * @param  {event} event    jQuery Event\n   * @return {void}\n   */\n  \"click [data-event-action=showSecret]\": (event) => {\n    const button = Template.instance().$(event.currentTarget);\n    const input = button.closest(\".form-group\").find(\"input[name=secret]\");\n\n    if (input.attr(\"type\") === \"password\") {\n      input.attr(\"type\", \"text\");\n      button.html(\"Hide\");\n    } else {\n      input.attr(\"type\", \"password\");\n      button.html(\"Show\");\n    }\n  }\n});\n","import \"./settings/custom.html\";\nimport \"./settings/custom.js\";\nimport \"./settings/settings.html\";\nimport \"./settings/settings.js\";\n","import { registerSchema } from \"@reactioncommerce/schemas\";\nimport { PackageConfig } from \"/lib/collections/schemas/registry\";\nimport { Taxes } from \"./taxes\";\n\n/**\n* TaxPackageConfig Schema\n*/\n\nexport const TaxPackageConfig = PackageConfig.clone().extend({\n  // Remove blackbox: true from settings obj\n  \"settings\": {\n    type: Object,\n    optional: true,\n    blackbox: false,\n    defaultValue: {}\n  },\n  \"settings.defaultTaxCode\": {\n    type: String,\n    optional: true\n  },\n  \"settings.taxIncluded\": {\n    type: Boolean,\n    defaultValue: false\n  },\n  \"settings.taxShipping\": {\n    type: Boolean,\n    defaultValue: false\n  },\n  \"settings.rates\": {\n    type: Object,\n    optional: true,\n    defaultValue: {}\n  },\n  \"settings.rates.enabled\": {\n    type: Boolean,\n    optional: true,\n    defaultValue: false\n  },\n  \"settings.rates.taxes\": {\n    type: Array,\n    optional: true\n  },\n  \"settings.rates.taxes.$\": {\n    type: Taxes\n  }\n});\n\nregisterSchema(\"TaxPackageConfig\", TaxPackageConfig);\n","export * from \"./taxrates\";\nexport * from \"./taxes\";\nexport * from \"./taxcodes\";\nexport * from \"./config\";\n","import SimpleSchema from \"simpl-schema\";\nimport { check } from \"meteor/check\";\nimport { Tracker } from \"meteor/tracker\";\nimport { registerSchema } from \"@reactioncommerce/schemas\";\n\n/**\n* TaxCodes Schema\n*/\n\nexport const TaxCodes = new SimpleSchema({\n  \"id\": {\n    type: String,\n    label: \"Tax Id\",\n    unique: true\n  },\n  \"shopId\": {\n    type: String\n  },\n  \"taxCode\": {\n    type: String,\n    label: \"Tax Code\"\n  },\n  \"taxCodeProvider\": {\n    type: String,\n    label: \"Tax Code Provider\"\n  },\n  \"ssuta\": {\n    type: Boolean,\n    label: \"Streamlined Sales Tax\",\n    optional: true,\n    defaultValue: false\n  },\n  \"title\": {\n    type: String,\n    optional: true\n  },\n  \"label\": {\n    type: String,\n    optional: true\n  },\n  \"parent\": {\n    type: String,\n    optional: true\n  },\n  \"children\": {\n    type: Array,\n    optional: true\n  },\n  \"children.$\": {\n    type: Object,\n    blackbox: true\n  }\n}, { check, tracker: Tracker });\n\nregisterSchema(\"TaxCodes\", TaxCodes);\n","import SimpleSchema from \"simpl-schema\";\nimport { check } from \"meteor/check\";\nimport { Tracker } from \"meteor/tracker\";\nimport { shopIdAutoValue } from \"/lib/collections/schemas/helpers\";\nimport { registerSchema } from \"@reactioncommerce/schemas\";\n\n/**\n* Taxes Schema\n*/\n\nexport const Taxes = new SimpleSchema({\n  \"shopId\": {\n    type: String,\n    autoValue: shopIdAutoValue,\n    index: 1,\n    label: \"Taxes shopId\"\n  },\n  \"taxCode\": {\n    type: String,\n    label: \"Tax Identifier\",\n    defaultValue: \"RC_TAX\",\n    index: 1\n  },\n  \"cartMethod\": {\n    label: \"Calculation Method\",\n    type: String,\n    allowedValues: [\"unit\", \"row\", \"total\"],\n    defaultValue: \"total\"\n  },\n  \"taxLocale\": {\n    label: \"Taxation Location\",\n    type: String,\n    allowedValues: [\"shipping\", \"billing\", \"origination\", \"destination\"],\n    defaultValue: \"destination\"\n  },\n  \"taxShipping\": {\n    label: \"Tax Shipping\",\n    type: Boolean,\n    defaultValue: false\n  },\n  \"taxIncluded\": {\n    label: \"Taxes included in product prices\",\n    type: Boolean,\n    defaultValue: false,\n    optional: true\n  },\n  \"discountsIncluded\": {\n    label: \"Tax before discounts\",\n    type: Boolean,\n    defaultValue: false,\n    optional: true\n  },\n  \"region\": {\n    label: \"State/Province/Region\",\n    type: String,\n    optional: true,\n    index: 1\n  },\n  \"postal\": {\n    label: \"ZIP/Postal Code\",\n    type: String,\n    optional: true,\n    index: 1\n  },\n  \"country\": {\n    type: String,\n    label: \"Country\",\n    optional: true,\n    index: 1\n  },\n  \"isCommercial\": {\n    label: \"Commercial address.\",\n    type: Boolean,\n    optional: true\n  },\n  \"rate\": Number,\n  \"method\": {\n    type: Array,\n    optional: true,\n    label: \"Tax Methods\"\n  },\n  \"method.$\": {\n    type: Object\n  },\n  \"method.$.plugin\": {\n    type: String,\n    label: \"Plugin\",\n    defaultValue: \"Custom\",\n    optional: true\n  },\n  \"method.$.enabled\": {\n    type: Boolean,\n    label: \"Enabled\",\n    defaultValue: true,\n    optional: true\n  }\n}, { check, tracker: Tracker });\n\nregisterSchema(\"Taxes\", Taxes);\n","import SimpleSchema from \"simpl-schema\";\nimport { check } from \"meteor/check\";\nimport { Tracker } from \"meteor/tracker\";\nimport { registerSchema } from \"@reactioncommerce/schemas\";\n\n/**\n* TaxRates Schema\n*/\n\nexport const TaxRates = new SimpleSchema({\n  country: {\n    type: String\n  },\n  county: {\n    type: String,\n    optional: true\n  },\n  postal: {\n    type: String,\n    optional: true\n  },\n  rate: Number\n}, { check, tracker: Tracker });\n\nregisterSchema(\"TaxRates\", TaxRates);\n","import { Mongo } from \"meteor/mongo\";\nimport * as Schemas from \"./schemas\";\n\n/**\n* ReactionCore Collections TaxCodes\n*/\n\n/**\n* Taxes Collection\n*/\nexport const Taxes = new Mongo.Collection(\"Taxes\");\n\nTaxes.attachSchema(Schemas.Taxes);\n\n\n/**\n* TaxCodes Collection\n*/\nexport const TaxCodes = new Mongo.Collection(\"TaxCodes\");\n\nTaxCodes.attachSchema(Schemas.TaxCodes);\n","export * from \"./collections\";\n","import { $ } from \"meteor/jquery\";\nimport { Meteor } from \"meteor/meteor\";\nimport { AutoForm } from \"meteor/aldeed:autoform\";\nimport { Blaze } from \"meteor/blaze\";\nimport { ReactiveDict } from \"meteor/reactive-dict\";\nimport { Template } from \"meteor/templating\";\nimport { Loading, SortableTable } from \"/imports/plugins/core/ui/client/components\";\nimport { EmailTemplates } from \"../../lib/collections/schemas\";\nimport { i18next } from \"/client/api\";\nimport { Templates } from \"/lib/collections\";\n\n\n/*\n * template templateSettings onCreated\n */\nTemplate.templateSettings.onCreated(function () {\n  // Subscribe to Templates collections\n  this.autorun(() => {\n    this.subscribe(\"Templates\");\n  });\n\n  // Initiate State\n  this.state = new ReactiveDict();\n  this.state.setDefault({\n    isEditing: false,\n    editingId: null\n  });\n});\n\n\n/*\n * template templateSettings helpers\n */\nTemplate.templateSettings.helpers({\n  templateGrid() {\n    const filteredFields = [\"title\", \"type\", \"language\"];\n    const noDataMessage = i18next.t(\"templateGrid.noTemplatesFound\");\n    const instance = Template.instance();\n\n    //\n    // helper to get and select row from griddle\n    // into blaze to get correct template to edit\n    //\n    function editRow(options) {\n      const currentId = instance.state.get(\"editingId\");\n\n      // isEditing is current template\n      instance.state.set(\"isEditing\", options.props.data);\n      instance.state.set(\"editingId\", options.props.data._id);\n      // toggle edit mode clicking on same row\n      if (currentId === options.props.data._id) {\n        instance.state.set(\"isEditing\", null);\n        instance.state.set(\"editingId\", null);\n      }\n    }\n\n    // helper adds a class to every grid row\n    const customRowMetaData = {\n      bodyCssClassName: () => \"template-grid-row\"\n    };\n\n    // add i18n handling to headers\n    const customColumnMetadata = [];\n    filteredFields.forEach((field) => {\n      const columnMeta = {\n        accessor: field, // name of field\n        Header: i18next.t(`templateGrid.columns.${field}`) // name to display\n      };\n      customColumnMetadata.push(columnMeta);\n    });\n\n    // return template Grid\n    return {\n      component: SortableTable,\n      publication: \"Templates\",\n      collection: Templates,\n      matchingResultsCount: \"templates-count\",\n      showFilter: true,\n      rowMetadata: customRowMetaData,\n      filteredFields,\n      columns: filteredFields,\n      noDataMessage,\n      onRowClick: editRow,\n      columnMetadata: customColumnMetadata,\n      externalLoadingComponent: Loading\n    };\n  },\n\n  instance() {\n    const instance = Template.instance();\n    return instance;\n  },\n\n  template() {\n    const instance = Template.instance();\n    const id = instance.state.get(\"editingId\");\n    const template = Templates.findOne(id) || {};\n    return template;\n  },\n\n  typeEmail() {\n    const instance = Template.instance();\n    const id = instance.state.get(\"editingId\");\n    const template = Templates.findOne(id) || {};\n    if (template.type === \"email\") {\n      return true;\n    }\n    return false;\n  },\n\n  emailTemplateSchema() {\n    return EmailTemplates;\n  }\n});\n\n\n/*\n * template templateSettings events\n */\nTemplate.templateSettings.events({\n  \"click .template-grid-row\"(event) {\n    // toggle all rows off, then add our active row\n    $(\".template-grid-row\").removeClass(\"active\");\n    Template.instance().$(event.currentTarget).addClass(\"active\");\n  },\n  \"submit #email-template-edit-form\"() {\n    const instance = Template.instance();\n    instance.state.set({\n      isEditing: false,\n      editingId: null\n    });\n  },\n  \"click .cancel, .template-grid-row .active\"() {\n    const instance = Template.instance();\n    // remove active rows from grid\n    instance.state.set({\n      isEditing: false,\n      editingId: null\n    });\n    $(\".template-grid-row\").removeClass(\"active\");\n  }\n});\n\n\nAutoForm.hooks({\n  \"email-template-edit-form\": {\n    onSubmit(insertDoc) {\n      this.event.preventDefault();\n\n      const templateId = this.docId;\n\n      Meteor.call(\"templates/email/update\", templateId, insertDoc, (error, result) => {\n        if (error) {\n          Alerts.toast(i18next.t(\"templateUpdateForm.alerts.failedToUpdate\", { err: error.message }), \"error\");\n          this.done(new Error(\"Failed to update template: \", error));\n          return false;\n        }\n        if (result) {\n          Alerts.toast(i18next.t(\"templateUpdateForm.alerts.templateUpdated\", \"Template successfully updated\"), \"success\");\n          this.done();\n        }\n      });\n    }\n  }\n});\n\n\nBlaze.TemplateInstance.prototype.parentTemplate = function (levels = 1) {\n  let view = Blaze.currentView;\n  let numLevel = levels;\n  while (view) {\n    if (view.name.substring(0, 9) === \"Template.\" && !numLevel) {\n      return view.templateInstance();\n    }\n    numLevel -= 1;\n    view = view.parentView;\n  }\n};\n","import \"./templates/settings.html\";\nimport \"./templates/settings.js\";\n","import SimpleSchema from \"simpl-schema\";\nimport { check } from \"meteor/check\";\nimport { Tracker } from \"meteor/tracker\";\nimport { Templates } from \"/lib/collections\";\nimport { shopIdAutoValue } from \"/lib/collections/schemas/helpers\";\nimport { registerSchema } from \"@reactioncommerce/schemas\";\n\n/**\n * EmailTemplates Schema\n*/\n\nexport const EmailTemplates = new SimpleSchema({\n  \"shopId\": {\n    type: String,\n    index: 1,\n    autoValue: shopIdAutoValue,\n    label: \"Template ShopId\"\n  },\n  \"name\": {\n    type: String,\n    optional: true\n  },\n  \"priority\": {\n    type: SimpleSchema.Integer,\n    optional: true,\n    defaultValue: 1\n  },\n  \"enabled\": {\n    type: Boolean,\n    defaultValue: true\n  },\n  \"route\": {\n    type: String,\n    optional: true\n  },\n  \"audience\": {\n    type: Array,\n    optional: true\n  },\n  \"audience.$\": {\n    type: String\n  },\n  \"type\": {\n    type: String,\n    defaultValue: \"email\",\n    optional: true\n  },\n  \"provides\": {\n    type: String,\n    defaultValue: \"template\"\n  },\n  \"block\": {\n    type: String,\n    optional: true\n  },\n  \"defaultData\": {\n    type: Object,\n    blackbox: true,\n    optional: true\n  },\n  \"template\": {\n    type: String,\n    optional: true\n  },\n  \"parser\": {\n    type: String,\n    optional: true\n  },\n  \"language\": {\n    type: String,\n    optional: true,\n    defaultValue: \"en\"\n  },\n  \"source\": {\n    type: String,\n    optional: true\n  },\n  \"title\": {\n    type: String,\n    optional: true\n  },\n  \"subject\": {\n    type: String,\n    optional: true\n  }\n}, { check, tracker: Tracker });\n\nregisterSchema(\"EmailTemplates\", EmailTemplates);\n\nTemplates.attachSchema(EmailTemplates, { selector: { type: \"email\" } });\n","export * from \"./emailtemplates\";\n","import { registerSchema } from \"@reactioncommerce/schemas\";\nimport { PackageConfig } from \"/lib/collections/schemas/registry\";\nimport { Discounts } from \"./discounts\";\n\n/**\n* DiscountsPackageConfig Schema\n*/\n\nexport const DiscountsPackageConfig = PackageConfig.clone().extend({\n  // Remove blackbox: true from settings obj\n  \"settings\": {\n    type: Object,\n    optional: true,\n    blackbox: false,\n    defaultValue: {}\n  },\n  \"settings.rates\": {\n    type: Object,\n    optional: true,\n    defaultValue: {}\n  },\n  \"settings.rates.enabled\": {\n    type: Boolean,\n    optional: true,\n    defaultValue: false\n  },\n  \"settings.rates.discounts\": {\n    type: Array,\n    optional: true\n  },\n  \"settings.rates.discounts.$\": {\n    type: Discounts\n  }\n});\n\nregisterSchema(\"DiscountsPackageConfig\", DiscountsPackageConfig);\n","import SimpleSchema from \"simpl-schema\";\nimport { check } from \"meteor/check\";\nimport { Tracker } from \"meteor/tracker\";\nimport { shopIdAutoValue } from \"/lib/collections/schemas/helpers\";\nimport { registerSchema } from \"@reactioncommerce/schemas\";\n\n// The Discounts Schema validates using multiple schemas\n// be sure to use `{ selector: { discountMethod: \"code\" } }`\n// to indicate which schema to apply in all updates\n\n/*\n* Discounts Tranaction History Schema\n*/\nexport const Transactions = new SimpleSchema({\n  cartId: {\n    type: String,\n    index: 1\n  },\n  userId: {\n    type: String,\n    index: 1\n  },\n  appliedAt: {\n    type: Date,\n    optional: true\n  }\n}, { check, tracker: Tracker });\n\nregisterSchema(\"Transactions\", Transactions);\n\n/*\n* Discounts Schema\n*/\n\nexport const Discounts = new SimpleSchema({\n  \"shopId\": {\n    type: String,\n    autoValue: shopIdAutoValue,\n    index: 1,\n    label: \"Discounts shopId\"\n  },\n  \"label\": {\n    type: String,\n    optional: true\n  },\n  \"description\": {\n    type: String,\n    optional: true\n  },\n  \"discountMethod\": {\n    label: \"Discount Method Type\",\n    type: String,\n    index: 1,\n    allowedValues: [\"code\", \"rate\"]\n  },\n  // discount is allowed to be string or number.\n  // it's a formula value (could be shipping code)\n  \"discount\": {\n    type: String,\n    optional: true\n  },\n  \"transactions\": {\n    type: Array,\n    optional: true\n  },\n  \"transactions.$\": {\n    type: Transactions\n  },\n  \"calculation\": {\n    type: Object,\n    optional: true,\n    label: \"Calculation\",\n    defaultValue: {}\n  },\n  \"calculation.method\": {\n    type: String,\n    index: 1,\n    defaultValue: \"discount\",\n    allowedValues: [\"credit\", \"discount\", \"sale\", \"shipping\"]\n  },\n  \"conditions\": {\n    type: Object,\n    optional: true,\n    label: \"Conditions\",\n    defaultValue: {}\n  },\n  \"conditions.order\": {\n    type: Object,\n    defaultValue: {}\n  },\n  \"conditions.order.min\": {\n    type: Number,\n    label: \"Mininum\",\n    defaultValue: 0.00\n  },\n  \"conditions.order.max\": {\n    type: Number,\n    label: \"Maximum\",\n    optional: true\n  },\n  \"conditions.order.startDate\": {\n    type: Date,\n    label: \"Start\",\n    optional: true\n  },\n  \"conditions.order.endDate\": {\n    type: Date,\n    label: \"End\",\n    optional: true\n  },\n  \"conditions.enabled\": {\n    type: Boolean,\n    label: \"Enabled\",\n    defaultValue: true,\n    optional: true\n  },\n  \"conditions.audience\": {\n    type: Array,\n    optional: true,\n    label: \"Audience\"\n  },\n  \"conditions.audience.$\": {\n    type: String,\n    optional: true,\n    label: \"Audience\"\n  },\n  \"conditions.permissions\": {\n    type: Array,\n    optional: true,\n    label: \"Permissions\"\n  },\n  \"conditions.permissions.$\": {\n    type: String,\n    optional: true,\n    label: \"Permission\"\n  },\n  \"conditions.products\": {\n    type: Array,\n    optional: true,\n    label: \"Products\"\n  },\n  \"conditions.products.$\": {\n    type: String,\n    optional: true,\n    label: \"Product\"\n  },\n  \"conditions.tags\": {\n    type: Array,\n    optional: true,\n    label: \"Tags\"\n  },\n  \"conditions.tags.$\": {\n    type: String,\n    optional: true,\n    label: \"Tag\"\n  }\n}, { check, tracker: Tracker });\n\nregisterSchema(\"Discounts\", Discounts);\n","export * from \"./discounts\";\nexport * from \"./config\";\n","import React, { Component } from \"react\";\nimport PropTypes from \"prop-types\";\nimport debounce from \"lodash/debounce\";\nimport { Meteor } from \"meteor/meteor\";\nimport { i18next } from \"/client/api\";\nimport { Translation } from \"/imports/plugins/core/ui/client/components\";\nimport { Components } from \"@reactioncommerce/reaction-components\";\n\nexport default class DiscountForm extends Component {\n  constructor(props) {\n    super(props);\n    this.state = {\n      discount: this.props.discount,\n      validationMessage: null,\n      validatedInput: this.props.validatedInput || false,\n      attempts: 0,\n      discountApplied: false\n    };\n    // debounce helper so to wait on user input\n    this.debounceDiscounts = debounce(() => {\n      this.setState({ validationMessage: \"\" });\n      const { discount } = this.state;\n      // handle discount code validation messages after attempt to apply\n      Meteor.call(\"discounts/codes/apply\", this.props.id, discount, this.props.collection, (error, result) => {\n        if (error) {\n          Alerts.toast(i18next.t(error.reason), \"error\");\n        }\n\n        if (typeof result === \"object\") {\n          this.setState({ validationMessage: result });\n        } else if (result !== 1) {\n          // if validationMessage isn't an object with i18n\n          // we will display an elliptical that's not\n          // actually done here though, just bit of foolery\n          this.timerId = Meteor.setTimeout(() => {\n            this.setState({ validationMessage: \"...\" });\n          }, 2000);\n        }\n      });\n    }, 800);\n\n    this.handleChange = this.handleChange.bind(this);\n    this.handleClick = this.handleClick.bind(this);\n  }\n\n  componentWillUnmount() {\n    if (this.timerId) Meteor.clearInterval(this.timerId);\n  }\n\n  // handle apply\n  renderApplied() {\n    return (\n      <Components.Button\n        className={{\n          \"btn\": false,\n          \"btn-default\": false\n        }}\n        tagName=\"span\"\n        label=\"Discount submitted.\"\n        i18nKeyLabel=\"discounts.submitted\"\n        onClick={this.handleClick}\n      />\n    );\n  }\n\n  // handle keydown and change events\n  handleChange(event) {\n    const { attempts } = this.state;\n    // ensure we don't submit on enter\n    if (event.keyCode === 13) {\n      event.preventDefault();\n      event.stopPropagation();\n    }\n    // clear input if user hits escape key\n    if (event.keyCode === 27) {\n      return this.setState({ discount: \"\", validatedInput: false, attempts: 0, discountApplied: false, validationMessage: null });\n    }\n    this.setState({\n      discount: event.target.value,\n      attempts: attempts + 1\n    });\n    // TODO: this.debounce doesn't always need to exec we should add some logic to determine based on attempts or some other\n    // cleverness if now is a good time to apply the code.\n    this.debounceDiscounts();\n  }\n\n  // handle display or not\n  handleClick(event) {\n    event.preventDefault();\n    this.setState({ validatedInput: true });\n  }\n\n  // loader button\n  loader() {\n    const { attempts, discount, validationMessage } = this.state;\n    let loader;\n    if (validationMessage && validationMessage.i18nKeyLabel && attempts > 3) {\n      loader = <Translation defaultValue={validationMessage.i18nKeyLabel} i18nKey={validationMessage.i18nKey}/>;\n    } else if (validationMessage) {\n      loader = <i className=\"fa fa-ellipsis-h fa-fw\"/>;\n    } else if (discount && discount.length >= 10 && attempts >= 12) {\n      loader = <i className=\"fa fa-stop-circle fa-fw\"/>;\n    } else if (discount && discount.length >= 2 && attempts >= 2) {\n      loader = <i className=\"fa fa-circle-o-notch fa-spin fa-fw\"/>;\n    } else {\n      loader = <i className=\"fa fa-search fa-fw\"/>;\n    }\n\n    return loader;\n  }\n\n  // render discount form\n  renderDiscountForm() {\n    return (\n      <form>\n        <label htmlFor=\"discount-url\">\n          <Translation defaultValue=\"Discount Code\" i18nKey=\"discounts.discountLabel\"/>\n        </label>\n        <div className=\"input-group\">\n          <input\n            onChange={this.handleChange}\n            onKeyDown={this.handleChange}\n            className=\"form-control\"\n            id=\"discount-input\"\n            aria-describedby=\"discount-input-addon\"\n          />\n          <span className=\"input-group-addon\" id=\"discount-input-addon\">\n            {this.loader()}\n          </span>\n        </div>\n      </form>\n    );\n  }\n  // have a code link\n  renderDiscountLink() {\n    return (\n      <Components.Button\n        className={{\n          \"btn\": false,\n          \"btn-default\": false\n        }}\n        tagName=\"span\"\n        label=\"Have a code? Enter it here.\"\n        i18nKeyLabel=\"discounts.enterItHere\"\n        onClick={this.handleClick}\n      />\n    );\n  }\n\n  // render discount code input form\n  render() {\n    const { discountApplied, validatedInput } = this.state;\n    if (discountApplied === true && validatedInput === true) {\n      return this.renderApplied();\n    } else if (validatedInput === true) {\n      return this.renderDiscountForm();\n    }\n    return this.renderDiscountLink();\n  }\n}\n\nDiscountForm.propTypes = {\n  collection: PropTypes.string,\n  discount: PropTypes.string,\n  id: PropTypes.string,\n  validatedInput: PropTypes.bool\n};\n","import React, { Component } from \"react\";\nimport PropTypes from \"prop-types\";\nimport { Meteor } from \"meteor/meteor\";\nimport { registerComponent, composeWithTracker } from \"@reactioncommerce/reaction-components\";\nimport { Translation, IconButton } from \"/imports/plugins/core/ui/client/components\";\nimport { Reaction } from \"/client/api\";\nimport DiscountForm from \"./form\";\n\nclass DiscountList extends Component {\n  constructor(props) {\n    super(props);\n    this.handleClick = this.handleClick.bind(this);\n  }\n\n  // handle remove click\n  handleClick(event, codeId) {\n    return Meteor.call(\"discounts/codes/remove\", this.props.id, codeId, this.props.collection);\n  }\n  // list items\n  renderList() {\n    const listItems = this.props.listItems.map((listItem) => this.renderItem(listItem.id, listItem.code));\n\n    return (\n      <div className=\"rui list-group\">{listItems}</div>\n    );\n  }\n  // render item\n  renderItem(_id, code) {\n    let TrashCan;\n\n    if (this.props.collection !== \"Orders\") {\n      TrashCan = (\n        <div className=\"pull-right\">\n          <IconButton icon=\"fa fa-remove\" onClick={(e) => this.handleClick(e, _id)}/>\n        </div>\n      );\n    }\n    return (\n      <div className=\"rui list-group-item\" key={_id}>\n        <span>\n          {code}&nbsp;\n          <Translation defaultValue=\"code\" i18nKey={\"discounts.code\"} />&nbsp;\n          <Translation defaultValue=\"Discount applied\" i18nKey={\"discounts.applied\"} />\n        </span>\n        {TrashCan}\n      </div>\n    );\n  }\n\n  // load form input view\n  renderNoneFound() {\n    return (\n      <DiscountForm id={this.props.id} collection={this.props.collection} validatedInput={this.props.validatedInput} />\n    );\n  }\n\n  // render list view\n  render() {\n    const { listItems } = this.props;\n    return (listItems.length >= 1) ? this.renderList() : this.renderNoneFound();\n  }\n}\n\nDiscountList.propTypes = {\n  collection: PropTypes.string,\n  id: PropTypes.string,\n  listItems: PropTypes.array,\n  validatedInput: PropTypes.bool\n};\n\nfunction composer(props, onData) {\n  const currentCart = Reaction.Collections[props.collection].findOne({\n    _id: props.id\n  });\n\n  const listItems = [];\n  const listItem = currentCart.billing.find((element) => element.paymentMethod && element.paymentMethod.processor === \"code\");\n  if (listItem) {\n    listItems.push({\n      id: listItem._id,\n      code: listItem.paymentMethod.code,\n      discount: listItem.paymentMethod.amount\n    });\n  }\n\n  onData(null, {\n    collection: props.collection,\n    validatedInput: props.validatedInput,\n    id: props.id,\n    listItems\n  });\n}\n\nconst options = {\n  propsToWatch: [\"billing\"]\n};\n\nconst discountListComponent = composeWithTracker(composer, options)(DiscountList);\nregisterComponent(\"DiscountList\", discountListComponent);\n\nexport default discountListComponent;\n","import React from \"react\";\nimport shallowEqual from \"shallowequal\";\nimport hoistStatics from \"hoist-non-react-statics\";\nimport _ from \"lodash\";\nimport { getDisplayName } from \"recompose\";\n\nexport default function compose(dataLoader, options = {}) {\n  return function (Child) {\n    const {\n      errorHandler = (err) => { throw err; },\n      loadingHandler = () => null,\n      env = {},\n      pure = false,\n      propsToWatch = null, // Watch all the props.\n      shouldSubscribe = null,\n      shouldUpdate = null\n    } = options;\n\n    class Container extends React.Component {\n      constructor(props, ...args) {\n        super(props, ...args);\n        this.state = {};\n        this.propsCache = {};\n      }\n\n      componentWillMount() {\n        this._subscribe(this.props);\n      }\n\n      componentWillReceiveProps(props) {\n        this._subscribe(props);\n      }\n\n      shouldComponentUpdate(nextProps, nextState) {\n        if (shouldUpdate) {\n          return shouldUpdate(this.props, nextProps);\n        }\n\n        if (!pure) {\n          return true;\n        }\n\n        return (\n          !shallowEqual(this.props, nextProps) ||\n          this.state.error !== nextState.error ||\n          !shallowEqual(this.state.data, nextState.data)\n        );\n      }\n\n      componentWillUnmount() {\n        this._unmounted = true;\n        this._unsubscribe();\n      }\n\n      _shouldSubscribe(props) {\n        const firstRun = !this._cachedWatchingProps;\n        const nextProps = _.pick(props, propsToWatch);\n        const currentProps = this._cachedWatchingProps || {};\n        this._cachedWatchingProps = nextProps;\n\n        if (firstRun) return true;\n        if (typeof shouldSubscribe === \"function\") {\n          return shouldSubscribe(currentProps, nextProps);\n        }\n\n        if (propsToWatch === null) return true;\n        if (propsToWatch.length === 0) return false;\n        return !shallowEqual(currentProps, nextProps);\n      }\n\n      _subscribe(props) {\n        if (!this._shouldSubscribe(props)) return;\n\n        const onData = (error, data) => {\n          if (this._unmounted) {\n            throw new Error(`Trying to set data after component(${Container.displayName}) has unmounted.`);\n          }\n\n          const payload = { error, data };\n          this.setState(payload);\n        };\n\n        // We need to do this before subscribing again.\n        this._unsubscribe();\n        this._stop = dataLoader(props, onData, env);\n      }\n\n      _unsubscribe() {\n        if (this._stop) {\n          this._stop();\n        }\n      }\n\n      render() {\n        const { props } = this;\n        const { data, error } = this.state;\n\n        if (error) {\n          return errorHandler(error);\n        }\n\n        if (!data) {\n          return loadingHandler();\n        }\n\n        const finalProps = {\n          ...props,\n          ...data\n        };\n\n        return (\n          <Child {...finalProps} />\n        );\n      }\n    }\n\n    Container.__composerData = {\n      dataLoader,\n      options\n    };\n\n    Container.displayName = `Tracker(${getDisplayName(Child)})`;\n\n    hoistStatics(Container, Child);\n\n    return Container;\n  };\n}\n","export { default as compose } from \"./compose\";\nexport * from \"./tracker\";\n","import React from \"react\";\nimport { Tracker } from \"meteor/tracker\";\nimport { Components } from \"../components\";\nimport compose from \"./compose\";\n\n/**\n * @file **Reaction Components API** - Most of the React components in the Reaction UI can be replaced or extended with the API outlined here. This allows anyone to create a custom plugin that can easily change the look of the UI and/or extend its functionality without having to edit core Reaction code. See {@link https://docs.reactioncommerce.com/reaction-docs/master/components-api full tutorial and documentation}.\n *\n * @example // Register a component and container(s) with a name.\n * // The raw component can then be extended or replaced.\n *\n * // Structure of a component in the list:\n *\n * ComponentsTable.MyComponent = {\n *    name: 'MyComponent',\n *    hocs: [fn1, fn2],\n *    rawComponent: React.Component\n * }\n * @namespace Components\n */\n\n/**\n * @name getTrackerLoader\n * @summary getTrackerLoader creates a Meteor Tracker to watch dep updates from\n * the passed in reactiveMapper function\n * @param  {Function} reactiveMapper data fetching function to bind to a tracker\n * @return {Function} composed function\n * @memberof Components\n * @private\n */\nfunction getTrackerLoader(reactiveMapper) {\n  return (props, onData, env) => {\n    let trackerCleanup = null;\n    const handler = Tracker.nonreactive(() => Tracker.autorun(() => {\n      // assign the custom clean-up function.\n      trackerCleanup = reactiveMapper(props, onData, env);\n    }));\n\n    return () => {\n      if (typeof trackerCleanup === \"function\") trackerCleanup();\n      return handler.stop();\n    };\n  };\n}\n\n\n/**\n * @name composeWithTracker\n * @method\n * @summary A higher order component to wrap a reactive function with Meteor's Tracker\n * @param {Function} reactiveMapper data fetching function to bind to a tracker\n * @param {React.Component|Boolean|Object} options can be a custom loader, false (to disable), or a full options object\n * @return {Function} composed function\n * @memberof Components\n */\nexport function composeWithTracker(reactiveMapper, options) {\n  let composeOptions = {};\n\n  if (typeof options === \"undefined\") {\n    // eslint-disable-next-line react/display-name\n    composeOptions.loadingHandler = () => <Components.Loading />;\n  }\n\n  if (typeof options === \"function\") {\n    const CustomLoader = options;\n    // eslint-disable-next-line\n    composeOptions.loadingHandler = () => <CustomLoader />;\n  }\n\n  if (typeof options === \"object\") {\n    composeOptions = options;\n  }\n\n  return compose(getTrackerLoader(reactiveMapper), composeOptions);\n}\n","import { compose, setDisplayName } from \"recompose\";\n\nexport const Components = {}; // populated with final wrapped components\nexport const ComponentsTable = {}; // storage for separate elements of each component\n\n/**\n * @example // Register a component and container(s) with a name.\n * // The raw component can then be extended or replaced.\n *\n * // Structure of a component in the list:\n *\n * ComponentsTable.MyComponent = {\n *    name: 'MyComponent',\n *    hocs: [fn1, fn2],\n *    rawComponent: React.Component\n * }\n * @name registerComponent\n * @method\n * @memberof Components\n * @param {String} name The name of the component to register.\n * @param {React.Component} rawComponent Interchangeable/extendable component.\n * @param {Function|Array} hocs The HOCs to wrap around the raw component.\n *\n * @returns {React.Component} returns the final wrapped component\n */\nexport function registerComponent(name, rawComponent, hocs = []) {\n  if (!name || !rawComponent) {\n    throw new Error(\"A name and component are required for registerComponent\");\n  }\n\n  // store the component in the table\n  ComponentsTable[name] = {\n    name,\n    rawComponent,\n    hocs: Array.isArray(hocs) ? hocs : [hocs]\n  };\n}\n\n\n/**\n * @name registerHOC\n * @method\n * @summary Register containers (HOC) with a name.\n * If some containers already exist for the component, they will be extended.\n * @param {String} name The name of the component to register.\n * @param {Function|Array} hocs The HOCs to wrap around the raw component.\n * @memberof Components\n * @returns {undefined}\n */\nexport function registerHOC(name, hocs = []) {\n  if (!name || !hocs) {\n    throw new Error(\"A name and HOC(s) are required for registerHOC\");\n  }\n\n  const newHOCs = Array.isArray(hocs) ? hocs : [hocs];\n\n  const existingComponent = ComponentsTable[name];\n\n  // Check to see if this component has already been registered and whether it has\n  // HOC's to merge with our new ones. If not, just register it like a new component.\n  // This allows us to register HOCs _before_ registering the UI component.\n  // Just keep in mind that the resulting component will definitely throw an error\n  // if a UI component doesn't eventually get registered.\n  if (!!existingComponent && !!existingComponent.hocs) {\n    const existingHOCs = existingComponent.hocs;\n\n    ComponentsTable[name] = {\n      name,\n      hocs: [...newHOCs, ...existingHOCs]\n    };\n  } else {\n    ComponentsTable[name] = {\n      name,\n      hocs: newHOCs\n    };\n  }\n}\n\n\n/**\n * @name getComponent\n * @method\n * @summary Get a component registered with registerComponent(name, component, ...hocs).\n * @param {String} name The name of the component to get.\n * @return {Function|React.Component} A (wrapped) React component\n * @memberof Components\n */\nexport function getComponent(name) {\n  const component = ComponentsTable[name];\n\n  if (!component) {\n    throw new Error(`Component ${name} not registered.`);\n  }\n\n  const hocs = component.hocs.map((hoc) => (Array.isArray(hoc) ? hoc[0](hoc[1]) : hoc));\n\n  return compose(...hocs, setDisplayName(`Reaction(${name})`))(component.rawComponent);\n}\n\n\n/**\n * @name replaceComponent\n * @method\n * @summary Replace a Reaction component with a new component and optionally add one or more higher order components.\n * This function keeps track of the previous HOCs and wraps the new HOCs around previous ones\n * @param {String} name The name of the component to register.\n * @param {React.Component} newComponent Interchangeable/extendable component.\n * @param {Function|Array} hocs The HOCs to compose with the raw component.\n * @returns {Function|React.Component} A component callable with Components[name]\n * @memberof Components\n */\nexport function replaceComponent(name, newComponent, hocs = []) {\n  const previousComponent = ComponentsTable[name];\n\n  if (!previousComponent) {\n    throw new Error(`Component '${name}' not found. Use registerComponent to create it.`);\n  }\n\n  const newHocs = Array.isArray(hocs) ? hocs : [hocs];\n\n  return registerComponent(name, newComponent, [...newHocs, ...previousComponent.hocs]);\n}\n\n\n/**\n * @name getRawComponent\n * @method\n * @summary Get the raw UI component without any possible HOCs wrapping it.\n * @param {String} name The name of the component to get.\n * @returns {Function|React.Component} A React component\n * @memberof Components\n */\nexport const getRawComponent = (name) => ComponentsTable[name].rawComponent;\n\n\n/**\n * @name getHOCs\n * @method\n * @summary Get the raw UI component without any possible HOCs wrapping it.\n * @param {String} name The name of the component to get.\n * @returns {Function|React.Component} Array of HOCs\n * @memberof Components\n */\nexport const getHOCs = (name) => ComponentsTable[name].hocs;\n\n\n/**\n * @name copyHOCs\n * @method\n * @summary Wrap a new component with the HOCs from a different component\n * @param {String} sourceComponentName The name of the component to get the HOCs from\n * @param {Function|React.Component} targetComponent Component to wrap\n * @returns {Function|React.Component} A new component wrapped with the HOCs of the source component\n * @memberof Components\n */\nexport function copyHOCs(sourceComponentName, targetComponent) {\n  const sourceComponent = ComponentsTable[sourceComponentName];\n  return compose(...sourceComponent.hocs)(targetComponent);\n}\n\n\n/**\n * @name loadRegisteredComponents\n * @method\n * @summary Populate the final Components object with the contents of the lookup table.\n * This should only be called once on app startup.\n * @returns {Object} An object containing all of the registered components\n * @memberof Components\n **/\nexport function loadRegisteredComponents() {\n  Object.keys(ComponentsTable).forEach((name) => {\n    Components[name] = getComponent(name);\n  });\n\n  return Components;\n}\n","import _ from \"lodash\";\nimport { Meteor } from \"meteor/meteor\";\nimport { Roles } from \"meteor/alanning:roles\";\nimport { Accounts, Groups } from \"/lib/collections\";\nimport { lifecycle } from \"recompose\";\nimport { composeWithTracker } from \"./composer\";\n\nlet Logger;\nlet Reaction;\n\nif (Meteor.isClient) {\n  ({ Logger } = require(\"/client/api\"));\n  ({ Reaction } = require(\"/client/api\"));\n} else {\n  ({ Logger } = require(\"/server/api\"));\n  ({ Reaction } = require(\"/server/api\"));\n}\n\n\n/**\n * @name withCurrentUser\n * @method\n * @summary A wrapper to reactively inject the current user into a component\n * @param {Function|React.Component} component - the component to wrap\n * @return {Function} the new wrapped component with a \"currentUser\" prop\n * @memberof Components\n */\nexport function withCurrentUser(component) {\n  return composeWithTracker((props, onData) => {\n    onData(null, { currentUser: Meteor.user() });\n  })(component);\n}\n\n\n/**\n * @name withMoment\n * @method\n * @summary A wrapper to reactively inject the moment package into a component\n * @param {Function|React.Component} component - the component to wrap\n * @return {Function} the new wrapped component with a \"moment\" prop\n * @memberof Components\n */\nexport function withMoment(component) {\n  return lifecycle({\n    componentDidMount() {\n      import(\"moment\")\n        .then((moment) => {\n          moment.locale(Reaction.Locale.get().language);\n          this.setState({\n            moment\n          });\n        })\n        .catch((error) => {\n          Logger.debug(error, \"moment.js async import error\");\n        });\n    }\n  })(component);\n}\n\n\n/**\n * @name withMomentTimezone\n * @method\n * @summary A wrapper to reactively inject the moment package into a component\n * @param {Function|React.Component} component - the component to wrap\n * @return {Function} the new wrapped component with a \"moment\" prop\n * @memberof Components\n */\nexport function withMomentTimezone(component) {\n  return lifecycle({\n    componentDidMount() {\n      import(\"moment-timezone\")\n        .then((moment) => {\n          this.setState({\n            momentTimezone: moment.tz\n          });\n        })\n        .catch((error) => {\n          Logger.debug(error, \"moment.js async import error\");\n        });\n    }\n  })(component);\n}\n\n\n/**\n * @name withCurrentAccount\n * @method\n * @summary A wrapper to reactively inject the current account into a component.\n * This assumes you have signed up and are not an anonymous user.\n * @param {Function|React.Component} component - the component to wrap\n * @return {Function} the new wrapped component with a \"currentAccount\" prop\n * @memberof Components\n */\nexport function withCurrentAccount(component) {\n  return composeWithTracker((props, onData) => {\n    const shopId = Reaction.getShopId();\n    const user = Meteor.user();\n\n    if (!shopId || !user) {\n      return null;\n    }\n\n    const accSub = Meteor.subscribe(\"Accounts\", user._id);\n    if (accSub.ready()) {\n      // shoppers should always be guests\n      const isGuest = Reaction.hasPermission(\"guest\");\n      // but if a user has never logged in then they are anonymous\n      const isAnonymous = Roles.userIsInRole(user, \"anonymous\", shopId);\n      // this check for \"anonymous\" uses userIsInRole instead of hasPermission because hasPermission\n      // always return `true` when logged in as the owner.\n      // But in this case, the anonymous check should be false when a user is logged in\n      const account = Accounts.findOne(user._id);\n\n      onData(null, { currentAccount: isGuest && !isAnonymous && account });\n    }\n  }, false)(component);\n}\n\n\n/**\n * @name withIsAdmin\n * @method\n * @summary A wrapper to reactively inject the current user's admin status.\n * Sets a boolean 'isAdmin' prop on the wrapped component.\n * @param {Function|React.Component} component - the component to wrap\n * @return {Function} the new wrapped component with an \"isAdmin\" prop\n * @memberof Components\n */\nexport function withIsAdmin(component) {\n  return composeWithTracker((props, onData) => {\n    onData(null, { isAdmin: Reaction.hasAdminAccess() });\n  })(component);\n}\n\n/**\n * @name withPermissions\n * @method\n * @summary A wrapper to reactively inject a user's permission based on group or roles\n * Group access is given to users at that group level and above\n * @param  {Array|String} roles String or array of strings of permissions to check. default: roles=[\"guest\", \"anonymous\"]\n * @param  {String} group Slug title of a group to check against. Group option supercedes roles option. default: group=\"customer\".\n * @return {Function} the new wrapped component with a \"hasPermissions\" prop\n * @memberof Components\n */\nexport function withPermissions({ roles = [\"guest\", \"anonymous\"], group }) {\n  return composeWithTracker((props, onData) => {\n    let hasPermissions = Reaction.hasPermission(roles);\n\n    if (!group) {\n      return onData(null, { hasPermissions });\n    }\n\n    // if group is passed, use group access instead\n    const grpSub = Meteor.subscribe(\"Groups\");\n\n    if (grpSub.ready()) {\n      const grp = Groups.findOne({ slug: group });\n\n      if (grp && grp.permissions) {\n        const user = Meteor.user();\n        const permissions = user.roles[Reaction.getShopId()] || [];\n        // checks that userPermissions includes all elements from groupPermissions\n        hasPermissions = _.difference(grp.permissions, permissions).length === 0;\n      }\n\n      onData(null, { hasPermissions });\n    }\n  });\n}\n\n\n/**\n * @name withIsOwner\n * @method\n * @summary A wrapper to reactively inject the current user's owner status.\n * Sets a boolean 'isOwner' prop on the wrapped component.\n * @param {Function|React.Component} component - the component to wrap\n * @return {Function} the new wrapped component with an \"isOwner\" prop\n * @memberof Components\n */\nexport function withIsOwner(component) {\n  return composeWithTracker((props, onData) => {\n    onData(null, { isOwner: Reaction.hasOwnerAccess() });\n  })(component);\n}\n","export { composeWithTracker } from \"./composer\";\nexport * from \"./components\";\nexport * from \"./hoc\";\n","import { Meteor } from \"meteor/meteor\";\nimport { Mongo } from \"meteor/mongo\";\nimport { check, Match } from \"meteor/check\";\nimport createJobCollection from \"@reactioncommerce/job-queue\";\n\nconst later = Meteor.isServer && require(\"later\");\n\nconst classes = createJobCollection({ Mongo, Meteor, check, Match, later });\n\nexport const { Job, JobCollection } = classes;\n","/**\n * @file Route Hook Methods - The Router.Hooks namespace provides a router-agnostic API for registering functions to be called either on specific routes or on every route. Read more about [Routing in Reaction](https://docs.reactioncommerce.com/reaction-docs/master/routing).\n *\n * @namespace Router.Hooks\n */\n\nconst Hooks = {\n  _hooks: {\n    onEnter: {},\n    onExit: {}\n  },\n\n  _addHook(type, routeName, callback) {\n    if (typeof this._hooks[type][routeName] === \"undefined\") {\n      this._hooks[type][routeName] = [];\n    }\n    this._hooks[type][routeName].push(callback);\n  },\n\n  enter(callback) {\n    if (Array.isArray(callback)) {\n      callback.forEach((cb) => {\n        this.onEnter(cb);\n      });\n    } else {\n      this.onEnter(callback);\n    }\n  },\n\n  leave(callback) {\n    if (Array.isArray(callback)) {\n      callback.forEach((cb) => {\n        this.onExit(cb);\n      });\n    } else {\n      return this.onExit(callback);\n    }\n  },\n\n  /**\n   * @method onEnter\n   * @memberof Router.Hooks\n   * @summary Register a hook on a specific route\n   * Can be called as many times as needed to add more than one callback\n   * @example // create a function to do something on the product detail page\nfunction logSomeStuff() {\n  console.log(\"We're arriving at the product page!\");\n}\n// add that to the product detail page onEnter hook\nRouter.Hooks.onEnter(\"product\", logSomeStuff);\n   * @param  {String}   routeName Name of route\n   * @param  {Function} callback  Callback method\n   * @return {undefined}\n   */\n  onEnter(routeName, callback) {\n    // if first argument is a function it's a global callback\n    if (arguments.length === 1 && typeof routeName === \"function\") {\n      const cb = routeName;\n      return this._addHook(\"onEnter\", \"GLOBAL\", cb);\n    }\n    // route-specific onEnter callback\n    return this._addHook(\"onEnter\", routeName, callback);\n  },\n\n  /**\n   * @method onExit\n   * @memberof Router.Hooks\n   * @summary Register a hook on a specific route\n   * Can be called as many times as needed to add more than one callback\n   * @param  {String}   routeName Name of route\n   * @param  {Function} callback  Callback method\n   * @return {undefined}\n   */\n  onExit(routeName, callback) {\n    // if first argument is a function it's a global callback\n    if (arguments.length === 1 && typeof routeName === \"function\") {\n      const cb = routeName;\n      return this._addHook(\"onExit\", \"GLOBAL\", cb);\n    }\n    // route-specific onExit callback\n    return this._addHook(\"onExit\", routeName, callback);\n  },\n\n  /**\n   * @method get\n   * @memberof Router.Hooks\n   * @summary Get all registered hooks for a specific route\n   * @param  {String} type Type of hook - `\"onEnter\"` or `\"onExit\"`\n   * @param  {String} name Name of Route\n   * @return {Array}  Array of hooks\n   */\n  get(type, name) {\n    const group = this._hooks[type] || {};\n    const callbacks = group[name];\n    return (typeof callbacks !== \"undefined\" && !!callbacks.length) ? callbacks : [];\n  },\n\n  /**\n   * @method run\n   * @memberof Router.Hooks\n   * @summary Run all registered hooks\n   * @param  {String} type Type of hook - `\"onEnter\"` or `\"onExit\"`\n   * @param  {String} name \"GLOBAL\" for all registered global hooks\n   * @param  {Object} [context] Context object, optional, or `routeName`\n   * @return {Array}  Array of hooks\n   */\n  run(type, name, context) {\n    const callbacks = this.get(type, name);\n    if (typeof callbacks !== \"undefined\" && !!callbacks.length) {\n      return callbacks.forEach((callback) => callback(context));\n    }\n    return null;\n  }\n};\n\nexport default Hooks;\n","export { Link, NavLink, Prompt, withRouter } from \"react-router-dom\";\nexport { default as Router } from \"./router\";\n","import React from \"react\";\nimport { Route } from \"react-router\";\nimport createBrowserHistory from \"history/createBrowserHistory\";\nimport createMemoryHistory from \"history/createMemoryHistory\";\nimport pathToRegexp from \"path-to-regexp\";\nimport queryParse from \"query-parse\";\nimport Immutable from \"immutable\";\nimport { uniqBy } from \"lodash\";\nimport { Meteor } from \"meteor/meteor\";\nimport Blaze from \"meteor/gadicc:blaze-react-component\";\nimport { Template } from \"meteor/templating\";\nimport { Session } from \"meteor/session\";\nimport { Tracker } from \"meteor/tracker\";\nimport { Packages, Shops } from \"/lib/collections\";\nimport { getComponent } from \"@reactioncommerce/reaction-components/components\";\nimport Hooks from \"./hooks\";\n\n// Using a ternary operator here to avoid a mutable export - open to suggestions for a better way to do this\nexport const history = Meteor.isClient ? createBrowserHistory() : createMemoryHistory();\n\n// Private vars\nlet currentRoute = Immutable.Map();\nconst routerReadyDependency = new Tracker.Dependency();\nconst routerChangeDependency = new Tracker.Dependency();\n\n/** Class representing a static base router */\nclass Router {\n  /**\n   * history\n   * @type {history}\n   */\n  static history = history\n\n  /**\n   * Hooks\n   * @type {Hooks}\n   */\n  static Hooks = Hooks\n\n  /**\n   * Registered route definitions\n   * @type {Array}\n   */\n  static routes = []\n\n  /**\n   * Router initialization state\n   * @type {Boolean}\n   */\n  static _initialized = false;\n\n  /**\n   * Active classname for active routes\n   * @type {String}\n   */\n  static activeClassName = \"active\";\n\n  /**\n   * Routes array\n   * @type {Array}\n   * @param {Array} value An array of objects\n   */\n  static set _routes(value) {\n    Router.routes = value;\n  }\n\n  static get _routes() {\n    return Router.routes;\n  }\n\n  /**\n   * Triggers reactively on router ready state changed\n   * @return {Boolean} Router initalization state\n   */\n  static ready() {\n    routerReadyDependency.depend();\n    return Router._initialized;\n  }\n\n  /**\n   * Re-triggers router ready dependency\n   * @return {undefined}\n   */\n  static triggerRouterReady() {\n    routerReadyDependency.changed();\n  }\n\n  /**\n   * Hooks\n   * @type {Hooks}\n   */\n  static get triggers() {\n    return Hooks;\n  }\n\n  /**\n   * Get the current route date. Not reactive.\n   * @return {Object} Object containing route data\n   */\n  static current() {\n    return currentRoute.toJS();\n  }\n\n  /**\n   * Set current route data. Is reactive.\n   * @param {Object} routeData Object containing route data\n   * @return {undefined}\n   */\n  static setCurrentRoute(routeData) {\n    currentRoute = Immutable.Map(routeData);\n    routerChangeDependency.changed();\n  }\n\n  /**\n   * Get the name of the current route. Is reactive.\n   * @return {String} Name of current route\n   */\n  static getRouteName() {\n    const current = Router.current();\n\n    return (current.route && current.route.name) || \"\";\n  }\n\n  /**\n   * Get param by name. Is reactive.\n   * @param  {String} name Param name\n   * @return {String|undefined} String value or undefined\n   */\n  static getParam(name) {\n    routerChangeDependency.depend();\n    const current = Router.current();\n\n    return (current.params && current.params[name]) || undefined;\n  }\n\n  /**\n   * Get query param by name\n   * @param  {String} name Query param name. Is reactive.\n   * @return {String|undefined} String value or undefined\n   */\n  static getQueryParam(name) {\n    routerChangeDependency.depend();\n    const current = Router.current();\n\n    return (current.query && current.query[name]) || undefined;\n  }\n\n  /**\n   * Merge new query params with current params\n   * @param {Object} newParams Object containing params\n   * @return {undefined}\n   */\n  static setQueryParams(newParams) {\n    const current = Router.current();\n\n    // Merge current and new params\n    const queryParams = Object.assign({}, current.query, newParams);\n\n    // Any param marked as null or undefined will be removed\n    for (const key in queryParams) {\n      if (queryParams[key] === null || queryParams[key] === undefined) {\n        delete queryParams[key];\n      }\n    }\n\n    // Update route\n    Router.go(current.route.name, current.params, queryParams);\n  }\n\n  /**\n   * Watch path change. Is Reactive.\n   * @return {undefined}\n   */\n  static watchPathChange() {\n    routerChangeDependency.depend();\n  }\n}\n\n/**\n * pathFor\n * @summary get current router path\n * @param {String} path - path to fetch\n * @param {Object} options - url params\n * @return {String} returns current router path\n */\nRouter.pathFor = (path, options = {}) => {\n  const foundPath = Router.routes.find((pathObject) => {\n    if (pathObject.route) {\n      if (options.hash && options.hash.shopSlug) {\n        if (pathObject.options.name === path && pathObject.route.includes(\"shopSlug\")) {\n          return true;\n        }\n      } else if (pathObject.options.name === path && !pathObject.route.includes(\"shopSlug\")) {\n        return true;\n      }\n    }\n\n    // No path found\n    return false;\n  });\n\n  if (foundPath) {\n    // Pull the hash out of options\n    //\n    // This is becuase of Spacebars that we have hash.\n    // Spacebars takes all params passed into a template tag and places\n    // them into the options.hash object. This will also include any `query` params\n    const hash = (options && options.hash) || {};\n\n    // Create an executable function based on the route regex\n    const toPath = pathToRegexp.compile(foundPath.route);\n\n    // Compile the regex path with the params from the hash\n    const compiledPath = toPath(hash);\n\n    // Convert the query object to a string\n    // e.g. { a: \"one\", b: \"two\"} => \"a=one&b=two\"\n    const queryString = queryParse.toString(hash.query);\n\n    // Return the compiled path + query string if we have one\n    if (typeof queryString === \"string\" && queryString.length) {\n      return `${compiledPath}?${queryString}`;\n    }\n\n    // Return only the compiled path\n    return compiledPath;\n  }\n\n  return \"/\";\n};\n\n/**\n * Navigate to path with params and query\n * @param  {String} path Path string\n * @param  {Object} params Route params object\n * @param  {Object} query Query params object\n * @return {undefined} undefined\n */\nRouter.go = (path, params, query) => {\n  let actualPath;\n\n  const routerGo = () => {\n    if (typeof path === \"string\" && path.startsWith(\"/\")) {\n      actualPath = path;\n    } else {\n      actualPath = Router.pathFor(path, {\n        hash: {\n          ...params,\n          query\n        }\n      });\n    }\n\n    if (window) {\n      history.push(actualPath);\n    }\n  };\n\n  // if Router is in a non ready/initialized state yet, wait until it is\n  if (!Router.ready()) {\n    Tracker.autorun((routerReadyWaitFor) => {\n      if (Router.ready()) {\n        routerReadyWaitFor.stop();\n        routerGo();\n      }\n    });\n\n    return;\n  }\n\n  routerGo();\n};\n\n/**\n * Replace location\n * @param  {String} path Path string\n * @param  {Object} params Route params object\n * @param  {Object} query Query params object\n * @return {undefined} undefined\n */\nRouter.replace = (path, params, query) => {\n  const actualPath = Router.pathFor(path, {\n    hash: {\n      ...params,\n      query\n    }\n  });\n\n  if (window) {\n    history.replace(actualPath);\n  }\n};\n\n/**\n * Reload router\n * @return {undefined} undefined\n */\nRouter.reload = () => {\n  const current = Router.current();\n\n  if (window) {\n    history.replace(current.route.fullPath || \"/\");\n  }\n};\n\n/**\n * isActive\n * @summary general helper to return \"active\" when on current path\n * @example {{active \"name\"}}\n * @param {String} routeName - route name as defined in registry\n * @return {String} return \"active\" or null\n */\nRouter.isActiveClassName = (routeName) => {\n  const current = Router.current();\n  const { group } = current.route;\n  let prefix = \"\";\n\n  if (current.route) {\n    const { path } = current.route;\n\n    if (group && group.prefix) {\n      ({ prefix } = current.route.group);\n    }\n\n    // Match route\n    if (prefix.length && routeName.startsWith(prefix) && path === routeName) {\n      // Route name is a path and starts with the prefix. (default '/reaction')\n      return Router.activeClassName;\n    } else if (routeName.startsWith(\"/\") && path === routeName) {\n      // Route name isa  path and starts with slash, but was not prefixed\n      return Router.activeClassName;\n    } else if (current.route.name === routeName) {\n      // Route name is the actual name of the route\n      return Router.activeClassName;\n    }\n  }\n\n  return \"\";\n};\n\n/**\n * hasRoutePermission\n * check if user has route permissions\n * @access private\n * @param  {Object} route - route context\n * @return {Boolean} returns `true` if user is allowed to see route, `false` otherwise\n */\nfunction hasRoutePermission(route) {\n  const routeName = route.name;\n\n  return routeName === \"index\" ||\n    routeName === \"not-found\" ||\n    Router.Reaction.hasPermission(route.permissions, Meteor.userId());\n}\n\n\n/**\n * getRegistryRouteName\n * assemble route name to be standard\n * prefix/package name + registry name or route\n * @param  {String} packageName  [package name]\n * @param  {Object} registryItem [registry object]\n * @return {String}              [route name]\n */\nfunction getRegistryRouteName(packageName, registryItem) {\n  let routeName;\n  if (packageName && registryItem) {\n    if (registryItem.name) {\n      routeName = registryItem.name;\n    } else if (registryItem.template) {\n      routeName = `${packageName}/${registryItem.template}`;\n    } else {\n      routeName = packageName;\n    }\n    // dont include params in the name\n    [routeName] = routeName.split(\":\");\n    return routeName;\n  }\n  return null;\n}\n\n/**\n * selectLayout\n * @access private\n * @param {Object} layout - element of shops.layout array\n * @param {Object} setLayout - layout\n * @param {Object} setWorkflow - workflow\n * @returns {Object} layout - return object of template definitions for Blaze Layout\n */\nfunction selectLayout(layout, setLayout, setWorkflow) {\n  const currentLayout = setLayout || Session.get(\"DEFAULT_LAYOUT\") || \"coreLayout\";\n  const currentWorkflow = setWorkflow || Session.get(\"DEFAULT_WORKFLOW\") || \"coreWorkflow\";\n  if (layout.layout === currentLayout && layout.workflow === currentWorkflow && layout.enabled === true) {\n    return layout;\n  }\n  return null;\n}\n\n/**\n * ReactionLayout\n * sets and returns reaction layout structure\n * @access public\n * @param {Object} options - this router context\n * @param {String} options.layout - string of shop.layout.layout (defaults to coreLayout)\n * @param {String} options.workflow - string of shop.layout.workflow (defaults to coreLayout)\n * @returns {Object} layout - return object of template definitions for Blaze Layout\n */\nexport function ReactionLayout(options = {}) {\n  // Find a workflow layout to render\n\n  // By default we'll use the primary shop for layouts\n  let shopId = Router.Reaction.getPrimaryShopId();\n\n  // We'll check the marketplace settings too so that we can use the active shopId\n  // if merchantTemplates is enabled\n  // XXX: using merchantTemplates is not ready for production and has not been tested! Use at your own risk.\n  let marketplaceSettings;\n\n  if (Meteor.isClient) { // If we're on the client, use the cached marketplace settings\n    marketplaceSettings = Router.Reaction.marketplace;\n  } else { // if we're on the server, go get the settings from the db with this method\n    marketplaceSettings = Router.Reaction.getMarketplaceSettings();\n    if (marketplaceSettings && marketplaceSettings.public) {\n      // We're only interested in the public settings here\n      marketplaceSettings = marketplaceSettings.public;\n    }\n  }\n\n  // If merchantTemplates is enabled, use the active shopId\n  if (marketplaceSettings && marketplaceSettings.merchantTemplates === true) {\n    shopId = Router.Reaction.getShopId();\n  }\n\n  // Get the shop data\n  const shop = Shops.findOne(shopId);\n\n  // get the layout & workflow from options if they exist\n  // Otherwise get them from the Session. this is set in `/client/config/defaults`\n  // Otherwise, default to hard-coded values\n  const layoutName = options.layout || Session.get(\"DEFAULT_LAYOUT\") || \"coreLayout\";\n  const workflowName = options.workflow || Session.get(\"DEFAULT_WORKFLOW\") || \"coreWorkflow\";\n\n  // Layout object used to render\n  // Defaults provided for reference\n  let layoutStructure = {\n    template: \"\",\n    layoutHeader: \"\",\n    layoutFooter: \"\",\n    notFound: \"notFound\",\n    dashboardHeader: \"\",\n    dashboardControls: \"\",\n    dashboardHeaderControls: \"\",\n    adminControlsFooter: \"\"\n  };\n\n  let layoutTheme = \"default\";\n\n  // Find a registered layout using the layoutName and workflowName\n  if (shop) {\n    const sortedLayout = shop.layout.sort((prev, next) => prev.priority - next.priority);\n    const foundLayout = sortedLayout.find((x) => selectLayout(x, layoutName, workflowName));\n\n    if (foundLayout) {\n      if (foundLayout.structure) {\n        layoutStructure = {\n          ...foundLayout.structure\n        };\n      }\n      if (foundLayout.theme) {\n        layoutTheme = foundLayout.theme;\n      }\n    }\n  }\n\n  // If the original options did not include a workflow, but did have a template,\n  // then we override the template from the layout with the one provided by the options.\n  //\n  // Why is this? We always need a workflow to render the entire layout of the app.\n  // The default layout has a default template that may not be the one we want to render.\n  // Some routes, such as `/account/profile` do no have a workflow, but define a template.\n  // Without the logic below, it would end up rendering the homepage instead of the profile\n  // page.\n  // const optionsHasWorkflow = typeof options.workflow === \"string\";\n  const optionsHasTemplate = typeof options.template === \"string\";\n\n  if (optionsHasTemplate) {\n    layoutStructure.template = options.template;\n  }\n\n  // If there is no Blaze Template (Template[]) or React Component (getComponent)\n  // Then use the notFound template instead\n  let hasReactComponent = true;\n\n  try {\n    getComponent(layoutStructure.template);\n  } catch (e) {\n    hasReactComponent = false;\n  }\n\n  if (!Template[layoutStructure.template] && !hasReactComponent) {\n    return (\n      <Blaze template={layoutStructure.notFound} />\n    );\n  }\n\n  // Render the layout\n  return {\n    theme: layoutTheme,\n    structure: layoutStructure,\n    component: (props) => { // eslint-disable-line react/no-multi-comp, react/display-name\n      const { route } = Router.current();\n      const { permissions } = options;\n      const structure = {\n        ...layoutStructure\n      };\n\n      // If the current route is unauthorized, and is not the \"not-found\" route,\n      // then override the template to use the default unauthorized template\n      if (hasRoutePermission({ ...route, permissions }) === false && route.name !== \"not-found\" && !Meteor.user()) {\n        if (!Router.Reaction.hasPermission(route.permissions, Meteor.userId())) {\n          structure.template = \"unauthorized\";\n        }\n        return false;\n      }\n      try {\n        // Try to create a React component if defined\n        return React.createElement(getComponent(layoutName), {\n          ...props,\n          structure\n        });\n      } catch (e) {\n        // eslint-disable-next-line\n        console.warn(e, \"Failed to create a React layout element\");\n      }\n      // If all else fails, render a not found page\n      return <Blaze template={structure.notFound} />;\n    }\n  };\n}\n\n/**\n * initPackageRoutes\n * registers route and template when registry item has\n * registryItem.route && registryItem.template\n * @param {Object} options - options and context for route creation\n * @returns {undefined} returns undefined\n */\nRouter.initPackageRoutes = (options) => {\n  // make _initialized = false in case router is reinitialized\n  Router._initialized = false;\n  routerReadyDependency.changed();\n\n  Router.Reaction = options.reactionContext;\n  Router.routes = [];\n\n  let marketplaceSettings = {\n    shopPrefix: \"/shop\" // default value\n  };\n\n  const marketplace = Packages.findOne({\n    name: \"reaction-marketplace\",\n    shopId: Router.Reaction.getPrimaryShopId()\n  });\n\n  if (marketplace && marketplace.settings && marketplace.settings.public) {\n    marketplaceSettings = marketplace.settings.public;\n  }\n\n  const pkgs = Packages.find().fetch();\n\n  const routeDefinitions = [];\n\n  // prefixing isnt necessary if we only have one shop\n  // but we need to bypass the current\n  // subscription to determine this.\n  const shopSub = Meteor.subscribe(\"shopsCount\");\n\n  Tracker.autorun((shopSubWaitFor) => {\n    if (shopSub.ready()) {\n      shopSubWaitFor.stop();\n      // using tmeasday:publish-counts\n\n      // Default layouts\n      const indexLayout = ReactionLayout(options.indexRoute);\n      const notFoundLayout = ReactionLayout({ template: \"notFound\" });\n\n      // Index route\n      routeDefinitions.push({\n        route: \"/\",\n        name: \"index\",\n        options: {\n          name: \"index\",\n          ...options.indexRoute,\n          theme: indexLayout.theme,\n          component: indexLayout.component,\n          structure: indexLayout.structure\n        }\n      });\n\n      routeDefinitions.push({\n        route: `${marketplaceSettings.shopPrefix}/:shopSlug`,\n        name: \"index\",\n        options: {\n          name: \"index\",\n          type: \"shop-prefix\",\n          ...options.indexRoute,\n          theme: indexLayout.theme,\n          component: indexLayout.component,\n          structure: indexLayout.structure\n        }\n      });\n\n      // Not-found route\n      routeDefinitions.push({\n        route: \"/not-found\",\n        name: \"not-found\",\n        options: {\n          name: \"not-found\",\n          ...notFoundLayout.indexRoute,\n          theme: notFoundLayout.theme,\n          component: notFoundLayout.component,\n          structure: notFoundLayout.structure\n        }\n      });\n\n      // get package registry route configurations\n      for (const pkg of pkgs) {\n        const newRoutes = [];\n        // pkg registry\n        if (pkg.registry && pkg.enabled) {\n          const registry = Array.from(pkg.registry);\n          for (const registryItem of registry) {\n            // registryItems\n            if (registryItem.route) {\n              const {\n                meta,\n                route,\n                permissions,\n                template,\n                layout,\n                workflow\n                // provides\n              } = registryItem;\n\n              const name = getRegistryRouteName(pkg.name, registryItem);\n\n              // define new route\n              // we could allow the options to be passed in the registry if we need to be more flexible\n              const reactionLayout = ReactionLayout({ template, workflow, layout, permissions });\n              const newRouteConfig = {\n                route,\n                name,\n                options: {\n                  meta,\n                  name,\n                  template,\n                  layout,\n                  triggersEnter: Router.Hooks.get(\"onEnter\", name),\n                  triggersExit: Router.Hooks.get(\"onExit\", name),\n                  component: reactionLayout.component,\n                  theme: reactionLayout.theme,\n                  structure: reactionLayout.structure\n                }\n              };\n              newRoutes.push({\n                ...newRouteConfig,\n                route: `/shop/:shopSlug${route}`,\n                options: {\n                  ...newRouteConfig.options,\n                  type: \"shop-prefix\"\n                }\n              });\n              // push new routes\n              newRoutes.push(newRouteConfig);\n            } // end registryItems\n          } // end package.registry\n\n          //\n          // add group and routes to routing table\n          //\n          for (const route of newRoutes) {\n            // allow overriding of prefix in route definitions\n            // define an \"absolute\" url by excluding \"/\"\n            route.group = {};\n\n            if (route.route.substring(0, 1) !== \"/\") {\n              route.route = `/${route.route}`;\n              route.group.prefix = \"\";\n            }\n\n            routeDefinitions.push(route);\n          }\n        }\n      } // end package loop\n\n      // Uniq-ify routes\n      // Take all route definitions in the order that were received, and reverse it.\n      // Routes defined later, like in the case of custom routes will then have a\n      // higher precedence. Any duplicates after the first instance will be removed.\n      //\n      // TODO: In the future, sort by priority\n      // TODO: Allow duplicated routes with a prefix / suffix / flag\n      const uniqRoutes = uniqBy(routeDefinitions.reverse(), \"route\");\n      const reactRouterRoutes = uniqRoutes.map((route, index) => (\n        <Route\n          key={`${route.name}-${index}`}\n          path={route.route}\n          exact={true}\n          render={route.options.component}\n        />\n      ));\n\n      // Last route, if no other route is matched, this one will be the not-found view\n      // Note: This is last becuase all other routes must at-least attempt a match\n      // before falling back to this not-found route.\n      reactRouterRoutes.push((\n        <Route\n          key=\"not-found\"\n          render={notFoundLayout.component}\n        />\n      ));\n\n      // Finish initialization\n      Router._initialized = true;\n      Router.reactComponents = reactRouterRoutes;\n      Router._routes = uniqRoutes;\n\n      // Trigger a reactive refresh to re-render routes\n      routerReadyDependency.changed();\n    }\n  });\n};\n\n\nexport default Router;\n","import React, { Component } from \"react\";\nimport PropTypes from \"prop-types\";\nimport ReactDOM from \"react-dom\";\nimport { matchPath } from \"react-router\";\nimport { Router as ReactRouter } from \"react-router-dom\";\nimport equal from \"deep-equal\";\nimport pathToRegexp from \"path-to-regexp\";\nimport queryParse from \"query-parse\";\nimport { Session } from \"meteor/session\";\nimport { Tracker } from \"meteor/tracker\";\nimport { Components } from \"@reactioncommerce/reaction-components\";\nimport { Reaction } from \"/client/api\";\nimport { TranslationProvider } from \"/imports/plugins/core/ui/client/providers\";\nimport { MetaData } from \"/lib/api/router/metadata\";\nimport { Router } from \"../lib\";\n\nconst { history } = Router;\n\nclass BrowserRouter extends Component {\n  static propTypes = {\n    children: PropTypes.node,\n    history: PropTypes.object,\n    store: PropTypes.object\n  }\n\n  static contextTypes = {\n    store: PropTypes.object\n  }\n\n  componentWillMount() {\n    this.unsubscribeFromHistory = history.listen(this.handleLocationChange);\n    this.handleLocationChange(history.location);\n  }\n\n  componentWillUnmount() {\n    if (this.unsubscribeFromHistory) this.unsubscribeFromHistory();\n  }\n\n  handleLocationChange = (location) => {\n    // Find all matching paths\n    let foundPaths = Router.routes.filter((pathObject) => matchPath(location.pathname, {\n      path: pathObject.route,\n      exact: true\n    }));\n\n    // If no matching path is found, fetch the not-found route definition\n    if (foundPaths.length === 0 && location.pathname !== \"not-found\") {\n      foundPaths = Router.routes.filter((pathObject) => matchPath(\"/not-found\", {\n        path: pathObject.route,\n        exact: true\n      }));\n    }\n\n    // If we have a found path, take the first match\n    const foundPath = foundPaths.length && foundPaths[0];\n    const params = {};\n\n    // Process the params from the found path definiton\n    if (foundPath) {\n      const keys = [];\n      const re = pathToRegexp(foundPath.route, keys); // Create parser with route regex\n      const values = re.exec(location.pathname); // Process values\n\n      // Create params object\n      keys.forEach((key, index) => {\n        params[key.name] = values[index + 1];\n      });\n    }\n\n    // Get serach (query) string from current location\n    let { search } = location;\n\n    // Remove the ? if it exists at the beginning\n    if (typeof search === \"string\" && search.startsWith(\"?\")) {\n      search = search.substr(1);\n    }\n\n    // Create object of all necessary data for the current route\n    const routeData = {\n      route: {\n        ...foundPath,\n        name: foundPath.name,\n        path: location.pathname,\n        fullPath: `${location.pathname}${location.search}`\n      },\n      params,\n      query: queryParse.toObject(search), // Parse query string into object\n      payload: location\n    };\n\n    // The currentRoute is equal to the routeData.route that we just setup\n    const currentRoute = routeData.route || {};\n\n    // Get the previousRouteData, which is the Router.current() just before it changes.\n    // Default to empty objects to guard against error\n    const previousRouteData = Router.current() || {};\n    const previousRoute = previousRouteData.route;\n\n    // If routes are not identical, run onExit and onEnter\n    if (!equal({\n      params: previousRouteData.params,\n      query: previousRouteData.query,\n      route: previousRouteData.route\n    }, {\n      params: routeData.params,\n      query: routeData.query,\n      route: routeData.route\n    })) {\n      // Run onExit hooks if the previousRoute exists\n      if (previousRoute) {\n        Router.Hooks.run(\"onExit\", \"GLOBAL\", previousRouteData);\n        Router.Hooks.run(\"onExit\", previousRoute.name, previousRouteData);\n      }\n\n      // Set current route reactive-var\n      Router.setCurrentRoute(routeData);\n      // Run on enter hooks for the new route\n      Router.Hooks.run(\"onEnter\", \"GLOBAL\", routeData);\n      Router.Hooks.run(\"onEnter\", currentRoute.name, routeData);\n    }\n    MetaData.init(routeData);\n  }\n\n  render() {\n    return (\n      <ReactRouter {...this.props} />\n    );\n  }\n}\n\nexport function getRootNode() {\n  let rootNode = document.getElementById(\"react-root\");\n\n  if (rootNode) {\n    return rootNode;\n  }\n  const rootNodeHtml = \"<div id='react-root'></div>\";\n  const body = document.getElementsByTagName(\"body\")[0];\n\n  body.insertAdjacentHTML(\"beforeend\", rootNodeHtml);\n  rootNode = document.getElementById(\"react-root\");\n\n  return rootNode;\n}\n\nexport function initBrowserRouter() {\n  Router.initPackageRoutes({\n    reactionContext: Reaction,\n    indexRoute: Session.get(\"INDEX_OPTIONS\") || {}\n  });\n\n  Router.Hooks.onEnter(MetaData.init);\n\n  Tracker.autorun((computation) => {\n    if (Router.ready()) {\n      ReactDOM.render((\n        <BrowserRouter history={history}>\n          <TranslationProvider>\n            <Components.App children={Router.reactComponents} />\n          </TranslationProvider>\n        </BrowserRouter>), getRootNode());\n\n      computation.stop();\n    }\n  });\n}\n\nexport default BrowserRouter;\n","import \"./startup\";\n","import { loadRegisteredComponents } from \"@reactioncommerce/reaction-components\";\nimport { Meteor } from \"meteor/meteor\";\nimport { Tracker } from \"meteor/tracker\";\nimport { Accounts } from \"meteor/accounts-base\";\nimport { Reaction } from \"/client/api\";\nimport { Shops } from \"/lib/collections\";\nimport { Router } from \"../lib\";\nimport { initBrowserRouter } from \"./browserRouter\";\n\nMeteor.startup(() => {\n  loadRegisteredComponents();\n\n  // Subscribe to router required publications\n  // Note: Although these are subscribed to by the subscription manager in \"/modules/client/core/subscriptions\",\n  // using the subscriptions manager sometimes causes issues when signing in/out where you may seee a grey screen\n  // or missing shop data throughout the app.\n  // TODO: Revisit subscriptions manager usage and waiting for shops to exist client side before rendering.\n  const primaryShopSub = Meteor.subscribe(\"PrimaryShop\");\n  const merchantShopSub = Meteor.subscribe(\"MerchantShops\");\n  const packageSub = Meteor.subscribe(\"Packages\");\n\n  let isLoaded = false;\n\n  Tracker.autorun(() => {\n    // initialize client routing\n    if (\n      primaryShopSub.ready() &&\n      merchantShopSub.ready() &&\n      packageSub.ready() &&\n      // In addition to the subscriptions, shopId must be defined before we proceed\n      // to avoid conditions where the subscriptions may be ready, but the cached\n      // shopId has yet been set.\n      // Reaction.primaryShopId is a reactive data source\n      Reaction.primaryShopId !== null\n    ) {\n      const shops = Shops.find({}).fetch();\n      //  initBrowserRouter calls Router.initPackageRoutes which calls shopSub.ready which is reactive,\n      //  So we have to call initBrowserRouter in a non reactive context.\n      //  Otherwise initBrowserRouter is called twice each time a subscription becomes \"ready\"\n      Tracker.nonreactive(() => {\n        // Make sure we have shops before we try to make routes for them\n        if (Array.isArray(shops) && shops.length) {\n          if (!isLoaded) {\n            isLoaded = true;\n            initBrowserRouter();\n          }\n        }\n      });\n    }\n  });\n\n  //\n  // we need to sometimes force\n  // router reload on login to get\n  // the entire layout to rerender\n  // we only do this when the routes table\n  // has already been generated (existing user)\n  //\n  Accounts.onLogin(() => {\n    const shops = Shops.find({}).fetch();\n\n    if (Meteor.loggingIn() === false && Router._routes.length > 0) {\n      if (Array.isArray(shops) && shops.length) {\n        initBrowserRouter();\n      }\n    }\n  });\n});\n","import React, { Component } from \"react\";\nimport PropTypes from \"prop-types\";\nimport { Components } from \"@reactioncommerce/reaction-components\";\n\nclass Currency extends Component {\n  static propTypes = {\n    currencies: PropTypes.array,\n    currentCurrency: PropTypes.string,\n    handleChange: PropTypes.func\n  }\n\n  state = {\n    value: \"\"\n  }\n\n  onChange = (event, value) => {\n    this.setState({\n      value\n    });\n\n    this.props.handleChange(value);\n  }\n\n  currencyDisplay(value, symbol) {\n    return (\n      `${value} ${symbol}`\n    );\n  }\n\n  buttonElement() {\n    return (\n      <Components.Button\n        label={this.props.currentCurrency || this.state.value}\n        containerStyle={{ color: \"#000\", fontWeight: \"normal\", letterSpacing: 0.8 }}\n      >\n        &nbsp;<i className=\"fa fa-caret-down\" />\n      </Components.Button>\n    );\n  }\n\n  render() {\n    return (\n      <div>\n        {this.props.currencies.length > 1 &&\n          <Components.DropDownMenu\n            buttonElement={this.buttonElement()}\n            onChange={this.onChange}\n            value={this.props.currentCurrency || this.state.value}\n            menuStyle={{ maxHeight: 500, overflow: \"auto\" }}\n          >\n            <Components.MenuItem\n              label=\"Select Currency\"\n              i18nKeyLabel=\"currencies.select\"\n              disabled={true}\n            />\n\n            <Components.Divider />\n\n            {this.props.currencies.map((currency) => (\n              <Components.MenuItem\n                key={currency.currency}\n                label={this.currencyDisplay(currency.currency, currency.symbol)}\n                value={this.currencyDisplay(currency.currency, currency.symbol)}\n              />\n            ))}\n          </Components.DropDownMenu>\n        }\n      </div>\n    );\n  }\n}\n\nexport default Currency;\n","import React, { Component } from \"react\";\nimport PropTypes from \"prop-types\";\nimport { Components } from \"@reactioncommerce/reaction-components\";\n\nclass LanguageDropDown extends Component {\n  static propTypes = {\n    currentLanguage: PropTypes.string,\n    handleChange: PropTypes.func,\n    languages: PropTypes.array\n  }\n\n  state = {\n    value: \"\"\n  }\n\n  buttonElement() {\n    return (\n      <Components.Button containerStyle={{ color: \"#000\" }}>\n        <i className=\"fa fa-language fa-lg\"/>&nbsp;\n        <i className=\"fa fa-caret-down\"/>\n      </Components.Button>\n    );\n  }\n  onChange = (event, value) => {\n    this.setState({\n      value\n    });\n\n    this.props.handleChange(value);\n  }\n\n  render() {\n    return (\n      <div>\n        {this.props.languages.length > 1 &&\n          <div className=\"dropdown-toggle\">\n            <Components.DropDownMenu\n              buttonElement={this.buttonElement()}\n              value={this.props.currentLanguage || this.state.value}\n              onChange={this.onChange}\n              menuStyle={{ maxHeight: 500, overflow: \"auto\" }}\n            >\n              <Components.MenuItem\n                label=\"Select language\"\n                i18nKeyLabel=\"languages.select\"\n                disabled={true}\n              />\n              <Components.Divider />\n              {this.props.languages.map((language) => (\n                <Components.MenuItem\n                  key={language.i18n}\n                  label={language.label}\n                  i18nKeyLabel={language.translation}\n                  value={language.i18n}\n                />\n              ))}\n            </Components.DropDownMenu>\n          </div>\n        }\n      </div>\n    );\n  }\n}\n\nexport default LanguageDropDown;\n","import React, { Component } from \"react\";\nimport PropTypes from \"prop-types\";\nimport { Components } from \"@reactioncommerce/reaction-components\";\nimport { Shop as ShopSchema } from \"/lib/collections/schemas/shops\";\n\nconst PACKAGE_NAME = \"reaction-i18n\";\n\nclass LocalizationSettings extends Component {\n  static propTypes = {\n    currencies: PropTypes.array,\n    currencyOptions: PropTypes.array,\n    enabledLanguages: PropTypes.array,\n    languages: PropTypes.array,\n    onEnableAllCurrencies: PropTypes.func,\n    onEnableAllLanguages: PropTypes.func,\n    onReloadTranslations: PropTypes.func,\n    onUpdateCurrencyConfiguration: PropTypes.func,\n    onUpdateLanguageConfiguration: PropTypes.func,\n    onUpdateLocalization: PropTypes.func,\n    shop: PropTypes.object, // Shop data\n    timezoneOptions: PropTypes.array,\n    uolOptions: PropTypes.array,\n    uomOptions: PropTypes.array\n  }\n\n  constructor(props) {\n    super(props);\n\n    this.state = {\n      currencies: props.currencies,\n      languages: props.languages\n    };\n  }\n\n  componentWillReceiveProps(nextProps) {\n    this.setState({\n      currencies: nextProps.currencies,\n      languages: nextProps.languages\n    });\n  }\n\n  handleUpdateCurrencyConfiguration = (event, isChecked, name) => {\n    const currencyIndex = this.state.currencies.findIndex((currency) => currency.name === name);\n\n    this.setState((state) => {\n      const newStateCurrencies = state.currencies;\n      newStateCurrencies[currencyIndex].enabled = isChecked;\n      return { currencies: newStateCurrencies };\n    }, () => {\n      // Delaying to allow animation before sending data to server\n      // If animation is not delayed, it twitches when actual update happens\n      setTimeout(() => {\n        this.props.onUpdateCurrencyConfiguration(event, isChecked, name);\n      }, 200);\n    });\n  }\n\n  handleUpdateLangaugeConfiguration = (event, isChecked, name) => {\n    const languageIndex = this.state.languages.findIndex((language) => language.value === name);\n\n    this.setState((state) => {\n      const newStateLanguages = state.languages;\n      newStateLanguages[languageIndex].enabled = isChecked;\n      return { languages: newStateLanguages };\n    }, () => {\n      // Delaying to allow animation before sending data to server\n      // If animation is not delayed, it twitches when actual update happens\n      setTimeout(() => {\n        this.props.onUpdateLanguageConfiguration(event, isChecked, name);\n      }, 200);\n    });\n  }\n\n  renderCurrencies() {\n    return this.props.currencies.map((currency, key) => (\n      <Components.ListItem\n        actionType={\"switch\"}\n        key={key}\n        label={currency.label}\n        switchOn={currency.enabled}\n        switchName={currency.name}\n        onSwitchChange={this.handleUpdateCurrencyConfiguration}\n      />\n    ));\n  }\n\n  renderLanguages() {\n    return this.state.languages.map((language, key) => (\n      <Components.ListItem\n        actionType={\"switch\"}\n        key={key}\n        label={language.label}\n        switchOn={language.enabled}\n        switchName={language.value}\n        onSwitchChange={this.handleUpdateLangaugeConfiguration}\n      />\n    ));\n  }\n\n  handleSubmit = (event, formData) => {\n    if (typeof this.props.onUpdateLocalization === \"function\") {\n      this.props.onUpdateLocalization(formData.doc);\n    }\n  }\n\n  handleAllOn = (event, name) => {\n    if (name === \"language\") {\n      if (typeof this.props.onEnableAllLanguages === \"function\") {\n        this.props.onEnableAllLanguages(true);\n      }\n    } else if (name === \"currency\") {\n      if (typeof this.props.onEnableAllCurrencies === \"function\") {\n        this.props.onEnableAllCurrencies(true);\n      }\n    }\n  }\n\n  handleAllOff = (event, name) => {\n    if (name === \"language\") {\n      if (typeof this.props.onEnableAllLanguages === \"function\") {\n        this.props.onEnableAllLanguages(false);\n      }\n    } else if (name === \"currency\") {\n      if (typeof this.props.onEnableAllCurrencies === \"function\") {\n        this.props.onEnableAllCurrencies(false);\n      }\n    }\n  }\n\n  handleReloadTranslations = (event) => {\n    if (typeof this.props.onReloadTranslations === \"function\") {\n      this.props.onReloadTranslations(event.altKey);\n    }\n  }\n\n  renderListControls(name) {\n    return (\n      <Components.CardToolbar>\n        <Components.FlatButton\n          i18nKeyLabel={\"admin.i18nSettings.allOn\"}\n          label=\"All On\"\n          value={name}\n          onClick={this.handleAllOn}\n        />\n        { \"|\" }\n        <Components.FlatButton\n          i18nKeyLabel={\"admin.i18nSettings.allOff\"}\n          label=\"All Off\"\n          value={name}\n          onClick={this.handleAllOff}\n        />\n        {name === \"language\" && \"|\"}\n        {name === \"language\" &&\n          <Components.FlatButton\n            i18nKeyTooltip={\"admin.i18nSettings.reloadTranslations\"}\n            tooltip={\"Reload translations asdasdasdasdasd\"}\n            tooltipAttachment=\"middle left\"\n            icon=\"fa fa-refresh\"\n            onClick={this.handleReloadTranslations}\n          />\n        }\n      </Components.CardToolbar>\n    );\n  }\n\n  render() {\n    return (\n      <Components.CardGroup>\n        <Components.SettingsCard\n          i18nKeyTitle=\"admin.i18nSettings.shopLocalization\"\n          name=\"localization\"\n          packageName={PACKAGE_NAME}\n          saveOpenStateToPreferences={true}\n          showSwitch={false}\n          title=\"Shop Localization\"\n        >\n          <Components.Form\n            autoSave={true}\n            schema={ShopSchema}\n            doc={this.props.shop}\n            fields={{\n              timezone: {\n                type: \"select\",\n                options: this.props.timezoneOptions\n              },\n              currency: {\n                type: \"select\",\n                options: this.props.currencyOptions\n              },\n              baseUOM: {\n                type: \"select\",\n                options: this.props.uomOptions\n              },\n              baseUOL: {\n                type: \"select\",\n                options: this.props.uolOptions\n              },\n              language: {\n                type: \"select\",\n                options: this.props.enabledLanguages\n              }\n            }}\n            name=\"localization\"\n            onSubmit={this.handleSubmit}\n          />\n        </Components.SettingsCard>\n        <Components.SettingsCard\n          i18nKeyTitle=\"admin.i18nSettings.enabledLanguages\"\n          name=\"languages\"\n          padded={false}\n          packageName={PACKAGE_NAME}\n          saveOpenStateToPreferences={true}\n          showSwitch={false}\n          title=\"Languages\"\n        >\n          {this.renderListControls(\"language\")}\n          <Components.List>\n            {this.renderLanguages()}\n          </Components.List>\n        </Components.SettingsCard>\n        <Components.SettingsCard\n          i18nKeyTitle=\"admin.i18nSettings.enabledCurrencies\"\n          padded={false}\n          packageName={PACKAGE_NAME}\n          name=\"currencies\"\n          saveOpenStateToPreferences={true}\n          showSwitch={false}\n          title=\"Currencies\"\n        >\n          {this.renderListControls(\"currency\")}\n          <Components.List>\n            {this.renderCurrencies()}\n          </Components.List>\n        </Components.SettingsCard>\n      </Components.CardGroup>\n    );\n  }\n}\n\nexport default LocalizationSettings;\n","import { compose, withProps } from \"recompose\";\nimport { Meteor } from \"meteor/meteor\";\nimport { Match } from \"meteor/check\";\nimport { Reaction } from \"/client/api\";\nimport { registerComponent, composeWithTracker } from \"@reactioncommerce/reaction-components\";\nimport { Cart, Shops, Accounts } from \"/lib/collections\";\nimport CurrencyDropdown from \"../components/currencyDropdown\";\n\nconst handlers = {\n  handleChange(value) {\n    const currency = value.split(\" \");\n    const currencyName = currency[0];\n    // update Accounts with the selected currency\n    Meteor.call(\"accounts/setProfileCurrency\", currencyName);\n\n    const cart = Cart.findOne({ userId: Meteor.userId() });\n\n    // Attach changed currency to this users cart\n    Meteor.call(\"cart/setUserCurrency\", cart._id, currencyName);\n  }\n};\n\nconst composer = (props, onData) => {\n  let currentCurrency = \"USD $\";\n  const currencies = [];\n\n  if (Reaction.Subscriptions.PrimaryShop.ready() && Reaction.Subscriptions.MerchantShops.ready() && Meteor.user()) {\n    let shopId;\n\n    // Choose shop to get language from\n    if (Reaction.marketplaceEnabled && Reaction.merchantCurrency) {\n      shopId = Reaction.getShopId();\n    } else {\n      shopId = Reaction.getPrimaryShopId();\n    }\n\n    const shop = Shops.findOne(shopId, {\n      fields: {\n        currencies: 1,\n        currency: 1\n      }\n    });\n\n    const user = Accounts.findOne({\n      _id: Meteor.userId()\n    });\n    const profileCurrency = user && user.profile && user.profile.currency;\n\n    if (Match.test(shop, Object) && shop.currency) {\n      const locale = Reaction.Locale.get();\n\n      if (profileCurrency && shop.currencies[profileCurrency] && shop.currencies[profileCurrency].symbol) {\n        currentCurrency = `${profileCurrency} ${shop.currencies[profileCurrency].symbol}`;\n      } else if (locale && locale.currency && locale.currency.enabled) {\n        currentCurrency = `${locale.locale.currency.split(\",\")[0]} ${locale.currency.symbol}`;\n      } else {\n        currentCurrency = `${shop.currency.split(\",\")[0]} ${shop.currencies[shop.currency].symbol}`;\n      }\n    }\n\n    if (Match.test(shop, Object) && shop.currencies) {\n      for (const currencyName in shop.currencies) {\n        if (shop.currencies[currencyName].enabled === true) {\n          const currency = { currency: currencyName };\n          // only one currency will be \"active\". Either the one\n          // matching the profileCurrency if it exists or else\n          //  the one matching shop currency\n          if (profileCurrency) {\n            if (profileCurrency === currency.currency) {\n              currency.class = \"active\";\n            }\n          } else if (shop.currency === currency.currency) {\n            currency.class = \"active\";\n          }\n          currency.symbol = shop.currencies[currencyName].symbol;\n          currencies.push(currency);\n        }\n      }\n    }\n  }\n\n  onData(null, { currentCurrency, currencies });\n};\n\nregisterComponent(\"CurrencyDropdown\", CurrencyDropdown, [\n  composeWithTracker(composer),\n  withProps(handlers)\n]);\n\nexport default compose(\n  composeWithTracker(composer),\n  withProps(handlers)\n)(CurrencyDropdown);\n","import { compose, withProps } from \"recompose\";\nimport { Reaction } from \"/client/api\";\nimport { Meteor } from \"meteor/meteor\";\nimport { Shops } from \"/lib/collections\";\nimport { registerComponent, composeWithTracker } from \"@reactioncommerce/reaction-components\";\nimport LanguageDropdown from \"../components/languageDropdown\";\n\nconst handlers = {\n  handleChange(value) {\n    Meteor.users.update(Meteor.userId(), { $set: { \"profile.lang\": value } });\n  }\n};\n\nconst composer = (props, onData) => {\n  const languages = [];\n  let currentLanguage = \"\";\n\n  if (Reaction.Subscriptions.PrimaryShop.ready() &&\n      Reaction.Subscriptions.MerchantShops.ready() && Meteor.user()) {\n    let shopId;\n\n    // Choose shop to get language from\n    if (Reaction.marketplaceEnabled && Reaction.merchantLanguage) {\n      shopId = Reaction.getShopId();\n    } else {\n      shopId = Reaction.getPrimaryShopId();\n    }\n\n    const shop = Shops.findOne({\n      _id: shopId\n    });\n\n    if (typeof shop === \"object\" && shop.languages) {\n      for (const language of shop.languages) {\n        if (language.enabled === true) {\n          language.translation = `languages.${language.label.toLowerCase()}`;\n          // appending a helper to let us know this\n          // language is currently selected\n          const { profile } = Meteor.user();\n          if (profile && profile.lang) {\n            if (profile.lang === language.i18n) {\n              currentLanguage = profile.lang;\n            }\n          } else if (shop.language === language.i18n) {\n            // we don't have a profile language\n            // use the shop default\n            currentLanguage = shop.language;\n          }\n          languages.push(language);\n        }\n      }\n    }\n  }\n  onData(null, { languages, currentLanguage });\n};\n\nregisterComponent(\"LanguageDropdown\", LanguageDropdown, [\n  composeWithTracker(composer),\n  withProps(handlers)\n]);\n\nexport default compose(\n  composeWithTracker(composer),\n  withProps(handlers)\n)(LanguageDropdown);\n","import React, { Component } from \"react\";\nimport { compose } from \"recompose\";\nimport { registerComponent, composeWithTracker, withMomentTimezone } from \"@reactioncommerce/reaction-components\";\nimport { Meteor } from \"meteor/meteor\";\nimport { Reaction, i18next } from \"/client/api\";\nimport { Countries } from \"/client/collections\";\nimport { Shops } from \"/lib/collections\";\nimport LocalizationSettings from \"../components/localizationSettings\";\n\nconst wrapComponent = (Comp) => (\n  class LocalizationSettingsContainer extends Component {\n    static propTypes = LocalizationSettings.propTypes\n\n    handleUpdateLanguageConfiguration = (event, isChecked, name) => {\n      const language = this.props.languages.find((l) => l.value === name);\n\n      if (language) {\n        Meteor.call(\"shop/updateLanguageConfiguration\", language.value, isChecked);\n      }\n    }\n\n    handleUpdateCurrencyConfiguration = (event, isChecked, name) => {\n      Meteor.call(\"shop/updateCurrencyConfiguration\", name, isChecked);\n    }\n\n    handleSubmit = (doc) => {\n      Shops.update({\n        _id: doc._id\n      }, {\n        $set: {\n          timezone: doc.timezone,\n          currency: doc.currency,\n          baseUOM: doc.baseUOM,\n          baseUOL: doc.baseUOL,\n          language: doc.language\n        }\n      });\n    }\n\n    handleEnableAllLanguages = (isEnabled) => {\n      Meteor.call(\"shop/updateLanguageConfiguration\", \"all\", isEnabled);\n    }\n\n    handleEnableAllCurrencies = (isEnabled) => {\n      Meteor.call(\"shop/updateCurrencyConfiguration\", \"all\", isEnabled);\n    }\n\n    handleTranslationReload = (flushAll) => {\n      if (flushAll === true) {\n        Alerts.toast(i18next.t(\"admin.i18nSettings.reloadAllStarted\", { defaultValue: \"Reloading translations for all shops.\" }), \"info\");\n\n        Meteor.call(\"i18n/flushTranslations\", (error) => {\n          if (!error) {\n            Alerts.toast(i18next.t(\"admin.i18nSettings.reloadAllSuccess\", { defaultValue: \"Translations have been reloaded for all shops.\" }), \"success\");\n          } else {\n            Alerts.toast(i18next.t(\"admin.i18nSettings.reloadAllFail\", { defaultValue: \"Translations could not be reloaded for all shops.\" }), \"error\");\n          }\n        });\n      } else {\n        Alerts.toast(i18next.t(\"admin.i18nSettings.reloadStarted\", { defaultValue: \"Reloading translations for the current shop.\" }), \"info\");\n\n        Meteor.call(\"i18n/flushTranslations\", (error) => {\n          if (!error) {\n            Alerts.toast(i18next.t(\"admin.i18nSettings.reloadSuccess\", { defaultValue: \"Translations have been reloaded for the current shop.\" }), \"success\");\n          } else {\n            Alerts.toast(i18next.t(\"admin.i18nSettings.reloadFail\", { defaultValue: \"Translations could not be reloaded for the current shop.\" }), \"error\");\n          }\n        });\n      }\n    }\n\n    render() {\n      return (\n        <Comp\n          {...this.props}\n          onEnableAllCurrencies={this.handleEnableAllCurrencies}\n          onEnableAllLanguages={this.handleEnableAllLanguages}\n          onUpdateCurrencyConfiguration={this.handleUpdateCurrencyConfiguration}\n          onUpdateLanguageConfiguration={this.handleUpdateLanguageConfiguration}\n          onUpdateLocalization={this.handleSubmit}\n          onReloadTranslations={this.handleTranslationReload}\n        />\n      );\n    }\n  }\n);\n\nfunction composer(props, onData) {\n  const languages = [];\n  const shop = Shops.findOne();\n  const countries = Countries.find().fetch();\n  const preferences = Reaction.getUserPreferences(\"reaction-i18n\", \"settingsCards\", {});\n\n  if (typeof shop === \"object\" && shop.languages) {\n    for (const language of shop.languages) {\n      const i18nKey = `languages.${language.label.toLowerCase()}`;\n      languages.push({\n        label: language.label,\n        value: language.i18n,\n        enabled: (language.i18n === shop.language || language.enabled),\n        i18nKey\n      });\n    }\n  }\n\n  const { currencies } = shop;\n  const currencyList = [];\n  const currencyOptions = [];\n  for (const currency in currencies) {\n    if ({}.hasOwnProperty.call(currencies, currency)) {\n      if (currency === \"updatedAt\") {\n        continue;\n      }\n\n      const structure = currencies[currency];\n      const label = `${currency}  |  ${structure.symbol}  |  ${structure.format}`;\n\n      currencyList.push({\n        name: currency,\n        label,\n        enabled: (structure.enabled || currency === shop.currency)\n      });\n\n      if (structure.enabled || currency === shop.currency) {\n        currencyOptions.push({\n          label,\n          value: currency\n        });\n      }\n    }\n  }\n\n\n  const { unitsOfMeasure } = Shops.findOne();\n  const uomOptions = [];\n  if (Array.isArray(unitsOfMeasure)) {\n    for (const measure of unitsOfMeasure) {\n      uomOptions.push({\n        label: i18next.t(`uom.${measure.uom}`, { defaultValue: measure.uom }),\n        value: measure.uom\n      });\n    }\n  }\n\n  const { unitsOfLength } = Shops.findOne();\n  const uolOptions = [];\n  if (Array.isArray(unitsOfLength)) {\n    for (const length of unitsOfLength) {\n      uolOptions.push({\n        label: i18next.t(`uol.${length.uol}`, { defaultValue: length.uol }),\n        value: length.uol\n      });\n    }\n  }\n\n  const label = i18next.t(\"app.timezoneOptions\", \"Choose timezone\");\n  const timezoneOptions = [{\n    value: \"\",\n    label\n  }];\n  const moment = props.momentTimezone;\n  if (moment) {\n    const timezones = moment.names();\n    for (const timezone of timezones) {\n      timezoneOptions.push({\n        value: timezone,\n        label: timezone\n      });\n    }\n  }\n\n  onData(null, {\n    preferences,\n    shop,\n    languages,\n    currencies: currencyList,\n    enabledLanguages: languages.filter((language) => (language.enabled || language.value === shop.language)),\n    countryOptions: countries,\n    currencyOptions,\n    uomOptions,\n    uolOptions,\n    timezoneOptions\n  });\n}\n\nregisterComponent(\"i18nSettings\", LocalizationSettings, [\n  withMomentTimezone,\n  composeWithTracker(composer),\n  wrapComponent\n]);\n\nexport default compose(\n  withMomentTimezone,\n  composeWithTracker(composer),\n  wrapComponent\n)(LocalizationSettings);\n","export { default as CurrencyDropdown } from \"./containers/currencyDropdown\";\nexport { default as LanguageDropdown } from \"./containers/languageDropdown\";\nexport { default as LocalizationSettings } from \"./containers/localizationSettings\";\n","import React, { Component } from \"react\";\nimport PropTypes from \"prop-types\";\nimport { registerComponent } from \"@reactioncommerce/reaction-components\";\nimport { Reaction } from \"/client/api\";\n\nclass Brand extends Component {\n  static propTypes = {\n    logo: PropTypes.string,\n    title: PropTypes.string\n  }\n\n  handleClick = (event) => {\n    event.preventDefault();\n    Reaction.Router.go(\"/\");\n  }\n\n  render() {\n    const { logo, title } = this.props;\n\n    return (\n      <a className=\"brand\" href=\"/\" onClick={this.handleClick}>\n        {this.props.logo &&\n          <div className=\"logo\">\n            <img src={logo} alt={title} />\n          </div>\n        }\n        <span className=\"title\">{title}</span>\n      </a>\n    );\n  }\n}\n\nregisterComponent(\"Brand\", Brand);\n\nexport default Brand;\n","import React, { Component } from \"react\";\nimport PropTypes from \"prop-types\";\nimport { Components } from \"@reactioncommerce/reaction-components\";\n\nclass NavBar extends Component {\n  static propTypes = {\n    brandMedia: PropTypes.object,\n    hasProperPermission: PropTypes.bool,\n    searchEnabled: PropTypes.bool,\n    shop: PropTypes.object,\n    visibility: PropTypes.object.isRequired\n  };\n\n  static defaultProps = {\n    visibility: {\n      hamburger: true,\n      brand: true,\n      tags: true,\n      search: true,\n      notifications: true,\n      languages: true,\n      currency: true,\n      mainDropdown: true,\n      cartContainer: true\n    }\n  };\n\n  state = {\n    navBarVisible: false,\n    searchModalOpen: false\n  }\n\n  toggleNavbarVisibility = () => {\n    const isVisible = this.state.navBarVisible;\n    this.setState({ navBarVisible: !isVisible });\n  }\n\n  handleCloseNavbar = () => {\n    this.setState({ navBarVisible: false });\n  }\n\n  handleOpenSearchModal = () => {\n    this.setState({ searchModalOpen: true });\n  }\n\n  handleCloseSearchModal = () => {\n    this.setState({ searchModalOpen: false });\n  }\n\n  renderLanguage() {\n    return (\n      <div className=\"languages\">\n        <Components.LanguageDropdown />\n      </div>\n    );\n  }\n\n  renderCurrency() {\n    return (\n      <div className=\"currencies\">\n        <Components.CurrencyDropdown />\n      </div>\n    );\n  }\n\n  renderBrand() {\n    const { brandMedia, shop } = this.props;\n\n    const { name } = shop || {};\n    const logo = brandMedia && brandMedia.url({ store: \"large\" });\n\n    return (\n      <Components.Brand\n        logo={logo}\n        title={name || \"\"}\n      />\n    );\n  }\n\n  renderSearchButton() {\n    if (this.props.searchEnabled) {\n      return (\n        <div className=\"search\">\n          <Components.FlatButton\n            icon=\"fa fa-search\"\n            kind=\"flat\"\n            onClick={this.handleOpenSearchModal}\n          />\n          <Components.SearchSubscription\n            open={this.state.searchModalOpen}\n            onClose={this.handleCloseSearchModal}\n          />\n        </div>\n      );\n    }\n  }\n\n  renderNotificationIcon() {\n    if (this.props.hasProperPermission) {\n      return (\n        <div className=\"navbar-notification\">\n          <Components.Notification />\n        </div>\n      );\n    }\n  }\n\n  renderCartContainerAndPanel() {\n    return (\n      <div className=\"cart-container\">\n        <div className=\"cart\">\n          <Components.CartIcon />\n        </div>\n        <div className=\"cart-alert\">\n          <Components.CartPanel />\n        </div>\n      </div>\n    );\n  }\n\n  renderMainDropdown() {\n    return (\n      <Components.MainDropdown />\n    );\n  }\n\n  renderHamburgerButton() {\n    return (\n      <div className=\"showmenu\"><Components.Button icon=\"bars\" onClick={this.toggleNavbarVisibility} /></div>\n    );\n  }\n\n  renderTagNav() {\n    return (\n      <header className=\"menu\" role=\"banner\">\n        <Components.TagNav\n          isVisible={this.state.navBarVisible}\n          closeNavbar={this.handleCloseNavbar}\n          {...this.props}\n        >\n          <Components.Brand />\n          {this.renderNotificationIcon()}\n          {this.renderLanguage()}\n          {this.renderCurrency()}\n        </Components.TagNav>\n      </header>\n    );\n  }\n\n  render() {\n    return (\n      <div className=\"rui navbar\">\n        {this.props.visibility.hamburger && this.renderHamburgerButton()}\n        {this.props.visibility.brand && this.renderBrand()}\n        {this.props.visibility.tags && this.renderTagNav()}\n        {this.props.visibility.search && this.renderSearchButton()}\n        {this.props.visibility.notifications && this.renderNotificationIcon()}\n        {this.props.visibility.languages && this.renderLanguage()}\n        {this.props.visibility.currency && this.renderCurrency()}\n        {this.props.visibility.mainDropdown && this.renderMainDropdown()}\n        {this.props.visibility.cartContainer && this.renderCartContainerAndPanel()}\n      </div>\n    );\n  }\n}\n\nexport default NavBar;\n","import React from \"react\";\nimport NavBar from \"../components/navbar\";\n\nconst NavBarCheckout = (props, context) => {\n  const visibility = {\n    hamburger: false,\n    brand: true,\n    tags: false,\n    search: false,\n    notifications: false,\n    languages: false,\n    currency: false,\n    mainDropdown: false,\n    cartContainer: false\n  };\n  const newProps = {\n    ...props,\n    visibility\n  };\n  return React.createElement(NavBar, newProps, context);\n};\n\nexport default NavBarCheckout;\n","import { registerComponent, composeWithTracker } from \"@reactioncommerce/reaction-components\";\nimport { Meteor } from \"meteor/meteor\";\nimport { Reaction } from \"/client/api\";\nimport NavBar from \"../components/navbar\";\nimport { Shops } from \"/lib/collections\";\nimport { Media } from \"/imports/plugins/core/files/client\";\n\nexport function composer(props, onData) {\n  const shopSub = Meteor.subscribe(\"MerchantShops\", Reaction.getShopsForUser([\"admin\"]));\n  if (!shopSub.ready()) {\n    return;\n  }\n  const shop = Shops.findOne(Reaction.getShopId());\n  const searchPackage = Reaction.Apps({ provides: \"ui-search\" });\n  const user = Meteor.user();\n  let searchEnabled;\n  let searchTemplate;\n  let brandMedia;\n\n  let shops;\n\n  if (user && user.roles) {\n    // Get all shops for which user has roles\n    shops = Shops.find({\n      $and: [\n        { _id: { $in: Object.keys(user.roles) } },\n        { $or: [{ \"workflow.status\": \"active\" }, { _id: Reaction.getPrimaryShopId() }] }\n      ]\n    }).fetch();\n  }\n\n  /**\n   * handleShopSelectChange\n   * @method\n   * @summary Handle change in selected shop\n   * @param {script} event\n   * @param {String} shopId - selected shopId\n   * @since 1.5.8\n   * @return {void}\n  */\n  const handleShopSelectChange = (event, shopId) => {\n    // set shopId\n    Reaction.setShopId(shopId);\n  };\n  if (searchPackage.length) {\n    searchEnabled = true;\n    searchTemplate = searchPackage[0].template;\n  } else {\n    searchEnabled = false;\n  }\n\n  if (shop && Array.isArray(shop.brandAssets)) {\n    const brandAsset = shop.brandAssets.find((asset) => asset.type === \"navbarBrandImage\");\n    brandMedia = brandAsset && Media.findOneLocal(brandAsset.mediaId);\n  }\n\n  const hasProperPermission = Reaction.hasPermission(\"account/profile\");\n\n  onData(null, {\n    shop,\n    brandMedia,\n    searchEnabled,\n    searchTemplate,\n    hasProperPermission,\n    shops,\n    handleShopSelectChange\n  });\n}\n\nregisterComponent(\"NavBar\", NavBar, composeWithTracker(composer));\n\nexport default composeWithTracker(composer)(NavBar);\n","import { registerComponent, composeWithTracker } from \"@reactioncommerce/reaction-components\";\nimport NavBarCheckout from \"../components/navbarCheckout\";\nimport { composer } from \"./navbar\";\n\nregisterComponent(\"NavBarCheckout\", NavBarCheckout, composeWithTracker(composer));\n\nexport default composeWithTracker(composer)(NavBarCheckout);\n","export { default as Brand } from \"./components/brand\";\nexport { default as Navbar } from \"./containers/navbar\";\nexport { default as NavBarCheckout } from \"./containers/navbarCheckout\";\n","import React, { Component } from \"react\";\nimport PropTypes from \"prop-types\";\nimport _ from \"lodash\";\nimport { Components, registerComponent } from \"@reactioncommerce/reaction-components\";\nimport update from \"immutability-helper\";\nimport { TagHelpers } from \"/imports/plugins/core/ui-tagnav/client/helpers\";\nimport { getTagIds } from \"/lib/selectors/tags\";\nimport { Router } from \"/client/api\";\n\nclass TagGroup extends Component {\n  constructor(props) {\n    super(props);\n\n    const { parentTag, tagsByKey, tagIds } = props.tagGroupProps;\n    this.state = {\n      suggestions: [],\n      newTag: {\n        name: \"\"\n      },\n      tagIds,\n      parentTag,\n      tagsByKey\n    };\n  }\n\n  componentWillReceiveProps(nextProps) {\n    const { parentTag, tagsByKey, tagIds } = nextProps.tagGroupProps;\n    this.setState({ tagIds, parentTag, tagsByKey });\n  }\n\n  get tags() {\n    if (this.props.editable) {\n      return this.state.tagIds.map((tagId) => this.state.tagsByKey[tagId]);\n    }\n\n    return this.props.tagGroupProps.subTagGroups;\n  }\n\n  get className() {\n    if (this.props.blank) {\n      return \"create\";\n    }\n    return \"\";\n  }\n\n  handleGetSuggestions = (suggestionUpdateRequest) => {\n    const suggestions = TagHelpers.updateSuggestions(\n      suggestionUpdateRequest.value,\n      { excludeTags: this.state.tagIds }\n    );\n\n    this.setState({ suggestions });\n  }\n\n  handleClearSuggestions = () => {\n    this.setState({ suggestions: [] });\n  }\n\n  handleNewTagSave = (event, tag) => {\n    if (this.props.onNewTagSave) {\n      this.props.onNewTagSave(tag, this.props.tagGroupProps.parentTag);\n      this.setState({\n        newTag: { name: \"\" }\n      });\n    }\n  }\n\n  handleTagUpdate = (event, tag) => {\n    const newState = update(this.state, {\n      tagsByKey: {\n        [tag._id]: {\n          $set: tag\n        }\n      }\n    });\n\n    this.setState(newState);\n  }\n\n  handleNewTagUpdate = (event, tag) => { // updates blank tag state being edited\n    this.setState({ newTag: tag });\n  }\n\n  tagGroupBodyProps = (tag) => {\n    const subTagGroups = _.compact(TagHelpers.subTags(tag));\n    const tagsByKey = {};\n\n    if (Array.isArray(subTagGroups)) {\n      for (const tagItem of subTagGroups) {\n        tagsByKey[tagItem._id] = tagItem;\n      }\n    }\n\n    return {\n      parentTag: tag,\n      tagsByKey: tagsByKey || {},\n      tagIds: getTagIds({ tags: subTagGroups }) || [],\n      subTagGroups\n    };\n  }\n\n  renderTree(tags) {\n    if (Array.isArray(tags)) {\n      return tags.map((tag) => (\n        <div className={`rui grouptag ${this.className}`} data-id={tag._id} key={tag._id}>\n          <Components.TagGroupHeader\n            {...this.props}\n            tag={tag}\n            parentTag={this.state.parentTag}\n            onTagRemove={this.props.onTagRemove}\n          />\n          <Components.TagGroupBody\n            {...this.props}\n            tagGroupBodyProps={this.tagGroupBodyProps(tag)}\n          />\n        </div>\n      ));\n    }\n  }\n\n  render() {\n    const { slug } = this.state.parentTag;\n    const url = Router.pathFor(\"tag\", {\n      hash: {\n        slug\n      }\n    });\n    return (\n      <div className=\"rui tagtree\">\n        <div className=\"header\">\n          <span className=\"title\">{this.state.parentTag.name}</span>\n          <a href={url}>View All <i className=\"fa fa-angle-right\" /></a>\n        </div>\n        <div className=\"content\">\n          {this.renderTree(this.tags)}\n          {this.props.editable &&\n            <div className=\"rui grouptag create\">\n              <div className=\"header\">\n                <Components.TagItem\n                  blank={true}\n                  tag={this.state.newTag}\n                  key=\"newTagForm\"\n                  inputPlaceholder=\"Add Tag\"\n                  i18nKeyInputPlaceholder=\"tags.addTag\"\n                  suggestions={this.state.suggestions}\n                  onClearSuggestions={this.handleClearSuggestions}\n                  onGetSuggestions={this.handleGetSuggestions}\n                  onTagInputBlur={this.handleNewTagSave}\n                  onTagSave={this.handleNewTagSave}\n                  onTagUpdate={this.handleNewTagUpdate}\n                />\n              </div>\n            </div>\n          }\n        </div>\n      </div>\n    );\n  }\n}\n\nTagGroup.propTypes = {\n  blank: PropTypes.bool,\n  editable: PropTypes.bool,\n  onNewTagSave: PropTypes.func,\n  onTagRemove: PropTypes.func,\n  tagGroupProps: PropTypes.object\n};\n\nregisterComponent(\"TagGroup\", TagGroup);\n\nexport default TagGroup;\n","import _ from \"lodash\";\nimport React, { Component } from \"react\";\nimport update from \"immutability-helper\";\nimport PropTypes from \"prop-types\";\nimport { Components, registerComponent } from \"@reactioncommerce/reaction-components\";\n\nclass TagGroupBody extends Component {\n  constructor(props) {\n    super(props);\n\n    const { parentTag, tagsByKey, tagIds } = props.tagGroupBodyProps;\n    this.state = {\n      suggestions: [],\n      newTag: {\n        name: \"\"\n      },\n      tagIds,\n      parentTag,\n      tagsByKey\n    };\n  }\n\n  componentWillReceiveProps(nextProps) {\n    const { parentTag, tagsByKey, tagIds } = nextProps.tagGroupBodyProps;\n    this.setState({ tagIds, parentTag, tagsByKey });\n  }\n\n  handleNewTagSave = (event, tag) => {\n    if (this.props.onNewTagSave) {\n      this.props.onNewTagSave(tag, this.state.parentTag);\n      this.setState({\n        newTag: { name: \"\" }\n      });\n    }\n  }\n\n  handleTagUpdate = (event, tag) => {\n    const newState = update(this.state, {\n      tagsByKey: {\n        [tag._id]: {\n          $set: tag\n        }\n      }\n    });\n\n    this.setState(newState);\n  }\n\n  handleNewTagUpdate = (event, tag) => { // updates blank tag state being edited\n    this.setState({ newTag: tag });\n  }\n\n  handleGetSuggestions = (suggestionUpdateRequest) => {\n    const suggestions = this.props.updateSuggestions(\n      suggestionUpdateRequest.value,\n      { excludeTags: this.state.tagIds }\n    );\n\n    this.setState({ suggestions });\n  }\n\n  handleClearSuggestions = () => {\n    this.setState({ suggestions: [] });\n  }\n\n  handleMoveTag = (dragIndex, hoverIndex) => {\n    const tag = this.state.tagIds[dragIndex];\n    if (!tag) {\n      return false;\n    }\n    // Apply new sort order to variant list\n    const newState = update(this.state, {\n      tagIds: {\n        $splice: [\n          [dragIndex, 1],\n          [hoverIndex, 0, tag]\n        ]\n      }\n    });\n\n    // Set local state so the component does't have to wait for a round-trip\n    // to the server to get the updated list of variants\n    this.setState(newState, () => {\n      _.debounce(() => this.props.onTagSort(this.state.tagIds, this.state.parentTag), 500)();\n    });\n  }\n\n  handleTagSave = (event, tag) => {\n    if (this.props.onUpdateTag) {\n      this.props.onUpdateTag(tag._id, tag.name, this.state.parentTag._id);\n    }\n  }\n\n  get tags() {\n    if (this.props.editable) {\n      return this.state.tagIds.map((tagId) => this.state.tagsByKey[tagId]);\n    }\n\n    return this.props.tagGroupBodyProps.subTagGroups;\n  }\n\n  genTagsList(tags, parentTag) {\n    if (Array.isArray(tags)) {\n      return tags.map((tag, index) => (\n        <Components.TagItem\n          tag={tag}\n          index={index}\n          key={index}\n          data-id={tag._id}\n          editable={this.props.editable}\n          isSelected={this.isSelected}\n          parentTag={parentTag}\n          draggable={true}\n          selectable={true}\n          suggestions={this.state.suggestions}\n          onClearSuggestions={this.handleClearSuggestions}\n          onGetSuggestions={this.handleGetSuggestions}\n          onMove={this.handleMoveTag}\n          onTagInputBlur={this.handleTagSave}\n          onTagMouseOut={this.handleTagMouseOut}\n          onTagMouseOver={this.handleTagMouseOver}\n          onTagRemove={this.props.onTagRemove}\n          onTagSave={this.handleTagSave}\n          onTagSelect={this.onTagSelect}\n          onTagUpdate={this.handleTagUpdate}\n          onTagClick={this.props.onTagClick}\n        />\n      ));\n    }\n  }\n\n  render() {\n    return (\n      <div className=\"content\">\n        <div className=\"rui tags\" data-id={this.state.parentTag._id}>\n          {this.genTagsList(_.compact(this.tags), this.state.parentTag)}\n          {this.props.editable &&\n            <div className=\"rui item create\">\n              <Components.TagItem\n                blank={true}\n                key=\"newTagForm\"\n                tag={this.state.newTag}\n                inputPlaceholder=\"Add Tag\"\n                i18nKeyInputPlaceholder=\"tags.addTag\"\n                suggestions={this.state.suggestions}\n                onClearSuggestions={this.handleClearSuggestions}\n                onGetSuggestions={this.handleGetSuggestions}\n                onMoveTag={this.handleMoveTag}\n                onTagInputBlur={this.handleNewTagSave}\n                onTagSave={this.handleNewTagSave}\n                onTagUpdate={this.handleNewTagUpdate}\n              />\n            </div>\n          }\n        </div>\n      </div>\n    );\n  }\n}\n\nTagGroupBody.propTypes = {\n  editable: PropTypes.bool,\n  onNewTagSave: PropTypes.func,\n  onTagClick: PropTypes.func,\n  onTagRemove: PropTypes.func,\n  onTagSort: PropTypes.func,\n  onUpdateTag: PropTypes.func,\n  tagGroupBodyProps: PropTypes.object,\n  updateSuggestions: PropTypes.func\n};\n\nregisterComponent(\"TagGroupBody\", TagGroupBody);\n\nexport default TagGroupBody;\n","import React, { Component } from \"react\";\nimport PropTypes from \"prop-types\";\nimport { Components, registerComponent } from \"@reactioncommerce/reaction-components\";\n\nclass TagGroupHeader extends Component {\n  constructor(props) {\n    super(props);\n    this.state = {\n      suggestions: [],\n      tag: this.props.tag\n    };\n  }\n\n  handleGetSuggestions = (suggestionUpdateRequest) => {\n    const suggestions = this.props.updateSuggestions(\n      suggestionUpdateRequest.value,\n      { excludeTags: this.state.tagIds }\n    );\n\n    this.setState({ suggestions });\n  }\n\n  handleTagUpdate = (event, tag) => {\n    this.setState({ tag });\n  }\n\n  handleTagSave = (event, tag) => {\n    if (this.props.onUpdateTag) {\n      this.props.onUpdateTag(tag._id, tag.name, this.props.parentTag._id);\n    }\n  }\n\n  handleTagTreeMove = () => {\n    // needed to prevent move errors, pending fix for TagGroup draging\n  }\n\n  render() {\n    return (\n      <div className=\"header\">\n        <Components.TagItem\n          tag={this.state.tag}\n          parentTag={this.props.parentTag}\n          selectable={true}\n          className=\"js-tagNav-item\"\n          editable={this.props.editable}\n          isSelected={this.isSelected}\n          suggestions={this.state.suggestions}\n          onClearSuggestions={this.handleClearSuggestions}\n          onGetSuggestions={this.handleGetSuggestions}\n          onMove={this.handleTagTreeMove}\n          onTagRemove={this.props.onTagRemove}\n          onTagSave={this.handleTagSave}\n          onTagInputBlur={this.handleTagSave}\n          onTagUpdate={this.handleTagUpdate}\n          onTagClick={this.props.onTagClick}\n        />\n      </div>\n    );\n  }\n}\n\nTagGroupHeader.propTypes = {\n  editable: PropTypes.bool,\n  onTagClick: PropTypes.func,\n  onTagRemove: PropTypes.func,\n  onUpdateTag: PropTypes.func,\n  parentTag: PropTypes.object,\n  tag: PropTypes.object,\n  updateSuggestions: PropTypes.func\n};\n\nregisterComponent(\"TagGroupHeader\", TagGroupHeader);\n\nexport default TagGroupHeader;\n","import React, { Component } from \"react\";\nimport PropTypes from \"prop-types\";\nimport _ from \"lodash\";\nimport { Components } from \"@reactioncommerce/reaction-components\";\nimport { getTagIds } from \"/lib/selectors/tags\";\nimport { TagHelpers } from \"/imports/plugins/core/ui-tagnav/client/helpers\";\nimport ShopSelect from \"/imports/plugins/core/dashboard/client/components/shopSelect\";\n\nclass TagNav extends Component {\n  constructor(props) {\n    super(props);\n    this.state = {\n      selectedTag: this.props.selectedTag || {}\n    };\n  }\n\n  componentWillReceiveProps(nextProps) {\n    this.setState({ selectedTag: nextProps.selectedTag });\n  }\n\n  /**\n   * onShopSelectChange\n   * @method\n   * @summary Handle change in selected shop\n   * @param {script} event\n   * @param {String} shopId - selected shopId\n   * @since 1.5.8\n   * @return {void}\n  */\n  onShopSelectChange = (event, shopId) => {\n    if (this.props.handleShopSelectChange) {\n      this.props.handleShopSelectChange(event, shopId);\n    }\n  }\n\n  renderEditButton() {\n    const { editContainerItem } = this.props.navButtonStyles;\n    return (\n      <span className=\"navbar-item edit-button\" style={editContainerItem}>\n        <Components.EditButton\n          onClick={this.props.onEditButtonClick}\n          bezelStyle=\"solid\"\n          primary={true}\n          icon=\"fa fa-pencil\"\n          onIcon=\"fa fa-check\"\n          toggle={true}\n          toggleOn={this.props.editable}\n        />\n      </span>\n    );\n  }\n\n  /**\n  * renderShopSelect\n  * @method\n  * @summary Handles shop options display on mobile view\n  * @return {JSX} React node containing dropdown menu\n  */\n  renderShopSelect() {\n    if (this.props.handleShopSelectChange) {\n      return (\n        <ShopSelect\n          className={\"shop-select\"}\n          isTagNav={true}\n          onShopSelectChange={this.onShopSelectChange}\n          shopName={this.props.shop.name}\n          shops={this.props.shops}\n          shopId={this.props.shop._id}\n        />\n      );\n    }\n    return null;\n  }\n\n  tagGroupProps = (tag) => {\n    const subTagGroups = _.compact(TagHelpers.subTags(tag));\n    const tagsByKey = {};\n\n    if (Array.isArray(subTagGroups)) {\n      for (const tagItem of subTagGroups) {\n        tagsByKey[tagItem._id] = tagItem;\n      }\n    }\n\n    return {\n      parentTag: tag,\n      tagsByKey: tagsByKey || {},\n      tagIds: getTagIds({ tags: subTagGroups }) || [],\n      subTagGroups\n    };\n  }\n\n  render() {\n    const { navbarOrientation, navbarPosition, navbarAnchor, navbarVisibility } = this.props;\n    return (\n      <div className={`rui tagnav ${navbarOrientation} ${navbarPosition} ${navbarAnchor} ${navbarVisibility}`}>\n        <div className=\"navbar-header\">\n          <Components.Button\n            primary={true}\n            icon=\"times\"\n            status=\"default\"\n            className=\"close-button\"\n            onClick={this.props.closeNavbar}\n          />\n          {this.props.children}\n        </div>\n        {this.renderShopSelect()}\n        <div className=\"navbar-items\">\n          <Components.DragDropProvider>\n            <Components.TagList\n              {...this.props}\n              isTagNav={true}\n              draggable={true}\n              enableNewTagForm={true}\n            >\n              <div className=\"dropdown-container\">\n                <Components.TagGroup\n                  {...this.props}\n                  editable={this.props.editable === true}\n                  tagGroupProps={this.tagGroupProps(this.state.selectedTag || {})}\n                  onMove={this.props.onMoveTag}\n                  onTagInputBlur={this.handleTagSave}\n                  onTagMouseOut={this.handleTagMouseOut}\n                  onTagMouseOver={this.handleTagMouseOver}\n                  onTagSave={this.handleTagSave}\n                />\n              </div>\n            </Components.TagList>\n          </Components.DragDropProvider>\n          {this.props.canEdit && this.renderEditButton()}\n        </div>\n      </div>\n    );\n  }\n}\n\nTagNav.propTypes = {\n  canEdit: PropTypes.bool,\n  children: PropTypes.node,\n  closeNavbar: PropTypes.func,\n  editable: PropTypes.bool,\n  handleShopSelectChange: PropTypes.func,\n  navButtonStyles: PropTypes.object,\n  navbarAnchor: PropTypes.string,\n  navbarOrientation: PropTypes.string,\n  navbarPosition: PropTypes.string,\n  navbarVisibility: PropTypes.string,\n  onEditButtonClick: PropTypes.func,\n  onMoveTag: PropTypes.func,\n  selectedTag: PropTypes.object,\n  shop: PropTypes.object,\n  shops: PropTypes.array\n};\n\nexport default TagNav;\n","import _ from \"lodash\";\nimport update from \"immutability-helper\";\nimport React, { Component } from \"react\";\nimport PropTypes from \"prop-types\";\nimport { compose } from \"recompose\";\nimport { Components, registerComponent, composeWithTracker } from \"@reactioncommerce/reaction-components\";\nimport { Reaction, Router } from \"/client/api\";\nimport { getTagIds } from \"/lib/selectors/tags\";\nimport { TagHelpers } from \"/imports/plugins/core/ui-tagnav/client/helpers\";\nimport { Tags } from \"/lib/collections\";\nimport TagNav from \"../components/tagNav\";\n\nconst navButtonStyles = {\n  editContainerItem: {\n    display: \"flex\",\n    marginLeft: 5\n  }\n};\n\nconst NavbarStates = {\n  Orientation: \"stateNavbarOrientation\",\n  Position: \"stateNavbarPosition\",\n  Anchor: \"stateNavbarAnchor\",\n  Visible: \"stateNavbarVisible\"\n};\n\nconst NavbarOrientation = {\n  Vertical: \"vertical\",\n  Horizontal: \"horizontal\"\n};\n\nconst NavbarPosition = {\n  Static: \"static\",\n  Fixed: \"fixed\"\n};\n\nconst NavbarAnchor = {\n  Top: \"top\",\n  Right: \"right\",\n  Bottom: \"bottom\",\n  Left: \"left\",\n  None: \"inline\"\n};\n\nconst TagNavHelpers = {\n  onTagCreate(tagName, parentTag) {\n    TagHelpers.createTag(tagName, undefined, parentTag);\n  },\n  onTagRemove(tag, parentTag) {\n    TagHelpers.removeTag(tag, parentTag);\n  },\n  onTagSort(tagIds, parentTag) {\n    TagHelpers.sortTags(tagIds, parentTag);\n  },\n  onTagDragAdd(movedTagId, toListId, toIndex, ofList) {\n    TagHelpers.moveTagToNewParent(movedTagId, toListId, toIndex, ofList);\n  },\n  onUpdateTag(tagId, tagName, parentTagId) {\n    TagHelpers.updateTag(tagId, tagName, parentTagId);\n  },\n  isMobile() {\n    return window.matchMedia(\"(max-width: 991px)\").matches;\n  },\n  tagById(tagId, tags) {\n    return _.find(tags, (tag) => tag._id === tagId);\n  },\n  updateSuggestions(suggestion, excludeTagsObj) {\n    return TagHelpers.updateSuggestions(suggestion, excludeTagsObj);\n  },\n  hasSubTags(tagId, tags) {\n    const foundTag = this.tagById(tagId, tags);\n\n    if (foundTag) {\n      if (Array.isArray(foundTag.relatedTagIds) && foundTag.relatedTagIds.length) {\n        return true;\n      }\n    }\n    return false;\n  }\n};\n\nconst wrapComponent = (Comp) => (\n  class TagNavContainer extends Component {\n    static propTypes = {\n      closeNavbar: PropTypes.func,\n      editButton: PropTypes.node,\n      editable: PropTypes.bool,\n      hasEditRights: PropTypes.bool,\n      isVisible: PropTypes.bool,\n      tagIds: PropTypes.arrayOf(PropTypes.string),\n      tagsAsArray: PropTypes.arrayOf(PropTypes.object),\n      tagsByKey: PropTypes.object\n    }\n\n    constructor(props) {\n      super(props);\n\n      this._isMounted = false;\n\n      this.state = {\n        attachedBodyListener: false,\n        editable: false,\n        tagIds: props.tagIds || [],\n        tagsByKey: props.tagsByKey || {},\n        selectedTag: null,\n        suggestions: [],\n        [NavbarStates.Visible]: props.isVisible,\n        newTag: {\n          name: \"\"\n        }\n      };\n\n      this.onWindowResize = this.onWindowResize.bind(this);\n    }\n\n    componentDidMount() {\n      window.addEventListener(\"resize\", this.onWindowResize);\n      this.onWindowResize();\n      this._isMounted = true;\n    }\n\n    componentWillReceiveProps(nextProps) {\n      let selectedTag = {};\n      const previousEdit = this.state.editable;\n      nextProps.tagsAsArray.forEach((tag) => {\n        if (this.isSelected(tag)) {\n          selectedTag = tag;\n        }\n      });\n\n      const { tagIds, tagsByKey, isVisible } = nextProps;\n      this.setState({\n        [NavbarStates.Visible]: isVisible,\n        editable: previousEdit && this.canEdit,\n        tagIds,\n        tagsByKey,\n        selectedTag\n      });\n    }\n\n    componentWillUnmount() {\n      window.removeEventListener(\"resize\", this.onWindowResize);\n      this._isMounted = false;\n    }\n\n    onWindowResize = () => {\n      const matchQuery = window.matchMedia(\"(max-width: 991px)\");\n      if (matchQuery.matches) {\n        this.setState({\n          [NavbarStates.Orientation]: NavbarOrientation.Vertical,\n          [NavbarStates.Position]: NavbarPosition.Fixed,\n          [NavbarStates.Anchor]: NavbarAnchor.Left\n        });\n      } else {\n        this.setState({\n          [NavbarStates.Orientation]: NavbarOrientation.Horizontal,\n          [NavbarStates.Position]: NavbarPosition.Static,\n          [NavbarStates.Anchor]: NavbarAnchor.None,\n          [NavbarStates.Visible]: false\n        });\n      }\n    }\n\n    canSaveTag(tag) {\n      // Blank tags cannot be saved\n      if (typeof tag.name === \"string\" && tag.name.trim().length === 0) {\n        return false;\n      }\n\n      // If the tag does not have an id, then allow the save\n      if (!tag._id) {\n        return true;\n      }\n\n      // Get the original tag from the props\n      // Tags from props are not mutated, and come from an outside source\n      const originalTag = this.props.tagsByKey[tag._id];\n\n      if (originalTag && originalTag.name !== tag.name) {\n        return true;\n      }\n\n      return false;\n    }\n\n    handleNewTagSave = (tag, parentTag) => {\n      if (this.canSaveTag(tag)) {\n        TagNavHelpers.onTagCreate(tag.name, parentTag);\n        this.setState({ newTag: { name: \"\" } });\n      }\n    }\n\n    handleNewTagUpdate = (tag) => { // updates the current tag state being edited\n      this.setState({\n        newTag: tag\n      });\n    }\n\n    handleTagRemove = (tag, parentTag) => {\n      TagNavHelpers.onTagRemove(tag, parentTag);\n    }\n\n    handleTagUpdate = (tag) => {\n      const newState = update(this.state, {\n        tagsByKey: {\n          [tag._id]: {\n            $set: tag\n          }\n        }\n      });\n\n      this.setState(newState);\n    }\n\n    handleTagSave = (tag) => {\n      TagNavHelpers.onUpdateTag(tag._id, tag.name);\n    }\n\n    handleMoveTag = (dragIndex, hoverIndex) => {\n      const tag = this.state.tagIds[dragIndex];\n\n      // Apply new sort order to variant list\n      const newState = update(this.state, {\n        tagIds: {\n          $splice: [\n            [dragIndex, 1],\n            [hoverIndex, 0, tag]\n          ]\n        }\n      });\n\n      // Set local state so the component does't have to wait for a round-trip\n      // to the server to get the updated list of variants\n      this.setState(newState, () => {\n        _.debounce(() => TagNavHelpers.onTagSort(this.state.tagIds), 500)(); // Save the updated positions\n      });\n    }\n\n    handleGetSuggestions = (suggestionUpdateRequest) => {\n      const suggestions = TagNavHelpers.updateSuggestions(\n        suggestionUpdateRequest.value,\n        { excludeTags: this.state.tagIds }\n      );\n\n      this.setState({ suggestions });\n    }\n\n    handleClearSuggestions = () => {\n      this.setState({ suggestions: [] });\n    }\n\n    get canEdit() {\n      return this.props.hasEditRights && Reaction.isPreview() === false;\n    }\n\n    attachBodyListener = () => {\n      document.body.addEventListener(\"mouseover\", this.closeDropdown);\n      this.setState({ attachedBodyListener: true });\n    }\n\n    detachhBodyListener = () => {\n      document.body.removeEventListener(\"mouseover\", this.closeDropdown);\n      this.setState({ attachedBodyListener: false });\n    }\n\n    closeDropdown = (event) => {\n      const closestNavItem = event.target.closest(\".navbar-item\");\n\n      // on mouseover an element outside of tags, close dropdown\n      if (this._isMounted && !closestNavItem) {\n        this.closeDropdownTimeout = setTimeout(() => {\n          this.setState({ selectedTag: null });\n          this.detachhBodyListener();\n        }, 500);\n      } else if (this.closeDropdownTimeout) {\n        clearTimeout(this.closeDropdownTimeout);\n      }\n    }\n\n    get navbarOrientation() {\n      return this.state[NavbarStates.Orientation];\n    }\n\n    get navbarPosition() {\n      return this.state[NavbarStates.Position];\n    }\n\n    get navbarAnchor() {\n      return this.state[NavbarStates.Anchor];\n    }\n\n    get navbarVisibility() {\n      const isVisible = this.state[NavbarStates.Visible] === true;\n\n      if (isVisible) {\n        return \"open\";\n      }\n      return \"closed\";\n    }\n\n    onTagSelect = (currentSelectedTag) => {\n      if (_.isEqual(currentSelectedTag, this.state.selectedTag)) {\n        this.setState({ selectedTag: null });\n      } else {\n        this.setState({ selectedTag: currentSelectedTag });\n      }\n    }\n\n    isSelected(tag) {\n      let isSelected = false;\n      if (this.state.selectedTag && tag) {\n        isSelected = this.state.selectedTag._id === tag._id;\n      }\n      return isSelected;\n    }\n\n    handleTagMouseOver = (event, tag) => {\n      const tagId = tag._id;\n      const tags = this.props.tagsAsArray;\n\n      if (TagNavHelpers.isMobile()) {\n        return;\n      }\n      // While in edit mode, don't trigger the hover hide/show menu\n      if (this.state.editable === false) {\n        // User mode\n        // Don't show dropdown if there are no subtags\n        if (TagNavHelpers.hasSubTags(tagId, tags) === false) {\n          this.setState({ selectedTag: null });\n          return;\n        }\n\n        // Otherwise, show the menu\n        // And Attach an event listener to the document body\n        // This will check to see if the dropdown should be closed if the user\n        // leaves the tag nav bar\n        this.attachBodyListener();\n        this.setState({ selectedTag: TagNavHelpers.tagById(tagId, tags) });\n      }\n    }\n\n    handleTagClick = (event, tag) => {\n      if (TagNavHelpers.isMobile()) {\n        const tagId = tag._id;\n        const tags = this.props.tagsAsArray;\n        const { selectedTag } = this.state;\n        const hasSubTags = TagNavHelpers.hasSubTags(tagId, tags);\n\n        if (hasSubTags === false) {\n          // click close button to make navbar left disappear\n          this.props.closeNavbar();\n          Router.go(\"tag\", { slug: tag.slug });\n        } else {\n          event.preventDefault();\n        }\n\n        if (selectedTag && selectedTag._id === tagId) {\n          this.setState({ selectedTag: null });\n        } else if (hasSubTags) {\n          this.setState({ selectedTag: TagNavHelpers.tagById(tagId, tags) });\n        }\n      } else {\n        Router.go(\"tag\", { slug: tag.slug });\n      }\n    }\n\n    handleEditButtonClick = () => {\n      this.setState({ editable: !this.state.editable });\n    }\n\n    hasDropdownClassName(tag) {\n      if (Array.isArray(tag.relatedTagIds)) {\n        return \"has-dropdown\";\n      }\n      return \"\";\n    }\n\n    navbarSelectedClassName = (tag) => {\n      const currentSelectedTag = this.state.selectedTag;\n\n      if (currentSelectedTag) {\n        if (currentSelectedTag._id === tag._id) {\n          return \"selected\";\n        }\n      }\n      return \"\";\n    }\n\n    get tags() {\n      if (this.state.editable) {\n        return this.state.tagIds.map((tagId) => this.state.tagsByKey[tagId]);\n      }\n\n      return this.props.tagsAsArray;\n    }\n\n    render() {\n      return (\n        <div>\n          <Comp\n            {...this.props}\n            {...TagNavHelpers}\n            navbarOrientation={this.navbarOrientation}\n            navbarPosition={this.navbarPosition}\n            navbarAnchor={this.navbarAnchor}\n            navbarVisibility={this.navbarVisibility}\n            tags={this.tags}\n            canEdit={this.canEdit}\n            newTag={this.state.newTag}\n            selectedTag={this.state.selectedTag}\n            navButtonStyles={navButtonStyles}\n            editable={this.state.editable}\n            hasDropdownClassName={this.hasDropdownClassName}\n            navbarSelectedClassName={this.navbarSelectedClassName}\n            suggestions={this.state.suggestions}\n            onClearSuggestions={this.handleClearSuggestions}\n            onGetSuggestions={this.handleGetSuggestions}\n            onEditButtonClick={this.handleEditButtonClick}\n            onMoveTag={this.handleMoveTag}\n            onNewTagSave={this.handleNewTagSave}\n            onNewTagUpdate={this.handleNewTagUpdate}\n            onTagClick={this.handleTagClick}\n            onTagMouseOver={this.handleTagMouseOver}\n            onTagRemove={this.handleTagRemove}\n            onTagSave={this.handleTagSave}\n            onTagUpdate={this.handleTagUpdate}\n            onTagSelect={this.onTagSelect}\n          />\n          <Components.Overlay\n            isVisible={this.state[NavbarStates.Visible]}\n            onClick={this.props.closeNavbar}\n          />\n        </div>\n      );\n    }\n  }\n);\n\nconst composer = (props, onData) => {\n  let tags = Tags.find({ isTopLevel: true }, { sort: { position: 1 } }).fetch();\n  tags = _.sortBy(tags, \"position\"); // puts tags without position at end of array\n\n  const tagsByKey = {};\n\n  if (Array.isArray(tags)) {\n    for (const tag of tags) {\n      tagsByKey[tag._id] = tag;\n    }\n  }\n\n  onData(null, {\n    name: \"coreHeaderNavigation\",\n    hasEditRights: Reaction.hasAdminAccess(),\n    tagsAsArray: tags,\n    isVisible: props.isVisible,\n    tagIds: getTagIds({ tags }),\n    tagsByKey\n  });\n};\n\nregisterComponent(\"TagNav\", TagNav, [\n  composeWithTracker(composer),\n  wrapComponent\n]);\n\nexport default compose(\n  composeWithTracker(composer),\n  wrapComponent\n)(TagNav);\n","export { TagHelpers } from \"./tags\";\n","import _ from \"lodash\";\nimport { Reaction, i18next } from \"/client/api\";\nimport { Tags } from \"/lib/collections\";\nimport { Meteor } from \"meteor/meteor\";\nimport { Session } from \"meteor/session\";\nimport { Template } from \"meteor/templating\";\n\n/**\n * Reaction TagNav shared helpers\n * @type {Object}\n */\nexport const TagHelpers = {\n  moveItem(oldArray, fromIndex, toIndex) {\n    const newArray = [...oldArray];\n    newArray.splice(toIndex, 0, newArray.splice(fromIndex, 1)[0]);\n    return newArray;\n  },\n\n  subTags(parentTag) {\n    if (_.isArray(parentTag.relatedTagIds)) {\n      const tags = Tags.find({\n        isTopLevel: false,\n        _id: {\n          $in: parentTag.relatedTagIds\n        }\n      }).fetch();\n\n      const subTags = parentTag.relatedTagIds.map((tagId) => _.find(tags, (tagObject) => tagObject._id === tagId));\n\n      return subTags;\n    }\n\n    return [];\n  },\n\n  currentTag() {\n    return Session.get(\"currentTag\");\n  },\n\n  getTags() {\n    let tags = [];\n\n    tags = Tags.find({\n      isTopLevel: true\n    }, {\n      sort: {\n        position: 1\n      }\n    }).fetch();\n    /*\n    if (this.tagIds) {\n      for (let relatedTagId of this.tagIds) {\n        if (!_.find(tags, {\n          _id: relatedTagId\n        })) {\n          tags.push(Tags.findOne(relatedTagId));\n        }\n      }\n    }*/\n\n    if (this.tag) {\n      Session.set(\"currentTag\", this.tag._id);\n    } else {\n      Session.set(\"currentTag\", \"\");\n    }\n\n    return tags;\n    // there are cases where\n    // we'll have no tags, and sort will error\n    // so we check length for safety\n    // if (tags) {\n    //   tags.sort(function (a, b) {\n    //     return a.position - b.position;\n    //   });\n    //   return tags;\n    // }\n  },\n\n  createTag(tagName, tagId, parentTag) {\n    if (!tagName) {\n      return;\n    }\n    let parentTagId;\n\n    if (parentTag) {\n      parentTagId = parentTag._id;\n    }\n\n    Meteor.call(\"shop/updateHeaderTags\", tagName, null, parentTagId, (error) => {\n      if (error) {\n        Alerts.toast(i18next.t(\"productDetail.tagExists\"), \"error\");\n      }\n    });\n  },\n\n  updateTag(tagId, tagName, parentTagId) {\n    Meteor.call(\"shop/updateHeaderTags\", tagName, tagId, parentTagId, (error) => {\n      if (error) {\n        Alerts.toast(i18next.t(\"productDetail.tagExists\"), \"error\");\n      }\n    });\n  },\n\n  /* eslint no-unused-vars: 0 */\n  //\n  //   TODO review toIndex, ofList variable implementation in tags.js moveTagToNewParent\n  //\n  moveTagToNewParent(movedTagId, toListId, toIndex, ofList) {\n    if (movedTagId) {\n      if (toListId) {\n        const result = Tags.update(toListId, {\n          $addToSet: {\n            relatedTagIds: movedTagId\n          }\n        });\n\n        return result;\n      }\n\n      const result = Tags.update(movedTagId, {\n        $set: {\n          isTopLevel: true\n        }\n      });\n\n      return result;\n    }\n    return 0;\n  },\n\n  sortTags(tagIds, parentTag) {\n    if (_.isArray(tagIds)) {\n      if (_.isEmpty(parentTag)) {\n        // Top level tags\n        for (const tagId of tagIds) {\n          Tags.update(tagId, {\n            $set: {\n              position: tagIds.indexOf(tagId)\n            }\n          });\n        }\n      } else {\n        // Sub tags\n        Tags.update(parentTag._id, {\n          $set: {\n            relatedTagIds: _.compact(tagIds)\n          }\n        });\n      }\n    }\n  },\n\n  removeTag(tag, parentTag) {\n    if (_.isEmpty(parentTag) === false) {\n      Tags.update(parentTag._id, {\n        $pullAll: {\n          relatedTagIds: [tag._id]\n        }\n      });\n    } else if (tag.isTopLevel === true) {\n      Tags.update(tag._id, {\n        $set: {\n          isTopLevel: false\n        }\n      });\n    }\n  },\n\n  updateSuggestions(term, { excludeTags }) {\n    const slug = Reaction.getSlug(term);\n\n    const selector = {\n      slug: new RegExp(slug, \"i\")\n    };\n\n    if (Array.isArray(excludeTags)) {\n      selector._id = {\n        $nin: excludeTags\n      };\n    }\n\n    const tags = Tags.find(selector).map((tag) => ({\n      label: tag.name\n    }));\n\n    return tags;\n  }\n};\n\nTemplate.registerHelper(\"reactionSubTags\", TagHelpers.subTags);\n","export { default as TagGroup } from \"./components/tagGroup\";\nexport { default as TagGroupBody } from \"./components/tagGroupBody\";\nexport { default as TagGroupHeader } from \"./components/tagGroupHeader\";\nexport { default as TagNav } from \"./components/tagNav\";\nexport { default as TagNavContainer } from \"./containers/tagNavContainer\";\n","/**\n * @file Exposes the DOM object used to manipulate the document.\n * The functions are only meant to be used on the client.\n * @namespace DOM\n */\n\nconst DOM = {};\n\n/**\n * @method setMetaTag\n * @memberof DOM\n * @summary Sets/adds a meta tag to the document head\n * @param {Object} attributes - key/value pairs for tag attributes\n * @return {undefined} no return value\n */\nDOM.setMetaTag = (attributes) => {\n  const currentMetaTag = document.querySelector(`meta[name=\"${attributes.name}\"]`);\n\n  // If tag exists, just update its content attribute\n  if (currentMetaTag) {\n    currentMetaTag.setAttribute(\"content\", attributes.content);\n    currentMetaTag.setAttribute(\"data-metatag\", \"1\");\n    return;\n  }\n\n  // Otherwise, create a new meta tag element\n  const newMetaTag = document.createElement(\"meta\");\n\n  newMetaTag.setAttribute(\"name\", attributes.name);\n  newMetaTag.setAttribute(\"content\", attributes.content);\n  // This attribute will be used to remove meta tags on route changes.\n  newMetaTag.setAttribute(\"data-metatag\", \"1\");\n\n  // Append to document head\n  document.head.appendChild(newMetaTag);\n};\n\n/**\n * @method addLinkTag\n * @memberof DOM\n * @summary Adds a link tags to the document head\n * @param {Object} attributes - key/value pairs for tag attributes\n * @return {undefined} no return value\n */\nDOM.addLinkTag = (attributes) => {\n  const newLinkTag = document.createElement(\"link\");\n\n  for (const key in attributes) {\n    if ({}.hasOwnProperty.call(attributes, key)) {\n      newLinkTag.setAttribute(key, attributes[key]);\n    }\n  }\n\n  document.head.appendChild(newLinkTag);\n};\n\n/**\n * @method removeDocHeadAddedTags\n * @memberof DOM\n * @summary Removes document head tags\n * @returns {undefined} no return value\n */\nDOM.removeDocHeadAddedTags = () => {\n  const elements = document.querySelectorAll(\"[data-metatag='1']\");\n  for (const element of elements) {\n    element.parentNode.removeChild(element);\n  }\n};\n\nexport default DOM;\n","export { default as DOM } from \"./dom\";\n\n\n","import { Meteor } from \"meteor/meteor\";\nimport { MeteorFileCollection, FileRecord } from \"@reactioncommerce/file-collections\";\nimport { MediaRecords } from \"/lib/collections\";\n\nFileRecord.downloadEndpointPrefix = \"/assets/files\";\nFileRecord.uploadEndpoint = \"/assets/uploads\";\nFileRecord.absoluteUrlPrefix = Meteor.absoluteUrl();\n\nexport const Media = new MeteorFileCollection(\"Media\", {\n  // The backing Meteor Mongo collection, which you must make sure is published to clients as necessary\n  collection: MediaRecords,\n  DDP: Meteor\n});\n","/* global paypal */\nimport _ from \"lodash\";\nimport { Meteor } from \"meteor/meteor\";\nimport { Session } from \"meteor/session\";\nimport { ReactiveDict } from \"meteor/reactive-dict\";\nimport { Template } from \"meteor/templating\";\nimport { i18next } from \"/client/api\";\nimport { Cart } from \"/lib/collections\";\nimport { PaypalClientAPI } from \"../../../lib/paypalRestApi\";\nimport \"./checkoutButton.html\";\n\n/**\n * PayPal Checkout Button\n *\n * This is the PayPal Express Checkout button that displays opens a popup,\n * provided by paypal.\n */\n\n/**\n * Checkout - Open PayPal Express popup\n * @return {undefined} no return value\n */\nfunction checkout() {\n  paypal.checkout.initXO();\n  const cart = Cart.findOne();\n  if (!cart) {\n    return undefined;\n  }\n\n  return Meteor.call(\"getExpressCheckoutToken\", cart._id, (error, token) => {\n    if (error) {\n      const msg = (error !== null ? error.error : undefined) || i18next.t(\"checkoutPayment.processingError\", \"There was a problem with your payment.\");\n      Alerts.add(msg, \"danger\", {\n        placement: \"paymentMethod\"\n      });\n      return paypal.checkout.closeFlow();\n    }\n    const url = paypal.checkout.urlPrefix + token;\n    return paypal.checkout.startFlow(url);\n  });\n}\n\n/**\n * Validate express checkout settings object\n * @param  {Object} settings Object containing \"merchantId\" and \"mode\":\n * @return {Boolean} true if valid, false otherwise\n */\nfunction expressCheckoutSettingsValid(settings) {\n  return _.isEmpty(settings.merchantId) === false && _.isEmpty(settings.mode) === false;\n}\n\n/**\n * PayPal checkout onCreate\n * @param  {Function} function to execute when template is created\n * @return {undefined} no return value\n */\nTemplate.paypalCheckoutButton.onCreated(function () {\n  Meteor.call(\"getExpressCheckoutSettings\", (error, expressCheckoutSettings) => {\n    if (!error) {\n      return Session.set(\"expressCheckoutSettings\", expressCheckoutSettings);\n    }\n  });\n  PaypalClientAPI.load();\n  this.state = new ReactiveDict();\n  this.state.setDefault({\n    isConfigured: true,\n    isLoading: true\n  });\n});\n\n/**\n * PayPal checkout onRendered\n * @param  {Function} function to execute when template is rendered\n * @return {undefined} no return value\n */\nTemplate.paypalCheckoutButton.onRendered(function () {\n  const element = this.$(\".js-paypal-express-checkout\")[0];\n\n  this.autorun(() => {\n    if (PaypalClientAPI.loaded()) {\n      const expressCheckoutSettings = Session.get(\"expressCheckoutSettings\");\n      if (expressCheckoutSettingsValid(expressCheckoutSettings)) {\n        // setup paypal button for this checkout\n        // gives nada back to us?\n        paypal.checkout.setup(expressCheckoutSettings.merchantId, {\n          environment: expressCheckoutSettings.mode,\n          button: element,\n          // Blank function to disable default paypal onClick functionality\n          click() {}\n        });\n        this.state.set(\"isLoading\", false);\n      } else {\n        this.state.set(\"isConfigured\", false);\n        this.state.set(\"isLoading\", false);\n      }\n    } else {\n      this.state.set(\"isLoading\", true);\n    }\n  });\n});\n\n/**\n * PayPal checkout button helpers\n */\nTemplate.paypalCheckoutButton.helpers({\n  expressCheckoutEnabled() {\n    const expressCheckoutSettings = Session.get(\"expressCheckoutSettings\");\n    return expressCheckoutSettings !== undefined ? expressCheckoutSettings.enabled : undefined;\n  },\n  /**\n   * Check for proper configuration of PayPal Express Checkout settings.\n   * This function only validates that the required settings exist and are not empty.\n   * @return {Boolean} true if properly configured, false otherwise\n   */\n  isConfigured() {\n    return Template.instance().state.equals(\"isConfigured\", true);\n  }\n});\n\n/**\n * PayPal checkout button events\n */\nTemplate.paypalCheckoutButton.events({\n\n  /**\n   * Click Event: Express Checkout Button\n   * @return {undefined} no return value\n   */\n  \"click .js-paypal-express-checkout\"() {\n    return checkout();\n  }\n});\n","import \"./checkoutButton.js\";\n","import \"./payflowForm.js\";\n","/* eslint camelcase: 0 */\nimport { Meteor } from \"meteor/meteor\";\nimport { Template } from \"meteor/templating\";\nimport { $ } from \"meteor/jquery\";\nimport { AutoForm } from \"meteor/aldeed:autoform\";\nimport Logger from \"/client/modules/logger\";\nimport { Cart, Shops, Packages } from \"/lib/collections\";\nimport { PaypalPayment } from \"/imports/plugins/included/payments-paypal/lib/collections/schemas\";\nimport { Reaction, i18next } from \"/client/api\";\nimport { PayPal } from \"/imports/plugins/included/payments-paypal/lib/api\";\nimport \"./payflowForm.html\";\n\nlet submitting = false;\n\nfunction uiEnd(template, buttonText) {\n  template.$(\".cart-checkout-step *\").removeAttr(\"disabled\");\n  template.$(\"#btn-complete-order\").text(buttonText);\n  return template.$(\"#btn-processing\").addClass(\"hidden\");\n}\n\nfunction paymentAlert(errorMessage) {\n  return $(\".alert\").removeClass(\"hidden\").text(errorMessage);\n}\n\nfunction hidePaymentAlert() {\n  return $(\".alert\").addClass(\"hidden\").text(\"\");\n}\n\nfunction getError(error, detailSubpart) {\n  if (error) {\n    if (error.response) {\n      return error.response[detailSubpart];\n    }\n  }\n  return undefined;\n}\n\nfunction handlePaypalSubmitError(error) {\n  const results = [];\n  const singleError = getError(error, \"error_description\");\n  const serverError = getError(error, \"message\");\n  const errors = getError(error, \"response\") || [];\n  if (singleError) {\n    return paymentAlert(`Oops! ${singleError}`);\n  } else if (errors.length) {\n    for (let i = 0, len = errors.length; i < len; i += 1) {\n      const thisError = errors[i];\n      const formattedError = `Oops! ${thisError.issue}: ${thisError.field.split(/[. ]+/).pop().replace(/_/g, \" \")}`;\n      results.push(paymentAlert(formattedError));\n    }\n    return results;\n  } else if (serverError) {\n    // Alerts.toast(i18next.t(\"checkout.unknownError\", { err: serverError }), \"error\");\n    return paymentAlert(i18next.t(\"checkout.paymentMethod.unknownError\"));\n  }\n  Logger.fatal(\"An unknown error has occurred while processing a Paypal payment\");\n  return paymentAlert(i18next.t(\"checkout.paymentMethod.unknownError\"));\n}\n\n//\n// paypal payflow form helpers\n//\nTemplate.paypalPayflowForm.helpers({\n  PaypalPayment() {\n    return PaypalPayment;\n  }\n});\n\n//\n// autoform handling\n//\nAutoForm.addHooks(\"paypal-payment-form\", {\n  onSubmit(doc) {\n    hidePaymentAlert();\n    const { template } = this;\n    const payerNamePieces = doc.payerName.split(\" \");\n    const form = {\n      first_name: payerNamePieces[0],\n      last_name: payerNamePieces[1],\n      number: doc.cardNumber,\n      expire_month: doc.expireMonth,\n      expire_year: doc.expireYear,\n      cvv2: doc.cvv,\n      type: Reaction.getCardType(doc.cardNumber)\n    };\n    const storedCard = `${form.type.charAt(0).toUpperCase() + form.type.slice(1)} ${doc.cardNumber.slice(-4)}`;\n    PayPal.authorize(form, {\n      total: Cart.findOne().getTotal(),\n      currency: Shops.findOne().currency\n    }, (error, transaction) => {\n      submitting = false; // todo: check scope\n      if (error) {\n        handlePaypalSubmitError(error);\n        uiEnd(template, i18next.t(\"checkout.paymentMethod.resubmit\"));\n      } else if (transaction.saved === true) {\n        let normalizedStatus = transaction.response.state;\n        if (normalizedStatus === \"approved\") normalizedStatus = \"created\";\n\n        const supportedStatuses = [\"created\", \"failed\", \"canceled\", \"expired\", \"pending\"];\n        if (supportedStatuses.indexOf(normalizedStatus) === -1) normalizedStatus = \"failed\";\n\n        let normalizedMode;\n        switch (transaction.response.intent) {\n          case \"authorize\":\n            normalizedMode = \"authorize\";\n            break;\n          case \"sale\":\n          case \"order\":\n          default:\n            normalizedMode = \"capture\";\n            break;\n        }\n\n        // just auth, not transaction\n        const transactionId = transaction.response.id;\n        // when auth and transaction\n        let authId;\n        if (typeof transaction.response.transactions[0].related_resources[0] === \"object\") {\n          authId = transaction.response.transactions[0].related_resources[0].authorization.id;\n        }\n        Meteor.subscribe(\"Packages\", Reaction.getShopId());\n        const packageData = Packages.findOne({\n          name: \"reaction-paypal\",\n          shopId: Reaction.getShopId()\n        });\n        const paymentMethod = {\n          processor: \"PayflowPro\",\n          paymentPackageId: packageData._id,\n          paymentSettingsKey: packageData.registry[0].settingsKey,\n          storedCard,\n          method: \"credit\",\n          authorization: authId,\n          transactionId,\n          metadata: {\n            transactionId,\n            authorizationId: authId\n          },\n          amount: Number(transaction.response.transactions[0].amount.total),\n          status: normalizedStatus,\n          mode: normalizedMode,\n          createdAt: new Date(transaction.response.create_time),\n          updatedAt: new Date(transaction.response.update_time),\n          transactions: []\n        };\n        paymentMethod.transactions.push(transaction.response);\n        Meteor.call(\"cart/submitPayment\", paymentMethod);\n      } else {\n        handlePaypalSubmitError(transaction.error);\n        uiEnd(template, i18next.t(\"checkout.paymentMethod.resubmit\"));\n      }\n    });\n    return false;\n  },\n  beginSubmit() {\n    this.template.$(\".cart-checkout-step *\").attr(\"disabled\", true);\n    this.template.$(\"#btn-complete-order\").text(i18next.t(\"checkout.paymentMethod.submitting\"));\n    return this.template.$(\"#btn-processing\").removeClass(\"hidden\");\n  },\n  endSubmit() {\n    if (!submitting) {\n      return uiEnd(this.template, i18next.t(\"checkout.completeYourOrder\"));\n    }\n    return undefined;\n  }\n});\n","import { Reaction } from \"/client/api\";\nimport { Session } from \"meteor/session\";\nimport { Template } from \"meteor/templating\";\n\nTemplate.paypalCancel.onCreated(() => {\n  Session.set(\"guestCheckoutFlow\", true);\n  Reaction.Router.go(\"cart/checkout\");\n});\n","import { Meteor } from \"meteor/meteor\";\nimport { Session } from \"meteor/session\";\nimport { Template } from \"meteor/templating\";\nimport { Tracker } from \"meteor/tracker\";\nimport { $ } from \"meteor/jquery\";\nimport { Reaction } from \"/client/api\";\nimport { Cart, Packages } from \"/lib/collections\";\nimport Logger from \"/client/modules/logger\";\n\n// This template handles receiving the token from Paypal, recording it and moving on the checkout\n\nfunction isDuplicate(error) {\n  const errorMessage = error.message;\n  const duplicateErrorCode = \"10415\";\n  return errorMessage.indexOf(duplicateErrorCode) > -1;\n}\n\nfunction showError(error) {\n  $(\".spinner-container\").hide();\n  $(\"#paypal-error-message\").text(error);\n  $(\".paypal-done-error\").show();\n}\n\nfunction buildPaymentMethod(result, status, mode) {\n  Meteor.subscribe(\"Packages\", Reaction.getShopId());\n  const packageData = Packages.findOne({\n    name: \"reaction-paypal\",\n    shopId: Reaction.getShopId()\n  });\n\n  const paymentMethod = {\n    processor: \"PaypalExpress\",\n    paymentPackageId: packageData._id,\n    paymentSettingsKey: packageData.registry[0].settingsKey,\n    method: \"credit\",\n    transactionId: result.TRANSACTIONID,\n    amount: parseFloat(result.AMT, 10),\n    status,\n    mode,\n    createdAt: new Date(result.ORDERTIME),\n    updatedAt: new Date(result.ORDERTIME),\n    transactions: [result]\n  };\n  return paymentMethod;\n}\n\nTemplate.paypalDone.onRendered(() => {\n  $(\".paypal-done-error\").hide();\n});\n\nTemplate.paypalDone.helpers({\n  checkoutUrl() {\n    const template = Template.instance();\n    return template.checkoutUrl;\n  }\n});\n\nTemplate.paypalDone.onCreated(function () {\n  const payerId = Reaction.Router.getQueryParam(\"PayerID\");\n  const token = Reaction.Router.getQueryParam(\"token\");\n  const prefix = Reaction.getShopPrefix();\n  this.checkoutUrl = `${prefix}/cart/checkout`;\n  // wait for cart to be ready\n  Tracker.autorun((c) => {\n    if (Reaction.Subscriptions.Cart.ready()) {\n      const cart = Cart.findOne();\n      if (!cart) {\n        Logger.warn(\"Could not find valid cart\");\n        return;\n      }\n      c.stop();\n      if (Session.get(\"expressToken\") !== token) {\n        Session.set(\"expressToken\", token);\n        Meteor.call(\"confirmPaymentAuthorization\", cart._id, token, payerId, (error, result) => {\n          if (error) {\n            if (isDuplicate(error)) {\n              Reaction.Router.go(\"cart/completed\", {}, {\n                _id: cart._id\n              });\n            }\n            const msg = (error !== null ? error.error : undefined);\n            showError(msg);\n          }\n\n          if (result) {\n            let status;\n            let mode = \"authorize\";\n            // Normalize status depending on results\n            if (result.PAYMENTSTATUS === \"Pending\") {\n              status = \"created\";\n            } else if (result.PAYMENTSTATUS === \"Completed\") { // If we set capture at auth this will be completed\n              status = \"completed\";\n              mode = \"capture\";\n            } else {\n              status = result.PAYMENTSTATUS;\n            }\n            const paymentMethod = buildPaymentMethod(result, status, mode);\n\n            Meteor.call(\"cart/submitPayment\", paymentMethod, (payError, payResult) => {\n              if (!payResult && payError) {\n                Logger.warn(payError, \"Error received during submitting Payment via Paypal\");\n                showError(payError);\n                Session.set(\"guestCheckoutFlow\", true);\n              }\n            });\n          }\n        });\n      }\n    }\n  });\n});\n","import \"./cancel.html\";\nimport \"./cancel.js\";\nimport \"./done.html\";\nimport \"./done.js\";\n","/* eslint camelcase: 0 */\nimport { Template } from \"meteor/templating\";\nimport { AutoForm } from \"meteor/aldeed:autoform\";\nimport { i18next } from \"/client/api\";\nimport { Packages } from \"/lib/collections\";\nimport { PaypalPackageConfig } from \"../../../lib/collections/schemas\";\nimport \"./express.html\";\n\nTemplate.paypalExpressSettings.helpers({\n  PaypalPackageConfig() {\n    return PaypalPackageConfig;\n  },\n  packageData() {\n    return Packages.findOne({\n      name: \"reaction-paypal\"\n    });\n  }\n});\n\nAutoForm.hooks({\n  \"paypal-update-form-express\": {\n    onSuccess() {\n      return Alerts.toast(i18next.t(\"admin.settings.saveSuccess\"), \"success\");\n    },\n    onError(operation, error) {\n      return Alerts.toast(`${i18next.t(\"admin.settings.saveFailed\")} ${error}`, \"error\");\n    }\n  }\n});\n","/* eslint camelcase: 0 */\nimport { AutoForm } from \"meteor/aldeed:autoform\";\nimport { Template } from \"meteor/templating\";\nimport { i18next } from \"/client/api\";\nimport { Packages } from \"/lib/collections\";\nimport { PaypalPackageConfig } from \"../../../lib/collections/schemas\";\nimport \"./payflow.html\";\n\nTemplate.paypalPayFlowSettings.helpers({\n  PaypalPackageConfig() {\n    return PaypalPackageConfig;\n  },\n  packageData() {\n    return Packages.findOne({\n      name: \"reaction-paypal\"\n    });\n  }\n});\n\nAutoForm.hooks({\n  \"paypal-update-form-payflow\": {\n    onSuccess() {\n      return Alerts.toast(i18next.t(\"admin.settings.saveSuccess\"), \"success\");\n    },\n    onError(operation, error) {\n      return Alerts.toast(`${i18next.t(\"admin.settings.saveFailed\")} ${error}`, \"error\");\n    }\n  }\n});\n","import _ from \"lodash\";\nimport { Meteor } from \"meteor/meteor\";\nimport { ReactiveVar } from \"meteor/reactive-var\";\nimport { Logger } from \"/client/api\";\n\nexport const PaypalClientAPI = {\n\n  load: _.once(function () {\n    const script = document.createElement(\"script\");\n    script.type = \"text/javascript\";\n    script.async = true;\n    script.src = \"//www.paypalobjects.com/api/checkout.js\";\n    document.head.appendChild(script);\n\n    this._checkReady();\n  }),\n\n  _checkReady() {\n    let i = 0;\n    const checkReady = Meteor.setInterval(() => {\n      if (typeof paypal !== \"undefined\") {\n        this._loaded.set(true);\n        Meteor.clearInterval(checkReady);\n      } else {\n        i += 100;\n        if (i > 10000) {\n          // stop checking and warn if the lib isn't loaded within 10 secs\n          Meteor.clearInterval(checkReady);\n          Logger.warn(\"Error loading Paypal lib from CDN\");\n        }\n      }\n    }, 100);\n  },\n\n  _loaded: new ReactiveVar(false),\n\n  loaded() {\n    return this._loaded.get();\n  }\n};\n","import \"./templates/checkout/return\";\nimport \"./templates/checkout/express\";\nimport \"./templates/checkout/payflow\";\n\nimport \"./templates/settings/express\";\nimport \"./templates/settings/payflow\";\n\nimport \"./paypal.less\";\n","export * from \"./paypal\";\n","import SimpleSchema from \"simpl-schema\";\nimport { check } from \"meteor/check\";\nimport { Tracker } from \"meteor/tracker\";\nimport { PackageConfig } from \"/lib/collections/schemas/registry\";\nimport { registerSchema } from \"@reactioncommerce/schemas\";\n\nexport const PaypalPackageConfig = PackageConfig.clone().extend({\n  // Remove blackbox: true from settings obj\n  \"settings\": {\n    type: Object,\n    optional: true,\n    blackbox: false,\n    defaultValue: {}\n  },\n  \"settings.expressAuthAndCapture\": {\n    type: Boolean,\n    label: \"Capture at time of Auth\",\n    defaultValue: false\n  },\n  \"settings.express\": {\n    type: Object,\n    defaultValue: {}\n  },\n  \"settings.express.support\": {\n    type: Array,\n    label: \"Payment provider supported methods\"\n  },\n  \"settings.express.support.$\": {\n    type: String,\n    allowedValues: [\"Authorize\", \"De-authorize\", \"Capture\", \"Refund\"]\n  },\n  \"settings.payflow\": {\n    type: Object,\n    defaultValue: {}\n  },\n  \"settings.payflow.support\": {\n    type: Array,\n    label: \"Payment provider supported methods\"\n  },\n  \"settings.payflow.support.$\": {\n    type: String,\n    allowedValues: [\"Authorize\", \"De-authorize\", \"Capture\", \"Refund\"]\n  },\n  \"settings.merchantId\": {\n    type: String,\n    label: \"Merchant ID\",\n    optional: true\n  },\n  \"settings.username\": {\n    type: String,\n    label: \"Username\",\n    optional: true\n  },\n  \"settings.password\": {\n    type: String,\n    label: \"Password\",\n    optional: true\n  },\n  \"settings.signature\": {\n    type: String,\n    label: \"Signature\",\n    optional: true\n  },\n  \"settings.express_mode\": {\n    type: Boolean,\n    defaultValue: false\n  },\n  \"settings.payflow_enabled\": {\n    type: Boolean,\n    defaultValue: true\n  },\n  \"settings.client_id\": {\n    type: String,\n    label: \"API Client ID\",\n    min: 60,\n    optional: true\n  },\n  \"settings.client_secret\": {\n    type: String,\n    label: \"API Secret\",\n    min: 60,\n    optional: true\n  },\n  \"settings.payflow_mode\": {\n    type: Boolean,\n    defaultValue: false\n  }\n});\n\nregisterSchema(\"PaypalPackageConfig\", PaypalPackageConfig);\n\nexport const PaypalPayment = new SimpleSchema({\n  payerName: {\n    type: String,\n    label: \"Cardholder name\"\n  },\n  cardNumber: {\n    type: String,\n    min: 12,\n    max: 19,\n    label: \"Card number\"\n  },\n  expireMonth: {\n    type: String,\n    max: 2,\n    label: \"Expiration month\"\n  },\n  expireYear: {\n    type: String,\n    max: 4,\n    label: \"Expiration year\"\n  },\n  cvv: {\n    type: String,\n    max: 4,\n    label: \"CVV\"\n  }\n}, { check, tracker: Tracker });\n\nregisterSchema(\"PaypalPayment\", PaypalPayment);\n","/* eslint camelcase: 0 */\nimport { Meteor } from \"meteor/meteor\";\nimport { Packages } from \"/lib/collections\";\nimport Reaction from \"/lib/api\";\n\nfunction getSettings(settings, ref, valueName) {\n  if (settings !== null) {\n    return settings[valueName];\n  } else if (ref !== null) {\n    return ref[valueName];\n  }\n  return {};\n}\n\n// using global instance of Reaction\n// Paypal is a shared client/server stub\n// to provide normalized PayPal tooling\n\nexport const Express = {\n  expressCheckoutAccountOptions() {\n    const shopId = Reaction.getShopId();\n    const { settings } = Packages.findOne({\n      name: \"reaction-paypal\",\n      shopId,\n      enabled: true\n    });\n    let mode;\n\n    if ((settings !== null ? settings.express_mode : undefined) === true) {\n      mode = \"production\";\n    } else {\n      mode = \"sandbox\";\n    }\n    const ref = Meteor.settings.paypal;\n\n    const options = {\n      enabled: settings !== null ? settings.express.enabled : undefined,\n      mode,\n      username: getSettings(settings, ref, \"username\"),\n      password: getSettings(settings, ref, \"password\"),\n      signature: getSettings(settings, ref, \"signature\"),\n      merchantId: getSettings(settings, ref, \"merchantId\"),\n      return_url: Reaction.getAbsoluteUrl(\"paypal/done\"),\n      cancel_url: Reaction.getAbsoluteUrl(\"paypal/cancel\")\n    };\n    if (options.mode === \"sandbox\") {\n      options.url = \"https://api-3t.sandbox.paypal.com/nvp\";\n    } else {\n      options.url = \"https://api-3t.paypal.com/nvp\";\n    }\n    return options;\n  },\n  config(options) {\n    this.accountOptions = options;\n  }\n};\n","import * as PayFlow from \"./payflow\";\nimport * as Express from \"./express\";\n\nexport const PayPal = Object.assign({}, Express.Express, PayFlow.PayFlow);\n","/* eslint camelcase: 0 */\nimport { Meteor } from \"meteor/meteor\";\nimport { Packages } from \"/lib/collections\";\nimport Reaction from \"/lib/api\";\n\n// using global instance of Reaction\n// Paypal is a shared client/server stub\n// to provide normalized PayPal tooling\n\nexport const PayFlow = {\n  payflowAccountOptions() {\n    const { settings } = Packages.findOne({\n      name: \"reaction-paypal\",\n      shopId: Reaction.getShopId(),\n      enabled: true\n    });\n    let mode;\n    if ((settings !== null ? settings.payflow_mode : undefined) === true) {\n      mode = \"live\";\n    } else {\n      mode = \"sandbox\";\n    }\n    const ref = Meteor.settings.paypal;\n    const options = {\n      mode,\n      enabled: getSettings(settings, ref, \"payflow_enabled\"),\n      client_id: getSettings(settings, ref, \"client_id\"),\n      client_secret: getSettings(settings, ref, \"client_secret\")\n    };\n    if (!options.client_id) {\n      throw new Meteor.Error(\"invalid-credentials\", \"Invalid PayPal Credentials\");\n    }\n    return options;\n  },\n  authorize(cardInfo, paymentInfo, callback) {\n    Meteor.call(\"payflowpro/payment/submit\", \"authorize\", cardInfo, paymentInfo, callback);\n  },\n  capture(transactionId, amount, callback) {\n    const captureDetails = {\n      amount: {\n        currency: \"USD\", // todo should this be locale.currency\n        total: parseFloat(amount, 10)\n      },\n      is_final_capture: true\n    };\n    Meteor.call(\"payflowpro/payment/capture\", transactionId, captureDetails, callback);\n  },\n  config(options) {\n    this.accountOptions = options;\n  },\n  paymentObj() {\n    return {\n      intent: \"sale\",\n      payer: {\n        payment_method: \"credit_card\",\n        funding_instruments: []\n      },\n      transactions: []\n    };\n  },\n  parseCardData(data) {\n    return {\n      credit_card: {\n        type: data.type,\n        number: data.number,\n        first_name: data.first_name,\n        last_name: data.last_name,\n        cvv2: data.cvv2,\n        expire_month: data.expire_month,\n        expire_year: data.expire_year\n      }\n    };\n  },\n  parsePaymentData(data) {\n    return {\n      amount: {\n        total: parseFloat(data.total, 10),\n        currency: data.currency\n      }\n    };\n  }\n};\n\nfunction getSettings(settings, ref, valueName) {\n  if (settings !== null) {\n    return settings[valueName];\n  } else if (ref !== null) {\n    return ref[valueName];\n  }\n  return {};\n}\n","import { Components } from \"@reactioncommerce/reaction-components\";\nimport { Template } from \"meteor/templating\";\n\nTemplate.gridPublishControls.helpers({\n  PublishComponent() {\n    return {\n      component: Components.GridProductPublish\n    };\n  }\n});\n","import _ from \"lodash\";\nimport { Template } from \"meteor/templating\";\nimport { Meteor } from \"meteor/meteor\";\nimport { ReactiveDict } from \"meteor/reactive-dict\";\nimport { Reaction } from \"/client/api\";\nimport Logger from \"/client/modules/logger\";\nimport { getPrimaryMediaForItem, ReactionProduct } from \"/lib/api\";\nimport { Products } from \"/lib/collections\";\nimport { isRevisionControlEnabled } from \"/imports/plugins/core/revisions/lib/api\";\nimport { applyProductRevision } from \"/lib/api/products\";\n\nfunction updateVariantProductField(variants, field, value) {\n  return variants.map((variant) => Meteor.call(\"products/updateProductField\", variant._id, field, value));\n}\n\nTemplate.productSettings.onCreated(function () {\n  this.state = new ReactiveDict();\n  this.state.setDefault({\n    products: [],\n    productIds: []\n  });\n\n  this.autorun(() => {\n    const currentData = Template.currentData();\n\n    if (_.isArray(currentData.products)) {\n      const productIds = currentData.products.map((product) => product._id);\n\n      const products = Products.find({\n        _id: {\n          $in: productIds\n        }\n      }).map((product) => applyProductRevision(product));\n\n      this.state.set(\"productIds\", productIds);\n      this.state.set(\"products\", products);\n    }\n  });\n});\n\nTemplate.productSettings.helpers({\n  isVisible() {\n    const instance = Template.instance();\n    const products = instance.state.get(\"products\") || [];\n\n    // Use the first selected product to determin status of bulk, isVisible button\n    if (Array.isArray(products) && products.length) {\n      return products[0].isVisible;\n    }\n\n    return false;\n  },\n  hasSelectedProducts() {\n    return this.products && this.products.length > 0;\n  },\n  itemWeightActive(weight) {\n    const instance = Template.instance();\n    const products = instance.state.get(\"products\");\n    const tag = ReactionProduct.getTag();\n\n    for (const product of products) {\n      const positions = (product.positions && product.positions[tag]) || {};\n      const currentWeight = positions.weight || 0;\n      if (currentWeight === weight) {\n        return \"active\";\n      }\n    }\n    return \"\";\n  }\n});\n\nTemplate.productSettingsListItem.events({\n  \"click [data-event-action=product-click]\"() {\n    Reaction.Router.go(\"product\", {\n      handle: (this.__published && this.__published.handle) || this.handle\n    });\n\n    Reaction.state.set(\"edit/focus\", \"productDetails\");\n\n    // Set actionView to product admin\n    Reaction.setActionView({\n      i18nKeyLabel: \"productDetailEdit.productSettings\",\n      label: \"Product Settings\",\n      template: \"ProductAdmin\"\n    });\n  }\n});\n\nTemplate.productSettingsListItem.helpers({\n  displayPrice() {\n    if (this._id) {\n      return ReactionProduct.getProductPriceRange(this._id).range;\n    }\n    return null;\n  },\n\n  mediaUrl() {\n    const variants = ReactionProduct.getTopVariants(this._id);\n    if (!variants || variants.length === 0) return \"/resources/placeholder.gif\";\n    const media = getPrimaryMediaForItem({ productId: this._id, variantId: variants[0]._id });\n    if (!media) return \"/resources/placeholder.gif\";\n    return media.url({ store: \"thumbnail\" });\n  },\n\n  listItemActiveClassName(productId) {\n    const { handle } = Reaction.Router.current().params;\n\n    if (ReactionProduct.equals(\"productId\", productId) && handle) {\n      return \"active\";\n    }\n\n    return \"\";\n  }\n});\n\n/**\n * productExtendedControls events\n */\n\nTemplate.productSettings.events({\n  \"click [data-event-action=publishProduct]\"() {\n    const instance = Template.instance();\n    const products = instance.state.get(\"products\") || [];\n\n    if (isRevisionControlEnabled()) {\n      for (const product of products) {\n        // Update the visibility using the first selected product to determine the proper\n        // visibility toggle. This is to ensure that all selected products will become visible or not visible\n        // at the same time so it's not confusing.\n        Meteor.call(\"products/updateProductField\", product._id, \"isVisible\", !products[0].isVisible);\n        // update the variants visibility\n        const variants = Products.find({\n          ancestors: {\n            $in: [product._id]\n          }\n        });\n        updateVariantProductField(variants, \"isVisible\", !products[0].isVisible);\n      }\n    } else {\n      // The legacy behavior will bulk toggle visibilty of each product seperatly.\n      //\n      // Example:\n      // If you selected 10 products, and 5 were visible and 5 were not visible, and then\n      // clicked the visibility button, 5 products would switched from not visible to visible, and the other 5\n      // would be swiched from visible to not visible.\n      ReactionProduct.publishProduct(products);\n    }\n  },\n  \"click [data-event-action=cloneProduct]\"() {\n    ReactionProduct.cloneProduct(this.products);\n  },\n  \"click [data-event-action=archiveProduct]\"() {\n    ReactionProduct.archiveProduct(this.products);\n  },\n  \"click [data-event-action=changeProductWeight]\"(event) {\n    event.preventDefault();\n    const tag = ReactionProduct.getTag();\n    for (const product of this.products) {\n      const weight = Template.instance().$(event.currentTarget).data(\"event-data\") || 0;\n      const positions = {\n        weight,\n        updatedAt: new Date()\n      };\n      /* eslint no-loop-func: 1 */\n      //\n      //\n      Meteor.call(\n        \"products/updateProductPosition\", product._id, positions, tag,\n        (error) => { // eslint-disable-line no-loop-func\n          if (error) {\n            Logger.warn(error);\n            throw new Meteor.Error(\"access-denied\", error);\n          }\n        }\n      );\n    }\n  }\n});\n","import { Components } from \"@reactioncommerce/reaction-components\";\nimport { $ } from \"meteor/jquery\";\nimport { Template } from \"meteor/templating\";\nimport { Reaction } from \"/client/api\";\n\nTemplate.products.helpers({\n  component() {\n    return Components.Products;\n  }\n});\n\n/**\n * products events\n */\n\nTemplate.products.events({\n  \"click #productListView\"() {\n    $(\".product-grid\").hide();\n    return $(\".product-list\").show();\n  },\n  \"click #productGridView\"() {\n    $(\".product-list\").hide();\n    return $(\".product-grid\").show();\n  },\n  \"click .product-list-item\"() {\n    // go to new product\n    Reaction.Router.go(\"product\", {\n      handle: this._id\n    });\n  }\n});\n","import { Components } from \"@reactioncommerce/reaction-components\";\nimport { Template } from \"meteor/templating\";\n\nTemplate.variantForm.helpers({\n  component() {\n    const currentData = Template.currentData() || {};\n\n    return {\n      ...currentData,\n      component: Components.VariantEditForm\n    };\n  }\n});\n","import \"./templates/products/productGrid/publishControls.html\";\nimport \"./templates/products/productGrid/publishControls.js\";\n\nimport \"./templates/products/productSettings/productSettings.html\";\nimport \"./templates/products/productSettings/productSettings.js\";\n\nimport \"./templates/products/products.html\";\nimport \"./templates/products/products.js\";\n\nimport \"./templates/products/variantForm.html\";\nimport \"./templates/products/variantForm.js\";\n\nexport { default as GridItemControls } from \"../components/gridItemControls\";\nexport { default as GridItemNotice } from \"../components/gridItemNotice\";\nexport { default as ProductGrid } from \"../components/productGrid\";\nexport { default as ProductGridItems } from \"../components/productGridItems\";\nexport { default as Products } from \"../components/products\";\nexport { default as VariantForm } from \"../components/variantForm\";\nexport { default as VariantEdit } from \"../components/variantEdit\";\nexport { default as ProductGridCustomer } from \"../components/customer/productGrid\";\nexport { default as ProductGridItemCustomer } from \"../components/customer/productGridItem\";\n\nexport { default as GridItemControlsContainer } from \"../containers/gridItemControlsContainer\";\nexport { default as GridItemNoticeContainer } from \"../containers/gridItemNoticeContainer\";\nexport { default as GridPublishContainer } from \"../containers/gridPublishContainer\";\nexport { default as ProductGridContainer } from \"../containers/productGridContainer\";\nexport { default as ProductGridItemsContainer } from \"../containers/productGridItemsContainer\";\nexport { default as ProductsContainer } from \"../containers/productsContainer\";\nexport { default as ProductsContainerAdmin } from \"../containers/productsContainerAdmin\";\nexport { default as ProductsContainerCustomer } from \"../containers/productsContainerCustomer\";\nexport { default as VariantFormContainer } from \"../containers/variantFormContainer\";\nexport { default as VariantEditContainer } from \"../containers/variantEditContainer\";\n","import React, { Component } from \"react\";\nimport PropTypes from \"prop-types\";\nimport { Components } from \"@reactioncommerce/reaction-components\";\nimport { ReactionProduct } from \"/lib/api\";\n\nclass ProductGrid extends Component {\n  static propTypes = {\n    canLoadMoreProducts: PropTypes.bool,\n    loadProducts: PropTypes.func,\n    products: PropTypes.array,\n    productsSubscription: PropTypes.object\n  }\n\n  componentDidMount() {\n    window.addEventListener(\"scroll\", this.loadMoreProducts);\n  }\n\n  componentWillUnmount() {\n    window.removeEventListener(\"scroll\", this.loadMoreProducts);\n  }\n\n  // load more products to the grid\n  loadMoreProducts = (event) => {\n    const { canLoadMoreProducts, loadProducts } = this.props;\n    const { scrollY, innerHeight } = window;\n    const { body: { scrollHeight } } = document;\n    const atBottom = (innerHeight + scrollY === scrollHeight);\n\n    if (canLoadMoreProducts && atBottom) {\n      loadProducts(event);\n    }\n  }\n\n  // render the loading spinner\n  renderLoadingSpinner() {\n    const { productsSubscription: { ready } } = this.props;\n    // if the products catalog is not ready\n    // show the loading spinner\n    if (!ready()) return <Components.Loading />;\n  }\n\n  // render the No Products Found message\n  renderNotFound() {\n    const { products, productsSubscription: { ready } } = this.props;\n    // if the products subscription is ready & the products array is undefined or empty\n    // show the Not Found message\n    if (ready() && (!Array.isArray(products) || !products.length)) {\n      return (\n        <Components.NotFound\n          i18nKeyTitle=\"productGrid.noProductsFound\"\n          icon=\"fa fa-barcode\"\n          title=\"No Products Found\"\n        />\n      );\n    }\n  }\n\n  // render the product grid\n  renderProductGrid() {\n    const { products } = this.props;\n    const currentTag = ReactionProduct.getTag();\n\n    return (\n      <div className=\"product-grid\">\n        <ul className=\"product-grid-list list-unstyled\" id=\"product-grid-list\">\n          {products.map((product) => (\n            <Components.ProductGridItemCustomer\n              product={product}\n              position={(product.positions && product.positions[currentTag]) || {}}\n              key={product._id}\n            />\n          ))}\n        </ul>\n      </div>\n    );\n  }\n\n  render() {\n    return (\n      <div className=\"container-main\">\n        {this.renderProductGrid()}\n        {this.renderLoadingSpinner()}\n        {this.renderNotFound()}\n      </div>\n    );\n  }\n}\n\nexport default ProductGrid;\n","import React, { Component } from \"react\";\nimport PropTypes from \"prop-types\";\nimport classnames from \"classnames\";\nimport { formatPriceString, Router } from \"/client/api\";\nimport { registerComponent, Components } from \"@reactioncommerce/reaction-components\";\n\nclass ProductGridItem extends Component {\n  static propTypes = {\n    isSearch: PropTypes.bool,\n    position: PropTypes.object,\n    product: PropTypes.object\n  }\n\n  // get product detail page URL\n  get productURL() {\n    const { product: { handle } } = this.props;\n    return Router.pathFor(\"product\", {\n      hash: {\n        handle\n      }\n    });\n  }\n\n  // get weight class name\n  get weightClass() {\n    const { weight } = this.props.position || { weight: 0 };\n    switch (weight) {\n      case 1:\n        return \"product-medium\";\n      case 2:\n        return \"product-large\";\n      default:\n        return \"product-small\";\n    }\n  }\n\n  // get notice class names\n  get noticeClassNames() {\n    const { product: { isSoldOut, isLowQuantity, isBackorder } } = this.props;\n    return classnames({\n      \"badge\": (isSoldOut || isLowQuantity),\n      \"variant-qty-sold-out\": (isSoldOut || (isSoldOut && isBackorder)),\n      \"badge-danger\": (isSoldOut && !isBackorder),\n      \"badge-low-inv-warning\": (isLowQuantity && !isSoldOut)\n    });\n  }\n\n  // get product item class names\n  get productClassNames() {\n    const { position } = this.props;\n    return classnames({\n      \"product-grid-item\": true,\n      [this.weightClass]: true,\n      \"pinned\": position.pinned\n    });\n  }\n\n  // handle click event\n  handleClick = (event) => {\n    event.preventDefault();\n    Router.go(this.productURL);\n  }\n\n  // notice\n  renderNotices() {\n    const { product: { isSoldOut, isLowQuantity, isBackorder } } = this.props;\n    const noticeContent = { classNames: this.noticeClassNames };\n\n    if (isSoldOut) {\n      if (isBackorder) {\n        noticeContent.defaultValue = \"Backorder\";\n        noticeContent.i18nKey = \"productDetail.backOrder\";\n      } else {\n        noticeContent.defaultValue = \"Sold Out!\";\n        noticeContent.i18nKey = \"productDetail.soldOut\";\n      }\n    } else if (isLowQuantity) {\n      noticeContent.defaultValue = \"Limited Supply\";\n      noticeContent.i18nKey = \"productDetail.limitedSupply\";\n    }\n\n    return (\n      <div className=\"grid-alerts\">\n        <div className=\"product-grid-badges\">\n          <span className={noticeContent.classNames}>\n            <Components.Translation defaultValue={noticeContent.defaultValue} i18nKey={noticeContent.i18nKey} />\n          </span>\n        </div>\n      </div>\n    );\n  }\n\n  // render product image\n  renderMedia() {\n    const { product } = this.props;\n    const MEDIA_PLACEHOLDER = \"/resources/placeholder.gif\";\n    const { large } = (Array.isArray(product.media) && product.media[0]) || { large: MEDIA_PLACEHOLDER };\n\n    return (\n      <span\n        className=\"product-image\"\n        style={{ backgroundImage: `url(\"${large}\")` }}\n      />\n    );\n  }\n\n\n  renderAdditionalMedia() {\n    const { product: { media }, position: { weight } } = this.props;\n\n    // if product is not medium weight\n    // or the media array is empty exit\n    if (weight !== 1 || (!media || media.length === 0)) return;\n\n    // creating an additional madia array with\n    // the 2nd, 3rd and 4th images returned\n    // in the media array\n    const additionalMedia = [...media.slice(1, 4)];\n\n    return (\n      <div className=\"product-additional-images\">\n        {additionalMedia.map((img) => (\n          <span\n            key={img.small}\n            className=\"product-image\"\n            style={{ backgroundImage: `url(\"${img.medium}\")` }}\n          />\n        ))}\n      </div>\n    );\n  }\n\n  renderGridContent() {\n    const { product } = this.props;\n\n    return (\n      <div className=\"grid-content\">\n        <a\n          href={this.productURL}\n          data-event-category=\"grid\"\n          data-event-action=\"product-click\"\n          data-event-label=\"grid product click\"\n          data-event-value={product._id}\n          onClick={this.handleClick}\n        >\n          <div className=\"overlay\">\n            <div className=\"overlay-title\">{product.title}</div>\n            <div className=\"currency-symbol\">{formatPriceString((product.price && product.price.range) || \"\")}</div>\n            {this.props.isSearch &&\n                <div className=\"overlay-description\">{product.description}</div>\n            }\n          </div>\n        </a>\n      </div>\n    );\n  }\n\n  render() {\n    const { product, isSearch } = this.props;\n    return (\n      <li\n        className={this.productClassNames}\n        data-id={product._id}\n        id={product._id}\n      >\n        <div className={(isSearch) ? \"item-content\" : \"\"}>\n          <span className=\"product-grid-item-alerts\" />\n\n          <a className=\"product-grid-item-images\"\n            href={this.productURL}\n            data-event-category=\"grid\"\n            data-event-label=\"grid product click\"\n            data-event-value={product._id}\n            onClick={this.handleClick}\n          >\n            <div className=\"product-primary-images\">\n              {this.renderMedia()}\n            </div>\n\n            {this.renderAdditionalMedia()}\n          </a>\n\n          {!isSearch && this.renderNotices()}\n          {this.renderGridContent()}\n        </div>\n      </li>\n    );\n  }\n}\n\n\nregisterComponent(\"ProductGridItemCustomer\", ProductGridItem);\n\nexport default ProductGridItem;\n","import React, { Component } from \"react\";\nimport PropTypes from \"prop-types\";\nimport { Components } from \"@reactioncommerce/reaction-components\";\n\nclass GridItemControls extends Component {\n  static propTypes = {\n    checked: PropTypes.func,\n    hasChanges: PropTypes.func,\n    hasCreateProductPermission: PropTypes.func,\n    isValid: PropTypes.bool,\n    product: PropTypes.object\n  }\n\n  renderArchived() {\n    if (this.props.product.isDeleted) {\n      return (\n        <span className=\"badge badge-danger\">\n          <Components.Translation defaultValue=\"Archived\" i18nKey=\"app.archived\" />\n        </span>\n      );\n    }\n  }\n\n  renderVisibilityButton() {\n    if (!this.props.product.__isValid && this.props.hasChanges()) {\n      return (\n        <div>\n          <Components.IconButton\n            icon=\"\"\n            onIcon=\"\"\n            status=\"danger\"\n          />\n        </div>\n      );\n    } else if (this.props.hasChanges()) {\n      return (\n        <div>\n          <Components.IconButton\n            icon=\"\"\n            onIcon=\"\"\n            status=\"info\"\n          />\n        </div>\n      );\n    }\n  }\n\n  render() {\n    if (this.props.hasCreateProductPermission()) {\n      return (\n        <div className=\"product-grid-controls\">\n          <label className=\"like-button hidden\" htmlFor={`select-product-${this.props.product._id}`}>\n            <input\n              type=\"checkbox\"\n              name=\"selectProduct\"\n              value={this.props.product._id}\n              id={`select-product-${this.props.product._id}`}\n              checked={this.props.checked()}\n              readOnly\n            />\n          </label>\n\n          {this.renderArchived()}\n          {this.renderVisibilityButton()}\n        </div>\n      );\n    }\n    return null;\n  }\n}\n\nexport default GridItemControls;\n","import React, { Component } from \"react\";\nimport PropTypes from \"prop-types\";\nimport { Components } from \"@reactioncommerce/reaction-components\";\n\nclass GridItemNotice extends Component {\n  static propTypes = {\n    isBackorder: PropTypes.func,\n    isLowQuantity: PropTypes.func,\n    isSoldOut: PropTypes.func\n  }\n\n  renderNotice() {\n    if (this.props.isSoldOut()) {\n      if (this.props.isBackorder()) {\n        return (\n          <span className=\"variant-qty-sold-out badge\">\n            <Components.Translation defaultValue=\"Backorder\" i18nKey=\"productDetail.backOrder\" />\n          </span>\n        );\n      }\n      return (\n        <span className=\"variant-qty-sold-out badge badge-danger\">\n          <Components.Translation defaultValue=\"Sold Out!\" i18nKey=\"productDetail.soldOut\" />\n        </span>\n      );\n    } else if (this.props.isLowQuantity()) {\n      return (\n        <div className=\"badge badge-low-inv-warning\" title=\"\">\n          <Components.Translation defaultValue=\"Limited Supply\" i18nKey=\"productDetail.limitedSupply\" />\n        </div>\n      );\n    }\n  }\n  render() {\n    return (\n      <div className=\"product-grid-badges\">\n        {this.renderNotice()}\n      </div>\n    );\n  }\n}\n\nexport default GridItemNotice;\n","import React, { Component } from \"react\";\nimport PropTypes from \"prop-types\";\nimport { Components } from \"@reactioncommerce/reaction-components\";\n\nclass ProductGrid extends Component {\n  static propTypes = {\n    productMediaById: PropTypes.object,\n    products: PropTypes.arrayOf(PropTypes.object)\n  }\n\n  static defaultProps = {\n    productMediaById: {}\n  };\n\n  renderProductGridItems = (products) => {\n    if (Array.isArray(products)) {\n      const { productMediaById } = this.props;\n\n      return products.map((product, index) => (\n        <Components.ProductGridItems\n          {...this.props}\n          product={product}\n          productMedia={productMediaById[product._id]}\n          key={index}\n          index={index}\n        />\n      ));\n    }\n\n    return (\n      <div className=\"row\">\n        <div className=\"text-center\">\n          <h3>\n            <Components.Translation defaultValue=\"No Products Found\" i18nKey=\"app.noProductsFound\" />\n          </h3>\n        </div>\n      </div>\n    );\n  }\n\n  render() {\n    return (\n      <div className=\"container-main\">\n        <div className=\"product-grid\">\n          <Components.DragDropProvider>\n            <ul className=\"product-grid-list list-unstyled\" id=\"product-grid-list\">\n              {this.renderProductGridItems(this.props.products)}\n            </ul>\n          </Components.DragDropProvider>\n        </div>\n      </div>\n    );\n  }\n}\n\nexport default ProductGrid;\n","import React, { Component } from \"react\";\nimport PropTypes from \"prop-types\";\nimport { Components } from \"@reactioncommerce/reaction-components\";\nimport { formatPriceString } from \"/client/api\";\n\nclass ProductGridItems extends Component {\n  static propTypes = {\n    canEdit: PropTypes.bool,\n    connectDragSource: PropTypes.func,\n    connectDropTarget: PropTypes.func,\n    displayPrice: PropTypes.func,\n    isMediumWeight: PropTypes.func,\n    isSearch: PropTypes.bool,\n    isSelected: PropTypes.func,\n    onClick: PropTypes.func,\n    onDoubleClick: PropTypes.func,\n    pdpPath: PropTypes.func,\n    positions: PropTypes.func,\n    product: PropTypes.object,\n    productMedia: PropTypes.object,\n    weightClass: PropTypes.func\n  }\n\n  static defaultProps = {\n    onClick() {},\n    onDoubleClick() {},\n    productMedia: {\n      additionalMedia: null,\n      primaryMedia: null\n    }\n  };\n\n  handleDoubleClick = (event) => {\n    this.props.onDoubleClick(event);\n  }\n\n  handleClick = (event) => {\n    this.props.onClick(event);\n  }\n\n  renderPinned() {\n    return this.props.positions().pinned ? \"pinned\" : \"\";\n  }\n\n  renderVisible() {\n    return this.props.product.isVisible ? \"\" : \"not-visible\";\n  }\n\n  renderOverlay() {\n    if (this.props.product.isVisible === false) {\n      return (\n        <div className=\"product-grid-overlay\" />\n      );\n    }\n  }\n\n  renderMedia() {\n    const { product, productMedia } = this.props;\n\n    return (\n      <Components.ProductImage displayMedia={() => productMedia.primaryMedia} item={product} size=\"large\" mode=\"span\" />\n    );\n  }\n\n  renderAdditionalMedia() {\n    const { isMediumWeight, productMedia } = this.props;\n    if (!isMediumWeight()) return null;\n\n    const mediaArray = productMedia.additionalMedia;\n    if (!mediaArray || mediaArray.length === 0) return null;\n\n    return (\n      <div className={`product-additional-images ${this.renderVisible()}`}>\n        {mediaArray.map((media) => (\n          <span\n            key={media._id}\n            className=\"product-image\"\n            style={{ backgroundImage: `url('${media.url({ store: \"medium\" })}')` }}\n          />\n        ))}\n        {this.renderOverlay()}\n      </div>\n    );\n  }\n\n  renderNotices() {\n    return (\n      <div className=\"grid-alerts\">\n        <Components.GridItemNotice product={this.props.product} />\n        <Components.GridItemControls product={this.props.product} />\n      </div>\n\n    );\n  }\n\n  renderGridContent() {\n    return (\n      <div className=\"grid-content\">\n        <a\n          href={this.props.pdpPath()}\n          data-event-category=\"grid\"\n          data-event-action=\"product-click\"\n          data-event-label=\"grid product click\"\n          data-event-value={this.props.product._id}\n          onDoubleClick={this.handleDoubleClick}\n          onClick={this.handleClick}\n        >\n          <div className=\"overlay\">\n            <div className=\"overlay-title\">{this.props.product.title}</div>\n            <div className=\"currency-symbol\">{formatPriceString(this.props.displayPrice())}</div>\n            {this.props.isSearch &&\n                <div className=\"overlay-description\">{this.props.product.description}</div>\n            }\n          </div>\n        </a>\n      </div>\n    );\n  }\n\n  renderHoverClassName() {\n    return this.props.isSearch ? \"item-content\" : \"\";\n  }\n\n  render() {\n    const productItem = (\n      <li\n        className={`product-grid-item ${this.renderPinned()} ${this.props.weightClass()} ${this.props.isSelected()}`}\n        data-id={this.props.product._id}\n        id={this.props.product._id}\n      >\n        <div className={this.renderHoverClassName()}>\n          <span className=\"product-grid-item-alerts\" />\n\n          <a className=\"product-grid-item-images\"\n            href={this.props.pdpPath()}\n            data-event-category=\"grid\"\n            data-event-label=\"grid product click\"\n            data-event-value={this.props.product._id}\n            onDoubleClick={this.handleDoubleClick}\n            onClick={this.handleClick}\n          >\n            <div className={`product-primary-images ${this.renderVisible()}`}>\n              {this.renderMedia()}\n              {this.renderOverlay()}\n            </div>\n\n            {this.renderAdditionalMedia()}\n          </a>\n\n          {!this.props.isSearch && this.renderNotices()}\n          {this.renderGridContent()}\n        </div>\n      </li>\n    );\n\n    if (this.props.canEdit) {\n      return (\n        this.props.connectDropTarget(this.props.connectDragSource(productItem))\n      );\n    }\n\n    return productItem;\n  }\n}\n\nexport default ProductGridItems;\n","import React, { Component } from \"react\";\nimport PropTypes from \"prop-types\";\nimport { Components } from \"@reactioncommerce/reaction-components\";\nimport { Reaction } from \"/client/api\";\nimport { getTagIds as getIds } from \"/lib/selectors/tags\";\n\n/** Class representing the Products React component\n * @summary PropTypes for Product React component\n * @property {Function} loadMoreProducts - load more products callback\n * @property {Function} loadProducts - Load products callback\n * @property {Array} products - Array of products\n * @property {Object} products - Products subscription\n * @property {Function} ready - Ready state check helper\n * @property {Boolean} showNotFound - Force show not-found view\n*/\n\nclass Products extends Component {\n  static propTypes = {\n    loadMoreProducts: PropTypes.func,\n    loadProducts: PropTypes.func,\n    products: PropTypes.array,\n    productsSubscription: PropTypes.object,\n    ready: PropTypes.func,\n    showNotFound: PropTypes.bool\n  };\n\n  /**\n   * Checks and returns a Boolean if the `products` array from props is not empty.\n   * @return {Boolean} Boolean value `true` if products are available, `false` otherwise.\n   */\n  get hasProducts() {\n    return Array.isArray(this.props.products) && this.props.products.length > 0;\n  }\n\n  /**\n   * Handle load more button click\n   * @access protected\n   * @param  {SyntheticEvent} event Synthetic event object\n   * @return {undefined}\n   */\n  handleClick = (event) => {\n    if (this.props.loadProducts) {\n      this.props.loadProducts(event);\n    }\n  }\n\n  /**\n   * Render product grid\n   * @access protected\n   * @return {Node} React node containing the `ProductGrid` component.\n   */\n  renderProductGrid() {\n    const { products } = this.props;\n\n    const productsByKey = {};\n\n    if (Array.isArray(products)) {\n      for (const product of products) {\n        productsByKey[product._id] = product;\n      }\n    }\n\n    return (\n      <Components.ProductGrid\n        productsByKey={productsByKey || {}}\n        productIds={getIds({ tags: products })}\n        canEdit={Reaction.hasPermission(\"createProduct\")}\n        products={products}\n      />\n    );\n  }\n\n  /**\n   * Render loading component\n   * @access protected\n   * @return {Node} React node containing the `Loading` component.\n   */\n  renderSpinner() {\n    if (this.props.productsSubscription.ready() === false) {\n      return (\n        <Components.Loading />\n      );\n    }\n  }\n\n  /**\n   * Render load more button\n   * @access protected\n   * @return {Node|undefined} React node contianing a `laod more` button or undefined.\n   */\n  renderLoadMoreProductsButton() {\n    if (this.props.loadMoreProducts()) {\n      return (\n        <div className=\"product-load-more\" id=\"productScrollLimitLoader\">\n          <button\n            className=\"btn btn-inverse btn-block btn-lg\"\n            onClick={this.handleClick}\n          >\n            <Components.Translation defaultValue=\"Load more products\" i18nKey=\"app.loadMoreProducts\" />\n          </button>\n        </div>\n      );\n    }\n  }\n\n  /**\n   * Render the not found component\n   * @access protected\n   * @return {Node} React node contianing the `NotFound` component.\n   */\n  renderNotFound() {\n    return (\n      <Components.NotFound\n        i18nKeyTitle=\"productGrid.noProductsFound\"\n        icon=\"fa fa-barcode\"\n        title=\"No Products Found\"\n      />\n    );\n  }\n\n  /**\n   * Render component\n   * @access protected\n   * @return {Node} React node containing elements that make up the `Products` component.\n   */\n  render() {\n    // Force show the not-found view.\n    if (this.props.showNotFound) {\n      return this.renderNotFound();\n    } else if (this.props.ready()) {\n      // Render products grid if products are available after subscription ready.\n      if (this.hasProducts) {\n        return (\n          <div id=\"container-main\">\n            {this.renderProductGrid()}\n            {this.renderLoadMoreProductsButton()}\n            {this.renderSpinner()}\n          </div>\n        );\n      }\n\n      // Render not-found view if no products are available.\n      return this.renderNotFound();\n    }\n\n    // Render loading component by default if no condition above matches.\n    return this.renderSpinner();\n  }\n}\n\nexport default Products;\n","import React, { Component } from \"react\";\nimport PropTypes from \"prop-types\";\nimport { Components } from \"@reactioncommerce/reaction-components\";\n\nclass VariantEdit extends Component {\n  static propTypes = {\n    childVariants: PropTypes.arrayOf(PropTypes.object),\n    countries: PropTypes.arrayOf(PropTypes.object),\n    editFocus: PropTypes.string,\n    handleCreateNewChildVariant: PropTypes.func,\n    variant: PropTypes.object\n  };\n\n  handleCreateNewChildVariant = () => {\n    if (this.props.handleCreateNewChildVariant) {\n      this.props.handleCreateNewChildVariant(this.props.variant);\n    }\n  }\n\n  renderVariant() {\n    const { variant } = this.props;\n\n    return (\n      <Components.VariantForm\n        editFocus={this.props.editFocus}\n        countries={this.props.countries}\n        variant={variant}\n        type={\"variant\"}\n      />\n    );\n  }\n\n  renderOptionsCard() {\n    return (\n      <Components.CardGroup>\n        <Components.Card\n          expandable={false}\n          name={\"variantOptions\"}\n        >\n          <Components.CardHeader\n            i18nKeyTitle=\"productDetailEdit.variantsOptions\"\n            title=\"Variant Options\"\n          >\n            <Components.Button\n              icon=\"plus\"\n              className=\"rui btn btn-default btn-clone-variant flat\"\n              tooltip=\"Add Option\"\n              onClick={this.handleCreateNewChildVariant}\n            />\n          </Components.CardHeader>\n        </Components.Card>\n        {this.renderChildVariants()}\n      </Components.CardGroup>\n    );\n  }\n\n  renderChildVariants() {\n    const { childVariants } = this.props;\n\n    if (Array.isArray(childVariants)) {\n      return childVariants.map((childVariant, index) => (\n        <Components.VariantForm\n          key={index}\n          editFocus={this.props.editFocus}\n          countries={this.props.countries}\n          variant={childVariant}\n          type={\"option\"}\n        />\n      ));\n    }\n\n    return null;\n  }\n\n  render() {\n    return (\n      <div>\n        {this.renderVariant()}\n        {this.renderOptionsCard()}\n      </div>\n    );\n  }\n}\n\nexport default VariantEdit;\n","import React, { Component } from \"react\";\nimport PropTypes from \"prop-types\";\nimport classnames from \"classnames\";\nimport _ from \"lodash\";\nimport Velocity from \"velocity-animate\";\nimport \"velocity-animate/velocity.ui\";\nimport { Components } from \"@reactioncommerce/reaction-components\";\nimport { findCurrency } from \"/client/api\";\n\nconst fieldNames = [\n  \"title\",\n  \"originCountry\",\n  \"compareAtPrice\",\n  \"price\",\n  \"width\",\n  \"length\",\n  \"height\",\n  \"weight\",\n  \"taxCode\",\n  \"taxDescription\",\n  \"inventoryQuantity\",\n  \"inventoryPolicy\",\n  \"lowInventoryWarningThreshold\"\n];\n\nconst fieldGroups = {\n  title: { group: \"variantDetails\" },\n  originCountry: { group: \"variantDetails\" },\n  compareAtPrice: { group: \"variantDetails\" },\n  price: { group: \"variantDetails\" },\n  width: { group: \"variantDetails\" },\n  length: { group: \"variantDetails\" },\n  height: { group: \"variantDetails\" },\n  weight: { group: \"variantDetails\" },\n  taxCode: { group: \"taxable\" },\n  taxDescription: { group: \"taxable\" },\n  inventoryQuantity: { group: \"inventoryManagement\" },\n  inventoryPolicy: { group: \"inventoryManagement\" },\n  lowInventoryWarningThreshold: { group: \"inventoryManagement\" }\n};\n\nclass VariantForm extends Component {\n  constructor(props) {\n    super(props);\n\n    this.state = {\n      expandedCard: props.editFocus,\n      variant: props.variant,\n      inventoryPolicy: props.variant.inventoryPolicy,\n      taxable: props.variant.taxable,\n      inventoryManagement: props.variant.inventoryManagement\n    };\n  }\n\n  componentWillReceiveProps(nextProps) {\n    const nextVariant = nextProps.variant || {};\n    const currentVariant = this.state.variant || {};\n\n    if (_.isEqual(nextVariant, currentVariant) === false) {\n      for (const fieldName of fieldNames) {\n        if (nextVariant[fieldName] !== currentVariant[fieldName]) {\n          if (fieldName !== \"taxCode\") {\n            this.animateFieldFlash(fieldName);\n          }\n        }\n      }\n\n      this.setState({\n        expandedCard: nextProps.editFocus,\n        inventoryManagement: nextProps.variant.inventoryManagement,\n        inventoryPolicy: nextProps.variant.inventoryPolicy,\n        taxable: nextProps.variant.taxable,\n        variant: nextProps.variant\n      });\n    }\n\n    this.setState({\n      expandedCard: nextProps.editFocus\n    });\n  }\n\n  fieldGroupForFieldName(field) {\n    // Other wise, if a field was passed\n    // const fieldName = this.state.viewProps.field;\n\n    let fieldName;\n\n    // If the field is an array of field name\n    if (Array.isArray(field) && field.length) {\n      // Use the first field name\n      [fieldName] = field;\n    } else {\n      fieldName = field;\n    }\n\n    const fieldData = fieldGroups[fieldName];\n\n    if (fieldData && fieldData.group) {\n      return fieldData.group;\n    }\n\n    return fieldName;\n  }\n\n  animateFieldFlash(fieldName) {\n    const fieldRef = this.refs[`${fieldName}Input`];\n\n    if (fieldRef) {\n      const { input } = fieldRef.refs;\n      const isFieldValid = this.props.validation.isFieldValid(fieldName);\n      const flashColor = isFieldValid ? \"#f0fff4\" : \"#ffeeef\";\n\n      Velocity.RunSequence([\n        { e: input, p: { backgroundColor: flashColor }, o: { duration: 200 } },\n        { e: input, p: { backgroundColor: \"#fff\" }, o: { duration: 100 } }\n      ]);\n    }\n  }\n\n  get variant() {\n    return this.state.variant || this.props.variant || {};\n  }\n\n  handleFieldChange = (event, value, field) => {\n    this.setState(({ variant }) => ({\n      variant: {\n        ...variant,\n        [field]: value\n      }\n    }));\n  }\n\n  handleFieldBlur = (event, value, field) => {\n    if (this.props.onVariantFieldSave) {\n      this.props.onVariantFieldSave(this.variant._id, field, value, this.state.variant);\n    }\n  }\n\n  handleSelectChange = (value, field) => {\n    this.setState(({ variant }) => ({\n      variant: {\n        ...variant,\n        [field]: value\n      }\n    }), () => {\n      if (this.props.onVariantFieldSave) {\n        this.props.onVariantFieldSave(this.variant._id, field, value, this.state.variant);\n      }\n    });\n  }\n\n  handleCheckboxChange = (event, value, field) => {\n    this.setState(({ variant }) => ({\n      variant: {\n        ...variant,\n        [field]: value\n      }\n    }));\n\n    this.handleFieldBlur(event, value, field);\n  }\n\n  handleInventoryPolicyChange = (event, value, field) => {\n    /*\n    Due to some confusing verbiage on how inventoryPolicy works / is displayed, we need to handle this field\n    differently than we handle the other checkboxes in this component. Specifically, we display the opposite value of\n    what the actual field value is. Because this is a checkbox, that means that the opposite value is actually the\n    field value as well, not just a display value, so we need to reverse the boolean value when it gets passed into\n    this function before we send it to the server to update the data. Other than reversing the value, this function\n    is the same as `handleCheckboxChange`.\n    */\n\n    const inverseValue = !value;\n\n    this.setState(({ variant }) => ({\n      variant: {\n        ...variant,\n        [field]: inverseValue\n      }\n    }));\n\n\n    this.handleFieldBlur(event, inverseValue, field);\n  }\n\n  handleCardExpand = (event, card, cardName, isExpanded) => {\n    if (typeof this.props.onCardExpand === \"function\") {\n      this.props.onCardExpand(isExpanded ? cardName : undefined);\n    }\n  }\n\n  handleVariantVisibilityToggle = (variant) => this.props.onVisibilityButtonClick(variant)\n\n  isExpanded = (groupName) => this.state.expandedCard === groupName\n\n  renderTaxCodeField() {\n    if (this.props.isProviderEnabled()) {\n      return (\n        <Components.Select\n          clearable={false}\n          i18nKeyLabel=\"productVariant.taxCode\"\n          i18nKeyPlaceholder=\"productVariant.selectTaxCode\"\n          label=\"Tax Code\"\n          name=\"taxCode\"\n          ref=\"taxCodeInput\"\n          options={this.props.fetchTaxCodes()}\n          onChange={this.handleSelectChange}\n          value={this.variant.taxCode}\n        />\n      );\n    }\n    return (\n      <Components.TextField\n        i18nKeyLabel=\"productVariant.taxCode\"\n        i18nKeyPlaceholder=\"productVariant.selectTaxCode\"\n        placeholder=\"Select Tax Code\"\n        label=\"Tax Code\"\n        name=\"taxCode\"\n        ref=\"taxCodeInput\"\n        value={this.variant.taxCode}\n        onBlur={this.handleFieldBlur}\n        onChange={this.handleFieldChange}\n        onReturnKeyDown={this.handleFieldBlur}\n        validation={this.props.validation}\n      />\n    );\n  }\n\n  renderArchiveButton() {\n    if (this.props.isDeleted) {\n      return (\n        <Components.Button\n          icon=\"refresh\"\n          className=\"rui btn btn-default btn-restore-variant flat\"\n          tooltip=\"Restore\"\n          onClick={() => this.props.restoreVariant(this.variant)}\n        />\n      );\n    }\n    return (\n      <Components.Button\n        icon=\"archive\"\n        className=\"rui btn btn-default btn-remove-variant flat\"\n        tooltip=\"Archive\"\n        onClick={() => this.props.removeVariant(this.variant)}\n      />\n    );\n  }\n\n  renderArchivedLabel() {\n    if (this.props.isDeleted) {\n      return (\n        <div className=\"panel-subheading\">\n          <span className=\"badge badge-danger\" data-i18n=\"app.archived\">\n            <span>Archived</span>\n          </span>\n        </div>\n      );\n    }\n  }\n\n  renderInventoryPolicyField() {\n    if (this.props.hasChildVariants(this.variant)) {\n      return (\n        <div className=\"col-sm-12\">\n          <Components.Switch\n            i18nKeyLabel=\"productVariant.inventoryPolicy\"\n            i18nKeyOnLabel=\"productVariant.inventoryPolicy\"\n            name=\"inventoryPolicy\"\n            label={\"Allow backorder\"}\n            onLabel={\"Allow backorder\"}\n            checked={!this.state.inventoryPolicy}\n            onChange={this.handleInventoryPolicyChange}\n            validation={this.props.validation}\n            disabled={true}\n            helpText={\"Backorder allowance is now controlled by options\"}\n            i18nKeyHelpText={\"admin.helpText.variantBackorderToggle\"}\n            style={{ backgroundColor: \"lightgrey\", cursor: \"not-allowed\" }}\n          />\n        </div>\n      );\n    }\n\n    return (\n      <div className=\"col-sm-12\">\n        <Components.Switch\n          i18nKeyLabel=\"productVariant.inventoryPolicy\"\n          i18nKeyOnLabel=\"productVariant.inventoryPolicy\"\n          name=\"inventoryPolicy\"\n          label={\"Allow backorder\"}\n          onLabel={\"Allow backorder\"}\n          checked={!this.state.inventoryPolicy}\n          onChange={this.handleInventoryPolicyChange}\n          validation={this.props.validation}\n        />\n      </div>\n    );\n  }\n\n  renderQuantityField() {\n    if (this.props.hasChildVariants(this.variant)) {\n      return (\n        <div className=\"col-sm-6\">\n          <Components.TextField\n            i18nKeyLabel=\"productVariant.inventoryQuantity\"\n            i18nKeyPlaceholder=\"0\"\n            placeholder=\"0\"\n            label=\"Quantity\"\n            type=\"number\"\n            name=\"inventoryQuantity\"\n            ref=\"inventoryQuantityInput\"\n            value={this.props.onUpdateQuantityField(this.variant)}\n            style={{ backgroundColor: \"lightgrey\", cursor: \"not-allowed\" }}\n            disabled={true}\n            helpText={\"Variant inventory is now controlled by options\"}\n            i18nKeyHelpText={\"admin.helpText.variantInventoryQuantity\"}\n          />\n        </div>\n      );\n    }\n\n    return (\n      <div className=\"col-sm-6\">\n        <Components.TextField\n          i18nKeyLabel=\"productVariant.inventoryQuantity\"\n          i18nKeyPlaceholder=\"0\"\n          placeholder=\"0\"\n          label=\"Quantity\"\n          type=\"number\"\n          name=\"inventoryQuantity\"\n          ref=\"inventoryQuantityInput\"\n          value={this.variant.inventoryQuantity}\n          onChange={this.handleFieldChange}\n          onBlur={this.handleFieldBlur}\n          onReturnKeyDown={this.handleFieldBlur}\n          validation={this.props.validation}\n          helpText={\"Option inventory\"}\n          i18nKeyHelpText={\"admin.helpText.optionInventoryQuantity\"}\n        />\n      </div>\n    );\n  }\n\n  renderVariantFields() {\n    const cardName = `variant-${this.variant._id}`;\n\n    const classNames = classnames({\n      \"variant-card\": true,\n      \"active\": this.isExpanded(cardName)\n    });\n\n    const currency = findCurrency(null, true);\n\n    return (\n      <Components.CardGroup>\n        <Components.Card\n          className={classNames}\n          expandable={true}\n          expanded={this.isExpanded(cardName)}\n          name={cardName}\n          onExpand={this.handleCardExpand}\n        >\n          <Components.CardHeader\n            actAsExpander={true}\n            i18nKeyTitle=\"productDetailEdit.variantDetails\"\n            title=\"Variant Details\"\n            isValid={this.props.validation.isValid}\n          >\n            {this.renderArchivedLabel()}\n            <Components.Button\n              icon=\"files-o\"\n              className=\"rui btn btn-default btn-clone-variant flat\"\n              tooltip=\"Duplicate\"\n              onClick={() => this.props.cloneVariant(this.variant)}\n            />\n            <Components.VisibilityButton\n              onClick={() => this.handleVariantVisibilityToggle(this.variant)}\n              bezelStyle=\"flat\"\n              primary={false}\n              toggleOn={this.variant.isVisible}\n            />\n            {this.renderArchiveButton()}\n          </Components.CardHeader>\n          <Components.CardBody expandable={true}>\n            <Components.TextField\n              i18nKeyLabel=\"productVariant.title\"\n              i18nKeyPlaceholder=\"productVariant.title\"\n              placeholder=\"Label\"\n              label=\"Label\"\n              name=\"title\"\n              ref=\"titleInput\"\n              value={this.variant.title}\n              onBlur={this.handleFieldBlur}\n              onChange={this.handleFieldChange}\n              onReturnKeyDown={this.handleFieldBlur}\n              validation={this.props.validation}\n            />\n            <Components.Select\n              clearable={false}\n              i18nKeyLabel=\"productVariant.originCountry\"\n              i18nKeyPlaceholder=\"productVariant.originCountry\"\n              label=\"Origin Country\"\n              name=\"originCountry\"\n              ref=\"countryOfOriginInput\"\n              options={this.props.countries}\n              onChange={this.handleSelectChange}\n              value={this.variant.originCountry}\n            />\n            <div className=\"row\">\n              <div className=\"col-sm-6\">\n                <Components.NumericInput\n                  i18nKeyLabel=\"productVariant.price\"\n                  i18nKeyPlaceholder=\"0.00\"\n                  placeholder=\"0.00\"\n                  label=\"Price\"\n                  name=\"price\"\n                  ref=\"priceInput\"\n                  value={this.variant.price}\n                  format={currency}\n                  numericType=\"currency\"\n                  style={this.props.greyDisabledFields(this.variant)}\n                  disabled={this.props.hasChildVariants(this.variant)}\n                  onBlur={this.handleFieldBlur}\n                  onChange={this.handleFieldChange}\n                  onReturnKeyDown={this.handleFieldBlur}\n                  validation={this.props.validation}\n                />\n              </div>\n              <div className=\"col-sm-6\">\n                <Components.NumericInput\n                  i18nKeyLabel=\"productVariant.compareAtPrice\"\n                  i18nKeyPlaceholder=\"0.00\"\n                  placeholder=\"0.00\"\n                  label=\"Compare At Price\"\n                  name=\"compareAtPrice\"\n                  ref=\"compareAtPriceInput\"\n                  value={this.variant.compareAtPrice}\n                  numericType=\"currency\"\n                  format={currency}\n                  onBlur={this.handleFieldBlur}\n                  onChange={this.handleFieldChange}\n                  onReturnKeyDown={this.handleFieldBlur}\n                  validation={this.props.validation}\n                />\n              </div>\n            </div>\n            <Components.Divider />\n            <div className=\"row\">\n              <div className=\"col-sm-6\">\n                <Components.TextField\n                  i18nKeyLabel=\"productVariant.width\"\n                  i18nKeyPlaceholder=\"0\"\n                  placeholder=\"0\"\n                  label=\"Width\"\n                  name=\"width\"\n                  ref=\"widthInput\"\n                  value={this.variant.width}\n                  onBlur={this.handleFieldBlur}\n                  onChange={this.handleFieldChange}\n                  onReturnKeyDown={this.handleFieldBlur}\n                  validation={this.props.validation}\n                />\n              </div>\n              <div className=\"col-sm-6\">\n                <Components.TextField\n                  i18nKeyLabel=\"productVariant.length\"\n                  i18nKeyPlaceholder=\"0\"\n                  placeholder=\"0\"\n                  label=\"Length\"\n                  name=\"length\"\n                  ref=\"lengthInput\"\n                  value={this.variant.length}\n                  onBlur={this.handleFieldBlur}\n                  onChange={this.handleFieldChange}\n                  onReturnKeyDown={this.handleFieldBlur}\n                  validation={this.props.validation}\n                />\n              </div>\n            </div>\n\n            <div className=\"row\">\n              <div className=\"col-sm-6\">\n                <Components.TextField\n                  i18nKeyLabel=\"productVariant.height\"\n                  i18nKeyPlaceholder=\"0\"\n                  placeholder=\"0\"\n                  label=\"Height\"\n                  name=\"height\"\n                  ref=\"heightInput\"\n                  value={this.variant.height}\n                  onBlur={this.handleFieldBlur}\n                  onChange={this.handleFieldChange}\n                  onReturnKeyDown={this.handleFieldBlur}\n                  validation={this.props.validation}\n                />\n              </div>\n              <div className=\"col-sm-6\">\n                <Components.TextField\n                  i18nKeyLabel=\"productVariant.weight\"\n                  i18nKeyPlaceholder=\"0\"\n                  placeholder=\"0\"\n                  label=\"Weight\"\n                  name=\"weight\"\n                  ref=\"weightInput\"\n                  value={this.variant.weight}\n                  onBlur={this.handleFieldBlur}\n                  onChange={this.handleFieldChange}\n                  onReturnKeyDown={this.handleFieldBlur}\n                  validation={this.props.validation}\n                />\n              </div>\n            </div>\n          </Components.CardBody>\n        </Components.Card>\n\n        <Components.SettingsCard\n          enabled={this.state.taxable}\n          expandable={true}\n          i18nKeyTitle=\"productVariant.taxable\"\n          name=\"taxable\"\n          packageName={\"reaction-product-variant\"}\n          saveOpenStateToPreferences={true}\n          showSwitch={true}\n          title=\"Taxable\"\n          onSwitchChange={this.handleCheckboxChange}\n        >\n          {this.renderTaxCodeField()}\n          <Components.TextField\n            i18nKeyLabel=\"productVariant.taxDescription\"\n            i18nKeyPlaceholder=\"productVariant.taxDescription\"\n            placeholder=\"Tax Description\"\n            label=\"Tax Description\"\n            name=\"taxDescription\"\n            ref=\"taxDescriptionInput\"\n            value={this.variant.taxDescription}\n            onBlur={this.handleFieldBlur}\n            onChange={this.handleFieldChange}\n            onReturnKeyDown={this.handleFieldBlur}\n            validation={this.props.validation}\n          />\n        </Components.SettingsCard>\n\n        <Components.SettingsCard\n          enabled={this.state.inventoryManagement}\n          expandable={true}\n          i18nKeyTitle=\"productVariant.inventoryManagement\"\n          name=\"inventoryManagement\"\n          packageName={\"reaction-product-variant\"}\n          saveOpenStateToPreferences={true}\n          showSwitch={true}\n          title=\"Inventory Tracking\"\n          onSwitchChange={this.handleCheckboxChange}\n        >\n          <div className=\"row\">\n            {this.renderQuantityField()}\n            <div className=\"col-sm-6\">\n              <Components.TextField\n                i18nKeyLabel=\"productVariant.lowInventoryWarningThreshold\"\n                i18nKeyPlaceholder=\"0\"\n                placeholder=\"0\"\n                type=\"number\"\n                label=\"Warn At\"\n                name=\"lowInventoryWarningThreshold\"\n                ref=\"lowInventoryWarningThresholdInput\"\n                value={this.variant.lowInventoryWarningThreshold}\n                onBlur={this.handleFieldBlur}\n                onChange={this.handleFieldChange}\n                onReturnKeyDown={this.handleFieldBlur}\n                validation={this.props.validation}\n              />\n            </div>\n          </div>\n          <div className=\"row\">\n            {this.renderInventoryPolicyField()}\n          </div>\n        </Components.SettingsCard>\n      </Components.CardGroup>\n    );\n  }\n\n\n  renderOptionFields() {\n    const cardName = `variant-${this.variant._id}`;\n\n    const classNames = classnames({\n      \"variant-option-card\": true,\n      \"active\": this.isExpanded(cardName)\n    });\n\n    const currency = findCurrency(null, true);\n\n    return (\n      <Components.CardGroup>\n        <Components.Card\n          className={classNames}\n          expandable={true}\n          expanded={this.isExpanded(cardName)}\n          name={cardName}\n          onExpand={this.handleCardExpand}\n        >\n          <Components.CardHeader\n            actAsExpander={true}\n            title={this.variant.optionTitle || \"Label is required\"}\n            isValid={this.props.validation.isValid}\n          >\n            {this.renderArchivedLabel()}\n            <Components.Button\n              icon=\"files-o\"\n              className=\"rui btn btn-default btn-clone-variant flat\"\n              tooltip=\"Duplicate\"\n              onClick={() => this.props.cloneVariant(this.variant)}\n            />\n            <Components.VisibilityButton\n              onClick={() => this.handleVariantVisibilityToggle(this.variant)}\n              bezelStyle=\"flat\"\n              primary={false}\n              toggleOn={this.variant.isVisible}\n            />\n            {this.renderArchiveButton()}\n          </Components.CardHeader>\n          <Components.CardBody expandable={true}>\n            <Components.TextField\n              i18nKeyLabel=\"productVariant.optionTitle\"\n              i18nKeyPlaceholder=\"productVariant.optionTitle\"\n              placeholder=\"optionTitle\"\n              label=\"Short Label\"\n              name=\"optionTitle\"\n              ref=\"optionTitleInput\"\n              value={this.variant.optionTitle}\n              onBlur={this.handleFieldBlur}\n              onChange={this.handleFieldChange}\n              onReturnKeyDown={this.handleFieldBlur}\n              validation={this.props.validation}\n              helpText={\"Displayed on Product Detail Page\"}\n              i18nKeyHelpText={\"admin.helpText.optionTitle\"}\n            />\n            <Components.TextField\n              i18nKeyLabel=\"productVariant.title\"\n              i18nKeyPlaceholder=\"productVariant.title\"\n              placeholder=\"Label\"\n              label=\"Label\"\n              name=\"title\"\n              ref=\"titleInput\"\n              value={this.variant.title}\n              onBlur={this.handleFieldBlur}\n              onChange={this.handleFieldChange}\n              onReturnKeyDown={this.handleFieldBlur}\n              validation={this.props.validation}\n              helpText={\"Displayed in cart, checkout, and orders\"}\n              i18nKeyHelpText={\"admin.helpText.title\"}\n            />\n            <div className=\"row\">\n              <div className=\"col-sm-6\">\n                <Components.NumericInput\n                  i18nKeyLabel=\"productVariant.price\"\n                  i18nKeyPlaceholder=\"0.00\"\n                  placeholder=\"0.00\"\n                  label=\"Price\"\n                  name=\"price\"\n                  ref=\"priceInput\"\n                  value={this.variant.price}\n                  format={currency}\n                  numericType=\"currency\"\n                  style={this.props.greyDisabledFields(this.variant)}\n                  disabled={this.props.hasChildVariants(this.variant)}\n                  onBlur={this.handleFieldBlur}\n                  onChange={this.handleFieldChange}\n                  onReturnKeyDown={this.handleFieldBlur}\n                  validation={this.props.validation}\n                  helpText={\"Purchase price\"}\n                  i18nKeyHelpText={\"admin.helpText.price\"}\n                />\n              </div>\n              <div className=\"col-sm-6\">\n                <Components.NumericInput\n                  i18nKeyLabel=\"productVariant.compareAtPrice\"\n                  i18nKeyPlaceholder=\"0.00\"\n                  placeholder=\"0.00\"\n                  label=\"Compare At Price\"\n                  name=\"compareAtPrice\"\n                  ref=\"compareAtPriceInput\"\n                  value={this.variant.compareAtPrice}\n                  format={currency}\n                  numericType=\"currency\"\n                  onBlur={this.handleFieldBlur}\n                  onChange={this.handleFieldChange}\n                  onReturnKeyDown={this.handleFieldBlur}\n                  validation={this.props.validation}\n                  helpText={\"Original price or MSRP\"}\n                  i18nKeyHelpText={\"admin.helpText.compareAtPrice\"}\n                />\n              </div>\n            </div>\n\n            <div className=\"row\">\n              {this.renderQuantityField()}\n              {this.renderInventoryPolicyField()}\n            </div>\n            <div className=\"row\">\n              <div className=\"col-sm-6\">\n                <Components.TextField\n                  i18nKeyLabel=\"productVariant.width\"\n                  i18nKeyPlaceholder=\"0\"\n                  placeholder=\"0\"\n                  label=\"Width\"\n                  name=\"width\"\n                  ref=\"widthInput\"\n                  value={this.variant.width}\n                  onBlur={this.handleFieldBlur}\n                  onChange={this.handleFieldChange}\n                  onReturnKeyDown={this.handleFieldBlur}\n                  validation={this.props.validation}\n                />\n              </div>\n              <div className=\"col-sm-6\">\n                <Components.TextField\n                  i18nKeyLabel=\"productVariant.length\"\n                  i18nKeyPlaceholder=\"0\"\n                  placeholder=\"0\"\n                  label=\"Length\"\n                  name=\"length\"\n                  ref=\"lengthInput\"\n                  value={this.variant.length}\n                  onBlur={this.handleFieldBlur}\n                  onChange={this.handleFieldChange}\n                  onReturnKeyDown={this.handleFieldBlur}\n                  validation={this.props.validation}\n                />\n              </div>\n            </div>\n\n            <div className=\"row\">\n              <div className=\"col-sm-6\">\n                <Components.TextField\n                  i18nKeyLabel=\"productVariant.height\"\n                  i18nKeyPlaceholder=\"0\"\n                  placeholder=\"0\"\n                  label=\"Height\"\n                  name=\"height\"\n                  ref=\"heightInput\"\n                  value={this.variant.height}\n                  onBlur={this.handleFieldBlur}\n                  onChange={this.handleFieldChange}\n                  onReturnKeyDown={this.handleFieldBlur}\n                  validation={this.props.validation}\n                />\n              </div>\n              <div className=\"col-sm-6\">\n                <Components.TextField\n                  i18nKeyLabel=\"productVariant.weight\"\n                  i18nKeyPlaceholder=\"0\"\n                  placeholder=\"0\"\n                  label=\"Weight\"\n                  name=\"weight\"\n                  ref=\"weightInput\"\n                  value={this.variant.weight}\n                  onBlur={this.handleFieldBlur}\n                  onChange={this.handleFieldChange}\n                  onReturnKeyDown={this.handleFieldBlur}\n                  validation={this.props.validation}\n                />\n              </div>\n            </div>\n          </Components.CardBody>\n        </Components.Card>\n      </Components.CardGroup>\n    );\n  }\n\n  render() {\n    if (this.props.type === \"option\") {\n      return (\n        <div>\n          {this.renderOptionFields()}\n        </div>\n      );\n    }\n    return (\n      <div>\n        {this.renderVariantFields()}\n      </div>\n    );\n  }\n}\n\nVariantForm.propTypes = {\n  cloneVariant: PropTypes.func,\n  countries: PropTypes.arrayOf(PropTypes.object),\n  editFocus: PropTypes.oneOfType([PropTypes.string, PropTypes.arrayOf(PropTypes.string)]),\n  fetchTaxCodes: PropTypes.func,\n  greyDisabledFields: PropTypes.func,\n  hasChildVariants: PropTypes.func,\n  isDeleted: PropTypes.bool,\n  isProviderEnabled: PropTypes.func,\n  onCardExpand: PropTypes.func,\n  onFieldChange: PropTypes.func,\n  onUpdateQuantityField: PropTypes.func,\n  onVariantFieldSave: PropTypes.func,\n  onVisibilityButtonClick: PropTypes.func,\n  removeVariant: PropTypes.func,\n  restoreVariant: PropTypes.func,\n  type: PropTypes.string,\n  validation: PropTypes.object,\n  variant: PropTypes.object\n};\n\nexport default VariantForm;\n","import React, { Component } from \"react\";\nimport PropTypes from \"prop-types\";\nimport { compose } from \"recompose\";\nimport { registerComponent, composeWithTracker } from \"@reactioncommerce/reaction-components\";\nimport { Session } from \"meteor/session\";\nimport { Validation } from \"@reactioncommerce/schemas\";\nimport { Reaction } from \"/client/api\";\nimport GridItemControls from \"../components/gridItemControls\";\nimport { ReactionProduct } from \"/lib/api\";\nimport { ProductVariant } from \"/lib/collections/schemas/products\";\n\nconst wrapComponent = (Comp) => (\n  class GridItemControlsContainer extends Component {\n    static propTypes = {\n      isSelected: PropTypes.bool,\n      product: PropTypes.object\n    }\n\n    constructor(props) {\n      super(props);\n\n      this.validation = new Validation(ProductVariant);\n      this.validProduct = props.product;\n\n      this.hasCreateProductPermission = this.hasCreateProductPermission.bind(this);\n      this.hasChanges = this.hasChanges.bind(this);\n      this.checked = this.checked.bind(this);\n      this.checkValidation = this.checkValidation.bind(this);\n    }\n\n    componentWillMount() {\n      this.checkValidation();\n    }\n\n    hasCreateProductPermission = () => Reaction.hasPermission(\"createProduct\")\n\n    hasChanges = () => !!this.props.product.__draft\n\n    // This method checks validation of the variants of the all the products on the Products grid to\n    // check whether all required fields have been submitted before publishing\n    checkValidation = () => {\n      // this returns an array with a single object\n      const variants = ReactionProduct.getVariants(this.props.product._id);\n\n      // should validate variants if they exist to determine if product is Valid\n      if (variants.length !== 0) {\n        const validatedVariants = variants.map((variant) => this.validation.validate(variant));\n        this.setState({\n          validProduct: Object.assign({}, this.props.product, { __isValid: validatedVariants[0].isValid })\n        });\n      } else {\n        // if variants do not exist then validation should pass\n        this.setState({\n          validProduct: Object.assign({}, this.props.product, { __isValid: true })\n        });\n      }\n    }\n\n    checked = () => this.props.isSelected === true\n\n    render() {\n      return (\n        <Comp\n          product={this.state.validProduct}\n          hasCreateProductPermission={this.hasCreateProductPermission}\n          hasChanges={this.hasChanges}\n          checked={this.checked}\n        />\n      );\n    }\n  }\n);\n\nfunction composer(props, onData) {\n  const { product } = props;\n  let isSelected;\n\n  if (product) {\n    const selectedProducts = Session.get(\"productGrid/selectedProducts\");\n    isSelected = Array.isArray(selectedProducts) ? selectedProducts.indexOf(product._id) >= 0 : false;\n  }\n\n  onData(null, {\n    product,\n    isSelected\n  });\n}\n\nregisterComponent(\"GridItemControls\", GridItemControls, [\n  composeWithTracker(composer),\n  wrapComponent\n]);\n\nexport default compose(\n  composeWithTracker(composer),\n  wrapComponent\n)(GridItemControls);\n","import React, { Component } from \"react\";\nimport PropTypes from \"prop-types\";\nimport { registerComponent } from \"@reactioncommerce/reaction-components\";\nimport { ReactionProduct } from \"/lib/api\";\nimport GridItemNotice from \"../components/gridItemNotice\";\n\nconst wrapComponent = (Comp) => (\n  class GridItemNoticeContainer extends Component {\n    static propTypes = {\n      product: PropTypes.object\n    }\n\n    constructor() {\n      super();\n\n      this.isLowQuantity = this.isLowQuantity.bind(this);\n      this.isSoldOut = this.isSoldOut.bind(this);\n      this.isBackorder = this.isBackorder.bind(this);\n    }\n\n    isLowQuantity = () => {\n      const topVariants = ReactionProduct.getTopVariants(this.props.product._id);\n\n      for (const topVariant of topVariants) {\n        const inventoryThreshold = topVariant.lowInventoryWarningThreshold;\n        const inventoryQuantity = ReactionProduct.getVariantQuantity(topVariant);\n\n        if (inventoryQuantity !== 0 && inventoryThreshold >= inventoryQuantity) {\n          return true;\n        }\n      }\n      return false;\n    }\n\n    isSoldOut = () => {\n      const topVariants = ReactionProduct.getTopVariants(this.props.product._id);\n\n      for (const topVariant of topVariants) {\n        const inventoryQuantity = ReactionProduct.getVariantQuantity(topVariant);\n\n        if (inventoryQuantity > 0) {\n          return false;\n        }\n      }\n      return true;\n    }\n\n    isBackorder = () => this.props.product.isBackorder\n\n    render() {\n      return (\n        <Comp\n          isLowQuantity={this.isLowQuantity}\n          isSoldOut={this.isSoldOut}\n          isBackorder={this.isBackorder}\n        />\n      );\n    }\n  }\n);\n\nregisterComponent(\"GridItemNotice\", GridItemNotice, wrapComponent);\n\nexport default wrapComponent(GridItemNotice);\n","import React, { Component } from \"react\";\nimport PropTypes from \"prop-types\";\nimport { registerComponent, composeWithTracker } from \"@reactioncommerce/reaction-components\";\nimport { Meteor } from \"meteor/meteor\";\nimport { Session } from \"meteor/session\";\nimport { ReactionProduct } from \"/lib/api\";\nimport { Products } from \"/lib/collections\";\nimport PublishContainer from \"/imports/plugins/core/revisions/client/containers/publishContainer\";\n\nclass GridProductPublishContainer extends Component {\n  static propTypes = {\n    documentIds: PropTypes.arrayOf(PropTypes.string),\n    documents: PropTypes.arrayOf(PropTypes.object)\n  };\n\n  handleVisibilityChange = (event, isProductVisible) => {\n    if (Array.isArray(this.props.documentIds)) {\n      for (const productId of this.props.documentIds) {\n        Meteor.call(\"products/updateProductField\", productId, \"isVisible\", isProductVisible);\n      }\n    }\n  }\n\n  handlePublishActions = (event, action) => {\n    if (action === \"archive\") {\n      ReactionProduct.archiveProduct(this.props.documents);\n    }\n  }\n\n  render() {\n    return (\n      <PublishContainer\n        onAction={this.handlePublishActions}\n        onVisibilityChange={this.handleVisibilityChange}\n        {...this.props}\n      />\n    );\n  }\n}\n\nfunction composer(props, onData) {\n  const selectedProducts = Session.get(\"productGrid/selectedProducts\");\n  const products = Session.get(\"productGrid/products\");\n\n  let productIds;\n\n  if (Array.isArray(selectedProducts) && selectedProducts.length) {\n    productIds = selectedProducts;\n  } else if (Array.isArray(products) && products.length) {\n    productIds = products.map((p) => p._id);\n  }\n\n  if (productIds) {\n    const documents = Products.find({\n      _id: { $in: productIds }\n    }).fetch();\n\n    onData(null, {\n      documentIds: productIds,\n      documents\n    });\n  } else {\n    onData(null, {});\n  }\n}\n\nregisterComponent(\"GridProductPublish\", GridProductPublishContainer, composeWithTracker(composer));\n\n// Decorate component and export\nexport default composeWithTracker(composer)(GridProductPublishContainer);\n","import React, { Component } from \"react\";\nimport PropTypes from \"prop-types\";\nimport update from \"immutability-helper\";\nimport _ from \"lodash\";\nimport { compose } from \"recompose\";\nimport { Components, composeWithTracker, registerComponent } from \"@reactioncommerce/reaction-components\";\nimport { Meteor } from \"meteor/meteor\";\nimport { Session } from \"meteor/session\";\nimport { Reaction } from \"/client/api\";\nimport { Media } from \"/imports/plugins/core/files/client\";\nimport Logger from \"/client/modules/logger\";\nimport { ReactionProduct } from \"/lib/api\";\nimport ProductGrid from \"../components/productGrid\";\n\nconst wrapComponent = (Comp) => (\n  class ProductGridContainer extends Component {\n    static propTypes = {\n      isSearch: PropTypes.bool,\n      productIds: PropTypes.array,\n      products: PropTypes.array,\n      productsByKey: PropTypes.object\n    }\n\n    constructor(props) {\n      super(props);\n\n      this.state = {\n        products: props.products,\n        productsByKey: props.productsByKey,\n        productIds: props.productIds,\n        initialLoad: true,\n        slug: \"\",\n        canLoadMoreProducts: false\n      };\n    }\n\n    componentWillMount() {\n      const selectedProducts = Reaction.getUserPreferences(\"reaction-product-variant\", \"selectedGridItems\");\n      const { products } = this;\n\n      if (_.isEmpty(selectedProducts)) {\n        return Reaction.hideActionView();\n      }\n\n      // Save the selected items to the Session\n      Session.set(\"productGrid/selectedProducts\", _.uniq(selectedProducts));\n\n      if (products) {\n        const filteredProducts = products.filter((product) => selectedProducts.includes(product._id));\n\n        if (Reaction.isPreview() === false) {\n          Reaction.showActionView({\n            label: \"Grid Settings\",\n            i18nKeyLabel: \"gridSettingsPanel.title\",\n            template: \"productSettings\",\n            type: \"product\",\n            data: { products: filteredProducts }\n          });\n        }\n      }\n    }\n\n    componentWillReceiveProps = (nextProps) => {\n      this.setState({\n        products: nextProps.products,\n        productIds: nextProps.productIds,\n        productsByKey: nextProps.productsByKey\n      });\n    }\n\n    handleSelectProductItem = (isChecked, productId) => {\n      let selectedProducts = Session.get(\"productGrid/selectedProducts\");\n\n      if (isChecked) {\n        selectedProducts.push(productId);\n      } else {\n        selectedProducts = _.without(selectedProducts, productId);\n      }\n\n      Reaction.setUserPreferences(\"reaction-product-variant\", \"selectedGridItems\", selectedProducts);\n\n      // Save the selected items to the Session\n      Session.set(\"productGrid/selectedProducts\", _.uniq(selectedProducts));\n\n      const { products } = this;\n\n      if (products) {\n        const filteredProducts = products.filter((product) => selectedProducts.includes(product._id));\n\n        Reaction.showActionView({\n          label: \"Grid Settings\",\n          i18nKeyLabel: \"gridSettingsPanel.title\",\n          template: \"productSettings\",\n          type: \"product\",\n          data: { products: filteredProducts }\n        });\n      }\n    }\n\n    handleProductDrag = (dragIndex, hoverIndex) => {\n      const tag = ReactionProduct.getTag();\n      const dragProductId = this.state.productIds[dragIndex];\n      const hoverProductId = this.state.productIds[hoverIndex];\n      const dragProductWeight = _.get(this, `state.productsByKey[${dragProductId}].positions[${tag}].weight`, 0);\n      const dropProductWeight = _.get(this, `state.productsByKey[${hoverProductId}].positions[${tag}].weight`, 0);\n\n      const newState = update(this.state, {\n        productsByKey: {\n          [dragProductId]: {\n            $merge: {\n              positions: {\n                [tag]: {\n                  weight: dropProductWeight\n                }\n              }\n            }\n          },\n          [hoverProductId]: {\n            $merge: {\n              positions: {\n                [tag]: {\n                  weight: dragProductWeight\n                }\n              }\n            }\n          }\n        },\n        productIds: {\n          $splice: [\n            [dragIndex, 1],\n            [hoverIndex, 0, dragProductId]\n          ]\n        }\n      });\n\n      this.setState(newState);\n    }\n\n    handleProductDrop = () => {\n      const tag = ReactionProduct.getTag();\n      this.state.productIds.map((productId, index) => {\n        const position = { position: index, updatedAt: new Date() };\n\n        return Meteor.call(\"products/updateProductPosition\", productId, position, tag, (error) => {\n          if (error) {\n            Logger.error(error);\n            throw new Meteor.Error(\"error-occurred\", error);\n          }\n        });\n      });\n    }\n\n    get products() {\n      if (this.props.isSearch) {\n        return this.state.products;\n      }\n      return this.state.productIds.map((id) => this.state.productsByKey[id]);\n    }\n\n    render() {\n      return (\n        <Components.DragDropProvider>\n          <Comp\n            {...this.props}\n            products={this.products}\n            onMove={this.handleProductDrag}\n            onDrop={this.handleProductDrop}\n            itemSelectHandler={this.handleSelectProductItem}\n          />\n        </Components.DragDropProvider>\n      );\n    }\n  }\n);\n\nfunction composer(props, onData) {\n  // Instantiate an object for use as a map. This object does not inherit prototype or methods from `Object`\n  const productMediaById = Object.create(null);\n  (props.products || []).forEach((product) => {\n    const primaryMedia = Media.findOneLocal({\n      \"metadata.productId\": product._id,\n      \"metadata.toGrid\": 1,\n      \"metadata.workflow\": { $nin: [\"archived\", \"unpublished\"] }\n    }, {\n      sort: { \"metadata.priority\": 1, \"uploadedAt\": 1 }\n    });\n\n    const variantIds = ReactionProduct.getVariants(product._id).map((variant) => variant._id);\n    let additionalMedia = Media.findLocal({\n      \"metadata.productId\": product._id,\n      \"metadata.variantId\": { $in: variantIds },\n      \"metadata.workflow\": { $nin: [\"archived\", \"unpublished\"] }\n    }, {\n      limit: 3,\n      sort: { \"metadata.priority\": 1, \"uploadedAt\": 1 }\n    });\n\n    if (additionalMedia.length < 2) additionalMedia = null;\n\n    productMediaById[product._id] = {\n      additionalMedia,\n      primaryMedia\n    };\n  });\n\n  onData(null, {\n    productMediaById\n  });\n}\n\nregisterComponent(\"ProductGrid\", ProductGrid, [\n  composeWithTracker(composer),\n  wrapComponent\n]);\n\nexport default compose(\n  composeWithTracker(composer),\n  wrapComponent\n)(ProductGrid);\n","import React, { Component } from \"react\";\nimport PropTypes from \"prop-types\";\nimport _ from \"lodash\";\nimport { compose } from \"recompose\";\nimport { registerComponent } from \"@reactioncommerce/reaction-components\";\nimport { Session } from \"meteor/session\";\nimport { Reaction } from \"/client/api\";\nimport { ReactionProduct } from \"/lib/api\";\nimport { SortableItem } from \"/imports/plugins/core/ui/client/containers\";\nimport ProductGridItems from \"../components/productGridItems\";\n\nconst wrapComponent = (Comp) => (\n  class ProductGridItemsContainer extends Component {\n    static propTypes = {\n      connectDragSource: PropTypes.func,\n      connectDropTarget: PropTypes.func,\n      isSearch: PropTypes.bool,\n      itemSelectHandler: PropTypes.func,\n      product: PropTypes.object,\n      unmountMe: PropTypes.func\n    }\n\n    componentDidMount() {\n      document.querySelector(\".page > main\").addEventListener(\"click\", this.onPageClick);\n    }\n\n    componentWillUnmount() {\n      document.querySelector(\".page > main\").removeEventListener(\"click\", this.onPageClick);\n    }\n\n    onPageClick = (event) => {\n      // Do nothing if we are in preview mode\n      if (Reaction.isPreview() === false) {\n        // Don't trigger the clear selection if we're clicking on a grid item.\n        if (event.target.closest(\".product-grid-item\") === null) {\n          const selectedProducts = Session.get(\"productGrid/selectedProducts\");\n\n          // Do we have any selected products?\n          // If we do then lets reset the Grid Settings ActionView\n          if (Array.isArray(selectedProducts) && selectedProducts.length) {\n            // Reset sessions ver of selected products\n            Session.set(\"productGrid/selectedProducts\", []);\n\n            // Reset the action view of selected products\n            Reaction.setActionView({\n              label: \"Grid Settings\",\n              i18nKeyLabel: \"gridSettingsPanel.title\",\n              template: \"productSettings\",\n              type: \"product\",\n              data: {}\n            });\n          }\n        }\n      }\n    }\n\n    productPath = () => {\n      if (this.props.product) {\n        let { handle } = this.props.product;\n\n        if (this.props.product.__published) {\n          ({ handle } = this.props.product.__published);\n        }\n\n        return Reaction.Router.pathFor(\"product\", {\n          hash: {\n            handle\n          }\n        });\n      }\n\n      return \"/\";\n    }\n\n    positions = () => {\n      const tag = ReactionProduct.getTag();\n      return (this.props.product.positions && this.props.product.positions[tag]) || {};\n    }\n\n    weightClass = () => {\n      const positions = this.positions();\n      const weight = positions.weight || 0;\n      switch (weight) {\n        case 1:\n          return \"product-medium\";\n        case 2:\n          return \"product-large\";\n        default:\n          return \"product-small\";\n      }\n    }\n\n    isSelected = () => {\n      if (Reaction.isPreview() === false) {\n        return _.includes(Session.get(\"productGrid/selectedProducts\"), this.props.product._id) ? \"active\" : \"\";\n      }\n      return false;\n    }\n\n    isMediumWeight = () => {\n      const positions = this.positions();\n      const weight = positions.weight || 0;\n\n      return weight === 1;\n    }\n\n    displayPrice = () => {\n      if (this.props.product.price && this.props.product.price.range) {\n        return this.props.product.price.range;\n      }\n    }\n\n    handleCheckboxSelect = (list, product) => {\n      let checkbox = list.querySelector(`input[type=checkbox][value=\"${product._id}\"]`);\n      const items = document.querySelectorAll(\"li.product-grid-item\");\n      const activeItems = document.querySelectorAll(\"li.product-grid-item.active\");\n      const selected = activeItems.length;\n\n      if (event.shiftKey && selected > 0) {\n        const indexes = [\n          Array.prototype.indexOf.call(items, document.querySelector(`li.product-grid-item[id=\"${product._id}\"]`)),\n          Array.prototype.indexOf.call(items, activeItems[0]),\n          Array.prototype.indexOf.call(items, activeItems[selected - 1])\n        ];\n        for (let i = _.min(indexes); i <= _.max(indexes); i += 1) {\n          checkbox = items[i].querySelector(\"input[type=checkbox]\");\n          if (checkbox.checked === false) {\n            checkbox.checked = true;\n            this.props.itemSelectHandler(checkbox.checked, product._id);\n          }\n        }\n      } else if (checkbox) {\n        checkbox.checked = !checkbox.checked;\n        this.props.itemSelectHandler(checkbox.checked, product._id);\n      }\n    }\n\n    onDoubleClick = () => {\n      const { product } = this.props;\n      const handle = (product.__published && product.__published.handle) || product.handle;\n\n      Reaction.Router.go(\"product\", {\n        handle\n      });\n\n      // Open actionView to productDetails panel\n      Reaction.state.set(\"edit/focus\", \"productDetails\");\n\n      Reaction.setActionView({\n        i18nKeyLabel: \"productDetailEdit.productSettings\",\n        label: \"Product Settings\",\n        template: \"ProductAdmin\"\n      });\n\n      if (this.props.isSearch) {\n        this.props.unmountMe();\n      }\n    }\n\n    onClick = (event) => {\n      event.preventDefault();\n      const { product } = this.props;\n\n      if (Reaction.hasPermission(\"createProduct\") && Reaction.isPreview() === false) {\n        if (this.props.isSearch) {\n          let { handle } = product;\n          if (product.__published) {\n            ({ handle } = product.__published);\n          }\n\n          Reaction.Router.go(\"product\", {\n            handle\n          });\n\n          this.props.unmountMe();\n        }\n\n        const isSelected = event.target.closest(\"li.product-grid-item.active\");\n        const list = document.getElementById(\"product-grid-list\");\n\n        if (isSelected) {\n          // If a product is already selected, and you are single clicking on another product(s)\n          // WITH command key, the product(s) are added to the selected products Session array\n          this.handleCheckboxSelect(list, product);\n          if (event.metaKey || event.ctrlKey || event.shiftKey) {\n            this.handleCheckboxSelect(list, product);\n          }\n        } else if (event.metaKey || event.ctrlKey || event.shiftKey) {\n          this.handleCheckboxSelect(list, product);\n        } else {\n          const checkbox = list.querySelector(`input[type=checkbox][value=\"${product._id}\"]`);\n          Session.set(\"productGrid/selectedProducts\", []);\n          if (checkbox) {\n            checkbox.checked = true;\n            this.props.itemSelectHandler(checkbox.checked, product._id);\n          }\n        }\n      } else {\n        const handle = (product.__published && product.__published.handle) || product.handle;\n\n        Reaction.Router.go(\"product\", {\n          handle\n        });\n\n        if (this.props.isSearch) {\n          this.props.unmountMe();\n        }\n      }\n    }\n\n    render() {\n      return (\n        <Comp\n          product={this.props.product}\n          pdpPath={this.productPath}\n          positions={this.positions}\n          weightClass={this.weightClass}\n          isSelected={this.isSelected}\n          isMediumWeight={this.isMediumWeight}\n          displayPrice={this.displayPrice}\n          onDoubleClick={this.onDoubleClick}\n          onClick={this.onClick}\n          {...this.props}\n        />\n      );\n    }\n  }\n);\n\nregisterComponent(\"ProductGridItems\", ProductGridItems, [\n  SortableItem(\"productGridItem\"),\n  wrapComponent\n]);\n\nexport default compose(\n  SortableItem(\"productGridItem\"),\n  wrapComponent\n)(ProductGridItems);\n","import React from \"react\";\nimport PropTypes from \"prop-types\";\nimport { compose } from \"recompose\";\nimport { registerComponent, composeWithTracker, Components } from \"@reactioncommerce/reaction-components\";\nimport { Meteor } from \"meteor/meteor\";\nimport { Reaction } from \"/client/api\";\n\nconst ProductsContainer = ({ isAdmin }) => {\n  if (isAdmin) {\n    return <Components.ProductsAdmin />;\n  }\n  return <Components.ProductsCustomer />;\n};\n\nProductsContainer.propTypes = {\n  isAdmin: PropTypes.bool\n};\n\nfunction composer(props, onData) {\n  const isAdmin = Reaction.hasPermission(\"createProduct\", Meteor.userId());\n\n  onData(null, {\n    isAdmin\n  });\n}\n\nregisterComponent(\"Products\", ProductsContainer, [\n  composeWithTracker(composer)\n]);\n\nexport default compose(composeWithTracker(composer))(ProductsContainer);\n","import React, { Component } from \"react\";\nimport PropTypes from \"prop-types\";\nimport { compose } from \"recompose\";\nimport { registerComponent, composeWithTracker } from \"@reactioncommerce/reaction-components\";\nimport { Meteor } from \"meteor/meteor\";\nimport { ReactiveVar } from \"meteor/reactive-var\";\nimport { Session } from \"meteor/session\";\nimport { Tracker } from \"meteor/tracker\";\nimport { Reaction } from \"/client/api\";\nimport { ITEMS_INCREMENT } from \"/client/config/defaults\";\nimport { ReactionProduct } from \"/lib/api\";\nimport { applyProductRevision, resubscribeAfterCloning } from \"/lib/api/products\";\nimport { Products, Tags, Shops } from \"/lib/collections\";\nimport ProductsComponent from \"../components/products\";\n\nconst reactiveProductIds = new ReactiveVar([], (oldVal, newVal) => JSON.stringify(oldVal.sort()) === JSON.stringify(newVal.sort()));\n\n// Isolated resubscribe to product grid images, only when the list of product IDs changes\nTracker.autorun(() => {\n  Meteor.subscribe(\"ProductGridMedia\", reactiveProductIds.get());\n});\n\n\n/**\n * loadMoreProducts\n * @summary whenever #productScrollLimitLoader becomes visible, retrieve more results\n * this basically runs this:\n * Session.set('productScrollLimit', Session.get('productScrollLimit') + ITEMS_INCREMENT);\n * @return {undefined}\n */\nfunction loadMoreProducts() {\n  let threshold;\n  const target = document.querySelectorAll(\"#productScrollLimitLoader\");\n  let scrollContainer = document.querySelectorAll(\"#container-main\");\n  if (scrollContainer.length === 0) {\n    scrollContainer = window;\n  }\n\n  if (target.length) {\n    threshold = scrollContainer[0].scrollHeight - scrollContainer[0].scrollTop === scrollContainer[0].clientHeight;\n\n    if (threshold) {\n      if (!target[0].getAttribute(\"visible\")) {\n        target[0].setAttribute(\"productScrollLimit\", true);\n        Session.set(\"productScrollLimit\", Session.get(\"productScrollLimit\") + ITEMS_INCREMENT || 24);\n      }\n    } else if (target[0].getAttribute(\"visible\")) {\n      target[0].setAttribute(\"visible\", false);\n    }\n  }\n}\n\nconst wrapComponent = (Comp) => (\n  class ProductsContainer extends Component {\n    static propTypes = {\n      canLoadMoreProducts: PropTypes.bool,\n      productsSubscription: PropTypes.object,\n      showNotFound: PropTypes.bool\n    };\n\n    constructor(props) {\n      super(props);\n      this.state = {\n        initialLoad: true\n      };\n\n      this.ready = this.ready.bind(this);\n      this.loadMoreProducts = this.loadMoreProducts.bind(this);\n    }\n\n    ready = () => {\n      if (this.props.showNotFound === true) {\n        return false;\n      }\n      const isInitialLoad = this.state.initialLoad === true;\n      const isReady = this.props.productsSubscription.ready();\n\n      if (isInitialLoad === false) {\n        return true;\n      }\n\n      if (isReady) {\n        return true;\n      }\n      return false;\n    }\n\n    loadMoreProducts = () => this.props.canLoadMoreProducts === true\n\n    loadProducts = (event) => {\n      event.preventDefault();\n      this.setState({\n        initialLoad: false\n      });\n      loadMoreProducts();\n    }\n\n    render() {\n      return (\n        <Comp\n          {...this.props}\n          ready={this.ready}\n          loadMoreProducts={this.loadMoreProducts}\n          loadProducts={this.loadProducts}\n        />\n      );\n    }\n  }\n);\n\nfunction composer(props, onData) {\n  window.prerenderReady = false;\n\n  let canLoadMoreProducts = false;\n\n  const slug = Reaction.Router.getParam(\"slug\");\n  const shopIdOrSlug = Reaction.Router.getParam(\"shopSlug\");\n\n  const tag = Tags.findOne({ slug }) || Tags.findOne(slug);\n  const scrollLimit = Session.get(\"productScrollLimit\");\n  let tags = {}; // this could be shop default implementation needed\n  let shopIds = {};\n\n  if (tag) {\n    tags = { tags: [tag._id] };\n  }\n\n  if (shopIdOrSlug) {\n    shopIds = { shops: [shopIdOrSlug] };\n  }\n\n  // if we get an invalid slug, don't return all products\n  if (!tag && slug) {\n    onData(null, {\n      showNotFound: true\n    });\n\n    return;\n  }\n\n  const currentTag = ReactionProduct.getTag();\n\n  const sort = {\n    [`positions.${currentTag}.position`]: 1,\n    [`positions.${currentTag}.createdAt`]: 1,\n    createdAt: 1\n  };\n\n  const viewAsPref = Reaction.getUserPreferences(\"reaction-dashboard\", \"viewAs\");\n\n  // Edit mode is true by default\n  let editMode = true;\n\n  // if we have a \"viewAs\" preference and the preference is not set to \"administrator\", then edit mode is false\n  if (viewAsPref && viewAsPref !== \"administrator\") {\n    editMode = false;\n  }\n\n  const queryParams = Object.assign({}, tags, Reaction.Router.current().query, shopIds);\n  const productsSubscription = Meteor.subscribe(\"Products\", scrollLimit, queryParams, sort, editMode);\n  if (resubscribeAfterCloning.get()) {\n    resubscribeAfterCloning.set(false);\n    productsSubscription.stop();\n  }\n\n  if (productsSubscription.ready()) {\n    window.prerenderReady = true;\n  }\n\n  const activeShopsIds = Shops.find({\n    $or: [\n      { \"workflow.status\": \"active\" },\n      { _id: Reaction.getPrimaryShopId() }\n    ]\n  }).map((activeShop) => activeShop._id);\n\n  const productCursor = Products.find({\n    ancestors: [],\n    type: { $in: [\"simple\"] },\n    shopId: { $in: activeShopsIds }\n  });\n\n  const productIds = [];\n  const products = productCursor.map((product) => {\n    productIds.push(product._id);\n\n    return applyProductRevision(product);\n  });\n\n  const sortedProducts = ReactionProduct.sortProducts(products, currentTag);\n  Session.set(\"productGrid/products\", sortedProducts);\n\n  reactiveProductIds.set(productIds);\n\n  canLoadMoreProducts = productCursor.count() >= Session.get(\"productScrollLimit\");\n\n  const isActionViewOpen = Reaction.isActionViewOpen();\n  if (isActionViewOpen === false) {\n    Session.set(\"productGrid/selectedProducts\", []);\n  }\n\n  onData(null, {\n    canLoadMoreProducts,\n    products: sortedProducts,\n    productsSubscription\n  });\n}\n\nregisterComponent(\"ProductsAdmin\", ProductsComponent, [\n  composeWithTracker(composer),\n  wrapComponent\n]);\n\nexport default compose(\n  composeWithTracker(composer),\n  wrapComponent\n)(ProductsComponent);\n","import React, { Component } from \"react\";\nimport PropTypes from \"prop-types\";\nimport { compose } from \"recompose\";\nimport { registerComponent, composeWithTracker } from \"@reactioncommerce/reaction-components\";\nimport { Meteor } from \"meteor/meteor\";\nimport { Session } from \"meteor/session\";\nimport { Reaction } from \"/client/api\";\nimport { ITEMS_INCREMENT } from \"/client/config/defaults\";\nimport { ReactionProduct } from \"/lib/api\";\nimport { Catalog, Tags, Shops } from \"/lib/collections\";\nimport ProductGridCustomer from \"../components/customer/productGrid\";\n\nconst wrapComponent = (Comp) => (\n  class ProductsContainer extends Component {\n    static propTypes = {\n      canLoadMoreProducts: PropTypes.bool,\n      productsSubscription: PropTypes.object,\n      showNotFound: PropTypes.bool\n    };\n\n    constructor(props) {\n      super(props);\n      this.state = {\n        initialLoad: true\n      };\n    }\n\n    loadProducts = () => {\n      this.setState({\n        initialLoad: false\n      });\n      // load in the next set of products\n      Session.set(\"productScrollLimit\", Session.get(\"productScrollLimit\") + ITEMS_INCREMENT || 24);\n    }\n\n    render() {\n      return (\n        <Comp\n          {...this.props}\n          loadProducts={this.loadProducts}\n        />\n      );\n    }\n  }\n);\n\nfunction composer(props, onData) {\n  window.prerenderReady = false;\n\n  let canLoadMoreProducts = false;\n\n  const slug = Reaction.Router.getParam(\"slug\");\n  const shopIdOrSlug = Reaction.Router.getParam(\"shopSlug\");\n\n  const tag = Tags.findOne({ slug }) || Tags.findOne(slug);\n  const scrollLimit = Session.get(\"productScrollLimit\");\n  let tags = {}; // this could be shop default implementation needed\n  let shopIds = {};\n\n  if (tag) {\n    tags = { tags: [tag._id] };\n  }\n\n  if (shopIdOrSlug) {\n    shopIds = { shops: [shopIdOrSlug] };\n  }\n\n  // if we get an invalid slug, don't return all products\n  if (!tag && slug) {\n    onData(null, {\n      showNotFound: true\n    });\n\n    return;\n  }\n\n  const currentTag = ReactionProduct.getTag();\n\n  const sort = {\n    [`positions.${currentTag}.position`]: 1,\n    [`positions.${currentTag}.createdAt`]: 1,\n    createdAt: 1\n  };\n\n  const queryParams = Object.assign({}, tags, Reaction.Router.current().query, shopIds);\n  const productsSubscription = Meteor.subscribe(\"Products/grid\", scrollLimit, queryParams, sort);\n\n  if (productsSubscription.ready()) {\n    window.prerenderReady = true;\n  }\n\n  const activeShopsIds = Shops.find({\n    $or: [\n      { \"workflow.status\": \"active\" },\n      { _id: Reaction.getPrimaryShopId() }\n    ]\n  }).map((activeShop) => activeShop._id);\n\n  const productCursor = Catalog.find({\n    ancestors: [],\n    type: { $in: [\"product-simple\"] },\n    shopId: { $in: activeShopsIds }\n  }, {\n    $sort: sort\n  });\n\n  canLoadMoreProducts = productCursor.count() >= Session.get(\"productScrollLimit\");\n\n  const products = productCursor.fetch();\n  onData(null, {\n    canLoadMoreProducts,\n    products,\n    productsSubscription\n  });\n}\n\nregisterComponent(\"ProductsCustomer\", ProductGridCustomer, [\n  composeWithTracker(composer)\n]);\n\nexport default compose(\n  composeWithTracker(composer),\n  wrapComponent\n)(ProductGridCustomer);\n","import React, { Component } from \"react\";\nimport PropTypes from \"prop-types\";\nimport { compose } from \"recompose\";\nimport { registerComponent, composeWithTracker } from \"@reactioncommerce/reaction-components\";\nimport { Meteor } from \"meteor/meteor\";\nimport { ReactionProduct } from \"/lib/api\";\nimport { Products } from \"/lib/collections\";\nimport { Countries } from \"/client/collections\";\nimport { Reaction, i18next } from \"/client/api\";\nimport { applyProductRevision } from \"/lib/api/products\";\nimport VariantEdit from \"../components/variantEdit\";\n\n\nconst wrapComponent = (Comp) => (\n  class VariantEditContainer extends Component {\n    static propTypes = {\n      childVariants: PropTypes.arrayOf(PropTypes.object),\n      countries: PropTypes.arrayOf(PropTypes.object),\n      editFocus: PropTypes.string,\n      variant: PropTypes.object\n    };\n\n    handleCreateNewChildVariant(variant) {\n      Meteor.call(\"products/createVariant\", variant._id, (error, result) => {\n        if (error) {\n          Alerts.alert({\n            text: i18next.t(\"productDetailEdit.addVariantFail\", { title: variant.title }),\n            confirmButtonText: i18next.t(\"app.close\", { defaultValue: \"Close\" })\n          });\n        } else if (result) {\n          const newVariantId = result;\n          const selectedProduct = ReactionProduct.selectedProduct();\n          const handle = (selectedProduct.__published && selectedProduct.__published.handle) || selectedProduct.handle;\n          ReactionProduct.setCurrentVariant(newVariantId);\n          // Session.set(\"variant-form-\" + newVariantId, true);\n          const cardName = `variant-${newVariantId}`;\n          Reaction.state.set(\"edit/focus\", cardName);\n\n          Reaction.Router.go(\"product\", {\n            handle,\n            variantId: newVariantId\n          });\n        }\n      });\n    }\n\n    render() {\n      return (\n        <Comp\n          childVariants={this.props.childVariants}\n          countries={this.props.countries}\n          editFocus={this.props.editFocus}\n          handleCreateNewChildVariant={this.handleCreateNewChildVariant}\n          variant={this.props.variant}\n        />\n      );\n    }\n  }\n);\n\nfunction composer(props, onData) {\n  Meteor.subscribe(\"TaxCodes\").ready();\n\n  const productHandle = Reaction.Router.getParam(\"handle\");\n\n  if (!productHandle) {\n    Reaction.clearActionView();\n  }\n\n  if (ReactionProduct.selectedTopVariant()) {\n    const variant = Products.findOne({\n      _id: ReactionProduct.selectedTopVariant()._id\n    });\n\n    const revisedVariant = applyProductRevision(variant);\n    const childVariants = ReactionProduct.getVariants(revisedVariant._id);\n\n    onData(null, {\n      countries: Countries.find({}).fetch(),\n      editFocus: Reaction.state.get(\"edit/focus\"),\n      childVariants,\n      variant: revisedVariant\n    });\n  } else {\n    onData(null, {\n      countries: Countries.find({}).fetch()\n    });\n  }\n}\n\n\nregisterComponent(\"VariantEditForm\", VariantEdit, [\n  composeWithTracker(composer),\n  wrapComponent\n]);\n\nexport default compose(\n  composeWithTracker(composer),\n  wrapComponent\n)(VariantEdit);\n","import React, { Component } from \"react\";\nimport PropTypes from \"prop-types\";\nimport { compose } from \"recompose\";\nimport { registerComponent } from \"@reactioncommerce/reaction-components\";\nimport { Meteor } from \"meteor/meteor\";\nimport { Session } from \"meteor/session\";\nimport { Validation } from \"@reactioncommerce/schemas\";\nimport { ReactionProduct } from \"/lib/api\";\nimport { Packages } from \"/lib/collections\";\nimport { Reaction, i18next } from \"/client/api\";\nimport { TaxCodes } from \"/imports/plugins/core/taxes/lib/collections\";\nimport { ProductVariant } from \"/lib/collections/schemas/products\";\nimport VariantForm from \"../components/variantForm\";\n\nconst wrapComponent = (Comp) => (\n  class VariantFormContainer extends Component {\n    static propTypes = {\n      variant: PropTypes.object\n    }\n\n    constructor(props) {\n      super(props);\n\n      this.validation = new Validation(ProductVariant);\n\n      this.state = {\n        validationStatus: this.validation.validationStatus,\n        isDeleted: props.variant && props.variant.isDeleted\n      };\n    }\n\n    componentDidMount() {\n      this.runVariantValidation(this.props.variant);\n    }\n\n    componentWillReceiveProps(nextProps) {\n      this.setState({\n        isDeleted: nextProps.variant && nextProps.variant.isDeleted\n      });\n    }\n\n    runVariantValidation(variant) {\n      if (variant) {\n        const validationStatus = this.validation.validate(variant);\n\n        this.setState(() => ({\n          validationStatus\n        }));\n\n        return validationStatus;\n      }\n    }\n\n    isProviderEnabled = () => {\n      const shopId = Reaction.getShopId();\n\n      const provider = Packages.findOne({\n        shopId,\n        \"registry.provides\": \"taxCodes\",\n        \"$where\"() {\n          const providerName = this.name.split(\"-\")[1];\n          return this.settings[providerName].enabled;\n        }\n      });\n\n      if (provider) {\n        return true;\n      }\n      return false;\n    }\n\n    fetchTaxCodes = () => {\n      const shopId = Reaction.getShopId();\n      const provider = Packages.findOne({\n        shopId,\n        \"registry.provides\": \"taxCodes\",\n        \"$where\"() {\n          const providers = this.registry.filter((o) => o.provides && o.provides.includes(\"taxCodes\"));\n          const providerName = providers[0].name.split(\"/\")[2];\n\n          return this.settings[providerName].enabled;\n        }\n      });\n      const taxCodesArray = [];\n\n      const codes = TaxCodes.find({\n        shopId,\n        taxCodeProvider: provider.name\n      });\n\n      codes.forEach((code) => {\n        taxCodesArray.push({\n          value: code.taxCode,\n          label: `${code.taxCode} | ${code.label}`\n        });\n      });\n      return taxCodesArray;\n    }\n\n    hasChildVariants = (variant) => {\n      if (ReactionProduct.checkChildVariants(variant._id) > 0) {\n        return true;\n      }\n      return false;\n    }\n\n    greyDisabledFields = (variant) => {\n      if (this.hasChildVariants(variant)) {\n        return { backgroundColor: \"lightgrey\", cursor: \"not-allowed\" };\n      }\n    }\n\n    restoreVariant = (variant) => {\n      const title = variant.title || i18next.t(\"productDetailEdit.thisVariant\");\n\n      Alerts.alert({\n        title: i18next.t(\"productDetailEdit.restoreVariantConfirm\", { title }),\n        showCancelButton: true,\n        confirmButtonText: \"Restore\"\n      }, (isConfirm) => {\n        if (isConfirm) {\n          const id = variant._id;\n          Meteor.call(\"products/updateProductField\", id, \"isDeleted\", false, (error) => {\n            if (error) {\n              Alerts.alert({\n                text: i18next.t(\"productDetailEdit.restoreVariantFail\", { title }),\n                confirmButtonText: i18next.t(\"app.close\", { defaultValue: \"Close\" })\n              });\n            }\n            this.setState({\n              isDeleted: !this.state.isDeleted\n            });\n          });\n        }\n      });\n    }\n\n    removeVariant = (variant) => {\n      const title = variant.title || i18next.t(\"productDetailEdit.thisVariant\");\n\n      Alerts.alert({\n        title: i18next.t(\"productDetailEdit.archiveVariantConfirm\", { title }),\n        showCancelButton: true,\n        confirmButtonText: \"Archive\"\n      }, (isConfirm) => {\n        if (isConfirm) {\n          this.setState({\n            isDeleted: !this.state.isDeleted\n          });\n          const id = variant._id;\n          Meteor.call(\"products/deleteVariant\", id, (error, result) => {\n            if (result && ReactionProduct.selectedVariantId() === id) {\n              return ReactionProduct.setCurrentVariant(null);\n            }\n          });\n        }\n      });\n    }\n\n    cloneVariant = (variant) => {\n      const title = variant.title || i18next.t(\"productDetailEdit.thisVariant\");\n      const productId = ReactionProduct.selectedProductId();\n      if (!productId) {\n        return;\n      }\n      Meteor.call(\"products/cloneVariant\", productId, variant._id, (error, result) => {\n        if (error) {\n          Alerts.alert({\n            text: i18next.t(\"productDetailEdit.cloneVariantFail\", { title }),\n            confirmButtonText: i18next.t(\"app.close\", { defaultValue: \"Close\" })\n          });\n        } else if (result) {\n          const variantId = result[0];\n\n          ReactionProduct.setCurrentVariant(variantId);\n          Session.set(`variant-form-${variantId}`, true);\n        }\n      });\n    }\n\n    handleVariantFieldSave = (variantId, fieldName, value, variant) => {\n      const validationStatus = this.runVariantValidation(variant);\n\n      if (validationStatus.isFieldValid(fieldName)) {\n        Meteor.call(\"products/updateProductField\", variantId, fieldName, value, (error) => {\n          if (error) {\n            Alerts.toast(error.message, \"error\");\n          }\n\n          if (fieldName === \"inventoryPolicy\") {\n            this.updateInventoryPolicyIfChildVariants(variant);\n          }\n        });\n      }\n    }\n\n    handleCardExpand = (cardName) => {\n      Reaction.state.set(\"edit/focus\", cardName);\n    }\n\n    handleVariantVisibilityToggle = (variant) => {\n      Meteor.call(\"products/updateProductField\", variant._id, \"isVisible\", !variant.isVisible);\n    }\n\n    /**\n     * @method updateInventoryPolicyIfChildVariants\n     * @description update parent inventory policy if variant has children\n     * @param {Object} variant product or variant document\n     * @return {undefined} return nothing\n     */\n    updateInventoryPolicyIfChildVariants = (variant) => {\n      // Get all siblings, including current variant\n      const options = ReactionProduct.getSiblings(variant);\n      // Get parent\n      const parent = ReactionProduct.getVariantParent(variant);\n\n      // If this is not a top-level variant, update top-level inventory policy as well\n      if (parent && options && options.length) {\n        // Check to see if every variant option inventory policy is true\n        const inventoryPolicy = options.every((option) => option.inventoryPolicy === true);\n\n        // If all inventory policies on children are true, update parent to be true\n        if (inventoryPolicy === true) {\n          return Meteor.call(\"products/updateProductField\", parent._id, \"inventoryPolicy\", true, (error) => {\n            if (error) {\n              Alerts.toast(error.message, \"error\");\n            }\n          });\n        }\n        // If any child has a false inventoryPolicy, update parent to be false\n        return Meteor.call(\"products/updateProductField\", parent._id, \"inventoryPolicy\", false, (error) => {\n          if (error) {\n            Alerts.toast(error.message, \"error\");\n          }\n        });\n      }\n    }\n\n    updateQuantityIfChildVariants = (variant) => {\n      if (this.hasChildVariants(variant)) {\n        const variantQuantity = ReactionProduct.getVariantQuantity(variant);\n        return variantQuantity;\n      }\n    }\n\n    render() {\n      if (this.props.variant) {\n        return (\n          <Comp\n            isProviderEnabled={this.isProviderEnabled}\n            fetchTaxCodes={this.fetchTaxCodes}\n            hasChildVariants={this.hasChildVariants}\n            greyDisabledFields={this.greyDisabledFields}\n            restoreVariant={this.restoreVariant}\n            removeVariant={this.removeVariant}\n            cloneVariant={this.cloneVariant}\n            onVariantFieldSave={this.handleVariantFieldSave}\n            onVisibilityButtonClick={this.handleVariantVisibilityToggle}\n            onCardExpand={this.handleCardExpand}\n            onUpdateQuantityField={this.updateQuantityIfChildVariants}\n            validation={this.state.validationStatus}\n            isDeleted={this.state.isDeleted}\n            {...this.props}\n            variant={this.props.variant}\n          />\n        );\n      }\n\n      return null;\n    }\n  }\n);\n\nregisterComponent(\"VariantForm\", VariantForm, wrapComponent);\n\nexport default compose(wrapComponent)(VariantForm);\n","import \"./templates/dashboard/inventory.html\";\nimport \"./templates/settings/settings.html\";\n","import { Meteor } from \"meteor/meteor\";\nimport { Template } from \"meteor/templating\";\nimport { Reaction, i18next } from \"/client/api\";\n\nTemplate.becomeSellerButton.events({\n  \"click [data-event-action='button-click-become-seller']\"() {\n    Meteor.call(\"shop/createShop\", Meteor.userId(), (error, response) => {\n      if (error) {\n        const errorMessage = i18next.t(\"marketplace.errorCannotCreateShop\", { defaultValue: \"Could not create shop for current user {{user}}\" });\n        return Alerts.toast(`${errorMessage} ${error}`, \"error\");\n      }\n\n      const success = i18next.t(\"marketplace.yourShopIsReady\", { defaultValue: \"Your shop is now ready!\" });\n      Reaction.setShopId(response.shopId);\n      return Alerts.toast(success, \"success\");\n    });\n  }\n});\n","import { Template } from \"meteor/templating\";\n\nTemplate.marketplaceMerchantSettings.helpers({\n  shown(enabled) {\n    if (enabled !== true) {\n      return \"hidden\";\n    }\n    return \"\";\n  }\n});\n","import { Template } from \"meteor/templating\";\nimport { AutoForm } from \"meteor/aldeed:autoform\";\nimport { Components } from \"@reactioncommerce/reaction-components\";\nimport { Reaction, i18next } from \"/client/api\";\nimport { Packages } from \"/lib/collections\";\nimport { MarketplacePackageConfig } from \"../../../lib/collections/schemas\";\n\n/**\n * marketplaceShopSettings helpers\n *\n */\nTemplate.marketplaceShopSettings.helpers({\n  MarketplacePackageConfig() {\n    return MarketplacePackageConfig;\n  },\n\n  packageData() {\n    return Packages.findOne({\n      name: \"reaction-marketplace\",\n      shopId: Reaction.getPrimaryShopId()\n    });\n  },\n  inviteOwner() {\n    return Components.InviteOwner;\n  }\n});\n\n/**\n * marketplaceSettings autoform alerts\n */\n\nAutoForm.hooks({\n  marketplaceOptionsForm: {\n    onSuccess() {\n      return Alerts.toast(\n        i18next.t(\"admin.settings.dashboardMarketplaceSettingsSaved\"),\n        \"success\"\n      );\n    },\n    onError(operation, error) {\n      return Alerts.toast(`${i18next.t(\"admin.settings.dashboardMarketplaceSettingsFailed\")} ${error}`, \"error\");\n    }\n  }\n});\n","import { Template } from \"meteor/templating\";\nimport { Reaction } from \"/lib/api\";\nimport { Router } from \"/client/api\";\nimport { Shops } from \"/lib/collections\";\n\nTemplate.shopSelect.helpers({\n  shops() {\n    if (Reaction.Subscriptions.PrimaryShop.ready() && Reaction.Subscriptions.MerchantShops.ready()) {\n      return Shops.find();\n    }\n  },\n\n  isActiveShop(shopId) {\n    return shopId === Router.getParam(\"shopId\") ? \"active\" : \"\";\n  },\n\n  currentShopName() {\n    const _id = Router.getParam(\"shopId\") || Reaction.getShopId(); // or prime shop\n    let shop;\n\n    if (_id) {\n      shop = Shops.findOne({\n        _id\n      });\n      if (shop) {\n        return shop.name;\n      }\n    }\n\n    return \"Shop Name\";\n  }\n});\n\nTemplate.shopSelect.events({\n  \"click .shop\"(event) {\n    event.preventDefault();\n    Router.go(\"shop\", {\n      shopId: this._id\n    });\n  }\n});\n","import { Meteor } from \"meteor/meteor\";\nimport { Template } from \"meteor/templating\";\nimport { Reaction } from \"/lib/api\";\nimport { i18next } from \"/client/api\";\nimport { Shops } from \"/lib/collections\";\n\nTemplate.stripeConnectSignupButton.events({\n  \"click [data-event-action='button-click-stripe-signup']\"() {\n    const shopId = Reaction.getShopId();\n    const primaryShopId = Reaction.getPrimaryShopId();\n    const primaryStripePackage = Reaction.getPackageSettingsWithOptions({\n      shopId: primaryShopId,\n      name: \"reaction-stripe\",\n      enabled: true\n    });\n\n    // eslint-disable-next-line\n    // debugger;\n    let clientId;\n\n    if (primaryStripePackage &&\n        primaryStripePackage.settings &&\n        primaryStripePackage.settings.public &&\n        typeof primaryStripePackage.settings.public.client_id === \"string\") {\n      // If the primaryshop has stripe enabled and set the client_id\n      clientId = primaryStripePackage.settings.public.client_id;\n    } else {\n      return Alerts.toast(`${i18next.t(\"admin.connect.stripeConnectNotEnabled\")}`, \"error\");\n    }\n\n    const shop = Shops.findOne({ _id: shopId });\n\n    if (!shop || !shop.workflow || shop.workflow.status !== \"active\") {\n      return Alerts.toast(`${i18next.t(\"admin.connect.shopNotActive\")}`, \"error\");\n    }\n\n    if (!shop.emails || !Array.isArray(shop.emails) || shop.emails.length === 0) {\n      return Alerts.toast(`${i18next.t(\"admin.connect.shopEmailNotConfigured\")}`, \"error\");\n    }\n\n    if (!shop.addressBook || !Array.isArray(shop.addressBook) || shop.addressBook.length === 0) {\n      return Alerts.toast(`${i18next.t(\"admin.connect.shopAddressNotConfigured\")}`, \"error\");\n    }\n\n    const { country } = shop.addressBook[0];\n    const phoneNumber = shop.addressBook[0].phone;\n    const businessName = shop.addressBook[0].company;\n    const streetAddress = shop.addressBook[0].address1;\n    const { city } = shop.addressBook[0];\n    const state = shop.addressBook[0].region;\n    const zip = shop.addressBook[0].postal;\n\n    const user = Meteor.user() || {};\n\n    const defaultEmail =\n      user.emails.find((email) => email.provides === \"default\");\n    const defaultEmailAddress = defaultEmail ? defaultEmail.address : \"\";\n\n    const [firstName, ...last] = user.name ? user.name.split(\" \") : [];\n    const lastName = last.join(\" \");\n\n    const stripeConnectAuthorizeUrl = `https://connect.stripe.com/oauth/authorize?response_type=code&state=${shopId}&client_id=${clientId}&scope=read_write`;\n    const autofillParams = `&stripe_user[email]=${defaultEmailAddress}&stripe_user[country]=${country}&stripe_user[phone_number]=${phoneNumber}&stripe_user[business_name]=${businessName}&stripe_user[street_address]=${streetAddress}&stripe_user[city]=${city}&stripe_user[state]=${state}&stripe_user[zip]=${zip}&stripe_user[first_name]=${firstName}&stripe_user[last_name]=${lastName}`; // eslint-disable-line max-len\n    window.open(stripeConnectAuthorizeUrl + autofillParams, \"_blank\");\n  }\n});\n","export { default as MarketplaceShops } from \"./marketplaceShops\";\nexport { default as MarketplaceShopTableCell } from \"./marketplaceShopTableCell\";\n","import { Meteor } from \"meteor/meteor\";\nimport React, { Component } from \"react\";\nimport { registerComponent, Components } from \"@reactioncommerce/reaction-components\";\nimport { i18next } from \"/client/api\";\nimport ReactionAlerts from \"/imports/plugins/core/layout/client/templates/layout/alerts/inlineAlerts\";\n\nclass InviteOwner extends Component {\n  constructor() {\n    super();\n    this.state = {\n      alertId: \"admin-invite-form\",\n      name: \"\",\n      email: \"\",\n      group: \"\",\n      isLoading: false\n    };\n  }\n\n  onChange = (event) => {\n    this.setState({ [event.target.name]: event.target.value });\n  }\n\n  removeAlert = (oldAlert) => this.setState({\n    alertArray: this.state.alertArray.filter((alert) => JSON.stringify(alert) === JSON.stringify(oldAlert))\n  });\n\n  handleSubmit = (event) => {\n    event.preventDefault();\n    this.setState({ isLoading: true });\n    const { name, email, alertId } = this.state;\n    const alertOptions = { placement: alertId, id: alertId, autoHide: 4000 };\n    const shopData = {}; // TODO: add optional shop data to the form (maybe just name?)\n\n    Meteor.call(\"accounts/inviteShopOwner\", { name, email }, shopData, (error, result) => {\n      let message = \"\";\n      if (error) {\n        let messageKey;\n        if (error.reason === \"Unable to send invitation email.\") {\n          messageKey = \"accountsUI.error.unableToSendInvitationEmail\";\n        } else if (error.reason !== \"\") {\n          message = error.reason;\n        } else {\n          messageKey = \"accountsUI.error.errorSendingEmail\";\n        }\n        ReactionAlerts.add(message, \"danger\", Object.assign({}, alertOptions, { i18nKey: messageKey }));\n      }\n\n      this.setState({ isLoading: false });\n\n      if (result) {\n        this.setState({ name: \"\", email: \"\" });\n        Alerts.toast(i18next.t(\"accountsUI.info.invitationSent\"), \"success\");\n      }\n    });\n  }\n\n  renderSpinnerButton() {\n    if (this.state.isLoading) {\n      return (\n        <div style={{ textAlign: \"center\" }}>\n          <i className=\"fa fa-spinner fa-spin\" />\n        </div>\n      );\n    }\n    return (\n      <Components.Button\n        status=\"primary\"\n        onClick={this.handleSubmit}\n        bezelStyle=\"solid\"\n        buttonType=\"submit\"\n        i18nKeyLabel=\"accountsUI.info.sendInvitation\"\n        label=\"Send Invitation\"\n      />\n    );\n  }\n\n  render() {\n    return (\n      <div className=\"panel panel-default admin-invite-form\">\n        <h4 style={{ textAlign: \"center\" }}>Invite Owner Form</h4>\n        <Components.Alerts placement={this.state.alertId} id={this.state.alertId} onAlertRemove={this.removeAlert} />\n        <div className=\"panel-body\">\n          <form className=\"invite-owner\" onSubmit={this.handleSubmit}>\n            <div className=\"form-group\">\n              <Components.TextField\n                i18nKeyLabel=\"accountsUI.name\"\n                label=\"Name\"\n                name=\"name\"\n                id=\"member-form-name\"\n                type=\"text\"\n                i18nKeyPlaceholder=\"admin.groupsInvite.name\"\n                value={this.state.name}\n                onChange={this.onChange}\n              />\n            </div>\n            <div className=\"form-group\">\n              <Components.TextField\n                i18nKeyLabel=\"accountsUI.email\"\n                label=\"Email\"\n                name=\"email\"\n                id=\"member-form-email\"\n                type=\"text\"\n                i18nKeyPlaceholder=\"admin.groupsInvite.email\"\n                value={this.state.email}\n                onChange={this.onChange}\n              />\n            </div>\n            <div className=\"form-group action-select\">\n              <div className=\"form-btns add-admin justify\">\n                {this.renderSpinnerButton()}\n              </div>\n            </div>\n          </form>\n        </div>\n      </div>\n    );\n  }\n}\n\nregisterComponent(\"InviteOwner\", InviteOwner);\n\nexport default InviteOwner;\n","import _ from \"lodash\";\nimport React, { Component } from \"react\";\nimport PropTypes from \"prop-types\";\nimport { Components, registerComponent } from \"@reactioncommerce/reaction-components\";\nimport { SHOP_WORKFLOW_STATUS_ACTIVE, SHOP_WORKFLOW_STATUS_DISABLED } from \"../../lib/constants\";\n\nclass MarketplaceShopTableCell extends Component {\n  static propTypes = {\n    data: PropTypes.object,\n    field: PropTypes.string,\n    onWorkflowChange: PropTypes.func\n  }\n\n  get shop() {\n    return this.props.data.original;\n  }\n\n  get status() {\n    if (this.shop.workflow) {\n      return this.shop.workflow.status;\n    }\n\n    return SHOP_WORKFLOW_STATUS_ACTIVE;\n  }\n\n  handleWorkflowChange = (event, value) => {\n    if (this.props.onWorkflowChange) {\n      // Get the shop id from the original document\n      const { _id } = this.shop;\n\n      this.props.onWorkflowChange(_id, value);\n    }\n  }\n\n  render() {\n    const { field, data } = this.props;\n\n    if (field === \"emails\" && Array.isArray(data.value) && data.value.length) {\n      return (\n        <div className=\"table-cell body\">\n          <span>{data.value[0].address}</span>\n        </div>\n      );\n    }\n\n    if (field === \"workflow\") {\n      return (\n        <Components.DropDownMenu\n          buttonElement={\n            <div className=\"col-dropdown\">\n              <Components.Button bezelStyle=\"solid\" label={_.startCase(this.status)}>\n                &nbsp;\n                <i className=\"fa fa-chevron-down\" />\n              </Components.Button>\n            </div>\n          }\n          onChange={this.handleWorkflowChange}\n          value={this.status}\n        >\n          <Components.MenuItem\n            label=\"Active\"\n            value={SHOP_WORKFLOW_STATUS_ACTIVE}\n          />\n          <Components.MenuItem\n            label=\"Disabled\"\n            value={SHOP_WORKFLOW_STATUS_DISABLED}\n          />\n        </Components.DropDownMenu>\n      );\n    }\n\n\n    return (\n      <div className=\"table-cell body\">\n        <span>{data.value}</span>\n      </div>\n    );\n  }\n}\n\nregisterComponent(\"MarketplaceShopTableCell\", MarketplaceShopTableCell);\n\nexport default MarketplaceShopTableCell;\n","import React, { Component } from \"react\";\nimport PropTypes from \"prop-types\";\nimport { Components } from \"@reactioncommerce/reaction-components\";\n\nclass MarketplaceShops extends Component {\n  static propTypes = {\n    onWorkflowChange: PropTypes.func,\n    shops: PropTypes.arrayOf(PropTypes.object)\n  }\n\n  renderShopsTable() {\n    const fields = [\"name\", \"emails\", \"workflow\"];\n\n    const columnMetadata = fields.map((field) => ({\n      Header: <Components.Translation i18nKey={`marketplaceShops.headers.${field}`} defaultValue={field} />,\n      accessor: field,\n      Cell: (data) => (\n        <Components.MarketplaceShopTableCell\n          data={data}\n          field={field}\n          onWorkflowChange={this.props.onWorkflowChange}\n        />\n      )\n    }));\n\n    return (\n      <Components.SortableTable\n        data={this.props.shops}\n        columnMetadata={columnMetadata}\n        filteredFields={fields}\n        filterType=\"none\"\n        showFilter={true}\n        isSortable={false}\n      />\n    );\n  }\n\n  render() {\n    return (\n      <div className=\"rui sortable-table-container\">\n        <div className=\"rui sortable-table\">\n          {this.renderShopsTable()}\n        </div>\n      </div>\n    );\n  }\n}\n\nexport default MarketplaceShops;\n","export { default as MarketplaceShopsContainer } from \"./marketplaceShops\";\n","import { composeWithTracker, registerComponent } from \"@reactioncommerce/reaction-components\";\nimport { Meteor } from \"meteor/meteor\";\nimport { Shops } from \"/lib/collections\";\nimport { Reaction } from \"/client/api\";\nimport MarketplaceShops from \"../components/marketplaceShops\";\n\nconst onWorkflowChange = (shopId, value) => {\n  Meteor.call(\"marketplace/updateShopWorkflow\", shopId, value);\n};\n\nconst composer = (props, onData) => {\n  // Subscribe to merchant shops and get all shops (excluding the primary shop) if subscription is ready\n  if (Meteor.subscribe(\"MerchantShops\").ready()) {\n    const shops = Shops.find({\n      _id: {\n        $nin: [Reaction.getPrimaryShopId()]\n      }\n    }).fetch();\n\n    onData(null, {\n      shops,\n      onWorkflowChange\n    });\n  }\n};\n\nregisterComponent(\"MarketplaceShops\", MarketplaceShops, composeWithTracker(composer));\n\nexport default composeWithTracker(composer)(MarketplaceShops);\n","import \"./templates/becomeSellerButton/becomeSellerButton.html\";\nimport \"./templates/becomeSellerButton/becomeSellerButton.js\";\n\nimport \"./templates/dashboard/settings.html\";\nimport \"./templates/dashboard/settings.js\";\n\nimport \"./templates/dashboard/merchant-settings.html\";\nimport \"./templates/dashboard/merchant-settings.js\";\n\nimport \"./templates/shops/shopSelect.html\";\nimport \"./templates/shops/shopSelect.js\";\n\nimport \"./templates/stripeConnectSignupButton/stripeConnectSignupButton.html\";\nimport \"./templates/stripeConnectSignupButton/stripeConnectSignupButton.js\";\n\nexport { default as InviteOwner } from \"./components/inviteOwner\";\n\nexport * from \"./components\";\nexport * from \"./containers\";\n","export * from \"./marketplace\";\n","import SimpleSchema from \"simpl-schema\";\nimport { check } from \"meteor/check\";\nimport { Tracker } from \"meteor/tracker\";\nimport { PackageConfig } from \"/lib/collections/schemas/registry\";\nimport { Shop } from \"/lib/collections/schemas/shops.js\";\nimport { registerSchema } from \"@reactioncommerce/schemas\";\n\nexport const ShopTypes = new SimpleSchema({\n  shopType: {\n    type: String,\n    defaultValue: \"merchant\"\n  },\n  enabled: {\n    type: Boolean,\n    defaultValue: false\n  }\n}, { check, tracker: Tracker });\n\nregisterSchema(\"ShopTypes\", ShopTypes);\n\nexport const EnabledPackagesByShopType = new SimpleSchema({\n  shopType: String,\n  enabledPackages: [String]\n}, { check, tracker: Tracker });\n\nregisterSchema(\"EnabledPackagesByShopType\", EnabledPackagesByShopType);\n\nexport const MarketplacePackageConfig = PackageConfig.clone().extend({\n  // Remove blackbox: true from settings obj\n  \"settings\": {\n    type: Object,\n    optional: true,\n    blackbox: false,\n    defaultValue: {}\n  },\n  \"settings.thirdPartyLogistics\": {\n    type: Object,\n    blackbox: true,\n    optional: true\n  },\n  \"settings.shops\": {\n    type: Object,\n    defaultValue: {}\n  },\n  \"settings.shops.enabledShopTypes\": {\n    type: Array,\n    defaultValue: [{\n      shopType: \"merchant\",\n      active: true\n    }, {\n      shopType: \"affiliate\",\n      active: false\n    }]\n  },\n  \"settings.shops.enabledShopTypes.$\": {\n    type: ShopTypes\n  },\n  \"settings.shops.enabledPackagesByShopTypes\": {\n    type: Array,\n    optional: true\n  },\n  \"settings.shops.enabledPackagesByShopTypes.$\": {\n    type: EnabledPackagesByShopType\n  },\n  \"settings.payoutMethod\": {\n    type: Object,\n    blackbox: true,\n    optional: true\n  },\n  \"settings.public\": {\n    type: Object,\n    optional: true,\n    defaultValue: {}\n  },\n  // if true, any user can create a shop\n  // if false, shop owners must be invited via Accounts panel\n  \"settings.public.allowMerchantSignup\": {\n    type: Boolean,\n    defaultValue: false\n  },\n  // Deprecated - no longer used in any marketplace considerations\n  // marketplace is enabled and disabled via the package\n  // seller signup is controlled by the allowMerchantSignup setting\n  \"settings.public.allowGuestSellers\": {\n    type: Boolean,\n    defaultValue: false\n  },\n  \"settings.public.marketplaceNakedRoutes\": {\n    type: Boolean,\n    defaultValue: true\n  },\n  // if true, permit each merchant to setup their own payment provider\n  \"settings.public.perMerchantPaymentProviders\": {\n    type: Boolean,\n    defaultValue: false\n  },\n  // if true, the cart should be different for each merchant\n  \"settings.public.merchantCart\": {\n    type: Boolean,\n    defaultValue: false\n  },\n  // if true, each merchant sets their own currency\n  // TODO: REMOVE in favor of merchantLocale\n  // \"settings.public.merchantCurrency\": {\n  //   type: Boolean,\n  //   defaultValue: false\n  // },\n  // if true, each merchant performs their own fulfillment\n  \"settings.public.merchantFulfillment\": {\n    type: Boolean,\n    defaultValue: true\n  },\n  // if true, each merchant sets their own language\n  // // TODO: REMOVE in favor of merchantLocale\n  // \"settings.public.merchantLanguage\": { // DEPRECATED\n  //   type: Boolean,\n  //   defaultValue: false\n  // },\n  // if true, each merchant sets their own locale, language, and currency\n  \"settings.public.merchantLocale\": {\n    type: Boolean,\n    defaultValue: false\n  },\n  // if true, permit each merchant to setup their own shipping rates\n  \"settings.public.merchantShippingRates\": {\n    type: Boolean,\n    defaultValue: false\n  },\n  // if true, each merchant sets their own currency\n  \"settings.public.merchantTheme\": {\n    type: Boolean,\n    defaultValue: false\n  }\n});\n\nregisterSchema(\"MarketplacePackageConfig\", MarketplacePackageConfig);\n\n/**\n * Seller Shop Schema\n */\nexport const SellerShop = Shop.clone().extend({\n  stripeConnectSettings: {\n    type: Object,\n    optional: true\n  }\n});\n\nregisterSchema(\"SellerShop\", SellerShop);\n","\nexport const SHOP_WORKFLOW_STATUS_ACTIVE = \"active\";\nexport const SHOP_WORKFLOW_STATUS_DISABLED = \"disabled\";\nexport const SHOP_WORKFLOW_STATUS_ARCHIVED = \"archived\";\n","import { $ } from \"meteor/jquery\";\nimport { Meteor } from \"meteor/meteor\";\nimport { Template } from \"meteor/templating\";\nimport { ReactiveDict } from \"meteor/reactive-dict\";\nimport { AutoForm } from \"meteor/aldeed:autoform\";\nimport { Shipping } from \"/lib/collections\";\nimport { i18next } from \"/client/api\";\nimport { IconButton, Loading, SortableTable } from \"/imports/plugins/core/ui/client/components\";\n\nTemplate.shippingRatesSettings.onCreated(function () {\n  this.autorun(() => {\n    this.subscribe(\"Shipping\");\n  });\n\n  this.state = new ReactiveDict();\n  this.state.setDefault({\n    isEditing: false,\n    editingId: null\n  });\n});\n\nTemplate.shippingRatesSettings.helpers({\n  editButton() {\n    const instance = Template.instance();\n    const { state } = instance;\n    const isEditing = state.equals(\"isEditing\", true);\n    let editingId = state.get(\"editingId\");\n    // toggle edit state\n    if (!isEditing) {\n      editingId = null;\n    }\n    // return icon\n    return {\n      component: IconButton,\n      icon: \"fa fa-plus\",\n      onIcon: \"fa fa-pencil\",\n      toggle: true,\n      toggleOn: isEditing,\n      style: {\n        position: \"relative\",\n        top: \"-25px\",\n        right: \"8px\"\n      },\n      onClick() {\n        // remove active rows from grid\n        $(\".shipping-grid-row\").removeClass(\"active\");\n        return state.set({\n          isEditing: !isEditing,\n          editingId\n        });\n      }\n    };\n  },\n  shippingGrid() {\n    const filteredFields = [\"name\", \"group\", \"label\", \"rate\"];\n    const noDataMessage = i18next.t(\"admin.shippingSettings.noRatesFound\");\n    const instance = Template.instance();\n\n    // griddle helper to select row\n    function editRow(options) {\n      const currentId = instance.state.get(\"editingId\");\n      // isEditing is shipping rate object\n      instance.state.set(\"isEditing\", options.props.data);\n      instance.state.set(\"editingId\", options.props.data._id);\n      // toggle edit mode clicking on same row\n      if (currentId === options.props.data._id) {\n        instance.state.set(\"isEditing\", null);\n        instance.state.set(\"editingId\", null);\n      }\n    }\n\n    // add shipping-grid-row class\n    const customRowMetaData = {\n      bodyCssClassName: () => \"shipping-grid-row\"\n    };\n\n    // add i18n handling to headers\n    const customColumnMetadata = [];\n    filteredFields.forEach((field) => {\n      const columnMeta = {\n        accessor: field,\n        Header: i18next.t(`admin.shippingGrid.${field}`)\n      };\n      customColumnMetadata.push(columnMeta);\n    });\n\n    // filter and extract shipping methods\n    // from flat rate shipping provider\n    function transform(results) {\n      const result = [];\n      for (const method of results) {\n        if (method.provider && method.provider.name === \"flatRates\") {\n          result.push(method.methods);\n        }\n      }\n      return result[0];\n    }\n\n    // return shipping Grid\n    return {\n      component: SortableTable,\n      publication: \"Shipping\",\n      transform,\n      collection: Shipping,\n      matchingResultsCount: \"shipping-count\",\n      showFilter: true,\n      rowMetadata: customRowMetaData,\n      filteredFields,\n      columns: filteredFields,\n      noDataMessage,\n      onRowClick: editRow,\n      columnMetadata: customColumnMetadata,\n      externalLoadingComponent: Loading\n    };\n  },\n\n  instance() {\n    const instance = Template.instance();\n    return instance;\n  },\n\n  shippingRate() {\n    const instance = Template.instance();\n    const id = instance.state.get(\"editingId\");\n    const providerRates = Shipping.findOne({ \"provider.name\": \"flatRates\" }) || {};\n    let rate = {};\n    if (providerRates && providerRates.methods) {\n      if (id) {\n        for (const method of providerRates.methods) {\n          if (method._id === id) {\n            rate = method;\n          }\n        }\n      } else {\n        // a little trick to provide _id for insert\n        rate._id = providerRates._id;\n      }\n    }\n    return rate;\n  }\n});\n\n//\n// on submit lets clear the form state\n//\nTemplate.shippingRatesSettings.events({\n  \"submit #shipping-rates-update-form\"() {\n    const instance = Template.instance();\n    instance.state.set({\n      isEditing: false,\n      editingId: null\n    });\n  },\n  \"submit #shipping-rates-insert-form\"() {\n    const instance = Template.instance();\n    instance.state.set({\n      isEditing: true,\n      editingId: null\n    });\n  },\n  \"click .cancel, .shipping-grid-row .active\"() {\n    const instance = Template.instance();\n    // remove active rows from grid\n    instance.state.set({\n      isEditing: false,\n      editingId: null\n    });\n    // ugly hack\n    $(\".shipping-grid-row\").removeClass(\"active\");\n  },\n  \"click .delete\"() {\n    const confirmTitle = i18next.t(\"admin.shippingSettings.confirmRateDelete\");\n    const confirmButtonText = i18next.t(\"app.delete\");\n    const instance = Template.instance();\n    const id = instance.state.get(\"editingId\");\n    // confirm delete\n    Alerts.alert({\n      title: confirmTitle,\n      type: \"warning\",\n      showCancelButton: true,\n      confirmButtonText\n    }, (isConfirm) => {\n      if (isConfirm) {\n        if (id) {\n          Meteor.call(\"shipping/rates/delete\", id);\n          instance.state.set({\n            isEditing: false,\n            editingId: null\n          });\n        }\n      }\n    });\n  },\n  \"click .shipping-grid-row\"(event) {\n    // toggle all rows off, then add our active row\n    $(\".shipping-grid-row\").removeClass(\"active\");\n    Template.instance().$(event.currentTarget).addClass(\"active\");\n  }\n});\n\n//\n// Hooks for update and insert forms\n//\nAutoForm.hooks({\n  \"shipping-rates-update-form\": {\n    onSuccess() {\n      return Alerts.toast(i18next.t(\"admin.shippingSettings.rateSaved\"), \"success\");\n    },\n    onError(operation, error) {\n      return Alerts.toast(`${i18next.t(\"admin.shippingSettings.rateFailed\")} ${error}`, \"error\");\n    }\n  },\n  \"shipping-rates-insert-form\": {\n    onSuccess() {\n      return Alerts.toast(i18next.t(\"admin.shippingSettings.rateSaved\"), \"success\");\n    },\n    onError(operation, error) {\n      return Alerts.toast(`${i18next.t(\"admin.shippingSettings.rateFailed\")} ${error}`, \"error\");\n    }\n  }\n});\n","import \"./settings/rates.html\";\nimport \"./settings/rates.js\";\n","import \"./templates\";\n","/* eslint-disable */\n//\n// TODO facebook social templates need review to ensure proper use of reaction layouts\n//\nTemplate.facebook.onRendered(function () {\n  let ref;\n  if (this.data.placement === \"footer\" && (((ref = this.data.apps.facebook) !== null ? ref.profilePage : void 0) !== null)) { // eslint-disable-line no-cond-assign\n    return this.$(\".facebook-share\").attr(\"href\", this.data.apps.facebook.profilePage);\n  }\n  //\n  // autorun and insert fb\n  //\n  this.autorun(function () {\n    let media;\n    let ref1;\n    const template = Template.instance();\n    const data = Template.currentData();\n    $('meta[property^=\"og:\"]').remove();\n    const description = ((ref1 = data.apps.facebook) !== null ? ref1.description : void 0) || $(\".product-detail-field.description\").text();\n    let url = data.url || location.origin + location.pathname;\n    let title = data.title || document.title;\n    $(\"<meta>\", {\n      property: \"og:type\",\n      content: \"article\"\n    }).appendTo(\"head\");\n    $(\"<meta>\", {\n      property: \"og:site_name\",\n      content: location.hostname\n    }).appendTo(\"head\");\n    $(\"<meta>\", {\n      property: \"og:url\",\n      content: url\n    }).appendTo(\"head\");\n    $(\"<meta>\", {\n      property: \"og:title\",\n      content: title\n    }).appendTo(\"head\");\n    $(\"<meta>\", {\n      property: \"og:description\",\n      content: description\n    }).appendTo(\"head\");\n    if (data.media) {\n      if (!/^http(s?):\\/\\/+/.test(data.media)) {\n        media = location.origin + data.media;\n      }\n      $(\"<meta>\", {\n        property: \"og:image\",\n        content: media\n      }).appendTo(\"head\");\n    }\n    /* eslint no-unused-vars: 1 */\n    //\n    // TODO review Template.facebook.onRendered for FB response\n    // believe this object is declared by FB so the\n    // lint error should be ignored\n    //\n    if (data.apps.facebook.appId !== null) {\n      return template.$(\".facebook-share\").click(function (e) {\n        e.preventDefault();\n        return FB.ui({\n          method: \"share\",\n          display: \"popup\",\n          href: url\n        }, function () {});\n      });\n    }\n    // else return\n    url = encodeURIComponent(url);\n    title = encodeURIComponent(title);\n    const base = \"https://www.facebook.com/sharer/sharer.php\";\n    const summary = encodeURIComponent(description);\n    let href = base + \"?s=100&p[url]=\" + url + \"&p[title]=\" + title + \"&p[summary]=\" + summary;\n    if (data.media) {\n      href += \"&p[images][0]=\" + encodeURIComponent(media);\n    }\n    return template.$(\".facebook-share\").attr(\"href\", href);\n  });\n});\n\nTemplate.facebook.onCreated(function () {\n  const apps = Template.currentData().apps;\n  const isEnabled = \"facebook\" in apps && apps.facebook.enabled;\n  if (isEnabled) {\n    $('<div id=\"fb-root\"></div>').appendTo(\"body\");\n    window.fbAsyncInit = function () {\n      return FB.init({\n        appId: apps.facebook.appId,\n        xfbml: true,\n        version: \"v2.1\"\n      });\n    };\n    (function (d, s, id) {\n      let js = void 0;\n      const fjs = d.getElementsByTagName(s)[0];\n      if (d.getElementById(id)) {\n        return;\n      }\n      js = d.createElement(s);\n      js.id = id;\n      js.src = \"//connect.facebook.net/en_US/sdk.js\";\n      fjs.parentNode.insertBefore(js, fjs);\n    })(document, \"script\", \"facebook-jssdk\");\n  }\n  return isEnabled;\n});\n","/* eslint-disable */\n//\n// TODO google social templates need review to ensure proper use of reaction layouts\n//\nTemplate.googleplus.onRendered(function () {\n  let ref;\n  if (this.data.placement === \"footer\" && (((ref = this.data.apps.googleplus) !== null ? ref.profilePage : void 0) !== null)) {  // eslint-disable-line\n    return this.$(\".googleplus-share\").attr(\"href\", this.data.apps.googleplus.profilePage);\n  }\n  return this.autorun(function () {\n    let media;\n    let ref1;\n    let ref2;\n    const template = Template.instance();\n    const data = Template.currentData();\n    $(\"meta[itemscope]\").remove();\n    const description = ((ref1 = data.apps.googleplus) !== null ? ref1.description : void 0) || $(\".product-detail-field.description\").text(); // eslint-disable-line\n    const url = data.url || location.origin + location.pathname;\n    // const title = data.title;\n    const itemtype = ((ref2 = data.apps.googleplus) !== null ? ref2.itemtype : void 0) || \"Article\";\n    $(\"html\").attr(\"itemscope\", \"\").attr(\"itemtype\", \"http://schema.org/\" + itemtype);\n    $(\"<meta>\", {\n      itemprop: \"name\",\n      content: location.hostname\n    }).appendTo(\"head\");\n    $(\"<meta>\", {\n      itemprop: \"url\",\n      content: url\n    }).appendTo(\"head\");\n    $(\"<meta>\", {\n      itemprop: \"description\",\n      content: description\n    }).appendTo(\"head\");\n    if (data.media) {\n      if (!/^http(s?):\\/\\/+/.test(data.media)) {\n        media = location.origin + data.media;\n      }\n      $(\"<meta>\", {\n        itemprop: \"image\",\n        content: media\n      }).appendTo(\"head\");\n    }\n    const href = \"https://plus.google.com/share?url=\" + url;\n    return template.$(\".googleplus-share\").attr(\"href\", href);\n  });\n});\n\nTemplate.googleplus.events({\n  \"click a\": function (event) {\n    event.preventDefault();\n    return window.open(Template.instance().$(\".googleplus-share\").attr(\"href\"), \"googleplus_window\", \"width=750, height=650\");\n  }\n});\n","/* eslint-disable */\n//\n// TODO pinterest social templates need review to ensure proper use of reaction layouts\n//\nTemplate.pinterest.onRendered(function () {\n  let ref;\n  if (this.data.placement === \"footer\" && (((ref = this.data.apps.pinterest) !== null ? ref.profilePage : void 0) !== null)) {\n    return this.$(\".pinterest-share\").attr(\"href\", this.data.apps.pinterest.profilePage);\n  }\n  /*\n    Pinterest requires three parameters:\n      url: desired url\n      media: image being shared\n      description: image description\n   */\n  return this.autorun(function () {\n    let media;\n    let ref1;\n    const template = Template.instance();\n    const data = Template.currentData();\n    const preferredUrl = data.url || location.origin + location.pathname;\n    const url = encodeURIComponent(preferredUrl);\n    if (data.media) {\n      if (!/^http(s?):\\/\\/+/.test(data.media)) {\n        media = location.origin + data.media;\n      }\n    }\n    const description = encodeURIComponent(((ref1 = data.apps.pinterest) !== null ? ref1.description : void 0) || $(\".product-detail-field.description\").text());\n    const href = \"http://www.pinterest.com/pin/create/button/?url=\" + url + \"&media=\" + media + \"&description=\" + description;\n    return template.$(\".pinterest-share\").attr(\"href\", href);\n  });\n});\n\nTemplate.pinterest.events({\n  \"click a\": function (event) {\n    event.preventDefault();\n    return window.open(Template.instance().$(\".pinterest-share\").attr(\"href\"), \"pinterest_window\", \"width=750, height=650\");\n  }\n});\n","/* eslint-disable */\n//\n// TODO twitter social templates need review to ensure proper use of reaction layouts\n//\nTemplate.twitter.onRendered(function () {\n  let ref;\n  if (this.data.placement === \"footer\" && (((ref = this.data.apps.twitter) !== null ? ref.profilePage : void 0) !== null)) {\n    return this.$(\".twitter-share\").attr(\"href\", this.data.apps.twitter.profilePage);\n  }\n  //\n  // return twitter\n  //\n  return this.autorun(function () {\n    const template = Template.instance();\n    const data = Template.currentData();\n    $('meta[property^=\"twitter:\"]').remove();\n    $(\"<meta>\", {\n      property: \"twitter:card\",\n      content: \"summary\"\n    }).appendTo(\"head\");\n    if (data.apps.twitter.username) {\n      $(\"<meta>\", {\n        property: \"twitter:creator\",\n        content: data.apps.twitter.username\n      }).appendTo(\"head\");\n    }\n    let ref1;\n    const description = ((ref1 = data.apps.twitter) !== null ? ref1.description : void 0) || $(\".product-detail-field.description\").text();\n    $(\"<meta>\", {\n      property: \"twitter:url\",\n      content: location.origin + location.pathname\n    }).appendTo(\"head\");\n    $(\"<meta>\", {\n      property: \"twitter:title\",\n      content: \"\" + data.title\n    }).appendTo(\"head\");\n    $(\"<meta>\", {\n      property: \"twitter:description\",\n      content: description\n    }).appendTo(\"head\");\n    if (data.media) {\n      if (!/^http(s?):\\/\\/+/.test(data.media)) {\n        // let media = location.origin + data.media;\n        $(\"<meta>\", {\n          property: \"twitter:image\",\n          content: data.media\n        }).appendTo(\"head\");\n      }\n    }\n    const preferredUrl = data.url || location.origin + location.pathname;\n    const url = encodeURIComponent(preferredUrl);\n    const base = \"https://twitter.com/intent/tweet\";\n    let ref2;\n    const text = encodeURIComponent(((ref2 = data.apps.twitter) !== null ? ref2.title : void 0) || data.title);\n    let href = base + \"?url=\" + url + \"&text=\" + text;\n    if (data.apps.twitter.username) {\n      href += \"&via=\" + data.apps.twitter.username;\n    }\n    return template.$(\".twitter-share\").attr(\"href\", href);\n  });\n});\n\nTemplate.twitter.events({\n  \"click a\": function (event) {\n    event.preventDefault();\n    return window.open(Template.instance().$(\".twitter-share\").attr(\"href\"), \"twitter_window\", \"width=750, height=650\");\n  }\n});\n","import { Template } from \"meteor/templating\";\nimport SocialSettingsContainer from \"../../containers/socialSettingsContainer\";\n\nTemplate.socialSettings.helpers({\n  SocialSettingsComponent() {\n    return {\n      component: SocialSettingsContainer\n    };\n  }\n});\n","import { merge } from \"lodash\";\nimport { Template } from \"meteor/templating\";\nimport { Reaction } from \"/client/api\";\nimport { Packages } from \"/lib/collections\";\n\nTemplate.reactionSocial.onCreated(function () {\n  const self = this;\n  return this.autorun(() => {\n    const subscription = Reaction.Subscriptions.Packages;\n    if (subscription.ready()) {\n      const socialSettings = Packages.findOne({\n        name: \"reaction-social\"\n      });\n      if (socialSettings) {\n        self.socialSettings = socialSettings.settings.public;\n      }\n    }\n  });\n});\n\nTemplate.reactionSocial.helpers({\n  settings() {\n    const template = Template.instance();\n    return template && template.socialSettings;\n  },\n  socialTemplates() {\n    const templates = [];\n    const template = Template.instance();\n\n    if (template && template.socialSettings) {\n      let { socialSettings } = template;\n      socialSettings = merge({}, socialSettings, Template.currentData());\n\n      if (socialSettings.appsOrder) {\n        const { appsOrder } = socialSettings;\n\n        for (let i = 0; i < appsOrder.length; i += 1) {\n          const app = appsOrder[i];\n\n          if (typeof socialSettings.apps[app] === \"object\" &&\n            socialSettings.apps[app].enabled) {\n            templates.push(app);\n          }\n        }\n      }\n    }\n    return templates;\n  }\n});\n","/* global FB, data */\nimport React, { Component } from \"react\";\nimport PropTypes from \"prop-types\";\nimport Helmet from \"react-helmet\";\nimport classnames from \"classnames\";\nimport { $ } from \"meteor/jquery\";\nimport { Components } from \"@reactioncommerce/reaction-components\";\n\nexport function getOpenGraphMeta(props) {\n  const url = props.url || location.origin + location.pathname;\n  const title = props.title || document.title;\n  const { description } = props.settings;\n\n  const meta = [\n    { property: \"og:type\", content: \"article\" },\n    { property: \"og:site_name\", content: location.hostname },\n    { property: \"og:url\", content: url },\n    { property: \"og:title\", content: title },\n    { property: \"og:description\", content: description }\n  ];\n\n  if (props.media) {\n    let media;\n    if (!/^http(s?):\\/\\/+/.test(data.media)) {\n      media = location.origin + data.media;\n    }\n\n    meta.push({\n      property: \"og:image\",\n      content: media\n    });\n  }\n\n  return meta;\n}\n\nclass FacebookSocialButton extends Component {\n  componentDidMount() {\n    /* eslint-disable wrap-iife */\n    if (window && document) {\n      $('<div id=\"fb-root\"></div>').appendTo(\"body\");\n\n      window.fbAsyncInit = () => FB.init({\n        appId: this.props.settings.appId,\n        xfbml: true,\n        version: this.props.settings.version || \"v2.7\"\n      });\n      (function (d, s, id) {\n        const fjs = d.getElementsByTagName(s)[0];\n        if (d.getElementById(id)) {\n          return;\n        }\n        const js = d.createElement(s);\n        js.id = id;\n        js.src = \"//connect.facebook.net/en_US/sdk.js\";\n        fjs.parentNode.insertBefore(js, fjs);\n      })(document, \"script\", \"facebook-jssdk\");\n    }\n    /* eslint-enable wrap-iife */\n  }\n\n  handleClick = (event) => {\n    event.preventDefault();\n\n    if (window.FB) {\n      window.FB.ui({\n        method: \"share\",\n        display: \"popup\",\n        href: this.props.url\n      });\n    }\n  }\n\n  renderText() {\n    if (this.props.showText) {\n      return (\n        <Components.Translation defaultValue=\"Share on Facebook\" i18nKey=\"social.shareOnFacebook\" />\n      );\n    }\n\n    return null;\n  }\n\n  render() {\n    const iconClassNames = classnames({\n      \"fa\": true,\n      \"fa-facebook\": this.props.altIcon !== true,\n      \"fa-facebook-alt\": this.props.altIcon,\n      [this.props.size]: this.props.size\n    });\n\n    return (\n      <Components.Button\n        className=\"btn btn-flat facebook-share\"\n        aria-label=\"Share to Facebook\"\n        onClick={this.handleClick}\n      >\n        <Helmet\n          meta={getOpenGraphMeta(this.props)}\n        />\n        <i className={iconClassNames} />\n        {this.renderText()}\n      </Components.Button>\n    );\n  }\n}\n\nFacebookSocialButton.propTypes = {\n  altIcon: PropTypes.string,\n  media: PropTypes.string,\n  settings: PropTypes.object,\n  showText: PropTypes.bool,\n  size: PropTypes.string,\n  url: PropTypes.string\n};\n\nexport default FacebookSocialButton;\n","import React, { Component } from \"react\";\nimport PropTypes from \"prop-types\";\nimport Helmet from \"react-helmet\";\nimport classnames from \"classnames\";\nimport { Components } from \"@reactioncommerce/reaction-components\";\n\n\nexport function getGooglePlusMeta(props) {\n  const preferredUrl = props.url || location.origin + location.pathname;\n  const url = encodeURIComponent(preferredUrl);\n  const { description } = props.settings;\n\n  const meta = [\n    { property: \"itemprop:name\", content: location.hostname },\n    { property: \"itemprop:url\", content: url },\n    { property: \"itemprop:description\", content: description }\n  ];\n\n  if (props.media) {\n    let media;\n\n    if (!/^http(s?):\\/\\/+/.test(props.media)) {\n      media = location.origin + props.media;\n    }\n\n    meta.push({\n      property: \"itemprop:image\",\n      content: media\n    });\n  }\n  return meta;\n}\n\nclass GooglePlusSocialButton extends Component {\n  handleClick = (event) => {\n    event.preventDefault();\n\n    if (window) {\n      window.open(this.url, \"googleplus_window\", \"width=750, height=650\");\n    }\n  }\n\n  get url() {\n    const { url, settings } = this.props;\n    const { description } = this.props.settings;\n    const preferredUrl = url || location.origin + location.pathname;\n    const encodedUrl = encodeURIComponent(preferredUrl);\n    let href = `https://plus.google.com/share?url=${encodedUrl}`;\n    if (settings.description) {\n      href += `&text=${description}`;\n    }\n    return href;\n  }\n\n  renderText() {\n    if (this.props.showText) {\n      return (\n        <Components.Translation defaultValue=\"Share on GooglePlus\" i18nKey=\"social.shareOnGooglePlus\" />\n      );\n    }\n    return null;\n  }\n\n  render() {\n    const iconClassNames = classnames({\n      \"fa\": true,\n      \"fa-google-plus\": this.props.altIcon !== true,\n      \"fa-google-plus-alt\": this.props.altIcon,\n      [this.props.size]: this.props.size\n    });\n\n    return (\n      <Components.Button\n        className=\"btn btn-flat googleplus-share\"\n        aria-label=\"Share to Google Plus\"\n        onClick={this.handleClick}\n      >\n        <Helmet\n          meta={getGooglePlusMeta(this.props)}\n        />\n        <i className={iconClassNames} />\n        {this.renderText()}\n      </Components.Button>\n    );\n  }\n}\n\nGooglePlusSocialButton.propTypes = {\n  altIcon: PropTypes.bool,\n  settings: PropTypes.object,\n  showText: PropTypes.bool,\n  size: PropTypes.string,\n  url: PropTypes.string\n};\n\nexport default GooglePlusSocialButton;\n","export { default as SocialButtons } from \"./socialButtons\";\nexport { default as Facebook } from \"./facebook\";\nexport { default as Twitter } from \"./twitter\";\nexport { default as GooglePlus } from \"./googleplus\";\nexport { default as Pinterest } from \"./pinterest\";\nexport { default as SocialSettings } from \"./settings\";\n","import React, { Component } from \"react\";\nimport PropTypes from \"prop-types\";\nimport classnames from \"classnames\";\nimport { Components } from \"@reactioncommerce/reaction-components\";\n\nclass PinterestSocialButton extends Component {\n  handleClick = (event) => {\n    event.preventDefault();\n\n    if (window) {\n      window.open(this.url, \"pinterest_window\", \"width=750, height=650\");\n    }\n  }\n\n  get url() {\n    const { props } = this;\n    const preferredUrl = props.url || location.origin + location.pathname;\n    const url = encodeURIComponent(preferredUrl);\n    const { description } = props.settings;\n    const baseUrl = \"http://www.pinterest.com/pin/create/button/\";\n    let { media } = props.settings;\n\n    if (props.settings.media) {\n      if (!/^http(s?):\\/\\/+/.test(props.settings.media)) {\n        media = location.origin + props.settings.media;\n      }\n    }\n\n    const href = `${baseUrl}?url=${url}&media=${media}&description=${description}`;\n\n    return href;\n  }\n\n  renderText() {\n    if (this.props.showText) {\n      return (\n        <Components.Translation defaultValue=\"Share on Pinterest\" i18nKey=\"social.shareOnPinterest\" />\n      );\n    }\n    return null;\n  }\n\n  render() {\n    const iconClassNames = classnames({\n      \"fa\": true,\n      \"fa-pinterest\": this.props.altIcon !== true,\n      \"fa-pinterest-alt\": this.props.altIcon,\n      [this.props.size]: this.props.size\n    });\n\n    return (\n      <Components.Button\n        className=\"btn btn-flat pinterest-share\"\n        aria-label=\"Share to Pinterest\"\n        onClick={this.handleClick}\n      >\n        <i className={iconClassNames} />\n        {this.renderText()}\n      </Components.Button>\n    );\n  }\n}\n\nPinterestSocialButton.propTypes = {\n  altIcon: PropTypes.bool,\n  settings: PropTypes.object,\n  showText: PropTypes.bool,\n  size: PropTypes.string\n};\n\nexport default PinterestSocialButton;\n","import React, { Component } from \"react\";\nimport PropTypes from \"prop-types\";\nimport {\n  CardGroup,\n  SettingsCard,\n  Form\n} from \"/imports/plugins/core/ui/client/components\";\nimport { SocialPackageConfig } from \"/lib/collections/schemas/social\";\n\nconst socialProviders = [\n  {\n    name: \"facebook\",\n    icon: \"fa fa-facebook\",\n    fields: [\"appId\", \"appSecret\", \"profilePage\"]\n  },\n  {\n    name: \"twitter\",\n    icon: \"fa fa-twitter\",\n    fields: [\"username\", \"profilePage\"]\n  },\n  {\n    name: \"pinterest\",\n    icon: \"fa fa-pinterest\",\n    fields: [\"profilePage\"]\n  },\n  {\n    name: \"googleplus\",\n    icon: \"fa fa-google-plus\",\n    fields: [\"profilePage\"]\n  }\n];\n\nclass SocialSettings extends Component {\n  static propTypes = {\n    onSettingChange: PropTypes.func,\n    onSettingEnableChange: PropTypes.func,\n    onSettingExpand: PropTypes.func,\n    onSettingsSave: PropTypes.func,\n    packageData: PropTypes.object,\n    preferences: PropTypes.object,\n    providers: PropTypes.arrayOf(PropTypes.string),\n    socialSettings: PropTypes.object\n  }\n\n  getSchemaForField(provider, field) {\n    return SocialPackageConfig.getDefinition(`settings.public.apps.${provider}.${field}`);\n  }\n\n  handleSettingChange = (event, value, name) => {\n    if (typeof this.props.onSettingChange === \"function\") {\n      const parts = name.split(\".\");\n      this.props.onSettingChange(parts[0], parts[1], value);\n    }\n  }\n\n  handleSubmit = (event, data, formName) => {\n    if (typeof this.props.onSettingsSave === \"function\") {\n      this.props.onSettingsSave(formName, data.doc);\n    }\n  }\n\n  renderCards() {\n    if (Array.isArray(socialProviders)) {\n      return socialProviders.map((provider, index) => {\n        const doc = {\n          settings: {\n            ...this.props.packageData.settings\n          }\n        };\n\n        return (\n          <SettingsCard\n            key={index}\n            i18nKeyTitle={`admin.settings.public.apps.${provider.name}.title`}\n            expandable={true}\n            onExpand={this.props.onSettingExpand}\n            expanded={this.props.preferences[provider.name]}\n            title={provider.name}\n            name={provider.name}\n            enabled={this.props.socialSettings.settings.apps[provider.name].enabled}\n            icon={provider.icon}\n            onSwitchChange={this.props.onSettingEnableChange}\n          >\n            <Form\n              schema={SocialPackageConfig}\n              doc={doc}\n              docPath={`settings.public.apps.${provider.name}`}\n              hideFields={[\n                `settings.public.apps.${provider.name}.enabled`\n              ]}\n              name={`settings.public.apps.${provider.name}`}\n              onSubmit={this.handleSubmit}\n            />\n          </SettingsCard>\n        );\n      });\n    }\n\n    return null;\n  }\n\n  render() {\n    return (\n      <CardGroup>\n        {this.renderCards()}\n      </CardGroup>\n    );\n  }\n}\n\nexport default SocialSettings;\n","import React, { Component } from \"react\";\nimport PropTypes from \"prop-types\";\nimport { Facebook, Twitter, GooglePlus, Pinterest } from \"./\";\n\nexport function getProviderComponentByName(providerName) {\n  switch (providerName) {\n    case \"facebook\":\n      return Facebook;\n    case \"twitter\":\n      return Twitter;\n    case \"googleplus\":\n      return GooglePlus;\n    case \"pinterest\":\n      return Pinterest;\n    default:\n      return null;\n  }\n}\n\n\nclass SocialButtons extends Component {\n  buttonSettngs(provider) {\n    return this.props.settings.apps[provider];\n  }\n\n  renderEditButton() {\n    if (this.props.editButton) {\n      return (\n        <span className=\"social-buttons-controls\">\n          {this.props.editButton}\n        </span>\n      );\n    }\n\n    return null;\n  }\n\n  renderButtons() {\n    if (this.props.providers) {\n      return this.props.providers.map((provider) => {\n        const buttonComponent = getProviderComponentByName(provider);\n\n        if (buttonComponent) {\n          const component = React.createElement(\n            getProviderComponentByName(provider),\n            {\n              key: provider,\n              title: this.props.title,\n              description: this.props.description,\n              url: this.props.url,\n              settings: this.buttonSettngs(provider)\n            }\n          );\n\n          return component;\n        }\n        return null;\n      });\n    }\n    return null;\n  }\n\n  render() {\n    return (\n      <div className=\"rui social-buttons\">\n        {this.renderButtons()}\n        {this.renderEditButton()}\n      </div>\n    );\n  }\n}\n\nSocialButtons.propTypes = {\n  description: PropTypes.string,\n  editButton: PropTypes.node,\n  providers: PropTypes.arrayOf(PropTypes.string),\n  settings: PropTypes.shape({\n    apps: PropTypes.object\n  }),\n  title: PropTypes.string,\n  url: PropTypes.string\n};\n\nexport default SocialButtons;\n","import React, { Component } from \"react\";\nimport PropTypes from \"prop-types\";\nimport Helmet from \"react-helmet\";\nimport classnames from \"classnames\";\nimport { Components } from \"@reactioncommerce/reaction-components\";\n\n\nexport function getTwitterMeta(props) {\n  const title = props.title || document.title;\n  const preferredUrl = props.url || location.origin + location.pathname;\n  const url = encodeURIComponent(preferredUrl);\n  const { username, description } = props.settings;\n\n  const meta = [\n    { property: \"twitter:card\", content: \"summary\" },\n    { property: \"twitter:creator\", content: username },\n    { property: \"twitter:url\", content: url },\n    { property: \"twitter:title\", content: title },\n    { property: \"twitter:description\", content: description }\n  ];\n\n  if (props.media) {\n    let media;\n\n    if (!/^http(s?):\\/\\/+/.test(props.media)) {\n      media = location.origin + props.media;\n    }\n\n    meta.push({\n      property: \"twitter:image\",\n      content: media\n    });\n  }\n}\n\nclass TwitterSocialButton extends Component {\n  handleClick = (event) => {\n    event.preventDefault();\n\n    if (window) {\n      window.open(this.url, \"twitter_window\", \"width=750, height=650\");\n    }\n  }\n\n  get url() {\n    const { props } = this;\n    const preferredUrl = props.url || location.origin + location.pathname;\n    const url = encodeURIComponent(preferredUrl);\n    const base = \"https://twitter.com/intent/tweet\";\n    const { username, description } = props.settings;\n\n    let href = `${base}?url=${url}&text=${description}`;\n\n    if (username) {\n      href += `&via=${username}`;\n    }\n\n    return href;\n  }\n\n  renderText() {\n    if (this.props.showText) {\n      return (\n        <Components.Translation defaultValue=\"Share on Twitter\" i18nKey=\"social.shareOnTwitter\" />\n      );\n    }\n    return null;\n  }\n\n  render() {\n    const iconClassNames = classnames({\n      \"fa\": true,\n      \"fa-twitter\": this.props.altIcon !== true,\n      \"fa-twitter-alt\": this.props.altIcon,\n      [this.props.size]: this.props.size\n    });\n\n    return (\n      <Components.Button\n        className=\"btn btn-flat twitter-share\"\n        aria-label=\"Share to Twitter\"\n        onClick={this.handleClick}\n      >\n        <Helmet\n          meta={getTwitterMeta(this.props)}\n        />\n        <i className={iconClassNames} />\n        {this.renderText()}\n      </Components.Button>\n    );\n  }\n}\n\nTwitterSocialButton.propTypes = {\n  altIcon: PropTypes.bool,\n  settings: PropTypes.object,\n  showText: PropTypes.bool,\n  size: PropTypes.string\n};\n\nexport default TwitterSocialButton;\n","import React, { Component } from \"react\";\nimport PropTypes from \"prop-types\";\nimport { isEqual } from \"lodash\";\nimport { composeWithTracker } from \"@reactioncommerce/reaction-components\";\nimport { Meteor } from \"meteor/meteor\";\nimport { Reaction, i18next } from \"/client/api\";\nimport { Packages } from \"/lib/collections\";\nimport { SocialSettings } from \"../components\";\nimport { createSocialSettings } from \"../../lib/helpers\";\n\nclass SocialSettingsContainer extends Component {\n  static propTypes = {\n    settings: PropTypes.object\n  }\n\n  constructor(props) {\n    super(props);\n\n    this.state = {\n      settings: props.settings\n    };\n  }\n\n  componentWillReceiveProps(nextProps) {\n    if (isEqual(nextProps.settings, this.props.settings) === false) {\n      this.setState({\n        settings: nextProps.settings\n      });\n    }\n  }\n\n  handleSettingEnable = (event, isChecked, name) => {\n    Meteor.call(\"reaction-social/updateSocialSetting\", name, \"enabled\", isChecked);\n  }\n\n  handleSettingExpand = (event, card, name, isExpanded) => {\n    Reaction.updateUserPreferences(\"reaction-social\", \"settingsCards\", {\n      [name]: isExpanded\n    });\n  }\n\n  handleSettingsSave = (settingName, values) => {\n    Meteor.call(\"reaction-social/updateSocialSettings\", values.settings, (error) => {\n      if (!error) {\n        Alerts.toast(\n          i18next.t(\"admin.settings.socialSettingsSaved\", { defaultValue: \"Social settings saved\" }),\n          \"success\"\n        );\n      }\n    });\n  }\n\n  render() {\n    return (\n      <SocialSettings\n        onSettingEnableChange={this.handleSettingEnable}\n        onSettingExpand={this.handleSettingExpand}\n        onSettingsSave={this.handleSettingsSave}\n        {...this.props}\n        settings={this.state.settings}\n      />\n    );\n  }\n}\n\nfunction composer(props, onData) {\n  const subscription = Reaction.Subscriptions.Packages;\n  const preferences = Reaction.getUserPreferences(\"reaction-social\", \"settingsCards\", {});\n\n  const socialPackage = Packages.findOne({\n    name: \"reaction-social\"\n  });\n\n  if (subscription.ready()) {\n    onData(null, {\n      preferences,\n      packageData: socialPackage,\n      socialSettings: createSocialSettings(props)\n    });\n  } else {\n    onData(null, {});\n  }\n}\n\nconst decoratedComponent = composeWithTracker(composer)(SocialSettingsContainer);\n\nexport default decoratedComponent;\n","import \"./templates/apps/facebook.html\";\nimport \"./templates/apps/facebook.js\";\nimport \"./templates/apps/googleplus.html\";\nimport \"./templates/apps/googleplus.js\";\nimport \"./templates/apps/pinterest.html\";\nimport \"./templates/apps/pinterest.js\";\nimport \"./templates/apps/twitter.html\";\nimport \"./templates/apps/twitter.js\";\n\nimport \"./templates/dashboard/social.html\";\nimport \"./templates/dashboard/social.js\";\n\nimport \"./templates/social.html\";\nimport \"./templates/social.js\";\n","import { Packages } from \"/lib/collections\";\nimport merge from \"lodash/merge\";\n\nexport function createSocialSettings(options) {\n  let socialSettings;\n\n  const socialPackage = Packages.findOne({\n    name: \"reaction-social\"\n  });\n\n  if (socialPackage) {\n    socialSettings = socialPackage.settings.public;\n    socialSettings = merge({}, socialSettings, options);\n    const socialButtons = [];\n\n    if (socialSettings.appsOrder) {\n      const { appsOrder } = socialSettings;\n      for (let i = 0; i < appsOrder.length; i += 1) {\n        const app = appsOrder[i];\n\n        if (typeof socialSettings.apps[app] === \"object\" && socialSettings.apps[app].enabled) {\n          socialButtons.push(app);\n        }\n      }\n    }\n\n    return {\n      url: options.url || location.origin + location.pathname,\n      media: options.media,\n      settings: socialSettings,\n      providers: socialButtons\n    };\n  }\n\n  return null;\n}\n","import { Meteor } from \"meteor/meteor\";\nimport { AutoForm } from \"meteor/aldeed:autoform\";\nimport { Template } from \"meteor/templating\";\nimport { $ } from \"meteor/jquery\";\nimport { Reaction, Router, i18next } from \"/client/api\";\nimport { Packages, Shops } from \"/lib/collections\";\nimport { ShopifyConnectPackageConfig } from \"../../lib/collections/schemas\";\nimport \"./shopify.less\";\nimport \"./shopify.html\";\n\nTemplate.shopifyConnectSettings.helpers({\n  packageData() {\n    return Packages.findOne({\n      name: \"reaction-connectors-shopify\",\n      shopId: Reaction.getShopId()\n    });\n  },\n  ShopifyConnectPackageConfig() {\n    return ShopifyConnectPackageConfig;\n  }\n});\n\nTemplate.shopifyImport.events({\n  \"click [data-event-action=importDataFromShopify]\"(event) {\n    event.preventDefault();\n\n    if ($(\"#shopifyCheckboxCustomers\").is(\":checked\") || $(\"#shopifyCheckboxProducts\").is(\":checked\")) {\n      $(event.currentTarget).html(`<i class='fa fa-circle-o-notch fa-spin'></i> ${i18next.t(\"admin.shopifyConnectSettings.importing\")}`);\n      event.currentTarget.disabled = true;\n    }\n\n    // If this is the primary shop, redirect to index\n    if (Reaction.getShopId() === Reaction.getPrimaryShopId()) {\n      Router.go(\"index\");\n    } else {\n      const shopId = Reaction.getShopId();\n      const shop = Shops.findOne({ _id: shopId });\n\n      // Check to see if this shop has a slug, otherwise direct to shopId route\n      if (shop && shop.slug) {\n        Router.go(`/shop/${shop.slug}`);\n      } else {\n        Router.go(`/shop/${shopId}`);\n      }\n    }\n\n    // If no option is selected, return error asking user to select type of import\n    if (!$(\"#shopifyCheckboxCustomers\").is(\":checked\") && !$(\"#shopifyCheckboxProducts\").is(\":checked\")) {\n      return Alerts.toast(i18next.t(\"admin.shopifyConnectSettings.chooseImportType\"), \"error\");\n    }\n    // TODO transform these Meteor calls to jobs like we do for the products images\n    // we got customers checkbox checked ? if yes then download customers\n    if ($(\"#shopifyCheckboxCustomers\").is(\":checked\")) {\n      Meteor.call(\"connectors/shopify/import/customers\", (err) => {\n        $(event.currentTarget).html(`\n            <i class='fa fa-cloud-download'></i> ${i18next.t(\"admin.shopifyConnectSettings.startImport\")}`);\n        event.currentTarget.disabled = false;\n\n        if (!err) {\n          return Alerts.toast(i18next.t(\"admin.shopifyConnectSettings.importSuccess\"), \"success\");\n        }\n        return Alerts.toast(`${i18next.t(\"admin.shopifyConnectSettings.importFailed\")}: ${err}`, \"error\");\n      });\n    }\n    // we got products checkbox checked ? if yes then download products\n    if ($(\"#shopifyCheckboxProducts\").is(\":checked\")) {\n      Meteor.call(\"connectors/shopify/import/products\", (err) => {\n        $(event.currentTarget).html(`\n            <i class='fa fa-cloud-download'></i> ${i18next.t(\"admin.shopifyConnectSettings.startImport\")}`);\n        event.currentTarget.disabled = false;\n\n        if (!err) {\n          return Alerts.toast(i18next.t(\"admin.shopifyConnectSettings.importSuccess\"), \"success\");\n        }\n        return Alerts.toast(`${i18next.t(\"admin.shopifyConnectSettings.importFailed\")}: ${err}`, \"error\");\n      });\n    }\n  }\n});\n\nTemplate.shopifySync.helpers({\n  activeWebhooks() {\n    const pkg = Packages.findOne({\n      name: \"reaction-connectors-shopify\",\n      shopId: Reaction.getShopId()\n    });\n\n    if (pkg && pkg.settings && Array.isArray(pkg.settings.webhooks) && pkg.settings.webhooks.length > 0) {\n      return true;\n    }\n    return false;\n  },\n\n  integrationIsActive(integration) {\n    const { settings } = Reaction.getPackageSettings(\"reaction-connectors-shopify\");\n    // If this package has webhooks, determine if there is a match for the `integration` passed in as an arg\n    if (settings && Array.isArray(settings.webhooks) && settings.webhooks.length > 0) {\n      const integrations = settings.webhooks.reduce((integrationsArray, webhook) => {\n        // if this webhook doesn't have any integrations, skip it.\n        if (!Array.isArray(webhook.integrations)) {\n          return integrationsArray;\n        }\n\n        // initialize with first webhook's integrations array\n        if (!integrationsArray) {\n          return webhook.integrations;\n        }\n\n        // Append integrations to integrations array - not unique, but don't really care\n        return [...integrationsArray, ...webhook.integrations];\n      }, null);\n\n      // Return \"checked\" if we found the integration, empty string otherwise\n      return integrations.indexOf(integration) !== -1 ? \"checked\" : \"\";\n    }\n\n    // If no webhooks are found, this integration is inactive\n    return \"\";\n  },\n\n  currentDomain() {\n    const { settings } = Reaction.getPackageSettings(\"reaction-connectors-shopify\");\n    return settings.webhooksDomain || Meteor.absoluteUrl();\n  },\n\n  hookIsActive(hook) {\n    const { settings } = Reaction.getPackageSettings(\"reaction-connectors-shopify\");\n    const { synchooks } = settings;\n    if (synchooks) {\n      const [topic, event, syncType] = hook.split(\":\");\n      const matchingHooks = synchooks.filter((synchook) => synchook.topic === topic && synchook.event === event && synchook.syncType === syncType);\n\n      if (matchingHooks.length > 0) {\n        return \"checked\";\n      }\n    }\n    return \"\";\n  }\n});\n\nTemplate.shopifySync.events({\n  \"submit [data-event-action=setupShopifySync]\"(event) {\n    event.preventDefault(); // Don't permit default form submission behavior\n\n    const { settings } = Reaction.getPackageSettings(\"reaction-connectors-shopify\");\n\n    // Our event target is the form we submitted\n    const form = event.target;\n\n    // Get all selected options\n    const selectedOptionsNodeList = form.querySelectorAll('input[type=\"checkbox\"]:checked');\n    const webhooksDomain = document.getElementsByName(\"webhooksDomain\")[0].value;\n\n    if (!webhooksDomain) {\n      return Alerts.toast(`${i18next.t(\"admin.shopifyConnectSettings.noDomainSelected\")}`, \"warning\");\n    }\n\n    if (settings.webhooksDomain !== webhooksDomain) {\n      settings.webhooksDomain = webhooksDomain;\n      Meteor.call(\"package/update\", \"reaction-connectors-shopify\", \"settings\", settings);\n    }\n\n    // Create options array\n    // - create an array from the nodelist of checkboxes\n    // - map names from checkbox's html name into array\n    // - options should be in the form topic:integration\n    // - e.g. orders/create:updateInventory\n    const integrations = Array.from(selectedOptionsNodeList).map((integration) => integration.name);\n    // If there's at least one option\n    if (integrations && Array.isArray(integrations) && integrations.length > 0) {\n      // setup sync with provided integrations\n      return Meteor.call(\"connectors/shopify/sync/setup\", integrations, webhooksDomain, (err) => {\n        if (!err) {\n          // If there is no error, notify of success\n          return Alerts.toast(i18next.t(\"admin.shopifyConnectSettings.syncSetupSuccess\"), \"success\");\n        }\n        // Notify setup sync error if an error is returned\n        return Alerts.toast(i18next.t(\"admin.shopifyConnectSettings.syncSetupFailure\"), \"error\");\n      });\n    }\n\n    // If no options selected, warn user\n    return Alerts.toast(`${i18next.t(\"admin.shopifyConnectSettings.noSyncIntegrationsSelected\")}`, \"warning\");\n  },\n  \"click [data-event-action=stopShopifySync]\"() {\n    // setup sync with provided integrations\n    return Meteor.call(\"connectors/shopify/sync/teardown\", (err) => {\n      if (!err) {\n        // If there is no error, notify of success\n        return Alerts.toast(i18next.t(\"admin.shopifyConnectSettings.syncStopSuccess\"), \"success\");\n      }\n      // Notify setup sync error if an error is returned\n      return Alerts.toast(i18next.t(\"admin.shopifyConnectSettings.syncStopFailure\"), \"error\");\n    });\n  },\n\n  \"submit [data-event-action=setupShopifyHooks]\"(formEvent) {\n    event.preventDefault();\n    const form = formEvent.target;\n    const optionsNodeList = form.querySelectorAll('input[type=\"checkbox\"]');\n    const optionsList = Array.from(optionsNodeList).map((hook) => ({ name: hook.name, checked: hook.checked }));\n    optionsList.forEach((node) => {\n      if (node.checked) {\n        Meteor.call(\"synchooks/shopify/addHook\", node, (error) => {\n          if (!error) {\n            Alerts.toast(i18next.t(\"admin.shopifyConnectSettings.hookSetupSuccess\"), \"success\");\n          } else {\n            Alerts.toast(i18next.t(\"admin.shopifyConnectSettings.hookSetupFailure\"), \"error\");\n          }\n        });\n      } else {\n        Meteor.call(\"synchooks/shopify/removeHook\", node, (error) => {\n          if (!error) {\n            Alerts.toast(i18next.t(\"admin.shopifyConnectSettings.hookSetupSuccess\"), \"success\");\n          } else {\n            Alerts.toast(i18next.t(\"admin.shopifyConnectSettings.hookSetupFailure\"), \"error\");\n          }\n        });\n      }\n    });\n  }\n});\n\nAutoForm.hooks({\n  \"shopify-connect-update-form\": {\n    onSuccess() {\n      Meteor.call(\"connectors/shopify/api/credentials/test\", (err, isValid) => {\n        if (isValid) {\n          return Alerts.toast(i18next.t(\"admin.shopifyConnectSettings.validCredentials\"), \"Valid API key and password\");\n        }\n        return Alerts.toast(i18next.t(\"admin.shopifyConnectSettings.invalidCredentials\", \"Invalid API key/password\"), \"error\");\n      });\n    },\n    onError(error) {\n      return Alerts.toast(`${i18next.t(\"admin.settings.saveFailed\")} ${error}`, \"error\");\n    }\n  }\n});\n","import \"./settings/shopify\";\n","export * from \"./shopifyConnect\";\n","import SimpleSchema from \"simpl-schema\";\nimport { check } from \"meteor/check\";\nimport { Tracker } from \"meteor/tracker\";\nimport { PackageConfig } from \"/lib/collections/schemas/registry\";\nimport { registerSchema } from \"@reactioncommerce/schemas\";\n\n/**\n * @file ShopifyProduct\n *\n * @module connectors-shopify\n */\n\n/**\n * @name Webhook\n * @type {SimpleSchema}\n * @property {Number} shopifyId Shopify webhook ID\n * @property {String} topic Shopify webhook topic\n * @property {String} address URL webhook will POST to\n * @property {String} format Format of webhook data\n * @property {Array} integrations Array of integration strings using this webhook\n * @property {String} description Shopify webhook description, currently unused\n */\nconst Webhook = new SimpleSchema({\n  \"shopifyId\": {\n    type: SimpleSchema.Integer,\n    label: \"Shopify webhook ID\"\n  },\n  \"topic\": {\n    type: String,\n    label: \"Shopify webhook topic\"\n  },\n  \"address\": {\n    type: String,\n    label: \"URL webhook will POST to\"\n  },\n  \"format\": {\n    type: String,\n    label: \"Format of webhook data\"\n  },\n  \"integrations\": {\n    type: Array,\n    label: \"Integrations currently using this webhook\",\n    optional: true\n  },\n  \"integrations.$\": {\n    type: String\n  },\n  // Currently unused, might want it later\n  \"description\": {\n    type: String,\n    label: \"Shopify webhook description\",\n    optional: true\n  }\n}, { check, tracker: Tracker });\n\nregisterSchema(\"Webhook\", Webhook);\n\n/**\n * @name Synchook\n * @type {SimpleSchema}\n * @property {String} topic - General topic this event is under\n * @property {String} event - The type of event that we are capturing\n * @property {String} syncType - The handler to run for this event\n */\nexport const Synchook = new SimpleSchema({\n  topic: {\n    type: String,\n    label: \"Outbound Sync Topic\",\n    allowedValues: [\"orders\"] // expand as necessary\n  },\n  event: {\n    type: String,\n    label: \"Event to act upon\"\n  },\n  syncType: {\n    type: String,\n    label: \"Exactly what to sync in this topic\"\n  }\n}, { check, tracker: Tracker });\n\nregisterSchema(\"Synchook\", Synchook);\n\n/**\n * @name ShopifyConnectPackageConfig\n * @type {SimpleSchema}\n * @property {String} settings.apiKey Shopify API key\n * @property {String} settings.password Shopify API password\n * @property {String} settings.sharedSecret Shopify API shared secret\n * @property {String} settings.shopName Shop slug\n * @property {Array} settings.webhooks Array of registered Shopify webhooks\n */\nexport const ShopifyConnectPackageConfig = PackageConfig.clone().extend({\n  // Remove blackbox: true from settings obj\n  \"settings\": {\n    type: Object,\n    optional: true,\n    blackbox: false,\n    defaultValue: {}\n  },\n  \"settings.apiKey\": {\n    type: String,\n    label: \"API key\",\n    optional: true\n  },\n  \"settings.password\": {\n    type: String,\n    label: \"API password\",\n    optional: true\n  },\n  \"settings.sharedSecret\": {\n    type: String,\n    label: \"API shared secret\",\n    optional: true\n  },\n  \"settings.shopName\": {\n    type: String,\n    label: \"Shop slug\",\n    optional: true\n  },\n  \"settings.synchooks\": {\n    type: Array,\n    label: \"Hooks being used to sync outbound with Shopify\",\n    optional: true\n  },\n  \"settings.synchooks.$\": {\n    type: Synchook\n  },\n  \"settings.webhooks\": {\n    type: Array,\n    label: \"Registered Shopify webhooks\",\n    optional: true\n  },\n  \"settings.webhooks.$\": {\n    type: Webhook\n  }\n});\n\nregisterSchema(\"ShopifyConnectPackageConfig\", ShopifyConnectPackageConfig);\n","import { Template } from \"meteor/templating\";\nimport { Cart } from \"/lib/collections\";\nimport DiscountList from \"/imports/plugins/core/discounts/client/components/list\";\nimport \"./codes.html\";\n\nTemplate.discountCodesCheckout.helpers({\n  DiscountList() {\n    return DiscountList;\n  },\n  cartId() {\n    return Cart.findOne()._id;\n  }\n});\n","import \"./codes\";\nimport \"./settings\";\n","import { $ } from \"meteor/jquery\";\nimport { Meteor } from \"meteor/meteor\";\nimport { Template } from \"meteor/templating\";\nimport { ReactiveDict } from \"meteor/reactive-dict\";\nimport { AutoForm } from \"meteor/aldeed:autoform\";\nimport { DiscountCodes } from \"../collections/codes\";\nimport { i18next } from \"/client/api\";\nimport { DiscountCodes as DiscountSchema } from \"../../lib/collections/schemas\";\nimport { IconButton, Loading, SortableTable } from \"/imports/plugins/core/ui/client/components\";\nimport \"./settings.html\";\n\n/* eslint no-shadow: [\"error\", { \"allow\": [\"options\"] }] */\n/* eslint no-unused-vars: [\"error\", { \"argsIgnorePattern\": \"[oO]ptions\" }] */\n\nTemplate.customDiscountCodes.onCreated(function () {\n  this.autorun(() => {\n    this.subscribe(\"DiscountCodes\");\n  });\n\n  this.state = new ReactiveDict();\n  this.state.setDefault({\n    isEditing: false,\n    editingId: null\n  });\n});\n\nTemplate.customDiscountCodes.helpers({\n  editButton() {\n    const instance = Template.instance();\n    const { state } = instance;\n    const isEditing = state.equals(\"isEditing\", true);\n    let editingId = state.get(\"editingId\");\n    // toggle edit state\n    if (!isEditing) {\n      editingId = null;\n    }\n    // return icon\n    return {\n      component: IconButton,\n      icon: \"fa fa-plus\",\n      onIcon: \"fa fa-pencil\",\n      toggle: true,\n      toggleOn: isEditing,\n      style: {\n        position: \"relative\",\n        top: \"-25px\",\n        right: \"8px\"\n      },\n      onClick() {\n        // remove active rows from grid\n        $(\".discount-codes-grid-row\").removeClass(\"active\");\n        return state.set({\n          isEditing: !isEditing,\n          editingId\n        });\n      }\n    };\n  },\n  discountGrid() {\n    const filteredFields = [\"code\", \"discount\", \"conditions.redemptionLimit\", \"calculation.method\"];\n    const noDataMessage = i18next.t(\"admin.settings.noCustomDiscountCodesFound\");\n    const instance = Template.instance();\n\n    //\n    // helper to get and select row from griddle\n    // into blaze for to select discount row for editing\n    //\n    function editRow(options) {\n      const currentId = instance.state.get(\"editingId\");\n      // isEditing is discount rate object\n      instance.state.set(\"isEditing\", options.props.data);\n      instance.state.set(\"editingId\", options.props.data._id);\n      // toggle edit mode clicking on same row\n      if (currentId === options.props.data._id) {\n        instance.state.set(\"isEditing\", null);\n        instance.state.set(\"editingId\", null);\n      }\n    }\n\n    //\n    // helper adds a class to every grid row\n    //\n    const customRowMetaData = {\n      bodyCssClassName: () => \"discount-codes-grid-row\"\n    };\n\n    // add i18n handling to headers\n    const customColumnMetadata = [];\n    filteredFields.forEach((field) => {\n      const columnMeta = {\n        accessor: field,\n        Header: i18next.t(`admin.discountGrid.${field}`)\n      };\n      customColumnMetadata.push(columnMeta);\n    });\n\n    // return discount Grid\n    return {\n      component: SortableTable,\n      publication: \"DiscountCodes\",\n      collection: DiscountCodes,\n      matchingResultsCount: \"discounts-count\",\n      showFilter: true,\n      rowMetadata: customRowMetaData,\n      filteredFields,\n      columns: filteredFields,\n      noDataMessage,\n      onRowClick: editRow,\n      columnMetadata: customColumnMetadata,\n      externalLoadingComponent: Loading\n    };\n  },\n\n  instance() {\n    const instance = Template.instance();\n    return instance;\n  },\n  // schema for forms\n  discountSchema() {\n    return DiscountSchema;\n  },\n\n  discountCode() {\n    const instance = Template.instance();\n    const id = instance.state.get(\"editingId\");\n    const discount = DiscountCodes.findOne(id) || {};\n    return discount;\n  }\n});\n\n//\n// on submit lets clear the form state\n//\nTemplate.customDiscountCodes.events({\n  \"submit #discount-codes-update-form\"() {\n    const instance = Template.instance();\n    instance.state.set({\n      isEditing: false,\n      editingId: null\n    });\n  },\n  \"submit #discount-codes-insert-form\"() {\n    const instance = Template.instance();\n    instance.state.set({\n      isEditing: true,\n      editingId: null\n    });\n  },\n  \"click .cancel, .discount-codes-grid-row .active\"() {\n    const instance = Template.instance();\n    // remove active rows from grid\n    instance.state.set({\n      isEditing: false,\n      editingId: null\n    });\n    // ugly hack\n    $(\".discount-codes-grid-row\").removeClass(\"active\");\n  },\n  \"click .delete\"() {\n    const confirmTitle = i18next.t(\"admin.settings.confirmRateDelete\");\n    const confirmButtonText = i18next.t(\"app.delete\");\n    const instance = Template.instance();\n    const id = instance.state.get(\"editingId\");\n    // confirm delete\n    Alerts.alert({\n      title: confirmTitle,\n      type: \"warning\",\n      showCancelButton: true,\n      confirmButtonText\n    }, (isConfirm) => {\n      if (isConfirm) {\n        if (id) {\n          Meteor.call(\"discounts/deleteRate\", id);\n          instance.state.set({\n            isEditing: false,\n            editingId: null\n          });\n        }\n      }\n    });\n  },\n  \"click .discount-codes-grid-row\"(event) {\n    // toggle all rows off, then add our active row\n    $(\".discount-codes-grid-row\").removeClass(\"active\");\n    Template.instance().$(event.currentTarget).addClass(\"active\");\n  }\n});\n\n//\n// Hooks for update and insert forms\n//\nAutoForm.hooks({\n  \"discount-codes-update-form\": {\n    onSuccess() {\n      return Alerts.toast(i18next.t(\"admin.settings.settingsSaveSuccess\"), \"success\");\n    },\n    onError(operation, error) {\n      return Alerts.toast(`${i18next.t(\"admin.settings.settingsSaveFailure\")} ${error}`, \"error\");\n    }\n  },\n  \"discount-codes-insert-form\": {\n    onSuccess() {\n      return Alerts.toast(i18next.t(\"admin.settings.settingsSaveSuccess\"), \"success\");\n    },\n    onError(operation, error) {\n      return Alerts.toast(`${i18next.t(\"admin.settings.settingsSaveFailure\")} ${error}`, \"error\");\n    }\n  }\n});\n","import { Mongo } from \"meteor/mongo\";\nimport { DiscountCodes as DiscountSchema } from \"../../lib/collections/schemas\";\n\n\n/**\n * Client side collections\n */\nexport const DiscountCodes = new Mongo.Collection(\"DiscountCodes\");\n// attach discount code specific schema\nDiscountCodes.attachSchema(DiscountSchema);\n","import \"./collections/codes\";\nimport \"./templates\";\n","import SimpleSchema from \"simpl-schema\";\nimport { Discounts } from \"/imports/plugins/core/discounts/lib/collections/schemas\";\nimport { registerSchema } from \"@reactioncommerce/schemas\";\n\n/**\n* Discount Codes Schema\n* @type {Object}\n* @desc schema that extends discount schema\n* with properties for discount codes.\n*/\nexport const DiscountCodes = Discounts.clone().extend({\n  \"discountMethod\": {\n    label: \"Method\",\n    type: String,\n    defaultValue: \"code\"\n  },\n  \"calculation.method\": {\n    type: String,\n    index: 1,\n    defaultValue: \"discount\"\n  },\n  \"code\": {\n    label: \"Discount Code\",\n    type: String\n  },\n  \"conditions.redemptionLimit\": {\n    type: SimpleSchema.Integer,\n    label: \"Total Limit\",\n    optional: true\n  },\n  \"conditions.accountLimit\": {\n    type: SimpleSchema.Integer,\n    label: \"Account Limit\",\n    defaultValue: 1,\n    optional: true\n  }\n});\n\nregisterSchema(\"DiscountCodes\", DiscountCodes);\n","import { DiscountsPackageConfig } from \"/imports/plugins/core/discounts/lib/collections/schemas\";\nimport { registerSchema } from \"@reactioncommerce/schemas\";\n\n/**\n* Discount Codes Package Config Schema\n* @type {Object}\n* @desc schema that extends discount schema\n* with properties for discount rates.\n*/\nexport const DiscountCodesPackageConfig = DiscountsPackageConfig.clone().extend({\n  \"settings.codes\": {\n    type: Object,\n    optional: true,\n    defaultValue: {}\n  },\n  \"settings.codes.enabled\": {\n    type: Boolean,\n    optional: true,\n    defaultValue: false\n  }\n});\n\nregisterSchema(\"DiscountCodesPackageConfig\", DiscountCodesPackageConfig);\n","export * from \"./config\";\nexport * from \"./codes\";\n","import { Template } from \"meteor/templating\";\nimport { ReactiveDict } from \"meteor/reactive-dict\";\nimport { $ } from \"meteor/jquery\";\nimport { Meteor } from \"meteor/meteor\";\nimport { AutoForm } from \"meteor/aldeed:autoform\";\nimport { DiscountRates } from \"../collections/rates\";\nimport { DiscountRates as DiscountRateSchema } from \"../../lib/collections/schemas/rates\";\nimport { i18next } from \"/client/api\";\nimport { IconButton, Loading, SortableTable } from \"/imports/plugins/core/ui/client/components\";\n\n/* eslint no-shadow: [\"error\", { \"allow\": [\"options\"] }] */\n/* eslint no-unused-vars: [\"error\", { \"argsIgnorePattern\": \"[oO]ptions\" }] */\n\nTemplate.customDiscountRates.onCreated(function () {\n  this.autorun(() => {\n    this.subscribe(\"DiscountRates\");\n  });\n\n  this.state = new ReactiveDict();\n  this.state.setDefault({\n    isEditing: false,\n    editingId: null\n  });\n});\n\nTemplate.customDiscountRates.helpers({\n  editButton() {\n    const instance = Template.instance();\n    const { state } = instance;\n    const isEditing = state.equals(\"isEditing\", true);\n    let editingId = state.get(\"editingId\");\n    // toggle edit state\n    if (!isEditing) {\n      editingId = null;\n    }\n    // return icon\n    return {\n      component: IconButton,\n      icon: \"fa fa-plus\",\n      onIcon: \"fa fa-pencil\",\n      toggle: true,\n      toggleOn: isEditing,\n      style: {\n        position: \"relative\",\n        top: \"-25px\",\n        right: \"8px\"\n      },\n      onClick() {\n        // remove active rows from grid\n        $(\".discount-rates-grid-row\").removeClass(\"active\");\n        return state.set({\n          isEditing: !isEditing,\n          editingId\n        });\n      }\n    };\n  },\n  discountGrid() {\n    const filteredFields = [\"label\", \"discountMethod\", \"discount\"];\n    const noDataMessage = i18next.t(\"admin.settings.noCustomDiscountRatesFound\");\n    const instance = Template.instance();\n\n    //\n    // helper to get and select row from griddle\n    // into blaze for to select discount row for editing\n    //\n    function editRow(options) {\n      const currentId = instance.state.get(\"editingId\");\n      // isEditing is discount rate object\n      instance.state.set(\"isEditing\", options.props.data);\n      instance.state.set(\"editingId\", options.props.data._id);\n      // toggle edit mode clicking on same row\n      if (currentId === options.props.data._id) {\n        instance.state.set(\"isEditing\", null);\n        instance.state.set(\"editingId\", null);\n      }\n    }\n\n    //\n    // helper adds a class to every grid row\n    //\n    const customRowMetaData = {\n      bodyCssClassName: () => \"discount-rates-grid-row\"\n    };\n\n    // add i18n handling to headers\n    const customColumnMetadata = [];\n    filteredFields.forEach((field) => {\n      const columnMeta = {\n        accessor: field,\n        Header: i18next.t(`admin.discountGrid.${field}`)\n      };\n      customColumnMetadata.push(columnMeta);\n    });\n\n    // return discount Grid\n    return {\n      component: SortableTable,\n      publication: \"DiscountRates\",\n      collection: DiscountRates,\n      matchingResultsCount: \"discounts-count\",\n      showFilter: true,\n      rowMetadata: customRowMetaData,\n      filteredFields,\n      columns: filteredFields,\n      noDataMessage,\n      onRowClick: editRow,\n      columnMetadata: customColumnMetadata,\n      externalLoadingComponent: Loading\n    };\n  },\n\n  instance() {\n    const instance = Template.instance();\n    return instance;\n  },\n  // schema for forms\n  discountRateSchema() {\n    return DiscountRateSchema;\n  },\n  discountRate() {\n    const instance = Template.instance();\n    const id = instance.state.get(\"editingId\");\n    const discount = DiscountRates.findOne(id) || {};\n    return discount;\n  }\n});\n\n//\n// on submit lets clear the form state\n//\nTemplate.customDiscountRates.events({\n  \"submit #discount-rates-update-form\"() {\n    const instance = Template.instance();\n    instance.state.set({\n      isEditing: false,\n      editingId: null\n    });\n  },\n  \"submit #discount-rates-insert-form\"() {\n    const instance = Template.instance();\n    instance.state.set({\n      isEditing: true,\n      editingId: null\n    });\n  },\n  \"click .cancel, .discount-rates-grid-row.active\"() {\n    const instance = Template.instance();\n    // remove active rows from grid\n    instance.state.set({\n      isEditing: false,\n      editingId: null\n    });\n    // ugly hack\n    $(\".discount-rates-grid-row\").removeClass(\"active\");\n  },\n  \"click .delete\"() {\n    const confirmTitle = i18next.t(\"admin.settings.confirmRateDelete\");\n    const confirmButtonText = i18next.t(\"app.delete\");\n    const instance = Template.instance();\n    const id = instance.state.get(\"editingId\");\n    // confirm delete\n    Alerts.alert({\n      title: confirmTitle,\n      type: \"warning\",\n      showCancelButton: true,\n      confirmButtonText\n    }, (isConfirm) => {\n      if (isConfirm) {\n        if (id) {\n          Meteor.call(\"discounts/deleteRate\", id);\n          instance.state.set({\n            isEditing: false,\n            editingId: null\n          });\n        }\n      }\n    });\n  },\n  \"click .discount-rates-grid-row\"(event) {\n    // toggle all rows off, then add our active row\n    $(\".discount-rates-grid-row\").removeClass(\"active\");\n    Template.instance().$(event.currentTarget).addClass(\"active\");\n  }\n});\n\n\nAutoForm.hooks({\n  \"discount-rates-update-form\": {\n    onSuccess() {\n      return Alerts.toast(i18next.t(\"admin.settings.settingsSaveSuccess\"), \"success\");\n    },\n    onError(operation, error) {\n      return Alerts.toast(`${i18next.t(\"admin.settings.settingsSaveFailure\")} ${error}`, \"error\");\n    }\n  }\n});\n\nAutoForm.hooks({\n  \"discount-rates-insert-form\": {\n    onSuccess() {\n      return Alerts.toast(i18next.t(\"admin.settings.settingsSaveSuccess\"), \"success\");\n    },\n    onError(operation, error) {\n      return Alerts.toast(`${i18next.t(\"admin.settings.settingsSaveFailure\")} ${error}`, \"error\");\n    }\n  }\n});\n","import { Mongo } from \"meteor/mongo\";\nimport { DiscountRates as DiscountSchema } from \"../../lib/collections/schemas\";\n\n/**\n * Client side collections\n */\nexport const DiscountRates = new Mongo.Collection(\"DiscountRates\");\n// attach discount code specific schema\nDiscountRates.attachSchema(DiscountSchema);\n","import \"./collections/rates.js\";\nimport \"./settings/rates.html\";\nimport \"./settings/rates.js\";\n","import { DiscountsPackageConfig } from \"/imports/plugins/core/discounts/lib/collections/schemas\";\nimport { registerSchema } from \"@reactioncommerce/schemas\";\n\n/**\n* Discount Rates Package Config Schema\n* @type {Object}\n* @desc schema that extends discount schema\n* with properties for discount rates.\n*/\nexport const DiscountRatesPackageConfig = DiscountsPackageConfig.clone().extend({\n  \"settings.rates\": {\n    type: Object,\n    optional: true,\n    defaultValue: {}\n  },\n  \"settings.rates.enabled\": {\n    type: Boolean,\n    optional: true,\n    defaultValue: false\n  }\n});\n\nregisterSchema(\"DiscountRatesPackageConfig\", DiscountRatesPackageConfig);\n","export * from \"./config\";\nexport * from \"./rates\";\n","import { Discounts } from \"/imports/plugins/core/discounts/lib/collections/schemas/discounts\";\nimport { registerSchema } from \"@reactioncommerce/schemas\";\n\n/**\n* Discount Codes Schema\n* @type {Object}\n* @desc schema that extends discount schema\n* with properties for discount codes.\n*/\nexport const DiscountRates = Discounts.clone().extend({\n  discountMethod: {\n    label: \"Calculation Method\",\n    type: String,\n    defaultValue: \"rate\"\n  }\n});\n\nregisterSchema(\"DiscountRates\", DiscountRates);\n","import { Template } from \"meteor/templating\";\nimport { NotificationRouteContainer } from \"../containers\";\n\nTemplate.notificationRoute.helpers({\n  notificationRoute() {\n    return {\n      component: NotificationRouteContainer\n    };\n  }\n});\n","export { default as NotificationDropdown } from \"./notificationDropdown\";\nexport { default as Notification } from \"./notification\";\nexport { default as NotificationRoute } from \"./notificationRoute\";\n","import React, { Component } from \"react\";\nimport PropTypes from \"prop-types\";\nimport { Components } from \"@reactioncommerce/reaction-components\";\nimport \"../styles/main.less\";\nimport \"../styles/dropdown.css\";\n\nclass Notification extends Component {\n  constructor(props) {\n    super(props);\n\n    this.renderButton = this.renderButton.bind(this);\n  }\n\n  renderButton(unread) {\n    if (unread) {\n      return (\n        <button className=\"btn btn-default notify-btn rui button flat\">\n          <i className=\"rui fa fa-bell\" />\n          <span className=\"badge notify-icon badge-red\">{ unread }</span>\n        </button>\n      );\n    }\n    return (\n      <button className=\"btn btn-default rui button flat\">\n        <i className=\"rui fa fa-bell\" />\n      </button>\n    );\n  }\n\n  render() {\n    const { notificationList, handleDelete, unread, markOneAsRead, markAllAsRead } = this.props;\n    return (\n      <div className=\"dropdown\">\n        <div className=\"notification-icon\" data-toggle=\"dropdown\">\n          {this.renderButton(unread)}\n        </div>\n        <div className=\"notify-drop dropdown-menu\">\n          <Components.NotificationDropdown\n            notificationList={notificationList}\n            unread={unread}\n            handleDelete={handleDelete}\n            markAllAsRead={markAllAsRead}\n            markOneAsRead={markOneAsRead}\n          />\n        </div>\n      </div>\n    );\n  }\n}\n\nNotification.propTypes = {\n  handleDelete: PropTypes.func,\n  markAllAsRead: PropTypes.func,\n  markOneAsRead: PropTypes.func,\n  notificationList: PropTypes.array,\n  unread: PropTypes.number\n};\n\nexport default Notification;\n","import React from \"react\";\nimport PropTypes from \"prop-types\";\nimport { Components, registerComponent } from \"@reactioncommerce/reaction-components\";\n\nconst NotificationDropdown = (props) => (\n  <Components.NotificationRoute\n    {...props}\n    showViewAll={true}\n  />\n);\n\nNotificationDropdown.propTypes = {\n  markAllAsRead: PropTypes.func.isRequired,\n  markOneAsRead: PropTypes.func.isRequired,\n  moment: PropTypes.func,\n  notificationList: PropTypes.array.isRequired,\n  unread: PropTypes.number.isRequired\n};\n\nregisterComponent(\"NotificationDropdown\", NotificationDropdown);\n\nexport default NotificationDropdown;\n","import React, { Component } from \"react\";\nimport PropTypes from \"prop-types\";\nimport { Reaction } from \"/client/api\";\nimport { Components, withMoment, registerComponent } from \"@reactioncommerce/reaction-components\";\nimport { Link } from \"@reactioncommerce/reaction-router\";\n\nclass NotificationRoute extends Component {\n  handleNoNotifications = (notifyArr) => {\n    if (notifyArr.length <= 0) {\n      return (\n        <li className=\"notification\">\n          <div className=\"media\">\n            <div className=\"media-body\">\n              <strong className=\"notification-title\" data-i18n=\"notifications.body.noNotifcations\">No notifications yet</strong>\n            </div>\n          </div>\n        </li>\n      );\n    }\n    return null;\n  }\n\n  handleClick = (event, notify) => {\n    if (notify.type === \"forAdmin\") {\n      const actionViewData = Reaction.Apps({\n        name: \"reaction-orders\",\n        provides: \"dashboard\"\n      });\n      Reaction.showActionView(actionViewData);\n    } else {\n      Reaction.Router.go(notify.url);\n    }\n\n    const { markOneAsRead } = this.props;\n    return markOneAsRead(notify._id);\n  }\n\n  handleMarkAllAsRead = () => {\n    const { notificationList, markAllAsRead } = this.props;\n    markAllAsRead(notificationList);\n  }\n\n  renderDropdownHead() {\n    const { unread } = this.props;\n    return (\n      <div className=\"dropdown-toolbar\">\n        <h3 className=\"dropdown-toolbar-title\"><span data-i18n=\"notifications.body.recent\">Recent</span> ({unread})</h3>\n        <div className=\"dropdown-toolbar-actions\">\n          <Components.Button\n            label={\"Mark all as read\"}\n            i18nKeyLabel={\"notifications.body.markAllAsRead\"}\n            onClick={this.handleMarkAllAsRead}\n          />\n        </div>\n      </div>\n    );\n  }\n\n  render() {\n    const { moment, notificationList } = this.props;\n    return (\n      <div className=\"notify-bar\">\n        { this.renderDropdownHead() }\n        <div className=\"dropdown-notify notifications\">\n          { this.handleNoNotifications(notificationList) }\n          { notificationList.map((notify, key) => {\n            const timeNow = (moment && moment(notify.timeSent).fromNow()) || notify.timeSent.toLocaleString();\n            const read = `notification ${notify.status}`;\n            const i18n = `notifications.messages.${notify.type}`;\n            return (\n              <Components.ListItem\n                key={key}\n                listItemClassName={read}\n                onClick={this.handleClick}\n                value={notify}\n              >\n                <div className=\"media\">\n                  <div className=\"media-body\">\n                    <strong className=\"notification-title\" data-i18n={i18n}>{notify.message}</strong>\n                    <div className=\"notification-meta\">\n                      <small className=\"timestamp\">{timeNow}</small>\n                    </div>\n                  </div>\n                </div>\n              </Components.ListItem>\n            );\n          })}\n        </div>\n        {this.props.showViewAll &&\n          <div className=\"dropdown-footer text-center\">\n            <Link to=\"/notifications\" data-i18n=\"notifications.body.viewAll\">View All</Link>\n          </div>\n        }\n      </div>\n    );\n  }\n}\n\nNotificationRoute.propTypes = {\n  markAllAsRead: PropTypes.func,\n  markOneAsRead: PropTypes.func,\n  moment: PropTypes.func,\n  notificationList: PropTypes.array,\n  showViewAll: PropTypes.bool,\n  unread: PropTypes.number\n};\n\nregisterComponent(\"NotificationRoute\", NotificationRoute, withMoment);\nexport default withMoment(NotificationRoute);\n","export { default as NotificationContainer } from \"./notification\";\nexport { default as NotificationRouteContainer } from \"./notificationRoute\";\n","import { compose, withProps } from \"recompose\";\nimport { registerComponent, composeWithTracker } from \"@reactioncommerce/reaction-components\";\nimport { Meteor } from \"meteor/meteor\";\nimport { Notifications } from \"/lib/collections\";\nimport { Notification } from \"../components\";\n\nfunction composer(props, onData) {\n  if (Meteor.subscribe(\"Notification\", Meteor.userId()).ready()) {\n    const notificationList = Notifications.find({}, { sort: { timeSent: -1 }, limit: 5 }).fetch();\n    const unread = Notifications.find({ status: \"unread\" }).count();\n\n    onData(null, {\n      notificationList,\n      unread\n    });\n  }\n}\n\nconst handlers = {\n  markAllAsRead(notificationList) {\n    notificationList.map((notify) => Meteor.call(\"notification/markOneAsRead\", notify._id));\n  },\n  markOneAsRead(id) {\n    Meteor.call(\"notification/markOneAsRead\", id);\n  }\n};\n\nregisterComponent(\"Notification\", Notification, [\n  composeWithTracker(composer, false),\n  withProps(handlers)\n]);\n\nexport default compose(\n  composeWithTracker(composer, false),\n  withProps(handlers)\n)(Notification);\n","import { compose, withProps } from \"recompose\";\nimport { registerComponent, composeWithTracker } from \"@reactioncommerce/reaction-components\";\nimport { Meteor } from \"meteor/meteor\";\nimport { Notifications } from \"/lib/collections\";\nimport { NotificationRoute } from \"../components\";\n\nconst handlers = {\n  markAllAsRead(notificationList) {\n    notificationList.map((notify) => Meteor.call(\"notification/markOneAsRead\", notify._id));\n  },\n  markOneAsRead(id) {\n    Meteor.call(\"notification/markOneAsRead\", id);\n  }\n};\n\nfunction composer(props, onData) {\n  if (Meteor.subscribe(\"Notification\", Meteor.userId()).ready()) {\n    const notificationList = Notifications.find({}, { sort: { timeSent: -1 } }).fetch();\n    const unread = Notifications.find({ status: \"unread\" }).count();\n\n    onData(null, {\n      notificationList,\n      unread\n    });\n  }\n}\n\nregisterComponent(\"NotificationRoute\", NotificationRoute, [\n  composeWithTracker(composer),\n  withProps(handlers)\n]);\n\nexport default compose(\n  composeWithTracker(composer),\n  withProps(handlers)\n)(NotificationRoute);\n","// Styles\nimport \"./styles/main.less\";\nimport \"./templates/notifications.html\";\nimport \"./templates/notifications.js\";\n","/* eslint camelcase: 0 */\nimport { Meteor } from \"meteor/meteor\";\nimport { $ } from \"meteor/jquery\";\nimport { Template } from \"meteor/templating\";\nimport { Reaction, Logger } from \"/client/api\";\nimport { getCardType } from \"/client/modules/core/helpers/globals\";\nimport { Cart, Shops, Packages } from \"/lib/collections\";\nimport { AutoForm } from \"meteor/aldeed:autoform\";\nimport { AuthNetPayment } from \"../../lib/collections/schemas\";\nimport { AuthNet } from \"../api\";\n\nimport \"./authnet.html\";\n\n// used to track asynchronous submitting for UI changes\nlet submitting = false;\n\nfunction uiEnd(tpl, buttonText) {\n  tpl.$(\":input\").removeAttr(\"disabled\");\n  tpl.$(\"#btn-complete-order\").text(buttonText);\n  tpl.$(\"#btn-processing\").addClass(\"hidden\");\n  submitting = false;\n}\n\nfunction paymentAlert(errorMessage) {\n  return $(\".alert\").removeClass(\"hidden\").text(errorMessage);\n}\n\nfunction hidePaymentAlert() {\n  $(\".alert\").addClass(\"hidden\").text(\"\");\n}\n\nfunction handleAuthNetSubmitError(error) {\n  // TODO - this error handling needs to be reworked for the Authorize.net API\n  paymentAlert(error);\n  Logger.fatal(error);\n}\n\nTemplate.authnetPaymentForm.helpers({\n  AuthNetPayment() {\n    return AuthNetPayment;\n  }\n});\n\nAutoForm.addHooks(\"authnet-payment-form\", {\n  onSubmit(doc) {\n    // Process form (pre-validated by autoform)\n    submitting = true;\n    const tpl = this.template;\n    // regEx in the schema ensures that there will be exactly two names with one space between\n    const payerNamePieces = doc.payerName.split(\" \");\n    const form = {\n      first_name: payerNamePieces[0],\n      last_name: payerNamePieces[1],\n      number: doc.cardNumber,\n      expire_date: doc.expireMonth.toString() + doc.expireYear.slice(-2),\n      cvv2: doc.cvv,\n      type: getCardType(doc.cardNumber)\n    };\n\n    // Reaction only stores type and 4 digits\n    const storedCard = `${form.type.charAt(0).toUpperCase() + form.type.slice(1)} ${doc.cardNumber.slice(-4)}`;\n\n    hidePaymentAlert();\n\n    const cardInfo = {\n      cardNumber: doc.cardNumber,\n      expirationYear: doc.expireYear,\n      expirationMonth: doc.expireMonth,\n      cvv2: doc.cvv\n    };\n    const paymentInfo = {\n      total: Cart.findOne().getTotal(),\n      currency: Shops.findOne().currency\n    };\n\n    // Submit for processing\n    AuthNet.authorize(cardInfo, paymentInfo, (error, transaction) => {\n      if (error || !transaction) {\n        handleAuthNetSubmitError(error);\n        uiEnd(tpl, \"Resubmit payment\");\n      } else {\n        const normalizedMode = \"authorize\";\n        let normalizedStatus = \"failed\";\n\n        const transId = transaction.transactionId[0].toString();\n        Meteor.subscribe(\"Packages\", Reaction.getShopId());\n        const packageData = Packages.findOne({\n          name: \"reaction-auth-net\",\n          shopId: Reaction.getShopId()\n        });\n\n        if (transaction._original.responseCode[0] === \"1\") {\n          normalizedStatus = \"created\";\n        }\n\n        const paymentMethod = {\n          processor: \"AuthNet\",\n          paymentPackageId: packageData._id,\n          paymentSettingsKey: packageData.registry[0].settingsKey,\n          storedCard,\n          method: \"credit\",\n          transactionId: transId,\n          amount: +paymentInfo.total,\n          status: normalizedStatus,\n          mode: normalizedMode,\n          createdAt: new Date(),\n          updatedAt: new Date(),\n          transactions: [\n            transaction._original\n          ]\n        };\n        Meteor.call(\"cart/submitPayment\", paymentMethod);\n        uiEnd(tpl, \"Resubmit payment\");\n      }\n    });\n\n    return false;\n  },\n\n  beginSubmit() {\n    this.template.$(\":input\").attr(\"disabled\", true);\n    this.template.$(\"#btn-complete-order\").text(\"Submitting \");\n    return this.template.$(\"#btn-processing\").removeClass(\"hidden\");\n  },\n\n  endSubmit() {\n    // Hide processing UI here if form was not valid\n    if (!submitting) {\n      uiEnd(this.template, \"Complete your order\");\n    }\n  }\n});\n","import { Template } from \"meteor/templating\";\nimport { Packages } from \"/lib/collections\";\nimport { AutoForm } from \"meteor/aldeed:autoform\";\nimport { Reaction, i18next } from \"/client/api\";\nimport { AuthNetPackageConfig } from \"../../lib/collections/schemas\";\n\nimport \"./authnet.html\";\n\nTemplate.authnetSettings.helpers({\n  AuthNetPackageConfig() {\n    return AuthNetPackageConfig;\n  },\n  packageData() {\n    return Packages.findOne({ name: \"reaction-auth-net\", shopId: Reaction.getShopId() });\n  }\n});\n\nAutoForm.hooks({\n  \"authnet-update-form\": {\n    onSuccess() {\n      return Alerts.toast(i18next.t(\"admin.settings.saveSuccess\"), \"success\");\n    },\n    onError(error) {\n      return Alerts.toast(`${i18next.t(\"admin.settings.saveFailed\")} ${error}`, \"error\");\n    }\n  }\n});\n","/* eslint camelcase: 0 */\nimport { Meteor } from \"meteor/meteor\";\n\nexport const AuthNet = {\n  authorize(cardInfo, paymentInfo, callback) {\n    Meteor.call(\"authnetSubmit\", \"authorizeTransaction\", cardInfo, paymentInfo, callback);\n  }\n};\n","export { AuthNet } from \"./authnet\";\n","import \"./checkout/authnet\";\nimport \"./settings/authnet\";\n","import SimpleSchema from \"simpl-schema\";\nimport { check } from \"meteor/check\";\nimport { Tracker } from \"meteor/tracker\";\nimport { PackageConfig } from \"/lib/collections/schemas/registry\";\nimport { registerSchema } from \"@reactioncommerce/schemas\";\n\n/**\n * Meteor.settings.authnet =\n *   mode: false (sandbox)\n *   api_id: \"\"\n *   transaction_key: \"\"\n *   see: https://developer.authnet.com/webapps/developer/docs/api/\n *   see: https://github.com/authnet/rest-api-sdk-nodejs\n */\n\nexport const AuthNetPackageConfig = PackageConfig.clone().extend({\n  // Remove blackbox: true from settings obj\n  \"settings\": {\n    type: Object,\n    optional: true,\n    blackbox: false,\n    defaultValue: {}\n  },\n  \"settings.mode\": {\n    type: Boolean,\n    defaultValue: false\n  },\n  \"settings.reaction-auth-net\": {\n    type: Object,\n    defaultValue: {}\n  },\n  \"settings.reaction-auth-net.support\": {\n    type: Array,\n    label: \"Payment provider supported methods\"\n  },\n  \"settings.reaction-auth-net.support.$\": {\n    type: String,\n    allowedValues: [\"Authorize\", \"De-authorize\", \"Capture\"]\n  },\n  \"settings.api_id\": {\n    type: String,\n    label: \"API Login ID\"\n  },\n  \"settings.transaction_key\": {\n    type: String,\n    label: \"Transaction Key\"\n  }\n});\n\nregisterSchema(\"AuthNetPackageConfig\", AuthNetPackageConfig);\n\nexport const AuthNetPayment = new SimpleSchema({\n  payerName: {\n    type: String,\n    label: \"Cardholder name\"\n  },\n  cardNumber: {\n    type: String,\n    label: \"Card number\",\n    min: 12,\n    max: 19\n  },\n  expireMonth: {\n    type: String,\n    label: \"Expiration month\",\n    max: 2\n  },\n  expireYear: {\n    type: String,\n    label: \"Expiration year\",\n    max: 4\n  },\n  cvv: {\n    type: String,\n    label: \"CVV\",\n    max: 4\n  }\n}, { check, tracker: Tracker });\n\nregisterSchema(\"AuthNetPayment\", AuthNetPayment);\n","export * from \"./authnet\";\n","/* eslint camelcase: 0 */\nimport { Meteor } from \"meteor/meteor\";\nimport { Template } from \"meteor/templating\";\nimport { AutoForm } from \"meteor/aldeed:autoform\";\nimport { $ } from \"meteor/jquery\";\nimport { getCardType } from \"/client/modules/core/helpers/globals\";\nimport { Cart, Shops, Packages } from \"/lib/collections\";\nimport { Braintree } from \"../api/braintree\";\nimport { Reaction } from \"/client/api\";\nimport { BraintreePayment } from \"../../lib/collections/schemas\";\n\nimport \"./braintree.html\";\n\nTemplate.braintreePaymentForm.helpers({\n  BraintreePayment() {\n    return BraintreePayment;\n  }\n});\n\n\nfunction uiEnd(template, buttonText) {\n  template.$(\":input\").removeAttr(\"disabled\");\n  template.$(\"#btn-complete-order\").text(buttonText);\n  return template.$(\"#btn-processing\").addClass(\"hidden\");\n}\n\nfunction paymentAlert(errorMessage) {\n  return $(\".alert\").removeClass(\"hidden\").text(errorMessage);\n}\n\nfunction hidePaymentAlert() {\n  return $(\".alert\").addClass(\"hidden\").text(\"\");\n}\n\nfunction handleBraintreeSubmitError(error) {\n  const serverError = error !== null ? error.message : undefined;\n  if (serverError) {\n    return paymentAlert(`Server Error ${serverError}`);\n  } else if (error) {\n    return paymentAlert(\"Oops! Credit card is invalid. Please check your information and try again.\");\n  }\n}\n\nlet submitting = false;\n\nfunction submitToBrainTree(doc, template) {\n  submitting = true;\n  hidePaymentAlert();\n  const cardData = {\n    name: doc.payerName,\n    number: doc.cardNumber,\n    expirationMonth: doc.expireMonth,\n    expirationYear: doc.expireYear,\n    cvv2: doc.cvv,\n    type: getCardType(doc.cardNumber)\n  };\n  const cartTotal = Cart.findOne().getTotal();\n  const currencyCode = Shops.findOne().currency;\n\n  Braintree.authorize(cardData, {\n    total: cartTotal,\n    currency: currencyCode\n  }, (error, results) => {\n    let paymentMethod;\n    submitting = false;\n    if (error) {\n      handleBraintreeSubmitError(error);\n      uiEnd(template, \"Resubmit payment\");\n    } else if (results.saved === true) {\n      const tx = results && results.response && results.response.transaction;\n      const normalizedStatus = normalizeState(tx.status);\n      const normalizedMode = normalizeMode(tx.status);\n      Meteor.subscribe(\"Packages\", Reaction.getShopId());\n      const packageData = Packages.findOne({\n        name: \"reaction-braintree\",\n        shopId: Reaction.getShopId()\n      });\n\n      const storedCard = `${tx.creditCard.cardType.toUpperCase()} ${tx.creditCard.last4}`;\n      paymentMethod = {\n        processor: \"Braintree\",\n        storedCard,\n        paymentPackageId: packageData._id,\n        paymentSettingsKey: packageData.registry[0].settingsKey,\n        method: \"credit\",\n        transactionId: tx.id,\n        amount: parseFloat(tx.amount),\n        status: normalizedStatus,\n        mode: normalizedMode,\n        createdAt: new Date(),\n        updatedAt: new Date(),\n        transactions: []\n      };\n      paymentMethod.transactions.push(results.response);\n      Meteor.call(\"cart/submitPayment\", paymentMethod);\n    } else {\n      handleBraintreeSubmitError(results.response.message);\n      uiEnd(template, \"Resubmit payment\");\n    }\n  });\n}\n\nAutoForm.addHooks(\"braintree-payment-form\", {\n  onSubmit(doc) {\n    submitToBrainTree(doc, this.template);\n    return false;\n  },\n  beginSubmit() {\n    this.template.$(\":input\").attr(\"disabled\", true);\n    this.template.$(\"#btn-complete-order\").text(\"Submitting \");\n    return this.template.$(\"#btn-processing\").removeClass(\"hidden\");\n  },\n  endSubmit() {\n    if (!submitting) {\n      return uiEnd(this.template, \"Complete your order\");\n    }\n  }\n});\n\nconst normalizedStates = {\n  authorization_expired: \"expired\",\n  authorized: \"created\",\n  authorizing: \"pending\",\n  settlement_pending: \"pending\",\n  settlement_confirmed: \"settled\",\n  settlement_declined: \"failed\",\n  failed: \"failed\",\n  gateway_rejected: \"failed\",\n  processor_declined: \"failed\",\n  settled: \"settled\",\n  settling: \"pending\",\n  submitted_for_settlement: \"pending\",\n  voided: \"voided\",\n  default: \"failed\"\n};\n\nfunction normalizeState(stateString) {\n  let normalizedState = normalizedStates[stateString];\n  if (typeof normalizedState === \"undefined\") {\n    normalizedState = normalizedStates.default;\n  }\n  return normalizedState;\n}\n\nconst normalizedModes = {\n  settled: \"capture\",\n  settling: \"capture\",\n  submitted_for_settlement: \"capture\",\n  settlement_confirmed: \"capture\",\n  authorized: \"authorize\",\n  authorizing: \"authorize\",\n  default: \"capture\"\n};\n\nfunction normalizeMode(modeString) {\n  let normalizedMode = normalizedModes[modeString];\n  if (typeof normalizedMode === \"undefined\") {\n    normalizedMode = normalizedModes.default;\n  }\n  return normalizedMode;\n}\n","/* eslint no-unused-vars: 0 */\nimport { AutoForm } from \"meteor/aldeed:autoform\";\nimport { Template } from \"meteor/templating\";\nimport { Reaction, i18next } from \"/client/api\";\nimport { Packages } from \"/lib/collections\";\nimport { BraintreePackageConfig } from \"../../lib/collections/schemas\";\n\nimport \"./braintree.html\";\n\nTemplate.braintreeSettings.helpers({\n  BraintreePackageConfig() {\n    return BraintreePackageConfig;\n  },\n\n  packageData() {\n    return Packages.findOne({\n      name: \"reaction-braintree\"\n    });\n  }\n});\n\nTemplate.braintree.helpers({\n  packageData() {\n    const packageData = Packages.findOne({\n      name: \"reaction-braintree\"\n    });\n    return packageData;\n  }\n});\n\nTemplate.braintree.events({\n  \"click [data-event-action=showBraintreeSettings]\"() {\n    Reaction.showActionView();\n  }\n});\n\nAutoForm.hooks({\n  \"braintree-update-form\": {\n    onSuccess() {\n      return Alerts.toast(i18next.t(\"admin.settings.saveSuccess\"), \"success\");\n    },\n    onError(error) {\n      return Alerts.toast(`${i18next.t(\"admin.settings.saveFailed\")} ${error}`, \"error\");\n    }\n  }\n});\n","import { Meteor } from \"meteor/meteor\";\n\nexport const Braintree =\n  {// authorize submits a payment authorization to Braintree\n    authorize(cardData, paymentData, callback) {\n      Meteor.call(\"braintreeSubmit\", \"authorize\", cardData, paymentData, callback);\n    }\n  };\n","import \"./checkout/braintree\";\nimport \"./settings/braintree\";\nimport \"./api/braintree\";\n","import SimpleSchema from \"simpl-schema\";\nimport { check } from \"meteor/check\";\nimport { Tracker } from \"meteor/tracker\";\nimport { PackageConfig } from \"/lib/collections/schemas/registry\";\nimport { registerSchema } from \"@reactioncommerce/schemas\";\n\n/**\n *  Meteor.settings.braintree =\n *    mode: false  #sandbox\n *    merchant_id: \"\"\n *    public_key: \"\"\n *    private_key: \"\"\n *  see: https://developers.braintreepayments.com/javascript+node/reference\n */\n\nexport const BraintreePackageConfig = PackageConfig.clone().extend({\n  // Remove blackbox: true from settings obj\n  \"settings\": {\n    type: Object,\n    optional: true,\n    blackbox: false,\n    defaultValue: {}\n  },\n  \"settings.mode\": {\n    type: Boolean,\n    defaultValue: false\n  },\n  \"settings.merchant_id\": {\n    type: String,\n    label: \"Merchant ID\",\n    optional: false\n  },\n  \"settings.public_key\": {\n    type: String,\n    label: \"Public Key\",\n    optional: false\n  },\n  \"settings.private_key\": {\n    type: String,\n    label: \"Private Key\",\n    optional: false\n  },\n  \"settings.reaction-braintree\": {\n    type: Object,\n    defaultValue: {}\n  },\n  \"settings.reaction-braintree.support\": {\n    type: Array,\n    label: \"Payment provider supported methods\"\n  },\n  \"settings.reaction-braintree.support.$\": {\n    type: String,\n    allowedValues: [\"Authorize\", \"De-authorize\", \"Capture\", \"Refund\"]\n  }\n});\n\nregisterSchema(\"BraintreePackageConfig\", BraintreePackageConfig);\n\nexport const BraintreePayment = new SimpleSchema({\n  payerName: {\n    type: String,\n    label: \"Cardholder name\"\n  },\n  cardNumber: {\n    type: String,\n    min: 12,\n    max: 19,\n    label: \"Card number\"\n  },\n  expireMonth: {\n    type: String,\n    max: 2,\n    label: \"Expiration month\"\n  },\n  expireYear: {\n    type: String,\n    max: 4,\n    label: \"Expiration year\"\n  },\n  cvv: {\n    type: String,\n    max: 4,\n    label: \"CVV\"\n  }\n}, { check, tracker: Tracker });\n\nregisterSchema(\"BraintreePayment\", BraintreePayment);\n","export * from \"./braintree\";\n","/* eslint camelcase: 0 */\nimport { Meteor } from \"meteor/meteor\";\nimport { Template } from \"meteor/templating\";\nimport { AutoForm } from \"meteor/aldeed:autoform\";\nimport { $ } from \"meteor/jquery\";\nimport { getCardType } from \"/client/modules/core/helpers/globals\";\nimport { Router } from \"/client/api\";\nimport { Cart, Orders } from \"/lib/collections\";\nimport { StripePayment } from \"../../lib/collections/schemas\";\n\nlet submitting = false;\n\n//\n// local helpers\n//\nfunction uiEnd(template, buttonText) {\n  template.$(\":input\").removeAttr(\"disabled\");\n  template.$(\"#btn-complete-order\").text(buttonText);\n  return template.$(\"#btn-processing\").addClass(\"hidden\");\n}\n\nfunction paymentAlert(errorMessage) {\n  return $(\".alert\").removeClass(\"hidden\").text(errorMessage);\n}\n\nfunction hidePaymentAlert() {\n  return $(\".alert\").addClass(\"hidden\").text(\"\");\n}\n\nfunction handleStripeSubmitError(error) {\n  // Match error on card number. Not submitted to stripe\n  if (error && error.reason && error.reason === \"Match failed\") {\n    const message = \"Your card number is invalid. Please check the number and try again\";\n    return paymentAlert(message);\n  }\n\n  // this is a server message with a client-sanitized message\n  if (error && error.message) {\n    return paymentAlert(error.message);\n  }\n}\n\n// Validation helpers\nfunction luhnValid(x) {\n  return [...x].reverse().reduce((sum, c, i) => {\n    let d = parseInt(c, 10);\n    if (i % 2 !== 0) { d *= 2; }\n    if (d > 9) { d -= 9; }\n    return sum + d;\n  }, 0) % 10 === 0;\n}\n\nfunction validCardNumber(x) {\n  return /^[0-9]{13,16}$/.test(x) && luhnValid(x);\n}\n\nfunction validExpireMonth(x) {\n  return /^[0-9]{1,2}$/.test(x);\n}\n\nfunction validExpireYear(x) {\n  return /^[0-9]{4}$/.test(x);\n}\n\nfunction validCVV(x) {\n  return /^[0-9]{3,4}$/.test(x);\n}\n\n//\n// Template helpers\n//\nTemplate.stripePaymentForm.helpers({\n  StripePayment() {\n    return StripePayment;\n  }\n});\n\n// This creates an autorun block that monitors the CompletedCartOrder subscription\n// and once an order for the cart we're checking out with is available,\n// We trigger a Router.go to the cart/completed page.\nTemplate.stripePaymentForm.onCreated(function () {\n  // we need to cache the current \"checkoutCart\" because a new cart is created during copyCartToOrder\n  const checkoutCart = Cart.findOne({ userId: Meteor.userId() });\n  const orderSub = Meteor.subscribe(\"CompletedCartOrder\", Meteor.userId(), checkoutCart._id);\n  // Watch the orders subscription, once the order is created redirect to cart/completed\n  this.autorun(() => {\n    if (orderSub.ready()) {\n      const order = Orders.findOne({ cartId: checkoutCart._id });\n      if (order) {\n        Router.go(\"cart/completed\", {}, { _id: checkoutCart._id });\n      }\n    }\n  });\n});\n\n//\n// autoform handling\n//\nAutoForm.addHooks(\"stripe-payment-form\", {\n  onSubmit(doc) {\n    submitting = true;\n    hidePaymentAlert();\n    const { template } = this;\n    const cart = Cart.findOne({ userId: Meteor.userId() });\n\n    // validate card data\n    // also validated on server\n    if (!validCardNumber(doc.cardNumber)) {\n      submitting = false;\n      const error = { message: \"Your card number is incorrect\" };\n      handleStripeSubmitError(error);\n      uiEnd(template, \"Resubmit payment\");\n      return false;\n    }\n\n    if (!validExpireMonth(doc.expireMonth) || !validExpireYear(doc.expireYear)) {\n      submitting = false;\n      const error = { message: \"Your expiration date is incorrect\" };\n      handleStripeSubmitError(error);\n      uiEnd(template, \"Resubmit payment\");\n      return false;\n    }\n\n    if (!validCVV(doc.cvv)) {\n      submitting = false;\n      const error = { message: \"Your cvv is incorrect\" };\n      handleStripeSubmitError(error);\n      uiEnd(template, \"Resubmit payment\");\n      return false;\n    }\n\n\n    const cardData = {\n      name: doc.payerName,\n      number: doc.cardNumber,\n      expire_month: doc.expireMonth,\n      expire_year: doc.expireYear,\n      cvv2: doc.cvv,\n      type: getCardType(doc.cardNumber)\n    };\n\n    // Use apply instead of call here to prevent the flash of \"your cart is empty\"\n    // that happens when we wait for the cart subscription to update before forwarding\n    Meteor.apply(\"stripe/payment/createCharges\", [\"authorize\", cardData, cart._id], {\n      onResultReceived: (error, result) => {\n        submitting = false;\n        if (error) {\n          handleStripeSubmitError(error);\n          uiEnd(template, \"Resubmit payment\");\n        } else if (result.success) {\n          Router.go(\"cart/completed\", {}, {\n            _id: cart._id\n          });\n        } else {\n          handleStripeSubmitError(result.error);\n          uiEnd(template, \"Resubmit payment\");\n        }\n      }\n    });\n    return false;\n  },\n  beginSubmit() {\n    this.template.$(\":input\").attr(\"disabled\", true);\n    this.template.$(\"#btn-complete-order\").text(\"Submitting \");\n    return this.template.$(\"#btn-processing\").removeClass(\"hidden\");\n  },\n  endSubmit() {\n    if (!submitting) {\n      return uiEnd(this.template, \"Complete your order\");\n    }\n  }\n});\n","import { Meteor } from \"meteor/meteor\";\nimport { Template } from \"meteor/templating\";\nimport { Reaction, Router, i18next } from \"client/api\";\nimport { Components } from \"@reactioncommerce/reaction-components\";\n\nTemplate.stripeConnectAuthorize.onCreated(() => {\n  const shopId = Reaction.Router.getQueryParam(\"state\");\n  const authCode = Reaction.Router.getQueryParam(\"code\");\n  const error = Reaction.Router.getQueryParam(\"error\");\n\n  if (error) {\n    return Alerts.toast(`${i18next.t(\"admin.connect.shopUserDeniedRequest\")}`, \"error\");\n  }\n\n  if (shopId && authCode) {\n    Meteor.call(\"stripe/connect/authorizeMerchant\", shopId, authCode, (err) => {\n      if (error) {\n        Alerts.toast(`${i18next.t(\"admin.connect.stripeConnectAccountLinkFailure\")} ${err}`, \"error\");\n      } else {\n        Alerts.toast(`${i18next.t(\"admin.connect.stripeConnectAccountLinkSuccess\")}`, \"success\");\n      }\n      Router.go(\"/\");\n    });\n  }\n});\n\nTemplate.stripeConnectAuthorize.helpers({\n  loading() {\n    return Components.Loading;\n  }\n});\n","import { Template } from \"meteor/templating\";\n\nimport { Reaction } from \"/client/api\";\n\nTemplate.stripeConnectMerchantSignup.helpers({\n  stripeConnectIsConnected() {\n    const stripe = Reaction.getPackageSettingsWithOptions({\n      shopId: Reaction.getShopId(),\n      name: \"reaction-stripe\"\n    });\n    return stripe && stripe.settings && stripe.settings.connectAuth && stripe.settings.connectAuth.access_token;\n  }\n});\n","import { Template } from \"meteor/templating\";\nimport { AutoForm } from \"meteor/aldeed:autoform\";\nimport { Reaction, i18next } from \"/client/api\";\nimport { Packages } from \"/lib/collections\";\nimport { StripePackageConfig } from \"../../lib/collections/schemas\";\n\nTemplate.stripeSettings.helpers({\n  StripePackageConfig() {\n    return StripePackageConfig;\n  },\n  packageData() {\n    return Packages.findOne({\n      name: \"reaction-stripe\",\n      shopId: Reaction.getShopId()\n    });\n  },\n  marketplaceEnabled() {\n    const marketplace = Reaction.getMarketplaceSettings();\n    return marketplace && marketplace.enabled;\n  }\n});\n\nTemplate.stripe.helpers({\n  packageData() {\n    return Packages.findOne({\n      name: \"reaction-stripe\",\n      shopId: Reaction.getShopId()\n    });\n  }\n});\n\nTemplate.stripe.events({\n  \"click [data-event-action=showStripeSettings]\"() {\n    Reaction.showActionView();\n  }\n});\n\nAutoForm.hooks({\n  \"stripe-update-form\": {\n    onSuccess() {\n      return Alerts.toast(i18next.t(\"admin.settings.saveSuccess\"), \"success\");\n    },\n    onError(error) {\n      return Alerts.toast(`${i18next.t(\"admin.settings.saveFailed\")} ${error}`, \"error\");\n    }\n  }\n});\n","import \"./checkout/stripe.html\";\nimport \"./checkout/stripe.js\";\n\nimport \"./settings/stripe.html\";\nimport \"./settings/stripe.js\";\n\nimport \"./settings/merchant-settings.html\";\nimport \"./settings/merchant-settings.js\";\n\nimport \"./settings/authorize.html\";\nimport \"./settings/authorize.js\";\n","export * from \"./stripe\";\n","import SimpleSchema from \"simpl-schema\";\nimport { check } from \"meteor/check\";\nimport { Tracker } from \"meteor/tracker\";\nimport { PackageConfig } from \"/lib/collections/schemas/registry\";\nimport { registerSchema } from \"@reactioncommerce/schemas\";\n/*\n *  Meteor.settings.stripe =\n *    mode: false  #sandbox\n *    api_key: \"\"\n *  see: https://stripe.com/docs/api\n */\n\nconst StripeConnectAuthorizationCredentials = new SimpleSchema({\n  token_type: { // eslint-disable-line camelcase\n    type: String\n  },\n  stripe_publishable_key: { // eslint-disable-line camelcase\n    type: String\n  },\n  scope: {\n    type: String\n  },\n  livemode: {\n    type: Boolean\n  },\n  stripe_user_id: { // eslint-disable-line camelcase\n    type: String\n  },\n  refresh_token: { // eslint-disable-line camelcase\n    type: String\n  },\n  access_token: { // eslint-disable-line camelcase\n    type: String\n  }\n}, { check, tracker: Tracker });\n\nregisterSchema(\"StripeConnectAuthorizationCredentials\", StripeConnectAuthorizationCredentials);\n\nexport const StripePackageConfig = PackageConfig.clone().extend({\n  // Remove blackbox: true from settings obj\n  \"settings\": {\n    type: Object,\n    optional: true,\n    blackbox: false,\n    defaultValue: {}\n  },\n  \"settings.mode\": {\n    type: Boolean,\n    defaultValue: false\n  },\n  \"settings.api_key\": {\n    type: String,\n    label: \"API Secret Key\"\n  },\n  // This field only applies to marketplace style orders where a payment is taken on behalf of another store\n  \"settings.applicationFee\": {\n    type: Number,\n    label: \"Percentage Application Fee\",\n    optional: true,\n    defaultValue: 5\n  },\n  \"settings.connectAuth\": {\n    type: StripeConnectAuthorizationCredentials,\n    label: \"Connect Authorization Credentials\",\n    optional: true\n  },\n  \"settings.reaction-stripe\": {\n    type: Object,\n    defaultValue: {}\n  },\n  \"settings.reaction-stripe.support\": {\n    type: Array,\n    label: \"Payment provider supported methods\"\n  },\n  \"settings.reaction-stripe.support.$\": {\n    type: String,\n    allowedValues: [\"Authorize\", \"De-authorize\", \"Capture\", \"Refund\"]\n  },\n  \"settings.public\": {\n    type: Object,\n    defaultValue: {}\n  },\n  // Public Settings\n  \"settings.public.client_id\": {\n    type: String,\n    label: \"Public Client ID\",\n    optional: true\n  }\n});\n\nregisterSchema(\"StripePackageConfig\", StripePackageConfig);\n\nexport const StripePayment = new SimpleSchema({\n  payerName: {\n    type: String,\n    label: \"Cardholder name\"\n  },\n  cardNumber: {\n    type: String,\n    min: 13,\n    max: 16,\n    label: \"Card number\"\n  },\n  expireMonth: {\n    type: String,\n    max: 2,\n    label: \"Expiration month\"\n  },\n  expireYear: {\n    type: String,\n    max: 4,\n    label: \"Expiration year\"\n  },\n  cvv: {\n    type: String,\n    max: 4,\n    label: \"CVV\"\n  }\n}, { check, tracker: Tracker });\n\nregisterSchema(\"StripePayment\", StripePayment);\n","import { Components } from \"@reactioncommerce/reaction-components\";\nimport { Template } from \"meteor/templating\";\n\nTemplate.ProductAdmin.helpers({\n  component() {\n    const currentData = Template.currentData() || {};\n\n    return {\n      ...currentData,\n      component: Components.ProductAdmin\n    };\n  }\n});\n","export { default as ProductAdmin } from \"./productAdmin.js\";\n","import { isEqual } from \"lodash\";\nimport React, { Component } from \"react\";\nimport PropTypes from \"prop-types\";\nimport Velocity from \"velocity-animate\";\nimport \"velocity-animate/velocity.ui\";\nimport { Components } from \"@reactioncommerce/reaction-components\";\nimport { Router } from \"/client/api\";\nimport update from \"immutability-helper\";\n\nconst fieldNames = [\n  \"title\",\n  \"handle\",\n  \"subtitle\",\n  \"vendor\",\n  \"description\",\n  \"origincountry\",\n  \"facebookMsg\",\n  \"twitterMsg\",\n  \"pinterestMsg\",\n  \"googleplusMsg\"\n];\n\nconst fieldGroups = {\n  title: { group: \"productDetails\" },\n  handle: { group: \"productDetails\" },\n  pageTitle: { group: \"productDetails\" },\n  vendor: { group: \"productDetails\" },\n  description: { group: \"productDetails\" },\n  facebookMsg: { group: \"social\" },\n  twitterMsg: { group: \"social\" },\n  pinterestMsg: { group: \"social\" },\n  googleplusMsg: { group: \"social\" },\n  hashtags: { group: \"hashtags\" },\n  metafields: { group: \"metafields\" }\n};\n\nclass ProductAdmin extends Component {\n  constructor(props) {\n    super(props);\n\n    this.state = {\n      expandedCard: this.fieldGroupForFieldName(props.editFocus),\n      product: props.product,\n      viewProps: props.viewProps\n    };\n  }\n\n  componentWillReceiveProps(nextProps) {\n    const nextProduct = nextProps.product || {};\n    const currentProduct = this.props.product || {};\n\n    if (!isEqual(nextProduct, currentProduct)) {\n      for (const fieldName of fieldNames) {\n        if (nextProduct[fieldName] !== currentProduct[fieldName]) {\n          this.animateFieldFlash(fieldName);\n        }\n      }\n    }\n\n    const cardGroupName = this.fieldGroupForFieldName(nextProps.editFocus);\n\n    this.setState({\n      expandedCard: cardGroupName,\n      viewProps: nextProps.viewProps\n    });\n\n    this.setState({\n      product: nextProps.product\n    });\n  }\n\n  fieldGroupForFieldName(field) {\n    // Other wise, if a field was passed\n    // const fieldName = this.state.viewProps.field;\n\n    let fieldName;\n\n    // If the field is an array of field name\n    if (Array.isArray(field) && field.length) {\n      // Use the first field name\n      [fieldName] = field;\n    } else {\n      fieldName = field;\n    }\n\n    const fieldData = fieldGroups[fieldName];\n\n    if (fieldData && fieldData.group) {\n      return fieldData.group;\n    }\n\n    return fieldName;\n  }\n\n  animateFieldFlash(fieldName) {\n    const fieldRef = this.refs[`${fieldName}Input`];\n\n    if (fieldRef) {\n      const { input } = fieldRef.refs;\n\n      Velocity.RunSequence([\n        { e: input, p: { backgroundColor: \"#e2f2e2\" }, o: { duration: 200 } },\n        { e: input, p: { backgroundColor: \"#fff\" }, o: { duration: 100 } }\n      ]);\n    }\n  }\n\n\n  handleCardExpand = (event, card, cardName, isExpanded) => {\n    if (this.props.onCardExpand) {\n      this.props.onCardExpand(isExpanded ? cardName : undefined);\n    }\n  }\n\n  handleDeleteProduct = () => {\n    if (this.props.onDeleteProduct) {\n      this.props.onDeleteProduct(this.props.product);\n    }\n  }\n\n  handleRestoreProduct = () => {\n    if (this.props.onRestoreProduct) {\n      this.props.onRestoreProduct(this.props.product);\n    }\n  }\n\n\n  handleFieldChange = (event, value, field) => {\n    const newState = update(this.state, {\n      product: {\n        $merge: {\n          [field]: value\n        }\n      }\n    });\n\n    this.setState(newState, () => {\n      if (this.props.onFieldChange) {\n        this.props.onFieldChange(field, value);\n      }\n    });\n  }\n\n  handleSelectChange = (value, field) => {\n    if (this.props.onProductFieldSave) {\n      this.props.onProductFieldSave(this.product._id, field, value);\n    }\n  }\n\n  handleToggleVisibility = () => {\n    if (this.props.onProductFieldSave) {\n      this.props.onProductFieldSave(this.product._id, \"isVisible\", !this.product.isVisible);\n    }\n  }\n\n  handleMetaChange = (event, metafield, index) => {\n    if (this.props.onMetaChange) {\n      if (index >= 0) {\n        const { product } = this.state;\n        product.metafields[index] = metafield;\n\n        this.setState({\n          product\n        });\n      } else {\n        this.props.onMetaChange(metafield);\n      }\n    }\n  }\n\n  handleFieldBlur = (event, value, field) => {\n    if (this.props.onProductFieldSave) {\n      this.props.onProductFieldSave(this.product._id, field, value);\n    }\n  }\n\n  handleMetaSave = (event, metafield, index) => {\n    if (this.props.onMetaSave) {\n      this.props.onMetaSave(this.product._id, metafield, index);\n    }\n  }\n\n  handleMetaRemove = (event, metafield, index) => {\n    if (this.props.onMetaRemove) {\n      this.props.onMetaRemove(this.product._id, metafield, index);\n    }\n  }\n\n  get product() {\n    return this.state.product || this.props.product || {};\n  }\n\n  get permalink() {\n    if (this.props.product) {\n      return Router.pathFor(\"product\", {\n        hash: {\n          handle: this.props.product.handle\n        }\n      });\n    }\n\n    return \"\";\n  }\n\n  renderProductVisibilityLabel() {\n    if (this.product.isVisible) {\n      return (\n        <Components.Translation defaultValue=\"Product is visible\" i18nKey=\"productDetailEdit.productIsVisible\" />\n      );\n    }\n\n    return (\n      <Components.Translation defaultValue=\"Product is not visible\" i18nKey=\"productDetailEdit.productIsNotVisible\" />\n    );\n  }\n\n  isExpanded = (groupName) => this.state.expandedCard === groupName\n\n  render() {\n    return (\n      <Components.CardGroup>\n        <Components.Card\n          expanded={this.isExpanded(\"productDetails\")}\n          name={\"productDetails\"}\n          onExpand={this.handleCardExpand}\n        >\n          <Components.CardHeader\n            actAsExpander={true}\n            i18nKeyTitle=\"productDetailEdit.productSettings\"\n            title=\"Product Settings\"\n            onChange={this.handleFieldChange}\n          />\n          <Components.CardBody expandable={true}>\n            <Components.Select\n              clearable={false}\n              i18nKeyLabel=\"productDetailEdit.template\"\n              i18nKeyPlaceholder=\"productDetailEdit.templateSelectPlaceholder\"\n              label=\"Template\"\n              name=\"template\"\n              onChange={this.handleSelectChange}\n              options={this.props.templates}\n              placeholder=\"Select a template\"\n              value={this.product.template}\n            />\n            <Components.TextField\n              i18nKeyLabel=\"productDetailEdit.title\"\n              i18nKeyPlaceholder=\"productDetailEdit.title\"\n              label=\"Title\"\n              name=\"title\"\n              onBlur={this.handleFieldBlur}\n              onChange={this.handleFieldChange}\n              onReturnKeyDown={this.handleFieldBlur}\n              placeholder=\"Title\"\n              ref=\"titleInput\"\n              value={this.product.title}\n            />\n            <Components.TextField\n              helpText={this.permalink}\n              i18nKeyLabel=\"productDetailEdit.permalink\"\n              i18nKeyPlaceholder=\"productDetailEdit.permalink\"\n              label=\"Permalink\"\n              name=\"handle\"\n              onBlur={this.handleFieldBlur}\n              onChange={this.handleFieldChange}\n              onReturnKeyDown={this.handleFieldBlur}\n              placeholder=\"Permalink\"\n              ref=\"handleInput\"\n              value={this.product.handle}\n            />\n            <Components.TextField\n              i18nKeyLabel=\"productDetailEdit.pageTitle\"\n              i18nKeyPlaceholder=\"productDetailEdit.pageTitle\"\n              label=\"Subtitle\"\n              name=\"pageTitle\"\n              onBlur={this.handleFieldBlur}\n              onChange={this.handleFieldChange}\n              onReturnKeyDown={this.handleFieldBlur}\n              placeholder=\"Subtitle\"\n              ref=\"subtitleInput\"\n              value={this.product.pageTitle}\n            />\n            <Components.TextField\n              i18nKeyLabel=\"productDetailEdit.vendor\"\n              i18nKeyPlaceholder=\"productDetailEdit.vendor\"\n              label=\"Vendor\"\n              name=\"vendor\"\n              onBlur={this.handleFieldBlur}\n              onChange={this.handleFieldChange}\n              onReturnKeyDown={this.handleFieldBlur}\n              placeholder=\"Vendor\"\n              ref=\"vendorInput\"\n              value={this.product.vendor}\n            />\n            <Components.TextField\n              i18nKeyLabel=\"productDetailEdit.description\"\n              i18nKeyPlaceholder=\"productDetailEdit.description\"\n              label=\"Description\"\n              multiline={true}\n              name=\"description\"\n              onBlur={this.handleFieldBlur}\n              onChange={this.handleFieldChange}\n              placeholder=\"Description\"\n              ref=\"descriptionInput\"\n              value={this.product.description}\n            />\n            <Components.Select\n              clearable={false}\n              i18nKeyLabel=\"productDetailEdit.originCountry\"\n              i18nKeyPlaceholder=\"productDetailEdit.originCountry\"\n              label=\"Origin Country\"\n              name=\"originCountry\"\n              onChange={this.handleSelectChange}\n              placeholder=\"Select a Country\"\n              ref=\"countryOfOriginInput\"\n              value={this.product.originCountry}\n              options={this.props.countries}\n            />\n          </Components.CardBody>\n        </Components.Card>\n        <Components.Card\n          expanded={this.isExpanded(\"social\")}\n          name={\"social\"}\n          onExpand={this.handleCardExpand}\n        >\n          <Components.CardHeader\n            actAsExpander={true}\n            i18nKeyTitle=\"social.socialTitle\"\n            title=\"Social\"\n          />\n          <Components.CardBody expandable={true}>\n            <Components.TextField\n              i18nKeyLabel=\"productDetailEdit.facebookMsg\"\n              i18nKeyPlaceholder=\"productDetailEdit.facebookMsg\"\n              label=\"Facebook Message\"\n              multiline={true}\n              name=\"facebookMsg\"\n              onBlur={this.handleFieldBlur}\n              onChange={this.handleFieldChange}\n              ref=\"facebookMsgInput\"\n              value={this.product.facebookMsg}\n            />\n            <Components.TextField\n              i18nKeyLabel=\"productDetailEdit.twitterMsg\"\n              i18nKeyPlaceholder=\"productDetailEdit.twitterMsg\"\n              label=\"Twitter Message\"\n              multiline={true}\n              name=\"twitterMsg\"\n              onBlur={this.handleFieldBlur}\n              onChange={this.handleFieldChange}\n              ref=\"twitterMsgInput\"\n              value={this.product.twitterMsg}\n            />\n            <Components.TextField\n              i18nKeyLabel=\"productDetailEdit.pinterestMsg\"\n              i18nKeyPlaceholder=\"productDetailEdit.pinterestMsg\"\n              label=\"Pinterest Message\"\n              multiline={true}\n              name=\"pinterestMsg\"\n              onBlur={this.handleFieldBlur}\n              onChange={this.handleFieldChange}\n              ref=\"pinterestMsgInput\"\n              value={this.product.pinterestMsg}\n            />\n            <Components.TextField\n              i18nKeyLabel=\"productDetailEdit.googleplusMsg\"\n              i18nKeyPlaceholder=\"productDetailEdit.googleplusMsg\"\n              label=\"Google+ Message\"\n              multiline={true}\n              name=\"googleplusMsg\"\n              onBlur={this.handleFieldBlur}\n              onChange={this.handleFieldChange}\n              ref=\"googleplusMsgInput\"\n              value={this.product.googleplusMsg}\n            />\n          </Components.CardBody>\n        </Components.Card>\n\n        <Components.Card\n          expanded={this.isExpanded(\"hashtags\")}\n          name={\"hashtags\"}\n          onExpand={this.handleCardExpand}\n        >\n          <Components.CardHeader\n            actAsExpander={true}\n            i18nKeyTitle=\"productDetail.tags\"\n            title=\"Tags\"\n          />\n          <Components.CardBody expandable={true}>\n            <Components.TagList\n              editable={this.props.editable}\n              enableNewTagForm={true}\n              product={this.product}\n              tagProps={{\n                fullWidth: true\n              }}\n            />\n          </Components.CardBody>\n        </Components.Card>\n\n        <Components.Card\n          expanded={this.isExpanded(\"metafields\")}\n          name={\"metafields\"}\n          onExpand={this.handleCardExpand}\n        >\n          <Components.CardHeader\n            actAsExpander={true}\n            i18nKeyTitle=\"productDetailEdit.details\"\n            title=\"Details\"\n          />\n          <Components.CardBody expandable={true}>\n            <Components.Metadata\n              metafields={this.product.metafields}\n              newMetafield={this.props.newMetafield}\n              onMetaChange={this.handleMetaChange}\n              onMetaRemove={this.handleMetaRemove}\n              onMetaSave={this.handleMetaSave}\n            />\n          </Components.CardBody>\n        </Components.Card>\n      </Components.CardGroup>\n    );\n  }\n}\n\nProductAdmin.propTypes = {\n  countries: PropTypes.arrayOf(PropTypes.object),\n  editFocus: PropTypes.oneOfType([PropTypes.string, PropTypes.arrayOf(PropTypes.string)]),\n  editable: PropTypes.bool,\n  handleFieldBlur: PropTypes.func,\n  handleFieldChange: PropTypes.func,\n  handleProductFieldChange: PropTypes.func,\n  newMetafield: PropTypes.object,\n  onCardExpand: PropTypes.func,\n  onDeleteProduct: PropTypes.func,\n  onFieldChange: PropTypes.func,\n  onMetaChange: PropTypes.func,\n  onMetaRemove: PropTypes.func,\n  onMetaSave: PropTypes.func,\n  onProductFieldSave: PropTypes.func,\n  onRestoreProduct: PropTypes.func,\n  product: PropTypes.object,\n  revisonDocumentIds: PropTypes.arrayOf(PropTypes.string),\n  templates: PropTypes.arrayOf(PropTypes.shape({\n    label: PropTypes.string,\n    value: PropTypes.any\n  })),\n  viewProps: PropTypes.object\n};\n\nexport default ProductAdmin;\n","import React, { Component } from \"react\";\nimport PropTypes from \"prop-types\";\nimport _ from \"lodash\";\nimport { compose } from \"recompose\";\nimport { registerComponent, composeWithTracker } from \"@reactioncommerce/reaction-components\";\nimport { Meteor } from \"meteor/meteor\";\nimport { Reaction } from \"/client/api\";\nimport { getPrimaryMediaForItem, ReactionProduct } from \"/lib/api\";\nimport { Tags, Templates } from \"/lib/collections\";\nimport { Countries } from \"/client/collections\";\nimport { ProductAdmin } from \"../components\";\n\nconst wrapComponent = (Comp) => (\n  class ProductAdminContainer extends Component {\n    static propTypes = {\n      product: PropTypes.object,\n      tags: PropTypes.arrayOf(PropTypes.object)\n    }\n\n    constructor(props) {\n      super(props);\n\n      this.state = {\n        newMetafield: {\n          key: \"\",\n          value: \"\"\n        }\n      };\n    }\n\n    handleCardExpand = (cardName) => {\n      Reaction.state.set(\"edit/focus\", cardName);\n    }\n\n    handleDeleteProduct = (product) => {\n      ReactionProduct.archiveProduct(product || this.product);\n    }\n\n    handleProductFieldSave = (productId, fieldName, value) => {\n      let updateValue = value;\n      // special case, slugify handles.\n      if (fieldName === \"handle\") {\n        updateValue = Reaction.getSlug(value);\n      }\n      Meteor.call(\"products/updateProductField\", productId, fieldName, updateValue, (error) => {\n        if (error) {\n          Alerts.toast(error.message, \"error\");\n          this.forceUpdate();\n        }\n      });\n    }\n\n\n    handleMetaChange = (metafield) => {\n      const newState = {\n        newMetafield: metafield\n      };\n\n      this.setState(newState);\n    }\n\n    handleMetafieldSave = (productId, metafield, index) => {\n      // update existing metafield\n      if (index >= 0) {\n        Meteor.call(\"products/updateMetaFields\", productId, metafield, index);\n      } else if (metafield.key && metafield.value) {\n        Meteor.call(\"products/updateMetaFields\", productId, metafield);\n      }\n\n      this.setState({\n        newMetafield: {\n          key: \"\",\n          value: \"\"\n        }\n      });\n    }\n\n    handleMetaRemove = (productId, metafield) => {\n      Meteor.call(\"products/removeMetaFields\", productId, metafield);\n    }\n\n    handleProductRestore = (product) => {\n      Meteor.call(\"products/updateProductField\", product._id, \"isDeleted\", false);\n    }\n\n    render() {\n      return (\n        <Comp\n          newMetafield={this.state.newMetafield}\n          onCardExpand={this.handleCardExpand}\n          onDeleteProduct={this.handleDeleteProduct}\n          onMetaChange={this.handleMetaChange}\n          onMetaRemove={this.handleMetaRemove}\n          onMetaSave={this.handleMetafieldSave}\n          onProductFieldSave={this.handleProductFieldSave}\n          onRestoreProduct={this.handleProductRestore}\n          {...this.props}\n        />\n      );\n    }\n  }\n);\n\nfunction composer(props, onData) {\n  const product = ReactionProduct.selectedProduct();\n  const editable = Reaction.hasAdminAccess();\n  let tags;\n  let media;\n  let revisonDocumentIds;\n\n  if (product) {\n    if (_.isArray(product.hashtags)) {\n      tags = _.map(product.hashtags, (id) => Tags.findOne(id));\n    }\n\n    const selectedVariant = ReactionProduct.selectedVariant();\n\n    if (selectedVariant) {\n      media = getPrimaryMediaForItem({\n        productId: product._id,\n        variantId: selectedVariant._id\n      });\n    }\n\n    revisonDocumentIds = [product._id];\n\n    const templates = Templates.find({\n      parser: \"react\",\n      provides: \"template\",\n      templateFor: { $in: [\"pdp\"] },\n      enabled: true\n    }).map((template) => ({\n      label: template.title,\n      value: template.name\n    }));\n\n    const countries = Countries.find({}).fetch();\n\n    onData(null, {\n      editFocus: Reaction.state.get(\"edit/focus\") || \"productDetails\",\n      product,\n      media,\n      tags,\n      revisonDocumentIds,\n      templates,\n      countries,\n      editable\n    });\n  } else {\n    onData(null, {\n      editFocus: Reaction.state.get(\"edit/focus\") || \"productDetails\"\n    });\n  }\n}\n\nregisterComponent(\"ProductAdmin\", ProductAdmin, [\n  composeWithTracker(composer),\n  wrapComponent\n]);\n\n// Decorate component and export\nexport default compose(\n  composeWithTracker(composer),\n  wrapComponent\n)(ProductAdmin);\n","import \"./templates/productAdmin.html\";\nimport \"./templates/productAdmin.js\";\n\nexport { default as ProductAdmin } from \"./containers/productAdmin\";\n","import { Components } from \"@reactioncommerce/reaction-components\";\nimport { Template } from \"meteor/templating\";\n\nTemplate.productDetailSimple.helpers({\n  PDC() {\n    return Components.ProductDetail;\n  }\n});\n\nTemplate.productDetailSimpleToolbar.helpers({\n  PublishContainerComponent() {\n    return {\n      component: Components.ProductPublish\n    };\n  }\n});\n","import React, { Component } from \"react\";\nimport PropTypes from \"prop-types\";\nimport { Components, registerComponent } from \"@reactioncommerce/reaction-components\";\n\nclass AddToCartButton extends Component {\n  get hasVariants() {\n    return Array.isArray(this.props.variants) && this.props.variants.length > 0;\n  }\n\n  handleCartQuantityChange = (event) => {\n    if (this.props.onCartQuantityChange) {\n      this.props.onCartQuantityChange(event, event.target.value);\n    }\n  }\n\n  render() {\n    if (this.hasVariants) {\n      return (\n        <div className=\"pdp add-to-cart block\">\n          <input\n            className=\"form-control input-md\"\n            id=\"add-to-cart-quantity\"\n            min=\"1\"\n            name=\"addToCartQty\"\n            onChange={this.handleCartQuantityChange}\n            type=\"number\"\n            value={this.props.cartQuantity}\n          />\n          <button\n            className=\"input-group-addon add-to-cart-text js-add-to-cart\"\n            data-i18n=\"productDetail.addToCart\"\n            onClick={this.props.onClick || this.props.onAddToCart}\n          >\n            <Components.Translation defaultValue=\"Add to cart\" i18nKey=\"productDetail.addToCart\" />\n          </button>\n        </div>\n      );\n    }\n\n    if (this.props.editable && this.hasVariants === false) {\n      return (\n        <Components.Alert>\n          <Components.Translation defaultValue=\"Add options to enable 'Add to Cart' button\" i18nKey=\"productVariant.addVariantOptions\" />\n        </Components.Alert>\n      );\n    }\n    return null;\n  }\n}\n\nAddToCartButton.propTypes = {\n  cartQuantity: PropTypes.number,\n  editable: PropTypes.bool,\n  onAddToCart: PropTypes.func,\n  onCartQuantityChange: PropTypes.func,\n  onClick: PropTypes.func,\n  variants: PropTypes.arrayOf(PropTypes.object)\n};\n\nregisterComponent(\"AddToCartButton\", AddToCartButton);\n\nexport default AddToCartButton;\n","import React, { Component } from \"react\";\nimport PropTypes from \"prop-types\";\nimport classnames from \"classnames\";\nimport { Components, registerComponent } from \"@reactioncommerce/reaction-components\";\nimport { Validation } from \"@reactioncommerce/schemas\";\nimport { ProductVariant } from \"/lib/collections/schemas/products\";\n\n\nclass ChildVariant extends Component {\n  constructor(props) {\n    super(props);\n\n    this.validation = new Validation(ProductVariant);\n\n    this.state = {\n      invalidVariant: false\n    };\n  }\n\n  componentWillMount() {\n    this.variantValidation();\n  }\n\n\n  handleClick = (event) => {\n    if (this.props.onClick) {\n      this.props.onClick(event, this.props.variant);\n    }\n  }\n\n  get hasMedia() {\n    return Array.isArray(this.props.media) && this.props.media.length > 0;\n  }\n\n  get primaryMediaItem() {\n    if (this.hasMedia) {\n      return this.props.media[0];\n    }\n\n    return null;\n  }\n\n  renderInventoryStatus() {\n    const {\n      inventoryManagement,\n      inventoryPolicy\n    } = this.props.variant;\n\n    // If childVariant is sold out, show Sold Out badge\n    if (inventoryManagement && this.props.variant.inventoryQuantity <= 0) {\n      if (inventoryPolicy) {\n        return (\n          <span className=\"variant-qty-sold-out badge badge-danger child-variant-badge-label\">\n            <Components.Translation defaultValue=\"Sold Out!\" i18nKey=\"productDetail.soldOut\" />\n          </span>\n        );\n      }\n\n      return (\n        <span className=\"variant-qty-sold-out badge badge-info child-variant-badge-label\">\n          <Components.Translation defaultValue=\"Backorder\" i18nKey=\"productDetail.backOrder\" />\n        </span>\n      );\n    }\n\n    return null;\n  }\n\n  renderDeletionStatus() {\n    if (this.props.variant.isDeleted) {\n      return (\n        <span className=\"badge badge-danger\">\n          <Components.Translation className=\"deleted-variant-text\" defaultValue=\"Archived\" i18nKey=\"app.archived\" />\n        </span>\n      );\n    }\n\n    return null;\n  }\n\n  renderMedia() {\n    const media = this.primaryMediaItem;\n    if (!media) return null;\n\n    return (\n      <Components.MediaItem\n        source={media}\n        onClick={this.handleClick}\n      />\n    );\n  }\n\n  renderValidationButton = () => {\n    if (this.state.invalidVariant === true) {\n      return (\n        <Components.Badge\n          status=\"danger\"\n          indicator={true}\n          tooltip={\"Validation error\"}\n          i18nKeyTooltip={\"admin.tooltip.validationError\"}\n          onClick={this.handleClick}\n        />\n      );\n    }\n  }\n\n  // checks whether the product variant is validated\n  variantValidation = () => {\n    const invalidVariant = this.validation.validate(this.props.variant);\n\n    this.setState({\n      invalidVariant: !invalidVariant.isValid\n    });\n  }\n\n  render() {\n    const { variant } = this.props;\n    const classes = classnames({\n      \"btn\": true,\n      \"btn-default\": true,\n      \"variant-button\": true,\n      \"variant-detail-selected\": this.props.isSelected,\n      \"variant-deleted\": this.props.variant.isDeleted,\n      \"variant-notVisible\": !this.props.variant.isVisible\n    });\n\n    return (\n      <div className=\"variant-select-option\">\n        <button\n          className={classes}\n          onClick={this.handleClick}\n          type=\"button\"\n        >\n          {this.renderMedia()}\n          <span className=\"title\">{variant.optionTitle}</span>\n        </button>\n\n        <div className=\"variant-controls custom-variant-control\">\n          {this.renderDeletionStatus()}\n          {this.renderInventoryStatus()}\n          {this.renderValidationButton()}\n          {this.props.editButton}\n        </div>\n      </div>\n    );\n  }\n}\n\nChildVariant.propTypes = {\n  editButton: PropTypes.node,\n  isSelected: PropTypes.bool,\n  media: PropTypes.arrayOf(PropTypes.object),\n  onClick: PropTypes.func.isRequired,\n  soldOut: PropTypes.bool,\n  variant: PropTypes.object,\n  visibilityButton: PropTypes.node\n};\n\nregisterComponent(\"ChildVariant\", ChildVariant);\n\nexport default ChildVariant;\n","export { default as ProductDetail } from \"./productDetail\";\nexport { default as Variant } from \"./variant\";\nexport { default as VariantList } from \"./variantList\";\nexport { default as ChildVariant } from \"./childVariant\";\nexport { default as AddToCartButton } from \"./addToCartButton\";\nexport { default as ProductMetadata } from \"./metadata\";\nexport { default as ProductTags } from \"./tags\";\nexport { default as ProductField } from \"./productField\";\nexport { default as PriceRange } from \"./priceRange\";\nexport { default as ProductNotFound } from \"./productNotFound\";\n","import React, { Component } from \"react\";\nimport PropTypes from \"prop-types\";\nimport classnames from \"classnames\";\nimport { Components, registerComponent } from \"@reactioncommerce/reaction-components\";\n\nclass ProductMetadata extends Component {\n  get metafields() {\n    return this.props.metafields || this.props.product.metafields;\n  }\n\n  get showEditControls() {\n    return this.props.product && this.props.editable;\n  }\n\n  renderEditButton() {\n    if (this.showEditControls) {\n      return (\n        <span className=\"edit-button\">\n          <Components.EditContainer\n            data={this.props.product}\n            disabled={this.props.editable === false}\n            editTypes={[\"edit\"]}\n            editView=\"ProductAdmin\"\n            field=\"metafields\"\n            i18nKeyLabel=\"productDetailEdit.productSettings\"\n            label=\"Product Settings\"\n            permissions={[\"createProduct\"]}\n            {...this.props.editContainerProps}\n          />\n        </span>\n      );\n    }\n\n    return null;\n  }\n\n  render() {\n    if (Array.isArray(this.metafields) && this.metafields.length > 0) {\n      const headerClassName = classnames({\n        \"meta-header\": true,\n        \"edit\": this.showEditControls\n      });\n\n      return (\n        <div className=\"pdp product-metadata\">\n          <h3 className={headerClassName}>\n            <Components.Translation defaultValue=\"Details\" i18nKey=\"productDetail.details\" />\n            {this.renderEditButton()}\n          </h3>\n          <Components.Metadata editable={false} metafields={this.metafields} />\n        </div>\n      );\n    }\n\n    return null;\n  }\n}\n\nProductMetadata.propTypes = {\n  editContainerProps: PropTypes.object,\n  editable: PropTypes.bool,\n  metafields: PropTypes.arrayOf(PropTypes.object),\n  product: PropTypes.object\n};\n\nregisterComponent(\"ProductMetadata\", ProductMetadata);\n\nexport default ProductMetadata;\n","import React from \"react\";\nimport { Components, registerComponent } from \"@reactioncommerce/reaction-components\";\n\nconst PriceRange = (props) => (\n  <div className=\"pdp price-range\">\n    <Components.Currency {...props} />\n  </div>\n);\n\nregisterComponent(\"PriceRange\", PriceRange);\n\nexport default PriceRange;\n","import React, { Component } from \"react\";\nimport PropTypes from \"prop-types\";\nimport { Components } from \"@reactioncommerce/reaction-components\";\nimport { ReactionLayout } from \"/imports/plugins/core/layout/lib\";\n\nclass ProductDetail extends Component {\n  get tags() {\n    return this.props.tags || [];\n  }\n\n  get product() {\n    return this.props.product || {};\n  }\n\n  get editable() {\n    return this.props.editable;\n  }\n\n  render() {\n    return (\n      <div className=\"pdp\" style={{ position: \"relative\" }}>\n        <div className=\"container-main pdp-container\" itemScope itemType=\"http://schema.org/Product\">\n          <div className=\"row\">\n            <Components.Alerts placement=\"productManagement\" />\n            <ReactionLayout\n              context={this}\n              layoutName={this.props.layout}\n              layoutProps={this.props}\n            />\n          </div>\n        </div>\n      </div>\n    );\n  }\n}\n\nProductDetail.propTypes = {\n  cartQuantity: PropTypes.number,\n  editable: PropTypes.bool,\n  hasAdminPermission: PropTypes.bool,\n  layout: PropTypes.string,\n  layoutName: PropTypes.string,\n  mediaGalleryComponent: PropTypes.node,\n  onAddToCart: PropTypes.func,\n  onCartQuantityChange: PropTypes.func,\n  onDeleteProduct: PropTypes.func,\n  onProductFieldChange: PropTypes.func,\n  onViewContextChange: PropTypes.func,\n  priceRange: PropTypes.oneOfType([PropTypes.string, PropTypes.number]),\n  product: PropTypes.object,\n  socialComponent: PropTypes.node,\n  tags: PropTypes.arrayOf(PropTypes.object),\n  topVariantComponent: PropTypes.node,\n  viewAs: PropTypes.string\n};\n\nexport default ProductDetail;\n","import React, { Component } from \"react\";\nimport PropTypes from \"prop-types\";\nimport classnames from \"classnames\";\nimport Velocity from \"velocity-animate\";\nimport \"velocity-animate/velocity.ui\";\nimport { Components, registerComponent } from \"@reactioncommerce/reaction-components\";\n\nimport { Reaction } from \"client/api\";\n\nclass ProductField extends Component {\n  state = {\n    value: this.value\n  }\n\n  componentWillReceiveProps(nextProps) {\n    if (nextProps.product[this.fieldName] !== this.props.product[this.fieldName]) {\n      this.setState({\n        value: nextProps.product[this.fieldName]\n      }, () => {\n        if (this._input && this._input.refs.input) {\n          const { input } = this._input.refs;\n\n          Velocity.RunSequence([\n            { e: input, p: { backgroundColor: \"#e2f2e2\" }, o: { duration: 200 } },\n            { e: input, p: { backgroundColor: \"#fff\" }, o: { duration: 100 } }\n          ]);\n        }\n      });\n    } else {\n      this.setState({\n        value: nextProps.product[this.fieldName]\n      });\n    }\n  }\n\n  handleChange = (event, value) => {\n    this.setState({\n      value\n    });\n  }\n\n  handleBlur = (event, value) => {\n    if (this.props.onProductFieldChange) {\n      this.props.onProductFieldChange(this.props.product._id, this.fieldName, value);\n    }\n  }\n\n  handleFocus = () => {\n    // Open actionView, if not already open\n    if (!Reaction.isActionViewOpen()) {\n      Reaction.showActionView();\n    }\n\n    // Open actionView to productDetails panel\n    Reaction.state.set(\"edit/focus\", \"productDetails\");\n\n    Reaction.setActionView({\n      i18nKeyLabel: \"productDetailEdit.productSettings\",\n      label: \"Product Settings\",\n      template: \"ProductAdmin\"\n    });\n  }\n\n  get fieldName() {\n    return this.props.fieldName;\n  }\n\n  get value() {\n    return (this.state && this.state.value) || this.props.product[this.fieldName];\n  }\n\n  get showEditControls() {\n    return this.props.product && this.props.editable;\n  }\n\n  renderEditButton() {\n    if (this.showEditControls) {\n      return (\n        <span className=\"edit-controls\">\n          <Components.EditContainer\n            autoHideEditButton={true}\n            data={this.props.product}\n            editView=\"ProductAdmin\"\n            field={this.fieldName}\n            i18nKeyLabel={`productDetailEdit.${this.field}`}\n            label=\"Edit Field\"\n            permissions={[\"createProduct\"]}\n            {...this.props.editContainerProps}\n          />\n        </span>\n      );\n    }\n\n    return null;\n  }\n\n  renderTextField() {\n    const baseClassName = classnames({\n      \"pdp\": true,\n      \"product-detail-edit\": true,\n      [`${this.fieldName}-edit`]: this.fieldName\n    });\n\n    const textFieldClassName = classnames({\n      \"pdp\": true,\n      \"product-detail-edit\": true,\n      [`${this.fieldName}-edit-input`]: this.fieldName\n    });\n\n    return (\n      <div className={baseClassName}>\n        <Components.TextField\n          ref={(ref) => { this._input = ref; }}\n          className={textFieldClassName}\n          multiline={this.props.multiline}\n          onBlur={this.handleBlur}\n          onChange={this.handleChange}\n          onFocus={this.handleFocus}\n          onReturnKeyDown={this.handleBlur}\n          value={this.state.value}\n          {...this.props.textFieldProps}\n        />\n        {this.renderEditButton()}\n      </div>\n    );\n  }\n\n  render() {\n    if (this.showEditControls) {\n      return this.renderTextField();\n    }\n\n    const classNames = classnames({\n      pdp: true,\n      field: true,\n      [this.fieldName]: !!this.fieldName\n    });\n\n    if (this.props.element) {\n      return React.createElement(this.props.element, {\n        className: classNames,\n        itemProp: this.props.itemProp,\n        children: this.value\n      });\n    }\n\n    return (\n      <div className={classNames}>\n        {this.value}\n      </div>\n    );\n  }\n}\n\nProductField.propTypes = {\n  editContainerProps: PropTypes.object,\n  editable: PropTypes.bool,\n  element: PropTypes.node,\n  fieldName: PropTypes.string,\n  fieldTitle: PropTypes.string,\n  itemProp: PropTypes.string,\n  multiline: PropTypes.bool,\n  onProductFieldChange: PropTypes.func,\n  product: PropTypes.object,\n  textFieldProps: PropTypes.object\n};\n\nregisterComponent(\"ProductField\", ProductField);\n\nexport default ProductField;\n","import React from \"react\";\nimport { Components, registerComponent } from \"@reactioncommerce/reaction-components\";\n\nconst ProductNotFound = () => (\n  <div className=\"container-fluid-sm\">\n    <div className=\"empty-view-message\">\n      <i className=\"fa fa-barcode\" />\n      <Components.Translation defaultValue=\"Oops\" i18nKey=\"productDetail.notFoundTitle\" />\n      <Components.Translation defaultValue=\"Product Not Found\" i18nKey=\"productDetail.notFoundError\" />\n    </div>\n  </div>\n);\n\nregisterComponent(\"ProductNotFound\", ProductNotFound);\n\nexport default ProductNotFound;\n","import React, { Component } from \"react\";\nimport PropTypes from \"prop-types\";\nimport classnames from \"classnames\";\nimport { Components, registerComponent } from \"@reactioncommerce/reaction-components\";\n\nclass ProductTags extends Component {\n  get tags() {\n    return this.props.tags;\n  }\n\n  get showEditControls() {\n    return this.props.product && this.props.editable;\n  }\n\n  renderEditButton() {\n    if (this.showEditControls) {\n      return (\n        <span className=\"edit-button\">\n          <Components.EditContainer\n            data={this.props.product}\n            disabled={this.props.editable === false}\n            editView=\"ProductAdmin\"\n            field=\"hashtags\"\n            i18nKeyLabel=\"productDetailEdit.productSettings\"\n            label=\"Product Settings\"\n            permissions={[\"createProduct\"]}\n          />\n        </span>\n      );\n    }\n\n    return null;\n  }\n\n  render() {\n    if (Array.isArray(this.tags) && this.tags.length > 0) {\n      const headerClassName = classnames({\n        \"tags-header\": true,\n        \"edit\": this.showEditControls\n      });\n\n      return (\n        <div className=\"pdp product-tags\">\n          <h3 className={headerClassName}>\n            <Components.Translation defaultValue=\"Tags\" i18nKey=\"productDetail.tags\" />\n            {this.renderEditButton()}\n          </h3>\n          <Components.TagList\n            editable={false}\n            product={this.props.product}\n            tags={this.tags}\n          />\n        </div>\n      );\n    }\n    return null;\n  }\n}\n\nProductTags.propTypes = {\n  editButton: PropTypes.node,\n  editable: PropTypes.bool,\n  product: PropTypes.object,\n  tags: PropTypes.arrayOf(PropTypes.object)\n};\n\nregisterComponent(\"ProductTags\", ProductTags);\n\nexport default ProductTags;\n","import React, { Component } from \"react\";\nimport PropTypes from \"prop-types\";\nimport classnames from \"classnames\";\nimport { Components, registerComponent } from \"@reactioncommerce/reaction-components\";\nimport { Validation } from \"@reactioncommerce/schemas\";\nimport { SortableItem } from \"/imports/plugins/core/ui/client/containers\";\n\nimport { ReactionProduct } from \"/lib/api\";\n\nimport { ProductVariant } from \"/lib/collections/schemas\";\n\nclass Variant extends Component {\n  constructor(props) {\n    super(props);\n\n    this.validation = new Validation(ProductVariant);\n\n    this.state = {\n      invalidVariant: [],\n      selfValidation: []\n    };\n  }\n\n  componentWillMount() {\n    this.variantValidation();\n  }\n\n  handleClick = (event) => {\n    if (this.props.onClick) {\n      this.props.onClick(event, this.props.variant);\n    }\n  }\n\n  handleOnKeyUp = (event) => {\n    // keyCode 32 (spacebar)\n    // keyCode 13 (enter/return)\n    if (event.keyCode === 32 || event.keyCode === 13) {\n      this.handleClick(event);\n    }\n  }\n\n  get price() {\n    return this.props.displayPrice || this.props.variant.price;\n  }\n\n  renderDeletionStatus() {\n    if (this.props.variant.isDeleted) {\n      return (\n        <span className=\"badge badge-danger variant-badge-label\">\n          <Components.Translation defaultValue=\"Archived\" i18nKey=\"app.archived\" />\n        </span>\n      );\n    }\n\n    return null;\n  }\n\n  renderValidationButton = () => {\n    if (this.state.selfValidation.isValid === false) {\n      return (\n        <Components.Badge\n          status=\"danger\"\n          indicator={true}\n          tooltip={\"Validation error\"}\n          i18nKeyTooltip={\"admin.tooltip.validationError\"}\n        />\n      );\n    }\n    if (this.state.invalidVariant.length) {\n      return (\n        <Components.Badge\n          status=\"danger\"\n          indicator={true}\n          tooltip={\"Validation error on variant option\"}\n          i18nKeyTooltip={\"admin.tooltip.optionValidationError\"}\n        />\n      );\n    }\n  }\n\n  variantValidation = () => {\n    const variants = ReactionProduct.getVariants(this.props.variant._id);\n    let validationStatus;\n    let invalidVariant;\n\n    if (variants) {\n      validationStatus = variants.map((variant) => this.validation.validate(variant));\n\n      invalidVariant = validationStatus.filter((status) => status.isValid === false);\n    }\n\n    const selfValidation = this.validation.validate(this.props.variant);\n\n    this.setState({\n      invalidVariant,\n      selfValidation\n    });\n  }\n\n  render() {\n    const { variant } = this.props;\n    const classes = classnames({\n      \"variant-detail\": true,\n      \"variant-button\": true,\n      \"variant-detail-selected\": this.props.isSelected,\n      \"variant-deleted\": this.props.variant.isDeleted,\n      \"variant-notVisible\": !this.props.variant.isVisible\n    });\n\n    let variantTitleElement;\n\n    if (typeof variant.title === \"string\" && variant.title.length) {\n      variantTitleElement = (\n        <span className=\"variant-title\">{variant.title}</span>\n      );\n    } else {\n      variantTitleElement = (\n        <Components.Translation defaultValue=\"Label\" i18nKey=\"productVariant.title\" />\n      );\n    }\n\n    const variantElement = (\n      <li\n        className=\"variant-list-item\"\n        id=\"variant-list-item-{variant._id}\"\n        key={variant._id}\n      >\n        <div\n          onClick={this.handleClick}\n          onKeyUp={this.handleOnKeyUp}\n          role=\"button\"\n          tabIndex={0}\n        >\n          <div className={classes}>\n            <div className=\"title\">\n              {variantTitleElement}\n            </div>\n\n            <div className=\"actions\">\n              <span className=\"variant-price\">\n                <Components.Currency amount={this.price} editable={this.props.editable}/>\n              </span>\n            </div>\n          </div>\n\n          <div className=\"alerts\">\n            {this.renderDeletionStatus()}\n            <Components.InventoryBadge className=\"variant-qty-sold-out variant-badge-label\" {...this.props} />\n            {this.renderValidationButton()}\n            {this.props.editButton}\n          </div>\n        </div>\n      </li>\n    );\n\n    if (this.props.editable) {\n      return this.props.connectDragSource(this.props.connectDropTarget(variantElement));\n    }\n\n    return variantElement;\n  }\n}\n\nVariant.propTypes = {\n  connectDragSource: PropTypes.func,\n  connectDropTarget: PropTypes.func,\n  displayPrice: PropTypes.oneOfType([PropTypes.number, PropTypes.string]),\n  editButton: PropTypes.node,\n  editable: PropTypes.bool,\n  isSelected: PropTypes.bool,\n  onClick: PropTypes.func,\n  soldOut: PropTypes.bool,\n  variant: PropTypes.object,\n  visibilityButton: PropTypes.node\n};\n\nregisterComponent(\"Variant\", Variant, SortableItem(\"product-variant\"));\n\nexport default SortableItem(\"product-variant\")(Variant);\n","import React, { Component } from \"react\";\nimport PropTypes from \"prop-types\";\nimport { Components } from \"@reactioncommerce/reaction-components\";\n\nclass VariantList extends Component {\n  handleVariantEditClick = (event, editButtonProps) => {\n    if (this.props.onEditVariant) {\n      return this.props.onEditVariant(event, editButtonProps.data);\n    }\n    return true;\n  }\n\n  handleVariantVisibilityClick = (event, editButtonProps) => {\n    if (this.props.onVariantVisibiltyToggle) {\n      const isVariantVisible = !editButtonProps.data.isVisible;\n      this.props.onVariantVisibiltyToggle(event, editButtonProps.data, isVariantVisible);\n    }\n  }\n\n  handleChildVariantClick = (event, variant) => {\n    if (this.props.onVariantClick) {\n      this.props.onVariantClick(event, variant, 1);\n    }\n  }\n\n  handleChildVariantEditClick = (event, editButtonProps) => {\n    if (this.props.onEditVariant) {\n      return this.props.onEditVariant(event, editButtonProps.data, 1);\n    }\n    return true;\n  }\n\n  isSoldOut(variant) {\n    if (this.props.isSoldOut) {\n      return this.props.isSoldOut(variant);\n    }\n\n    return false;\n  }\n\n  renderVariants() {\n    let variants = [];\n    let addButton;\n\n    if (this.props.editable) {\n      addButton = (\n        <div className=\"rui items flex\">\n          <div className=\"rui item full justify center\">\n            <Components.IconButton\n              i18nKeyTooltip=\"variantList.createVariant\"\n              icon=\"fa fa-plus\"\n              primary={true}\n              tooltip=\"Create Variant\"\n              onClick={this.props.onCreateVariant}\n            />\n          </div>\n        </div>\n      );\n    }\n\n    if (this.props.variants) {\n      variants = this.props.variants.map((variant, index) => {\n        const displayPrice = this.props.displayPrice && this.props.displayPrice(variant._id);\n\n        return (\n          <Components.EditContainer\n            data={variant}\n            disabled={this.props.editable === false}\n            editView=\"variantForm\"\n            i18nKeyLabel=\"productDetailEdit.editVariant\"\n            key={index}\n            label=\"Edit Variant\"\n            onEditButtonClick={this.handleVariantEditClick}\n            onVisibilityButtonClick={this.handleVariantVisibilityClick}\n            permissions={[\"createProduct\"]}\n            showsVisibilityButton={true}\n          >\n            <Components.Variant\n              displayPrice={displayPrice}\n              editable={this.props.editable}\n              index={index}\n              isSelected={this.props.variantIsSelected(variant._id)}\n              onClick={this.props.onVariantClick}\n              onMove={this.props.onMoveVariant}\n              soldOut={this.isSoldOut(variant)}\n              variant={variant}\n            />\n          </Components.EditContainer>\n        );\n      });\n    }\n\n    const variantList = (\n      <ul className=\"variant-list list-unstyled\" id=\"variant-list\" key=\"variantList\">\n        {variants}\n        {addButton}\n      </ul>\n    );\n\n    if (variants.length === 0 && this.props.editable === false) {\n      return variantList;\n    } else if (variants.length > 1 || variants.length === 0) {\n      return [\n        <Components.Divider\n          i18nKeyLabel=\"productDetail.options\"\n          key=\"dividerWithLabel\"\n          label=\"Options\"\n        />,\n        variantList\n      ];\n    } else if (variants.length === 1) {\n      return [\n        <Components.Divider key=\"divider\" />,\n        variantList\n      ];\n    }\n\n    return variantList;\n  }\n\n  renderChildVariants() {\n    let childVariants = [];\n\n    if (this.props.childVariants) {\n      childVariants = this.props.childVariants.map((childVariant, index) => {\n        const media = this.props.childVariantMedia.filter((mediaItem) => (\n          (mediaItem.document.metadata.variantId === childVariant._id)\n        ));\n\n        return (\n          <Components.EditContainer\n            data={childVariant}\n            disabled={this.props.editable === false}\n            editView=\"variantForm\"\n            i18nKeyLabel=\"productDetailEdit.editVariant\"\n            key={index}\n            label=\"Edit Variant\"\n            onEditButtonClick={this.handleChildVariantEditClick}\n            onVisibilityButtonClick={this.handleVariantVisibilityClick}\n            permissions={[\"createProduct\"]}\n            showsVisibilityButton={true}\n          >\n            <Components.ChildVariant\n              isSelected={this.props.variantIsSelected(childVariant._id)}\n              media={media}\n              onClick={this.handleChildVariantClick}\n              variant={childVariant}\n            />\n          </Components.EditContainer>\n        );\n      });\n    }\n\n    if (childVariants.length) {\n      return [\n        <Components.Divider\n          key=\"availableOptionsDivider\"\n          i18nKeyLabel=\"availableOptions\"\n          label=\"Available Options\"\n        />,\n        <div className=\"row variant-product-options\" key=\"childVariantList\">\n          {childVariants}\n        </div>\n      ];\n    }\n\n    return null;\n  }\n\n  render() {\n    return (\n      <div className=\"product-variants\">\n        {this.renderVariants()}\n        {this.renderChildVariants()}\n      </div>\n    );\n  }\n}\n\nVariantList.propTypes = {\n  childVariantMedia: PropTypes.arrayOf(PropTypes.any),\n  childVariants: PropTypes.arrayOf(PropTypes.object),\n  displayPrice: PropTypes.func,\n  editable: PropTypes.bool,\n  isSoldOut: PropTypes.func,\n  onCreateVariant: PropTypes.func,\n  onEditVariant: PropTypes.func,\n  onMoveVariant: PropTypes.func,\n  onVariantClick: PropTypes.func,\n  onVariantVisibiltyToggle: PropTypes.func,\n  variantIsSelected: PropTypes.func,\n  variants: PropTypes.arrayOf(PropTypes.object)\n};\n\nexport default VariantList;\n","export { default as ProductDetailContainer } from \"./productDetail\";\nexport { default as SocialContainer } from \"./social\";\nexport { default as VariantListContainer } from \"./variantList\";\nexport { default as PublishContainer } from \"./publish\";\n","import React, { Component } from \"react\";\nimport PropTypes from \"prop-types\";\nimport _ from \"lodash\";\nimport { StyleRoot } from \"radium\";\nimport { compose } from \"recompose\";\nimport { Components, registerComponent, composeWithTracker } from \"@reactioncommerce/reaction-components\";\nimport { $ } from \"meteor/jquery\";\nimport { Meteor } from \"meteor/meteor\";\nimport { ReactionProduct } from \"/lib/api\";\nimport { Reaction, i18next, Logger } from \"/client/api\";\nimport { Tags, Cart } from \"/lib/collections\";\nimport { ProductDetail } from \"../components\";\nimport { SocialContainer, VariantListContainer } from \"./\";\nimport { Media } from \"/imports/plugins/core/files/client\";\n\nconst wrapComponent = (Comp) => (\n  class ProductDetailContainer extends Component {\n    static propTypes = {\n      media: PropTypes.arrayOf(PropTypes.object),\n      product: PropTypes.object,\n      storedCart: PropTypes.object\n    }\n\n    constructor(props) {\n      super(props);\n\n      this.animationTimeOut = null;\n      this.textTimeOut = null;\n\n      this.state = {\n        cartQuantity: 1,\n        productClick: 0\n      };\n    }\n\n    componentDidMount() {\n      this._isMounted = true;\n    }\n\n    componentWillUnmount() {\n      this._isMounted = false;\n    }\n\n    handleCartQuantityChange = (event, quantity) => {\n      this.setState({\n        cartQuantity: Math.max(quantity, 1)\n      });\n    }\n\n    handleAddToCart = () => {\n      let productId;\n      let quantity;\n      let maxQuantity;\n      let totalQuantity;\n      let storedQuantity = 0;\n      const currentVariant = ReactionProduct.selectedVariant();\n      const currentProduct = ReactionProduct.selectedProduct();\n\n      if (currentVariant) {\n        if (currentVariant.ancestors.length === 1) {\n          const options = ReactionProduct.getVariants(currentVariant._id);\n\n          if (options.length > 0) {\n            Alerts.inline(\"Please choose options before adding to cart\", \"warning\", {\n              placement: \"productDetail\",\n              i18nKey: \"productDetail.chooseOptions\",\n              autoHide: 10000\n            });\n            return [];\n          }\n        }\n\n        if (currentVariant.inventoryPolicy && currentVariant.inventoryQuantity < 1) {\n          Alerts.inline(\"Sorry, this item is out of stock!\", \"warning\", {\n            placement: \"productDetail\",\n            i18nKey: \"productDetail.outOfStock\",\n            autoHide: 10000\n          });\n          return [];\n        }\n\n        if (this.props.storedCart && this.props.storedCart.items) {\n          this.props.storedCart.items.forEach((item) => {\n            if (item.variants._id === currentVariant._id) {\n              storedQuantity = item.quantity;\n            }\n          });\n        }\n\n        quantity = parseInt(this.state.cartQuantity, 10);\n        totalQuantity = quantity + storedQuantity;\n        maxQuantity = currentVariant.inventoryQuantity;\n\n        if (quantity < 1) {\n          quantity = 1;\n        }\n\n        if (currentVariant.inventoryPolicy && quantity > maxQuantity && storedQuantity < maxQuantity) {\n          Alerts.inline(\"Your product quantity has been adjusted to the max quantity in stock\", \"warning\", {\n            placement: \"productDetail\",\n            i18nKey: \"admin.inventoryAlerts.adjustedQuantity\",\n            autoHide: 10000\n          });\n          quantity = maxQuantity - storedQuantity;\n          totalQuantity = maxQuantity;\n        }\n\n        if (currentVariant.inventoryPolicy && totalQuantity > maxQuantity && storedQuantity < maxQuantity && quantity < maxQuantity) {\n          Alerts.inline(\"Your product quantity has been adjusted to the max quantity in stock\", \"warning\", {\n            placement: \"productDetail\",\n            i18nKey: \"admin.inventoryAlerts.adjustedQuantity\",\n            autoHide: 10000\n          });\n          quantity = maxQuantity - storedQuantity;\n          totalQuantity = maxQuantity;\n        }\n\n        if (currentVariant.inventoryPolicy && totalQuantity > maxQuantity) {\n          Alerts.inline(\"Sorry, this item is out of stock!\", \"error\", {\n            placement: \"productDetail\",\n            i18nKey: \"productDetail.outOfStock\",\n            autoHide: 10000\n          });\n          return [];\n        }\n\n        if (!currentProduct.isVisible) {\n          Alerts.inline(\"Publish product before adding to cart.\", \"error\", {\n            placement: \"productDetail\",\n            i18nKey: \"productDetail.publishFirst\",\n            autoHide: 10000\n          });\n        } else {\n          productId = currentProduct._id;\n\n          if (productId) {\n            Meteor.call(\"cart/addToCart\", productId, currentVariant._id, quantity, (error) => {\n              if (error) {\n                Logger.error(error, \"Failed to add to cart.\");\n                return error;\n              }\n              // Reset cart quantity on success\n              this.handleCartQuantityChange(null, 1);\n\n              this.setState(({ productClick }) => ({\n                productClick: productClick + 1\n              }));\n\n              return true;\n            });\n          }\n\n          // template.$(\".variant-select-option\").removeClass(\"active\");\n          ReactionProduct.setCurrentVariant(null);\n          // qtyField.val(1);\n          // scroll to top on cart add\n          $(\"html,body\").animate({\n            scrollTop: 0\n          }, 0);\n          // slide out label\n          const addToCartText = i18next.t(\"productDetail.addedToCart\");\n          const addToCartTitle = currentVariant.title || \"\";\n          // Grab and cache the width of the alert to be used in animation\n          const alertWidth = $(\".cart-alert\").width();\n          const direction = i18next.dir() === \"rtl\" ? \"left\" : \"right\";\n          const oppositeDirection = i18next.dir() === \"rtl\" ? \"right\" : \"left\";\n          if ($(\".cart-alert\").css(\"display\") === \"none\") {\n            $(\"#spin\").addClass(\"hidden\");\n            $(\".cart-alert-text\").text(`${quantity} ${addToCartTitle} ${addToCartText}`);\n            this.handleSlideOut(alertWidth, direction, oppositeDirection);\n            this.animationTimeOut = setTimeout(() => {\n              this.handleSlideIn(alertWidth, direction, oppositeDirection);\n            }, 4000);\n          } else {\n            clearTimeout(this.textTimeOut);\n\n            // hides text and display spinner\n            $(\".cart-alert-text\").hide();\n            $(\"#spin\").removeClass(\"hidden\");\n\n            this.textTimeOut = setTimeout(() => {\n              $(\"#spin\").addClass(\"hidden\");\n              $(\".cart-alert-text\").text(`${this.state.productClick * quantity} ${addToCartTitle} ${addToCartText}`);\n              $(\".cart-alert-text\").fadeIn(\"slow\");\n              if (this._isMounted) {\n                this.setState({ productClick: 0 });\n              }\n            }, 2000);\n\n            clearTimeout(this.animationTimeOut);\n            this.animationTimeOut = setTimeout(() => {\n              this.handleSlideIn(alertWidth, direction, oppositeDirection);\n            }, 4000);\n          }\n        }\n      } else {\n        Alerts.inline(\"Select an option before adding to cart\", \"warning\", {\n          placement: \"productDetail\",\n          i18nKey: \"productDetail.selectOption\",\n          autoHide: 8000\n        });\n      }\n\n      return null;\n    }\n\n    handleSlideOut(alertWidth, direction, oppositeDirection) {\n      // Animate slide out\n      return $(\".cart-alert\")\n        .show()\n        .css({\n          [oppositeDirection]: \"auto\",\n          [direction]: -alertWidth\n        })\n        .animate({\n          [oppositeDirection]: \"auto\",\n          [direction]: 0\n        }, 600);\n    }\n\n    handleSlideIn(alertWidth, direction, oppositeDirection) {\n      // Animate slide in\n      return $(\".cart-alert\").animate({\n        [oppositeDirection]: \"auto\",\n        [direction]: -alertWidth\n      }, {\n        duration: 600,\n        complete() {\n          $(\".cart-alert\").hide();\n        }\n      });\n    }\n\n    handleProductFieldChange = (productId, fieldName, value) => {\n      Meteor.call(\"products/updateProductField\", productId, fieldName, value, (error) => {\n        if (error) {\n          Alerts.toast(error.message, \"error\");\n          this.forceUpdate();\n        }\n      });\n    }\n\n    handleViewContextChange = (event, value) => {\n      Reaction.Router.setQueryParams({ as: value });\n    }\n\n    handleDeleteProduct = () => {\n      ReactionProduct.archiveProduct(this.props.product);\n    }\n\n    render() {\n      const { media, product } = this.props;\n\n      if (_.isEmpty(product)) {\n        return (\n          <Components.ProductNotFound />\n        );\n      }\n\n      return (\n        <StyleRoot>\n          <Comp\n            cartQuantity={this.state.cartQuantity}\n            mediaGalleryComponent={<Components.MediaGallery media={media} />}\n            onAddToCart={this.handleAddToCart}\n            onCartQuantityChange={this.handleCartQuantityChange}\n            onViewContextChange={this.handleViewContextChange}\n            socialComponent={<SocialContainer />}\n            topVariantComponent={<VariantListContainer />}\n            onDeleteProduct={this.handleDeleteProduct}\n            onProductFieldChange={this.handleProductFieldChange}\n            {...this.props}\n          />\n        </StyleRoot>\n      );\n    }\n  }\n);\n\nfunction composer(props, onData) {\n  const tagSub = Meteor.subscribe(\"Tags\");\n  const shopIdOrSlug = Reaction.Router.getParam(\"shopSlug\");\n  const productId = Reaction.Router.getParam(\"handle\");\n  const variantId = ReactionProduct.selectedVariantId();\n  const revisionType = Reaction.Router.getQueryParam(\"revision\");\n  const viewProductAs = Reaction.getUserPreferences(\"reaction-dashboard\", \"viewAs\", \"administrator\");\n\n  let productSub;\n  if (productId) {\n    productSub = Meteor.subscribe(\"Product\", productId, shopIdOrSlug);\n  }\n  if (productSub && productSub.ready()\n    && tagSub.ready() && Reaction.Subscriptions.Cart.ready()) {\n    const product = ReactionProduct.setProduct(productId, variantId);\n    if (Reaction.hasPermission(\"createProduct\")) {\n      if (!Reaction.getActionView() && Reaction.isActionViewOpen() === true) {\n        Reaction.setActionView({\n          template: \"productAdmin\",\n          data: product\n        });\n      }\n    }\n\n    // Get the product tags\n    if (product) {\n      let tags;\n      if (_.isArray(product.hashtags)) {\n        tags = _.map(product.hashtags, (id) => Tags.findOne(id));\n      }\n\n      Meteor.subscribe(\"ProductMedia\", product._id);\n\n      let mediaArray = [];\n      const selectedVariant = ReactionProduct.selectedVariant();\n\n      if (selectedVariant) {\n        // Find the media for the selected variant\n        mediaArray = Media.findLocal({\n          \"metadata.variantId\": selectedVariant._id\n        }, {\n          sort: {\n            \"metadata.priority\": 1\n          }\n        });\n\n        // If no media found, broaden the search to include other media from parents\n        if (Array.isArray(mediaArray) && mediaArray.length === 0 && selectedVariant.ancestors) {\n          // Loop through ancestors in reverse to find a variant that has media to use\n          for (const ancestor of selectedVariant.ancestors.reverse()) {\n            const media = Media.findLocal({\n              \"metadata.variantId\": ancestor\n            }, {\n              sort: {\n                \"metadata.priority\": 1\n              }\n            });\n\n            // If we found some media, then stop here\n            if (Array.isArray(media) && media.length) {\n              mediaArray = media;\n              break;\n            }\n          }\n        }\n      }\n\n      let priceRange;\n      if (selectedVariant && typeof selectedVariant === \"object\") {\n        const childVariants = ReactionProduct.getVariants(selectedVariant._id);\n        // when top variant has no child variants we display only its price\n        if (childVariants.length === 0) {\n          priceRange = selectedVariant.price;\n        } else {\n          // otherwise we want to show child variants price range\n          priceRange = ReactionProduct.getVariantPriceRange();\n        }\n      }\n\n      let productRevision;\n\n      if (revisionType === \"published\") {\n        productRevision = product.__published;\n      }\n\n      let editable;\n\n      if (viewProductAs === \"customer\") {\n        editable = false;\n      } else {\n        editable = Reaction.hasPermission([\"createProduct\"]);\n      }\n\n      const topVariants = ReactionProduct.getTopVariants();\n\n      const storedCart = Cart.findOne();\n\n      onData(null, {\n        variants: topVariants,\n        layout: product.template || \"productDetailSimple\",\n        product: productRevision || product,\n        priceRange,\n        tags,\n        media: mediaArray,\n        editable,\n        viewAs: viewProductAs,\n        hasAdminPermission: Reaction.hasPermission([\"createProduct\"]),\n        storedCart\n      });\n    } else {\n      // onData must be called with composeWithTracker, or else the loading icon will show forever.\n      onData(null, {});\n    }\n  }\n}\n\nregisterComponent(\"ProductDetail\", ProductDetail, [\n  composeWithTracker(composer),\n  wrapComponent\n]);\n\n// Decorate component and export\nexport default compose(\n  composeWithTracker(composer),\n  wrapComponent\n)(ProductDetail);\n","import React, { Component } from \"react\";\nimport PropTypes from \"prop-types\";\nimport { registerComponent, composeWithTracker } from \"@reactioncommerce/reaction-components\";\nimport { Meteor } from \"meteor/meteor\";\nimport { ReactionProduct } from \"/lib/api\";\nimport { Products } from \"/lib/collections\";\nimport PublishContainer from \"/imports/plugins/core/revisions/client/containers/publishContainer\";\n\nclass ProductPublishContainer extends Component {\n  handleMetaRemove = (productId, metafield) => {\n    Meteor.call(\"products/removeMetaFields\", productId, metafield);\n  }\n\n  handleProductRestore = (product) => {\n    Meteor.call(\"products/updateProductField\", product._id, \"isDeleted\", false);\n  }\n\n  handleVisibilityChange = (event, isProductVisible) => {\n    const { product } = this.props;\n    if (!product) return;\n\n    // Update main product\n    Meteor.call(\"products/updateProductField\", product._id, \"isVisible\", isProductVisible);\n\n    const variants = Products.find({\n      ancestors: {\n        $in: [product._id]\n      }\n    }).fetch();\n\n    variants.map((variant) =>\n      // update variant\n      Meteor.call(\"products/updateProductField\", variant._id, \"isVisible\", isProductVisible));\n  }\n\n  handlePublishActions = (event, action, documentIds) => {\n    if (action === \"archive\") {\n      ReactionProduct.archiveProduct(documentIds);\n    }\n  }\n\n  render() {\n    return (\n      <PublishContainer\n        onAction={this.handlePublishActions}\n        onVisibilityChange={this.handleVisibilityChange}\n        {...this.props}\n      />\n    );\n  }\n}\n\n\nfunction composer(props, onData) {\n  const product = ReactionProduct.selectedProduct();\n  let revisonDocumentIds;\n  if (product) {\n    revisonDocumentIds = [product._id];\n    onData(null, {\n      product,\n      documentIds: revisonDocumentIds,\n      documents: [product]\n    });\n  } else {\n    onData(null, {});\n  }\n}\n\nProductPublishContainer.propTypes = {\n  product: PropTypes.object,\n  tags: PropTypes.arrayOf(PropTypes.object)\n};\n\nregisterComponent(\"ProductPublish\", ProductPublishContainer, composeWithTracker(composer));\n\n// Decorate component and export\nexport default composeWithTracker(composer)(ProductPublishContainer);\n","import React, { Component } from \"react\";\nimport PropTypes from \"prop-types\";\nimport { composeWithTracker } from \"@reactioncommerce/reaction-components\";\nimport { getPrimaryMediaForItem, ReactionProduct } from \"/lib/api\";\nimport SocialButtons from \"/imports/plugins/included/social/client/components/socialButtons\";\nimport { createSocialSettings } from \"/imports/plugins/included/social/lib/helpers\";\nimport { EditContainer } from \"/imports/plugins/core/ui/client/containers\";\n\nclass ProductSocialContainer extends Component {\n  render() {\n    return (\n      <EditContainer\n        data={this.props.data}\n        editView=\"ProductAdmin\"\n        field={[\"facebookMsg\", \"twitterMsg\", \"googleplusMsg\", \"pinterestMsg\"]}\n        i18nKeyLabel=\"productDetailEdit.editSocial\"\n        label=\"Edit Social Messaging\"\n        permissions={[\"createProduct\"]}\n      >\n        <SocialButtons {...this.props.socialSettings} />\n      </EditContainer>\n    );\n  }\n}\n\nfunction composer(props, onData) {\n  const product = ReactionProduct.selectedProduct() || {};\n  const selectedVariant = ReactionProduct.selectedVariant() || {};\n  let { title } = product;\n  let mediaUrl;\n\n  if (selectedVariant) {\n    ({ title } = selectedVariant);\n  }\n\n  let description;\n\n  if (typeof product.description === \"string\") {\n    description = product.description.substring(0, 254);\n  }\n\n  const media = getPrimaryMediaForItem({\n    productId: product._id,\n    variantId: selectedVariant && selectedVariant._id\n  });\n\n  if (media) {\n    mediaUrl = media.url({ store: \"large\" });\n  }\n\n  const options = {\n    data: product,\n    title: product.title,\n    description,\n    placement: \"productDetail\",\n    buttonClassName: \"fa-lg\",\n    media: mediaUrl,\n    apps: {\n      facebook: {\n        description: product.facebookMsg || description,\n        media: mediaUrl\n      },\n      twitter: {\n        description: product.twitterMsg || title,\n        media: mediaUrl\n      },\n      googleplus: {\n        itemtype: \"Product\",\n        description: product.googleplusMsg || description,\n        media: mediaUrl\n      },\n      pinterest: {\n        description: product.pinterestMsg || description,\n        media: mediaUrl\n      }\n    }\n  };\n\n  const socialSettings = createSocialSettings(options);\n\n  onData(null, {\n    data: product,\n    socialSettings\n  });\n}\n\nProductSocialContainer.propTypes = {\n  data: PropTypes.object,\n  socialSettings: PropTypes.object\n};\n\nexport default composeWithTracker(composer)(ProductSocialContainer);\n","import React, { Component } from \"react\";\nimport PropTypes from \"prop-types\";\nimport { Session } from \"meteor/session\";\nimport { Meteor } from \"meteor/meteor\";\nimport { composeWithTracker, Components } from \"@reactioncommerce/reaction-components\";\nimport { ReactionProduct } from \"/lib/api\";\nimport { Reaction, i18next } from \"/client/api\";\nimport { getChildVariants } from \"../selectors/variants\";\nimport { Products } from \"/lib/collections\";\nimport update from \"immutability-helper\";\nimport { getVariantIds } from \"/lib/selectors/variants\";\nimport { Media } from \"/imports/plugins/core/files/client\";\n\nfunction variantIsSelected(variantId) {\n  const current = ReactionProduct.selectedVariant();\n  if (current && typeof current === \"object\" && (variantId === current._id || current.ancestors.indexOf(variantId) >= 0)) {\n    return true;\n  }\n\n  return false;\n}\n\nfunction variantIsInActionView(variantId) {\n  const actionViewVariant = Reaction.getActionView().data;\n\n  if (actionViewVariant) {\n    // Check if the variant is selected, and also visible & selected in the action view\n    return variantIsSelected(variantId) && variantIsSelected(actionViewVariant._id) && Reaction.isActionViewOpen();\n  }\n\n  return false;\n}\n\nfunction getTopVariants() {\n  let inventoryTotal = 0;\n  const variants = ReactionProduct.getTopVariants();\n  if (variants.length) {\n    // calculate inventory total for all variants\n    for (const variant of variants) {\n      if (variant.inventoryManagement) {\n        const qty = ReactionProduct.getVariantQuantity(variant);\n        if (typeof qty === \"number\") {\n          inventoryTotal += qty;\n        }\n      }\n    }\n    // calculate percentage of total inventory of this product\n    for (const variant of variants) {\n      const qty = ReactionProduct.getVariantQuantity(variant);\n      variant.inventoryTotal = inventoryTotal;\n      if (variant.inventoryManagement && inventoryTotal) {\n        variant.inventoryPercentage = parseInt(qty / inventoryTotal * 100, 10);\n      } else {\n        // for cases when sellers doesn't use inventory we should always show\n        // \"green\" progress bar\n        variant.inventoryPercentage = 100;\n      }\n      if (variant.title) {\n        variant.inventoryWidth = parseInt(variant.inventoryPercentage -\n          variant.title.length, 10);\n      } else {\n        variant.inventoryWidth = 0;\n      }\n    }\n    // sort variants in correct order\n    variants.sort((a, b) => a.index - b.index);\n\n    return variants;\n  }\n  return [];\n}\n\nfunction isSoldOut(variant) {\n  return ReactionProduct.getVariantQuantity(variant) < 1;\n}\n\nclass VariantListContainer extends Component {\n  componentWillReceiveProps() {\n    this.setState({});\n  }\n\n  get variants() {\n    return (this.state && this.state.variants) || this.props.variants;\n  }\n\n  get productHandle() {\n    const selectedProduct = ReactionProduct.selectedProduct();\n    return (selectedProduct.__published && selectedProduct.__published.handle) || selectedProduct.handle;\n  }\n\n  handleCreateVariant = () => {\n    const selectedProduct = ReactionProduct.selectedProduct();\n\n    Meteor.call(\"products/createVariant\", selectedProduct._id, (error) => {\n      if (error) {\n        Alerts.alert({\n          text: i18next.t(\"productDetailEdit.addVariantFail\", { title: selectedProduct.title }),\n          confirmButtonText: i18next.t(\"app.close\", { defaultValue: \"Close\" })\n        });\n      }\n    });\n  }\n\n  handleVariantClick = (event, variant, ancestors = -1) => {\n    this.handleEditVariant(event, variant, ancestors);\n  }\n\n  handleEditVariant = (event, variant, ancestors = -1) => {\n    let editVariant = variant;\n    if (ancestors >= 0) {\n      editVariant = Products.findOne(variant.ancestors[ancestors]);\n    }\n\n    const cardName = `variant-${variant._id}`;\n    Reaction.state.set(\"edit/focus\", cardName);\n\n    ReactionProduct.setCurrentVariant(variant._id);\n    Session.set(`variant-form-${editVariant._id}`, true);\n\n    if (Reaction.hasPermission(\"createProduct\") && !Reaction.isPreview()) {\n      Reaction.showActionView({\n        label: \"Edit Variant\",\n        i18nKeyLabel: \"productDetailEdit.editVariant\",\n        template: \"variantForm\",\n        data: editVariant\n      });\n    }\n\n    // Prevent the default edit button `onEditButtonClick` function from running\n    return false;\n  }\n\n  handleVariantVisibilityToggle = (event, variant, variantIsVisible) => {\n    Meteor.call(\"products/updateProductField\", variant._id, \"isVisible\", variantIsVisible);\n  }\n\n  handleMoveVariant = (dragIndex, hoverIndex) => {\n    const variant = this.props.variants[dragIndex];\n\n    // Apply new sort order to variant list\n    const newVariantOrder = update(this.props.variants, {\n      $splice: [\n        [dragIndex, 1],\n        [hoverIndex, 0, variant]\n      ]\n    });\n\n    // Set local state so the component does't have to wait for a round-trip\n    // to the server to get the updated list of variants\n    this.setState({\n      variants: newVariantOrder\n    });\n\n    // Save the updated positions\n    Meteor.defer(() => {\n      Meteor.call(\"products/updateVariantsPosition\", getVariantIds(newVariantOrder));\n    });\n  }\n\n  render() {\n    return (\n      <Components.DragDropProvider>\n        <Components.VariantList\n          onEditVariant={this.handleEditVariant}\n          onMoveVariant={this.handleMoveVariant}\n          onVariantClick={this.handleVariantClick}\n          onVariantVisibiltyToggle={this.handleVariantVisibilityToggle}\n          onCreateVariant={this.handleCreateVariant}\n          {...this.props}\n          variants={this.variants}\n        />\n      </Components.DragDropProvider>\n    );\n  }\n}\n\nfunction composer(props, onData) {\n  let childVariantMedia = [];\n  const childVariants = getChildVariants();\n\n  if (Array.isArray(childVariants)) {\n    childVariantMedia = Media.findLocal({\n      \"metadata.variantId\": {\n        $in: getVariantIds(childVariants)\n      }\n    }, {\n      sort: {\n        \"metadata.priority\": 1\n      }\n    });\n  }\n\n  let editable;\n\n  if (Reaction.isPreview() === true) {\n    editable = false;\n  } else {\n    editable = Reaction.hasPermission([\"createProduct\"]);\n  }\n\n  onData(null, {\n    variants: getTopVariants(),\n    variantIsSelected,\n    variantIsInActionView,\n    childVariants,\n    childVariantMedia,\n    displayPrice: ReactionProduct.getVariantPriceRange,\n    isSoldOut,\n    editable\n  });\n}\n\nVariantListContainer.propTypes = {\n  variants: PropTypes.arrayOf(PropTypes.object)\n};\n\nexport default composeWithTracker(composer)(VariantListContainer);\n","import { ReactionProduct } from \"/lib/api\";\n\nexport function getChildVariants() {\n  const childVariants = [];\n  const variants = ReactionProduct.getVariants();\n  if (variants.length > 0) {\n    const current = ReactionProduct.selectedVariant();\n\n    if (!current) {\n      return [];\n    }\n\n    if (current.ancestors.length === 1) {\n      variants.map((variant) => {\n        if (typeof variant.ancestors[1] === \"string\" &&\n          variant.ancestors[1] === current._id &&\n          variant.optionTitle &&\n          variant.type !== \"inventory\") {\n          childVariants.push(variant);\n        }\n        return childVariants;\n      });\n    } else {\n      // TODO not sure we need this part...\n      variants.map((variant) => {\n        if (typeof variant.ancestors[1] === \"string\" &&\n          variant.ancestors.length === current.ancestors.length &&\n          variant.ancestors[1] === current.ancestors[1] &&\n          variant.optionTitle\n        ) {\n          childVariants.push(variant);\n        }\n        return childVariants;\n      });\n    }\n\n    return childVariants;\n  }\n\n  return null;\n}\n","import \"./templates/productDetailSimple.html\";\nimport \"./templates/productDetailSimple.js\";\nimport { registerComponent } from \"@reactioncommerce/reaction-components\";\n\nimport {\n  ProductField,\n  ProductTags,\n  ProductMetadata,\n  PriceRange,\n  AddToCartButton,\n  ProductNotFound,\n  ProductDetail,\n  VariantList\n} from \"./components\";\n\nimport { Divider } from \"/imports/plugins/core/ui/client/components\";\n\nimport {\n  SocialContainer,\n  VariantListContainer\n} from \"./containers\";\n\nimport {\n  AlertContainer,\n  MediaGalleryContainer\n} from \"/imports/plugins/core/ui/client/containers\";\n\n\n// Register PDP components and some others\nregisterComponent(\"productDetail\", ProductDetail);\nregisterComponent(\"ProductField\", ProductField);\nregisterComponent(\"ProductTags\", ProductTags);\nregisterComponent(\"ProductMetadata\", ProductMetadata);\nregisterComponent(\"PriceRange\", PriceRange);\nregisterComponent(\"AlertContainer\", AlertContainer);\nregisterComponent(\"VariantList\", VariantList);\nregisterComponent(\"MediaGalleryContainer\", MediaGalleryContainer);\nregisterComponent(\"SocialContainer\", SocialContainer);\nregisterComponent(\"VariantListContainer\", VariantListContainer);\nregisterComponent(\"AddToCartButton\", AddToCartButton);\nregisterComponent(\"Divider\", Divider);\nregisterComponent(\"ProductNotFound\", ProductNotFound);\n","import { AutoForm } from \"meteor/aldeed:autoform\";\nimport { Template } from \"meteor/templating\";\nimport { Reaction, i18next } from \"/client/api\";\nimport { Packages } from \"/lib/collections\";\nimport { SearchPackageConfig } from \"../../lib/collections/schemas\";\n\n\nTemplate.searchSettings.helpers({\n  SearchPackageConfig() {\n    return SearchPackageConfig;\n  },\n  packageData() {\n    return Packages.findOne({\n      name: \"reaction-search\",\n      shopId: Reaction.getShopId()\n    });\n  }\n});\n\n\nTemplate.searchSettings.events({\n  \"click [data-event-action=showSearchSettings]\"() {\n    Reaction.showActionView();\n  }\n});\n\nAutoForm.hooks({\n  \"search-update-form\": {\n    onSuccess() {\n      Alerts.removeSeen();\n      return Alerts.toast(i18next.t(\"searchSettings.settingsSaved\"), \"success\");\n    },\n    onError(operation, error) {\n      Alerts.removeSeen();\n      return Alerts.toast(`${i18next.t(\"searchSettings.settingsFailed\")} ${error}`, \"error\");\n    }\n  }\n});\n","import \"./settings/search.html\";\nimport \"./settings/search.js\";\n\n","export * from \"./search\";\n","import SimpleSchema from \"simpl-schema\";\nimport { PackageConfig } from \"/lib/collections/schemas/registry\";\nimport { registerSchema } from \"@reactioncommerce/schemas\";\n\nexport const SearchPackageConfig = PackageConfig.clone().extend({\n  // Remove blackbox: true from settings obj\n  \"settings\": {\n    type: Object,\n    optional: true,\n    blackbox: false,\n    defaultValue: {}\n  },\n  \"settings.products\": {\n    type: Object,\n    optional: true,\n    defaultValue: {}\n  },\n  \"settings.products.includes\": {\n    type: Object,\n    optional: true,\n    defaultValue: {}\n  },\n  \"settings.products.weights\": {\n    type: Object,\n    optional: true,\n    defaultValue: {}\n  },\n  \"settings.products.includes.title\": {\n    type: Boolean,\n    defaultValue: true,\n    label: \"Include title\"\n  },\n  \"settings.products.weights.title\": {\n    type: SimpleSchema.Integer,\n    label: \"Title weight\",\n    defaultValue: 10,\n    max: 10,\n    min: 1\n  },\n  \"settings.products.includes.description\": {\n    type: Boolean,\n    label: \"Include description\",\n    defaultValue: true\n  },\n  \"settings.products.weights.description\": {\n    type: SimpleSchema.Integer,\n    label: \"Desc. weight\",\n    defaultValue: 5,\n    max: 10,\n    min: 1\n  },\n  \"settings.products.includes.pageTitle\": {\n    type: Boolean,\n    label: \"Include page title\",\n    defaultValue: false\n  },\n  \"settings.products.weights.pageTitle\": {\n    type: SimpleSchema.Integer,\n    label: \"Page title weight\",\n    defaultValue: 2,\n    max: 10,\n    min: 1\n  },\n  \"settings.products.includes.metafields\": {\n    type: Boolean,\n    label: \"Include details\",\n    defaultValue: true\n  },\n  \"settings.products.weights.metafields\": {\n    type: SimpleSchema.Integer,\n    label: \"Details weight\",\n    defaultValue: 6,\n    max: 10,\n    min: 1\n  },\n  \"settings.products.includes.vendor\": {\n    type: Boolean,\n    label: \"Include vendor\",\n    defaultValue: true\n  },\n  \"settings.products.weights.vendor\": {\n    type: SimpleSchema.Integer,\n    label: \"Vendor weight\",\n    defaultValue: 6,\n    max: 10,\n    min: 1\n  }\n});\n\nregisterSchema(\"SearchPackageConfig\", SearchPackageConfig);\n","import React from \"react\";\nimport { $ } from \"meteor/jquery\";\nimport { Template } from \"meteor/templating\";\nimport { ReactiveDict } from \"meteor/reactive-dict\";\nimport { AutoForm } from \"meteor/aldeed:autoform\";\nimport { Shipping } from \"/lib/collections\";\nimport { i18next } from \"/client/api\";\nimport { Loading, SortableTable } from \"/imports/plugins/core/ui/client/components\";\nimport ShippoTableColumn from \"./shippoTableColumn\";\n\nimport \"./carriers.html\";\n\nTemplate.shippoCarriers.onCreated(function () {\n  this.autorun(() => {\n    this.subscribe(\"Shipping\");\n  });\n\n  this.state = new ReactiveDict();\n  this.state.setDefault({\n    isEditing: false,\n    editingId: null\n  });\n});\n\nTemplate.shippoCarriers.helpers({\n  carrierGrid() {\n    const filteredFields = [\"name\", \"carrier\", \"label\", \"enabled\"];\n    const noDataMessage = i18next.t(\"admin.shippingSettings.noCarriersFound\");\n    const instance = Template.instance();\n\n    // griddle helper to select row\n    function editRow(options) {\n      const currentId = instance.state.get(\"editingId\");\n      // isEditing is shipping rate object\n      instance.state.set(\"isEditing\", options.props.data);\n      instance.state.set(\"editingId\", options.props.data._id);\n      // toggle edit mode clicking on same row\n      if (currentId === options.props.data._id) {\n        instance.state.set(\"isEditing\", null);\n        instance.state.set(\"editingId\", null);\n      }\n    }\n\n    // add shipping-carriers-grid-row class\n    const customRowMetaData = {\n      bodyCssClassName: () => \"shipping-carriers-grid-row\"\n    };\n\n    // add i18n handling to headers\n    const customColumnMetadata = [];\n    filteredFields.forEach((field) => {\n      let colWidth;\n      let colStyle;\n      let colClassName;\n\n      if (field === \"enabled\") {\n        colWidth = undefined;\n        colStyle = { textAlign: \"center\" };\n        colClassName = \"shippo-carrier-status\";\n      }\n\n      const columnMeta = {\n        accessor: field,\n        Header: i18next.t(`admin.shippingGrid.${field}`),\n        Cell: row => ( // eslint-disable-line\n          <ShippoTableColumn row={row} />\n        ),\n        className: colClassName,\n        width: colWidth,\n        style: colStyle\n      };\n      customColumnMetadata.push(columnMeta);\n    });\n\n    // filter and extract shipping methods\n    // from flat rate shipping provider\n    function transform(results) {\n      const result = [];\n      for (const method of results) {\n        if (method.provider && typeof method.provider.shippoProvider === \"object\") {\n          method.provider.carrier = method.name;\n          result.push(method.provider);\n        }\n      }\n      return result;\n    }\n\n    // return shipping Grid\n    return {\n      component: SortableTable,\n      publication: \"Shipping\",\n      transform,\n      collection: Shipping,\n      showFilter: true,\n      rowMetadata: customRowMetaData,\n      filteredFields,\n      columns: filteredFields,\n      noDataMessage,\n      onRowClick: editRow,\n      columnMetadata: customColumnMetadata,\n      externalLoadingComponent: Loading\n    };\n  },\n\n  instance() {\n    const instance = Template.instance();\n    return instance;\n  },\n\n  shippoCarrier() {\n    const instance = Template.instance();\n    const id = instance.state.get(\"editingId\");\n    const shippoCarriers = Shipping.findOne({ \"provider._id\": id });\n    return shippoCarriers.provider;\n  }\n});\n\n//\n// on submit lets clear the form state\n//\nTemplate.shippoCarriers.events({\n  \"submit #shipping-carrier-insert-form\"() {\n    const instance = Template.instance();\n    instance.state.set({\n      isEditing: true,\n      editingId: null\n    });\n  },\n  \"click .cancel, .shipping-carriers-grid-row .active\"() {\n    const instance = Template.instance();\n    // remove active rows from grid\n    instance.state.set({\n      isEditing: false,\n      editingId: null\n    });\n    $(\".shipping-carriers-grid-row\").removeClass(\"active\");\n  },\n  \"click .shipping-carriers-grid-row\"(event) {\n    // toggle all rows off, then add our active row\n    $(\".shipping-carriers-grid-row\").removeClass(\"active\");\n    Template.instance().$(event.currentTarget).addClass(\"active\");\n  }\n});\n\n//\n// Hooks for update and insert forms\n//\nAutoForm.hooks({\n  \"shipping-carrier-update-form\": {\n    onSuccess() {\n      return Alerts.toast(i18next.t(\"admin.shippingSettings.carrierSaved\"), \"success\");\n    },\n    onError(operation, error) {\n      return Alerts.toast(`${i18next.t(\"admin.shippingSettings.carrierFailed\")} ${error}`, \"error\");\n    }\n  }\n});\n","import { Meteor } from \"meteor/meteor\";\nimport { AutoForm } from \"meteor/aldeed:autoform\";\nimport { Template } from \"meteor/templating\";\nimport { Reaction, i18next } from \"/client/api\";\nimport { Packages } from \"/lib/collections\";\nimport { ShippoPackageConfig } from \"../../lib/collections/schemas\";\n\nimport \"./shippo.html\";\n\nTemplate.shippoSettings.helpers({\n  packageData() {\n    return Packages.findOne({\n      name: \"reaction-shippo\",\n      shopId: Reaction.getShopId()\n    });\n  },\n  ShippoPackageConfig() {\n    return ShippoPackageConfig;\n  }\n});\n\nTemplate.shippoSettings.events({\n  \"click [data-event-action=fetchShippoProviders]\"(event) {\n    event.preventDefault();\n    Meteor.call(\"shippo/fetchProviders\");\n  }\n});\n\nAutoForm.hooks({\n  \"shippo-update-form\": {\n    onSuccess(formType, result) {\n      Alerts.removeSeen();\n      const successMsg = (result.type === \"delete\") ? i18next.t(\"admin.settings.saveSuccess\") :\n        i18next.t(\"shippo.connectedAndSaved\");\n\n      return Alerts.toast(successMsg, \"success\", {\n        autoHide: true\n      });\n    },\n    onError(operation, error) {\n      Alerts.removeSeen();\n\n      return Alerts.toast(`Shippo settings update failed. ${error}`, \"error\");\n    }\n  }\n});\n","import React, { Component } from \"react\";\nimport PropTypes from \"prop-types\";\nimport { Icon } from \"/imports/plugins/core/ui/client/components\";\n\nclass ShippoTableColumn extends Component {\n  static propTypes = {\n    data: PropTypes.object,\n    row: PropTypes.object\n  }\n\n  render() {\n    const { row } = this.props;\n\n    const renderColumn = row.column.id;\n\n    if (renderColumn === \"enabled\") {\n      if (row.value === true) {\n        return (\n          <span>\n            <Icon icon=\"fa fa-check\" className=\"enabled\" />\n          </span>\n        );\n      }\n      return (\n        <span>\n          <Icon icon=\"fa fa-check\" className=\"disabled\" />\n        </span>\n      );\n    }\n    return (\n      <span>{row.value}</span>\n    );\n  }\n}\n\nexport default ShippoTableColumn;\n","import \"./settings/shippo\";\nimport \"./settings/carriers\";\n","export * from \"./shippo\";\n","import { PackageConfig } from \"/lib/collections/schemas/registry\";\nimport { registerSchema } from \"@reactioncommerce/schemas\";\n\nexport const ShippoPackageConfig = PackageConfig.clone().extend({\n  // Remove blackbox: true from settings obj\n  \"settings\": {\n    type: Object,\n    optional: true,\n    blackbox: false,\n    defaultValue: {}\n  },\n  \"settings.apiKey\": {\n    type: String,\n    label: \"API Key\",\n    min: 10,\n    optional: true\n  }\n});\n\nregisterSchema(\"ShippoPackageConfig\", ShippoPackageConfig);\n","import { Template } from \"meteor/templating\";\nimport { Components } from \"@reactioncommerce/reaction-components\";\n\nTemplate.smsSettings.helpers({\n  SmsSettings() {\n    return {\n      component: Components.SmsSettings\n    };\n  }\n});\n","export { default as settings } from \"./settings\";\n","import Alert from \"sweetalert2\";\nimport { Meteor } from \"meteor/meteor\";\nimport { i18next } from \"/client/api\";\n\nexport default {\n\n  /**\n   * Save email settings\n   * @param {Object} settings - object of mail provider settings\n   * @param {Function} callback - optional callback\n   * @return {Boolean} returns true if all fields provided and update method called\n   */\n  saveSettings(settings, callback) {\n    const { apiKey, apiToken, smsProvider, smsPhone } = settings;\n\n    if (!apiKey) {\n      Alert(i18next.t(\"app.error\"), i18next.t(\"admin.alerts.noApiKey\"), \"error\");\n      return callback();\n    }\n    if (!apiToken) {\n      Alert(i18next.t(\"app.error\"), i18next.t(\"admin.alerts.noApiToken\"), \"error\");\n      return callback();\n    }\n    if (!smsProvider) {\n      Alert(i18next.t(\"app.error\"), i18next.t(\"admin.alerts.noSmsProvider\"), \"error\");\n      return callback();\n    }\n    if (!smsPhone) {\n      Alert(i18next.t(\"app.error\"), i18next.t(\"admin.alerts.noSmsPhone\"), \"error\");\n      return callback();\n    }\n\n    const save = () => {\n      Meteor.call(\"sms/saveSettings\", settings, (err) => {\n        if (err) {\n          return Alert(\n            i18next.t(\"app.error\"),\n            \"Your API credentials could not be saved\",\n            \"error\"\n          );\n        }\n        return Alert({\n          title: i18next.t(\"app.success\"),\n          text: i18next.t(\"admin.alerts.saveSuccess\"),\n          type: \"success\",\n          timer: 1700\n        }).catch(() => null);\n      });\n    };\n    save();\n    return callback();\n  }\n};\n","import React, { Component } from \"react\";\nimport PropTypes from \"prop-types\";\nimport { Components } from \"@reactioncommerce/reaction-components\";\nimport { Meteor } from \"meteor/meteor\";\nimport { Reaction } from \"/client/api\";\n\nclass SmsSettings extends Component {\n  constructor(props) {\n    super(props);\n\n    this.state = {\n      settings: props.settings || {},\n      isSaving: false\n    };\n    this.handleStateChange = this.handleStateChange.bind(this);\n    this.handleSubmit = this.handleSubmit.bind(this);\n    this.handleSelect = this.handleSelect.bind(this);\n  }\n\n  handleStateChange(e) {\n    const { settings } = this.state;\n    settings[e.target.name] = e.target.value;\n    this.setState({ settings });\n  }\n\n  handleSubmit(e) {\n    e.preventDefault();\n    const { saveSettings } = this.props;\n    const { settings } = this.state;\n    this.setState({ isSaving: true });\n    saveSettings(settings, () => this.setState({ isSaving: false }));\n  }\n\n  handleSelect(e) {\n    const { settings } = this.state;\n    settings.smsProvider = e;\n    this.setState({ settings });\n  }\n\n  handleProductFieldSave = (productId, fieldName, value) => {\n    let updateValue = value;\n    // special case, slugify handles.\n    if (fieldName === \"handle\") {\n      updateValue = Reaction.getSlug(value);\n    }\n    Meteor.call(\"products/updateProductField\", productId, fieldName, updateValue);\n  }\n\n\n  render() {\n    const { settings, isSaving } = this.state;\n\n    const smsProviders = [{\n      label: \"Twilio\", value: \"twilio\"\n    }, {\n      label: \"Nexmo\", value: \"nexmo\"\n    }];\n\n    return (\n      <Components.CardGroup>\n        <Components.Card>\n          <Components.CardHeader\n            actAsExpander={true}\n            i18nKeyTitle=\"admin.settings.smsProvider\"\n            title=\"SMS Provider\"\n          />\n          <Components.CardBody expandable={true}>\n            <form onSubmit={this.handleSubmit}>\n              <Components.Select\n                clearable={false}\n                label=\"Provider Name\"\n                i18nKeyLabel=\"admin.settings.providerName\"\n                placeholder=\"Select an SMS provider\"\n                i18nKeyPlaceholder=\"admin.settings.selectProvider\"\n                name=\"smsProvider\"\n                onChange={this.handleSelect}\n                options={smsProviders}\n                value={settings.smsProvider || \"\"}\n              />\n              <hr/>\n              <Components.TextField\n                label=\"SMS Phone Number\"\n                type=\"text\"\n                i18nKeyLabel=\"admin.settings.phoneNumber\"\n                name=\"smsPhone\"\n                value={settings.smsPhone || \"\"}\n                onChange={this.handleStateChange}\n              />\n              <Components.TextField\n                label=\"API Key\"\n                type=\"password\"\n                i18nKeyLabel=\"admin.settings.apiKey\"\n                name=\"apiKey\"\n                value={settings.apiKey || \"\"}\n                onChange={this.handleStateChange}\n              />\n              <Components.TextField\n                label=\"API Token/Secret\"\n                type=\"password\"\n                i18nKeyLabel=\"admin.settings.apiToken\"\n                name=\"apiToken\"\n                value={settings.apiToken || \"\"}\n                onChange={this.handleStateChange}\n              />\n              <Components.Button\n                bezelStyle=\"solid\"\n                status=\"primary\"\n                className=\"pull-right\"\n                type=\"submit\" disabled={isSaving}\n              >\n                {isSaving ?\n                  <i className=\"fa fa-refresh fa-spin\"/>\n                  : <span data-i18n=\"app.save\">Save</span>}\n              </Components.Button>\n            </form>\n          </Components.CardBody>\n        </Components.Card>\n      </Components.CardGroup>\n    );\n  }\n}\n\nSmsSettings.propTypes = {\n  saveSettings: PropTypes.func.isRequired,\n  settings: PropTypes.shape({\n    apiKey: PropTypes.string,\n    apiToken: PropTypes.string,\n    smsPhone: PropTypes.string,\n    smsProvider: PropTypes.string\n  })\n};\n\nexport default SmsSettings;\n","import { compose, withProps } from \"recompose\";\nimport { registerComponent, composeWithTracker } from \"@reactioncommerce/reaction-components\";\nimport { Meteor } from \"meteor/meteor\";\nimport { Sms } from \"/lib/collections\";\nimport actions from \"../actions\";\nimport SmsSettings from \"../components/smsSettings\";\n\nconst composer = (props, onData) => {\n  if (Meteor.subscribe(\"SmsSettings\").ready()) {\n    const settings = Sms.findOne();\n    onData(null, { settings });\n  }\n};\n\nconst handlers = {\n  saveSettings: actions.settings.saveSettings\n};\n\nregisterComponent(\"SmsSettings\", SmsSettings, [\n  composeWithTracker(composer),\n  withProps(handlers)\n]);\n\nexport default compose(\n  composeWithTracker(composer),\n  withProps(handlers)\n)(SmsSettings);\n","import \"./templates/smsSettings.html\";\nimport \"./templates/smsSettings.js\";\n\nexport { default as SmsSettings } from \"./containers/smsSettingsContainer\";\n","import { Template } from \"meteor/templating\";\nimport { AvalaraSettingsFormContainer } from \"../containers\";\n\nTemplate.avalaraSettings.helpers({\n  avalaraSettings() {\n    return { component: AvalaraSettingsFormContainer };\n  }\n});\n","import React, { Component } from \"react\";\nimport { inRange } from \"lodash\";\nimport PropTypes from \"prop-types\";\nimport { Meteor } from \"meteor/meteor\";\nimport { Form, Loading } from \"/imports/plugins/core/ui/client/components\";\nimport { Components } from \"@reactioncommerce/reaction-components\";\nimport { AvalaraPackageConfig } from \"../../lib/collections/schemas\";\nimport { Logs } from \"/lib/collections\";\nimport { Logs as LogSchema } from \"/lib/collections/schemas/logs\";\nimport { i18next } from \"/client/api\";\n\n/**\n * @file AvalaraSettingsForm is a React Component used to change Avalara\n * settings.\n * @module AvalaraSettingsForm\n */\n\n\n/**\n * @method AvalaraSettingsForm\n * @summary renders a form for updating Avalara settings.\n * @param {Object} props - some data for use by this component.\n * @property {Function} handleSubmit - a function for saving new Avalara settings.\n * @property {Array} hiddenFields - the fields (of the Avalara Package) to hide from the form.\n * @property {Object} settings - the value of the \"settings\" field in the Avalara Package.\n * @property {Object} shownFields - info about the fields the form is to show.\n * @return {Node} - a React node containing the Avalara settings form.\n */\nclass AvalaraSettingsForm extends Component {\n  /**\n  * @name AvalaraSettingsForm propTypes\n  * @type {propTypes}\n  * @param {Object} props - React PropTypes\n  * @property {Object} fieldsProps - map of field specific properties for avalara settings.\n  * @property {Function} handleSubmit - a function that saves new Avalara settings.\n  * @property {Array} hiddenFields - an array of the Avalara Package's fields\n  * to hide from the settings form.\n  * @property {Object} logFieldsProps - map of field specific properties for logs.\n  * @property {Object} settings - the value of the \"settings\" field in the Avalara Package.\n  * @property {Object} shownFields - info about the fields of the Avalara Package\n  * that the settings form will allow users to change.\n  * @property {Object} shownLogFields - fields to show from Log schema\n  * @return {Array} React propTypes\n  */\n  static propTypes = {\n    fieldsProp: PropTypes.object,\n    hiddenFields: PropTypes.arrayOf(PropTypes.string),\n    logFieldsProp: PropTypes.object,\n    settings: PropTypes.object,\n    shownFields: PropTypes.object,\n    shownLogFields: PropTypes.object\n  };\n  static filteredFields = [\"data.request.data.date\", \"data.request.data.type\"];\n  static noDataMessage = i18next.t(\"logGrid.noLogsFound\");\n\n  // helper adds a class to every grid row\n  static customRowMetaData = {\n    bodyCssClassName: () => \"log-grid-row\"\n  };\n\n  constructor(props) {\n    super(props);\n\n    this.handleTestCredentials = this.handleTestCredentials.bind(this);\n\n    this.state = {\n      showLogs: props.settings.avalara.enableLogging,\n      fieldsProp: {\n        ...props.fieldsProp,\n        \"settings.avalara.enableLogging\": {\n          handleChange: this.handleLogToggle\n        }\n      }\n    };\n  }\n\n  /**\n    * handleSubmit\n    * @method\n    * @summary event handler for when new Avalara settings are submitted.\n    * @param {Object} event - event info.\n    * @param {Object} changedInfo - info about the new Avalara settings.\n    * @param {String} targetField - where to save the new settings in the Avalara Package.\n    * @return {null} - returns nothing\n    */\n  handleSubmit(event, changedInfo, targetField) { // eslint-disable-line no-unused-vars\n    if (!changedInfo.isValid) {\n      return;\n    }\n    Meteor.call(\"package/update\", \"taxes-avalara\", \"settings\", changedInfo.doc.settings, (error) => {\n      if (error) {\n        Alerts.toast(\n          i18next.t(\"admin.update.avalaraUpdateFailed\", { defaultValue: \"Failed to update Avalara settings.\" }),\n          \"error\"\n        );\n        return;\n      }\n      Alerts.toast(\n        i18next.t(\"admin.update.avalaraUpdateSucceeded\", { defaultValue: \"Avalara settings updated.\" }),\n        \"success\"\n      );\n    });\n  }\n\n  handleTestCredentials() {\n    Meteor.call(\"avalara/testCredentials\", this.props.settings.avalara, (error, result) => {\n      if (error && error.message) {\n        return Alerts.toast(`${i18next.t(\"settings.testCredentialsFailed\")} ${error.message}`, \"error\");\n      }\n      try {\n        const { statusCode } = result;\n        const connectionValid = inRange(statusCode, 400);\n        if (connectionValid) {\n          return Alerts.toast(i18next.t(\"settings.testCredentialsSuccess\"), \"success\");\n        }\n        return Alerts.toast(i18next.t(\"settings.testCredentialsFailed\"), \"error\");\n      } catch (err) {\n        return Alerts.toast(i18next.t(\"settings.testCredentialsFailed\"), \"error\");\n      }\n    });\n  }\n\n  handleLogToggle = () => {\n    this.setState((prevState) => ({ showLogs: !prevState.showLogs }));\n  }\n\n  /**\n  * Shows the selected log in detail.\n  * @param  {Object} options\n  * @memberof AvalaraSettingsForm\n  */\n  editRow = (options) => {\n    const currentId = this.state.editingId;\n    const id = options.props.data._id;\n    const log = Logs.findOne(id) || {};\n    log.data = JSON.stringify(log.data, null, 4);\n    this.setState({\n      editingId: id,\n      log\n    });\n    // toggle edit mode clicking on same row\n    if (currentId === options.props.data._id) {\n      this.setState({\n        editingId: undefined,\n        log: undefined\n      });\n    }\n  }\n\n  render() {\n    const { hiddenFields, settings, shownFields, shownLogFields } = this.props;\n\n    // add i18n handling to headers\n    const customColumnMetadata = AvalaraSettingsForm.filteredFields.reduce((arr, field) => {\n      arr.push({\n        accessor: field,\n        Header: i18next.t(`logGrid.columns.${field}`)\n      });\n      return arr;\n    }, []);\n\n\n    return (\n      <div className=\"rui avalara-update-form\">\n        {!(settings.avalara.apiLoginId) &&\n          <div className=\"alert alert-info\">\n            <Components.Translation defaultValue=\"Add API Login ID to enable\" i18nKey=\"admin.taxSettings.avalaraCredentials\" />\n            <a href=\"https://admin-development.avalara.net\" target=\"_blank\">Avalara</a>\n          </div>\n        }\n        <Form\n          schema={AvalaraPackageConfig}\n          doc={{ settings }}\n          renderFromFields\n          fieldsProp={this.state.fieldsProp}\n          docPath=\"settings.avalara\"\n          name=\"settings.avalara\"\n          fields={shownFields}\n          hideFields={hiddenFields}\n          onSubmit={this.handleSubmit}\n        />\n        <div id=\"testAvalaraCredentialsContainer\">\n          <Components.Button id=\"testAvalaraCredentials\" label=\"Test Credentials\" buttonType=\"button\"\n            className=\"btn btn-default\" i18nKeyLabel=\"admin.dashboard.avalaraTestCredentials\"\n            bezelStyle=\"outline\" onClick={this.handleTestCredentials}\n          />\n        </div>\n        <div className=\"panel-body text-center avalara-login-box\">\n          <a href=\"https://admin-development.avalara.net\" target=\"_blank\">Avalara Admin Console Login</a>\n        </div>\n        {!!this.state.showLogs &&\n        (\n          <Components.SortableTable\n            publication=\"Logs\"\n            collection= {Logs}\n            query= {{ logType: \"avalara\" }}\n            matchingResultsCount=\"logs-count\"\n            showFilter\n            rowMetadata= {AvalaraSettingsForm.customRowMetaData}\n            filteredFields= {AvalaraSettingsForm.filteredFields}\n            columns= {AvalaraSettingsForm.filteredFields}\n            noDataMessage= {AvalaraSettingsForm.noDataMessage}\n            onRowClick= {this.editRow}\n            columnMetadata= {customColumnMetadata}\n            externalLoadingComponent= {Loading}\n          />\n        )}\n        <div>\n          {!!this.state.log &&\n          (\n            <Form\n              schema={LogSchema}\n              doc={this.state.log}\n              fields={shownLogFields}\n              fieldsProp={this.props.logFieldsProp}\n              autoSave\n            />\n          )}\n        </div>\n      </div>);\n  }\n}\n\nexport default AvalaraSettingsForm;\n","export { default as AvalaraSettingsForm } from \"./avalaraSettingsForm\";\n","import { composeWithTracker, registerComponent } from \"@reactioncommerce/reaction-components\";\nimport { Meteor } from \"meteor/meteor\";\nimport { Reaction } from \"/client/api\";\nimport { compose, withProps } from \"recompose\";\nimport { AvalaraPackageConfig } from \"../../lib/collections/schemas\";\nimport { AvalaraSettingsForm } from \"../components\";\nimport { Logs as LogSchema } from \"/lib/collections/schemas/logs\";\nimport { Countries } from \"/client/collections\";\n\n/**\n * @file This is a container for AvalaraSettingsForm.\n * @module avalaraSettingsFormContainer\n */\nconst countryDefaults = [\"US\", \"CA\"];\n\nconst formSettings = {\n  shownFields: {\n    \"settings.avalara.apiLoginId\": AvalaraPackageConfig._schema[\"settings.avalara.apiLoginId\"],\n    \"settings.avalara.username\": AvalaraPackageConfig._schema[\"settings.avalara.username\"],\n    \"settings.avalara.password\": AvalaraPackageConfig._schema[\"settings.avalara.password\"],\n    \"settings.avalara.companyCode\": AvalaraPackageConfig._schema[\"settings.avalara.companyCode\"],\n    \"settings.avalara.shippingTaxCode\": AvalaraPackageConfig._schema[\"settings.avalara.shippingTaxCode\"],\n    \"settings.addressValidation.enabled\": AvalaraPackageConfig._schema[\"settings.addressValidation.enabled\"],\n    \"settings.addressValidation.countryList\": AvalaraPackageConfig._schema[\"settings.addressValidation.countryList\"],\n    \"settings.avalara.requestTimeout\": AvalaraPackageConfig._schema[\"settings.avalara.requestTimeout\"],\n    \"settings.avalara.mode\": AvalaraPackageConfig._schema[\"settings.avalara.mode\"],\n    \"settings.avalara.performTaxCalculation\": AvalaraPackageConfig._schema[\"settings.avalara.performTaxCalculation\"],\n    \"settings.avalara.enableLogging\": AvalaraPackageConfig._schema[\"settings.avalara.enableLogging\"],\n    \"settings.avalara.logRetentionDuration\": AvalaraPackageConfig._schema[\"settings.avalara.logRetentionDuration\"],\n    \"settings.avalara.commitDocuments\": AvalaraPackageConfig._schema[\"settings.avalara.commitDocuments\"]\n  },\n  hiddenFields: [\n    \"settings.avalara.enabled\",\n    \"settings.avalara.companyId\"\n  ],\n  fieldsProp: {\n    \"settings.avalara.mode\": {\n      renderComponent: \"select\",\n      options: [\n        { value: true, label: \"Production Mode\" },\n        { value: false, label: \"Testing-Sandbox Mode\" }],\n      label: undefined\n    },\n    \"settings.avalara.logRetentionDuration\": {\n      renderComponent: \"string\",\n      inputType: \"number\"\n    },\n    \"settings.avalara.requestTimeout\": {\n      renderComponent: \"string\",\n      inputType: \"number\"\n    },\n    \"settings.avalara.password\": {\n      renderComponent: \"string\",\n      inputType: \"password\"\n    },\n    \"settings.avalara.apiLoginId\": {\n      renderComponent: \"string\",\n      inputType: \"text\"\n    },\n    \"settings.avalara.username\": {\n      renderComponent: \"string\",\n      inputType: \"text\"\n    },\n    \"settings.avalara.companyCode\": {\n      renderComponent: \"string\",\n      inputType: \"text\"\n    },\n    \"settings.avalara.shippingTaxCode\": {\n      renderComponent: \"string\",\n      inputType: \"text\"\n    },\n    \"settings.addressValidation.enabled\": {\n      renderComponent: \"boolean\",\n      inputType: \"checkbox\"\n    },\n    \"settings.avalara.performTaxCalculation\": {\n      renderComponent: \"boolean\",\n      inputType: \"checkbox\"\n    },\n    \"settings.avalara.enableLogging\": {\n      renderComponent: \"boolean\",\n      inputType: \"checkbox\"\n    },\n    \"settings.avalara.commitDocuments\": {\n      renderComponent: \"boolean\",\n      inputType: \"checkbox\"\n    }\n  },\n  logFieldsProp: {\n    data: {\n      renderComponent: \"string\",\n      multiline: true,\n      maxRows: 15\n    },\n    date: {\n      disabled: true\n    }\n  },\n  shownLogFields: {\n    date: LogSchema._schema.date,\n    data: LogSchema._schema.data\n  }\n};\n\nconst composer = (props, onData) => {\n  const shopId = Reaction.getShopId();\n  const packageSub = Meteor.subscribe(\"Packages\", shopId);\n\n  const validCountries = Countries.find({ value: { $in: countryDefaults } }).fetch();\n  formSettings.fieldsProp[\"settings.addressValidation.countryList\"] = {\n    renderComponent: \"multiselect\",\n    options: validCountries,\n    defaultValue: validCountries.map((country) => country.value)\n  };\n\n  if (packageSub.ready()) {\n    const packageData = Reaction.getPackageSettings(\"taxes-avalara\");\n    onData(\n      null,\n      {\n        settings: packageData.settings\n      }\n    );\n  }\n};\n\nregisterComponent(\"AvalaraSettingsForm\", AvalaraSettingsForm, [\n  withProps(formSettings), composeWithTracker(composer)\n]);\n\nexport default compose(withProps(formSettings), composeWithTracker(composer))(AvalaraSettingsForm);\n","export { default as AvalaraSettingsFormContainer } from \"./avalaraSettingsFormContainer\";\n","import \"./settings/avalara.html\";\nimport \"./settings/avalara.js\";\nimport \"./styles/settings.less\";\n","export * from \"./schema\";\n","import SimpleSchema from \"simpl-schema\";\nimport { TaxPackageConfig } from \"/imports/plugins/core/taxes/lib/collections/schemas\";\nimport { registerSchema } from \"@reactioncommerce/schemas\";\n\n/**\n* TaxPackageConfig Schema\n*/\n\nexport const AvalaraPackageConfig = TaxPackageConfig.clone().extend({\n  \"settings.avalara\": {\n    type: Object,\n    optional: true,\n    defaultValue: {}\n  },\n  \"settings.avalara.enabled\": {\n    type: Boolean,\n    optional: true,\n    defaultValue: false\n  },\n  \"settings.avalara.apiLoginId\": {\n    type: String,\n    label: \"Avalara API Login ID\"\n  },\n  \"settings.avalara.username\": {\n    type: String\n  },\n  \"settings.avalara.companyCode\": {\n    type: String\n  },\n  \"settings.avalara.companyId\": {\n    type: String,\n    optional: true\n  },\n  \"settings.avalara.password\": {\n    type: String\n  },\n  \"settings.avalara.mode\": {\n    label: \"Production Mode\",\n    type: Boolean,\n    defaultValue: false\n  },\n  \"settings.avalara.shippingTaxCode\": {\n    label: \"Shipping Tax Code\",\n    type: String\n  },\n  \"settings.addressValidation\": {\n    type: Object,\n    defaultValue: {}\n  },\n  \"settings.addressValidation.enabled\": {\n    label: \"Address Validation\",\n    type: Boolean,\n    defaultValue: true\n  },\n  \"settings.avalara.commitDocuments\": {\n    label: \"Commit Documents\",\n    type: Boolean,\n    defaultValue: true\n  },\n  \"settings.avalara.performTaxCalculation\": {\n    label: \"Perform Tax Calculation\",\n    type: Boolean,\n    defaultValue: true\n  },\n  \"settings.avalara.enableLogging\": {\n    label: \"Enable Transaction Logging\",\n    type: Boolean,\n    defaultValue: false\n  },\n  \"settings.avalara.logRetentionDuration\": {\n    label: \"Retain Logs Duration (Days)\",\n    type: SimpleSchema.Integer,\n    defaultValue: 30\n  },\n  \"settings.avalara.requestTimeout\": {\n    label: \"Request Timeout\",\n    type: SimpleSchema.Integer,\n    defaultValue: 1500\n  },\n  \"settings.addressValidation.countryList\": {\n    label: \"Enable Address Validation by Country\",\n    type: Array,\n    optional: true,\n    defaultValue: [\"US\", \"CA\"]\n  },\n  \"settings.addressValidation.countryList.$\": {\n    type: String\n  }\n});\n\nregisterSchema(\"AvalaraPackageConfig\", AvalaraPackageConfig);\n","import { Template } from \"meteor/templating\";\nimport { TaxCloudSettingsFormContainer } from \"../containers\";\n\nTemplate.taxCloudSettings.helpers({\n  /**\n   * @method taxCloudForm\n   * @summary returns a component for updating the TaxCloud settings for\n   * this app.\n   * @since 1.5.2\n   * @return {Object} - an object containing the component to render.\n   */\n  taxCloudForm() {\n    return { component: TaxCloudSettingsFormContainer };\n  }\n});\n","export { default as TaxCloudSettingsForm } from \"./taxCloudSettingsForm\";\n","import React from \"react\";\nimport PropTypes from \"prop-types\";\nimport { Form } from \"/imports/plugins/core/ui/client/components\";\nimport { Components } from \"@reactioncommerce/reaction-components\";\nimport { TaxCloudPackageConfig } from \"../../lib/collections/schemas\";\n\n/**\n * @file TaxCloudSettingsForm is a React Component used to change TaxCloud\n * settings.\n * @module TaxCloudSettingsForm\n */\n\n/**\n * @method TaxCloudSettingsForm\n * @summary renders a form for updating TaxCloud settings.\n * @param {Object} props - some data for use by this component.\n * @property {Function} handleSubmit - a function for saving new TaxCloud settings.\n * @property {Array} hiddenFields - the fields (of the TaxCloud Package) to hide from the form.\n * @property {Object} settings - the value of the \"settings\" field in the TaxCloud Package.\n * @property {Object} shownFields - info about the fields the form is to show.\n * @since 1.5.2\n * @return {Node} - a React node containing the TaxCloud settings form.\n */\nconst TaxCloudSettingsForm = (props) => {\n  const { handleSubmit, hiddenFields, settings, shownFields } = props;\n  return (\n    <div className=\"rui taxcloud-settings-form\">\n      {!settings.taxcloud.apiLoginId &&\n        <div className=\"alert alert-info\">\n          <Components.Translation\n            defaultValue=\"Add API Login ID to enable\"\n            i18nKey=\"admin.taxSettings.taxcloudCredentials\"\n          />&nbsp;\n          <a href=\"https://www.taxcloud.com/\" target=\"_blank\">TaxCloud</a>\n        </div>\n      }\n      <Form\n        schema={TaxCloudPackageConfig}\n        doc={{ settings }}\n        docPath={\"settings.taxcloud\"}\n        name={\"settings.taxcloud\"}\n        fields={shownFields}\n        hideFields={hiddenFields}\n        onSubmit={handleSubmit}\n      />\n    </div>\n  );\n};\n\n/**\n  * @name TaxCloudSettingsForm propTypes\n  * @type {propTypes}\n  * @param {Object} props - React PropTypes\n  * @property {Function} handleSubmit - a function that saves new TaxCloud settings.\n  * @property {Array} hiddenFields - an array of the TaxCloud Package's fields\n  * to hide from the settings form.\n  * @property {Object} settings - the value of the \"settings\" field in the TaxCloud Package.\n  * @property {Object} shownFields - info about the fields of the TaxCloud Package\n  * that the settings form will allow users to change.\n  * @return {Array} React propTypes\n  */\nTaxCloudSettingsForm.propTypes = {\n  handleSubmit: PropTypes.func,\n  hiddenFields: PropTypes.arrayOf(PropTypes.string),\n  settings: PropTypes.object,\n  shownFields: PropTypes.object\n};\n\nexport default TaxCloudSettingsForm;\n","export { default as TaxCloudSettingsFormContainer } from \"./taxCloudSettingsFormContainer\";\n","import { compose, withProps } from \"recompose\";\nimport { composeWithTracker, registerComponent } from \"@reactioncommerce/reaction-components\";\nimport { Meteor } from \"meteor/meteor\";\nimport { Reaction, i18next } from \"/client/api\";\nimport { TaxCloudPackageConfig } from \"../../lib/collections/schemas\";\nimport { TaxCloudSettingsForm } from \"../components\";\n\n/**\n * @file This is a container for TaxCloudSettingsForm.\n * @module taxCloudSettingsFormContainer\n */\n\nconst handlers = {\n  /**\n    * handleSubmit\n    * @method\n    * @summary event handler for when new TaxCloud settings are submitted.\n    * @param {Object} event - event info.\n    * @param {Object} changedInfo - info about the new TaxCloud settings.\n    * @param {String} targetField - where to save the new settings in the TaxCloud Package.\n    * @since 1.5.2\n    * @return {null} - returns nothing\n    */\n  handleSubmit(event, changedInfo, targetField) {\n    if (!changedInfo.isValid) {\n      return;\n    }\n    Meteor.call(\"package/update\", \"taxes-taxcloud\", targetField, changedInfo.doc.settings.taxcloud, (error) => {\n      if (error) {\n        Alerts.toast(\n          i18next.t(\"admin.update.updateFailed\", { defaultValue: \"Failed to update TaxCloud settings.\" }),\n          \"error\"\n        );\n        return;\n      }\n      Alerts.toast(\n        i18next.t(\"admin.update.updateSucceeded\", { defaultValue: \"TaxCloud settings updated.\" }),\n        \"success\"\n      );\n    });\n  }\n};\n\nconst composer = (props, onData) => {\n  const shownFields = {\n    \"settings.taxcloud.apiKey\": TaxCloudPackageConfig._schema[\"settings.taxcloud.apiKey\"],\n    \"settings.taxcloud.apiLoginId\": TaxCloudPackageConfig._schema[\"settings.taxcloud.apiLoginId\"]\n  };\n  const hiddenFields = [\n    \"settings.taxcloud.enabled\",\n    \"settings.taxcloud.refreshPeriod\",\n    \"settings.taxcloud.taxCodeUrl\"\n  ];\n\n  const shopId = Reaction.getShopId();\n  const packageSub = Meteor.subscribe(\"Packages\", shopId);\n  if (packageSub.ready()) {\n    const packageData = Reaction.getPackageSettings(\"taxes-taxcloud\");\n    onData(null, { settings: packageData.settings, shownFields, hiddenFields });\n  }\n};\n\nregisterComponent(\"TaxCloudSettingsForm\", TaxCloudSettingsForm, [\n  withProps(handlers), composeWithTracker(composer)\n]);\n\nexport default compose(withProps(handlers), composeWithTracker(composer))(TaxCloudSettingsForm);\n","import \"./settings/taxcloud.html\";\nimport \"./settings/taxcloud.js\";\n","export * from \"./schema\";\n","import { TaxPackageConfig } from \"/imports/plugins/core/taxes/lib/collections/schemas\";\nimport { registerSchema } from \"@reactioncommerce/schemas\";\n\n/**\n* TaxPackageConfig Schema\n*/\n\nexport const TaxCloudPackageConfig = TaxPackageConfig.clone().extend({\n  \"settings.taxcloud\": {\n    type: Object,\n    optional: true,\n    defaultValue: {}\n  },\n  \"settings.taxcloud.enabled\": {\n    type: Boolean,\n    optional: true,\n    defaultValue: false\n  },\n  \"settings.taxcloud.apiLoginId\": {\n    type: String,\n    label: \"TaxCloud API Login ID\"\n  },\n  \"settings.taxcloud.apiKey\": {\n    type: String,\n    label: \"TaxCloud API Key\"\n  },\n  \"settings.taxcloud.refreshPeriod\": {\n    type: String,\n    label: \"TaxCode Refresh Period\",\n    defaultValue: \"every 7 days\",\n    optional: true\n  },\n  \"settings.taxcloud.taxCodeUrl\": {\n    type: String,\n    label: \"TaxCode API Url\",\n    defaultValue: \"https://taxcloud.net/tic/?format=json\",\n    optional: true\n  }\n});\n\nregisterSchema(\"TaxCloudPackageConfig\", TaxCloudPackageConfig);\n","import { Template } from \"meteor/templating\";\nimport { AutoForm } from \"meteor/aldeed:autoform\";\nimport { Packages } from \"/lib/collections\";\nimport { Reaction, i18next } from \"/client/api\";\nimport { TaxJarPackageConfig } from \"../../lib/collections/schemas\";\n\nTemplate.taxJarSettings.helpers({\n  packageConfigSchema() {\n    return TaxJarPackageConfig;\n  },\n  packageData() {\n    return Packages.findOne({\n      name: \"taxes-taxjar\",\n      shopId: Reaction.getShopId()\n    });\n  }\n});\n\n\nAutoForm.hooks({\n  \"taxjar-update-form\": {\n    onSuccess() {\n      return Alerts.toast(\n        i18next.t(\"admin.taxSettings.shopTaxMethodsSaved\"),\n        \"success\"\n      );\n    },\n    onError(operation, error) {\n      return Alerts.toast(`${i18next.t(\"admin.taxSettings.shopTaxMethodsFailed\")} ${error}`, \"error\");\n    }\n  }\n});\n","import \"./settings/taxjar.html\";\nimport \"./settings/taxjar.js\";\n","export * from \"./schema\";\n","import { TaxPackageConfig } from \"/imports/plugins/core/taxes/lib/collections/schemas\";\nimport { registerSchema } from \"@reactioncommerce/schemas\";\n\n/**\n* TaxPackageConfig Schema\n*/\n\nexport const TaxJarPackageConfig = TaxPackageConfig.clone().extend({\n  \"settings.taxjar\": {\n    type: Object,\n    optional: true,\n    defaultValue: {}\n  },\n  \"settings.taxjar.enabled\": {\n    type: Boolean,\n    optional: true,\n    defaultValue: false\n  },\n  \"settings.taxjar.apiLoginId\": {\n    type: String,\n    label: \"TaxJar API Login ID\",\n    optional: true\n  }\n});\n\nregisterSchema(\"TaxJarPackageConfig\", TaxJarPackageConfig);\n","import React, { Component } from \"react\";\nimport PropTypes from \"prop-types\";\nimport classnames from \"classnames\";\nimport { Reaction } from \"/client/api\";\nimport { TextField, Button, IconButton, SortableTableLegacy } from \"@reactioncommerce/reaction-ui\";\nimport ProductGridContainer from \"/imports/plugins/included/product-variant/containers/productGridContainer\";\nimport { accountsTable } from \"../helpers\";\n\nclass SearchModal extends Component {\n  static propTypes = {\n    accounts: PropTypes.array,\n    handleAccountClick: PropTypes.func,\n    handleChange: PropTypes.func,\n    handleClick: PropTypes.func,\n    handleTagClick: PropTypes.func,\n    handleToggle: PropTypes.func,\n    products: PropTypes.array,\n    siteName: PropTypes.string,\n    tags: PropTypes.array,\n    unmountMe: PropTypes.func,\n    value: PropTypes.string\n  }\n\n  state = {\n    activeTab: \"products\"\n  }\n\n  componentDidMount() {\n    // Focus and select all text in the search input\n    const { input } = this.textField.refs;\n    input.select();\n  }\n\n\n  isKeyboardAction(event) {\n    // keyCode 32 (spacebar)\n    // keyCode 13 (enter/return)\n    return event.keyCode === 13 || event.keyCode === 32;\n  }\n\n  handleToggleProducts = () => {\n    this.props.handleToggle(\"products\");\n    this.setState({ activeTab: \"products\" });\n  }\n\n  handleToggleAccounts = () => {\n    this.props.handleToggle(\"accounts\");\n    this.setState({ activeTab: \"accounts\" });\n  }\n\n  handleOnKeyUpToggleProducts = (event) => {\n    if (this.isKeyboardAction(event)) {\n      this.handleToggleProducts();\n    }\n  }\n\n  handleOnKeyUpToggleAccounts = (event) => {\n    if (this.isKeyboardAction(event)) {\n      this.handleToggleAccounts();\n    }\n  }\n\n  handleSubmit = (event) => {\n    // Ignore submit events from form as search happens on chnage of the TextField\n    event.preventDefault();\n  }\n\n  renderSearchInput() {\n    return (\n      <form className=\"rui search-modal-input\" role=\"search\" onSubmit={this.handleSubmit}>\n        <i className=\"fa fa-search search-icon\" />\n        <TextField\n          id=\"search-modal-input\"\n          ref={(input) => { this.textField = input; }}\n          label={`Search ${this.props.siteName}`}\n          i18nKeyLabel=\"search.searchInputLabel\"\n          className=\"search-input\"\n          textFieldStyle={{ marginBottom: 0 }}\n          onChange={this.props.handleChange}\n          value={this.props.value}\n        />\n        <Button\n          className=\"search-clear\"\n          i18nKeyLabel=\"search.clearSearch\"\n          label=\"Clear\"\n          containerStyle={{ fontWeight: \"normal\" }}\n          type=\"button\"\n          onClick={this.props.handleClick}\n        />\n      </form>\n    );\n  }\n\n  renderSearchTypeToggle() {\n    if (Reaction.hasPermission(\"admin\")) {\n      const productTabClassName = classnames({\n        \"search-type-option\": true,\n        \"search-type-active\": this.state.activeTab === \"products\"\n      });\n\n      const accountsTabClassName = classnames({\n        \"search-type-option\": true,\n        \"search-type-active\": this.state.activeTab === \"accounts\"\n      });\n\n      return (\n        <div className=\"rui search-type-toggle\">\n          <button\n            className={productTabClassName}\n            data-i18n=\"search.searchTypeProducts\"\n            data-event-action=\"searchCollection\"\n            data-event-value=\"products\"\n            onClick={this.handleToggleProducts}\n            onKeyUp={this.handleOnKeyUpToggleProducts}\n          >\n            Products\n          </button>\n          {Reaction.hasPermission(\"accounts\") &&\n            <button\n              className={accountsTabClassName}\n              data-i18n=\"search.searchTypeAccounts\"\n              data-event-action=\"searchCollection\"\n              data-event-value=\"accounts\"\n              onClick={this.handleToggleAccounts}\n              onKeyUp={this.handleOnKeyUpToggleAccounts}\n            >\n              Accounts\n            </button>\n          }\n        </div>\n      );\n    }\n  }\n\n  renderProductSearchTags() {\n    return (\n      <div className=\"rui search-modal-tags-container\">\n        <p className=\"rui suggested-tags\" data-i18n=\"search.suggestedTags\">Suggested tags</p>\n        <div className=\"rui search-tags\">\n          {this.props.tags.map((tag) => (\n            <span\n              className=\"rui search-tag\"\n              id={tag._id} key={tag._id}\n              onClick={() => this.props.handleTagClick(tag._id)}\n              onKeyUp={(event) => {\n                if (this.isKeyboardAction(event)) {\n                  this.props.handleTagClick(tag._id);\n                }\n              }}\n              role=\"button\"\n              tabIndex={0}\n            >\n              {tag.name}\n            </span>\n          ))}\n        </div>\n      </div>\n    );\n  }\n\n  render() {\n    return (\n      <div>\n        <div className=\"rui search-modal-close\"><IconButton icon=\"fa fa-times\" onClick={this.props.unmountMe} /></div>\n        <div className=\"rui search-modal-header\">\n          {this.renderSearchInput()}\n          {this.renderSearchTypeToggle()}\n          {this.props.tags.length > 0 && this.renderProductSearchTags()}\n        </div>\n        <div className=\"rui search-modal-results-container\">\n          {this.props.products.length > 0 &&\n            <ProductGridContainer\n              products={this.props.products}\n              unmountMe={this.props.unmountMe}\n              isSearch={true}\n            />\n          }\n          {this.props.accounts.length > 0 &&\n            <div className=\"data-table\">\n              <div className=\"table-responsive\">\n                <SortableTableLegacy\n                  data={this.props.accounts}\n                  columns={accountsTable()}\n                  onRowClick={this.props.handleAccountClick}\n                />\n              </div>\n            </div>\n          }\n        </div>\n      </div>\n    );\n  }\n}\n\nexport default SearchModal;\n","import React, { Component } from \"react\";\nimport PropTypes from \"prop-types\";\nimport ReactDom from \"react-dom\";\nimport { compose } from \"recompose\";\nimport _ from \"lodash\";\nimport { Reaction } from \"/client/api\";\nimport { registerComponent } from \"@reactioncommerce/reaction-components\";\nimport SearchSubscription from \"./searchSubscription\";\n\nfunction tagToggle(arr, val) {\n  if (arr.length === _.pull(arr, val).length) {\n    arr.push(val);\n  }\n  return arr;\n}\n\nfunction getModalRootNode() {\n  let modalNode = document.getElementById(\"search-modal-root\");\n\n  if (modalNode) {\n    return modalNode;\n  }\n\n  modalNode = document.createElement(\"div\");\n  modalNode.setAttribute(\"id\", \"search-modal-root\");\n  document.body.appendChild(modalNode);\n\n  return modalNode;\n}\n\nconst wrapComponent = (Comp) => (\n  class SearchModalContainer extends Component {\n    static propTypes = {\n      onClose: PropTypes.func,\n      open: PropTypes.bool\n    }\n\n    constructor(props) {\n      super(props);\n      this.state = {\n        collection: \"products\",\n        value: localStorage.getItem(\"searchValue\") || \"\",\n        renderChild: true,\n        facets: []\n      };\n    }\n\n    componentDidMount() {\n      document.addEventListener(\"keydown\", this.handleKeyDown);\n      window.addEventListener(\"popstate\", this.handleUrlChange);\n    }\n\n    componentWillUnmount() {\n      document.removeEventListener(\"keydown\", this.handleKeyDown);\n      window.removeEventListener(\"popstate\", this.handleUrlChange);\n    }\n\n    handleUrlChange = () => {\n      this.handleChildUnmount();\n    }\n\n    handleKeyDown = (event) => {\n      if (event.keyCode === 27) {\n        this.setState({\n          renderChild: false\n        });\n      }\n    }\n\n    handleChange = (event, value) => {\n      localStorage.setItem(\"searchValue\", value);\n\n      this.setState({ value });\n    }\n\n    handleClick = () => {\n      localStorage.setItem(\"searchValue\", \"\");\n      this.setState({ value: \"\" });\n    }\n\n    handleAccountClick = (event) => {\n      Reaction.Router.go(\"account/profile\", {}, { userId: event._id });\n      this.handleChildUnmount();\n    }\n\n    handleTagClick = (tagId) => {\n      const newFacet = tagId;\n      const element = document.getElementById(tagId);\n      element.classList.toggle(\"active-tag\");\n\n      this.setState({\n        facets: tagToggle(this.state.facets, newFacet)\n      });\n    }\n\n    handleToggle = (collection) => {\n      this.setState({ collection });\n    }\n\n    handleChildUnmount = () => {\n      if (this.props.onClose) {\n        this.props.onClose();\n      }\n    }\n\n    render() {\n      return ReactDom.createPortal(\n        (\n          <div>\n            {this.props.open ?\n              <div className=\"rui search-modal js-search-modal\">\n                <Comp\n                  handleChange={this.handleChange}\n                  handleClick={this.handleClick}\n                  handleToggle={this.handleToggle}\n                  handleAccountClick={this.handleAccountClick}\n                  handleTagClick={this.handleTagClick}\n                  value={this.state.value}\n                  unmountMe={this.handleChildUnmount}\n                  searchCollection={this.state.collection}\n                  facets={this.state.facets}\n                />\n              </div> : null\n            }\n          </div>\n        ), getModalRootNode()\n      );\n    }\n  }\n);\n\nregisterComponent(\"SearchSubscription\", SearchSubscription, [wrapComponent]);\n\nexport default compose(wrapComponent)(SearchSubscription);\n","import React, { Component } from \"react\";\nimport { Meteor } from \"meteor/meteor\";\nimport * as Collections from \"/lib/collections\";\nimport { Components, composeWithTracker } from \"@reactioncommerce/reaction-components\";\nimport SearchModal from \"../components/searchModal\";\n\nclass SearchSubscription extends Component {\n  render() {\n    return (\n      <SearchModal {...this.props}/>\n    );\n  }\n}\n\nfunction getSiteName() {\n  const shop = Collections.Shops.findOne();\n  return typeof shop === \"object\" && shop.name ? shop.name : \"\";\n}\n\nfunction getProductHashtags(productResults) {\n  const foundHashtags = {}; // Object to keep track of results for O(1) lookup\n  return productResults.reduce((hashtags, product) => {\n    if (Array.isArray(product.hashtags)) {\n      product.hashtags.forEach((tag) => {\n        // If we haven't added this tag yet, push it and add it to the foundHashtags dict\n        if (!foundHashtags[tag]) {\n          hashtags.push(tag);\n          foundHashtags[tag] = true;\n        }\n      });\n    }\n    return hashtags;\n  }, []);\n}\n\nfunction composer(props, onData) {\n  const searchResultsSubscription = Meteor.subscribe(\"SearchResults\", props.searchCollection, props.value, props.facets);\n  const shopMembersSubscription = Meteor.subscribe(\"ShopMembers\");\n\n  if (searchResultsSubscription.ready() && shopMembersSubscription.ready()) {\n    const siteName = getSiteName();\n    let productResults = [];\n    let tagSearchResults = [];\n    let accountResults = [];\n\n    /*\n    * Product Search\n    */\n    if (props.searchCollection === \"products\") {\n      productResults = Collections.ProductSearch.find().fetch();\n\n      const productHashtags = getProductHashtags(productResults);\n      tagSearchResults = Collections.Tags.find({\n        _id: { $in: productHashtags }\n      }).fetch();\n    }\n\n    /*\n      * Account Search\n      */\n    if (props.searchCollection === \"accounts\") {\n      accountResults = Collections.AccountSearch.find().fetch();\n    }\n\n    onData(null, {\n      siteName,\n      products: productResults,\n      accounts: accountResults,\n      tags: tagSearchResults\n    });\n  }\n}\n\nexport default composeWithTracker(composer, Components.Loading)(SearchSubscription);\n","import React from \"react\";\nimport { DataType } from \"react-taco-table\";\nimport { i18next } from \"/client/api\";\n\nexport default function accountsTable() {\n  const columns = [\n    {\n      id: \"_id\",\n      type: DataType.String,\n      header: i18next.t(\"search.accountSearchResults.accountId\", { defaultValue: \"Account ID\" }),\n      value: (rowData) => rowData._id\n    },\n    {\n      id: \"shopId\",\n      type: DataType.String,\n      header: i18next.t(\"search.accountSearchResults.shopId\", { defaultValue: \"Shop ID\" }),\n      value: (rowData) => rowData.shopId\n    },\n    {\n      id: \"firstName\",\n      type: DataType.String,\n      header: i18next.t(\"search.accountSearchResults.firstName\", { defaultValue: \"First Name\" }),\n      value: (rowData) => {\n        if (rowData.profile) {\n          return rowData.profile.firstName;\n        }\n        return i18next.t(\"search.accountSearchResults.notAvailable\", \"Not available\");\n      }\n    },\n    {\n      id: \"lastName\",\n      type: DataType.String,\n      header: i18next.t(\"search.accountSearchResults.lastName\", { defaultValue: \"Last Name\" }),\n      value: (rowData) => {\n        if (rowData.profile) {\n          return rowData.profile.lastName;\n        }\n        return i18next.t(\"search.accountSearchResults.notAvailable\", \"Not available\");\n      }\n    },\n    {\n      id: \"phone\",\n      type: DataType.String,\n      header: i18next.t(\"search.accountSearchResults.phone\", { defaultValue: \"Phone\" }),\n      value: (rowData) => {\n        if (rowData.profile) {\n          return rowData.profile.phone;\n        }\n        return i18next.t(\"search.accountSearchResults.notAvailable\", \"Not available\");\n      }\n    },\n    {\n      id: \"email\",\n      type: DataType.String,\n      header: i18next.t(\"search.accountSearchResults.emails\", { defaultValue: \"Email\" }),\n      value: (rowData) => rowData.emails[0]\n    },\n    {\n      id: \"manageAccount\",\n      type: DataType.String,\n      header: \"\",\n      value: (rowData) => rowData.emails[0],\n      tdClassName: \"account-manage\",\n      renderer(cellData, { rowData }) {\n        return <span data-event-action=\"manageAccount\" data-event-data={rowData._id}>View</span>;\n      }\n    }\n  ];\n\n  return columns;\n}\n","export { default as accountsTable } from \"./accountsTable\";\n\n","// Search Modal\nexport { default as SearchModalContainer } from \"../lib/containers/searchModalContainer\";\n","/**\n * Set up default Reaction favicon for all browsers/platforms\n * Assets generated by https://realfavicongenerator.net\n */\n\n\n// folder path where all assets live\nconst basePath = \"/custom/favicon/\"; \n\n// define link tags\nconst linkTags = [\n  {\n    rel: \"apple-touch-icon\",\n    sizes: \"180x180\",\n    href: `${basePath}apple-touch-icon.png`\n  },\n  {\n    rel: \"icon\",\n    type: \"image/png\",\n    sizes: \"32x32\",\n    href: `${basePath}favicon-32x32.png`\n  },\n  {\n    rel: \"icon\",\n    type: \"image/png\",\n    sizes: \"16x16\",\n    href: `${basePath}favicon-16x16.png`\n  },\n  {\n    rel: \"manifest\",\n    href: `${basePath}manifest.json`\n  },\n  {\n    rel: \"mask-icon\",\n    color: \"#5bbad5\",\n    href: `${basePath}safari-pinned-tab.svg`\n  },\n  {\n    rel: \"shortcut icon\",\n    href: `${basePath}favicon.ico`\n  }\n];\n\n\n// define meta tags\nconst metaTags = [\n  {\n    name: \"msapplication-config\",\n    content: `${basePath}browserconfig.xml`\n  },\n  {\n    name: \"theme-color\",\n    content: \"#ffffff\"\n  }\n];\n\n\n/**\n * Add a tag to the <head> of the page\n * @param {String} type - tag type (link, meta, etc.)\n * @param {Object} details - key/value pairs for tag attributes\n * @return {undefined} no return value\n */\nfunction addTag(type, details) {\n  let props = \"\";\n  for (const key in details) {\n    if ({}.hasOwnProperty.call(details, key)) {\n      props += `${key}=\"${details[key]}\" `;\n    }\n  }\n  const tag = `<${type} ${props}/>`;\n  document.getElementsByTagName(\"head\")[0].insertAdjacentHTML(\"beforeend\", tag);\n}\n\n\n// add the favicon tags to the <head>\nlinkTags.forEach((tag) => addTag(\"link\", tag));\nmetaTags.forEach((tag) => addTag(\"meta\", tag));\n\n\n// HTML output should look like this...\n//\n// <link rel=\"apple-touch-icon\" sizes=\"180x180\" href=\"https://assets.reactioncommerce.com/favicon/apple-touch-icon.png\">\n// <link rel=\"icon\" type=\"image/png\" href=\"https://assets.reactioncommerce.com/favicon/favicon-32x32.png\" sizes=\"32x32\">\n// <link rel=\"icon\" type=\"image/png\" href=\"https://assets.reactioncommerce.com/favicon/favicon-16x16.png\" sizes=\"16x16\">\n// <link rel=\"manifest\" href=\"https://assets.reactioncommerce.com/favicon/manifest.json\">\n// <link rel=\"mask-icon\" href=\"https://assets.reactioncommerce.com/favicon/safari-pinned-tab.svg\" color=\"#5bbad5\">\n// <link rel=\"shortcut icon\" href=\"https://assets.reactioncommerce.com/favicon/favicon.ico\">\n// <meta name=\"msapplication-config\" content=\"https://assets.reactioncommerce.com/favicon/browserconfig.xml\">\n// <meta name=\"theme-color\" content=\"#ffffff\">\n","// Favicons\nimport \"./favicons\";\n\n// Scripts\nimport \"bootstrap/dist/js/npm.js\";\n","import { Template } from \"meteor/templating\";\nimport { KnowledgeSettingsFormContainer } from \"../containers\";\nimport \"./knowledgeSettings.html\";\n\nTemplate.knowledgeSettings.helpers({\n  ExampleSettings() {\n    return {\n      component: KnowledgeSettingsFormContainer\n    };\n  }\n});\n","import React, { Component } from \"react\";\nimport PropTypes from \"prop-types\";\nimport _ from \"lodash\";\nimport { TextField, Translation, Checkbox } from \"/imports/plugins/core/ui/client/components\";\n\nclass KnowledgeSettingsForm extends Component {\n  constructor(props) {\n    super(props);\n    this.state = {\n      settings: {\n        apiKey: props.settings.apiKey,\n        support: props.settings.support\n      },\n      checkbox: {\n        \"Authorize\": _.includes(props.settings.support, \"Authorize\"),\n        \"De-authorize\": _.includes(props.settings.support, \"De-authorize\"),\n        \"Capture\": _.includes(props.settings.support, \"Capture\"),\n        \"Refund\": _.includes(props.settings.support, \"Refund\")\n      }\n    };\n  }\n\n  handleStateChange = (e) => {\n    const { settings } = this.state;\n    settings[e.target.name] = e.target.value;\n    this.setState({ settings });\n  }\n\n  handleCheckBox = (event, isInputChecked, name) => {\n    const { checkbox, settings } = this.state;\n    checkbox[name] = isInputChecked;\n    this.setState({ checkbox });\n    if (!_.includes(settings.support, name) && isInputChecked) {\n      settings.support.push(name);\n      return this.setState({ settings });\n    }\n    const index = settings.support.indexOf(name);\n    settings.support.splice(index, 1);\n    return this.setState({ settings });\n  }\n\n  handleSubmit = (e) => {\n    e.preventDefault();\n    return this.props.onSubmit(this.state.settings);\n  }\n\n\n  render() {\n    const { settings } = this.props;\n    const setting = this.state.settings;\n\n    return (\n      <div>\n        { !settings.apiKey &&\n          <div className=\"alert alert-info\">\n            <Translation defaultValue=\"Example Credentials\" i18nKey=\"admin.paymentSettings.exampleCredentials\"/>\n          </div>\n        }\n\n        <form onSubmit={this.handleSubmit}>\n          <TextField\n            label=\"API Key\"\n            name=\"apiKey\"\n            type=\"text\"\n            onChange={this.handleStateChange}\n            value={setting.apiKey}\n          />\n\n          <span className=\"control-label\">\n            <Translation defaultValue=\"Payment provider supported methods\" i18nKey=\"reaction-payments.paymentSettings.supportedMethodsLabel\"/>\n          </span>\n          <br/>\n\n          <div>\n            <Checkbox\n              label=\"Authorize\"\n              onChange={this.handleCheckBox}\n              name=\"Authorize\"\n              checked={this.state.checkbox.Authorize}\n            />\n          </div>\n\n          <div>\n            <Checkbox\n              label=\"De-authorize\"\n              onChange={this.handleCheckBox}\n              name=\"De-authorize\"\n              checked={this.state.checkbox[\"De-authorize\"]}\n            />\n          </div>\n\n          <div>\n            <Checkbox\n              label=\"Capture\"\n              onChange={this.handleCheckBox}\n              name=\"Capture\"\n              checked={this.state.checkbox.Capture}\n            />\n          </div>\n\n          <div>\n            <Checkbox\n              label=\"Refund\"\n              onChange={this.handleCheckBox}\n              name=\"Refund\"\n              checked={this.state.checkbox.Refund}\n            />\n          </div>\n\n\n          <button className=\"btn btn-primary pull-right\" type=\"submit\">\n            <Translation defaultValue=\"Save Changes\" i18nKey=\"app.saveChanges\"/>\n          </button>\n        </form>\n\n      </div>\n    );\n  }\n}\n\nKnowledgeSettingsForm.propTypes = {\n  onChange: PropTypes.func.isRequired,\n  onSubmit: PropTypes.func.isRequired,\n  settings: PropTypes.object\n};\n\nexport default KnowledgeSettingsForm;\n","export { default as KnowledgeSettingsForm } from \"./KnowledgeSettingsForm.js\";\n","export { default as KnowledgeSettingsFormContainer } from \"./knowledgeSettingsFormContainer\";\n","import React, { Component } from \"react\";\nimport PropTypes from \"prop-types\";\nimport { composeWithTracker } from \"@reactioncommerce/reaction-components\";\nimport { Meteor } from \"meteor/meteor\";\nimport { Packages } from \"/lib/collections\";\nimport { Reaction, i18next } from \"/client/api\";\nimport { KnowledgeSettingsForm } from \"../components\";\n\nclass KnowledgeSettingsFormContainer extends Component {\n  constructor(props) {\n    super(props);\n\n    this.state = {\n      apiKey: \"278302390293\"\n    };\n\n    this.handleChange = this.handleChange.bind(this);\n    this.handleSubmit = this.handleSubmit.bind(this);\n    this.saveUpdate = this.saveUpdate.bind(this);\n  }\n\n  handleChange(e) {\n    e.preventDefault();\n    this.setState({ apiKey: e.target.value });\n  }\n\n  handleSubmit(settings) {\n    // e.preventDefault();\n\n    const packageId = this.props.packageData._id;\n    const { settingsKey } = this.props.packageData.registry[0];\n\n    const fields = [{\n      property: \"apiKey\",\n      value: settings.apiKey\n    }, {\n      property: \"support\",\n      value: settings.support\n    }];\n\n    this.saveUpdate(fields, packageId, settingsKey);\n  }\n\n  saveUpdate(fields, id, settingsKey) {\n    Meteor.call(\"registry/update\", id, settingsKey, fields, (err) => {\n      if (err) {\n        return Alerts.toast(i18next.t(\"admin.settings.saveFailed\"), \"error\");\n      }\n      return Alerts.toast(i18next.t(\"admin.settings.saveSuccess\"), \"success\");\n    });\n  }\n\n  render() {\n    const { settingsKey } = this.props.packageData.registry[0];\n    return (\n      <KnowledgeSettingsForm\n        onChange={this.handleChange}\n        onSubmit={this.handleSubmit}\n        settings={this.props.packageData.settings[settingsKey]}\n      />\n    );\n  }\n}\n\nKnowledgeSettingsFormContainer.propTypes = {\n  packageData: PropTypes.object\n};\n\nconst composer = (props, onData) => {\n  const subscription = Meteor.subscribe(\"Packages\", Reaction.getShopId());\n  if (subscription.ready()) {\n    const packageData = Packages.findOne({\n      name: \"example-paymentmethod\",\n      shopId: Reaction.getShopId()\n    });\n    onData(null, { packageData });\n  }\n};\n\nexport default composeWithTracker(composer)(KnowledgeSettingsFormContainer);\n","import { Meteor } from \"meteor/meteor\";\nimport { Template } from \"meteor/templating\";\nimport { Reaction } from \"/client/api\";\nimport { Cart, Shops, Packages } from \"/lib/collections\";\n// import { Example } from \"../../lib/api\";\n// import { ExamplePayment } from \"../../lib/collections/schemas\";\n\nimport \"./knowledgePaymentForm.jade\";\n\nTemplate.knowledgePaymentForm.events({\n  'click .btn-complete-order': function(event){\n    console.log('click .btn-complete-order');\n    event.preventDefault();\n    var infoPay = {\n      total : Number(Cart.findOne().getTotal()),\n      currency : Shops.findOne().currency\n    };\n    Meteor.call('knoledgePayments/authorize', infoPay, function(error, result){\n      if(error){\n        console.error(error);\n        FlashMessages.sendError(error.error);\n      } else {\n        console.log('Result', result);\n\n        Meteor.subscribe(\"Packages\", Reaction.getShopId());\n        const packageData = Packages.findOne({\n          name: \"knowledge-paymentmethod\",\n          shopId: Reaction.getShopId()\n        });\n\n        console.log('PackageData', packageData);\n\n        Meteor.call(\"cart/submitPayment\", {\n          processor: \"Knowledge\",\n          paymentPackageId: packageData._id,\n          paymentSettingsKey: packageData.registry[0].settingsKey,\n          transactionId: 'tbd',\n          currency: infoPay.currency,\n          amount: infoPay.total,\n          status: 'completed',\n          mode: \"authorize\",\n          createdAt: new Date(),\n          transactions: [infoPay]\n        });\n      }\n    });\n  }\n});\n","import \"./settings/templates/knowledgeSettings\";\n\nimport \"./checkout/knowledgePaymentForm.jade\";\nimport \"./checkout/knowledgePaymentForm.js\";\n","import { ReactionProduct, getShopId, Reaction } from \"/lib/api\";\nimport { Shops, SellerShops } from \"/lib/collections\";\n\n/**\n * @method MetaData\n * @memberof Router\n * @summary Populates title and meta tags for routes\n * accepts Router.current() as context\n * @param context\n * @example MetaData.init(Router.current());\n */\nexport const MetaData = {\n  init(context) {\n    const { params } = context;\n    const product = ReactionProduct.selectedProduct();\n    const shop = Shops.findOne(getShopId());\n    const meta = [];\n    let title = \"\";\n    let description = \"\";\n    let keywords = [];\n\n    // case helper\n    const titleCase = (param) => param.charAt(0).toUpperCase() + param.substring(1);\n\n    // populate meta from shop\n    if (shop) {\n      // shop defaults\n      if (shop.description) {\n        description = shop.description.substring(0, 160);\n      }\n\n      if (shop.keywords) {\n        keywords.push(shop.keywords.toString());\n      }\n\n      // set title defaults\n      MetaData.name = shop.name;\n\n      // product title default\n      if (params && params.handle) {\n        if (product && product.title) {\n          title = titleCase(product.title);\n        } else {\n          title = titleCase(params.handle);\n        }\n\n      // tag slugs\n      } else if (params && params.slug) {\n        title = titleCase(params.slug);\n\n      // fallback to route name\n      } else if (context.route && context.route.name) {\n        const { route } = context;\n        const routeName = route.name;\n\n        // default index to Shop Name\n        if (routeName === \"index\") {\n          title = titleCase(shop.name);\n\n        // seller shop homepage\n        } else if (routeName === \"shop\") {\n          const currentShop = SellerShops.findOne(params.shopId);\n          if (currentShop) {\n            title = titleCase(currentShop.name);\n          } else {\n            title = titleCase(routeName);\n          }\n        // check for meta in package route\n        } else if (route.options.meta && route.options.meta.title) {\n          title = titleCase(route.options.meta.title);\n        } else {\n          // default routes to route's name\n          title = titleCase(routeName);\n        }\n      }\n\n      //  product details\n      if (params && params.handle && product) {\n        // discard defaults\n        Reaction.DOM.removeDocHeadAddedTags();\n\n        if (product.description) {\n          description = product.description.substring(0, 160);\n        }\n\n        if (product && product.metafields) {\n          // Clear shop keywords, to make keywords specific to this product page.\n          keywords = [];\n          for (const key of product.metafields) {\n            keywords.push(key.value);\n          }\n        }\n      }\n    } // end shop\n\n    Reaction.DOM.setMetaTag({\n      name: \"description\",\n      content: description\n    });\n\n    Reaction.DOM.setMetaTag({\n      name: \"keywords\",\n      content: keywords ? keywords.toString() : \"\"\n    });\n\n    // set site defaults\n    document.title = title;\n    MetaData.title = title;\n    MetaData.meta = meta;\n\n    return meta;\n  } // end update\n};\n","import { Meteor } from \"meteor/meteor\";\nimport { check, Match } from \"meteor/check\";\n\n/**\n * @file Methods for Account Validation\n * Methods for validating account username, email and password. Methods are exported globally in the `LoginFormValidation` object and they are also registered as Meteor methods. Call the methods using\n * `Meteor.call()` or `LoginFormValidation.method`.\n * @example LoginFormValidation.password(password, { validationLevel: \"exists\" })\n * @example Meteor.call(\"accounts/validation/email\", newEmail, false, (result, error))\n * @namespace Methods/Accounts/Validation\n */\n\nconst validationMethods = {\n  /**\n   * @name accounts/validation/username\n   * @method\n   * @memberof Methods/Accounts/Validation\n   * @summary Determines if a username meets the minimum requirement of 3 characters\n   * @param  {String} username Username to validate\n   * @return {Boolean|Object} true if valid, error object if invalid\n   */\n  username(username) {\n    check(username, Match.OptionalOrNull(String));\n\n    // Valid\n    if (username.length >= 3) {\n      return true;\n    }\n\n    // Invalid\n    return {\n      error: \"INVALID_USERNAME\",\n      reason: \"Username must be at least 3 characters long\",\n      i18nKeyReason: \"accountsUI.error.usernameMinLength\"\n    };\n  },\n\n  /**\n   * @name accounts/validation/email\n   * @method\n   * @memberof Methods/Accounts/Validation\n   * @summary Validates both required and optional email addresses.\n   * @example LoginFormValidation.email(emailAddress)\n   * @example Meteor.call(\"accounts/validation/email\", newEmail, false, callbackFunction())\n   * @param  {String} email Email address to validate\n   * @param  {Boolean} optional If set to true, validation will pass if email is blank\n   * @return {Boolean|Object} Returns true if valid; Returns an error object if invalid\n   */\n  email(email, optional) {\n    check(email, Match.OptionalOrNull(String));\n    check(optional, Match.OptionalOrNull(Boolean));\n\n    const processedEmail = email.trim();\n\n    // Valid\n    if (optional === true && processedEmail.length === 0) {\n      return true;\n    } else if (processedEmail.indexOf(\"@\") !== -1) {\n      return true;\n    }\n\n    // Invalid\n    return {\n      error: \"INVALID_EMAIL\",\n      reason: \"Email address is invalid\",\n      i18nKeyReason: \"accountsUI.error.invalidEmail\"\n    };\n  },\n\n  /**\n   * @name accounts/validation/password\n   * @method\n   * @memberof Methods/Accounts/Validation\n   * @summary Passwords may be validated 2 ways.\n   * 1. \"exists\" `(options.validationLevel = \"exists\")` - Password must not be blank.\n   * Thats is the only rule. Used to validate a sign in.\n   * 2. undefined `(options.validationLevel = undefined)` - Password must meet the lenght and other criteria to validate.\n   * Used for validating a new sign up.\n   * @example LoginFormValidation.password(pword, { validationLevel: \"exists\" })\n   * @param  {String} password Password to validate\n   * @param  {Object} options Options to apply to the password validator\n   * @param  {String} options.validationLevel \"exists\" | undefined (default)\n   * @return {Boolean|Object} true if valid | Error object otherwise: {error: String, reason: String}\n   */\n  password(password, options) {\n    check(password, Match.OptionalOrNull(String));\n    check(options, Match.OptionalOrNull(Object));\n\n    const passwordOptions = options || {};\n    const errors = [];\n\n    // Only check if a password has been entered at all.\n    // This is usefull for the login forms\n    if (passwordOptions.validationLevel === \"exists\") {\n      if (password && password.length > 0) {\n        return true;\n      }\n\n      errors.push({\n        error: \"INVALID_PASSWORD\",\n        reason: \"Password is required\",\n        i18nKeyReason: \"accountsUI.error.passwordRequired\"\n      });\n    } else if (password.length < 6) {\n      // Validate the password on some rules\n      // This is useful for cases where a password needs to be created or updated.\n      errors.push({\n        error: \"INVALID_PASSWORD\",\n        reason: \"Password must be at least 6 characters long.\",\n        i18nKeyReason: \"accountsUI.error.passwordMustBeAtLeast6CharactersLong\"\n      });\n    }\n\n    if (errors.length) {\n      return errors;\n    }\n\n    // Otherwise the password is valid\n    return true;\n  }\n};\n\n// Export object globally\nexport const LoginFormValidation = validationMethods;\n\n// Register validation methods as meteor methods\nMeteor.methods({\n  \"accounts/validation/username\": validationMethods.username,\n  \"accounts/validation/email\": validationMethods.email,\n  \"accounts/validation/password\": validationMethods.password\n});\n","import _ from \"lodash\";\nimport { Products } from \"/lib/collections\";\nimport { ReactionProduct } from \"/lib/api\";\nimport { applyProductRevision } from \"/lib/api/products\";\n\n/**\n * @file Catalog methods\n *\n * @namespace Catalog\n */\n\nexport default {\n  /**\n   * @method setProduct\n   * @memberof Catalog\n   * @summary method to set default/parameterized product variant\n   * @param {String} currentProductId - set current productId\n   * @param {String} currentVariantId - set current variantId\n   * @return {undefined} return nothing, sets in session\n   */\n  setProduct(currentProductId, currentVariantId) {\n    let productId = currentProductId;\n    const variantId = currentVariantId;\n    if (!productId.match(/^[A-Za-z0-9]{17}$/)) {\n      const product = Products.findOne({\n        handle: productId.toLowerCase()\n      });\n      if (product) {\n        productId = product._id;\n      }\n    }\n    ReactionProduct.setCurrentVariant(variantId);\n  },\n\n  /**\n   * @method getProductPriceRange\n   * @memberof Catalog\n   * @summary get price range of a product\n   * if only one price available, return it\n   * otherwise return a string range\n   * @todo move all this methods this to export function after 1.3\n   * @param {String} [productId] - current product _id\n   * @return {Object} range, min, max\n   */\n  getProductPriceRange(productId) {\n    const product = applyProductRevision(Products.findOne(productId));\n    if (!product) {\n      return {\n        range: \"0\",\n        min: 0,\n        max: 0\n      };\n    }\n\n    const variants = this.getTopVariants(product._id);\n    // if we have variants we have a price range.\n    // this processing will default on the server\n    const visibileVariant = variants.filter((variant) => variant.isVisible === true);\n\n    if (visibileVariant.length > 0) {\n      const variantPrices = [];\n      variants.forEach((variant) => {\n        if (variant.isVisible === true) {\n          const range = this.getVariantPriceRange(variant._id);\n          if (typeof range === \"string\") {\n            const firstPrice = parseFloat(range.substr(0, range.indexOf(\" \")));\n            const lastPrice = parseFloat(range.substr(range.lastIndexOf(\" \") + 1));\n            variantPrices.push(firstPrice, lastPrice);\n          } else {\n            variantPrices.push(range);\n          }\n        } else {\n          variantPrices.push(0, 0);\n        }\n      });\n      const priceMin = _.min(variantPrices);\n      const priceMax = _.max(variantPrices);\n      let priceRange = `${priceMin} - ${priceMax}`;\n      // if we don't have a range\n      if (priceMin === priceMax) {\n        priceRange = priceMin.toString();\n      }\n      return {\n        range: priceRange,\n        min: priceMin,\n        max: priceMax\n      };\n    }\n\n    if (!product.price) {\n      return {\n        range: \"0\",\n        min: 0,\n        max: 0\n      };\n    }\n\n    // if we have no variants subscribed to (client)\n    // we'll get the price object previously from the product\n    return product.price;\n  },\n\n  /**\n   * @method getVariantPriceRange\n   * @memberof Catalog\n   * @summary get price range of a variant if it has child options.\n   * if no child options, return main price value\n   * @todo remove string return and replace with object\n   * @param {String} [variantId] - current variant _Id\n   * @return {String} formatted price or price range\n   */\n  getVariantPriceRange(variantId) {\n    const children = this.getVariants(variantId);\n    const visibleChildren = children.filter((child) => child.isVisible);\n\n    switch (visibleChildren.length) {\n      case 0: {\n        const topVariant = applyProductRevision(Products.findOne(variantId));\n        // topVariant could be undefined when we removing last top variant\n        return topVariant && topVariant.price;\n      }\n      case 1: {\n        return visibleChildren[0].price;\n      }\n      default: {\n        let priceMin = Number.POSITIVE_INFINITY;\n        let priceMax = Number.NEGATIVE_INFINITY;\n\n        children.forEach((child) => {\n          if (child.isVisible === true) {\n            if (child.price < priceMin) {\n              priceMin = child.price;\n            }\n            if (child.price > priceMax) {\n              priceMax = child.price;\n            }\n          }\n        });\n\n        if (priceMin === priceMax) {\n          // TODO check impact on i18n/formatPrice from moving return to string\n          return priceMin.toString();\n        }\n        return `${priceMin} - ${priceMax}`;\n      }\n    }\n  },\n\n  /**\n   * @method getVariantQuantity\n   * @memberof Catalog\n   * @description calculate a sum of descendants `inventoryQuantity`\n   * @param {Object} variant - top-level variant\n   * @return {Number} summary of options quantity\n   */\n  getVariantQuantity(variant) {\n    const options = this.getVariants(variant._id);\n    if (options && options.length) {\n      return options.reduce((sum, option) =>\n        sum + parseInt(option.inventoryQuantity, 10) || 0, 0);\n    }\n    return variant.inventoryQuantity || 0;\n  },\n\n  /**\n   * @method getPublishedOrRevision\n   * @memberof Catalog\n   * @description return top product revision if available\n   * @param {Object} product product or variant document\n   * @return {Object} product document\n   */\n  getPublishedOrRevision(product) {\n    return applyProductRevision(product);\n  },\n\n  /**\n  * @method getProduct\n  * @method\n  * @memberof ReactionProduct\n  * @summary Get product object. Could be useful for products and for top level variants\n  * @param {String} [id] - product _id\n  * @return {Object} Product data\n  */\n  getProduct(id) {\n    return Products.findOne(id);\n  },\n\n  /**\n   * @method getVariants\n   * @memberof Catalog\n   * @description Get all parent variants\n   * @summary could be useful for products and for top level variants\n   * @param {String} [id] - product _id\n   * @param {String} [type] - type of variant\n   * @return {Array} Parent variants or empty array\n   */\n  getVariants(id, type) {\n    return Products.find({\n      ancestors: { $in: [id] },\n      type: type || \"variant\"\n    }).map(this.getPublishedOrRevision);\n  },\n\n  /**\n   * @method getVariantParent\n   * @memberof Catalog\n   * @description Get direct parent variant\n   * @summary could be useful for lower level variants to get direct parents\n   * @param {Object} [variant] - product / variant object\n   * @return {Array} Parent variant or empty\n   */\n  getVariantParent(variant) {\n    const parent = Products.findOne({\n      _id: { $in: variant.ancestors },\n      type: \"variant\"\n    });\n    return this.getPublishedOrRevision(parent);\n  },\n\n  /**\n   * @method getSiblings\n   * @memberof Catalog\n   * @description Get all sibling variants - variants with the same ancestor tree\n   * @summary could be useful for child variants relationships with top-level variants\n   * @param {Object} [variant] - product / variant object\n   * @param {String} [type] - type of variant\n   * @param {Boolean} [includeSelf] - include current variant in results\n   * @return {Array} Sibling variants or empty array\n   */\n  getSiblings(variant, type) {\n    return Products.find({\n      ancestors: variant.ancestors,\n      type: type || \"variant\"\n    }).map(this.getPublishedOrRevision);\n  },\n\n  /**\n   * @method getTopVariants\n   * @memberof Catalog\n   * @description Get only product top level variants\n   * @param {String} [id] - product _id\n   * @return {Array} Product top level variants or empty array\n   */\n  getTopVariants(id) {\n    return Products.find({\n      ancestors: [id],\n      type: \"variant\"\n    }).map(this.getPublishedOrRevision);\n  }\n};\n","import { isEqual } from \"lodash\";\nimport { Meteor } from \"meteor/meteor\";\nimport { Roles } from \"meteor/alanning:roles\";\nimport { Accounts, Shops, SellerShops } from \"/lib/collections\";\n\nlet Core;\n\n// TODO: Decide how we want to approach this problem - duplicate content on both client\n// and server, or detecting client/server and DRYing up the code.\nif (Meteor.isServer) {\n  Core = require(\"/server/api\");\n} else {\n  Core = require(\"/client/api\");\n}\n\n/**\n * @method isPackageEnabled\n * @memberof Core\n * @summary Check if package is enabled\n * @example Reaction.isPackageEnabled()\n * @param  {String}  name - Package name\n * @return {Boolean}      True if the package is enabled\n */\nfunction isPackageEnabled(name) {\n  const settings = this.getPackageSettings(name);\n\n  return !!settings.enabled;\n}\n\n/**\n * @method getSeller\n * @memberof Core\n * @example Reaction.getSeller(shopId)\n * @param  {String} shopId ID of shop\n * @return {Object}        Account object of seller\n */\nfunction getSeller(shopId) {\n  let sellerShopId;\n\n  if (!shopId) {\n    const currentUser = Meteor.user();\n    if (currentUser) {\n      [sellerShopId] = Roles.getGroupsForUser(currentUser.id, \"admin\");\n    }\n  } else {\n    sellerShopId = shopId;\n  }\n\n  return Accounts.findOne({ shopId: sellerShopId });\n}\n\n/**\n * @method getSellerShopId\n * @memberof Core\n * @summary Get a seller's shopId or default to parent shopId\n * @example Reaction.getSellerShopId(this.userId, true)\n * @param {String|Object} user - An optional user hash or userId to find a shop for\n * @param {Boolean} [noFallback=false] - Optional.If set to true doesn't fallback to owner shopId\n * when user doesn't have a shop.\n * @returns {String|Boolean} - The shopId belonging to userId, or loggedIn seller, or the parent shopId\n */\nfunction getSellerShopId(user, noFallback = false) {\n  let seller = user;\n\n  if (Meteor.isClient && !seller) {\n    seller = Meteor.user();\n  }\n\n  if (seller) {\n    const group = Roles.getGroupsForUser(seller, \"admin\")[0];\n    if (group) {\n      return group;\n    }\n  }\n\n\n  if (noFallback) {\n    return false;\n  }\n\n  return Core.Reaction.getShopId();\n}\n\n/**\n * @method getSellerShop\n * @memberof Core\n * @summary Get a seller's shop or default to parent shop\n * @param {String|Object} user - An optional user hash or userId to find a shop for\n * @param {Boolean} [noFallback=false] - Optional.If set to true doesn't fallback to owner shop\n * when user doesn't have a shop.\n * @returns {String|Boolean} - The shop hash belonging to userId, or loggedIn seller, or the parent shop\n */\nfunction getSellerShop(user, noFallback = false) {\n  const _id = getSellerShopId(user, noFallback);\n\n  if (!_id) {\n    return false;\n  }\n\n  if (Meteor.isClient && _id !== Core.Reaction.getShopId()) {\n    return SellerShops.findOne({ _id });\n  }\n\n  return Shops.findOne({ _id });\n}\n\n/**\n  * getShopsForUser -\n  * @summary gets shopIds of shops where user has provided permissions\n  * @param {Array} roles - roles to check if user has\n  * @param {Object} userId - userId to check permissions for (defaults to current user)\n  * @return {Array} - shopIds user has provided permissions for\n  */\nfunction getShopsForUser(roles, userId = Meteor.userId()) {\n  // Get full user object, and get shopIds of all shops they are attached to\n  const user = Meteor.user(userId);\n  if (!user || !user.roles) {\n    return [];\n  }\n  const shopIds = Object.keys(user.roles);\n  // Remove \"__global_roles__\" from the list of shopIds, as this function will always return true for\n  // marketplace admins if that \"id\" is left in the check\n  const filteredShopIds = shopIds.filter((shopId) => shopId !== \"__global_roles__\");\n\n  // Reduce shopIds to shopsWithPermission, using the roles passed in to this function\n  const shopIdsWithRoles = filteredShopIds.reduce((shopsWithPermission, shopId) => {\n    // Get list of roles user has for this shop\n    const rolesUserHas = user.roles[shopId];\n\n    // Find first role that is included in the passed in roles array, otherwise hasRole is undefined\n    const hasRole = rolesUserHas.find((roleUserHas) => roles.includes(roleUserHas));\n\n    // if we found the role, then the user has permission for this shop. Add shopId to shopsWithPermission array\n    if (hasRole) {\n      shopsWithPermission.push(shopId);\n    }\n    return shopsWithPermission;\n  }, []);\n\n  return shopIdsWithRoles;\n}\n\n/**\n  * hasPermissionForAll -\n  * @summary return if the user has permissions for all the shops\n  * @param {Array} roles - roles to check if user has\n  * @param {String} userId - userId to check permissions for (defaults to current user)\n  * @param {Array} shopsOfUser - shopIds to be checked\n  * @return {Boolean} - true if the user has permissions for all the shops\n  */\nfunction hasPermissionForAll(roles, userId = Meteor.userId(), shopsOfUser) {\n  return !isEqual(getShopsForUser([\"admin\"], userId), shopsOfUser);\n}\n\nconst Reaction = Object.assign(Core.Reaction, {\n  isPackageEnabled,\n  getSeller,\n  getSellerShopId,\n  getSellerShop,\n  getShopsForUser,\n  hasPermissionForAll\n});\n\nexport { Reaction };\n","import url from \"url\";\nimport { parse, isValidNumber, getPhoneCode } from \"libphonenumber-js\";\nimport { Meteor } from \"meteor/meteor\";\nimport { check, Match } from \"meteor/check\";\nimport { Router } from \"/imports/plugins/core/router/lib\";\nimport { Shops } from \"/lib/collections\";\n\n// Array of ISO Language codes for all languages that use latin based char sets\n// list is based on this matrix http://w3c.github.io/typography/gap-analysis/language-matrix.html\n// list of lang codes https://en.wikipedia.org/wiki/List_of_ISO_639-1_codes\nexport const latinLangs = [\"az\", \"da\", \"de\", \"en\", \"es\", \"ff\", \"fr\", \"ha\", \"hr\", \"hu\", \"ig\", \"is\", \"it\", \"jv\", \"ku\", \"ms\", \"nl\", \"no\", \"om\", \"pl\", \"pt\", \"ro\", \"sv\", \"sw\", \"tl\", \"tr\", \"uz\", \"vi\", \"yo\"]; // eslint-disable-line max-len\n\n// dynamic import of slugiy/transliteration.slugify\nlet slugify;\nasync function lazyLoadSlugify() {\n  let mod;\n  // getting the shops base language\n  let lang;\n  if (Meteor.isServer) {\n    lang = getPrimaryShopLang();\n  } else {\n    lang = getShopLang();\n  }\n\n  // if slugify has been loaded but the language has changed\n  // to be a non latin based language then load transliteration\n  if (slugify && slugify.name === \"replace\" && latinLangs.indexOf(lang) === -1) {\n    mod = await import(\"transliteration\");\n  } else if (slugify) {\n    // if slugify/transliteration is loaded and no lang change\n    return;\n  } else if (latinLangs.indexOf(lang) >= 0) {\n    // if the shops language use latin based chars load slugify else load transliterations's slugify\n    mod = await import(\"slugify\");\n  } else {\n    mod = await import(\"transliteration\");\n  }\n  // slugify is exported to modules.default while transliteration is exported to modules.slugify\n  slugify = mod.default || mod.slugify;\n}\n\n\nlet Media;\nif (Meteor.isClient) {\n  ({ Media } = require(\"/imports/plugins/core/files/client\"));\n} else {\n  ({ Media } = require(\"/imports/plugins/core/files/server\"));\n}\n\n/**\n * @file Various helper methods\n *\n * @namespace Helpers\n */\n\nlet Core;\nif (Meteor.isClient) {\n  Core = require(\"/client/api\");\n} else {\n  Core = require(\"/server/api\");\n}\n\n/**\n * @name getShopId\n * @method\n * @memberof Helpers\n * @return {String} returns current shopId\n */\nexport function getShopId() {\n  return Core.Reaction.getShopId();\n}\n\n/**\n * @name getPrimaryShopId\n * @method\n * @memberof Helpers\n * @return {String} returns primary shopId\n */\nexport function getPrimaryShopId() {\n  return Core.Reaction.getPrimaryShopId();\n}\n\n/**\n * getShopSettings\n * @return {Object} returns current shop settings\n */\nexport function getShopSettings() {\n  return Core.Reaction.getShopSettings();\n}\n\n/**\n * @name getShopName\n * @method\n * @memberof Helpers\n * @return {String} returns current shop name\n */\nexport function getShopName() {\n  const shopId = getShopId();\n  let shop;\n  if (shopId) {\n    shop = Shops.findOne({\n      _id: shopId\n    });\n    return (shop && shop.name) || \"\";\n  }\n\n  const domain = url.parse(Meteor.absoluteUrl()).hostname;\n\n  shop = Shops.findOne({ domains: { $in: [domain] } });\n\n  return shop ? shop.name : \"\";\n}\n\n/**\n * @name getShopLang\n * @method\n * @memberof Helpers\n * @return {String} returns current shop language\n */\nexport function getShopLang() {\n  const shopId = getShopId();\n  const shop = Shops.findOne({ _id: shopId });\n  return shop ? shop.language : \"\";\n}\n\n/**\n * @name getPrimaryShopLang\n * @method\n * @memberof Helpers\n * @return {String} returns primary shop language\n */\nexport function getPrimaryShopLang() {\n  const shopId = getPrimaryShopId();\n  const shop = Shops.findOne({ _id: shopId });\n  return shop ? shop.language : \"\";\n}\n\n\n/**\n * @name getShopPrefix\n * @method\n * @memberof Helpers\n * @param {String} leading - Default \"/\", prefix, the prefix with a leading shash\n * @return {String} returns shop url prefix\n */\nexport function getShopPrefix(leading = \"/\") {\n  const shopId = getShopId();\n\n  if (shopId) {\n    const shop = Shops.findOne({\n      _id: shopId\n    }, {\n      fields: {\n        _id: 1,\n        name: 1,\n        shopType: 1\n      }\n    });\n\n    const settings = Core.Reaction.getMarketplaceSettings();\n    const slug = leading + getSlug(shop.slug || getShopName().toLowerCase());\n\n    if (shop.shopType === \"primary\") {\n      // If naked routes is turned off, use the shop slug for our primary shop routes\n      if (settings && settings.marketplaceNakedRoutes === false) {\n        return slug;\n      }\n\n      return \"\";\n    }\n\n    // If this is not the primary shop, use the shop slug in routes for this shop\n    // TODO: \"/shop\" should be configurable in marketplace settings\n    return `/shop${slug}`;\n  }\n\n  return \"\";\n}\n\n/**\n * @name getAbsoluteUrl\n * @method\n * @memberof Helpers\n * @param {String} path - path to append to absolute Url, path should be prefixed with / if necessary\n * @return {String} returns absolute url (shop prefix + path)\n */\nexport function getAbsoluteUrl(path) {\n  const prefix = getShopPrefix(\"\");\n  if (prefix) {\n    const absUrl = Meteor.absoluteUrl(`${prefix}/${path}`);\n    return absUrl;\n  }\n  const absUrl = Meteor.absoluteUrl(`${path}`);\n  return absUrl;\n}\n\n/**\n * @name getCurrentTag\n * @method\n * @memberof Helpers\n * @return {String} returns current tag\n */\nexport function getCurrentTag() {\n  if (Router.getRouteName() === \"tag\") {\n    return Router.current().params.slug;\n  }\n  return null;\n}\n\n/**\n * @name getSlug\n * @method\n * @memberof Helpers\n * @summary return a slugified string using \"slugify\" from transliteration\n * https://www.npmjs.com/package/transliteration\n * @param  {String} slugString - string to slugify\n * @return {String} slugified string\n */\nexport function getSlug(slugString) {\n  let slug;\n  Promise.await(lazyLoadSlugify());\n  if (slugString) {\n    slug = slugify(slugString.toLowerCase());\n  } else {\n    slug = \"\";\n  }\n  return slug;\n}\n\n/**\n * @name formatPhoneNumber\n * @method\n * @memberof Helpers\n * @summary prepends country code to phone no. if required\n * @param  {String} phone the original phone no.\n * @param  {String} countryCode the country's code to which the phone no. belongs to\n * @return {String} the phone no. with country extension.\n */\nexport function formatPhoneNumber(phone, countryCode) {\n  try {\n    // phone no. already has the country code attached\n    if (isValidNumber(phone)) {\n      return phone;\n    }\n    const phoneNumber = parse(phone, countryCode).phone;\n    const countryExtension = getPhoneCode(countryCode);\n    if (phoneNumber && countryExtension) {\n      // try attaching the country code to phone number\n      return `${countryExtension}${phoneNumber}`;\n    }\n    throw new Meteor.Error(\"invalid-parameter\", `Incorrect format for phone number ${phone} with country ${countryCode}`);\n  } catch (error) {\n    throw new Meteor.Error(\"invalid-parameter\", error);\n  }\n}\n\n/**\n * @name toCamelCase\n * @method\n * @memberof Helpers\n * @summary helper for i18n - special toCamelCase for converting a string to camelCase for use with i18n keys\n * @param {String} needscamels String to be camel cased.\n * @return {String} camelCased string\n */\nexport function toCamelCase(needscamels) {\n  let s;\n  s = needscamels.replace(/([^a-zA-Z0-9_\\- ])|^[_0-9]+/g, \"\").trim().toLowerCase();\n  s = s.replace(/([ -]+)([a-zA-Z0-9])/g, (a, b, c) => c.toUpperCase());\n  s = s.replace(/([0-9]+)([a-zA-Z])/g, (a, b, c) => b + c.toUpperCase());\n  return s;\n}\n\n/**\n * @name translateRegistry\n * @method\n * @memberof Helpers\n * @summary adds i18n strings to registry object\n * @param {Object} registry registry object\n * @param {Object} [app] complete package object\n * @return {Object} with updated registry\n */\nexport function translateRegistry(registry, app) {\n  let registryLabel = \"\";\n  let i18nKey = \"\";\n  // first we check the default place for a label\n  if (registry.label) {\n    registryLabel = toCamelCase(registry.label);\n    i18nKey = `admin.${registry.provides}.${registryLabel}`;\n    // and if we don\"t find it, we are trying to look at first\n    // registry entry\n  } else if (app && app.registry && app.registry.length &&\n    app.registry[0].label) {\n    registryLabel = toCamelCase(app.registry[0].label);\n    i18nKey = `admin.${app.registry[0].provides}.${registryLabel}`;\n  }\n  registry.i18nKeyLabel = `${i18nKey}Label`;\n  registry.i18nKeyDescription = `${i18nKey}Description`;\n  registry.i18nKeyPlaceholder = `${i18nKey}Placeholder`;\n  registry.i18nKeyTooltip = `${i18nKey}Tooltip`;\n  registry.i18nKeyTitle = `${i18nKey}Title`;\n  // return registry object with added i18n keys\n  return registry;\n}\n\n/**\n * @name isObject\n * @method\n * @memberof Helpers\n * @summary Simple is object check.\n * @param {Object} item item to check if is an object\n * @returns {boolean} return true if object\n */\nexport function isObject(item) {\n  return (item && typeof item === \"object\" && !Array.isArray(item) && item !== null);\n}\n\n/**\n * @name mergeDeep\n * @method\n * @memberof Helpers\n * @summary Helper for Deep merge two objects.\n * @param {Object} target deep merge into this object\n * @param {Object} source merge this object\n * @returns {Object} return deep merged object\n */\nexport function mergeDeep(target, source) {\n  if (isObject(target) && isObject(source)) {\n    Object.keys(source).forEach((key) => {\n      if (isObject(source[key])) {\n        if (!target[key]) Object.assign(target, { [key]: {} });\n        mergeDeep(target[key], source[key]);\n      } else {\n        Object.assign(target, { [key]: source[key] });\n      }\n    });\n  }\n  return target;\n}\n\n/**\n * @name convertWeight\n * @method\n * @memberOf Helpers\n * @summary Convert weight from/to different Units of Measure\n * @param {String} from The UOM to convert from\n * @param {String} to The UOM to convert to\n * @param {Number} weight The value to convert\n * @returns {Number} The converted value\n */\nexport function convertWeight(from, to, weight) {\n  check(from, String); // we need to check for specific values\n  check(to, String);\n  check(weight, Number);\n\n  if (from === to) {\n    return weight;\n  }\n  // grams\n  if (from === \"lb\" && to === \"g\") {\n    const convertedWeight = weight * 453.592;\n    return convertedWeight;\n  }\n\n  if (from === \"kg\" && to === \"g\") {\n    const convertedWeight = weight * 1000;\n    return convertedWeight;\n  }\n\n  if (from === \"oz\" && to === \"g\") {\n    const convertedWeight = weight * 28.3495;\n    return convertedWeight;\n  }\n\n  // lbs\n  if (from === \"kg\" && to === \"lb\") {\n    const convertedWeight = weight * 2.20462;\n    return convertedWeight;\n  }\n\n  if (from === \"g\" && to === \"lb\") {\n    const convertedWeight = weight * 0.00220462;\n    return convertedWeight;\n  }\n\n  if (from === \"oz\" && to === \"lb\") {\n    const convertedWeight = weight * 0.0625;\n    return convertedWeight;\n  }\n\n  // oz\n  if (from === \"lb\" && to === \"oz\") {\n    const convertedWeight = weight * 16;\n    return convertedWeight;\n  }\n\n  if (from === \"g\" && to === \"oz\") {\n    const convertedWeight = weight * 0.035274;\n    return convertedWeight;\n  }\n\n  if (from === \"kg\" && to === \"oz\") {\n    const convertedWeight = weight * 35.274;\n    return convertedWeight;\n  }\n\n  // kilograms\n  if (from === \"g\" && to === \"kg\") {\n    const convertedWeight = weight * 0.001;\n    return convertedWeight;\n  }\n\n  if (from === \"oz\" && to === \"kg\") {\n    const convertedWeight = weight * 0.0283495;\n    return convertedWeight;\n  }\n\n  if (from === \"lb\" && to === \"kg\") {\n    const convertedWeight = weight * 0.453592;\n    return convertedWeight;\n  }\n  // if we made it here, something has gone wrong\n  throw new Meteor.Error(\"invalid-parameter\", \"Invalid from or to value specified\");\n}\n\n/**\n * @name getPrimaryMediaForItem\n * @summary Gets the FileRecord for the primary media item associated with the variant or product\n *   for the given item\n * @param {Object} item Must have `productId` and/or `variantId` set to get back a result.\n * @return {FileRecord|null}\n */\nexport function getPrimaryMediaForItem({ productId, variantId } = {}) {\n  let result;\n\n  if (variantId) {\n    result = Media.findOneLocal({\n      \"metadata.variantId\": variantId\n    }, { sort: { \"metadata.priority\": 1, \"uploadedAt\": 1 } });\n  }\n\n  if (!result && productId) {\n    result = Media.findOneLocal({\n      \"metadata.productId\": productId\n    }, { sort: { \"metadata.priority\": 1, \"uploadedAt\": 1 } });\n  }\n\n  return result || null;\n}\n\n/**\n * @name getPrimaryMediaForOrderItem\n * @summary Gets the FileRecord for the primary media item associated with the variant or product\n *   for the given item\n * @param {Object} item Must have `productId` and/or `variants._id` set to get back a result.\n * @return {FileRecord|null}\n */\nexport function getPrimaryMediaForOrderItem({ productId, variants } = {}) {\n  const { _id: variantId } = variants || {}; // Order item format\n  return getPrimaryMediaForItem({ productId, variantId });\n}\n\n/*\n * @name luhnValid\n * @method\n * @memberOf Helpers\n * @summary Checks if a number passes Luhn's test\n * @param {String} cardNumber The card number to check\n * @returns {Boolean} The result of the test\n */\nfunction luhnValid(cardNumber) {\n  return [...cardNumber].reverse().reduce((sum, c, i) => {\n    let d = parseInt(c, 10);\n    if (i % 2 !== 0) { d *= 2; }\n    if (d > 9) { d -= 9; }\n    return sum + d;\n  }, 0) % 10 === 0;\n}\n\n// Regex to do card validations\nexport const ValidCardNumber = Match.Where((x) => /^[0-9]{12,19}$/.test(x) && luhnValid(x));\n\nexport const ValidExpireMonth = Match.Where((x) => /^[0-9]{1,2}$/.test(x));\n\nexport const ValidExpireYear = Match.Where((x) => /^[0-9]{4}$/.test(x));\n\nexport const ValidCVV = Match.Where((x) => /^[0-9]{3,4}$/.test(x));\n\n// Email regex\nexport const ValidEmail = (x) => /(?:[a-z0-9!#$%&'*+/=?^_`{|}~-]+(?:\\.[a-z0-9!#$%&'*+/=?^_`{|}~-]+)*|\"(?:[\\x01-\\x08\\x0b\\x0c\\x0e-\\x1f\\x21\\x23-\\x5b\\x5d-\\x7f]|\\\\[\\x01-\\x09\\x0b\\x0c\\x0e-\\x7f])*\")@(?:(?:[a-z0-9](?:[a-z0-9-]*[a-z0-9])?\\.)+[a-z0-9](?:[a-z0-9-]*[a-z0-9])?|\\[(?:(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)\\.){3}(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?|[a-z0-9-]*[a-z0-9]:(?:[\\x01-\\x08\\x0b\\x0c\\x0e-\\x1f\\x21-\\x5a\\x53-\\x7f]|\\\\[\\x01-\\x09\\x0b\\x0c\\x0e-\\x7f])+)\\])/.test(x); // eslint-disable-line max-len\n","export * from \"./account-validation\";\nexport { default as Catalog } from \"./catalog\";\nexport { default as ReactionProduct } from \"./products\";\nexport { PropTypes } from \"./prop-types\";\nexport * from \"./core\";\nexport * from \"./helpers\";\n","import { Match } from \"meteor/check\";\n\n/**\n * @file **Meteor Match** - Extending {@link http://docs.meteor.com/api/check.html Meteor Match} argument checking\n * @see https://github.com/meteor/meteor/tree/master/packages/check\n * @extends Meteor/Check\n * @namespace Match\n */\n\n/**\n * @name OptionalOrNull\n * @method\n * @memberof Match\n * @summary Return whether an argument is optional or null\n * @example check(options, Match.OptionalOrNull(Object))\n * @param {String} pattern - match pattern\n * @return {Boolean} matches - void, null, or pattern\n */\nMatch.OptionalOrNull = function (pattern) {\n  return Match.OneOf(undefined, null, pattern);\n};\n\n/**\n * @name OrderHookOption\n * @method\n * @memberof Match\n * @example check(options, Match.OrderHookOptions())\n * @return {Boolean} matches - void, null, or pattern\n */\nMatch.OrderHookOptions = function () {\n  return Match.OneOf(Object);\n};\n","import i18next from \"i18next\";\nimport orderBy from \"lodash/orderBy\";\nimport _ from \"lodash\";\nimport { Meteor } from \"meteor/meteor\";\nimport { ReactiveDict } from \"meteor/reactive-dict\";\nimport { ReactiveVar } from \"meteor/reactive-var\";\nimport { Router } from \"/imports/plugins/core/router/lib\";\nimport { getCurrentTag, getShopName } from \"/lib/api\";\nimport { Products, Revisions } from \"/lib/collections\";\nimport Catalog from \"./catalog\";\nimport { MetaData } from \"/lib/api/router/metadata\";\n\n/**\n * @file ReactionProduct is only intended to be used on the client, but it's placed\n * in common code because it is imported by the Products schema.\n * ReactionProduct is a\n * {@link https://github.com/meteor/meteor/blob/master/packages/reactive-dict/README.md| ReactiveDict},\n * a general-purpose reactive datatype to use with\n * {@link https://github.com/meteor/meteor/tree/master/packages/tracker|Meteor Tracker}.\n * ReactionProduct allows the current product to be reactive, without Session.\n * @namespace ReactionProduct\n */\n\n/**\n * @name ReactionProduct\n * @method\n * @memberof ReactionProduct\n * @summary Reactive current product dependency, ensuring reactive products, without session\n * ReactionProduct is a `ReactiveDict`, a general-purpose reactive datatype to use with Meteor Tracker.\n * @see {@link https://github.com/meteor/meteor/blob/master/packages/reactive-dict/README.md|Meteor ReactiveDict}\n * @see {@link https://github.com/meteor/meteor/tree/master/packages/tracker|Meteor Tracker}\n * @todo this is a messy class implementation, normalize it.\n */\nconst ReactionProduct = new ReactiveDict(\"currentProduct\");\n\n/**\n * @name applyProductRevision\n * @method\n * @memberof ReactionProduct\n * @summary Apply revision to product\n * @example applyProductRevision(product)\n * @param  {Object} product product\n * @return {Object|null} product or null, if no product found\n */\nexport function applyProductRevision(product) {\n  if (product) {\n    if (product.__revisions && product.__revisions.length) {\n      const cleanProduct = Object.assign({}, product);\n      delete cleanProduct.__revisions;\n      let revisedProduct;\n      // check for product revisions and set that as the current product\n      for (const revision of product.__revisions) {\n        if (!revision.parentDocument) {\n          revisedProduct = product.__revisions[0].documentData;\n        }\n      }\n\n      // if there are no revision to product (image and/or tag only) just set the original product as the product\n      if (!revisedProduct) {\n        revisedProduct = cleanProduct;\n      }\n\n      return Object.assign(\n        {},\n        revisedProduct,\n        {\n          __published: cleanProduct,\n          __draft: product.__revisions[0]\n        }\n      );\n    }\n    return product;\n  }\n\n  return null;\n}\n\n/**\n * @name variantIsSelected\n * @method\n * @memberof ReactionProduct\n * @param  {String} variantId ID of variant to check\n * @return {Boolean}          True if variant is selected\n */\nexport function variantIsSelected(variantId) {\n  const current = Object.assign({}, ReactionProduct.selectedVariant());\n  if (current.ancestors && (variantId === current._id || current.ancestors.indexOf(variantId) >= 0)) {\n    return true;\n  }\n  return false;\n}\n\n/**\n * @name sortProducts\n * @method\n * @memberof ReactionProduct\n * @summary Sort products by tag, creation date by tag and creation date\n * @param  {Array} products Array of products\n * @param  {String} tag     Tag\n * @return {Array}         Array of products\n */\nReactionProduct.sortProducts = (products, tag) => {\n  let sorted = [];\n\n  sorted = orderBy(\n    products,\n    // Sort by postion for tag\n    (product) => product.positions && product.positions[tag] && product.positions[tag].position,\n    // Then by creation date for tag\n    (product) => product.positions && product.positions[tag] && product.positions[tag].createdAt,\n    // Finally sort by creation date\n    \"createdAt\"\n  );\n\n  return sorted;\n};\n\n/**\n * @name setCurrentVariant\n * @method\n * @memberof ReactionProduct\n * @param {String} variantId - set current variantId\n * @return {undefined}\n */\nReactionProduct.setCurrentVariant = (variantId) => {\n  if (variantId === null) {\n    ReactionProduct.set(\"variantId\", null);\n    ReactionProduct.set(\"variantId\", ReactionProduct.selectedVariantId());\n  }\n  if (!variantId) {\n    return;\n  }\n  const currentId = ReactionProduct.selectedVariantId();\n  if (currentId === variantId) {\n    return;\n  }\n  ReactionProduct.set(\"variantId\", variantId);\n};\n\n/**\n * @name setProduct\n * @todo this will be deprecated in favor of template.instance data.\n * @method\n * @memberof ReactionProduct\n * @summary method to set default/parameterized product variant\n * @param {String} currentProductId - set current productId\n * @param {String} currentVariantId - set current variantId\n * @return {Object} product object\n */\nReactionProduct.setProduct = (currentProductId, currentVariantId) => {\n  let productId = currentProductId || Router.getParam(\"handle\");\n  let variantId = currentVariantId || Router.getParam(\"variantId\");\n\n  // Find the current product\n  const product = Products.findOne({\n    $or: [\n      { handle: productId.toLowerCase() }, // Try the handle (slug) lowercased\n      { handle: productId }, // Otherwise try the handle (slug) untouched\n      { _id: productId }, // try the product id\n      { changedHandleWas: productId } // Last attempt: the permalink may have changed.\n    ]\n  });\n\n  productId = product && product._id;\n\n  if (product) {\n    if (Router.getParam(\"handle\") !== product.handle && product.changedHandleWas && product.changedHandleWas !== product.handle) {\n      const newUrl = Router.pathFor(\"product\", {\n        hash: {\n          handle: product.handle\n        }\n      });\n      Router.go(newUrl);\n    }\n\n    // Check if selected variant id really belongs to the product.\n    // This has been working previously rather accidentally, because variantIsSelected(variantId) below returned always false,\n    // because the Product subscription ensured, that the correct Product is in Mini-Mongo. This is not guaranteed, though.\n    // If Products collection would have other products, it would fail.\n    let isVariantValidChild = true;\n    const variants = Products.find({\n      ancestors: { $in: [productId] }\n    }).map((variant) => variant._id);\n    if (variantId && !variants.includes(variantId)) {\n      isVariantValidChild = false;\n    }\n\n    // set the default variant\n    // as the default.\n    if (!isVariantValidChild || !variantId || !variantIsSelected(variantId)) {\n      const topVariants = ReactionProduct.getTopVariants(productId);\n      variantId = (Array.isArray(topVariants) && topVariants.length && topVariants[0]._id) || null;\n    }\n    // set in our reactive dictionary\n    ReactionProduct.set(\"productId\", productId);\n    ReactionProduct.set(\"variantId\", variantId);\n  }\n\n  // Update the meta data when a product is selected\n  MetaData.init(Router.current());\n\n  return applyProductRevision(product);\n};\n\n/**\n * @name selectedProductId\n * @method\n * @memberof ReactionProduct\n * @summary get the currently active/requested product\n * @return {String} currently selected product id\n */\nReactionProduct.selectedProductId = () => ReactionProduct.get(\"productId\");\n\n/**\n * @name selectedVariantId\n * @method\n * @memberof ReactionProduct\n * @summary get the currently active/requested variant\n * @return {String} currently selected variant id\n */\nReactionProduct.selectedVariantId = () => {\n  let id = ReactionProduct.get(\"variantId\");\n  if (id !== null) {\n    return id;\n  }\n  const variants = ReactionProduct.getVariants();\n\n  if (!(variants.length > 0)) {\n    return [];\n  }\n\n  id = variants[0]._id;\n  // ReactionProduct.set(\"variantId\", id);\n  return id;\n};\n\n/**\n * @name selectedVariant\n * @method\n * @memberof ReactionProduct\n * @summary get the currently active/requested variant object\n * @return {Object} currently selected variant object\n */\nReactionProduct.selectedVariant = function () {\n  const id = ReactionProduct.selectedVariantId();\n  if (typeof id === \"string\") {\n    return applyProductRevision(Products.findOne(id));\n  }\n  return [];\n};\n\n/**\n * @name selectedTopVariant\n * @method\n * @memberof ReactionProduct\n * @summary get the currently active TOP variant object\n * @return {Object} currently selected TOP variant object\n */\nReactionProduct.selectedTopVariant = function () {\n  const topVariants = ReactionProduct.getTopVariants();\n  const topVariant = topVariants.find((variant) => variantIsSelected(variant._id));\n\n  return topVariant;\n};\n\n/**\n * @name selectedProduct\n * @method\n * @memberof ReactionProduct\n * @summary get the currently active/requested product object\n * @return {Object|undefined} currently selected product cursor\n */\nReactionProduct.selectedProduct = function () {\n  const id = ReactionProduct.selectedProductId();\n  if (typeof id === \"string\") {\n    return applyProductRevision(Products.findOne(id));\n  }\n  return undefined;\n};\n\n/**\n * @name checkChildVariants\n * @method\n * @memberof ReactionProduct\n * @summary return number of child variants for a parent\n * @param {String} parentVariantId - parentVariantId\n * @return {Number} count of childVariants for this parentVariantId\n */\nReactionProduct.checkChildVariants = function (parentVariantId) {\n  const childVariants = ReactionProduct.getVariants(parentVariantId);\n  return childVariants.length ? childVariants.length : 0;\n};\n\n/**\n * @name checkInventoryVariants\n * @method\n * @memberof ReactionProduct\n * @summary return number of inventory variants for a parent\n * @param {String} parentVariantId - parentVariantId\n * @todo could be combined with checkChildVariants in one method\n * @todo inventoryVariants are deprecated. remove this.\n * @return {Number} count of inventory variants for this parentVariantId\n */\nReactionProduct.checkInventoryVariants = function (parentVariantId) {\n  const inventoryVariants = ReactionProduct.getVariants(parentVariantId, \"inventory\");\n  return inventoryVariants.length ? inventoryVariants.length : 0;\n};\n\n/**\n * @name getVariantPriceRange\n * @method\n * @memberof ReactionProduct\n * @summary get price range of a variant if it has child options.\n * if no child options, return main price value\n * @todo remove string return and replace with object\n * @param {String} [id] - current variant _Id\n * @return {String} formatted price or price range\n */\n\nReactionProduct.getVariantPriceRange = (id) => Catalog\n  .getVariantPriceRange(id || ReactionProduct.selectedVariant()._id);\n\n/**\n * @name getProductPriceRange\n * @method\n * @memberof ReactionProduct\n * @summary get price range of a product\n * if no only one price available, return it\n * otherwise return a string range\n * @todo remove string return and replace with object\n * @param {String} [id] - current product _id\n * @return {String} formatted price or price range\n */\n\nReactionProduct.getProductPriceRange = (id) => Catalog\n  .getProductPriceRange(id || ReactionProduct.selectedProductId());\n\n/**\n * @name getVariantQuantity\n * @method\n * @memberof ReactionProduct\n * @summary middleware method which calls the same named common method.\n * @todo maybe we could remove this after 1.3. But for now I like how it looks.\n * @param {Object} doc - variant object\n * @return {Number} summary of options quantity or top-level variant\n * inventoryQuantity\n */\nReactionProduct.getVariantQuantity = (doc) => Catalog.getVariantQuantity(doc);\n\n/**\n * @method getProduct\n * @method\n * @memberof ReactionProduct\n * @summary Get product object. Could be useful for products and for top level variants\n * @param {String} [id] - product _id\n * @return {Object} Product data\n */\nReactionProduct.getProduct = (id) => Catalog.getProduct(id);\n\n/**\n * @method getVariants\n * @method\n * @memberof ReactionProduct\n * @summary Get all parent variants. Could be useful for products and for top level variants\n * @param {String} [id] - product _id\n * @param {String} [type] - type of variant\n * @return {Array} Parent variants or empty array\n */\nReactionProduct.getVariants = (id, type) => Catalog.getVariants(id || ReactionProduct.selectedProductId(), type);\n\n/**\n * @method getSiblings\n * @method\n * @memberof ReactionProduct\n * @summary Get all sibling variants - variants with the same ancestor tree\n * could be useful for child variants relationships with top-level variants\n * @param {Object} [variant] - product / variant object\n * @param {String} [type] - type of variant\n * @param {Boolean} [includeSelf] - include current variant in results\n * @return {Array} Sibling variants or empty array\n */\nReactionProduct.getSiblings = (variant, type) => Catalog.getSiblings(variant, type);\n\n/**\n * @method getVariantParent\n * @method\n * @memberof ReactionProduct\n * @summary Get direct parent variant - could be useful for lower level variants to get direct parents\n * @param {Object} [variant] - product / variant object\n * @return {Array} Parent variant or empty\n */\nReactionProduct.getVariantParent = (variant) => Catalog.getVariantParent(variant);\n\n/**\n * @method getTopVariants\n * @summary Get only product top level variants\n * @param {String} [id] - product _id\n * @return {Array} Product top level variants or empty array\n */\nReactionProduct.getTopVariants = (id) => Catalog.getTopVariants(id || ReactionProduct.selectedProductId());\n\n/**\n * @name getTag\n * @method\n * @memberof ReactionProduct\n * @summary This needed for naming `positions` object. Method could return `tag`\n * route name or shop name as default name.\n * @return {String} tag name or shop name\n */\nReactionProduct.getTag = () => getCurrentTag() || getShopName().toLowerCase();\n\n/**\n * @name getProductsByTag\n * @method\n * @memberof ReactionProduct\n * @summary method to return tag specific product\n * @param {String} tag - tag string\n * @return {Object} - return products collection cursor filtered by tag\n */\nReactionProduct.getProductsByTag = function (tag) {\n  let hashtags;\n  let newRelatedTags;\n  let relatedTag;\n  let relatedTags;\n  const selector = {};\n\n  if (tag) {\n    hashtags = [];\n    relatedTags = [tag];\n    while (relatedTags.length) {\n      newRelatedTags = [];\n      for (relatedTag of relatedTags) {\n        if (hashtags.indexOf(relatedTag._id) === -1) {\n          hashtags.push(relatedTag._id);\n        }\n      }\n      relatedTags = newRelatedTags;\n    }\n    selector.hashtags = {\n      $in: hashtags\n    };\n  }\n  const cursor = Products.find(selector);\n  return cursor;\n};\n\n/**\n * @name publishProduct\n * @method\n * @memberof ReactionProduct\n * @summary product publishing and alert\n * @todo review process for publishing arrays of product\n * @param {Object} productOrArray - product Object\n * @returns {undefined} - returns nothing, and alerts, happen here\n */\nReactionProduct.publishProduct = function (productOrArray) {\n  const products = !_.isArray(productOrArray) ? [productOrArray] : productOrArray;\n  /* eslint no-loop-func: 1 */\n  for (const product of products) {\n    Meteor.call(\"products/publishProduct\", product._id, (error, result) => { // eslint-disable-line no-loop-func\n      if (error) {\n        Alerts.add(error, \"danger\", {\n          placement: \"productGridItem\",\n          id: product._id\n        });\n        throw new Meteor.Error(\"error-occurred\", error);\n      }\n      const alertSettings = {\n        placement: \"productGridItem\",\n        id: product._id,\n        autoHide: true,\n        dismissable: false\n      };\n      if (result) {\n        Alerts.add(i18next.t(\"productDetail.publishProductVisible\", { product: product.title }), \"success\", alertSettings);\n      } else {\n        Alerts.add(i18next.t(\"productDetail.publishProductHidden\", { product: product.title }), \"warning\", alertSettings);\n      }\n    });\n  }\n};\n\n/**\n * @name toggleVisibility\n * @method\n * @memberof ReactionProduct\n * @summary product publishing and alert\n * @param {Object} productOrArray - product Object\n * @returns {undefined} - returns nothing, and alerts, happen here\n */\nReactionProduct.toggleVisibility = function (productOrArray) {\n  const products = !_.isArray(productOrArray) ? [productOrArray] : productOrArray;\n  for (const product of products) {\n    Meteor.call(\"products/toggleVisibility\", product._id, (error, result) => { // eslint-disable-line no-loop-func\n      if (error) {\n        Alerts.add(error, \"danger\", {\n          placement: \"productGridItem\",\n          id: product._id\n        });\n        throw new Meteor.Error(\"error-occurred\", error);\n      }\n      const alertSettings = {\n        placement: \"productGridItem\",\n        id: product._id,\n        autoHide: true,\n        dismissable: false\n      };\n      if (result) {\n        Alerts.add(i18next.t(\"productDetail.publishProductVisible\", { product: product.title }), \"success\", alertSettings);\n      } else {\n        Alerts.add(i18next.t(\"productDetail.publishProductHidden\", { product: product.title }), \"warning\", alertSettings);\n      }\n    });\n  }\n};\n\n/**\n * A reactive data source that tells any dependents that they should resubscribe their\n * active publication.\n * @type {ReactiveVar}\n */\nexport const resubscribeAfterCloning = new ReactiveVar(false);\n\n\n/**\n * @name cloneProduct\n * @method\n * @memberof ReactionProduct\n * @summary product cloning and alert\n * @param {Object|Array} productOrArray - if this method calls from productGrid\n * it receives and array with product _id or _ids, but if it calls from PDP, when\n * it receive a `Object` with _id. It needed to determine the source of call.\n * @returns {undefined} - returns nothing, and alerts, happen here\n */\nReactionProduct.cloneProduct = function (productOrArray) {\n  const products = !Array.isArray(productOrArray) ? [productOrArray] : productOrArray;\n\n  return Meteor.call(\"products/cloneProduct\", products, (error, result) => {\n    if (error) {\n      Alerts.add(error, \"danger\", { placement: \"productGridItem\" });\n      throw new Meteor.Error(\"error-occurred\", error);\n    }\n    if (result) {\n      if (products.length === 1) {\n        Alerts.add(i18next.t(\"productDetail.clonedAlert\", { product: products[0].title }), \"success\", {\n          placement: \"productGridItem\",\n          id: products[0]._id,\n          autoHide: true,\n          dismissable: false\n        });\n      } else {\n        Alerts.add(\n          i18next.t(\"productDetail.clonedAlert_plural\", { product: i18next.t(\"productDetail.theSelectedProducts\"), count: 0 }),\n          \"success\", {\n            placement: \"productGridItem\",\n            id: products[0]._id,\n            autoHide: true,\n            dismissable: false\n          }\n        );\n      }\n    }\n    // this statement allow us to redirect to a new clone PDP if clone action\n    // was fired within PDP, not within productGrid.\n    if (!Array.isArray(productOrArray)) {\n      Router.go(\"product\", {\n        handle: result[0]\n      });\n    } else {\n      resubscribeAfterCloning.set(true);\n    }\n  });\n};\n\n/**\n * @name archiveProduct\n * @method\n * @memberof ReactionProduct\n * @summary confirm to archive product\n * @param {Object} productOrArray - product Object\n * @returns {undefined} - returns nothing, and alerts, happen here\n */\nReactionProduct.archiveProduct = function (productOrArray) {\n  const products = !Array.isArray(productOrArray) ? [productOrArray] : productOrArray;\n  const productIds = products.map((product) => (typeof product === \"string\" ? product : product._id));\n  let confirmTitle;\n  // we have to use so difficult logic with `length` check because of some\n  // languages, which have different phrase forms for each of cases.\n  // we are using i18next `plural` functionality here.\n  // @see: http://i18next.com/translate/pluralSimple\n  if (products.length === 1) {\n    confirmTitle = i18next.t(\"productDetailEdit.archiveThisProduct\");\n  } else {\n    confirmTitle = i18next.t(\"productDetailEdit.archiveSelectedProducts\");\n  }\n\n  Alerts.alert({\n    title: confirmTitle,\n    type: \"warning\",\n    showCancelButton: true,\n    confirmButtonText: \"Archive\"\n  }, (isConfirm) => {\n    if (isConfirm) {\n      Meteor.call(\"products/archiveProduct\", productIds, (error, result) => {\n        let title;\n        if (error) {\n          title = products.length === 1 ?\n            products[0].title || i18next.t(\"productDetail.archiveErrorTheProduct\") :\n            i18next.t(\"productDetail.theSelectedProducts\");\n          Alerts.toast(i18next.t(\"productDetail.productArchiveError\", { product: title }), \"error\");\n          throw new Meteor.Error(`error-occurred${title}`, error);\n        }\n        if (result) {\n          Router.go(\"/\");\n          if (products.length === 1) {\n            title = products[0].title || i18next.t(\"productDetail.theProduct\");\n            Alerts.toast(i18next.t(\"productDetail.archivedAlert\", { product: title }), \"info\");\n          } else {\n            title = i18next.t(\"productDetail.theSelectedProducts\");\n            Alerts.toast(i18next.t(\"productDetail.archivedAlert_plural\", { product: title, count: 0 }), \"info\");\n          }\n        }\n      });\n    }\n  });\n};\n\n/**\n * @name isAncestorDeleted\n * @method\n * @memberof ReactionProduct\n * @summary Verify there are no deleted ancestors\n * Variants cannot be restored if their parent product / variant is deleted\n * @param  {Object} product     product Object\n * @param  {Boolean} includeSelf include product\n * @return {Boolean}             True or false\n */\nReactionProduct.isAncestorDeleted = function (product, includeSelf) {\n  const productIds = [\n    ...product.ancestors // Avoid mutations\n  ];\n\n  if (includeSelf) {\n    productIds.push(product._id);\n  }\n\n  // Verify there are no deleted ancestors,\n  // Variants cannot be restored if their parent product / variant is deleted\n  const archivedCount = Revisions.find({\n    \"documentId\": { $in: productIds },\n    \"documentData.isDeleted\": true,\n    \"workflow.status\": {\n      $nin: [\n        \"revision/published\"\n      ]\n    }\n  }).count();\n\n  if (archivedCount > 0) {\n    return true;\n  }\n\n  return false;\n};\n\nexport default ReactionProduct;\n","import _ from \"lodash\";\nimport { check } from \"meteor/check\";\nimport * as Schemas from \"/lib/collections/schemas\";\n\n/**\n * @file **PropTypes** - React Component PropTypes methods for validating Tags\n *\n * @namespace PropTypes\n */\n\nconst TagSchema = Schemas.Tag.newContext();\n\nexport const PropTypes = {};\n\n/**\n * @name Tag\n * @summary React Component PropTypes validator for a single Tag\n * @method\n * @memberof PropTypes\n * @param  {Object} props An object containing all props passed into the component\n * @param  {String} propName Name of prop to validate\n * @return {Error|undefined} returns an error if validation us unseccessful\n */\nPropTypes.Tag = (props, propName) => {\n  check(props, Object);\n  check(propName, String);\n\n  if (_.isEmpty(props[propName]) === false) {\n    if (TagSchema.validate(props[propName]) === false) {\n      return new Error(\"Tag must be of type: Schemas.Tag\");\n    }\n  }\n};\n\n/**\n * @name arrayOfTags\n * @summary React Component PropTypes validator for an array of Tags\n * @method\n * @memberof PropTypes\n * @param  {Object} props An object containing all props passed into the component\n * @param  {String} propName Name of prop to validate\n * @return {Error|undefined} returns an error if validation us unseccessful\n */\nPropTypes.arrayOfTags = (props, propName) => {\n  check(props, Object);\n  check(propName, String);\n\n  if (_.isEmpty(props[propName]) === false && _.isArray(props[propName])) {\n    const valid = _.every(props[propName], (tag) => TagSchema.validate(tag));\n\n    if (valid === false) {\n      return new Error(\"Objects in array must be of type: Schemas.Tag\");\n    }\n  }\n};\n","import SimpleSchema from \"simpl-schema\";\nimport { check } from \"meteor/check\";\nimport { Tracker } from \"meteor/tracker\";\nimport { registerSchema } from \"@reactioncommerce/schemas\";\nimport { createdAtAutoValue, shopIdAutoValue, updatedAtAutoValue } from \"./helpers\";\nimport { Address } from \"./address\";\nimport { Metafield } from \"./metafield\";\n\n/**\n * @typedef {SimpleSchema} SimpleSchema\n * @summary SimpleSchema for Collections - Reaction uses {@link https://github.com/aldeed/meteor-simple-schema SimpleSchema} to apply basic content and structure validation to Collections. See {@link https://docs.reactioncommerce.com/reaction-docs/master/simple-schema full documentation}.\n */\n\n/**\n * @file Reaction Core schemas\n * Reaction uses {@link https://github.com/aldeed/meteor-simple-schema SimpleSchema} to apply basic content and structure validation to Collections.\n * See {@link https://docs.reactioncommerce.com/reaction-docs/master/simple-schema full documentation}.\n * @namespace schemas\n */\n\n/**\n * @name TaxSettings\n * @memberof schemas\n * @type {SimpleSchema}\n * @property {String} exemptionNo optional\n * @property {String} customerUsageType optional\n */\nconst TaxSettings = new SimpleSchema({\n  exemptionNo: {\n    type: String,\n    optional: true\n  },\n  customerUsageType: {\n    type: String,\n    optional: true\n  }\n}, { check, tracker: Tracker });\n\nregisterSchema(\"TaxSettings\", TaxSettings);\n\n/**\n * @name Profile\n * @memberof schemas\n * @type {SimpleSchema}\n * @property {Address[]} addressBook optional, array of Addresses\n * @property {Boolean} invited optional\n * @property {String} name optional\n * @property {String} picture optional\n * @property {String} bio optional\n * @property {String} username optional\n * @property {String} currency User currency\n */\nexport const Profile = new SimpleSchema({\n  \"addressBook\": {\n    type: Array,\n    optional: true\n  },\n  \"addressBook.$\": {\n    type: Address\n  },\n  \"invited\": {\n    type: Boolean,\n    optional: true,\n    defaultValue: false\n  },\n  \"name\": {\n    type: String,\n    optional: true\n  },\n  \"picture\": {\n    type: String,\n    optional: true\n  },\n  \"bio\": {\n    type: String,\n    optional: true\n  },\n  \"username\": {\n    type: String,\n    optional: true\n  },\n  \"currency\": {\n    label: \"User Currency\",\n    type: String,\n    optional: true\n  },\n  \"preferences\": {\n    label: \"User preferences\",\n    type: Object,\n    blackbox: true,\n    optional: true\n  }\n}, { check, tracker: Tracker });\n\nregisterSchema(\"Profile\", Profile);\n\n/**\n * @name Email\n * @memberof schemas\n * @type {SimpleSchema}\n * @property {String} provides optional\n * @property {String} address required\n * @property {Boolean} verified optional\n */\nexport const Email = new SimpleSchema({\n  provides: {\n    type: String,\n    defaultValue: \"default\",\n    optional: true\n  },\n  address: {\n    type: String,\n    regEx: SimpleSchema.RegEx.Email\n  },\n  verified: {\n    type: Boolean,\n    defaultValue: false,\n    optional: true\n  }\n}, { check, tracker: Tracker });\n\nregisterSchema(\"Email\", Email);\n\n/**\n * @name Accounts\n * @memberof schemas\n * @type {SimpleSchema}\n * @property {String} userId required\n * @property {String[]} sessions optional, Array of strings\n * @property {String} shopId required\n * @property {String} name optional\n * @property {String} username optional\n * @property {Email[]} emails optional, Array of strings\n * @property {Boolean} acceptsMarketing optional\n * @property {String} state optional\n * @property {TaxSettings} taxSettings optional\n * @property {String} note optional\n * @property {Profile} profile optional\n * @property {String[]} groups optional, Array of groupIds of the groups the user belongs to\n * @property {Metafield[]} metafields optional\n * @property {Date} createdAt required\n * @property {Date} updatedAt optional\n */\nexport const Accounts = new SimpleSchema({\n  \"userId\": {\n    type: String,\n    regEx: SimpleSchema.RegEx.Id,\n    index: 1,\n    label: \"Accounts ShopId\"\n  },\n  \"sessions\": {\n    type: Array,\n    optional: true,\n    index: 1\n  },\n  \"sessions.$\": {\n    type: String\n  },\n  \"shopId\": {\n    type: String,\n    autoValue: shopIdAutoValue,\n    regEx: SimpleSchema.RegEx.Id,\n    index: 1\n  },\n  \"name\": {\n    type: String,\n    optional: true\n  },\n  \"username\": {\n    type: String,\n    optional: true\n  },\n  \"emails\": {\n    type: Array,\n    optional: true\n  },\n  \"emails.$\": {\n    type: Email\n  },\n  \"acceptsMarketing\": {\n    type: Boolean,\n    defaultValue: false,\n    optional: true\n  },\n  \"state\": {\n    type: String,\n    defaultValue: \"new\",\n    optional: true\n  },\n  \"taxSettings\": {\n    type: TaxSettings,\n    optional: true\n  },\n  \"note\": {\n    type: String,\n    optional: true\n  },\n  \"profile\": {\n    type: Profile,\n    optional: true\n  },\n  \"groups\": {\n    type: Array, // groupIds that user belongs to\n    optional: true,\n    defaultValue: []\n  },\n  \"groups.$\": {\n    type: String\n  },\n  \"metafields\": {\n    type: Array,\n    optional: true\n  },\n  \"metafields.$\": {\n    type: Metafield\n  },\n  \"createdAt\": {\n    type: Date,\n    autoValue: createdAtAutoValue\n  },\n  \"updatedAt\": {\n    type: Date,\n    autoValue: updatedAtAutoValue,\n    optional: true\n  }\n}, { check, tracker: Tracker });\n\nregisterSchema(\"Accounts\", Accounts);\n","import SimpleSchema from \"simpl-schema\";\nimport { check } from \"meteor/check\";\nimport { Random } from \"meteor/random\";\nimport { Tracker } from \"meteor/tracker\";\nimport { registerSchema } from \"@reactioncommerce/schemas\";\nimport { Metafield } from \"./metafield\";\n\nconst withoutCodeCountries = [\"AO\", \"AG\", \"AW\", \"BS\", \"BZ\", \"BJ\", \"BW\",\n  \"BF\", \"BI\", \"CM\", \"CF\", \"KM\", \"CG\", \"CD\", \"CK\", \"CI\", \"DJ\",\n  \"DM\", \"GQ\", \"ER\", \"FJ\", \"TF\", \"GM\", \"GH\", \"GD\", \"GN\", \"GY\",\n  \"HK\", \"IE\", \"JM\", \"KE\", \"KI\", \"MO\", \"MW\", \"ML\", \"MR\", \"MU\",\n  \"MS\", \"NR\", \"AN\", \"NU\", \"KP\", \"PA\", \"QA\", \"RW\", \"KN\", \"LC\",\n  \"ST\", \"SA\", \"SC\", \"SL\", \"SB\", \"SO\", \"SR\", \"SY\", \"TZ\", \"TL\",\n  \"TK\", \"TO\", \"TT\", \"TV\", \"UG\", \"AE\", \"VU\", \"YE\", \"ZW\"];\n\n/**\n * @name Address\n * @memberof schemas\n * @type {SimpleSchema}\n * @property {String} _id\n * @property {String} fullName required\n * @property {String} address1 required\n * @property {String} address2\n * @property {String} city required\n * @property {String} company\n * @property {String} phone required\n * @property {String} region required, State/Province/Region\n * @property {String} postal required\n * @property {String} country required\n * @property {Boolean} isCommercial required\n * @property {Boolean} isBillingDefault required\n * @property {Boolean} isShippingDefault required\n * @property {Boolean} failedValidation\n * @property {Metafield[]} metafields\n */\nexport const Address = new SimpleSchema({\n  \"_id\": {\n    type: String,\n    defaultValue: Random.id(),\n    optional: true\n  },\n  \"fullName\": {\n    type: String,\n    label: \"Full name\"\n  },\n  \"address1\": {\n    label: \"Address 1\",\n    type: String\n  },\n  \"address2\": {\n    label: \"Address 2\",\n    type: String,\n    optional: true\n  },\n  \"city\": {\n    type: String,\n    label: \"City\"\n  },\n  \"company\": {\n    type: String,\n    label: \"Company\",\n    optional: true\n  },\n  \"phone\": {\n    type: String,\n    label: \"Phone\"\n  },\n  \"region\": {\n    label: \"State/Province/Region\",\n    type: String\n  },\n  \"postal\": {\n    label: \"ZIP/Postal Code\",\n    type: String,\n    optional: true,\n    custom() {\n      const country = this.field(\"country\");\n      if (country && country.value) {\n        if (!withoutCodeCountries.includes(country.value) && !this.value) {\n          return \"required\";\n        }\n      }\n      return true;\n    }\n  },\n  \"country\": {\n    type: String,\n    label: \"Country\"\n  },\n  \"isCommercial\": {\n    label: \"This is a commercial address.\",\n    type: Boolean\n  },\n  \"isBillingDefault\": {\n    label: \"Make this your default billing address?\",\n    type: Boolean\n  },\n  \"isShippingDefault\": {\n    label: \"Make this your default shipping address?\",\n    type: Boolean\n  },\n  \"failedValidation\": {\n    label: \"Failed validation\",\n    type: Boolean,\n    defaultValue: false,\n    optional: true\n  },\n  \"metafields\": {\n    type: Array,\n    optional: true\n  },\n  \"metafields.$\": {\n    type: Metafield\n  }\n}, { check, tracker: Tracker });\n\nregisterSchema(\"Address\", Address);\n","import SimpleSchema from \"simpl-schema\";\nimport { check } from \"meteor/check\";\nimport { Tracker } from \"meteor/tracker\";\nimport { registerSchema } from \"@reactioncommerce/schemas\";\n\n/**\n * @name Assets\n * @memberof schemas\n * @type {SimpleSchema}\n * @property {String} type required\n * @property {String} name optional\n * @property {String} ns optional, namespace for i18n. Allows to load translation for custom plugins.\n * @property {String} path optional\n * @property {String} content optional\n */\nexport const Assets = new SimpleSchema({\n  type: {\n    type: String\n  },\n  name: {\n    type: String,\n    optional: true\n  },\n  ns: {\n    type: String,\n    optional: true\n  },\n  path: {\n    type: String,\n    optional: true\n  },\n  content: {\n    type: String,\n    optional: true\n  }\n}, { check, tracker: Tracker });\n\nregisterSchema(\"Assets\", Assets);\n","import SimpleSchema from \"simpl-schema\";\nimport { check } from \"meteor/check\";\nimport { Tracker } from \"meteor/tracker\";\nimport { registerSchema } from \"@reactioncommerce/schemas\";\nimport { createdAtAutoValue, shopIdAutoValueForCart, updatedAtAutoValue } from \"./helpers\";\nimport { Payment } from \"./payments\";\nimport { Product, ProductVariant } from \"./products\";\nimport { Shipment, ShippingParcel } from \"./shipping\";\nimport { Workflow } from \"./workflow\";\nimport { Metafield } from \"./metafield\";\n\n/**\n * @name CartItem\n * @memberof schemas\n * @type {SimpleSchema}\n * @property {String} _id required\n * @property {String} productId required\n * @property {String} shopId, Cart Item shopId\n * @property {Number} quantity required\n * @property {Product} product required\n * @property {ProductVariant} variants required\n * @property {Metafield[]} metafields\n * @property {String} title Cart Item title\n * @property {String} type, Product type\n * @property {ShippingParcel} parcel Currently, parcel is in simple product schema. Need to include it here as well.\n * @property {String} cartItemId Seems strange here but has to be here since we share schemas between Cart and Order\n * @property {Object} transaction Transaction associated with this item\n * @property {Object} taxData optional blackbox\n * @property {Number} taxRate optional\n * @property {Object} shippingMethod Shipping Method associated with this item\n */\nexport const CartItem = new SimpleSchema({\n  \"_id\": {\n    type: String\n  },\n  \"productId\": {\n    type: String,\n    index: 1\n  },\n  \"shopId\": {\n    type: String,\n    autoValue: shopIdAutoValueForCart,\n    index: 1,\n    label: \"Cart Item shopId\",\n    optional: true\n  },\n  \"quantity\": {\n    label: \"Quantity\",\n    type: SimpleSchema.Integer,\n    min: 0\n  },\n  \"product\": {\n    type: Product\n  },\n  \"variants\": {\n    type: ProductVariant\n  },\n  \"metafields\": {\n    type: Array,\n    optional: true\n  },\n  \"metafields.$\": {\n    type: Metafield\n  },\n  \"title\": {\n    type: String,\n    label: \"CartItem Title\"\n  },\n  \"type\": {\n    label: \"Product Type\",\n    type: String,\n    optional: true\n  },\n  \"parcel\": {\n    type: ShippingParcel,\n    optional: true\n  },\n  \"cartItemId\": {\n    type: String,\n    optional: true\n  },\n  \"transaction\": {\n    type: Object,\n    optional: true,\n    blackbox: true\n  },\n  \"taxData\": {\n    type: Object,\n    optional: true,\n    blackbox: true\n  },\n  \"taxRate\": {\n    type: Number,\n    optional: true\n  },\n  \"shippingMethod\": {\n    type: Object,\n    optional: true,\n    blackbox: true // @todo Revert this to schema at some point\n  }\n}, { check, tracker: Tracker });\n\nregisterSchema(\"CartItem\", CartItem);\n\n/**\n * @name CartItems\n * @memberof schemas\n * @summary Used in check by inventory/addReserve method\n * @type {SimpleSchema}\n * @property {CartItem[]} items an Array of CartItem optional\n */\nexport const CartItems = new SimpleSchema({\n  \"items\": {\n    type: Array,\n    optional: true\n  },\n  \"items.$\": {\n    type: CartItem\n  }\n}, { check, tracker: Tracker });\n\nregisterSchema(\"CartItems\", CartItems);\n\n/**\n * @name Cart\n * @memberof schemas\n * @type {SimpleSchema}\n * @property {String} _id required for check of users' carts\n * @property {String} shopId required, Cart ShopId\n * @property {String} userId required\n * @property {String} sessionId required\n * @property {String} email optional\n * @property {CartItem[]} items Array of CartItem optional\n * @property {Shipment[]} shipping Array of Shipment optional, blackbox\n * @property {Payment[]} billing Array of Payment optional, blackbox\n * @property {Number} tax tax rate\n * @property {Object[]} taxes Array of objects optional\n * @property {Object} taxRatesByShop optional\n * @property {Number} discount optional\n * @property {Workflow} workflow optional\n * @property {Date} createdAt required\n * @property {Date} updatedAt optional\n */\nexport const Cart = new SimpleSchema({\n  \"_id\": {\n    type: String,\n    optional: true\n  },\n  \"shopId\": {\n    type: String,\n    autoValue: shopIdAutoValueForCart,\n    index: 1,\n    label: \"Cart ShopId\"\n  },\n  \"userId\": {\n    type: String,\n    unique: true,\n    autoValue() {\n      if (this.isInsert || this.isUpdate) {\n        if (!this.isFromTrustedCode) {\n          return this.userId;\n        }\n      } else {\n        this.unset();\n      }\n    }\n  },\n  \"sessionId\": {\n    type: String,\n    index: 1\n  },\n  \"email\": {\n    type: String,\n    optional: true,\n    index: 1,\n    regEx: SimpleSchema.RegEx.Email\n  },\n  \"items\": {\n    type: Array,\n    optional: true\n  },\n  \"items.$\": {\n    type: CartItem\n  },\n  \"shipping\": {\n    type: Array,\n    optional: true\n  },\n  \"shipping.$\": {\n    type: Shipment\n  },\n  \"billing\": {\n    type: Array,\n    optional: true\n  },\n  \"billing.$\": {\n    type: Payment\n  },\n  \"tax\": {\n    type: Number,\n    optional: true\n  },\n  \"taxes\": {\n    type: Array,\n    optional: true\n  },\n  \"taxes.$\": {\n    type: Object,\n    blackbox: true\n  },\n  \"taxRatesByShop\": {\n    type: Object,\n    optional: true,\n    blackbox: true\n  },\n  \"taxCalculationFailed\": {\n    type: Boolean,\n    optional: true,\n    defaultValue: false\n  },\n  \"bypassAddressValidation\": {\n    type: Boolean,\n    optional: true,\n    defaultValue: false\n  },\n  \"discount\": {\n    type: Number,\n    optional: true\n  },\n  \"workflow\": {\n    type: Workflow,\n    optional: true,\n    defaultValue: {}\n  },\n  \"createdAt\": {\n    type: Date,\n    autoValue: createdAtAutoValue\n  },\n  \"updatedAt\": {\n    type: Date,\n    autoValue: updatedAtAutoValue,\n    optional: true\n  }\n}, { check, tracker: Tracker });\n\nregisterSchema(\"Cart\", Cart);\n","import SimpleSchema from \"simpl-schema\";\n\nexport const Catalog = new SimpleSchema({\n  contentType: {\n    type: String\n  },\n  media: {\n    type: Object,\n    blackbox: true\n  },\n  variants: {\n    type: Object,\n    blackbox: true\n  }\n});\n","import SimpleSchema from \"simpl-schema\";\nimport { check } from \"meteor/check\";\nimport { Tracker } from \"meteor/tracker\";\nimport { registerSchema } from \"@reactioncommerce/schemas\";\nimport { createdAtAutoValue, updatedAtAutoValue } from \"./helpers\";\n\n/**\n * @name Emails\n * @memberof schemas\n * @type {SimpleSchema}\n * @property {String} to required\n * @property {String} from required\n * @property {String} subject required\n * @property {String} text optional\n * @property {String} html optional\n * @property {String} userId optional\n * @property {String} jobId required\n * @property {String} type optional\n * @property {String} status optional\n * @property {Date} createdAt required\n * @property {Date} updatedAt required\n */\nexport const Emails = new SimpleSchema({\n  to: String,\n  from: String,\n  subject: String,\n  text: {\n    type: String,\n    optional: true\n  },\n  html: {\n    type: String,\n    optional: true\n  },\n  userId: {\n    type: String,\n    optional: true\n  },\n  jobId: {\n    type: String,\n    index: true\n  },\n  type: {\n    type: String,\n    optional: true\n  },\n  status: String,\n  createdAt: {\n    type: Date,\n    autoValue: createdAtAutoValue\n  },\n  updatedAt: {\n    type: Date,\n    autoValue: updatedAtAutoValue,\n    optional: true\n  }\n}, { check, tracker: Tracker });\n\nregisterSchema(\"Emails\", Emails);\n","import SimpleSchema from \"simpl-schema\";\nimport { check } from \"meteor/check\";\nimport { Tracker } from \"meteor/tracker\";\nimport { registerSchema } from \"@reactioncommerce/schemas\";\n\n/**\n * @name Event for EventLog\n * @memberof schemas\n * @type {SimpleSchema}\n * @property {String} title Event title required\n * @property {String} type Event type required\n * @property {String} description Event description optional\n * @property {String} userId User who triggered event optional\n * @property {String} trigger Action that triggered event optional\n * @property {Date} createdAt required\n */\nexport const Event = new SimpleSchema({\n  title: {\n    type: String,\n    label: \"Event Title\"\n  },\n  type: {\n    type: String,\n    label: \"Event Type\"\n  },\n  description: {\n    type: String,\n    label: \"Event Description\",\n    optional: true\n  },\n  userId: {\n    type: String,\n    label: \"User who triggered event\",\n    optional: true\n  },\n  trigger: {\n    type: String,\n    label: \"What triggered the event\",\n    optional: true\n  },\n  createdAt: {\n    type: Date,\n    label: \"Created At\"\n  }\n}, { check, tracker: Tracker });\n\nregisterSchema(\"Event\", Event);\n","import SimpleSchema from \"simpl-schema\";\nimport { check } from \"meteor/check\";\nimport { Tracker } from \"meteor/tracker\";\nimport { registerSchema } from \"@reactioncommerce/schemas\";\nimport { createdAtAutoValue, updatedAtAutoValue } from \"./helpers\";\n\n/**\n * @name Group\n * @memberof schemas\n * @type {SimpleSchema}\n * @property {String} name required\n * @property {String} description optional\n * @property {String} slug required\n * @property {String[]} permissions optional\n * @property {String} shopId required\n * @property {String} createdBy optional\n * @property {Date} createdAt required\n * @property {Date} updatedAt required\n */\nexport const Groups = new SimpleSchema({\n  \"name\": {\n    type: String\n  },\n  \"description\": {\n    type: String,\n    optional: true\n  },\n  \"slug\": {\n    type: String\n  },\n  \"permissions\": {\n    type: Array,\n    optional: true\n  },\n  \"permissions.$\": {\n    type: String\n  },\n  \"shopId\": {\n    type: String,\n    regEx: SimpleSchema.RegEx.Id\n  },\n  \"createdBy\": {\n    type: String,\n    optional: true,\n    regEx: SimpleSchema.RegEx.Id,\n    autoValue() {\n      return this.userId || this.value;\n    }\n  },\n  \"createdAt\": {\n    type: Date,\n    autoValue: createdAtAutoValue\n  },\n  \"updatedAt\": {\n    type: Date,\n    autoValue: updatedAtAutoValue\n  }\n}, { check, tracker: Tracker });\n\nregisterSchema(\"Groups\", Groups);\n","import { Meteor } from \"meteor/meteor\";\nimport { Random } from \"meteor/random\";\nimport { Reaction } from \"/lib/api\";\nimport { Shops } from \"/lib/collections\";\n\n/**\n * @name createdAtAutoValue\n * @memberof schemas\n * @method\n * @summary Helper method used for schema injection autoValue\n * @example autoValue: createdAtAutoValue\n * @return {Date} Date representing now if it's an insert\n */\nexport function createdAtAutoValue() {\n  // We don't want to unset or overwrite a createdAt in a nested\n  // document, for example, in a product being added to cart items\n  if (this.closestSubschemaFieldName) return;\n\n  if (this.isInsert) return new Date();\n  if (this.isUpsert) return { $setOnInsert: new Date() };\n  this.unset();\n}\n\n/**\n * @name updatedAtAutoValue\n * @memberof schemas\n * @method\n * @summary Helper method used for schema injection autoValue\n * @example autoValue: updatedAtAutoValue\n * @return {Date} Date representing now\n */\nexport function updatedAtAutoValue() {\n  // We don't want to overwrite an updatedAt in a nested\n  // document, for example, in a product being added to cart items\n  if (this.closestSubschemaFieldName) return;\n\n  return new Date();\n}\n\n/**\n * @name shopIdAutoValue\n * @memberof schemas\n * @method\n * @summary Helper method used for schema injection autoValue\n * @example autoValue: shopIdAutoValue\n * @return {String} current shopId\n */\nexport function shopIdAutoValue() {\n  // we should always have a shopId\n  if (this.isSet && Meteor.isServer) {\n    return this.value;\n  } else if ((Meteor.isServer && !this.isUpdate) || (Meteor.isClient && this.isInsert)) {\n    return Reaction.getShopId();\n  }\n  return this.unset();\n}\n\n/**\n * @name shopIdAutoValueForCart\n * @memberof schemas\n * @method\n * @summary Helper method copy of shopIdAutoValue with modification for Cart\n * @example autoValue: shopIdAutoValue\n * @return {String} shopId\n */\nexport function shopIdAutoValueForCart() {\n  // we should always have a shopId\n  if (this.isSet && Meteor.isServer) {\n    return this.value;\n  } else if ((Meteor.isServer && !this.isUpdate) || (Meteor.isClient && this.isInsert)) {\n    let shopId = Reaction.getPrimaryShopId();\n    const marketplaceSettings = Reaction.getMarketplaceSettings();\n\n    if (marketplaceSettings && marketplaceSettings.public && marketplaceSettings.public.merchantCart === true) {\n      shopId = Reaction.getShopId();\n    }\n    return shopId;\n  }\n  return this.unset();\n}\n\n/**\n * @name schemaIdAutoValue\n * @memberof schemas\n * @method\n * @summary Helper method used for schema injection autoValue\n * @example autoValue: schemaIdAutoValue\n * @return {String} randomId\n */\nexport function schemaIdAutoValue() {\n  if (this.isSet && Meteor.isServer) {\n    return this.value;\n  } else if ((Meteor.isServer && this.operator !== \"$pull\") ||\n    (Meteor.isClient && this.isInsert)) {\n    return Random.id();\n  }\n  return this.unset();\n}\n\n/**\n * @name shopDefaultCountry\n * @memberof schemas\n * @method\n * @summary Helper method used for schema injection autoValue\n * @example autoValue: shopDefaultCountry\n * @return {String} country value from default shop\n */\nexport function shopDefaultCountry() {\n  try {\n    // Check to see if this is client or server, and the type of update being performed\n    if (this.isSet && Meteor.isServer) {\n      return this.value;\n    } else if ((Meteor.isServer && !this.isUpdate) || (Meteor.isClient && this.isInsert)) {\n      // Find the current shop\n      const shop = Shops.findOne({\n        _id: Reaction.getShopId()\n      });\n\n      // Find the current shops primary shipping address\n      if (shop && shop.addressBook) {\n        const defaultShippingAddress = shop.addressBook.find((address) => address.isShippingDefault === true);\n\n        // return the shops country to auto-populate the Country of Origin field in the scheme\n        return defaultShippingAddress.country;\n      }\n\n      return this.value;\n    }\n    return this.unset();\n  } catch (e) {\n    return this.value;\n  }\n}\n","export * from \"./accounts\";\nexport * from \"./address\";\nexport * from \"./assets\";\nexport * from \"./catalog\";\nexport * from \"./cart\";\nexport * from \"./emails\";\nexport * from \"./inventory\";\nexport * from \"./layouts\";\nexport * from \"./logs\";\nexport * from \"./metafield\";\nexport * from \"./notifications\";\nexport * from \"./orders\";\nexport * from \"./payments\";\nexport * from \"./products\";\nexport * from \"./registry\";\nexport * from \"./revisions\";\nexport * from \"./shipping\";\nexport * from \"./shops\";\nexport * from \"./groups\";\nexport * from \"./sms\";\nexport * from \"./social\";\nexport * from \"./tags\";\nexport * from \"./templates\";\nexport * from \"./translations\";\nexport * from \"./workflow\";\n","import SimpleSchema from \"simpl-schema\";\nimport { check } from \"meteor/check\";\nimport { Tracker } from \"meteor/tracker\";\nimport { registerSchema } from \"@reactioncommerce/schemas\";\nimport { createdAtAutoValue, shopIdAutoValue, updatedAtAutoValue } from \"./helpers\";\nimport { Document, Notes } from \"./orders\";\nimport { Metafield } from \"./metafield\";\nimport { Workflow } from \"./workflow\";\n\n/**\n * @name Inventory\n * @memberof schemas\n * @type {SimpleSchema}\n * @property {String} _id optional, inserted by Mongo, we need it for schema validation\n * @property {String} shopId required, Inventory shopId\n * @property {String} productId required\n * @property {String} variantId required\n * @property {String} orderItemId optional\n * @property {Workflow} workflow optional\n * @property {String} sku optional\n * @property {Metafield[]} metafields optional\n * @property {Document[]} documents optional\n * @property {Notes[]} notes optional\n * @property {Date} createdAt optional, but consider it temporary: schema validation failing in method with required\n * @property {Date} updatedAt optional\n */\nexport const Inventory = new SimpleSchema({\n  \"_id\": {\n    type: String,\n    optional: true\n  },\n  \"shopId\": {\n    type: String,\n    autoValue: shopIdAutoValue,\n    index: 1,\n    label: \"Inventory ShopId\"\n  },\n  \"productId\": {\n    type: String,\n    index: true\n  },\n  \"variantId\": {\n    type: String,\n    index: true\n  },\n  \"orderItemId\": {\n    type: String,\n    index: true,\n    optional: true\n  },\n  \"workflow\": {\n    type: Workflow,\n    optional: true,\n    defaultValue: {}\n  },\n  \"sku\": {\n    label: \"sku\",\n    type: String,\n    optional: true\n  },\n  \"metafields\": {\n    type: Array,\n    optional: true\n  },\n  \"metafields.$\": {\n    type: Metafield\n  },\n  \"documents\": {\n    type: Array,\n    optional: true\n  },\n  \"documents.$\": {\n    type: Document\n  },\n  \"notes\": {\n    type: Array,\n    optional: true\n  },\n  \"notes.$\": {\n    type: Notes\n  },\n  \"createdAt\": {\n    type: Date,\n    optional: true,\n    autoValue: createdAtAutoValue\n  },\n  \"updatedAt\": {\n    type: Date,\n    autoValue: updatedAtAutoValue,\n    optional: true\n  }\n}, { check, tracker: Tracker });\n\nregisterSchema(\"Inventory\", Inventory);\n","import SimpleSchema from \"simpl-schema\";\nimport { check } from \"meteor/check\";\nimport { Tracker } from \"meteor/tracker\";\nimport { registerSchema } from \"@reactioncommerce/schemas\";\n\n/**\n * @name LayoutStructure\n * @memberof schemas\n * @type {SimpleSchema}\n * @summary Layout are used by the Shops and Packages schemas.\n * Layouts are used to in two ways: 1) Define the template layout on the site\n * 2) Define workflow components used in each layout block\n * @description Read more about Layouts in {@link https://docs.reactioncommerce.com/reaction-docs/master/layout documentation}\n * @property {String} template optional\n * @property {String} layoutHeader optional\n * @property {String} layoutFooter optional\n * @property {String} notFound optional\n * @property {String} dashboardHeader optional\n * @property {String} dashboardControls optional\n * @property {String} dashboardHeaderControls optional\n * @property {String} adminControlsFooter optional\n */\nexport const LayoutStructure = new SimpleSchema({\n  template: {\n    type: String,\n    optional: true,\n    index: true\n  },\n  layoutHeader: {\n    type: String,\n    optional: true,\n    index: true\n  },\n  layoutFooter: {\n    type: String,\n    optional: true,\n    index: true\n  },\n  notFound: {\n    type: String,\n    optional: true,\n    index: true\n  },\n  dashboardHeader: {\n    type: String,\n    optional: true,\n    index: true\n  },\n  dashboardControls: {\n    type: String,\n    optional: true,\n    index: true\n  },\n  dashboardHeaderControls: {\n    type: String,\n    optional: true,\n    index: true\n  },\n  adminControlsFooter: {\n    type: String,\n    optional: true,\n    index: true\n  }\n}, { check, tracker: Tracker });\n\nregisterSchema(\"LayoutStructure\", LayoutStructure);\n\n/**\n * @name Layout\n * @memberof schemas\n * @type {SimpleSchema}\n * @summary Layout are used by the Shops and Packages schemas.\n * Read more about Layouts in {@link https://docs.reactioncommerce.com/reaction-docs/master/layout documentation}\n * @property {String} layout optional\n * @property {String} workflow optional\n * @property {String} template optional\n * @property {String} collection optional\n * @property {String} theme optional\n * @property {Boolean} enabled default value: `true`\n * @property {String} status optional\n * @property {String} label optional\n * @property {String} container optional\n * @property {String[]} audience optional\n * @property {LayoutStructure} structure optional\n * @property {Number} priority optional default value: `999` - Layouts are prioritized with lower numbers first.\n * @property {Number} position optional default value: `1`\n */\nexport const Layout = new SimpleSchema({\n  \"layout\": {\n    type: String,\n    optional: true,\n    index: true\n  },\n  \"workflow\": {\n    type: String,\n    optional: true\n  },\n  \"template\": {\n    type: String,\n    optional: true\n  },\n  \"collection\": {\n    type: String,\n    optional: true\n  },\n  \"theme\": {\n    type: String,\n    optional: true\n  },\n  \"enabled\": {\n    type: Boolean,\n    defaultValue: true\n  },\n  \"status\": {\n    type: String,\n    optional: true\n  },\n  \"label\": {\n    type: String,\n    optional: true\n  },\n  \"container\": {\n    type: String,\n    optional: true\n  },\n  \"audience\": {\n    type: Array,\n    optional: true\n  },\n  \"audience.$\": {\n    type: String\n  },\n  \"structure\": {\n    type: LayoutStructure,\n    optional: true\n  },\n  \"priority\": {\n    type: SimpleSchema.Integer,\n    optional: true,\n    defaultValue: 999\n  },\n  \"position\": {\n    type: SimpleSchema.Integer,\n    optional: true,\n    defaultValue: 1\n  }\n}, { check, tracker: Tracker });\n\nregisterSchema(\"Layout\", Layout);\n","import SimpleSchema from \"simpl-schema\";\nimport { check } from \"meteor/check\";\nimport { Tracker } from \"meteor/tracker\";\nimport { registerSchema } from \"@reactioncommerce/schemas\";\n\n/**\n * @name Logs\n * @type {SimpleSchema}\n * @memberof schemas\n * @property {String} logType required\n * @property {String} shopId required\n * @property {String} level default: `\"info\"`, allowed: `\"trace\"`, `\"debug\"`, `\"info\"`, `\"warn\"`, `\"error\"`, `\"fatal\"`\n * @property {String} source default: `\"server\"`, allowed: `\"client\"`, `\"server\"`\n * @property {Boolean} handled required, default: false\n * @property {Object} data, blackbox\n * @property {Date} date required\n */\nexport const Logs = new SimpleSchema({\n  logType: {\n    type: String\n  },\n  shopId: {\n    type: String\n  },\n  level: {\n    type: String,\n    defaultValue: \"info\",\n    allowedValues: [\"trace\", \"debug\", \"info\", \"warn\", \"error\", \"fatal\"]\n  },\n  source: {\n    type: String,\n    defaultValue: \"server\",\n    allowedValues: [\"client\", \"server\"]\n  },\n  handled: {\n    type: Boolean,\n    defaultValue: false\n  },\n  data: {\n    type: Object,\n    blackbox: true,\n    label: \"Data\"\n  },\n  date: {\n    type: Date,\n    autoValue() { return new Date(); },\n    label: \"Date\"\n  }\n}, { check, tracker: Tracker });\n\nregisterSchema(\"Logs\", Logs);\n","import SimpleSchema from \"simpl-schema\";\nimport { check } from \"meteor/check\";\nimport { Tracker } from \"meteor/tracker\";\nimport { registerSchema } from \"@reactioncommerce/schemas\";\n\n/**\n * @name Metafield\n * @memberof schemas\n * @type {SimpleSchema}\n * @property {String} key optional\n * @property {String} namespace optional\n * @property {String} scope optional\n * @property {String} value optional\n * @property {String} valueType optional\n * @property {String} description optional\n */\nexport const Metafield = new SimpleSchema({\n  key: {\n    type: String,\n    max: 30,\n    optional: true\n  },\n  namespace: {\n    type: String,\n    max: 20,\n    optional: true\n  },\n  scope: {\n    type: String,\n    optional: true\n  },\n  value: {\n    type: String,\n    optional: true\n  },\n  valueType: {\n    type: String,\n    optional: true\n  },\n  description: {\n    type: String,\n    optional: true\n  }\n}, { check, tracker: Tracker });\n\nregisterSchema(\"Metafield\", Metafield);\n","import SimpleSchema from \"simpl-schema\";\nimport { check } from \"meteor/check\";\nimport { Tracker } from \"meteor/tracker\";\nimport { registerSchema } from \"@reactioncommerce/schemas\";\n\n/**\n * @name Notification\n * @memberof schemas\n * @type {SimpleSchema}\n * @summary Notification sends messages corresponding to the type:\n * - `orderCanceled`  : \"Your order was canceled.\"\n * - `forAdmin`       : \"You have a new order.\"\n * - `newOrder`       : \"You just made an order.\"\n * - `orderDelivered` : \"Your order has been delivered.\"\n * - `orderProcessing`: \"Your order is being processed.\"\n * - `orderShipped`   : \"Your order has been shipped.\"\n * @property {String} message required\n * @property {String} type required, types: `orderCanceled`, `forAdmin`, `newOrder`, `orderDelivered`, `orderProcessing`, `orderShipped`\n * @property {String} url required\n * @property {String} to required\n * @property {Boolean} hasDetails required\n * @property {String} details required\n * @property {String} status required, default: `unread`\n * @property {Date} timeSent required\n */\nexport const Notification = new SimpleSchema({\n  message: {\n    type: String,\n    optional: false\n  },\n  type: {\n    type: String,\n    optional: false\n  },\n  url: {\n    type: String,\n    optional: false\n  },\n  to: {\n    type: String,\n    optional: false\n  },\n  hasDetails: {\n    type: Boolean,\n    optional: false\n  },\n  details: {\n    type: String,\n    optional: true\n  },\n  status: {\n    type: String,\n    optional: false,\n    defaultValue: \"unread\"\n  },\n  timeSent: {\n    type: Date,\n    optional: false,\n    autoValue() {\n      if (this.isInsert) {\n        return new Date();\n      } else if (this.isUpsert) {\n        return { $setOnInsert: new Date() };\n      }\n      this.unset();\n    }\n  }\n}, { check, tracker: Tracker });\n\nregisterSchema(\"Notification\", Notification);\n","import SimpleSchema from \"simpl-schema\";\nimport { check } from \"meteor/check\";\nimport { Tracker } from \"meteor/tracker\";\nimport { registerSchema } from \"@reactioncommerce/schemas\";\nimport { createdAtAutoValue } from \"./helpers\";\nimport { Cart, CartItem } from \"./cart\";\nimport { Workflow } from \"./workflow\";\n\n/**\n * @name Document\n * @memberof schemas\n * @type {SimpleSchema}\n * @property {String} docId required\n * @property {String} docType optional\n */\nexport const Document = new SimpleSchema({\n  docId: {\n    type: String\n  },\n  docType: {\n    type: String,\n    optional: true\n  }\n}, { check, tracker: Tracker });\n\nregisterSchema(\"Document\", Document);\n\n/**\n * @name History\n * @memberof schemas\n * @type {SimpleSchema}\n * @property {String} event required\n * @property {String} value required\n * @property {String} userId required\n * @property {String} updatedAt required\n */\nexport const History = new SimpleSchema({\n  event: {\n    type: String\n  },\n  value: {\n    type: String\n  },\n  userId: {\n    type: String\n  },\n  updatedAt: {\n    type: Date\n  }\n}, { check, tracker: Tracker });\n\nregisterSchema(\"History\", History);\n\n/**\n * @name ExportHistory\n * @memberof schemas\n * @type {SimpleSchema}\n * @property {String} required Whether the export attempt succeeded or failed\n * @property {Date} required Date the export was attempted\n * @property {String} required Name of the export method (e.g. CSV, Shopify)\n * @property {String} optional The identifier for this order on the remote system\n */\nexport const ExportHistory = new SimpleSchema({\n  status: {\n    type: String,\n    allowedValues: [\"success\", \"failure\"]\n  },\n  dateAttempted: {\n    type: Date\n  },\n  exportMethod: {\n    type: String\n  },\n  destinationIdentifier: {\n    type: String,\n    optional: true\n  },\n  shopId: {\n    type: String\n  }\n});\n\nregisterSchema(\"ExportHistory\", ExportHistory);\n\n/**\n * @name Notes\n * @memberof schemas\n * @type {SimpleSchema}\n * @property {String} content required\n * @property {String} userId required\n * @property {Date} updatedAt required\n */\nexport const Notes = new SimpleSchema({\n  content: {\n    type: String\n  },\n  userId: {\n    type: String\n  },\n  updatedAt: {\n    type: Date\n  }\n}, { check, tracker: Tracker });\n\nregisterSchema(\"Notes\", Notes);\n\n/**\n * @name OrderItem\n * @memberof schemas\n * @summary CartItem + some additional properties\n * @type {SimpleSchema}\n * @property {String} additionalField optional\n * @property {Workflow} workflow optional\n * @property {History[]} history optional\n * @property {Document[]} documents optional\n*/\nexport const OrderItem = new SimpleSchema({\n  \"additionalField\": {\n    type: String,\n    optional: true\n  },\n  \"workflow\": {\n    type: Workflow,\n    optional: true,\n    defaultValue: {}\n  },\n  \"history\": {\n    type: Array,\n    optional: true\n  },\n  \"history.$\": {\n    type: History\n  },\n  \"documents\": {\n    type: Array,\n    optional: true\n  },\n  \"documents.$\": {\n    type: Document\n  }\n}, { check, tracker: Tracker });\n\nregisterSchema(\"OrderItem\", OrderItem);\n\n/**\n * @name OrderTransaction Schema\n * @memberof schemas\n * @summary Order transactions tie Shipping, Payment, and Inventory transactions\n * @type {SimpleSchema}\n * @property {String} itemId optional\n * @property {String} paymentId optional\n * @property {String} shipmentId optional\n * @property {String} inventoryId optional\n * @property {Date} createdAt required\n */\nexport const OrderTransaction = new SimpleSchema({\n  itemId: {\n    type: String,\n    optional: true\n  },\n  paymentId: {\n    type: String,\n    optional: true\n  },\n  shipmentId: {\n    type: String,\n    optional: true\n  },\n  inventoryId: {\n    type: String,\n    optional: true\n  },\n  createdAt: {\n    type: Date,\n    autoValue: createdAtAutoValue\n  }\n}, { check, tracker: Tracker });\n\nregisterSchema(\"OrderTransaction\", OrderTransaction);\n\n/**\n * @name Order Schema\n * @memberof schemas\n * @type {SimpleSchema}\n * @summary Order ties a User to a Cart and an array of History, Documents, Notes, Items and OrderTransactions.\n * @property {String} userId required\n * @property {String} cartId optional\n * @property {History[]} history optional\n * @property {Document[]} documents optional\n * @property {Notes[]} notes optional\n * @property {OrderItem[]} items optional\n * @property {OrderTransaction[]} transactions optional\n */\nexport const Order = new SimpleSchema({\n  \"userId\": {\n    type: String,\n    unique: false\n  },\n  \"cartId\": {\n    type: String,\n    optional: true\n  },\n  \"history\": {\n    type: Array,\n    optional: true\n  },\n  \"history.$\": {\n    type: History\n  },\n  \"documents\": {\n    type: Array,\n    optional: true\n  },\n  \"documents.$\": {\n    type: Document\n  },\n  \"notes\": {\n    type: Array,\n    optional: true\n  },\n  \"notes.$\": Notes,\n  \"taxCalculationFailed\": {\n    type: Boolean,\n    optional: true,\n    defaultValue: false\n  },\n  \"bypassAddressValidation\": {\n    type: Boolean,\n    optional: true,\n    defaultValue: false\n  },\n  \"items\": {\n    type: Array,\n    optional: true\n  },\n  \"items.$\": CartItem.clone().extend(OrderItem),\n  \"transactions\": {\n    type: Array,\n    optional: true\n  },\n  \"transactions.$\": OrderTransaction,\n  \"exportHistory\": {\n    type: Array,\n    optional: true\n  },\n  \"exportHistory.$\": ExportHistory\n}, { check, tracker: Tracker });\n\nregisterSchema(\"Order\", Order);\n\nexport const OrderDocument = Cart.clone().extend(Order).extend(OrderItem);\nregisterSchema(\"OrderDocument\", OrderDocument);\n","import SimpleSchema from \"simpl-schema\";\nimport { check } from \"meteor/check\";\nimport { Tracker } from \"meteor/tracker\";\nimport { registerSchema } from \"@reactioncommerce/schemas\";\nimport { createdAtAutoValue, schemaIdAutoValue } from \"./helpers\";\nimport { Address } from \"./address\";\nimport { Workflow } from \"./workflow\";\n\n/**\n * @name PaymentItem\n * @summary Schema for items we're inserting into our Payments\n * To keep track of what items were paid for with a given paymentMethod\n * @type {SimpleSchema}\n * @memberof schemas\n * @property {String} _id optional, Shipment Line Item\n * @property {String} productId required\n * @property {String} shopId optional, Shipment Item ShopId\n * @property {Number} quantity required\n * @property {String} variantId required\n */\nexport const PaymentItem = new SimpleSchema({\n  _id: {\n    type: String,\n    label: \"Shipment Line Item\",\n    optional: true,\n    autoValue: schemaIdAutoValue\n  },\n  productId: {\n    type: String,\n    index: 1\n  },\n  shopId: {\n    type: String,\n    index: 1,\n    label: \"Shipment Item ShopId\",\n    optional: true\n  },\n  quantity: {\n    label: \"Quantity\",\n    type: SimpleSchema.Integer,\n    min: 0\n  },\n  variantId: {\n    type: String\n  }\n}, { check, tracker: Tracker });\n\nregisterSchema(\"PaymentItem\", PaymentItem);\n\n/**\n * @name PaymentMethod\n * @type {SimpleSchema}\n * @memberof schemas\n * @property {String} processor required\n * @property {String} paymentPackageId required\n * @property {String} paymentSettingsKey required\n * @property {String} storedCard optional\n * @property {String} method, allowed values: `\"credit\"`, `\"debit\"`, `\"shipping-credit\"`\n * @property {String} transactionId required\n * @property {Object} metadata optional, blackbox\n * @property {Workflow} workflow optional\n * @property {String} status required\n * @property {String} mode, allowed values: `\"authorize\"`, `\"capture\"`, `\"refund\"`, `\"cancel\"`, `\"void\"`\n * @property {String} riskLevel, allowed values: `\"normal\"`, `\"elevated\"`, `\"high\"`\n * @property {Date} createdAt required\n * @property {Date} updatedAt optional\n * @property {String} authorization optional\n * @property {Number} amount optional\n * @property {String} currency required\n * @property {Object[]} transactions optional, blackbox\n * @property {PaymentItem[]} items optional\n * @property {String} shopId optional\n */\nexport const PaymentMethod = new SimpleSchema({\n  \"processor\": {\n    type: String\n  },\n  \"paymentPackageId\": {\n    type: String\n  },\n  \"paymentSettingsKey\": {\n    type: String\n  },\n  \"storedCard\": {\n    type: String,\n    optional: true\n  },\n  \"method\": {\n    type: String,\n    allowedValues: [\"credit\", \"debit\", \"shipping-credit\"],\n    optional: true\n  },\n  \"transactionId\": {\n    type: String\n  },\n  \"metadata\": {\n    type: Object,\n    optional: true,\n    blackbox: true\n  },\n  \"workflow\": {\n    type: Workflow,\n    optional: true,\n    defaultValue: {}\n  },\n  \"status\": {\n    type: String\n  },\n  \"mode\": {\n    type: String,\n    allowedValues: [\"authorize\", \"capture\", \"refund\", \"cancel\", \"void\"]\n  },\n  \"riskLevel\": {\n    type: String,\n    allowedValues: [\"normal\", \"elevated\", \"high\"],\n    optional: true\n  },\n  \"createdAt\": {\n    type: Date,\n    autoValue: createdAtAutoValue\n  },\n  \"updatedAt\": {\n    type: Date,\n    optional: true\n  },\n  \"authorization\": {\n    type: String,\n    optional: true\n  },\n  \"amount\": {\n    type: Number,\n    optional: true\n  },\n  \"currency\": {\n    type: String,\n    optional: true\n  },\n  \"transactions\": {\n    type: Array,\n    optional: true\n  },\n  \"transactions.$\": {\n    type: Object,\n    blackbox: true\n  },\n  \"items\": {\n    type: Array,\n    optional: true\n  },\n  \"items.$\": {\n    type: PaymentItem\n  },\n  \"shopId\": {\n    type: String,\n    optional: true\n  }\n}, { check, tracker: Tracker });\n\nregisterSchema(\"PaymentMethod\", PaymentMethod);\n\n// When checking paymentMethod passed as a method arg, props like createdAt\n// should be optional\nexport const PaymentMethodArgument = PaymentMethod.clone().extend({\n  createdAt: {\n    type: Date,\n    optional: true,\n    autoValue: null\n  }\n});\n\n/**\n * @name Invoice\n * @type {SimpleSchema}\n * @memberof schemas\n * @property {String} transaction optional\n * @property {Number} shipping optional\n * @property {Number} taxes optional\n * @property {Number} subtotal required\n * @property {Number} discounts optional\n * @property {Number} total required\n */\nexport const Invoice = new SimpleSchema({\n  transaction: {\n    type: String,\n    optional: true\n  },\n  shipping: {\n    type: Number,\n    optional: true\n  },\n  taxes: {\n    type: Number,\n    optional: true\n  },\n  subtotal: {\n    type: Number\n  },\n  discounts: {\n    type: Number,\n    optional: true\n  },\n  total: {\n    type: Number\n  }\n}, { check, tracker: Tracker });\n\nregisterSchema(\"Invoice\", Invoice);\n\n/**\n * @name CurrencyExchangeRate\n * @type {SimpleSchema}\n * @memberof schemas\n * @property {String} userCurrency, default value: `\"USD\"`\n * @property {Number} exchangeRate optional\n */\nexport const CurrencyExchangeRate = new SimpleSchema({\n  userCurrency: {\n    type: String,\n    optional: true,\n    defaultValue: \"USD\"\n  },\n  exchangeRate: {\n    type: Number,\n    optional: true\n  }\n}, { check, tracker: Tracker });\n\nregisterSchema(\"CurrencyExchangeRate\", CurrencyExchangeRate);\n\n/**\n * @name Payment\n * @type {SimpleSchema}\n * @memberof schemas\n * @property {String} _id required, Payment Id\n * @property {Address} address optional\n * @property {PaymentMethod} paymentMethod optional\n * @property {Invoice} invoice optional\n * @property {CurrencyExchangeRate} currency optional\n * @property {String} shopId optional\n */\nexport const Payment = new SimpleSchema({\n  _id: {\n    type: String,\n    label: \"Payment Id\",\n    autoValue: schemaIdAutoValue\n  },\n  address: {\n    type: Address,\n    optional: true\n  },\n  paymentMethod: {\n    type: PaymentMethod,\n    optional: true,\n    blackbox: true\n  },\n  invoice: {\n    type: Invoice,\n    optional: true\n  },\n  currency: {\n    type: CurrencyExchangeRate,\n    optional: true,\n    defaultValue: {}\n  },\n  shopId: {\n    type: String,\n    optional: true\n  }\n}, { check, tracker: Tracker });\n\nregisterSchema(\"Payment\", Payment);\n\n/**\n * @name Payment\n * @type {SimpleSchema}\n * @memberof schemas\n * @property {String} type required\n * @property {Number} amount required\n * @property {Number} created required\n * @property {String} currency required\n * @property {Object} raw optional, blackbox\n */\nexport const Refund = new SimpleSchema({\n  type: {\n    type: String\n  },\n  amount: {\n    type: Number\n  },\n  created: {\n    type: SimpleSchema.Integer\n  },\n  currency: {\n    type: String\n  },\n  raw: {\n    type: Object,\n    optional: true,\n    blackbox: true\n  }\n}, { check, tracker: Tracker });\n\nregisterSchema(\"Refund\", Refund);\n","import SimpleSchema from \"simpl-schema\";\nimport { check } from \"meteor/check\";\nimport { Meteor } from \"meteor/meteor\";\nimport { Random } from \"meteor/random\";\nimport { Tracker } from \"meteor/tracker\";\nimport { registerSchema } from \"@reactioncommerce/schemas\";\nimport { ReactionProduct, getSlug } from \"/lib/api\";\nimport { createdAtAutoValue, shopIdAutoValue, shopDefaultCountry, updatedAtAutoValue } from \"./helpers\";\nimport { Event } from \"./event\";\nimport { Metafield } from \"./metafield\";\nimport { ShippingParcel } from \"./shipping\";\nimport { Workflow } from \"./workflow\";\n\n/**\n * @name VariantMedia\n * @memberof schemas\n * @type {SimpleSchema}\n * @property {String} mediaId optional\n * @property {Number} priority optional\n * @property {Metafield[]} metafields optional\n * @property {Date} updatedAt optional\n * @property {Date} createdAt required\n */\nexport const VariantMedia = new SimpleSchema({\n  \"mediaId\": {\n    type: String,\n    optional: true\n  },\n  \"priority\": {\n    type: SimpleSchema.Integer,\n    optional: true\n  },\n  \"metafields\": {\n    type: Array,\n    optional: true\n  },\n  \"metafields.$\": {\n    type: Metafield\n  },\n  \"updatedAt\": {\n    type: Date,\n    optional: true\n  },\n  \"createdAt\": {\n    type: Date,\n    autoValue: createdAtAutoValue\n  }\n}, { check, tracker: Tracker });\n\nregisterSchema(\"VariantMedia\", VariantMedia);\n\n/**\n * @name ProductPosition\n * @memberof schemas\n * @type {SimpleSchema}\n * @property {String} tag optional\n * @property {Number} position optional\n * @property {Boolean} pinned optional\n * @property {Number} weight optional, default value: `0`\n * @property {Date} updatedAt required\n */\nexport const ProductPosition = new SimpleSchema({\n  tag: {\n    type: String,\n    optional: true\n  },\n  position: {\n    type: SimpleSchema.Integer,\n    optional: true\n  },\n  pinned: {\n    type: Boolean,\n    optional: true\n  },\n  weight: {\n    type: SimpleSchema.Integer,\n    optional: true,\n    defaultValue: 0,\n    min: 0,\n    max: 3\n  },\n  updatedAt: {\n    type: Date\n  }\n}, { check, tracker: Tracker });\n\nregisterSchema(\"ProductPosition\", ProductPosition);\n\n/**\n * @name ProductVariant\n * @memberof schemas\n * @type {SimpleSchema}\n * @property {String} _id required, Variant ID\n * @property {String[]} ancestors, default value: `[]`\n * @property {Number} index optional, Variant position number in list. Keep array index for moving variants in a list.\n * @property {Boolean} isVisible, default value: `false`\n * @property {Boolean} isDeleted, default value: `false`\n * @property {String} barcode optional\n * @property {Number} compareAtPrice optional, Compare at price\n * @property {String} fulfillmentService optional, Fullfillment service\n * @property {Number} weight, default value: `0`\n * @property {Number} length optional, default value: `0`\n * @property {Number} width optional, default value: `0`\n * @property {Number} height optional, default value: `0`\n * @property {Boolean} inventoryManagement, default value: `true`\n * @property {Boolean} inventoryPolicy, default value: `false`, If disabled, item can be sold even if it not in stock.\n * @property {Number} lowInventoryWarningThreshold, default value: `0`, Warn of low inventory at this number\n * @property {Number} inventoryQuantity, default value: `0`\n * @property {Number} minOrderQuantity optional\n * @property {Boolean} isLowQuantity optional, true when at least 1 variant is below `lowInventoryWarningThreshold`\n * @property {Boolean} isSoldOut optional, denormalized field, indicates when all variants `inventoryQuantity` is 0\n * @property {Number} price, default value: `0.00`\n * @property {String} shopId required, Variant ShopId\n * @property {String} sku optional\n * @property {String} type, default value: `\"variant\"`\n * @property {Boolean} taxable, default value: `true`\n * @property {String} taxCode, default value: `\"0000\"`\n * @property {String} taxDescription optional\n * @property {String} title, Label for customers, default value: `\"\"`\n * @property {String} optionTitle, Option internal name, default value: `\"Untitled option\"`\n * @property {Metafield[]} metafields optional\n * @property {Date} createdAt optional\n * @property {Date} updatedAt optional\n * @property {Event[]} eventLog optional, Variant Event Log\n * @property {Workflow} workflow optional\n * @property {String} originCountry optional\n */\nexport const ProductVariant = new SimpleSchema({\n  \"_id\": {\n    type: String,\n    label: \"Variant ID\"\n  },\n  \"ancestors\": {\n    type: Array,\n    defaultValue: []\n  },\n  \"ancestors.$\": {\n    type: String\n  },\n  \"index\": {\n    label: \"Variant position number in list\",\n    type: SimpleSchema.Integer,\n    optional: true\n  },\n  \"isVisible\": {\n    type: Boolean,\n    index: 1,\n    defaultValue: false\n  },\n  \"isDeleted\": {\n    type: Boolean,\n    index: 1,\n    defaultValue: false\n  },\n  \"barcode\": {\n    label: \"Barcode\",\n    type: String,\n    optional: true,\n    custom() {\n      if (Meteor.isClient) {\n        if (this.siblingField(\"type\").value === \"inventory\" && !this.value) {\n          return SimpleSchema.ErrorTypes.REQUIRED;\n        }\n      }\n    }\n  },\n  \"compareAtPrice\": {\n    label: \"Compare At Price\",\n    type: Number,\n    optional: true,\n    min: 0,\n    defaultValue: 0.00\n  },\n  \"weight\": {\n    label: \"Weight\",\n    type: Number,\n    min: 0,\n    optional: true,\n    defaultValue: 0,\n    custom() {\n      if (Meteor.isClient) {\n        if (!(this.siblingField(\"type\").value === \"inventory\" || this.value ||\n          this.value === 0)) {\n          return SimpleSchema.ErrorTypes.REQUIRED;\n        }\n      }\n    }\n  },\n  \"length\": {\n    label: \"Length\",\n    type: Number,\n    min: 0,\n    optional: true,\n    defaultValue: 0\n  },\n  \"width\": {\n    label: \"Width\",\n    type: Number,\n    min: 0,\n    optional: true,\n    defaultValue: 0\n  },\n  \"height\": {\n    label: \"Height\",\n    type: Number,\n    min: 0,\n    optional: true,\n    defaultValue: 0\n  },\n  \"inventoryManagement\": {\n    type: Boolean,\n    label: \"Inventory Tracking\",\n    optional: true,\n    defaultValue: true,\n    custom() {\n      if (Meteor.isClient) {\n        if (!(this.siblingField(\"type\").value === \"inventory\" || this.value ||\n          this.value === false)) {\n          return SimpleSchema.ErrorTypes.REQUIRED;\n        }\n      }\n    }\n  },\n  \"inventoryPolicy\": {\n    type: Boolean,\n    label: \"Deny when out of stock\",\n    optional: true,\n    defaultValue: false,\n    custom() {\n      if (Meteor.isClient) {\n        if (!(this.siblingField(\"type\").value === \"inventory\" || this.value ||\n          this.value === false)) {\n          return SimpleSchema.ErrorTypes.REQUIRED;\n        }\n      }\n    }\n  },\n  \"lowInventoryWarningThreshold\": {\n    type: SimpleSchema.Integer,\n    label: \"Warn at\",\n    min: 0,\n    optional: true,\n    defaultValue: 0\n  },\n  \"inventoryQuantity\": {\n    type: SimpleSchema.Integer,\n    label: \"Quantity\",\n    optional: true,\n    defaultValue: 0,\n    custom() {\n      if (Meteor.isClient) {\n        if (this.siblingField(\"type\").value !== \"inventory\") {\n          if (ReactionProduct.checkChildVariants(this.docId) === 0 && !this.value) {\n            return SimpleSchema.ErrorTypes.REQUIRED;\n          }\n        }\n      }\n    }\n  },\n  \"minOrderQuantity\": {\n    label: \"Minimum order quantity\",\n    type: SimpleSchema.Integer,\n    optional: true\n  },\n  \"isLowQuantity\": {\n    label: \"Indicates that the product quantity is too low\",\n    type: Boolean,\n    optional: true\n  },\n  \"isSoldOut\": {\n    label: \"Indicates when the product quantity is zero\",\n    type: Boolean,\n    optional: true\n  },\n  \"price\": {\n    label: \"Price\",\n    type: Number,\n    defaultValue: 0.00,\n    min: 0,\n    optional: true\n  },\n  \"shopId\": {\n    type: String,\n    autoValue: shopIdAutoValue,\n    index: 1,\n    label: \"Variant ShopId\"\n  },\n  \"sku\": {\n    label: \"SKU\",\n    type: String,\n    optional: true\n  },\n  \"type\": {\n    label: \"Type\",\n    type: String,\n    defaultValue: \"variant\"\n  },\n  \"taxable\": {\n    label: \"Taxable\",\n    type: Boolean,\n    defaultValue: true,\n    optional: true\n  },\n  \"taxCode\": {\n    label: \"Tax Code\",\n    type: String,\n    defaultValue: \"0000\",\n    optional: true\n  },\n  \"taxDescription\": {\n    type: String,\n    optional: true,\n    label: \"Tax Description\"\n  },\n  \"title\": {\n    label: \"Label\",\n    type: String,\n    defaultValue: \"\"\n  },\n  \"optionTitle\": {\n    label: \"Option\",\n    type: String,\n    optional: true,\n    defaultValue: \"Untitled Option\"\n  },\n  \"metafields\": {\n    type: Array,\n    optional: true\n  },\n  \"metafields.$\": {\n    type: Metafield\n  },\n  \"createdAt\": {\n    label: \"Created at\",\n    type: Date,\n    optional: true\n  },\n  \"updatedAt\": {\n    label: \"Updated at\",\n    type: Date,\n    optional: true\n  },\n  // TODO: REVIEW - Does this need to exist? Should we use workflow instead?\n  // Should it be called 'history' or something else instead?\n  // Should this go into the Logger instead? Is the logger robust enough for this?\n  \"eventLog\": {\n    label: \"Variant Event Log\",\n    type: Array,\n    optional: true\n  },\n  \"eventLog.$\": {\n    type: Event\n  },\n  \"workflow\": {\n    type: Workflow,\n    optional: true,\n    defaultValue: {}\n  },\n  \"originCountry\": {\n    type: String,\n    optional: true,\n    autoValue: shopDefaultCountry\n  }\n}, { check, tracker: Tracker });\n\nregisterSchema(\"ProductVariant\", ProductVariant);\n\n/**\n * @name PriceRange\n * @type {SimpleSchema}\n * @memberof schemas\n * @property {String} range, default value: `\"0.00\"`\n * @property {Number} min optional, default value: `0`\n * @property {Number} max optional, default value: `0`\n */\nexport const PriceRange = new SimpleSchema({\n  range: {\n    type: String,\n    defaultValue: \"0.00\"\n  },\n  min: {\n    type: Number,\n    defaultValue: 0,\n    optional: true\n  },\n  max: {\n    type: Number,\n    defaultValue: 0,\n    optional: true\n  }\n}, { check, tracker: Tracker });\n\nregisterSchema(\"PriceRange\", PriceRange);\n\n/**\n * @name Product\n * @type {SimpleSchema}\n * @memberof schemas\n * @property {String} _id Product ID\n * @property {String[]} ancestors default value: `[]`\n * @property {String} shopId Product ShopID\n * @property {String} title Product Title\n * @property {String} pageTitle optional\n * @property {String} description optional\n * @property {String} productType optional\n * @property {String} originCountry optional\n * @property {String} type default value: `\"simple\"`\n * @property {String} vendor optional\n * @property {Metafield[]} metafields optional\n * @property {Object} positions ProductPosition\n * @property {PriceRange} price denormalized, object with range string, min and max\n * @property {Boolean} isLowQuantity denormalized, true when at least 1 variant is below `lowInventoryWarningThreshold`\n * @property {Boolean} isSoldOut denormalized, Indicates when all variants `inventoryQuantity` is zero\n * @property {Boolean} isBackorder denormalized, `true` if product not in stock, but customers anyway could order it\n * @property {Boolean} requiresShipping default value: `true`, Require a shipping address\n * @property {ShippingParcel} parcel optional\n * @property {String[]} hashtags optional\n * @property {String} twitterMsg optional\n * @property {String} facebookMsg optional\n * @property {String} googleplusMsg optional\n * @property {String} pinterestMsg optional\n * @property {String} metaDescription optional\n * @property {String} handle optional, slug\n * @property {Boolean} isDeleted, default value: `false`\n * @property {Boolean} isVisible, default value: `false`\n * @property {String} template, default value: `\"productDetailSimple\"`\n * @property {Date} createdAt required\n * @property {Date} updatedAt optional\n * @property {Date} publishedAt optional\n * @property {String} publishedScope optional\n * @property {Workflow} workflow optional\n */\nexport const Product = new SimpleSchema({\n  \"_id\": {\n    type: String,\n    label: \"Product Id\"\n  },\n  \"ancestors\": {\n    type: Array,\n    defaultValue: []\n  },\n  \"ancestors.$\": {\n    type: String\n  },\n  \"shopId\": {\n    type: String,\n    autoValue: shopIdAutoValue,\n    index: 1,\n    label: \"Product ShopId\"\n  },\n  \"title\": {\n    type: String,\n    defaultValue: \"\",\n    label: \"Product Title\"\n  },\n  \"pageTitle\": {\n    type: String,\n    optional: true\n  },\n  \"description\": {\n    type: String,\n    optional: true\n  },\n  \"productType\": {\n    type: String,\n    optional: true\n  },\n  \"originCountry\": {\n    type: String,\n    optional: true,\n    autoValue: shopDefaultCountry\n  },\n  \"type\": {\n    label: \"Type\",\n    type: String,\n    defaultValue: \"simple\"\n  },\n  \"vendor\": {\n    type: String,\n    optional: true\n  },\n  \"metafields\": {\n    type: Array,\n    optional: true\n  },\n  \"metafields.$\": {\n    type: Metafield\n  },\n  \"positions\": {\n    type: Object, // ProductPosition\n    blackbox: true,\n    optional: true\n  },\n  \"price\": {\n    label: \"Price\",\n    type: PriceRange\n  },\n  \"isLowQuantity\": {\n    label: \"Indicates that the product quantity is too low\",\n    type: Boolean,\n    optional: true\n  },\n  \"isSoldOut\": {\n    label: \"Indicates when the product quantity is zero\",\n    type: Boolean,\n    optional: true\n  },\n  \"isBackorder\": {\n    label: \"Indicates when the seller has allowed the sale of product which\" +\n    \" is not in stock\",\n    type: Boolean,\n    optional: true\n  },\n  \"requiresShipping\": {\n    label: \"Require a shipping address\",\n    type: Boolean,\n    defaultValue: true,\n    optional: true\n  },\n  \"parcel\": {\n    type: ShippingParcel,\n    optional: true\n  },\n  \"hashtags\": {\n    type: Array,\n    optional: true,\n    index: 1\n  },\n  \"hashtags.$\": {\n    type: String\n  },\n  \"twitterMsg\": {\n    type: String,\n    optional: true,\n    max: 140\n  },\n  \"facebookMsg\": {\n    type: String,\n    optional: true,\n    max: 255\n  },\n  \"googleplusMsg\": {\n    type: String,\n    optional: true,\n    max: 255\n  },\n  \"pinterestMsg\": {\n    type: String,\n    optional: true,\n    max: 255\n  },\n  \"metaDescription\": {\n    type: String,\n    optional: true\n  },\n  \"handle\": {\n    type: String,\n    optional: true,\n    index: 1,\n    autoValue() {\n      let slug = getSlug(this.value);\n\n      if (!slug && this.siblingField(\"title\").value) {\n        slug = getSlug(this.siblingField(\"title\").value);\n      } else if (!slug) {\n        slug = this.siblingField(\"_id\").value || Random.id();\n      }\n      if (this.isInsert) {\n        return slug;\n      } else if (this.isUpsert) {\n        return {\n          $setOnInsert: slug\n        };\n      }\n    }\n  },\n  \"changedHandleWas\": {\n    type: String,\n    optional: true\n  },\n  \"isDeleted\": {\n    type: Boolean,\n    index: 1,\n    defaultValue: false\n  },\n  \"isVisible\": {\n    type: Boolean,\n    index: 1,\n    defaultValue: false\n  },\n  \"template\": {\n    label: \"Template\",\n    type: String,\n    defaultValue: \"productDetailSimple\"\n  },\n  \"createdAt\": {\n    type: Date,\n    autoValue: createdAtAutoValue\n  },\n  \"updatedAt\": {\n    type: Date,\n    autoValue: updatedAtAutoValue,\n    optional: true\n  },\n  \"publishedAt\": {\n    type: Date,\n    optional: true\n  },\n  \"publishedScope\": {\n    type: String,\n    optional: true\n  },\n  \"workflow\": {\n    type: Workflow,\n    optional: true,\n    defaultValue: {}\n  }\n}, { check, tracker: Tracker });\n\nregisterSchema(\"Product\", Product);\n","import SimpleSchema from \"simpl-schema\";\nimport { check } from \"meteor/check\";\nimport { Tracker } from \"meteor/tracker\";\nimport { registerSchema } from \"@reactioncommerce/schemas\";\nimport { Layout } from \"./layouts\";\n\n/**\n * @name Permissions\n * @memberof schemas\n * @summary The Permissions schema is part of the Registry. The Registry Schema allows package settings to be defined.\n * For more, read the in-depth {@link https://blog.reactioncommerce.com/an-intro-to-architecture-the-registry/ Intro to Architecture: The Registry}.\n * @type {SimpleSchema}\n * @property {String} permission\n * @property {String} label\n */\nexport const Permissions = new SimpleSchema({\n  permission: {\n    type: String\n  },\n  label: {\n    type: String\n  }\n}, { check, tracker: Tracker });\n\nregisterSchema(\"Permissions\", Permissions);\n\n/**\n * @name Registry\n * @memberof schemas\n * @type {SimpleSchema}\n * @summary The Registry Schema allows package settings to be defined. For more, read the in-depth {@link https://blog.reactioncommerce.com/an-intro-to-architecture-the-registry/ Intro to Architecture: The Registry}.\n * @property {String[]} provides Legacy `provides` apps use a String rather than an array. These are transformed in loadPackages.\n * @property {String} route optional\n * @property {String} name optional, Registry name must be unique. Namespace your plugin (e.g. `yourorg-plugin-name`) to avoid conflicts.\n * @property {String} template optional, Assign to a Blaze template\n * @property {String} workflow optional, A layout for a template in the package\n * @property {String} layout optional, Force the app to render a specific layout\n * @property {String[]} triggersEnter optional, Trigger on Enter\n * @property {String[]} triggersExit optional, Trigger on Exit\n * @property {Object} options optional, Routing Options\n * @property {String} description optional, deprecated\n * @property {String} icon optional, A set of CSS classes, often Font Awesome classes, used to define the package in the sidebar.\n * @property {String} label optional, Human-readable name for a Registry entry\n * @property {String} container optional, Used to group plugins\n * @property {Number} priority optional, Plugin load order. Lower values loaded first.\n * @property {Boolean} enabled optional, Enable or not\n * @property {Permissions[]} permissions optional, Define a new user permission\n * @property {String[]} audience optional, Define what permissions are required to view a step in a workflow\n * @property {Object} meta optional, Set `dashboardSize` for the `actionView`\n * @property {String[]} showForShopTypes optional, Shop Types this plugin should show for\n * @property {String[]} hideForShopTypes optional, Shop Types this plugin should not show for\n */\nexport const Registry = new SimpleSchema({\n  // TODO: This should _not_ be optional in the future, but we need to organize our packages better\n  \"provides\": {\n    // Legacy `provides` apps use a String rather than an array. These are transformed in loadPackages\n    type: Array,\n    index: true,\n    optional: true\n  },\n  \"provides.$\": {\n    type: String\n  },\n  \"route\": {\n    type: String,\n    optional: true,\n    index: true\n  },\n  // TODO: This should _not_ be optional in the future, but we need to organize our packages better\n  \"name\": {\n    type: String,\n    label: \"Registry Name\",\n    index: true,\n    optional: true\n  },\n  \"template\": {\n    type: String,\n    optional: true\n  },\n  \"workflow\": {\n    type: String,\n    optional: true\n  },\n  \"layout\": {\n    type: String,\n    optional: true\n  },\n  \"triggersEnter\": {\n    type: Array,\n    label: \"Trigger on Entry\",\n    optional: true\n  },\n  \"triggersEnter.$\": {\n    type: String\n  },\n  \"triggersExit\": {\n    type: Array,\n    label: \"Trigger on Exit\",\n    optional: true\n  },\n  \"triggersExit.$\": {\n    type: String\n  },\n  \"options\": {\n    label: \"Routing Options\",\n    type: Object,\n    optional: true,\n    defaultValue: {}\n  },\n  \"description\": {\n    type: String,\n    optional: true\n  },\n  \"icon\": {\n    type: String,\n    optional: true\n  },\n  \"label\": {\n    type: String,\n    optional: true\n  },\n  \"container\": {\n    type: String,\n    optional: true\n  },\n  \"priority\": {\n    type: SimpleSchema.Integer,\n    optional: true\n  },\n  \"enabled\": {\n    type: Boolean,\n    optional: true\n  },\n  \"permissions\": {\n    type: Array,\n    optional: true\n  },\n  \"permissions.$\": {\n    type: Permissions\n  },\n  \"audience\": {\n    type: Array,\n    label: \"Audience\",\n    optional: true\n  },\n  \"audience.$\": {\n    type: String\n  },\n  \"meta\": {\n    label: \"Meta\",\n    type: Object,\n    optional: true,\n    blackbox: true\n  },\n  \"showForShopTypes\": {\n    label: \"Shop Types this plugin should show for\",\n    type: Array,\n    optional: true\n  },\n  \"showForShopTypes.$\": {\n    type: String\n  },\n  \"hideForShopTypes\": {\n    type: Array,\n    label: \"Shop Types this plugin should not show for\",\n    optional: true\n  },\n  \"hideForShopTypes.$\": {\n    type: String\n  }\n}, { check, tracker: Tracker });\n\nregisterSchema(\"Registry\", Registry);\n\n/**\n * @name PackageConfig\n * @memberof schemas\n * @type {SimpleSchema}\n * @summary The PackageConfig is part of the configuration settings required for packages in the Registry.\n * The Registry Schema allows package settings to be defined. For more, read the in-depth {@link https://blog.reactioncommerce.com/an-intro-to-architecture-the-registry/ Intro to Architecture: The Registry}.\n * @property {String} shopId Autovalue removed {@link https://github.com/reactioncommerce/reaction/issues/646#issuecomment-169351842 here}\n * @property {String} name required\n * @property {Boolean} enabled defalut value: true\n * @property {String} icon optional\n * @property {Object} settings optional\n * @property {Registry[]} registry optional\n * @property {Layout[]} layout optional\n */\nexport const PackageConfig = new SimpleSchema({\n  \"shopId\": {\n    type: String,\n    index: 1,\n    // see: https://github.com/reactioncommerce/reaction/issues/646#issuecomment-169351842\n    // autoValue: shopIdAutoValue,\n    label: \"PackageConfig ShopId\",\n    optional: true\n  },\n  \"name\": {\n    type: String,\n    index: 1\n  },\n  \"enabled\": {\n    type: Boolean,\n    defaultValue: true\n  },\n  \"icon\": {\n    type: String,\n    optional: true\n  },\n  \"settings\": {\n    type: Object,\n    optional: true,\n    blackbox: true,\n    defaultValue: {}\n  },\n  \"registry\": {\n    type: Array,\n    optional: true\n  },\n  \"registry.$\": {\n    type: Registry\n  },\n  \"layout\": {\n    type: Array,\n    optional: true\n  },\n  \"layout.$\": {\n    type: Layout\n  }\n}, { check, tracker: Tracker });\n\nregisterSchema(\"PackageConfig\", PackageConfig);\n\n/**\n * @name CorePackageConfig\n * @memberof schemas\n * @type {SimpleSchema}\n * @summary The Core Package Config is part of the Registry.\n * The Registry Schema allows package settings to be defined. For more, read the in-depth {@link https://blog.reactioncommerce.com/an-intro-to-architecture-the-registry/ Intro to Architecture: The Registry}.\n * @extends {PackageConfig}\n * @property {Object} settings.mail optional, Mail settings\n * @property {String} settings.mail.user Mail user\n * @property {String} settings.mail.password Mail password\n * @property {String} settings.mail.host Mail host\n * @property {String} settings.mail.port Mail port\n * @property {String} settings.openexchangerates.appId OpenExchangeRates Id\n * @property {String} settings.openexchangerates.refreshPeriod default value: `\"every 1 hour\"`\n * @property {String} settings.google.clientId default value: `null`\n * @property {String} settings.google.apiKey default value: `null`\n * @property {Object} settings.public optional Settings in `public` are published to the client.\n * @property {Boolean} settings.public.allowGuestCheckout allows guest checkout\n * @property {String} settings.cart.cleanupDurationDays default value: `\"older than 3 days\"`\n */\nexport const CorePackageConfig = PackageConfig.clone().extend({\n  // Remove blackbox: true from settings obj\n  \"settings\": {\n    type: Object,\n    optional: true,\n    blackbox: false,\n    defaultValue: {}\n  },\n  \"settings.mail\": {\n    type: Object,\n    optional: true,\n    label: \"Mail Settings\"\n  },\n  \"settings.mail.user\": {\n    type: String,\n    label: \"Username\"\n  },\n  \"settings.mail.password\": {\n    type: String,\n    label: \"Password\"\n  },\n  \"settings.mail.host\": {\n    type: String,\n    label: \"Host\"\n  },\n  \"settings.mail.port\": {\n    type: String,\n    label: \"Port\"\n  },\n  \"settings.openexchangerates\": {\n    type: Object,\n    optional: true\n  },\n  \"settings.openexchangerates.appId\": {\n    type: String,\n    label: \"Open Exchange Rates App Id\"\n  },\n  \"settings.openexchangerates.refreshPeriod\": {\n    type: String,\n    label: \"Open Exchange Rates refresh period\",\n    defaultValue: \"every 1 hour\"\n  },\n  \"settings.google\": {\n    type: Object,\n    optional: true\n  },\n  \"settings.google.clientId\": {\n    type: String,\n    label: \"Google Client Id\"\n  },\n  \"settings.google.apiKey\": {\n    type: String,\n    label: \"Google Api Key\"\n  },\n  \"settings.public\": {\n    type: Object,\n    optional: true,\n    defaultValue: {}\n  },\n  \"settings.public.allowGuestCheckout\": {\n    type: Boolean,\n    label: \"Allow Guest Checkout\",\n    defaultValue: true\n  },\n  \"settings.cart\": {\n    type: Object,\n    defaultValue: {}\n  },\n  \"settings.cart.cleanupDurationDays\": {\n    type: String,\n    label: \"Cleanup Schedule\",\n    defaultValue: \"older than 3 days\"\n  }\n});\n\nregisterSchema(\"CorePackageConfig\", CorePackageConfig);\n","import SimpleSchema from \"simpl-schema\";\nimport { check } from \"meteor/check\";\nimport { Tracker } from \"meteor/tracker\";\nimport { registerSchema } from \"@reactioncommerce/schemas\";\nimport { createdAtAutoValue, updatedAtAutoValue } from \"./helpers\";\nimport { Workflow } from \"./workflow\";\n\n/**\n * @name Revisions\n * @memberof schemas\n * @type {SimpleSchema}\n * @property {String} _id Revision Id\n * @property {Workflow} workflow required\n * @property {String} documentId Reference Document Id\n * @property {String} documentType Document Type, default value: `product`, allowed values: `product`, `image`, `tag`\n * @property {String} parentDocument optional\n * @property {\"object\"} documentData blackbox object\n * @property {String} changeType optional, allowed values: `insert`, `update`, `remove`\n * @property {Object[]} diff optional, blackbox\n * @property {Date} createdAt required\n * @property {Date} updatedAt optional\n * @property {Date} publishAt optional\n */\nexport const Revisions = new SimpleSchema({\n  \"_id\": {\n    type: String,\n    label: \"Revision Id\"\n  },\n  \"workflow\": {\n    type: Workflow,\n    optional: false,\n    defaultValue: {}\n  },\n  \"documentId\": {\n    type: String,\n    label: \"Reference Document Id\"\n  },\n  \"documentType\": {\n    type: String,\n    label: \"Document Type\",\n    defaultValue: \"product\",\n    allowedValues: [\"product\", \"image\", \"tag\"]\n  },\n  \"parentDocument\": {\n    type: String,\n    optional: true\n  },\n  \"documentData\": {\n    type: \"object\",\n    blackbox: true\n  },\n  \"changeType\": {\n    type: String,\n    optional: true,\n    allowedValues: [\"insert\", \"update\", \"remove\"]\n  },\n  \"diff\": {\n    type: Array,\n    optional: true\n  },\n  \"diff.$\": {\n    type: Object,\n    blackbox: true\n  },\n  \"createdAt\": {\n    type: Date,\n    autoValue: createdAtAutoValue\n  },\n  \"updatedAt\": {\n    type: Date,\n    autoValue: updatedAtAutoValue,\n    optional: true\n  },\n  \"publishAt\": {\n    type: Date,\n    optional: true\n  }\n}, { check, tracker: Tracker });\n\nregisterSchema(\"Revisions\", Revisions);\n","import SimpleSchema from \"simpl-schema\";\nimport { check } from \"meteor/check\";\nimport { Tracker } from \"meteor/tracker\";\nimport { registerSchema } from \"@reactioncommerce/schemas\";\nimport { shopIdAutoValue, schemaIdAutoValue } from \"./helpers\";\nimport { Address } from \"./address\";\nimport { Invoice } from \"./payments\";\nimport { PackageConfig } from \"./registry\";\nimport { Workflow } from \"./workflow\";\n\n/**\n * @name ShippoShippingMethod\n * @memberof schemas\n * @type {SimpleSchema}\n * @todo Move Shippo-related schema to Shippo module\n * @summary This will only exist in ShippingMethods Inside Cart/Order.\n * This does not exist in DB Shipping Collection as Shippo Methods are Dynamic.\n * @property {String} serviceLevelToken optional\n * @property {String} rateId optional\n */\nexport const ShippoShippingMethod = new SimpleSchema({\n  serviceLevelToken: {\n    type: String,\n    optional: true\n  },\n  rateId: {\n    type: String,\n    optional: true\n  }\n}, { check, tracker: Tracker });\n\nregisterSchema(\"ShippoShippingMethod\", ShippoShippingMethod);\n\n/**\n * @name ShippingMethod\n * @memberof schemas\n * @type {SimpleSchema}\n * @property {String} _id Shipment method Id\n * @property {String} name Method name\n * @property {String} label Public label\n * @property {String} group Group, allowed values: `Ground`, `Priority`, `One Day`, `Free`\n * @property {Number} cost optional\n * @property {Number} handling optional, default value: `0`\n * @property {Number} rate Rate\n * @property {Boolean} enabled default value: `false`\n * @property {Array} validRanges optional, Matching cart ranges\n * @property {Object} validRanges.$ optional\n * @property {Number} validRanges.begin optional\n * @property {Number} validRanges.end optional\n * @property {Array} validLocales optional\n * @property {Object} validLocales.$ optional\n * @property {String} validLocales.$.origination optional\n * @property {String} validLocales.$.destination optional\n * @property {Number} validLocales.$.deliveryBegin optional\n * @property {Number} validLocales.$.deliveryEnd optional\n * @property {String} carrier optional\n * @property {ShippoShippingMethod} settings optional\n */\nexport const ShippingMethod = new SimpleSchema({\n  \"_id\": {\n    type: String,\n    label: \"Shipment Method Id\",\n    autoValue: schemaIdAutoValue\n  },\n  \"name\": {\n    type: String,\n    label: \"Method Name\",\n    optional: true\n  },\n  \"label\": {\n    type: String,\n    label: \"Public Label\"\n  },\n  \"group\": {\n    type: String,\n    label: \"Group\",\n    allowedValues: [\"Ground\", \"Priority\", \"One Day\", \"Free\"],\n    optional: true\n  },\n  \"cost\": {\n    type: Number,\n    label: \"Cost\",\n    optional: true\n  },\n  \"handling\": {\n    type: Number,\n    label: \"Handling\",\n    optional: true,\n    defaultValue: 0,\n    min: 0\n  },\n  \"rate\": {\n    type: Number,\n    label: \"Rate\",\n    min: 0\n  },\n  \"enabled\": {\n    type: Boolean,\n    label: \"Enabled\",\n    defaultValue: false\n  },\n  \"validRanges\": {\n    type: Array,\n    optional: true,\n    label: \"Matching Cart Ranges\"\n  },\n  \"validRanges.$\": {\n    type: Object,\n    optional: true\n  },\n  \"validRanges.$.begin\": {\n    type: Number,\n    label: \"Begin\",\n    optional: true\n  },\n  \"validRanges.$.end\": {\n    type: Number,\n    label: \"End\",\n    optional: true\n  },\n  \"validLocales\": {\n    type: Array,\n    optional: true,\n    label: \"Matching Locales\"\n  },\n  \"validLocales.$\": {\n    type: Object,\n    optional: true\n  },\n  \"validLocales.$.origination\": {\n    type: String,\n    label: \"From\",\n    optional: true\n  },\n  \"validLocales.$.destination\": {\n    type: String,\n    label: \"To\",\n    optional: true\n  },\n  \"validLocales.$.deliveryBegin\": {\n    type: SimpleSchema.Integer,\n    label: \"Shipping Est.\",\n    optional: true\n  },\n  \"validLocales.$.deliveryEnd\": {\n    type: SimpleSchema.Integer,\n    label: \"Delivery Est.\",\n    optional: true\n  },\n  \"carrier\": { // kind of denormalizing, useful for having it in shipmentMethod( cart & order)\n    type: String, // Alternatively we can make an extra Schema:ShipmentMethod, that inherits\n    optional: true // ShippingMethod and add the optional carrier field\n  },\n  \"settings\": {\n    type: ShippoShippingMethod,\n    optional: true\n  }\n}, { check, tracker: Tracker });\n\nregisterSchema(\"ShippingMethod\", ShippingMethod);\n\n/**\n * @name ShipmentQuote\n * @memberof schemas\n * @type {SimpleSchema}\n * @property {String} carrier Name of carrier\n * @property {ShippingMethod} method ShippingMethod\n * @property {Number} rate default value: `0.00`\n */\nexport const ShipmentQuote = new SimpleSchema({\n  carrier: {\n    type: String\n  },\n  method: {\n    type: ShippingMethod\n  },\n  rate: {\n    type: Number,\n    defaultValue: 0.00\n  },\n  shopId: {\n    type: String,\n    optional: true\n  }\n}, { check, tracker: Tracker });\n\nregisterSchema(\"ShipmentQuote\", ShipmentQuote);\n\n/**\n * @name ShipmentItem\n * @memberof schemas\n * @type {SimpleSchema}\n * @summary Populate with order.items that are added to a shipment\n * @property {String} _id Shipment Line Item optional\n * @property {String} productId required\n * @property {String} shopId Shipment Item ShopId optional\n * @property {Number} quantity required\n * @property {String} variantId required\n */\nexport const ShipmentItem = new SimpleSchema({\n  _id: {\n    type: String,\n    label: \"Shipment Line Item\",\n    optional: true,\n    autoValue: schemaIdAutoValue\n  },\n  productId: {\n    type: String,\n    index: 1\n  },\n  shopId: {\n    type: String,\n    index: 1,\n    label: \"Shipment Item ShopId\",\n    optional: true\n  },\n  quantity: {\n    label: \"Quantity\",\n    type: SimpleSchema.Integer,\n    min: 0\n  },\n  variantId: {\n    type: String\n  }\n}, { check, tracker: Tracker });\n\nregisterSchema(\"ShipmentItem\", ShipmentItem);\n\n/**\n * @name ShippingParcel\n * @memberof schemas\n * @type {SimpleSchema}\n * @property {String} containers optional\n * @property {Number} length optional\n * @property {Number} width optional\n * @property {Number} height optional\n * @property {Number} weight optional\n */\nexport const ShippingParcel = new SimpleSchema({\n  containers: {\n    type: String,\n    optional: true\n  },\n  length: {\n    type: Number,\n    optional: true\n  },\n  width: {\n    type: Number,\n    optional: true\n  },\n  height: {\n    type: Number,\n    optional: true\n  },\n  weight: {\n    type: Number,\n    optional: true\n  }\n}, { check, tracker: Tracker });\n\nregisterSchema(\"ShippingParcel\", ShippingParcel);\n\n/**\n * @name ShippoShipment\n * @summary Specific properties of Shipment for use with Shippo. We don't use\n * @memberof schemas\n * @type {SimpleSchema}\n * @property {String} transactionId optional\n * @property {String} trackingStatusStatus optional Tracking Status's status\n * @property {String} trackingStatusDate optional\n */\nexport const ShippoShipment = new SimpleSchema({\n  transactionId: {\n    type: String,\n    optional: true\n  },\n  trackingStatusStatus: { // cause tracking_status.status\n    type: String,\n    optional: true\n  },\n  trackingStatusDate: {\n    type: String,\n    optional: true\n  }\n}, { check, tracker: Tracker });\n\nregisterSchema(\"ShippoShipment\", ShippoShipment);\n\n/**\n * @name ShipmentQuotesQueryStatusUsed\n * @todo Should requestStatus be required or not?\n * @memberof schemas\n * @type {SimpleSchema}\n * @summary Status of a query/consumption of a shipping provider's API (e.g Shippo) for shipping quotations.\n * @description Shipping quotations are the costs from different shipping methods like Fedex, DHL etc of\n * shipping one or more items to a particular place in a given amount of time.)\n * @property {String} requestStatus optional, default value: `noRequestsYet`\n * @property {String} shippingProvider optional\n * @property {Number} numOfShippingMethodsFound optional\n * @property {String} message optional\n */\nexport const ShipmentQuotesQueryStatus = new SimpleSchema({\n  requestStatus: {\n    type: String,\n    optional: true,\n    defaultValue: \"noRequestsYet\"\n  },\n  shippingProvider: {\n    type: String,\n    optional: true\n  },\n  numOfShippingMethodsFound: {\n    type: SimpleSchema.Integer,\n    optional: true\n  },\n  message: {\n    type: String,\n    optional: true\n  }\n}, { check, tracker: Tracker });\n\nregisterSchema(\"ShipmentQuotesQueryStatus\", ShipmentQuotesQueryStatus);\n\n/**\n * @name Shipment\n * @summary Used for cart/order shipment tracking\n * @memberof schemas\n * @type {SimpleSchema}\n * @property {String} _id Shipment ID\n * @property {String} shopId required\n * @property {String} paymentId Payment ID\n * @property {Address} address optional\n * @property {ShippingMethod} shipmentMethod optional\n * @property {ShipmentQuote[]} shipmentQuotes optional\n * @property {ShipmentQuotesQueryStatus} shipmentQuotesQueryStatus optional\n * @property {String} tracking optional\n * @property {ShippingParcel} parcel optional\n * @property {ShipmentItem[]} items optional\n * @property {Workflow} workflow optional\n * @property {Invoice} invoice optional\n * @property {Object[]} transactions optional\n * @property {String} shippingLabelUrl For printable Shipping label\n * @property {String} customsLabelUrl For customs printable label\n * @property {ShippoShipment} shippo For Shippo specific properties\n */\nexport const Shipment = new SimpleSchema({\n  \"_id\": {\n    type: String,\n    label: \"Shipment Id\",\n    autoValue: schemaIdAutoValue\n  },\n  \"shopId\": {\n    type: String\n  },\n  \"paymentId\": {\n    type: String,\n    label: \"Payment Id\",\n    optional: true\n  },\n  \"address\": {\n    type: Address,\n    optional: true\n  },\n  \"shipmentMethod\": {\n    type: ShippingMethod,\n    optional: true\n  },\n  \"shipmentQuotes\": {\n    type: Array,\n    optional: true\n  },\n  \"shipmentQuotes.$\": {\n    type: ShipmentQuote,\n    optional: true\n  },\n  \"shipmentQuotesQueryStatus\": {\n    type: ShipmentQuotesQueryStatus,\n    optional: true,\n    defaultValue: {}\n  },\n  \"tracking\": {\n    type: String,\n    optional: true\n  },\n  \"parcel\": {\n    type: ShippingParcel,\n    optional: true\n  },\n  \"items\": {\n    type: Array,\n    optional: true\n  },\n  \"items.$\": {\n    type: ShipmentItem,\n    optional: true\n  },\n  \"workflow\": {\n    type: Workflow,\n    optional: true,\n    defaultValue: {}\n  },\n  \"invoice\": {\n    type: Invoice,\n    optional: true\n  },\n  \"transactions\": {\n    type: Array,\n    optional: true\n  },\n  \"transactions.$\": {\n    type: Object,\n    optional: true,\n    blackbox: true\n  },\n  \"shippingLabelUrl\": {\n    type: String,\n    optional: true\n  },\n  \"customsLabelUrl\": {\n    type: String,\n    optional: true\n  },\n  \"shippo\": {\n    type: ShippoShipment,\n    optional: true\n  }\n}, { check, tracker: Tracker });\n\nregisterSchema(\"Shipment\", Shipment);\n\n/**\n * @name ShippoShippingProvider Schema\n * @summary Specific properties for use with Shippo.\n * @description We don't use ShippingProvider service* fields because\n * Shippo is on level higher service than simple carrier's ,e.g Fedex api.\n * @memberof schemas\n * @type {SimpleSchema}\n * @property {String} carrierAccountId optional\n */\nexport const ShippoShippingProvider = new SimpleSchema({\n  carrierAccountId: {\n    type: String,\n    optional: true\n  }\n}, { check, tracker: Tracker });\n\nregisterSchema(\"ShippoShippingProvider\", ShippoShippingProvider);\n\n/**\n * @name ShippingProvider\n * @memberof schemas\n * @type {SimpleSchema}\n * @property {String} _id optional\n * @property {String} name optional\n * @property {String} label optional\n * @property {Boolean} enabled optional, default value: `true`\n * @property {String} serviceAuth optional\n * @property {String} serviceSecret optional\n * @property {String} serviceUrl optional\n * @property {ShippoShippingProvider} shippoProvider optional\n */\nexport const ShippingProvider = new SimpleSchema({\n  _id: {\n    type: String,\n    label: \"Provider Id\",\n    optional: true,\n    autoValue: schemaIdAutoValue\n  },\n  name: {\n    type: String,\n    label: \"Service Code\",\n    optional: true\n  },\n  label: {\n    type: String,\n    label: \"Public Label\"\n  },\n  enabled: {\n    type: Boolean,\n    defaultValue: true\n  },\n  serviceAuth: {\n    type: String,\n    label: \"Auth\",\n    optional: true\n  },\n  serviceSecret: {\n    type: String,\n    label: \"Secret\",\n    optional: true\n  },\n  serviceUrl: {\n    type: String,\n    label: \"Service URL\",\n    optional: true\n  },\n  shippoProvider: {\n    type: ShippoShippingProvider,\n    optional: true\n  }\n}, { check, tracker: Tracker });\n\nregisterSchema(\"ShippingProvider\", ShippingProvider);\n\n/**\n * @name Shipping\n * @memberof schemas\n * @type {SimpleSchema}\n * @property {String} _id optional\n * @property {String} shopId required\n * @property {String} name optional\n * @property {ShippingProvider} provider optional\n * @property {ShippingMethod[]} methods optional\n * @property {ShipmentQuote[]} shipmentQuotes optional\n */\nexport const Shipping = new SimpleSchema({\n  \"_id\": {\n    type: String,\n    label: \"Service Id\",\n    optional: true\n  },\n  \"shopId\": {\n    type: String,\n    index: 1,\n    autoValue: shopIdAutoValue,\n    label: \"Shipping ShopId\"\n  },\n  \"name\": {\n    type: String,\n    label: \"Service Name\",\n    optional: true,\n    index: 1\n  },\n  \"provider\": {\n    type: ShippingProvider,\n    label: \"Shipping Provider\"\n  },\n  \"methods\": {\n    type: Array,\n    optional: true,\n    label: \"Shipping Methods\"\n  },\n  \"methods.$\": {\n    type: ShippingMethod\n  },\n  \"shipmentQuotes\": {\n    type: Array,\n    optional: true,\n    label: \"Quoted Methods\"\n  },\n  \"shipmentQuotes.$\": {\n    type: ShipmentQuote\n  }\n}, { check, tracker: Tracker });\n\nregisterSchema(\"Shipping\", Shipping);\n\n/**\n * @name ShippingPackage\n * @memberof schemas\n * @type {SimpleSchema}\n * @property {String} settings.name default value: `Flat Rate Service`\n */\nexport const ShippingPackageConfig = PackageConfig.clone().extend({\n  // Remove blackbox: true from settings obj\n  \"settings\": {\n    type: Object,\n    optional: true,\n    blackbox: false,\n    defaultValue: {}\n  },\n  \"settings.name\": {\n    type: String,\n    defaultValue: \"Flat Rate Service\"\n  }\n});\n\nregisterSchema(\"ShippingPackageConfig\", ShippingPackageConfig);\n","import SimpleSchema from \"simpl-schema\";\nimport { check } from \"meteor/check\";\nimport { Tracker } from \"meteor/tracker\";\nimport { registerSchema } from \"@reactioncommerce/schemas\";\nimport { getSlug } from \"/lib/api\";\nimport { Email } from \"./accounts\";\nimport { Address } from \"./address\";\nimport { createdAtAutoValue, updatedAtAutoValue } from \"./helpers\";\nimport { Layout } from \"./layouts\";\nimport { Metafield } from \"./metafield\";\nimport { Workflow } from \"./workflow\";\n\n/**\n * @name CustomEmailSettings\n * @memberof schemas\n * @type {SimpleSchema}\n * @property {String} service optional\n * @property {String} username optional\n * @property {String} password optional\n * @property {String} host optional\n * @property {Number} port optional\n */\nexport const CustomEmailSettings = new SimpleSchema({\n  service: {\n    type: String,\n    optional: true\n  },\n  username: {\n    type: String,\n    optional: true\n  },\n  password: {\n    type: String,\n    optional: true\n  },\n  host: {\n    type: String,\n    optional: true\n  },\n  port: {\n    type: SimpleSchema.Integer,\n    optional: true\n  }\n}, { check, tracker: Tracker });\n\nregisterSchema(\"CustomEmailSettings\", CustomEmailSettings);\n\n/**\n * @name Currency\n * @memberof schemas\n * @type {SimpleSchema}\n * @property {String} symbol default value: `$`\n * @property {String} format default value: `%s%v`\n * @property {Number} scale optional, default value: `2`\n * @property {String} decimal optional, default value: `.`\n * @property {String} thousand optional, default value: `,`\n * @property {Number} rate optional\n */\nexport const Currency = new SimpleSchema({\n  symbol: {\n    type: String,\n    defaultValue: \"$\"\n  },\n  format: {\n    type: String,\n    defaultValue: \"%s%v\"\n  },\n  scale: {\n    type: SimpleSchema.Integer,\n    defaultValue: 2,\n    optional: true\n  },\n  decimal: {\n    type: String,\n    defaultValue: \".\",\n    optional: true\n  },\n  thousand: {\n    type: String,\n    defaultValue: \",\",\n    optional: true\n  },\n  rate: {\n    type: Number,\n    optional: true\n  }\n}, { check, tracker: Tracker });\n\nregisterSchema(\"Currency\", Currency);\n\n/**\n * @name Locale\n * @memberof schemas\n * @type {SimpleSchema}\n * @property {Object} continents blackbox\n * @property {Object} countries blackbox\n */\nexport const Locale = new SimpleSchema({\n  continents: {\n    type: Object,\n    blackbox: true\n  },\n  countries: {\n    type: Object,\n    blackbox: true\n  }\n}, { check, tracker: Tracker });\n\nregisterSchema(\"Locale\", Locale);\n\n/**\n * @name Languages\n * @memberof schemas\n * @type {SimpleSchema}\n * @property {String} label required\n * @property {String} i18n required\n * @property {Boolean} enabled, default value: `true`\n */\nexport const Languages = new SimpleSchema({\n  label: {\n    type: String\n  },\n  i18n: {\n    type: String\n  },\n  enabled: {\n    type: Boolean,\n    defaultValue: true\n  }\n}, { check, tracker: Tracker });\n\nregisterSchema(\"Languages\", Languages);\n\n/**\n * @name ShopTheme\n * @memberof schemas\n * @type {SimpleSchema}\n * @property {String} themeId required\n * @property {String} styles optional\n */\nexport const ShopTheme = new SimpleSchema({\n  themeId: {\n    type: String\n  },\n  styles: {\n    type: String,\n    optional: true\n  }\n}, { check, tracker: Tracker });\n\nregisterSchema(\"ShopTheme\", ShopTheme);\n\n/**\n * @name BrandAsset\n * @memberof schemas\n * @type {SimpleSchema}\n * @property {String} mediaId optional\n * @property {String} type optional\n */\nexport const BrandAsset = new SimpleSchema({\n  mediaId: {\n    type: String,\n    optional: true\n  },\n  type: {\n    type: String,\n    optional: true\n  }\n}, { check, tracker: Tracker });\n\nregisterSchema(\"BrandAsset\", BrandAsset);\n\n/**\n * @name MerchantShop\n * @memberof schemas\n * @type {SimpleSchema}\n * @property {String} _id Shop label\n * @property {String} slug Shop slug\n * @property {String} name Shop name\n */\nconst MerchantShop = new SimpleSchema({\n  _id: {\n    type: String,\n    label: \"Shop Label\"\n  },\n  slug: {\n    type: String,\n    label: \"Shop Slug\"\n  },\n  name: {\n    type: String,\n    label: \"Shop Name\"\n  }\n}, { check, tracker: Tracker });\n\nregisterSchema(\"MerchantShop\", MerchantShop);\n\n/**\n * @name Shop\n * @memberof schemas\n * @type {SimpleSchema}\n * @property {String} _id optional\n * @property {String} slug optional, auto-generated\n * @property {MerchantShop[]} merchantShops optional\n * @property {String} shopType required, default value: `merchant`, accepted values: `primary`, `merchant`, `affiliate`\n * @property {Boolean} active required, default value: ` true`\n * @property {String} status default value: `active`\n * @property {String} name\n * @property {String} description optional\n * @property {String} keywords optional\n * @property {Address[]} addressBook optional\n * @property {String[]} domains default value: `[localhost]`\n * @property {Email[]} emails optional\n * @property {String} defaultPaymentMethod required, default value: `none`\n * @property {String} currency default value: `USD`\n * @property {Object} currencies optional, blackbox, `Currency` schema\n * @property {Locale} locales required\n * @property {String} language default value: `en`\n * @property {Languages[]} languages optional\n * @property {String} public optional\n * @property {String} timezone default value: `US/Pacific`\n * @property {String} baseUOL Base UOL (Unit of Length), default value: `in`, lowercased by default per style\n * @property {Object[]} unitsOfLength optional, default value: `in`\n * @property {String} unitsOfLength.$.uol  default value: `in`\n * @property {String} unitsOfLength.$.label default value: `Inches`\n * @property {Boolean} unitsOfLength.$.default default value: `false`\n * @property {String} baseUOM Base UOM (Unit of Measure), default value: `oz`, lowercased by default per style\n * @property {Object[]} unitsOfMeasure optional\n * @property {String} unitsOfMeasure.$.uom default value: `oz`\n * @property {String} unitsOfMeasure.$.label default value: `Ounces`\n * @property {Boolean} unitsOfMeasure.$.default default value: `false`\n * @property {Metafield[]} metafields optional\n * @property {String[]} defaultSellerRoles default values: `[\"owner\", \"admin\", \"seller\", \"guest\", \"manage-users\", \"orders\", \"account/profile\", \"product\", \"createProduct\", \"tag\", \"index\", \"cart/checkout\", \"cart/completed\"]`\n * @property {Layout[]} layout optional\n * @property {ShopTheme} theme optional\n * @property {BrandAsset[]} brandAssets optional\n * @property {String} appVersion optional\n * @property {Date} createdAt optional\n * @property {Date} updatedAt optional\n * @property {Object[]} paymentMethods blackbox, default value: `[]`\n * @property {Workflow} workflow optional\n */\nexport const Shop = new SimpleSchema({\n  \"_id\": {\n    type: String,\n    optional: true\n  },\n  \"slug\": {\n    type: String,\n    optional: true,\n    unique: true,\n    autoValue() {\n      let slug = getSlug(this.value);\n\n      if (!slug && this.siblingField(\"name\").value) {\n        slug = getSlug(this.siblingField(\"name\").value);\n      }\n      if (this.isInsert) {\n        return slug;\n      } else if (this.isUpsert) {\n        return {\n          $setOnInsert: slug\n        };\n      }\n    }\n  },\n  \"merchantShops\": {\n    type: Array,\n    optional: true\n  },\n  \"merchantShops.$\": {\n    type: MerchantShop\n  },\n  \"shopType\": {\n    type: String,\n    // Default value is merchant because we seed the first created shop with \"primary\"\n    // In a marketplace, there should only be one \"primary\" shop\n    defaultValue: \"merchant\", // \"primary\", \"merchant\", \"affiliate\",\n    index: true\n  },\n  \"active\": {\n    type: Boolean,\n    defaultValue: true,\n    index: true\n  },\n  // not sure what this is used for. Prefer the boolean above for indexing\n  \"status\": {\n    type: String,\n    defaultValue: \"active\"\n  },\n  \"name\": {\n    type: String,\n    index: 1\n  },\n  \"description\": {\n    type: String,\n    optional: true\n  },\n  \"keywords\": {\n    type: String,\n    optional: true\n  },\n  \"addressBook\": {\n    type: Array,\n    optional: true\n  },\n  \"addressBook.$\": {\n    type: Address\n  },\n  \"domains\": {\n    type: Array,\n    defaultValue: [\"localhost\"],\n    index: 1\n  },\n  \"domains.$\": String,\n  \"emails\": {\n    type: Array,\n    optional: true\n  },\n  \"emails.$\": {\n    type: Email\n  },\n  \"defaultPaymentMethod\": {\n    label: \"Default Payment Method\",\n    type: String,\n    defaultValue: \"none\"\n  },\n  \"currency\": {\n    label: \"Base Currency\",\n    type: String,\n    defaultValue: \"USD\"\n  },\n  \"currencies\": {\n    type: Object, // Schemas.Currency\n    blackbox: true,\n    optional: true\n  },\n  \"locales\": {\n    type: Locale\n  },\n  \"language\": {\n    label: \"Base Language\",\n    type: String,\n    defaultValue: \"en\"\n  },\n  \"languages\": {\n    type: Array,\n    optional: true\n  },\n  \"languages.$\": {\n    type: Languages\n  },\n  \"public\": {\n    type: String,\n    optional: true\n  },\n  \"timezone\": {\n    label: \"Timezone\",\n    type: String,\n    defaultValue: \"US/Pacific\"\n  },\n  \"baseUOL\": {\n    type: String,\n    optional: true,\n    defaultValue: \"in\",\n    label: \"Base Unit of Length\"\n  },\n  \"unitsOfLength\": {\n    type: Array,\n    optional: true\n  },\n  \"unitsOfLength.$\": Object,\n  \"unitsOfLength.$.uol\": {\n    type: String,\n    optional: true,\n    defaultValue: \"in\"\n  },\n  \"unitsOfLength.$.label\": {\n    type: String,\n    optional: true,\n    defaultValue: \"Inches\"\n  },\n  \"unitsOfLength.$.default\": {\n    type: Boolean,\n    optional: true,\n    defaultValue: false\n  },\n  \"baseUOM\": {\n    type: String,\n    optional: true,\n    defaultValue: \"oz\",\n    label: \"Base Unit of Measure\"\n  },\n  \"unitsOfMeasure\": {\n    type: Array,\n    optional: true\n  },\n  \"unitsOfMeasure.$\": Object,\n  \"unitsOfMeasure.$.uom\": {\n    type: String,\n    optional: true,\n    defaultValue: \"oz\"\n  },\n  \"unitsOfMeasure.$.label\": {\n    type: String,\n    optional: true,\n    defaultValue: \"Ounces\"\n  },\n  \"unitsOfMeasure.$.default\": {\n    type: Boolean,\n    optional: true,\n    defaultValue: false\n  },\n  \"metafields\": {\n    type: Array,\n    optional: true\n  },\n  \"metafields.$\": {\n    type: Metafield\n  },\n  \"defaultSellerRoles\": {\n    type: Array,\n    defaultValue: [\n      \"owner\",\n      \"admin\",\n      \"seller\",\n      \"guest\",\n      \"manage-users\",\n      \"orders\",\n      \"account/profile\",\n      \"product\",\n      \"createProduct\",\n      \"tag\",\n      \"index\",\n      \"cart/checkout\",\n      \"cart/completed\"\n    ]\n  },\n  \"defaultSellerRoles.$\": {\n    type: String\n  },\n  \"layout\": {\n    type: Array,\n    optional: true\n  },\n  \"layout.$\": {\n    type: Layout\n  },\n  \"theme\": {\n    type: ShopTheme,\n    optional: true\n  },\n  \"brandAssets\": {\n    type: Array,\n    optional: true\n  },\n  \"brandAssets.$\": {\n    type: BrandAsset\n  },\n  \"appVersion\": {\n    type: String,\n    optional: true\n  },\n  \"createdAt\": {\n    type: Date,\n    autoValue: createdAtAutoValue,\n    optional: true\n  },\n  \"updatedAt\": {\n    type: Date,\n    autoValue: updatedAtAutoValue,\n    optional: true\n  },\n  \"paymentMethods\": {\n    type: Array,\n    defaultValue: []\n  },\n  \"paymentMethods.$\": {\n    type: Object,\n    blackbox: true\n  },\n  \"workflow\": {\n    type: Workflow,\n    optional: true,\n    defaultValue: {}\n  }\n}, { check, tracker: Tracker });\n\nregisterSchema(\"Shop\", Shop);\n","import SimpleSchema from \"simpl-schema\";\nimport { check } from \"meteor/check\";\nimport { Tracker } from \"meteor/tracker\";\nimport { registerSchema } from \"@reactioncommerce/schemas\";\n\n/**\n * @name Sms\n * @memberof schemas\n * @type {SimpleSchema}\n * @property {String} apiKey optional\n * @property {String} apiToken optional\n * @property {String} shopId optional\n * @property {String} smsPhone optional\n * @property {String} smsProvider optional\n */\nexport const Sms = new SimpleSchema({\n  apiKey: {\n    type: String,\n    optional: true\n  },\n  apiToken: {\n    type: String,\n    optional: true\n  },\n  shopId: {\n    type: String,\n    optional: true\n  },\n  smsPhone: {\n    type: String,\n    optional: true\n  },\n  smsProvider: {\n    type: String,\n    optional: true\n  }\n}, { check, tracker: Tracker });\n\nregisterSchema(\"Sms\", Sms);\n","import SimpleSchema from \"simpl-schema\";\nimport { check } from \"meteor/check\";\nimport { Tracker } from \"meteor/tracker\";\nimport { registerSchema } from \"@reactioncommerce/schemas\";\nimport { PackageConfig } from \"./registry\";\n\n/**\n * @name SocialProvider\n * @memberof schemas\n * @type {SimpleSchema}\n * @property {String} profilePage optional, Profile Page\n * @property {Boolean} enabled optional, default value: `false`\n */\nexport const SocialProvider = new SimpleSchema({\n  profilePage: {\n    type: String,\n    regEx: SimpleSchema.RegEx.Url,\n    label: \"Profile Page\",\n    optional: true\n  },\n  enabled: {\n    type: Boolean,\n    label: \"Enabled\",\n    defaultValue: false,\n    optional: true\n  }\n}, { check, tracker: Tracker });\n\nregisterSchema(\"SocialProvider\", SocialProvider);\n\n/**\n * @name SocialPackageConfig\n * @memberof schemas\n * @type {SimpleSchema}\n * @extends {PackageConfig}\n * @property {Object} settings.public optional\n * @property {Object} settings.public.apps optional\n * @property {SocialProvider} settings.public.apps.facebook  optional, Facebook\n * @property {String} settings.public.apps.facebook.appId optional, Facebook App ID\n * @property {String} settings.public.apps.facebook.appSecret optional, Facebook App Secret\n * @property {SocialProvider} settings.public.apps.twitter optional, Twitter\n * @property {String} settings.public.apps.twitter.username optional, Twitter username\n * @property {SocialProvider} settings.public.apps.pinterest optional, Pinterest\n * @property {SocialProvider} settings.public.apps.googleplus optional, Google+\n */\nexport const SocialPackageConfig = PackageConfig.clone().extend({\n  // Remove blackbox: true from settings obj\n  \"settings\": {\n    type: Object,\n    optional: true,\n    blackbox: false,\n    defaultValue: {}\n  },\n  \"settings.public\": {\n    type: Object,\n    optional: true,\n    defaultValue: {}\n  },\n  \"settings.public.apps\": {\n    type: Object,\n    label: \"Social Settings\",\n    optional: true,\n    defaultValue: {}\n  },\n  \"settings.public.apps.facebook\": {\n    type: SocialProvider,\n    optional: true,\n    defaultValue: {}\n  },\n  \"settings.public.apps.facebook.appId\": {\n    type: String,\n    regEx: /\\d+/,\n    label: \"App Id\",\n    optional: true\n  },\n  \"settings.public.apps.facebook.appSecret\": {\n    type: String,\n    regEx: /[\\da-z]+/,\n    label: \"App Secret\",\n    optional: true\n  },\n  \"settings.public.apps.twitter\": {\n    type: SocialProvider,\n    optional: true,\n    defaultValue: {}\n  },\n  \"settings.public.apps.twitter.username\": {\n    type: String,\n    label: \"Username\",\n    optional: true\n  },\n  \"settings.public.apps.pinterest\": {\n    type: SocialProvider,\n    optional: true,\n    defaultValue: {}\n  },\n  \"settings.public.apps.googleplus\": {\n    type: SocialProvider,\n    label: \"Google+\",\n    optional: true,\n    defaultValue: {}\n  }\n});\n\nregisterSchema(\"SocialPackageConfig\", SocialPackageConfig);\n","import SimpleSchema from \"simpl-schema\";\nimport { check } from \"meteor/check\";\nimport { Tracker } from \"meteor/tracker\";\nimport { registerSchema } from \"@reactioncommerce/schemas\";\nimport { createdAtAutoValue, shopIdAutoValue } from \"./helpers\";\nimport { Metafield } from \"./metafield\";\n\n/**\n * @name Tag\n * @memberof schemas\n * @type {SimpleSchema}\n * @property {String} _id optional\n * @property {String} name required\n * @property {String} slug required\n * @property {String} type optional\n * @property {Metafield[]} metafields optional\n * @property {Number} position optional\n * @property {String[]} relatedTagIds optional\n * @property {Boolean} isDeleted default value: `false`\n * @property {Boolean} isTopLevel required\n * @property {Boolean} isVisible defalut value: `true`\n * @property {String[]} groups optional, default value: `[],` groupIds that this tag belongs to\n * @property {String} shopId Tag shopId\n * @property {Date} createdAt required\n * @property {Date} updatedAt required\n */\nexport const Tag = new SimpleSchema({\n  \"_id\": {\n    type: String,\n    optional: true\n  },\n  \"name\": {\n    type: String,\n    index: 1\n  },\n  \"slug\": String,\n  \"type\": {\n    type: String,\n    optional: true\n  },\n  \"metafields\": {\n    type: Array,\n    optional: true\n  },\n  \"metafields.$\": Metafield,\n  \"position\": {\n    type: SimpleSchema.Integer,\n    optional: true\n  },\n  \"relatedTagIds\": {\n    type: Array,\n    optional: true,\n    index: 1\n  },\n  \"relatedTagIds.$\": String,\n  \"isDeleted\": {\n    type: Boolean,\n    defaultValue: false\n  },\n  \"isTopLevel\": Boolean,\n  \"isVisible\": {\n    type: Boolean,\n    defaultValue: true\n  },\n  \"groups\": {\n    type: Array, // groupIds that this tag belongs to\n    optional: true,\n    defaultValue: []\n  },\n  \"groups.$\": String,\n  \"shopId\": {\n    type: String,\n    index: 1,\n    autoValue: shopIdAutoValue,\n    label: \"Tag shopId\"\n  },\n  \"createdAt\": {\n    type: Date,\n    autoValue: createdAtAutoValue\n  },\n  \"updatedAt\": {\n    type: Date,\n    autoValue() {\n      return new Date();\n    }\n  }\n}, { check, tracker: Tracker });\n\nregisterSchema(\"Tag\", Tag);\n","import SimpleSchema from \"simpl-schema\";\nimport { check } from \"meteor/check\";\nimport { Tracker } from \"meteor/tracker\";\nimport { registerSchema } from \"@reactioncommerce/schemas\";\nimport { shopIdAutoValue } from \"./helpers\";\n\n/**\n * @name sharedFields\n * @memberof schemas\n * @type {SimpleSchema}\n * @property {String} shopId Template ShopId\n * @property {String} name required\n * @property {String} title optional\n * @property {Number} priority optional, default value: 1\n * @property {Boolean} enabled default value: true\n * @property {String} route optional\n * @property {String} type default value: `template`\n * @property {String} provides default value: `template`\n * @property {String} block optional\n * @property {Object} defaultData optional, blackbox\n * @property {String} parser required\n * @property {String} language optional, default value: `en`\n * @property {String} source optional\n */\nconst sharedFields = {\n  shopId: {\n    type: String,\n    index: 1,\n    autoValue: shopIdAutoValue,\n    label: \"Template ShopId\"\n  },\n  name: {\n    type: String\n  },\n  title: {\n    type: String,\n    optional: true\n  },\n  priority: {\n    type: SimpleSchema.Integer,\n    optional: true,\n    defaultValue: 1\n  },\n  enabled: {\n    type: Boolean,\n    defaultValue: true\n  },\n  route: {\n    type: String,\n    optional: true\n  },\n  type: {\n    type: String,\n    defaultValue: \"template\"\n  },\n  provides: {\n    type: String,\n    defaultValue: \"template\"\n  },\n  block: {\n    type: String,\n    optional: true\n  },\n  defaultData: {\n    type: Object,\n    blackbox: true,\n    optional: true\n  },\n  parser: {\n    type: String\n  },\n  language: {\n    type: String,\n    optional: true,\n    defaultValue: \"en\"\n  },\n  source: {\n    type: String,\n    optional: true\n  }\n};\n\n/**\n * @name ReactLayout\n * @memberof schemas\n * @summary Extends fields from sharedFields\n * @type {SimpleSchema}\n * @extends {sharedFields}\n * @property {String[]} templateFor optional\n * @property {Object[]} template optional, blackbox\n */\nexport const ReactLayout = new SimpleSchema({\n  ...sharedFields,\n  \"templateFor\": {\n    type: Array,\n    optional: true\n  },\n  \"templateFor.$\": String,\n  \"template\": {\n    type: Array,\n    optional: true\n  },\n  \"template.$\": {\n    type: Object,\n    blackbox: true\n  }\n}, { check, tracker: Tracker });\n\nregisterSchema(\"ReactLayout\", ReactLayout);\n\n/**\n * @name Template\n * @memberof schemas\n * @summary Extends fields from sharedFields\n * @type {SimpleSchema}\n * @extends {sharedFields}\n * @property {Object[]} template optional, blackbox\n */\nexport const Template = new SimpleSchema({\n  ...sharedFields,\n  template: {\n    type: String,\n    optional: true\n  }\n}, { check, tracker: Tracker });\n\nregisterSchema(\"Template\", Template);\n","import SimpleSchema from \"simpl-schema\";\nimport { check } from \"meteor/check\";\nimport { Tracker } from \"meteor/tracker\";\nimport { registerSchema } from \"@reactioncommerce/schemas\";\nimport { shopIdAutoValue } from \"./helpers\";\n\n/**\n * @name Translation\n * @memberof schemas\n * @type {SimpleSchema}\n * @todo Mostly just a blackbox for now. Someday we'll validate the entire schema\n * @property {String} shopId, Translation ShopId\n * @property {String} language, language\n * @property {String} i18n, translation\n * @property {String} ns, namespace\n * @property {Object} translation, blackbox\n */\nexport const Translation = new SimpleSchema({\n  shopId: {\n    type: String,\n    index: 1,\n    autoValue: shopIdAutoValue,\n    label: \"Translation ShopId\"\n  },\n  language: {\n    type: String\n  },\n  i18n: {\n    type: String,\n    index: 1\n  },\n  ns: {\n    type: String,\n    label: \"Namespace\"\n  },\n  translation: {\n    type: Object,\n    blackbox: true\n  }\n}, { check, tracker: Tracker });\n\nregisterSchema(\"Translation\", Translation);\n","import SimpleSchema from \"simpl-schema\";\nimport { check } from \"meteor/check\";\nimport { Tracker } from \"meteor/tracker\";\nimport { registerSchema } from \"@reactioncommerce/schemas\";\n\n/**\n * @name Workflow\n * @summary Control view flow by attaching layout to a collection.\n * Shop defaultWorkflow is defined in Shop.\n * @memberof schemas\n * @type {SimpleSchema}\n * @property {String} status, default value: `new`\n * @property {String[]} workflow optional\n */\nexport const Workflow = new SimpleSchema({\n  \"status\": {\n    type: String,\n    defaultValue: \"new\",\n    index: 1\n  },\n  \"workflow\": {\n    type: Array,\n    optional: true\n  },\n  \"workflow.$\": String\n}, { check, tracker: Tracker });\n\nregisterSchema(\"Workflow\", Workflow);\n","import accounting from \"accounting-js\";\nimport _ from \"lodash\";\nimport { Shops } from \"/lib/collections\";\n\n/**\n * getSummary\n * @private\n * @summary iterates over cart items with computations\n * @param {Array} items - cart.items array\n * @param {Array} prop - path to item property represented by array\n * @param {Array} [prop2] - path to another item property represented by array\n * @param {String} [shopId] - shopId\n * @return {Number} - computations result\n */\nfunction getSummary(items, prop, prop2, shopId) {\n  try {\n    if (Array.isArray(items)) {\n      return items.reduce((sum, item) => {\n        if (prop2) {\n          if (shopId) {\n            if (shopId === item.shopId) {\n              // if we're looking for a specific shop's items and this item does match\n              // if prop2 is an empty array\n              if (!prop2.length) {\n                return sum + (prop.length === 1 ? item[prop[0]] :\n                  item[prop[0]][prop[1]]);\n              }\n              return sum + item[prop[0]] * (prop2.length === 1 ? item[prop2[0]] :\n                item[prop2[0]][prop2[1]]);\n            }\n            // If we're looking for a specific shop's items and this item doesn't match\n            return sum;\n          }\n          // No shopId param\n          // S + a * b, where b could be b1 or b2\n          return sum + item[prop[0]] * (prop2.length === 1 ? item[prop2[0]] :\n            item[prop2[0]][prop2[1]]);\n        }\n        // No prop2 param\n        // S + b, where b could be b1 or b2\n        return sum + (prop.length === 1 ? item[prop[0]] :\n          item[prop[0]][prop[1]]);\n      }, 0);\n    }\n  } catch (e) {\n    // If data not prepared we should send a number to avoid exception with\n    // `toFixed`. This could happens if user stuck on `completed` checkout stage\n    // by some reason.\n    return 0;\n  }\n  return 0;\n}\n\n/**\n * Reaction transform methods on Collections\n * @file Use transform methods to return Cart and Order calculated values: count, subTotal, shipping, taxes, total.\n * Use these methods on Cart and Orders in templates, `{{cart.getCount}}` and in code, `Cart.findOne().getTotal()`.\n * These use Meteor Collection {@link http://docs.meteor.com/api/collections.html#Mongo-Collection transforms}.\n * @module cartOrderTransform\n */\n\nexport const cartOrderTransform = {\n  /**\n   * @summary Return the total quantity on the order\n   * @method getCount\n   * @example {cart ? cart.getCount() : 0}\n   * @returns {Number}  Total quantity of items on the order\n   */\n  getCount() {\n    return getSummary(this.items, [\"quantity\"]);\n  },\n  /**\n   * @summary Return the total price of shipping/handling on the order\n   * @method getShippingTotal\n   * @returns {Number} Total price of shipping/handling on the order\n   */\n  getShippingTotal() {\n    // loop through the cart.shipping, sum shipments.\n    const rate = getSummary(this.shipping, [\"shipmentMethod\", \"rate\"]);\n    const handling = getSummary(this.shipping, [\"shipmentMethod\", \"handling\"]);\n    const shipping = handling + rate || 0;\n    return accounting.toFixed(shipping, 2);\n  },\n  /**\n   * @summary Get the total price of shipping, broken down by shop\n   * @method getShippingTotalByShop\n   * @returns {{Object}} - Total price of shipping, broken down by shop\n   */\n  getShippingTotalByShop() {\n    return this.shipping.reduce((uniqueShopShippingTotals, shippingRec) => {\n      if (!uniqueShopShippingTotals[shippingRec.shopId]) {\n        const rate = getSummary(this.shipping, [\"shipmentMethod\", \"rate\"], [], shippingRec.shopId);\n        const handling = getSummary(this.shipping, [\"shipmentMethod\", \"handling\"], [], shippingRec.shopId);\n        const shipping = handling + rate || 0;\n        uniqueShopShippingTotals[shippingRec.shopId] = accounting.toFixed(shipping, 2);\n        return uniqueShopShippingTotals;\n      }\n      return uniqueShopShippingTotals;\n    }, {});\n  },\n  /**\n   * @summary Return the total price of goods on an order\n   * @method getSubTotal\n   * @returns {Number} Total price of goods for the order\n   */\n  getSubTotal() {\n    const subTotal = getSummary(this.items, [\"quantity\"], [\"variants\", \"price\"]);\n    return accounting.toFixed(subTotal, 2);\n  },\n  /**\n   * @summary Aggregates the subtotals by shopId\n   * @method getSubtotalByShop\n   * @return {object} Object with a key for each shopId in the cart/order where the value is the subtotal for that shop\n   */\n  getSubtotalByShop() {\n    return this.items.reduce((uniqueShopSubTotals, item) => {\n      if (!uniqueShopSubTotals[item.shopId]) {\n        const subTotal = getSummary(this.items, [\"quantity\"], [\"variants\", \"price\"], item.shopId);\n        uniqueShopSubTotals[item.shopId] = accounting.toFixed(subTotal, 2);\n        return uniqueShopSubTotals;\n      }\n      return uniqueShopSubTotals;\n    }, {});\n  },\n  /**\n   * @summary Total taxes for order\n   * @method getTaxTotal\n   * @returns {Number} Total price of taxes for an order\n   */\n  getTaxTotal() {\n    // taxes are calculated in a Cart.after.update hooks\n    // the tax value stored with the cart/order is the effective tax rate\n    // calculated by line items\n    // in the imports/core/taxes plugin\n    const tax = this.tax || 0;\n    const subTotal = parseFloat(this.getSubTotal());\n    const taxTotal = subTotal * tax;\n    return accounting.toFixed(taxTotal, 2);\n  },\n  /**\n   * @summary Aggregates the taxes by shopId\n   * @method getTaxesByShop\n   * @return {Object} Object with a key for each shopId in cart/order where the value is the tax total for that shop\n   */\n  getTaxesByShop() {\n    const subtotals = this.getSubtotalByShop();\n    const taxRates = this.taxRatesByShop;\n\n    return Object.keys(subtotals).reduce((shopTaxTotals, shopId) => {\n      if (!shopTaxTotals[shopId]) {\n        const shopSubtotal = parseFloat(subtotals[shopId]);\n        // In case of taxAPI's tax rate is stored in tax.\n        const shopTaxRate = (taxRates && taxRates[shopId]) || this.tax || 0;\n        const shopTaxTotal = shopSubtotal * shopTaxRate;\n        shopTaxTotals[shopId] = accounting.toFixed(shopTaxTotal, 2);\n      }\n      return shopTaxTotals;\n    }, {});\n  },\n  /**\n   * @summary Discount for cart/order.\n   * @description Grabs discounts from the invoice records if they exist, otherwise from this.discounts\n   * @example const cartTaxesByShop = cart.getTaxesByShop();\n   * @method getDiscounts\n   * @return {Number} Total value of discounts\n   */\n  getDiscounts() {\n    let orderDiscounts = 0;\n    orderDiscounts = this.billing.reduce((acc, item) => {\n      if (item.invoice) {\n        return acc + parseFloat(item.invoice.discounts);\n      }\n      return acc;\n    }, 0);\n    const cartDiscount = parseFloat(this.discount) || 0;\n    const discount = orderDiscounts || cartDiscount || 0;\n    return accounting.toFixed(discount, 2);\n  },\n  /**\n   * @summary Discounts by Shop\n   * @method getDiscountsByShop\n   * @returns {object} - An object where the key is a shopId and the value is the discount for that shop\n   */\n  getDiscountsByShop() {\n    const discountsByShop = {};\n    if (this.billing && this.billing[0].invoice) { // check if we have the invoice object on the billing records\n      for (const billingRecord of this.billing) {\n        discountsByShop[billingRecord.shopId] = accounting.toFixed(billingRecord.invoice.discounts);\n      }\n    }\n    return discountsByShop;\n  },\n  /**\n   * @summary Total for Order\n   * @method getTotal\n   * @return {Number} Total for order\n   */\n  getTotal() {\n    const subTotal = parseFloat(this.getSubTotal());\n    const shipping = parseFloat(this.getShippingTotal());\n    const taxes = parseFloat(this.getTaxTotal());\n    const discount = parseFloat(this.getDiscounts());\n    const discountTotal = Math.max(0, subTotal - discount);\n    const total = discountTotal + shipping + taxes;\n    return accounting.toFixed(total, 2);\n  },\n  /**\n   * @summary Aggregates the cart/order total by shopId\n   * @method getTotalByShop\n   * @return {object} An object with a key for each shopId in the cart/order where the value is the total for that shop\n   */\n  getTotalByShop() {\n    const subtotals = this.getSubtotalByShop();\n    const taxes = this.getTaxesByShop();\n    const shippingTotalByShop = this.getShippingTotalByShop();\n\n    // no discounts right now because that will need to support multi-shop\n    // TODO: Build out shop-by-shop discounts and permit discounts to reduce application fee\n    const shopsInCart = Object.keys(subtotals);\n    return Object.keys(subtotals).reduce((shopTotals, shopId) => {\n      if (!shopTotals[shopId]) {\n        let shopSubtotal = parseFloat(subtotals[shopId]);\n        // pending the implementation of shop-by-shop discounts, we allow discounts to apply only on single shop carts\n        if (shopsInCart.length === 1) {\n          const discount = parseFloat(this.getDiscounts());\n          shopSubtotal = parseFloat(subtotals[shopId]) - discount;\n        }\n\n        const shopTaxes = parseFloat(taxes[shopId]);\n        const shipping = parseFloat(shippingTotalByShop[shopId]);\n        const shopTotal = shopSubtotal + shopTaxes + shipping;\n        shopTotals[shopId] = accounting.toFixed(shopTotal, 2);\n      }\n      return shopTotals;\n    }, {});\n  },\n  /**\n   * @summary Cart items organized by shopId\n   * @method getItemsByShop\n   * @example const cartTotals = cart.getTotalByShop();\n   * @return {Object} Dict of shopIds with an array of items from that shop that are present in the cart/order\n   */\n  getItemsByShop() {\n    if (this.items) {\n      return this.items.reduce((itemsByShop, item) => {\n        if (!itemsByShop[item.shopId]) {\n          itemsByShop[item.shopId] = [item];\n        } else {\n          itemsByShop[item.shopId].push(item);\n        }\n        return itemsByShop;\n      }, {});\n    }\n    return {};\n  },\n  /**\n   * @summary Returns an array of payment methods, normalized\n   * @method getPaymentMethods\n   * @returns {Array} Array of Payment Method objects\n   */\n  getPaymentMethods() {\n    const billingMethods = this.billing.map((method) => method.paymentMethod);\n    const methodObjects = billingMethods.map((method) => {\n      const paymentMethodObject = {\n        storedCard: method.storedCard,\n        processor: method.processor,\n        mode: method.mode,\n        transactionId: method.transactionId,\n        amount: method.amount,\n        method: method.method\n      };\n      return paymentMethodObject;\n    });\n    return methodObjects;\n  },\n  /**\n   * @summary Return an array of payment methods for display removing duplicates\n   * @method getUniquePaymentMethods\n   * @returns {object} - An object containing the payment methods used on this order excluding duplicates\n   */\n  getUniquePaymentMethods() {\n    const billingMethods = this.billing.map((method) => method.paymentMethod);\n    const uniqueMethods = {};\n    for (const billingMethod of billingMethods) {\n      const key = `${billingMethod.storedCard}${billingMethod.processor}${billingMethod.method}`;\n      if (!uniqueMethods[key]) {\n        uniqueMethods[key] = {\n          storedCard: billingMethod.storedCard,\n          processor: billingMethod.processor,\n          method: billingMethod.method,\n          key\n        };\n      }\n    }\n    const uniqueValueArray = _.values(uniqueMethods);\n    return uniqueValueArray;\n  },\n  /**\n   * @summary Create an object that contains a summary for each shop\n   * @method getShopSummary\n   * @return {Object}  An object with a key for each shopId, and name + summary data for each\n   */\n  getShopSummary() {\n    // massage items into an object by Shop\n    const taxesByShop = this.getTaxesByShop();\n    const subTotalsByShop = this.getSubtotalByShop();\n    const shippingByShop = this.getShippingTotalByShop();\n    const { shipping } = this;\n    const itemsByShop = this.items.reduce((shopItems, item) => {\n      if (!shopItems[item.shopId]) {\n        shopItems[item.shopId] = [item];\n      } else {\n        shopItems[item.shopId].push(item);\n      }\n      return shopItems;\n    }, {});\n\n    const shopObjects = Object.keys(itemsByShop).map((shop) => ({\n      [shop]: {\n        name: Shops.findOne(shop).name,\n        subTotal: subTotalsByShop[shop],\n        taxes: taxesByShop[shop],\n        items: itemsByShop[shop],\n        quantityTotal: itemsByShop[shop].reduce((qty, item) => qty + item.quantity, 0),\n        shipping: shippingByShop[shop],\n        shippingMethod: shipping[0].shipmentMethod\n      }\n    }));\n    // TODO we just assume now that every shop uses the same carrier, thus the hard-coded zero index\n    // because shipping records are not stored by shop\n    const sortedShopObjects = _.sortBy(shopObjects, (shopObject) => shopObject.name);\n    return sortedShopObjects;\n  }\n};\n","import _ from \"lodash\";\nimport { Mongo } from \"meteor/mongo\";\nimport { Meteor } from \"meteor/meteor\";\nimport * as Schemas from \"./schemas\";\nimport { cartOrderTransform } from \"./transform/cartOrder\";\n\n/**\n * @name mediaRecordsIndex\n * @private\n * @param {RawMongoCollection} rawMedia\n *\n * Sets up necessary indexes on the Media FileCollection\n */\nasync function mediaRecordsIndex(rawMedia) {\n  try {\n    await rawMedia.createIndex({ \"metadata.productId\": 1 }, { background: true });\n    await rawMedia.createIndex({ \"metadata.variantId\": 1 }, { background: true });\n    await rawMedia.createIndex({ \"metadata.priority\": 1 }, { background: true });\n\n    // These queries are used by the workers in file-collections package\n    await rawMedia.createIndex({ \"original.remoteURL\": 1 }, { background: true });\n    await rawMedia.createIndex({ \"original.tempStoreId\": 1 }, { background: true });\n  } catch (error) {\n    console.error(error); // eslint-disable-line no-console\n  }\n}\n\n/**\n *\n * Reaction Core Collections\n * @ignore\n */\n\n/**\n * Accounts Collection\n * @ignore\n */\nexport const Accounts = new Mongo.Collection(\"Accounts\");\n\nAccounts.attachSchema(Schemas.Accounts);\n\n\n/**\n * Assets Collection\n * Store file asset paths or contents in a Collection\n * @ignore\n */\nexport const Assets = new Mongo.Collection(\"Assets\");\n\nAssets.attachSchema(Schemas.Assets);\n\n\n/**\n * Cart Collection\n * @ignore\n */\nexport const Cart = new Mongo.Collection(\"Cart\", {\n  transform(cart) {\n    const newInstance = Object.create(cartOrderTransform);\n    return _.extend(newInstance, cart);\n  }\n});\n\nCart.attachSchema(Schemas.Cart);\n\n\n/**\n * Emails Collection\n * @ignore\n */\nexport const Emails = new Mongo.Collection(\"Emails\");\n\nEmails.attachSchema(Schemas.Emails);\n\n\n/**\n * Inventory Collection\n * @ignore\n */\nexport const Inventory = new Mongo.Collection(\"Inventory\");\n\nInventory.attachSchema(Schemas.Inventory);\n\n\n/**\n * Orders Collection\n * @ignore\n */\nexport const Orders = new Mongo.Collection(\"Orders\", {\n  transform(order) {\n    const newInstance = Object.create(cartOrderTransform);\n    return _.extend(newInstance, order);\n  }\n});\n\nOrders.attachSchema(Schemas.OrderDocument);\n\n/**\n * Packages Collection\n * @ignore\n */\nexport const Packages = new Mongo.Collection(\"Packages\");\n\nPackages.attachSchema(Schemas.PackageConfig);\n\n/**\n * Catalog Collection\n * @todo: Attach a schema to the Catalog collection\n * @ignore\n */\nexport const Catalog = new Mongo.Collection(\"Catalog\");\n\n/**\n * Products Collection\n * @ignore\n */\nexport const Products = new Mongo.Collection(\"Products\");\n\nProducts.attachSchema(Schemas.Product, { selector: { type: \"simple\" } });\nProducts.attachSchema(Schemas.ProductVariant, { selector: { type: \"variant\" } });\n\n/**\n * Revisions Collection\n * @ignore\n */\nexport const Revisions = new Mongo.Collection(\"Revisions\");\n\nRevisions.attachSchema(Schemas.Revisions);\n\n/**\n * Shipping Collection\n * @ignore\n */\nexport const Shipping = new Mongo.Collection(\"Shipping\");\n\nShipping.attachSchema(Schemas.Shipping);\n\n/**\n* Shops Collection\n* @ignore\n*/\nexport const Shops = new Mongo.Collection(\"Shops\");\n\nShops.attachSchema(Schemas.Shop);\n\n/**\n * Groups Collection\n * @ignore\n */\nexport const Groups = new Mongo.Collection(\"Groups\");\n\nGroups.attachSchema(Schemas.Groups);\n\n/**\n * SellerShops Collection (client-only)\n * @ignore\n */\nlet sellerShops;\nif (Meteor.isClient) {\n  sellerShops = new Mongo.Collection(\"SellerShops\");\n\n  sellerShops.attachSchema(Schemas.Shop);\n}\nexport const SellerShops = sellerShops;\n\n/**\n * Tags Collection\n * @ignore\n */\nexport const Tags = new Mongo.Collection(\"Tags\");\n\nTags.attachSchema(Schemas.Tag);\n\n/**\n * Templates Collection\n * @ignore\n */\nexport const Templates = new Mongo.Collection(\"Templates\");\n\nTemplates.attachSchema(Schemas.Templates, { selector: { type: \"template\" } });\nTemplates.attachSchema(Schemas.ReactLayout, { selector: { type: \"react\" } });\n\n\n/**\n * Translations Collection\n * @ignore\n */\nexport const Translations = new Mongo.Collection(\"Translations\");\n\nTranslations.attachSchema(Schemas.Translation);\n\n/**\n * Notifications Collection\n * @ignore\n */\nexport const Notifications = new Mongo.Collection(\"Notifications\");\n\nNotifications.attachSchema(Schemas.Notification);\n\n\n/**\n * Sms Collection\n * @ignore\n */\nexport const Sms = new Mongo.Collection(\"Sms\");\n\nSms.attachSchema(Schemas.Sms);\n\n\n/**\n * Logs Collection\n * @ignore\n */\nexport const Logs = new Mongo.Collection(\"Logs\");\n\nLogs.attachSchema(Schemas.Logs);\n\n/**\n * MediaRecords Collection\n * @ignore\n */\nexport const MediaRecords = new Mongo.Collection(\"cfs.Media.filerecord\");\n\n// Index on the props we search on\nif (Meteor.isServer) {\n  mediaRecordsIndex(MediaRecords.rawCollection());\n}\n\n// Might want to do this at some point.\n// MediaRecords.attachSchema();\n","export * from \"./collections\";\nexport * from \"./search\";\nexport { Jobs } from \"./jobs\";\n","import { JobCollection } from \"/imports/plugins/core/job-collection/lib\";\n\n/**\n * Jobs Collection\n * @ignore\n */\nexport const Jobs = new JobCollection(\"Jobs\", {\n  noCollectionSuffix: true\n});\n","import { Mongo } from \"meteor/mongo\";\n\nexport const ProductSearch = new Mongo.Collection(\"ProductSearch\");\nexport const OrderSearch = new Mongo.Collection(\"OrderSearch\");\nexport const AccountSearch = new Mongo.Collection(\"AccountSearch\");\n","/**\n * @name html\n * @method\n * @memberof Core\n * @summary Template literal for HTML strings.\n * @param  {Object} strings Object of strings\n * @return {String} string\n */\nexport function html(strings) {\n  return strings.raw[0];\n}\n","/**\n * @method getTagIds\n * @memberof Core\n * @summary Get an array of IDs of tags\n * @example getTagIds({ tags: subTagGroups })\n * @param  {Object} state object\n * @param  {Array}  state.tags Array of tags\n * @return {Array}  Array of tag IDs\n */\nexport const getTagIds = (state) => {\n  if (Array.isArray(state.tags)) {\n    return state.tags.map((tag) => tag._id);\n  }\n\n  return [];\n};\n","/**\n * @method getVariantIds\n * @memberof Core\n * @summary Get array of IDs of variants\n * @example getVariantIds(newVariantOrder)\n * @param  {Array} variants Array of variant objects\n * @return {Array}          Array of variant object IDs\n */\nexport const getVariantIds = (variants) => Array.isArray(variants) && variants.map((variant) => variant._id);\n","// this is an expensive polyfill for clientside Buffer usage\n// TODO refactor to remove this buffer dependency\nglobal.Buffer = global.Buffer || require(\"buffer\").Buffer; // eslint-disable-line\n\n// how to refactor\n// you can easily drop a breakpoint on the error in your browser's inspector, then refresh the page to hit the breakpoint and see via the call stack which package is trying to use Buffer\n// https://github.com/meteor/meteor/issues/8645\n","import _ from \"lodash\";\nimport { Template } from \"meteor/templating\";\nimport { Meteor } from \"meteor/meteor\";\nimport { Roles } from \"meteor/alanning:roles\";\nimport { Reaction } from \"/client/api\";\nimport { Packages, Shops } from \"/lib/collections\";\n\n/**\n *\n * reactionApps\n *   provides=\"<where matching registry provides is this >\"\n *   enabled=true <false for disabled packages>\n *   context= true filter templates to current route\n *   returns matching package registry objects\n *   @example {{#each reactionApps provides=\"settings\" name=packageName container=container}}\n *   @example {{#each reactionApps provides=\"userAccountDropdown\" enabled=true}}\n *   @example\n *     {{#each reactionApps provides=\"social\" name=\"reaction-social\"}}\n *         {{> Template.dynamic template=template data=customSocialSettings }}\n *     {{/each}}\n *\n *   @typedef optionHash\n *   @type {object}\n *   @property {string} name - name of a package.\n *   @property {string} provides -purpose of this package as identified to the registry\n *   @property {string} container - filter registry entries for matching container.\n *   @property {string} shopId - filter to only display results matching shopId, not returned\n *   @property {string} template - filter registry entries for matching template\n *   @type {optionHash}\n *\n *  @return {optionHash} returns an array of filtered, structure reactionApps\n *  [{\n *   enabled: true\n *   label: \"Stripe\"\n *   name: \"reaction-stripe\"\n *   packageId: \"QqkGsQCDRhg2LSn8J\"\n *   priority: 1\n *   provides: \"paymentMethod\"\n *   template: \"stripePaymentForm\"\n *   etc: \"additional properties as defined in Packages.registry\"\n *   ...\n *  }]\n */\n\nexport function Apps(optionHash) {\n  const filter = {};\n  const registryFilter = {};\n  let key;\n  const reactionApps = [];\n  let options = {};\n\n  // allow for object or option.hash\n  if (optionHash) {\n    if (optionHash.hash) {\n      options = optionHash.hash;\n    } else {\n      options = optionHash;\n    }\n  }\n\n  // you could provide a shopId in optionHash\n  if (!options.shopId) {\n    options.shopId = Reaction.getShopId();\n  }\n\n  // Get the shop to determine shopType\n  const shop = Shops.findOne({ _id: options.shopId }) || {};\n  const { shopType } = shop;\n\n  // remove audience permissions for owner (still needed here for older/legacy calls)\n  if (Reaction.hasOwnerAccess() && options.audience) {\n    delete options.audience;\n  }\n\n  //\n  // build filter to only get matching registry elements\n  //\n  for (key in options) {\n    if ({}.hasOwnProperty.call(options, key)) {\n      const value = options[key];\n      if (value) {\n        if (!(key === \"enabled\" || key === \"name\" || key === \"shopId\")) {\n          filter[`registry.${key}`] = Array.isArray(options[key]) ? { $in: value } : value;\n          registryFilter[key] = value;\n        } else {\n          // perhaps not the best way to check but lets admin see all packages\n          if (!Reaction.hasOwnerAccess()) {\n            if (key !== \"shopId\") {\n              registryFilter[key] = value;\n            }\n          }\n          filter[key] = value;\n        }\n      }\n    }\n  }\n\n  delete filter[\"registry.audience\"]; // Temporarily remove \"audience\" key (see comment below)\n\n  // TODO: Review fix for filter on Packages.find(filter)\n  // The current \"filter\" setup uses \"audience\" field which is not present in the registry array in most (if not all) docs\n  // in the Packages coll.\n  // For now, the audience checks (after the Package.find call) filters out the registry items based on permissions. But\n  // part of the filtering should have been handled by the Package.find call, if the \"audience\" filter works as it should.\n  Packages.find(filter).forEach((app) => {\n    const matchingRegistry = _.filter(app.registry, (item) => {\n      const itemFilter = _.cloneDeep(registryFilter);\n\n      // check audience permissions only if they exist as part of optionHash and are part of the registry item\n      // ideally all routes should use it, safe for backwards compatibility though\n      // owner bypasses permissions\n      if (!Reaction.hasOwnerAccess() && item.permissions && registryFilter.audience) {\n        let hasAccess;\n\n        for (const permission of registryFilter.audience) {\n          // This checks that the registry item contains a permissions matches with the user's permission for the shop\n          const hasPermissionToRegistryItem = item.permissions.indexOf(permission) > -1;\n          // This checks that the user's permission set have the right value that is on the registry item\n          const hasRoleAccessForShop = Roles.userIsInRole(Meteor.userId(), permission, Reaction.getShopId());\n\n          // both checks must pass for access to be granted\n          if (hasPermissionToRegistryItem && hasRoleAccessForShop) {\n            hasAccess = true;\n            break;\n          }\n        }\n\n        if (!hasAccess) {\n          return false;\n        }\n\n        // safe to clean up now, and isMatch can ignore audience\n        delete itemFilter.audience;\n      }\n\n      // Check that shopType matches showForShopType if option is present\n      if (item.showForShopTypes &&\n          Array.isArray(item.showForShopTypes) &&\n          item.showForShopTypes.indexOf(shopType) === -1) {\n        return false;\n      }\n\n      // Check that shopType does not match hideForShopType if option is present\n      if (item.hideForShopTypes &&\n          Array.isArray(item.hideForShopTypes) &&\n          item.hideForShopTypes.indexOf(shopType) !== -1) {\n        return false;\n      }\n\n      // Loop through all keys in the itemFilter\n      // each filter item should match exactly with the property in the registry or\n      // should be included in the array if that property is an array\n      return Object.keys(itemFilter).every((property) => {\n        const filterVal = itemFilter[property];\n        const itemVal = item[property];\n\n        // Check to see if the registry entry is an array.\n        // Legacy registry entries could exist that use a string even when the schema requires an array.\n        // If it's not an array, the filter should match exactly\n        return Array.isArray(itemVal) ? itemVal.includes(filterVal) : itemVal === filterVal;\n      });\n    });\n\n    for (const registry of matchingRegistry) {\n      reactionApps.push(registry);\n    }\n  });\n\n  // Sort apps by priority (registry.priority)\n  return reactionApps.sort((a, b) => a.priority - b.priority).slice();\n}\n\n// Register global template helper\nTemplate.registerHelper(\"reactionApps\", (optionHash) => Reaction.Apps(optionHash));\n","import _ from \"lodash\";\nimport { Session } from \"meteor/session\";\nimport { Meteor } from \"meteor/meteor\";\nimport { Roles } from \"meteor/alanning:roles\";\n\n/* eslint \"no-extend-native\": [2, {\"exceptions\": [\"String\"]}] */\n/* eslint \"no-alert\": 0 */\n\n/**\n * @name toggleSession\n * @method\n * @memberof Helpers\n * @todo These should all be removed. PR's happily accepted.\n * @summary Quick and easy snippet for toggling sessions\n * @param {String} sessionVariable - string name, see http://docs.meteor.com/#/basic/session\n * @param {String} positiveState - optional, if is is positiveState, set opposite\n * @return {Object} return session value\n */\nexport function toggleSession(sessionVariable, positiveState) {\n  const session = Session.get(sessionVariable);\n  const positive = positiveState || true;\n  if (_.isEqual(positive, session)) {\n    Session.set(sessionVariable, false);\n  } else {\n    Session.set(sessionVariable, positive);\n  }\n  return Session.get(sessionVariable);\n}\n\n/**\n * @name getCardTypes\n * @method\n * @memberof Helpers\n * @todo These should all be removed. PR's happily accepted.\n * @summary Determine the card type and return label\n * @todo needs i18n conversion?\n * @param {String} cardNumber - a credit card number\n * @return {String} card label, ie: visa\n */\nexport function getCardType(cardNumber) {\n  let re = new RegExp(\"^4\");\n  if (cardNumber.match(re) !== null) {\n    return \"visa\";\n  }\n  re = new RegExp(\"^(34|37)\");\n  if (cardNumber.match(re) !== null) {\n    return \"amex\";\n  }\n  re = new RegExp(\"^5[1-5]\");\n  if (cardNumber.match(re) !== null) {\n    return \"mastercard\";\n  }\n  re = new RegExp(\"^6011\");\n  if (cardNumber.match(re) !== null) {\n    return \"discover\";\n  }\n  return \"\";\n}\n\n/**\n * @name getGuestLoginState\n * @method\n * @memberof Helpers\n * @todo These should all be removed. PR's happily accepted.\n * @summary Determines if a guest checkout is enabled and the login state for users\n * @return {Boolean} true if authenticated user\n */\nexport function getGuestLoginState() {\n  if (Meteor.userId() === \"string\" && this.getShopId() && this.allowGuestCheckout()) {\n    const isGuestFlow = Session.equals(\"guestCheckoutFlow\", true);\n    const isGuest = Roles.userIsInRole(Meteor.userId(), \"guest\", this.getShopId());\n    const isAnonymous = Roles.userIsInRole(Meteor.userId(), \"anonymous\", this.getShopId());\n    if (!isGuestFlow && !isGuest && isAnonymous) {\n      return false;\n    } else if (!isGuestFlow && isGuest && !isAnonymous) {\n      return true;\n    }\n  } else if (Session.equals(\"guestCheckoutFlow\", true) && _.pluck(Meteor.user()\n    .emails, \"address\")) {\n    return true;\n  }\n  return false;\n}\n","import _ from \"lodash\";\nimport { Meteor } from \"meteor/meteor\";\nimport { Template } from \"meteor/templating\";\nimport { Reaction } from \"/client/api\";\nimport Logger from \"/client/modules/logger\";\nimport * as Collections from \"/lib/collections\";\n\n/**\n * reactionTemplate helper\n * use the reactionTemplate helper when you are using templates defined\n * as workflow templates in the package registery.Layout\n * use \"collection\" on the layout to indicate a workflow source\n *\n * @summary reactionTemplate provides templates as defined in ReactionRegistry.Layout\n * @param {Object} options - workflow defaults to \"coreLayout/coreWorkflow\"\n * @returns {Array} returns an array with labels, templates that match workflow\n */\nTemplate.registerHelper(\"reactionTemplate\", (options) => {\n  const shopId = options.hash.shopId || Reaction.getShopId();\n  // get shop info, defaults to current\n  const Shop = Collections.Shops.findOne(shopId);\n  const groupSub = Meteor.subscribe(\"Groups\", { shopId });\n  let defaultRoles;\n  if (groupSub.ready()) {\n    const groups = Collections.Groups.findOne({ slug: \"customer\", shopId });\n    defaultRoles = groups.permissions;\n  }\n\n  const reactionTemplates = [];\n  // fetch collection from shop.layout configuration\n  let layout = _.find(Shop.layout, {\n    workflow: options.hash.workflow || \"coreWorkflow\"\n  });\n\n  let layoutConfigCollection;\n  let currentId;\n\n  // determine if workflow has a target\n  // collection defined. This is where we'll\n  // fetch/save workflow changes.\n  if (layout) {\n    layoutConfigCollection = layout.collection || \"Cart\";\n  } else {\n    Logger.error(\"Shop Layout Undefined\");\n    layoutConfigCollection = \"Cart\";\n  }\n\n  // if we've got an id, we'll use it with the layout's collection\n  // and get the current status of the workflowTargetCollection\n  if (Template.currentData() && Template.currentData()._id) {\n    currentId = Template.currentData()._id;\n  } else {\n    const currentCart = Collections.Cart.findOne({\n      userId: Meteor.userId()\n    });\n    currentId = currentCart && currentCart._id;\n  }\n  // we'll get current cart status by default, as the most common case\n  // TODO: expand query options\n  currentId = options.hash.id || currentId;\n\n  // The currentCollection must have workflow schema attached.\n  // layoutConfigCollection is the collection defined in Shops.workflow\n  const workflowTargetCollection = Collections[layoutConfigCollection];\n  const currentCollection = workflowTargetCollection.findOne(currentId);\n  const currentStatus = currentCollection.workflow.status;\n  const currentCollectionWorkflow = currentCollection.workflow.workflow;\n  const packages = Collections.Packages.find({\n    layout: {\n      $elemMatch: options.hash\n    },\n    shopId\n  });\n\n  //  we can have multiple packages contributing to the layout / workflow\n  packages.forEach((reactionPackage) => {\n    const layoutWorkflows = _.filter(reactionPackage.layout, options.hash);\n    // check the packages for layout workflow templates\n    for (layout of layoutWorkflows) {\n      // audience is layout permissions\n      if (layout.audience === undefined) {\n        layout.audience = defaultRoles || \"owner\";\n      }\n\n      // check permissions so you don't have to on template.\n      if (Reaction.hasPermission(layout.audience)) {\n        // todo: review this hack to remove layout\n        // from the workflow\n        if (!layout.layout) {\n          // default is boolean false status\n          // true = we've completed this workflow\n          // false = pending (future) step\n          // <template> = in process (current) step.\n          layout.status = _.includes(currentCollectionWorkflow, layout.template);\n          // if the current template is already the current status\n          if (layout.template === currentStatus) {\n            layout.status = currentStatus;\n          }\n          // push to reactionTemplates\n          reactionTemplates.push(layout);\n        }\n      }\n    }\n  });\n  return reactionTemplates;\n});\n","import { Meteor } from \"meteor/meteor\";\nimport { Template } from \"meteor/templating\";\nimport { Reaction } from \"/client/api\";\n\n/*\n * Methods for the reaction permissions\n * helpers for roles, uses alanning:meteor-roles\n * see: http://alanning.github.io/meteor-roles/classes/Roles.html\n * use: {{hasPermission admin userId}}\n */\n\n/**\n * hasPermission template helper\n * @summary check current user hasPermission\n * @param  {String|Array} \"permissions\"\n * @param  {String} checkUserId - optional Meteor.userId, default to current\n * @return {Boolean}\n */\nTemplate.registerHelper(\"hasPermission\", (permissions, options) => {\n  // default to checking this.userId\n  const loggedInUser = Meteor.userId();\n  const shopId = Reaction.getShopId();\n  // we don't necessarily need to check here\n  // as these same checks and defaults are\n  // also performed in Reaction.hasPermission\n  if (typeof options === \"object\") {\n    if (options.hash.userId) {\n      const { userId } = options.hash;\n      return Reaction.hasPermission(permissions, userId || loggedInUser, shopId);\n    }\n  }\n  return Reaction.hasPermission(permissions, loggedInUser, shopId);\n});\n\n/**\n * hasOwnerAccess template helper\n * @summary check if user has owner access\n * @return {Boolean} return true if owner\n */\nTemplate.registerHelper(\"hasOwnerAccess\", () => Reaction.hasOwnerAccess());\n\n/**\n * hasAdminAccess template helper\n * @summary check if user has admin access\n * @return {Boolean} return true if admin\n */\nTemplate.registerHelper(\"hasAdminAccess\", () => Reaction.hasAdminAccess());\n\n/**\n * hasDashboardAccess template helper\n * @summary check if user has dashboard access\n * @return {Boolean} return true if user has dashboard permission\n */\nTemplate.registerHelper(\"hasDashboardAccess\", () => Reaction.hasDashboardAccess());\n\n/**\n * allowGuestCheckout template helper\n * @summary check if guest users are allowed to checkout\n * @return {Boolean} return true if shop has guest checkout enabled\n */\nTemplate.registerHelper(\"allowGuestCheckout\", () => Reaction.allowGuestCheckout());\n","import _ from \"lodash\";\nimport \"moment/min/locales.min.js\";\nimport { Meteor } from \"meteor/meteor\";\nimport { Template } from \"meteor/templating\";\nimport { Accounts } from \"meteor/accounts-base\";\nimport { Spacebars } from \"meteor/spacebars\";\nimport { ReactiveVar } from \"meteor/reactive-var\";\nimport { Roles } from \"meteor/alanning:roles\";\nimport { i18next, Reaction } from \"/client/api\";\nimport * as Collections from \"/lib/collections\";\nimport * as Schemas from \"/lib/collections/schemas\";\nimport { toCamelCase } from \"/lib/api\";\n\n// Lazyload moment-timezone.months\nconst monthOptionsVar = new ReactiveVar([]);\nasync function lazyLoadMonths() {\n  if (monthOptionsVar.get().length) return;\n  const { locale, months } = await import(\"moment-timezone\");\n\n  let lang = i18next.language;\n  if (lang === \"zh\") {\n    lang = \"zh-cn\";\n  }\n\n  locale(lang);\n\n  const monthOptions = [];\n  const monthsList = months();\n\n  // parse into autoform array\n  for (const index in monthsList) {\n    if ({}.hasOwnProperty.call(monthsList, index)) {\n      const month = monthsList[index];\n      const mnum = parseInt(index, 10) + 1;\n      monthOptions.push({\n        value: mnum,\n        label: `${mnum} | ${month}`\n      });\n    }\n  }\n\n  monthOptionsVar.set(monthOptions);\n}\n\nTemplate.registerHelper(\"Collections\", () => Collections);\n\nTemplate.registerHelper(\"Schemas\", () => Schemas);\n\n/**\n * currentUser\n * @summary overrides Meteor Package.blaze currentUser method\n * @return {Boolean} returns true/null if user has registered\n */\n\nTemplate.registerHelper(\"currentUser\", () => {\n  if (typeof Reaction === \"object\") {\n    const shopId = Reaction.getShopId();\n    const user = Accounts.user();\n    if (!shopId || typeof user !== \"object\") return null;\n    // shoppers should always be guests\n    const isGuest = Roles.userIsInRole(user, \"guest\", shopId);\n    // but if a user has never logged in then they are anonymous\n    const isAnonymous = Roles.userIsInRole(user, \"anonymous\", shopId);\n\n    return isGuest && !isAnonymous ? user : null;\n  }\n  return null;\n});\n\n\nTemplate.registerHelper(\"monthOptions\", (showDefaultOption = true) => {\n  const label = i18next.t(\"app.monthOptions\", \"Choose month\");\n\n  // Call to get monthOptinosVar ReactiveVar\n  lazyLoadMonths();\n  let monthOptions = [];\n\n  if (showDefaultOption) {\n    monthOptions.push({\n      value: \"\",\n      label\n    });\n  }\n\n  monthOptions = monthOptions.concat(monthOptionsVar.get());\n\n  return monthOptions;\n});\n\n/**\n * yearOptions\n * @summary formats moment.js next 9 years into array for autoform selector\n * @return {Array} returns array of years [value:, label:]\n */\nTemplate.registerHelper(\"yearOptions\", (showDefaultOption = true) => {\n  const label = i18next.t(\"app.yearOptions\", \"Choose year\");\n  const yearOptions = [];\n\n  if (showDefaultOption) {\n    yearOptions.push({\n      value: \"\",\n      label\n    });\n  }\n\n  let year = new Date().getFullYear();\n  for (let i = 1; i < 9; i += 1) {\n    yearOptions.push({\n      value: year,\n      label: year\n    });\n    year += 1;\n  }\n  return yearOptions;\n});\n\n/**\n * camelToSpace\n * @summary convert a camelcased string to spaces\n * @param {String} str - camelcased string\n * @return {String} returns space formatted string\n */\nTemplate.registerHelper(\"camelToSpace\", (str) => {\n  const downCamel = str.replace(/\\W+/g, \"-\").replace(/([a-z\\d])([A-Z])/g, \"$1 $2\");\n  return downCamel.toLowerCase();\n});\n\n/**\n * toLowerCase\n * @summary convert a string to lower case\n * @param {String} str - string\n * @return {String} returns lowercased string\n */\nTemplate.registerHelper(\"toLowerCase\", (str) => str.toLowerCase());\n\n/**\n * toUpperCase\n * @summary convert a string to upper case\n * @param {String} str - string\n * @return {String} returns uppercased string\n */\nTemplate.registerHelper(\"toUpperCase\", (str) => str.toUpperCase());\n\n/**\n * capitalize\n * @summary capitalize first character of string\n * @param {String} str - string\n * @return {String} returns string with first letter capitalized\n */\nTemplate.registerHelper(\"capitalize\", (str) => str.charAt(0).toUpperCase() + str.slice(1));\n\n/**\n * toCamelCase\n * @summary camelCases a string\n * @param {String} str - string\n * @return {String|undefined} returns camelCased string\n */\nTemplate.registerHelper(\"toCamelCase\", (str) => !!str && toCamelCase(str));\n\n\n/**\n * siteName\n * @summary get the shop name\n * @return {String} returns site name\n */\nTemplate.registerHelper(\"siteName\", () => {\n  const shop = Collections.Shops.findOne();\n  return typeof shop === \"object\" && shop.name ? shop.name : \"\";\n});\n\n/*\n *  General helpers for template functionality\n */\n\n/**\n * condition\n * @summary conditional string comparison template helper\n * @example {{#if condition status \"eq\" ../value}}\n * @param {String} v1 - first variable to compare\n * @param {String} operator - eq,neq,ideq,or,lt,gt comparision operator\n * @param {String} v2 - second variable to compare\n * @return {Boolean} returns true/false\n */\nTemplate.registerHelper(\"condition\", (v1, operator, v2) => {\n  switch (operator) {\n    case \"==\":\n    case \"eq\":\n      return v1 === v2;\n    case \"!=\":\n    case \"neq\":\n      return v1 !== v2;\n    case \"===\":\n    case \"ideq\":\n      return v1 === v2;\n    case \"!==\":\n    case \"nideq\":\n      return v1 !== v2;\n    case \"&&\":\n    case \"and\":\n      return v1 && v2;\n    case \"||\":\n    case \"or\":\n      return v1 || v2;\n    case \"<\":\n    case \"lt\":\n      return v1 < v2;\n    case \"<=\":\n    case \"lte\":\n      return v1 <= v2;\n    case \">\":\n    case \"gt\":\n      return v1 > v2;\n    case \">=\":\n    case \"gte\":\n      return v1 >= v2;\n    default:\n      throw new Meteor.Error(\"undefined-operator\", `Undefined conditional operator ${operator}`);\n  }\n});\n\n/**\n * orElse\n * @summary if this is true, or else this\n * @param {String} v1 - variable one\n * @param {String} v2 - variable two\n * @return {String} returns v1 || v2\n */\nTemplate.registerHelper(\"orElse\", (v1, v2) => v1 || v2);\n\n/**\n * key_value\n * @summary template helper pushing object key/value into array\n * @param {Object} context - object to parse into key / value\n * @return {Array} returns array[key:,value:]\n */\nTemplate.registerHelper(\"key_value\", (context) => {\n  const result = [];\n  _.each(context, (value, key) => result.push({\n    key,\n    value\n  }));\n  return result;\n});\n\n/**\n * nl2br\n * @summary template helper nl2br - Converts new line (\\n\\r) to <br>\n * from http://phpjs.org/functions/nl2br:480\n * @param {String} text - text\n * @returns {String} returns formatted Spacebars.SafeString\n */\nTemplate.registerHelper(\"nl2br\", (text) => {\n  const nl2br = (`${text}`).replace(/([^>\\r\\n]?)(\\r\\n|\\n\\r|\\r|\\n)/g, \"$1<br>$2\");\n  return new Spacebars.SafeString(nl2br);\n});\n\n/**\n * pluralize\n * @summary general helper for plurization of strings\n * @example {{plurize \"1 thing\"}}\n * @param {String} nCount - number, ie \"1 \"\n * @param {String} pString - plural string ie \" thing\"\n * @todo adapt to, and use i18next\n */\nTemplate.registerHelper(\"pluralize\", (nCount, pString) => {\n  if (nCount === 1) {\n    return `1 ${pString}`;\n  }\n  return `${nCount} ${pString}s`;\n});\n","import { latinLangs, getShopLang } from \"/lib/api/helpers\";\n\n// dynamic import of slugiy/transliteration.slugify\nlet slugify;\nasync function lazyLoadSlugify() {\n  let mod;\n  // getting the shops base language\n  const lang = getShopLang();\n  // if slugify has been loaded but the language has changed\n  // to be a non latin based language then load transliteration\n  if (slugify && slugify.name === \"replace\" && latinLangs.indexOf(lang) === -1) {\n    mod = await import(\"transliteration\");\n  } else if (slugify) {\n    // if slugify/transliteration is loaded and no lang change\n    return;\n  } else if (latinLangs.indexOf(lang) >= 0) {\n    // if the shops language use latin based chars load slugify else load transliterations's slugify\n    mod = await import(\"slugify\");\n  } else {\n    mod = await import(\"transliteration\");\n  }\n\n  // slugify is exported to modules.default while transliteration is exported to modules.slugify\n  slugify = mod.default || mod.slugify;\n}\n\n\n/**\n * @name getSlug\n * @summary Return a client slugified string using the \"slugify\" global from the transliteration package\n * @see https://www.npmjs.com/package/transliteration\n * @method\n * @memberof Helpers\n * @locus Client\n * @param  {String} slugString - string to slugify\n * @return {String} slugified string\n */\nexport function getSlug(slugString) {\n  let slug;\n  Promise.resolve(lazyLoadSlugify());\n  if (slugString && slugify) {\n    slug = slugify(slugString.toLowerCase());\n  } else {\n    slug = \"\";\n  }\n  return slug;\n}\n","import store from \"store\";\nimport { Accounts } from \"meteor/accounts-base\";\nimport { Session } from \"meteor/session\";\nimport { Random } from \"meteor/random\";\n\n/*\n * registerLoginHandler\n * method to create anonymous users\n */\n\nAccounts.loginWithAnonymous = function (anonymous, callback) {\n  // We need to be sure that every user will work inside a session. Sometimes\n  // session could be destroyed, for example, by clearing browser's cache. In\n  // that case we need to take care about creating new session before new\n  // user or anonymous will be created/logged in.\n  // The problem here - looks like where is no way to track localStorage:\n  // `store.get(\"Reaction.session\")` itself. That's why we need to use\n  // another way: `accounts` package uses `setTimeout` for monitoring connection\n  // Accounts.callLoginMethod will be called after clearing cache. We could\n  // latch on this computations by running extra check here.\n  if (typeof store.get(\"Reaction.session\") !== \"string\") {\n    const newSession = Random.id();\n    store.set(\"Reaction.session\", newSession);\n    Session.set(\"sessionId\", newSession);\n  }\n  Accounts.callLoginMethod({\n    methodArguments: [{\n      anonymous: true,\n      sessionId: Session.get(\"sessionId\")\n    }],\n    userCallback: callback\n  });\n};\n","import Core from \"./main\";\nimport * as Apps from \"./helpers/apps\";\nimport * as Globals from \"./helpers/globals\";\nimport * as Utils from \"./helpers/utils\";\nimport { Subscriptions } from \"./subscriptions\";\n\nimport Log from \"/client/modules/logger\";\nimport { DOM } from \"/imports/plugins/core/dom/client\";\nimport { Router } from \"/client/modules/router\";\n\nimport * as Collections from \"/lib/collections\";\nimport * as Schemas from \"/lib/collections/schemas\";\n\n\nexport const Reaction = Object.assign(\n  Core,\n  Apps,\n  Globals,\n  Utils,\n  { Subscriptions },\n  { Log },\n  { DOM },\n  { Router },\n  { Collections },\n  { Schemas }\n);\n","import store from \"store\";\nimport { Meteor } from \"meteor/meteor\";\nimport { Tracker } from \"meteor/tracker\";\nimport { Accounts as AccountsCollection } from \"/lib/collections\";\nimport { Accounts } from \"meteor/accounts-base\";\n\nimport { Reaction, Logger } from \"/client/api\";\nimport { userPrefs } from \"./main\";\n\nconst cookieName = \"_RcFallbackLoginToken\";\n\n/**\n *  Startup Reaction\n *  Init Reaction client\n */\nMeteor.startup(() => {\n  // init the core\n  Reaction.init();\n\n  // initialize anonymous guest users\n  Tracker.autorun(() => {\n    const userId = Meteor.userId();\n\n    // Load data from Accounts collection into the localStorage\n    Tracker.nonreactive(() => {\n      // Don't load the data from Accounts Collection again when something changes\n      // as we are already storing everything in the localStorage reactively\n      try {\n        const user = AccountsCollection.findOne(userId);\n        if (user && user.profile && user.profile.preferences) {\n          Object.keys(user.profile.preferences).forEach((packageName) => {\n            const packageSettings = user.profile.preferences[packageName];\n            Object.keys(packageSettings).forEach((preference) => {\n              if (packageName === \"reaction\" && preference === \"activeShopId\") {\n                // Because activeShopId is cached on client side.\n                Reaction.setShopId(packageSettings[preference]);\n              } else {\n                Reaction.setUserPreferences(packageName, preference, packageSettings[preference]);\n              }\n            });\n          });\n        }\n      } catch (err) {\n        Logger.error(\"Problem in loading user preferences from Accounts collection\");\n      }\n    });\n\n    if (userId && !isLocalStorageAvailable() && !readCookie(cookieName)) {\n      Logger.debug(\"No local storage available. About to set up fallback login \" +\n        \"mechanism with cookie login token.\");\n      Meteor.call(\"accounts/createFallbackLoginToken\", (err, token) => {\n        if (!err && token) {\n          window.onbeforeunload = () => createSessionCookie(cookieName, token);\n          return;\n        }\n        // Can't set login cookie. Fail silently.\n        Logger.error(\"Setting up fallback login mechanism failed!\");\n      });\n    }\n\n    // TODO: maybe `visibilityState` will be better here\n    let loggingIn;\n    let sessionId;\n    Tracker.nonreactive(() => {\n      loggingIn = Accounts.loggingIn();\n      sessionId = store.get(\"Reaction.session\");\n    });\n\n    if (!userId) {\n      if (!loggingIn || typeof sessionId !== \"string\") {\n        if (!isLocalStorageAvailable() && readCookie(cookieName)) {\n          // If re-login through local storage fails, RC falls back\n          // to cookie-based login. E.g. Applies for Safari browser in\n          // incognito mode.\n          Accounts.loginWithToken(readCookie(cookieName));\n        } else {\n          Accounts.loginWithAnonymous();\n        }\n      }\n    }\n  });\n\n  // Set up an autorun to get fine-grained reactivity on only the\n  // user preferences\n  Tracker.autorun(() => {\n    const userId = Meteor.userId();\n    if (!userId) return;\n    const user = Meteor.users.findOne(userId, { fields: { profile: 1 } });\n    userPrefs.set((user && user.profile && user.profile.preferences) || undefined);\n  });\n});\n\nfunction isLocalStorageAvailable() {\n  try {\n    localStorage.testKey = \"testValue\";\n  } catch (e) {\n    return false;\n  }\n  delete localStorage.testKey;\n  return true;\n}\n\nfunction readCookie(name) {\n  const nameEq = `${name}=`;\n  const ca = document.cookie.split(\";\");\n  for (let i = 0; i < ca.length; i += 1) {\n    let c = ca[i];\n    while (c.charAt(0) === \" \") c = c.substring(1, c.length);\n    if (c.indexOf(nameEq) === 0) {\n      return c.substring(nameEq.length, c.length);\n    }\n  }\n  return null;\n}\n\nfunction createSessionCookie(name, value) {\n  document.cookie = `${name}=${value}; path=/`;\n}\n","import store from \"store\";\nimport { Meteor } from \"meteor/meteor\";\nimport { Random } from \"meteor/random\";\nimport { Session } from \"meteor/session\";\nimport { Tracker } from \"meteor/tracker\";\nimport { SubsManager } from \"meteor/meteorhacks:subs-manager\";\nimport Reaction from \"./main\";\n\nexport const Subscriptions = {};\n\n// Subscription Manager\n// See: https://github.com/kadirahq/subs-manager\nSubscriptions.Manager = new SubsManager();\n\nSubscriptions.Account = Subscriptions.Manager.subscribe(\"Accounts\", Meteor.userId());\n\n/*\n * Reaction.session\n * Create persistent sessions for users\n * The server returns only one record, so findOne will return that record\n * Stores into client session all data contained in server session\n * supports reactivity when server changes `newSession`\n * Stores the server session id into local storage / cookies\n *\n * Also localStorage session could be set from the client-side. This could\n * happen when user flush browser's cache, for example.\n * @see https://github.com/reactioncommerce/reaction/issues/609#issuecomment-166389252\n */\n\n/**\n * General Subscriptions\n */\n\n// Primary shop subscription\nSubscriptions.PrimaryShop = Subscriptions.Manager.subscribe(\"PrimaryShop\");\n\n// Additional shop subscriptions\nSubscriptions.MerchantShops = Subscriptions.Manager.subscribe(\"MerchantShops\");\n\n// This Packages subscription is used for the Active shop's packages\n// // Init sub here so we have a \"ready\" state\nSubscriptions.Packages = Subscriptions.Manager.subscribe(\"Packages\");\n\n// This packages subscription is used for the Primary Shop's packages\n// The Packages publication defaults to returning the primaryShopId's packages,\n// so this subscription shouldn't ever need to be changed\n// TODO: Consider how to handle routes for several shops which are all active at once\nSubscriptions.PrimaryShopPackages = Subscriptions.Manager.subscribe(\"Packages\");\n\nSubscriptions.Tags = Subscriptions.Manager.subscribe(\"Tags\");\n\nSubscriptions.Groups = Subscriptions.Manager.subscribe(\"Groups\");\n\nSubscriptions.BrandAssets = Subscriptions.Manager.subscribe(\"BrandAssets\");\n\n/**\n * Subscriptions that need to reload on new sessions\n */\nTracker.autorun(() => {\n  // we are trying to track both amplify and Session.get here, but the problem\n  // is - we can't track amplify. It just not tracked. So, to track amplify we\n  // are using dirty hack inside Accounts.loginWithAnonymous method.\n  const sessionId = store.get(\"Reaction.session\");\n  let newSession;\n  Tracker.nonreactive(() => {\n    newSession = Random.id();\n  });\n  if (typeof sessionId !== \"string\") {\n    store.set(\"Reaction.session\", newSession);\n    Session.set(\"sessionId\", newSession);\n  }\n  if (typeof Session.get(\"sessionId\") !== \"string\") {\n    Session.set(\"sessionId\", store.get(\"Reaction.session\"));\n  }\n  Subscriptions.Sessions = Meteor.subscribe(\"Sessions\", Session.get(\"sessionId\"));\n});\n\n// @see http://guide.meteor.com/data-loading.html#changing-arguments\nTracker.autorun(() => {\n  let sessionId;\n  // we really don't need to track the sessionId here\n  Tracker.nonreactive(() => {\n    sessionId = Session.get(\"sessionId\");\n  });\n  Subscriptions.Cart = Subscriptions.Manager.subscribe(\"Cart\", sessionId, Meteor.userId());\n  Subscriptions.UserProfile = Meteor.subscribe(\"UserProfile\", Meteor.userId());\n});\n\nTracker.autorun(() => {\n  // Reload Packages sub if shopId changes\n  // We have a persistent subscription to the primary shop's packages,\n  // so don't refresh sub if we're updating to primaryShopId sub\n  if (Reaction.getShopId() && Reaction.getShopId() !== Reaction.getPrimaryShopId()) {\n    Subscriptions.Packages = Subscriptions.Manager.subscribe(\"Packages\", Reaction.getShopId());\n  }\n});\n","import _ from \"lodash\";\nimport store from \"store\";\nimport { Accounts as MeteorAccounts } from \"meteor/accounts-base\";\nimport { Meteor } from \"meteor/meteor\";\nimport { Session } from \"meteor/session\";\nimport { check } from \"meteor/check\";\nimport { Tracker } from \"meteor/tracker\";\nimport { ReactiveVar } from \"meteor/reactive-var\";\nimport { ReactiveDict } from \"meteor/reactive-dict\";\nimport { Roles } from \"meteor/alanning:roles\";\nimport Logger from \"/client/modules/logger\";\nimport { Countries } from \"/client/collections\";\nimport { localeDep } from \"/client/modules/i18n\";\nimport { Packages, Shops, Accounts } from \"/lib/collections\";\nimport { Router } from \"/client/modules/router\";\n\n// Global, private state object for client side\n// This is placed outside the main object to make it a private variable.\n// access using `Reaction.state`\nconst reactionState = new ReactiveDict();\n\nexport const userPrefs = new ReactiveVar(undefined, (val, newVal) => JSON.stringify(val) === JSON.stringify(newVal));\n\nconst deps = new Map();\n/**\n * Reaction namespace\n * Global reaction shop permissions methods and shop initialization\n */\nexport default {\n  _shopId: new ReactiveVar(null), // The active shop\n  _primaryShopId: new ReactiveVar(null), // The first shop created\n  marketplace: { _ready: false }, // Marketplace Settings\n\n  Locale: new ReactiveVar({}),\n\n  init() {\n    Tracker.autorun(() => {\n      // marketplaceSettings come over on the PrimaryShopPackages subscription\n      if (this.Subscriptions.PrimaryShopPackages.ready()) {\n        if (!this.marketplace._ready) {\n          const marketplacePkgSettings = this.getMarketplaceSettings();\n          if (marketplacePkgSettings && marketplacePkgSettings.public) {\n            this.marketplace._ready = true;\n            this.marketplace = marketplacePkgSettings.public;\n            this.marketplace.enabled = true;\n          }\n        }\n      }\n    });\n\n    // Listen for the primary shop subscription and set accordingly\n    Tracker.autorun(() => {\n      let shop;\n      if (this.Subscriptions.PrimaryShop.ready()) {\n        // There should only ever be one \"primary\" shop\n        shop = Shops.findOne({\n          shopType: \"primary\"\n        });\n\n        if (shop) {\n          this.primaryShopId = shop._id;\n          this.primaryShopName = shop.name;\n\n          // We'll initialize locale and currency for the primary shop unless\n          // marketplace settings exist and merchantLocale is set to true\n          if (this.marketplace.merchantLocale !== true) {\n            // initialize local client Countries collection\n            if (!Countries.findOne()) {\n              createCountryCollection(shop.locales.countries);\n            }\n\n            const locale = this.Locale.get() || {};\n\n            // fix for https://github.com/reactioncommerce/reaction/issues/248\n            // we need to keep an eye for rates changes\n            if (typeof locale.locale === \"object\" &&\n                 typeof locale.currency === \"object\" &&\n                 typeof locale.locale.currency === \"string\") {\n              const localeCurrency = locale.locale.currency.split(\",\")[0];\n              if (typeof shop.currencies[localeCurrency] === \"object\") {\n                if (typeof shop.currencies[localeCurrency].rate === \"number\") {\n                  locale.currency.rate = shop.currencies[localeCurrency].rate;\n                  localeDep.changed();\n                }\n              }\n            }\n            // we are looking for a shopCurrency changes here\n            if (typeof locale.shopCurrency === \"object\") {\n              locale.shopCurrency = shop.currencies[shop.currency];\n              localeDep.changed();\n            }\n          }\n        }\n      }\n    });\n\n    // Listen for active shop change\n    return Tracker.autorun(() => {\n      let shop;\n      if (this.Subscriptions.MerchantShops.ready()) {\n        // get domain (e.g localhost) from absolute url (e.g http://localhost:3000/)\n        const [, , host] = Meteor.absoluteUrl().split(\"/\");\n        const [domain] = host.split(\":\");\n\n        // if we don't have an active shopId, try to retreive it from the userPreferences object\n        // and set the shop from the storedShopId\n        if (!this.shopId) {\n          const storedShopId = this.getUserPreferences(\"reaction\", \"activeShopId\");\n          if (storedShopId) {\n            shop = Shops.findOne({\n              _id: storedShopId\n            });\n          } else {\n            shop = Shops.findOne({\n              domains: domain\n            });\n          }\n        }\n\n        if (shop) {\n          // Only set shopId if it hasn't been set yet\n          if (!this.shopId) {\n            this.shopId = shop._id;\n            this.shopName = shop.name;\n          }\n\n          // We only use the active shop to setup locale if marketplace settings\n          // are enabled and merchantLocale is set to true\n          if (this.marketplace.merchantLocale === true) {\n          // initialize local client Countries collection\n            if (!Countries.findOne()) {\n              createCountryCollection(shop.locales.countries);\n            }\n\n            const locale = this.Locale.get() || {};\n\n            // fix for https://github.com/reactioncommerce/reaction/issues/248\n            // we need to keep an eye for rates changes\n            if (typeof locale.locale === \"object\" &&\n            typeof locale.currency === \"object\" &&\n            typeof locale.locale.currency === \"string\") {\n              const localeCurrency = locale.locale.currency.split(\",\")[0];\n              if (typeof shop.currencies[localeCurrency] === \"object\") {\n                if (typeof shop.currencies[localeCurrency].rate === \"number\") {\n                  locale.currency.rate = shop.currencies[localeCurrency].rate;\n                  localeDep.changed();\n                }\n              }\n            }\n            // we are looking for a shopCurrency changes here\n            if (typeof locale.shopCurrency === \"object\") {\n              locale.shopCurrency = shop.currencies[shop.currency];\n              localeDep.changed();\n            }\n          }\n          return this;\n        }\n      }\n    });\n  },\n\n  // Return global \"reactionState\" Reactive Dict\n  get state() {\n    return reactionState;\n  },\n\n  /**\n   * hasPermission - client\n   * client permissions checks\n   * hasPermission exists on both the server and the client.\n   *\n   * @param {String | Array} checkPermissions -String or Array of permissions if empty, defaults to \"admin, owner\"\n   * @param {String} checkUserId - userId, defaults to Meteor.userId()\n   * @param {String} checkGroup group - default to shopId\n   * @return {Boolean} Boolean - true if has permission\n   */\n  hasPermission(checkPermissions, checkUserId, checkGroup) {\n    let group;\n    // default group to the shop or global if shop isn't defined for some reason.\n    if (checkGroup !== undefined && typeof checkGroup === \"string\") {\n      group = checkGroup;\n    } else {\n      group = this.getShopId() || Roles.GLOBAL_GROUP;\n    }\n\n    let permissions = [\"owner\"];\n    let id = \"\";\n    const userId = checkUserId || Meteor.userId();\n    //\n    // local roleCheck function\n    // is the bulk of the logic\n    // called out a userId is validated.\n    //\n    function roleCheck() {\n      // permissions can be either a string or an array\n      // we'll force it into an array and use that\n      if (checkPermissions === undefined) {\n        permissions = [\"owner\"];\n      } else if (typeof checkPermissions === \"string\") {\n        permissions = [checkPermissions];\n      } else {\n        permissions = checkPermissions;\n      }\n      // if the user has owner permissions we'll always check if those roles are enough\n      // By adding the \"owner\" role to the permissions list, we are making hasPermission always return\n      // true for \"owners\". This gives owners global access.\n      // TODO: Review this way of granting global access for owners\n      permissions.push(\"owner\");\n      permissions = _.uniq(permissions);\n\n      //\n      // return if user has permissions in the group\n      //\n      if (Roles.userIsInRole(userId, permissions, group)) {\n        return true;\n      }\n\n      // global roles check\n      // TODO: Review this commented out code\n      /*\n\n      const sellerShopPermissions = Roles.getGroupsForUser(userId, \"admin\");\n      // we're looking for seller permissions.\n      if (sellerShopPermissions) {\n        // loop through shops roles and check permissions\n        for (const key in sellerShopPermissions) {\n          if (key) {\n            const shop = sellerShopPermissions[key];\n            if (Roles.userIsInRole(userId, permissions, shop)) {\n              return true;\n            }\n          }\n        }\n      }*/\n      // no specific permissions found returning false\n      return false;\n    }\n\n    //\n    // check if a user id has been found\n    // in line 156 setTimeout\n    //\n    function validateUserId() {\n      if (Meteor.userId()) {\n        Meteor.clearTimeout(id);\n        Router.reload();\n        return roleCheck();\n      }\n      return false;\n    }\n\n    //\n    // actual logic block to check permissions\n    // we'll bypass unecessary checks during\n    // a user logging, as we'll check again\n    // when everything is ready\n    //\n    let loggingIn;\n    Tracker.nonreactive(() => {\n      loggingIn = MeteorAccounts.loggingIn();\n    });\n    if (loggingIn === false) {\n      //\n      // this userId check happens because when logout\n      // occurs it takes a few cycles for a new anonymous user\n      // to get created and during this time the user has no\n      // permission, not even guest permissions so we\n      // need to wait and reload the routes. This\n      // mainly affects the logout from dashboard pages\n      //\n      if (!userId) {\n        id = Meteor.setTimeout(validateUserId, 5000);\n      } else {\n        return roleCheck();\n      }\n    }\n    // return false to be safe\n    return false;\n  },\n\n\n  /**\n   * hasDashboardAccessForAnyShop - client\n   * client permission check for any \"owner\", \"admin\", or \"dashboard\" permissions for any shop.\n   *\n   * @todo This could be faster with a dedicated hasAdminDashboard boolean on the user object\n   * @param { Object } options - options object that can be passed a user and/or a set of permissions\n   * @return {Boolean} Boolean - true if has dashboard access for any shop\n   */\n  hasDashboardAccessForAnyShop(options = { user: Meteor.user(), permissions: [\"owner\", \"admin\", \"dashboard\"] }) {\n    const { user, permissions } = options;\n\n    if (!user || !user.roles) {\n      return false;\n    }\n\n    // Nested find that determines if a user has any of the permissions\n    // specified in the `permissions` array for any shop\n    const hasPermissions = Object.keys(user.roles).find((shopId) => user.roles[shopId].find((role) => permissions.find((permission) => permission === role)));\n\n    // Find returns undefined if nothing is found.\n    // This will return true if permissions are found, false otherwise\n    return typeof hasPermissions !== \"undefined\";\n  },\n\n  /**\n   * hasDashboardAccessForAnyShop - client\n   * @summary - client permission check for any \"owner\", \"admin\", or \"dashboard\" permissions for more than one shop.\n   * @return {Boolean} Boolean - true if has dashboard access for more than one shop\n   */\n  hasDashboardAccessForMultipleShops() {\n    const adminShopIds = this.getShopsForUser([\"owner\", \"admin\", \"dashboard\"]);\n    return Array.isArray(adminShopIds) && adminShopIds.length > 1;\n  },\n\n  hasOwnerAccess() {\n    const ownerPermissions = [\"owner\"];\n    return this.hasPermission(ownerPermissions);\n  },\n\n  /**\n   * Checks to see if the user has admin permissions. If a shopId is optionally\n   * passed in, we check for that shopId, otherwise we check against the default\n   * @method hasAdminAccess\n   * @param  {string} [shopId] Optional shopId to check access against\n   * @return {Boolean} true if the user has admin or owner permission,\n   *                   otherwise false\n   */\n  hasAdminAccess(shopId) {\n    const adminPermissions = [\"owner\", \"admin\"];\n    if (shopId) {\n      return this.hasPermission(adminPermissions, Meteor.userId(), shopId);\n    }\n    return this.hasPermission(adminPermissions);\n  },\n\n  hasDashboardAccess() {\n    const dashboardPermissions = [\"owner\", \"admin\", \"dashboard\"];\n    return this.hasPermission(dashboardPermissions);\n  },\n\n  hasShopSwitcherAccess() {\n    return this.hasDashboardAccessForMultipleShops();\n  },\n\n  getSellerShopId(userId = Meteor.userId(), noFallback = false) {\n    if (userId) {\n      const group = Roles.getGroupsForUser(userId, \"admin\")[0];\n      if (group) {\n        return group;\n      }\n    }\n\n    if (noFallback) {\n      return false;\n    }\n\n    return this.getShopId();\n  },\n\n  getUserPreferences(packageName, preference, defaultValue) {\n    getDep(`${packageName}.${preference}`).depend();\n    if (Meteor.user()) {\n      const packageSettings = store.get(packageName);\n      // packageSettings[preference] should not be undefined or null.\n      if (packageSettings && typeof packageSettings[preference] !== \"undefined\" && packageSettings[preference] !== null) {\n        return packageSettings[preference];\n      }\n    }\n\n    return defaultValue || undefined;\n  },\n\n  setUserPreferences(packageName, preference, value) {\n    getDep(`${packageName}.${preference}`).changed();\n    // User preferences are not stored in Meteor.user().profile\n    // to prevent all autorun() with dependency on Meteor.user() to run again.\n    if (Meteor.user()) {\n      // \"reaction\" package settings should be synced to\n      // the Accounts collection.\n      const syncedPackages = [\"reaction\"];\n      if (syncedPackages.indexOf(packageName) > -1) {\n        Accounts.update(Meteor.userId(), {\n          $set: {\n            [`profile.preferences.${packageName}.${preference}`]: value\n          }\n        });\n      }\n    }\n    const packageSettings = store.get(packageName) || {};\n    packageSettings[preference] = value;\n    return store.set(packageName, packageSettings);\n  },\n\n  updateUserPreferences(packageName, preference, values) {\n    const currentPreference = this.getUserPreferences(packageName, preference, {});\n    return this.setUserPreferences(packageName, preference, {\n      ...currentPreference,\n      ...values\n    });\n  },\n\n  // primaryShopId is the first created shop. In a marketplace setting it's\n  // the shop that controls the marketplace and can see all other shops.\n  get primaryShopId() {\n    return this._primaryShopId.get();\n  },\n\n  set primaryShopId(shopId) {\n    this._primaryShopId.set(shopId);\n  },\n\n  getPrimaryShopId() {\n    return this.primaryShopId;\n  },\n\n  getPrimaryShopName() {\n    const shopId = this.getPrimaryShopId();\n    const shop = Shops.findOne({\n      _id: shopId\n    });\n\n    if (shop && shop.name) {\n      return shop.name;\n    }\n\n    // If we can't find the primaryShop return an empty string\n    return \"\";\n  },\n\n  // Primary Shop should probably not have a prefix (or should it be /shop?)\n  getPrimaryShopPrefix() {\n    return `/${this.getSlug(this.getPrimaryShopName().toLowerCase())}`;\n  },\n\n  getPrimaryShopSettings() {\n    const settings = Packages.findOne({\n      name: \"core\",\n      shopId: this.getPrimaryShopId()\n    }) || {};\n    return settings.settings || {};\n  },\n\n  getPrimaryShopCurrency() {\n    const shop = Shops.findOne({\n      _id: this.getPrimaryShopId()\n    });\n\n    return (shop && shop.currency) || \"USD\";\n  },\n\n  // shopId refers to the active shop. For most shoppers this will be the same\n  // as the primary shop, but for administrators this will usually be the shop\n  // they administer.\n  get shopId() {\n    return this._shopId.get();\n  },\n\n  getShopId() {\n    return this.shopId || this.getUserPreferences(\"reaction\", \"activeShopId\");\n  },\n\n  set shopId(id) {\n    this._shopId.set(id);\n  },\n\n  setShopId(id) {\n    if (!id || this.shopId === id) { return; }\n\n    this.shopId = id;\n    this.setUserPreferences(\"reaction\", \"activeShopId\", id);\n\n    Meteor.call(\"shop/resetShopId\");\n  },\n\n  /**\n   * getShopName\n   * @summary gets name of shop by provided shopId, or current active shop if shopId is not provided\n   * @param {String} providedShopID - shopId of shop to return name of\n   * @return {String} - shop name\n   */\n  getShopName(providedShopId) {\n    const shopId = providedShopId || this.getShopId();\n    const shop = Shops.findOne({\n      _id: shopId\n    });\n    return shop && shop.name;\n  },\n\n  getShopPrefix() {\n    const shopName = this.getShopName();\n    if (shopName) {\n      return Router.pathFor(\"index\", {\n        hash: {\n          shopSlug: this.getSlug(shopName.toLowerCase())\n        }\n      });\n    }\n  },\n\n  getShopSettings() {\n    const settings = Packages.findOne({\n      name: \"core\",\n      shopId: this.shopId\n    }) || {};\n    return settings.settings || {};\n  },\n\n  getShopCurrency() {\n    const shop = Shops.findOne({\n      _id: this.shopId\n    });\n\n    return (shop && shop.currency) || \"USD\";\n  },\n\n  isPreview() {\n    const viewAs = this.getUserPreferences(\"reaction-dashboard\", \"viewAs\", \"administrator\");\n\n    if (viewAs === \"customer\") {\n      return true;\n    }\n\n    return false;\n  },\n\n  getPackageSettings(name) {\n    const shopId = this.getShopId();\n    const query = { name };\n\n    if (shopId) {\n      query.shopId = shopId;\n    }\n\n    return Packages.findOne(query);\n  },\n\n  getPackageSettingsWithOptions(options) {\n    const query = options;\n    return Packages.findOne(query);\n  },\n\n  allowGuestCheckout() {\n    const settings = this.getShopSettings();\n    // we can disable in admin, let's check.\n    return !!(settings.public && settings.public.allowGuestCheckout);\n  },\n  /**\n   * canInviteToGroup - client (similar to server/api canInviteToGroup)\n   * @summary checks if the user making the request is allowed to make invitation to that group\n   * @param {Object} options -\n   * @param {Object} options.group - group to invite to\n   * @param {Object} options.user - user object  making the invite (Meteor.user())\n   * @return {Boolean} -\n   */\n  canInviteToGroup(options) {\n    const { group } = options;\n    let { user } = options;\n    if (!user) {\n      user = Meteor.user();\n    }\n    const userPermissions = user.roles[group.shopId];\n    const groupPermissions = group.permissions;\n\n    // granting invitation right for user with `owner` role in a shop\n    if (this.hasPermission([\"owner\"], Meteor.userId(), group.shopId)) {\n      return true;\n    }\n\n    // checks that userPermissions includes all elements from groupPermissions\n    // we are not using Reaction.hasPermission here because it returns true if the user has at least one\n    return _.difference(groupPermissions, userPermissions).length === 0;\n  },\n  /**\n   * @description showActionView\n   *\n   * @param {String} viewData {label, template, data}\n   * @returns {String} Session \"admin/showActionView\"\n   */\n  showActionView(viewData) {\n    Session.set(\"admin/showActionView\", true);\n    this.setActionView(viewData);\n  },\n\n  isActionViewOpen() {\n    return Session.equals(\"admin/showActionView\", true);\n  },\n\n  isActionViewDetailOpen() {\n    return Session.equals(\"admin/showActionViewDetail\", true);\n  },\n\n  setActionView(viewData) {\n    this.hideActionViewDetail();\n    if (viewData) {\n      let viewStack;\n\n      if (Array.isArray(viewData)) {\n        viewStack = viewData;\n      } else {\n        viewStack = [viewData];\n      }\n\n      Session.set(\"admin/actionView\", viewStack);\n    } else {\n      const registryItem = this.getRegistryForCurrentRoute(\"settings\");\n\n      if (registryItem) {\n        this.setActionView(registryItem);\n      } else {\n        this.setActionView({\n          template: \"blankControls\"\n        });\n      }\n    }\n  },\n\n  pushActionView(viewData) {\n    Session.set(\"admin/showActionView\", true);\n\n    const actionViewStack = Session.get(\"admin/actionView\");\n\n    if (viewData) {\n      actionViewStack.push(viewData);\n      Session.set(\"admin/actionView\", actionViewStack);\n    } else {\n      const registryItem = this.getRegistryForCurrentRoute(\"settings\");\n\n      if (registryItem) {\n        this.pushActionView(registryItem);\n      } else {\n        this.pushActionView({ template: \"blankControls\" });\n      }\n    }\n  },\n\n  isActionViewAtRootView() {\n    const actionViewStack = Session.get(\"admin/actionView\");\n\n    if (Array.isArray(actionViewStack) && actionViewStack.length === 1) {\n      return true;\n    }\n\n    return false;\n  },\n\n  popActionView() {\n    const actionViewStack = Session.get(\"admin/actionView\");\n    actionViewStack.pop();\n\n    Session.set(\"admin/actionView\", actionViewStack);\n\n    this.setActionViewDetail({}, { open: false });\n  },\n\n  setActionViewDetail(viewData, options = {}) {\n    const { open } = options;\n\n    Session.set(\"admin/showActionView\", true);\n    Session.set(\"admin/showActionViewDetail\", typeof open === \"boolean\" ? open : true);\n    Session.set(\"admin/detailView\", [viewData]);\n  },\n\n  pushActionViewDetail(viewData) {\n    Session.set(\"admin/showActionView\", true);\n    Session.set(\"admin/showActionViewDetail\", true);\n\n    const detailViewStack = Session.get(\"admin/detailView\");\n\n    if (viewData) {\n      detailViewStack.push(viewData);\n      Session.set(\"admin/detailView\", detailViewStack);\n    }\n  },\n\n  popActionViewDetail() {\n    const detailViewStack = Session.get(\"admin/detailView\");\n    detailViewStack.pop();\n\n    Session.set(\"admin/detailView\", detailViewStack);\n  },\n\n  isActionViewDetailAtRootView() {\n    const actionViewDetailStack = Session.get(\"admin/detailView\");\n\n    if (Array.isArray(actionViewDetailStack) && actionViewDetailStack.length === 1) {\n      return true;\n    }\n\n    return false;\n  },\n\n  getActionView() {\n    const actionViewStack = Session.get(\"admin/actionView\");\n\n    if (Array.isArray(actionViewStack) && actionViewStack.length) {\n      return actionViewStack.pop();\n    }\n\n    return {};\n  },\n\n  getActionViewDetail() {\n    const detailViewStack = Session.get(\"admin/detailView\");\n\n    if (Array.isArray(detailViewStack) && detailViewStack.length) {\n      return detailViewStack.pop();\n    }\n\n    return {};\n  },\n\n  hideActionView() {\n    Session.set(\"admin/showActionView\", false);\n    this.clearActionView();\n  },\n\n  hideActionViewDetail() {\n    Session.set(\"admin/showActionViewDetail\", false);\n    this.clearActionViewDetail();\n  },\n\n  clearActionView() {\n    Session.set(\"admin/actionView\", [{\n      label: \"\",\n      i18nKeyLabel: \"\"\n    }]);\n    Session.set(\"admin/detailView\", [{\n      label: \"\",\n      i18nKeyLabel: \"\"\n    }]);\n  },\n\n  clearActionViewDetail() {\n    Session.set(\"admin/detailView\", [{\n      label: \"\",\n      i18nKeyLabel: \"\"\n    }]);\n  },\n\n  getCurrentTag() {\n    if (this.Router.getRouteName() === \"tag\") {\n      return this.Router.current().params.slug;\n    }\n  },\n\n  getRegistryForCurrentRoute(provides = \"dashboard\") {\n    this.Router.watchPathChange();\n    const currentRouteName = this.Router.getRouteName();\n    const currentRoute = this.Router.current();\n    const { template } = currentRoute.route.options;\n    // find registry entries for routeName\n    const reactionApp = Packages.findOne({\n      \"registry.name\": currentRouteName,\n      \"registry.provides\": provides,\n      \"enabled\": true\n    }, {\n      enabled: 1,\n      registry: 1,\n      route: 1,\n      name: 1,\n      label: 1,\n      settings: 1\n    });\n\n    // valid application\n    if (reactionApp) {\n      const settingsData = _.find(reactionApp.registry, (item) => item.provides && item.provides.includes(provides) && item.template === template);\n      return settingsData;\n    }\n    Logger.debug(\"getRegistryForCurrentRoute not found\", template, provides);\n    return {};\n  },\n\n  /**\n   * getMarketplaceSettingsFromPackages finds the enabled `reaction-marketplace` package for\n   * the primary shop and returns the settings\n   * @method getMarketplaceSettingsFromPackages\n   * @return {Object} The marketplace settings from the primary shop or undefined\n   */\n  getMarketplaceSettings() {\n    const marketplaceSettings = Packages.findOne({\n      name: \"reaction-marketplace\",\n      shopId: this.getPrimaryShopId(), // the primary shop always owns the marketplace settings\n      enabled: true // only use the marketplace settings if marketplace is enabled\n    });\n\n    return marketplaceSettings && marketplaceSettings.settings;\n  }\n\n};\n\n/**\n * createCountryCollection\n * Create a client-side only collection of Countries for a dropdown form\n * properly sorted*\n * @param {Object} countries -  The countries array on the Shop collection\n * @returns {Array} countryOptions - Sorted array of countries\n */\nfunction createCountryCollection(countries) {\n  check(countries, Object);\n  const countryOptions = [];\n  for (const locale in countries) {\n    if ({}.hasOwnProperty.call(countries, locale)) {\n      const country = countries[locale];\n      countryOptions.push({\n        label: country.name,\n        value: locale\n      });\n    }\n  }\n  countryOptions.sort((a, b) => {\n    if (a.label < b.label) {\n      return -1;\n    }\n    if (a.label > b.label) {\n      return 1;\n    }\n    return 0;\n  });\n\n  for (const country of countryOptions) {\n    Countries.insert(country);\n  }\n  return countryOptions;\n}\n\n/**\n * getDep\n * Gets the dependency for the key if available, else creates\n * a new dependency for the key and returns it.\n * @param {String} -  The key to get the dependency for\n * @returns {Tracker.Dependency}\n */\nfunction getDep(key) {\n  if (!deps.has(key)) {\n    deps.set(key, new Tracker.Dependency());\n  }\n  return deps.get(key);\n}\n","import accounting from \"accounting-js\";\nimport { Meteor } from \"meteor/meteor\";\nimport { Reaction, Logger } from \"/client/api\";\nimport { Shops, Accounts } from \"/lib/collections\";\nimport { currencyDep } from \"./main\";\n\n/**\n * @name findCurrency\n * @summary Private function for returning user currency\n * @private\n * @param {Object}  defaultCurrency    The default currency\n * @param {Boolean} useDefaultShopCurrency - flag for displaying shop's currency in Admin view of PDP\n * @return {Object}  user currency or shop currency if none is found\n */\nexport function findCurrency(defaultCurrency, useDefaultShopCurrency) {\n  const shop = Shops.findOne(Reaction.getPrimaryShopId(), {\n    fields: {\n      currencies: 1,\n      currency: 1\n    }\n  });\n\n  const shopCurrency = (shop && shop.currency) || \"USD\";\n  const user = Accounts.findOne({\n    _id: Meteor.userId()\n  });\n  const profileCurrency = user && user.profile && user.profile.currency;\n  if (typeof shop === \"object\" && shop.currencies && profileCurrency) {\n    let userCurrency = {};\n    if (shop.currencies[profileCurrency]) {\n      if (useDefaultShopCurrency) {\n        userCurrency = shop.currencies[shop.currency];\n        userCurrency.exchangeRate = 1;\n      } else {\n        userCurrency = shop.currencies[profileCurrency];\n        userCurrency.exchangeRate = shop.currencies[profileCurrency].rate;\n      }\n    }\n    return userCurrency;\n  }\n  return shop.currencies[shopCurrency];\n}\n\n/**\n * @name formatPriceString\n * @summary Return shop/locale specific formatted price. Also accepts a range formatted with \" - \".\n * @memberof i18n\n * @method\n * @param {String} formatPrice - currentPrice or \"xx.xx - xx.xx\" formatted String\n * @param {Boolean} useDefaultShopCurrency - flag for displaying shop's currency in Admin view of PDP\n * @return {String} returns locale formatted and exchange rate converted values\n */\nexport function formatPriceString(formatPrice, useDefaultShopCurrency) {\n  let defaultShopCurrency = useDefaultShopCurrency;\n\n  // in case useDefaultShopCurrency is a Spacebars.kw we have this check\n  if (typeof useDefaultShopCurrency === \"object\" || !useDefaultShopCurrency) {\n    defaultShopCurrency = false;\n  }\n\n  currencyDep.depend();\n  const locale = Reaction.Locale.get();\n\n  if (typeof locale !== \"object\" || typeof locale.currency !== \"object\") {\n    // locale not yet loaded, so we don\"t need to return anything.\n    return false;\n  }\n\n  if (typeof formatPrice !== \"string\" && typeof formatPrice !== \"number\") {\n    return false;\n  }\n\n  // get user currency instead of locale currency\n  const userCurrency = findCurrency(locale.currency, defaultShopCurrency);\n\n  // for the cases then we have only one price. It is a number.\n  const currentPrice = formatPrice.toString();\n  let price = 0;\n  const prices = currentPrice.indexOf(\" - \") >= 0 ?\n    currentPrice.split(\" - \") : [currentPrice];\n\n  // basic \"for\" is faster then \"for ...of\" for arrays. We need more speed here\n  const len = prices.length;\n  for (let i = 0; i < len; i += 1) {\n    const originalPrice = prices[i];\n    try {\n      // we know the locale, but we don\"t know exchange rate. In that case we\n      // should return to default shop currency\n      if (typeof userCurrency.rate !== \"number\") {\n        throw new Meteor.Error(\"invalid-exchange-rate\", \"Exchange rate is invalid\");\n      }\n      // Only convert for non-admin view.\n      if (!defaultShopCurrency) {\n        prices[i] *= userCurrency.rate;\n      }\n\n      price = _formatPrice(\n        price, originalPrice, prices[i],\n        currentPrice, userCurrency, i, len\n      );\n    } catch (error) {\n      Logger.debug(\"currency error, fallback to shop currency\");\n      price = _formatPrice(\n        price, originalPrice, prices[i],\n        currentPrice, locale.shopCurrency, i, len\n      );\n    }\n  }\n  return price;\n}\n\n/**\n * @name formatNumber\n * @memberof i18n\n * @method\n * @param {String} currentPrice - current Price\n * @return {String} return formatted number\n */\nexport function formatNumber(currentPrice) {\n  const locale = Reaction.Locale.get();\n  let price = currentPrice;\n  const format = Object.assign({}, locale.currency, {\n    format: \"%v\"\n  });\n  const shopFormat = Object.assign({}, locale.shopCurrency, {\n    format: \"%v\"\n  });\n\n  if (typeof locale.currency === \"object\" && locale.currency.rate) {\n    price = currentPrice * locale.currency.rate;\n    return accounting.formatMoney(price, format);\n  }\n\n  Logger.debug(\"currency error, fallback to shop currency\");\n  return accounting.formatMoney(currentPrice, shopFormat);\n}\n\n/**\n * _formatPrice\n * private function for formatting locale currency\n * @private\n * @param  {Number} price         price\n * @param  {Number} originalPrice originalPrice\n * @param  {Number} actualPrice   actualPrice\n * @param  {Number} currentPrice  currentPrice\n * @param  {Number} currency      currency\n * @param  {Number} pos           position\n * @param  {Number} len           length\n * @return {Number}               formatted price\n */\nfunction _formatPrice(\n  price, originalPrice, actualPrice, currentPrice, currency,\n  pos, len\n) {\n  // this checking for locale.shopCurrency mostly\n  if (typeof currency !== \"object\") {\n    return false;\n  }\n\n  let adjustedPrice = actualPrice;\n  let formattedPrice;\n\n  // Precision is mis-used in accounting js. Scale is the propery term for number\n  // of decimal places. Let's adjust it here so accounting.js does not break.\n  if (currency.scale !== undefined) {\n    currency.precision = currency.scale;\n  }\n\n  // If there are no decimal places, in the case of the Japanese Yen, we adjust it here.\n  if (currency.scale === 0) {\n    adjustedPrice = actualPrice * 100;\n  }\n\n  // @param {string} currency.where: If it presents - in situation then two\n  // prices in string, currency sign will be placed just outside the right price.\n  // For now it should be manually added to fixtures shop data.\n  if (typeof currency.where === \"string\" && currency.where === \"right\" &&\n    len > 1 && pos === 0) {\n    const modifiedCurrency = Object.assign({}, currency, {\n      symbol: \"\"\n    });\n    formattedPrice = accounting.formatMoney(adjustedPrice, modifiedCurrency);\n  } else {\n    // accounting api: http://openexchangerates.github.io/accounting.js/\n    formattedPrice = accounting.formatMoney(adjustedPrice, currency);\n  }\n\n  return price === 0 ? currentPrice.replace(originalPrice, formattedPrice) : price.replace(originalPrice, formattedPrice);\n}\n","import { Meteor } from \"meteor/meteor\";\nimport { Template } from \"meteor/templating\";\nimport { check, Match } from \"meteor/check\";\nimport { Reaction, Logger, i18next } from \"/client/api\";\nimport { Shops, Accounts } from \"/lib/collections\";\nimport { localeDep, i18nextDep } from \"./main\";\nimport { formatPriceString } from \"./currency\";\n\n/**\n * @name i18n\n * @see http://i18next.com/\n * @summary Pass the translation key as the first argument and the default message as the second argument\n * @memberof i18n\n * @method\n * @param {String} i18nKey - i18nKey\n * @param {String} i18nMessage - message text\n * @example {{i18n \"accountsTemplate.error\" \"Invalid Email\"}}\n * @return {String} returns i18n translated message\n */\nTemplate.registerHelper(\"i18n\", (i18nKey, i18nMessage) => {\n  if (!i18nKey || typeof i18nMessage !== \"string\") {\n    Logger.warn(\"i18n key string required to translate\", i18nKey, i18nMessage);\n    return \"\";\n  }\n  check(i18nKey, String);\n  check(i18nMessage, String);\n\n  i18nextDep.depend();\n\n  // returning translated key\n  return i18next.t(i18nKey, { defaultValue: i18nMessage });\n});\n\n/**\n * @name currencySymbol\n * @memberof i18n\n * @method\n * @summary Eeturn shop /locale specific currency format (ie: $)\n * @returns {String} return current locale currency symbol\n */\nTemplate.registerHelper(\"currencySymbol\", () => {\n  const locale = Reaction.Locale.get();\n  const user = Accounts.findOne({\n    _id: Meteor.userId()\n  });\n  const profileCurrency = user.profile && user.profile.currency;\n  if (profileCurrency) {\n    const shop = Shops.findOne();\n    if (Match.test(shop, Object) && shop.currencies) {\n      return shop.currencies[profileCurrency].symbol;\n    }\n  }\n  return locale.currency.symbol;\n});\n\n/**\n * @name formatPrice\n * @memberof i18n\n * @method\n * @summary Return shop /locale specific formatted price. Also accepts a range formatted with \" - \"\n * @example {{formatPrice displayPrice}}\n * @param {String} currentPrice - currentPrice or \"xx.xx - xx.xx\" formatted String\n * @param {Boolean} useDefaultShopCurrency - flag for displaying shop's currency in Admin view of PDP\n * @return {String} returns locale formatted and exchange rate converted values\n */\nTemplate.registerHelper(\"formatPrice\", (formatPrice, useDefaultShopCurrency) => {\n  localeDep.depend();\n  return formatPriceString(formatPrice, useDefaultShopCurrency);\n});\n","import i18next, { getBrowserLanguage, i18nextDep, localeDep, currencyDep } from \"./main\";\n\nexport * from \"./currency\";\nexport {\n  i18next,\n  getBrowserLanguage,\n  i18nextDep,\n  localeDep,\n  currencyDep\n};\n","import i18nextBrowserLanguageDetector from \"i18next-browser-languagedetector\";\nimport i18nextLocalStorageCache from \"i18next-localstorage-cache\";\nimport i18nextSprintfPostProcessor from \"i18next-sprintf-postprocessor\";\nimport i18nextJquery from \"jquery-i18next\";\nimport { Meteor } from \"meteor/meteor\";\nimport { Template } from \"meteor/templating\";\nimport { $ } from \"meteor/jquery\";\nimport { Tracker } from \"meteor/tracker\";\nimport { ReactiveVar } from \"meteor/reactive-var\";\nimport SimpleSchema from \"simpl-schema\";\nimport { Reaction } from \"/client/api\";\nimport { Shops, Translations, Packages } from \"/lib/collections\";\nimport Schemas from \"@reactioncommerce/schemas\";\nimport i18next, { getLabelsFor, getValidationErrorMessages, i18nextDep, currencyDep } from \"./main\";\nimport { mergeDeep } from \"/lib/api\";\n\n/**\n * Every schema that feature an expireMonth and an expireYear\n * field will be validated against the dateBeforeNow rule.\n */\nSimpleSchema.addValidator(function () {\n  let expireMonth;\n  let expireYear;\n  let sibling;\n  if (this.key === \"expireMonth\") {\n    sibling = \"expireYear\";\n    expireMonth = this.value;\n    expireYear = this.field(sibling).value;\n  }\n  if (this.key === \"expireYear\") {\n    sibling = \"expireMonth\";\n    expireMonth = this.field(sibling).value;\n    expireYear = this.value;\n  }\n  if (expireYear && expireMonth) {\n    const now = new Date();\n    const expire = new Date(expireYear, expireMonth);\n    if (now > expire) {\n      return \"dateBeforeNow\";\n    }\n\n    // Remove error message from the other field as well.\n    const validationErrors = this.validationContext && this.validationContext._validationErrors;\n    const deps = this.validationContext && this.validationContext._deps;\n    if (validationErrors) {\n      const index = validationErrors.findIndex((error) => error.name === sibling && error.type === \"dateBeforeNow\");\n      if (index !== -1) {\n        validationErrors.splice(index, 1);\n        if (deps) deps[sibling].changed();\n      }\n    }\n  }\n});\n\n/**\n * Error messages that are used for all SimpleSchema instances\n * ATM, validation errors are not translated in Reaction in general.\n */\nSimpleSchema.setDefaultMessages({\n  messages: {\n    en: {\n      dateBeforeNow: \"Dates in the past are not allowed.\"\n    }\n  }\n});\n\n// setup options for i18nextBrowserLanguageDetector\n// note: this isn't fully operational yet\n// language is set by user currently\n// progress toward detecting language\n// should focus around i18nextBrowserLanguageDetector\n//\nconst options = {\n  // order and from where user language should be detected\n  order: [\"querystring\", \"cookie\", \"localStorage\", \"navigator\", \"htmlTag\"],\n\n  // keys or params to lookup language from\n  lookupQuerystring: \"lng\",\n  lookupCookie: \"i18next\",\n  lookupLocalStorage: \"i18nextLng\",\n\n  // cache user language on\n  caches: [\"localStorage\", \"cookie\"],\n  // optional htmlTag with lang attribute, the default is:\n  htmlTag: document.documentElement\n};\n\nconst userProfileLanguage = new ReactiveVar(null);\n\nMeteor.startup(() => {\n  // We need to ensure fine-grained reactivity on only the profile.lang because\n  // user.profile changed frequently and causes excessive reruns\n  Tracker.autorun(() => {\n    const userId = Meteor.userId();\n    const user = userId && Meteor.users.findOne(userId, { fields: { profile: 1 } });\n    userProfileLanguage.set((user && user.profile && user.profile.lang) || null);\n  });\n  // use tracker autorun to detect language changes\n  // this only runs on initial page loaded\n  // and when user.profile.lang updates\n  Tracker.autorun(() => {\n    if (!Reaction.Subscriptions.PrimaryShop.ready() ||\n      !Reaction.Subscriptions.MerchantShops.ready()) return;\n\n    // Depend on user.profile.language reactively\n    const userLanguage = userProfileLanguage.get();\n\n    // Choose shop to get language from\n    let shopId;\n    if (Reaction.marketplaceEnabled && Reaction.merchantLanguage) {\n      shopId = Reaction.getShopId();\n    } else {\n      shopId = Reaction.getPrimaryShopId();\n    }\n    // By specifying \"fields\", we limit reruns to only when that field changes\n    const shop = Shops.findOne({ _id: shopId }, { fields: { language: 1 }, reactive: false });\n    const shopLanguage = (shop && shop.language) || null;\n\n    // Use fallbacks to determine the final language\n    const language = userLanguage || shopLanguage || \"en\";\n\n    //\n    // subscribe to user + shop Translations\n    //\n    return Meteor.subscribe(\"Translations\", language, () => {\n      // Get the list of packages for that shop\n      const packageNamespaces = Packages.find({\n        shopId\n      }, {\n        fields: {\n          name: 1\n        }\n      }).map((pkg) => pkg.name);\n\n      //\n      // reduce and merge translations\n      // into i18next resource format\n      //\n      let resources = {};\n      Translations.find({}).forEach((translation) => {\n        resources = mergeDeep(resources, {\n          [translation.i18n]: translation.translation\n        });\n      });\n\n      //\n      // initialize i18next\n      //\n      i18next\n        .use(i18nextBrowserLanguageDetector)\n        .use(i18nextLocalStorageCache)\n        .use(i18nextSprintfPostProcessor)\n        .init({\n          detection: options,\n          debug: false,\n          ns: packageNamespaces, // translation namespace for every package\n          defaultNS: \"core\", // reaction \"core\" is the default namespace\n          fallbackNS: packageNamespaces,\n          lng: language,\n          fallbackLng: shopLanguage,\n          resources\n        }, () => {\n          // Loop through registered Schemas to change labels and messages\n          for (const schemaName in Schemas) {\n            if ({}.hasOwnProperty.call(Schemas, schemaName)) {\n              const schemaInstance = Schemas[schemaName];\n              schemaInstance.labels(getLabelsFor(schemaInstance, schemaName));\n              schemaInstance.messageBox.messages({\n                [language]: getValidationErrorMessages()\n              });\n              schemaInstance.messageBox.setLanguage(language);\n            }\n          }\n\n          i18nextDep.changed();\n\n          // global first time init event finds and replaces\n          // data-i18n attributes in html/template source.\n          $(\"[data-i18n]\").localize();\n\n          // apply language direction to html\n          if (i18next.dir(language) === \"rtl\") {\n            return $(\"html\").addClass(\"rtl\");\n          }\n          return $(\"html\").removeClass(\"rtl\");\n        });\n    }); // return\n  });\n\n  // Detect user currency changes.\n  // These two autoruns work together to ensure currencyDep is only considered\n  // to be changed when it should be.\n  // XXX currencyDep is not used by the main app. Maybe can get rid of this\n  // if no add-on packages use it?\n  const userCurrency = new ReactiveVar();\n  Tracker.autorun(() => {\n    // We are using the reactive var only to be sure that currencyDep.changed()\n    // is called only when the value is actually changed from the previous value.\n    const currency = userCurrency.get();\n    if (currency) currencyDep.changed();\n  });\n  Tracker.autorun(() => {\n    const user = Meteor.user();\n    if (Reaction.Subscriptions.PrimaryShop.ready() &&\n        Reaction.Subscriptions.MerchantShops.ready() &&\n        user) {\n      userCurrency.set((user.profile && user.profile.currency) || undefined);\n    }\n  });\n\n  //\n  // init i18nextJquery\n  //\n  i18nextJquery.init(i18next, $, {\n    tName: \"t\", // --> appends $.t = i18next.t\n    i18nName: \"i18n\", // --> appends $.i18n = i18next\n    handleName: \"localize\", // --> appends $(selector).localize(opts);\n    selectorAttr: \"data-i18n\", // selector for translating elements\n    targetAttr: \"data-i18n-target\", // element attribute to grab target element to translate (if diffrent then itself)\n    parseDefaultValueFromContent: true // parses default values from content ele.val or ele.text\n  });\n\n  // global onRendered event finds and replaces\n  // data-i18n attributes in html/template source.\n  // uses methods from i18nextJquery\n  Template.onRendered(function () {\n    this.autorun((function () {\n      return function () {\n        i18nextDep.depend();\n        $(\"[data-i18n]\").localize();\n      };\n    })(this));\n  });\n});\n","import i18next from \"i18next\";\nimport { values } from \"lodash\";\nimport SimpleSchema from \"simpl-schema\";\nimport { Meteor } from \"meteor/meteor\";\nimport { Tracker } from \"meteor/tracker\";\nimport { Logger, Reaction } from \"/client/api\";\n\n/**\n * @file **Internationalization**\n * Methods and template helpers for i18n, translations, right-to-left (RTL) and currency exchange support\n * @namespace i18n\n */\n\n/**\n * @name getBrowserLanguage\n * @method\n * @memberof i18n\n * @summary Detects device default language\n * @return {String} language code\n */\nexport function getBrowserLanguage() {\n  if (typeof navigator.languages !== \"undefined\") {\n    if (navigator.languages[0].indexOf(\"-\") >= 0) {\n      return navigator.languages[0].split(\"-\")[0];\n    } else if (navigator.languages[0].indexOf(\"_\") >= 0) {\n      return navigator.languages[0].split(\"_\")[0];\n    }\n    return navigator.languages[0];\n  }\n  return navigator.language || navigator.browserLanguage;\n}\n\n/**\n * @name getLabelsFor\n * @method\n * @memberof i18n\n * @summary Get Labels for simple.schema keys\n * @param  {Object} schema - schema\n * @param  {String} name - name\n * @return {Object} return schema label object\n */\nexport function getLabelsFor(schema, name) {\n  const titleCaseName = name.charAt(0).toLowerCase() + name.slice(1);\n  const labels = {};\n  // loop through all the rendered form fields and generate i18n keys\n  Object.keys(schema.mergedSchema()).forEach((fieldName) => {\n    const i18nKey = `${titleCaseName}.${fieldName.split(\".$\").join(\"\")}`;\n    // translate autoform label\n    const t = i18next.t(i18nKey);\n    if (t && new RegExp(\"string\").test(t) !== true && t !== i18nKey) {\n      labels[fieldName] = t;\n    }\n  });\n  return labels;\n}\n\n/**\n * @name getValidationErrorMessages\n * @method\n * @memberof i18n\n * @summary Get i18n messages for autoform messages. Currently using a globalMessage namespace only.\n * 1. Use schema-specific message for specific key\n * 2. Use schema-specific message for generic key\n * 3. Use schema-specific message for type\n * @todo Implement messaging hierarchy from simple-schema\n * @return {Object} returns i18n translated message for schema labels\n */\nexport function getValidationErrorMessages() {\n  const messages = {};\n  values(SimpleSchema.ErrorTypes).forEach((errorType) => {\n    const i18nKey = `globalMessages.${errorType}`;\n    const message = i18next.t(i18nKey);\n    if (new RegExp(\"string\").test(message) !== true && message !== i18nKey) {\n      messages[errorType] = message;\n    }\n  });\n  return messages;\n}\n\n// set language and autorun on change of language\n// initialize i18n and load data resources for the current language and fallback \"EN\"\nexport const i18nextDep = new Tracker.Dependency();\nexport const localeDep = new Tracker.Dependency();\nexport const currencyDep = new Tracker.Dependency();\n\nMeteor.startup(() => {\n  Tracker.autorun((c) => {\n    let merchantShopsReadyOrSkipped = false;\n\n    // Choose shopSubscription based on marketplace settings\n    if (Reaction.marketplaceEnabled && Reaction.merchantLanguage) {\n      merchantShopsReadyOrSkipped = Reaction.Subscriptions.MerchantShops.ready();\n    } else {\n      merchantShopsReadyOrSkipped = true;\n    }\n\n    // setting local and active packageNamespaces\n    // packageNamespaces are used to determine i18n namespace\n    if (Reaction.Subscriptions.PrimaryShop.ready() && merchantShopsReadyOrSkipped) {\n      // use i18n detected language to getLocale info and set it client side\n      Meteor.call(\"shop/getLocale\", (error, result) => {\n        if (error || !result) {\n          Logger.error(error, \"Unable to get shop locale\");\n          return;\n        }\n\n        const locale = result;\n        locale.language = getBrowserLanguage();\n\n        Reaction.Locale.set(locale);\n        localeDep.changed();\n\n        // Stop the tracker\n        c.stop();\n      });\n    }\n  });\n});\n\nexport default i18next;\n","import { bunyan } from \"@reactioncommerce/logger\";\nimport { Meteor } from \"meteor/meteor\";\n\n/*\n * configure bunyan logging module for reaction client\n * See: https://github.com/trentm/node-bunyan#levels\n * client we'll cofigure WARN as default\n */\nconst levels = [\"FATAL\", \"ERROR\", \"WARN\", \"INFO\", \"DEBUG\", \"TRACE\"];\n\n// set stdout log level\nlet level = Meteor.settings.public.REACTION_LOG_LEVEL || \"WARN\";\n\nlevel = level.toUpperCase();\n\nif (!levels.includes(level)) {\n  level = \"WARN\";\n}\n\nconst Logger = bunyan.createLogger({\n  name: \"reaction-client\",\n  level\n});\n\nexport default Logger;\n","import { Template } from \"meteor/templating\";\nimport { Meteor } from \"meteor/meteor\";\nimport Router from \"./main\";\n\n//\n// pathFor\n// template helper to return path\n//\nTemplate.registerHelper(\"pathFor\", Router.pathFor);\n\n//\n// urlFor\n// template helper to return absolute + path\n//\nTemplate.registerHelper(\"urlFor\", (path, params) => Meteor.absoluteUrl(Router.pathFor(path, params).substr(1)));\n\nTemplate.registerHelper(\"active\", Router.isActiveClassName);\n","export default from \"/imports/plugins/core/router/lib/hooks\";\n","export { default as Router } from \"/imports/plugins/core/router/lib/router\";\n","import { Router } from \"@reactioncommerce/reaction-router\";\n\nexport default Router;\n","import { Reaction } from \"/client/modules/core\";\nimport { Router } from \"/client/modules/router\";\n\nwindow.ReactionCore = Reaction;\nwindow.ReactionRouter = Router;\n\nexport {\n  Reaction,\n  Router\n};\n\nexport * from \"/client/modules/i18n\";\nexport { default as Logger } from \"/client/modules/logger\";\n","import { Mongo } from \"meteor/mongo\";\n\n/**\n * Client side collections\n * @ignore\n */\n\nexport const Countries = new Mongo.Collection(null);\n","export * from \"./countries\";\nexport * from \"./taxEntitycodes\";\n","import { Mongo } from \"meteor/mongo\";\n\n/**\n * Client side collections\n * @ignore\n */\nexport const TaxEntityCodes = new Mongo.Collection(null);\n","import { Session } from \"meteor/session\";\nimport { AutoForm } from \"meteor/aldeed:autoform\";\n\n/**\n * @namespace Constants\n *\n * @description Application global variables and constants to set to configure default layout, workflows and more.\n * Learn how to override layout and workflow constants in the [docs](https://docs.reactioncommerce.com/reaction-docs/master/layout).\n */\n\n/**\n * @constant\n * @type {string}\n * @default\n * @name DEFAULT_LAYOUT\n * @memberof Constants\n * @summary Use this to override a default layout. Learn [what layouts are](https://docs.reactioncommerce.com/reaction-docs/master/layout) and how to [create a custom layout](https://docs.reactioncommerce.com/reaction-docs/master/plugin-layouts-3) in the docs.\n * @example import { Session } from \"meteor/session\";\n * Session.set(\"DEFAULT_LAYOUT\", \"customCoreLayout\");\n */\nexport const DEFAULT_LAYOUT = \"coreLayout\";\n\n/**\n * @constant\n * @type {string}\n * @default\n * @name DEFAULT_WORKFLOW\n * @memberof Constants\n * @summary Use this to override and set default workflow\n */\nexport const DEFAULT_WORKFLOW = \"coreWorkflow\";\n\n/**\n * @constant\n * @type {string}\n * @default\n * @name INDEX_OPTIONS\n * @memberof Constants\n * @summary Use this to override the home Package\n * @example Session.set(\"INDEX_OPTIONS\", {\n    template: \"customHomePageTemplate\",\n    layoutHeader: \"NavBar\",\n    layoutFooter: \"Footer\",\n    notFound: \"notFound\",\n    dashboardControls: \"dashboardControls\",\n    adminControlsFooter: \"adminControlsFooter\"\n  });\n */\nexport const INDEX_OPTIONS = {\n  workflow: \"coreProductGridWorkflow\"\n};\n\n/**\n * @constant\n * @type {number}\n * @default\n * @name ITEMS_INCREMENT\n * @memberof Constants\n * @summary Set default number of items to load for product grid\n */\nexport const ITEMS_INCREMENT = 24;\n\n/**\n * Set Reaction layout defaults\n */\nSession.setDefault(\"DEFAULT_LAYOUT\", DEFAULT_LAYOUT);\nSession.setDefault(\"DEFAULT_WORKFLOW\", DEFAULT_WORKFLOW);\nSession.setDefault(\"INDEX_OPTIONS\", INDEX_OPTIONS);\nSession.setDefault(\"productScrollLimit\", ITEMS_INCREMENT);\n\n/**\n * Autoform default template\n */\nAutoForm.setDefaultTemplate(\"bootstrap3\");\n","\n/**\n * ***** DO NOT EDIT THIS FILE MANUALLY *****\n * This file is generated automatically by the Reaction\n * plugin loader and will be reset at each startup.\n */\n\nimport '/imports/plugins/core/accounts/client';\nimport '/imports/plugins/core/catalog/client';\nimport '/imports/plugins/core/checkout/client';\nimport '/imports/plugins/core/connectors/client';\nimport '/imports/plugins/core/dashboard/client';\nimport '/imports/plugins/core/dom/client';\nimport '/imports/plugins/core/email/client';\nimport '/imports/plugins/core/files/client';\nimport '/imports/plugins/core/i18n/client';\nimport '/imports/plugins/core/layout/client';\nimport '/imports/plugins/core/orders/client';\nimport '/imports/plugins/core/payments/client';\nimport '/imports/plugins/core/revisions/client';\nimport '/imports/plugins/core/router/client';\nimport '/imports/plugins/core/shipping/client';\nimport '/imports/plugins/core/taxes/client';\nimport '/imports/plugins/core/templates/client';\nimport '/imports/plugins/core/ui/client';\nimport '/imports/plugins/core/ui-navbar/client';\nimport '/imports/plugins/core/ui-tagnav/client';\nimport '/imports/plugins/included/connectors-shopify/client';\nimport '/imports/plugins/included/default-theme/client';\nimport '/imports/plugins/included/discount-codes/client';\nimport '/imports/plugins/included/discount-rates/client';\nimport '/imports/plugins/included/inventory/client';\nimport '/imports/plugins/included/marketplace/client';\nimport '/imports/plugins/included/notifications/client';\nimport '/imports/plugins/included/payments-authnet/client';\nimport '/imports/plugins/included/payments-braintree/client';\nimport '/imports/plugins/included/payments-paypal/client';\nimport '/imports/plugins/included/payments-stripe/client';\nimport '/imports/plugins/included/product-admin/client';\nimport '/imports/plugins/included/product-detail-simple/client';\nimport '/imports/plugins/included/product-variant/client';\nimport '/imports/plugins/included/search-mongo/client';\nimport '/imports/plugins/included/shipping-rates/client';\nimport '/imports/plugins/included/shipping-shippo/client';\nimport '/imports/plugins/included/sms/client';\nimport '/imports/plugins/included/social/client';\nimport '/imports/plugins/included/taxes-avalara/client';\nimport '/imports/plugins/included/taxes-taxcloud/client';\nimport '/imports/plugins/included/taxes-taxjar/client';\nimport '/imports/plugins/included/ui-search/client';\nimport '/imports/plugins/custom/knowledge-payments/client';\nimport '/imports/plugins/custom/knowledge-theme/client';\n"]}